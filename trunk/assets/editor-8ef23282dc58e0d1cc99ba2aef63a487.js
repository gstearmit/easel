function css_beautify(t, e) {
    function i() {
        return p = t.charAt(++g);
    }
    function n() {
        return t.charAt(g + 1);
    }
    function o(e) {
        for (var n = g; i(); ) if ("\\" == p) i(), i(); else {
            if (p == e) break;
            if ("\n" == p) break;
        }
        return t.substring(n, g + 1);
    }
    function r() {
        for (var t = g; f.test(n()); ) g++;
        return g != t;
    }
    function s() {
        var t = g;
        do ; while (f.test(i()));
        return g != t + 1;
    }
    function a() {
        var e = g;
        for (i(); i(); ) if ("*" == p && "/" == n()) {
            g++;
            break;
        }
        return t.substring(e, g + 1);
    }
    function l(t, e) {
        return b.slice(-t.length + (e || 0), e).join("").toLowerCase() == t;
    }
    function c() {
        v++, m += _;
    }
    function h() {
        v--, m = m.slice(0, -u);
    }
    e = e || {};
    var u = e.indent_size || 4, d = e.indent_char || " ";
    "string" == typeof u && (u = parseInt(u));
    var p, f = /^\s+$/, g = -1, m = t.match(/^[\r\n]*[\t ]*/)[0], _ = Array(u + 1).join(d), v = 0, y = {};
    y["{"] = function(t) {
        y.singleSpace(), b.push(t), y.newLine();
    }, y["}"] = function(t) {
        y.newLine(), b.push(t), y.newLine();
    }, y.newLine = function(t) {
        if (!t) for (;f.test(b[b.length - 1]); ) b.pop();
        b.length && b.push("\n"), m && b.push(m);
    }, y.singleSpace = function() {
        b.length && !f.test(b[b.length - 1]) && b.push(" ");
    };
    var b = [];
    for (m && b.push(m); ;) {
        var w = s();
        if (!p) break;
        "{" == p ? (c(), y["{"](p)) :"}" == p ? (h(), y["}"](p)) :'"' == p || "'" == p ? b.push(o(p)) :";" == p ? b.push(p, "\n", m) :"/" == p && "*" == n() ? (y.newLine(), 
        b.push(a(), "\n", m)) :"(" == p ? (b.push(p), r(), l("url", -1) && i() && (")" != p && '"' != p && "'" != p ? b.push(o(")")) :g--)) :")" == p ? b.push(p) :"," == p ? (r(), 
        b.push(p), y.singleSpace()) :"]" == p ? b.push(p) :"[" == p || "=" == p ? (r(), 
        b.push(p)) :(w && y.singleSpace(), b.push(p));
    }
    var C = b.join("").replace(/[\n ]+$/, "");
    return C;
}

function style_html(t, e) {
    function i() {
        return this.pos = 0, this.token = "", this.current_mode = "CONTENT", this.tags = {
            parent:"parent1",
            parentcount:1,
            parent1:""
        }, this.tag_type = "", this.token_text = this.last_token = this.last_text = this.token_type = "", 
        this.Utils = {
            whitespace:"\n\r	 ".split(""),
            single_token:"br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed,?php,?,?=".split(","),
            extra_liners:"head,body,/html".split(","),
            in_array:function(t, e) {
                for (var i = 0; i < e.length; i++) if (t === e[i]) return !0;
                return !1;
            }
        }, this.get_content = function() {
            for (var t = "", e = [], i = !1; "<" !== this.input.charAt(this.pos); ) {
                if (this.pos >= this.input.length) return e.length ? e.join("") :[ "", "TK_EOF" ];
                if (t = this.input.charAt(this.pos), this.pos++, this.line_char_count++, this.Utils.in_array(t, this.Utils.whitespace)) e.length && (i = !0), 
                this.line_char_count--; else {
                    if (i) {
                        if (this.line_char_count >= this.max_char) {
                            e.push("\n");
                            for (var n = 0; n < this.indent_level; n++) e.push(this.indent_string);
                            this.line_char_count = 0;
                        } else e.push(" "), this.line_char_count++;
                        i = !1;
                    }
                    e.push(t);
                }
            }
            return e.length ? e.join("") :"";
        }, this.get_contents_to = function(t) {
            if (this.pos == this.input.length) return [ "", "TK_EOF" ];
            var e = "", i = new RegExp("</" + t + "\\s*>", "igm");
            i.lastIndex = this.pos;
            var n = i.exec(this.input), o = n ? n.index :this.input.length;
            return this.pos < o && (e = this.input.substring(this.pos, o), this.pos = o), e;
        }, this.record_tag = function(t) {
            this.tags[t + "count"] ? (this.tags[t + "count"]++, this.tags[t + this.tags[t + "count"]] = this.indent_level) :(this.tags[t + "count"] = 1, 
            this.tags[t + this.tags[t + "count"]] = this.indent_level), this.tags[t + this.tags[t + "count"] + "parent"] = this.tags.parent, 
            this.tags.parent = t + this.tags[t + "count"];
        }, this.retrieve_tag = function(t) {
            if (this.tags[t + "count"]) {
                for (var e = this.tags.parent; e && t + this.tags[t + "count"] !== e; ) e = this.tags[e + "parent"];
                e && (this.indent_level = this.tags[t + this.tags[t + "count"]], this.tags.parent = this.tags[e + "parent"]), 
                delete this.tags[t + this.tags[t + "count"] + "parent"], delete this.tags[t + this.tags[t + "count"]], 
                1 == this.tags[t + "count"] ? delete this.tags[t + "count"] :this.tags[t + "count"]--;
            }
        }, this.get_tag = function(t) {
            var e, i, n = "", o = [], r = !1, t = "undefined" != typeof t ? t :!1, s = this.pos, a = this.line_char_count;
            do {
                if (this.pos >= this.input.length) return t && (this.pos = s, this.line_char_count = a), 
                o.length ? o.join("") :[ "", "TK_EOF" ];
                n = this.input.charAt(this.pos), this.pos++, this.line_char_count++, this.Utils.in_array(n, this.Utils.whitespace) ? (r = !0, 
                this.line_char_count--) :(("'" === n || '"' === n) && (o[1] && "!" === o[1] || (n += this.get_unformatted(n), 
                r = !0)), "=" === n && (r = !1), o.length && "=" !== o[o.length - 1] && ">" !== n && r && (this.line_char_count >= this.max_char ? (this.print_newline(!1, o), 
                this.line_char_count = 0) :(o.push(" "), this.line_char_count++), r = !1), "<" === n && (e = this.pos - 1), 
                o.push(n));
            } while (">" !== n);
            var c, h = o.join("");
            c = -1 != h.indexOf(" ") ? h.indexOf(" ") :h.indexOf(">");
            var u = h.substring(1, c).toLowerCase();
            if ("/" === h.charAt(h.length - 2) || this.Utils.in_array(u, this.Utils.single_token)) t || (this.tag_type = "SINGLE"); else if ("script" === u) t || (this.record_tag(u), 
            this.tag_type = "SCRIPT"); else if ("style" === u) t || (this.record_tag(u), this.tag_type = "STYLE"); else if (this.is_unformatted(u, l)) {
                var d = this.get_unformatted("</" + u + ">", h);
                o.push(d), e > 0 && this.Utils.in_array(this.input.charAt(e - 1), this.Utils.whitespace) && o.splice(0, 0, this.input.charAt(e - 1)), 
                i = this.pos - 1, this.Utils.in_array(this.input.charAt(i + 1), this.Utils.whitespace) && o.push(this.input.charAt(i + 1)), 
                this.tag_type = "SINGLE";
            } else if ("!" === u.charAt(0)) if (-1 != u.indexOf("[if")) {
                if (-1 != h.indexOf("!IE")) {
                    var d = this.get_unformatted("-->", h);
                    o.push(d);
                }
                t || (this.tag_type = "START");
            } else if (-1 != u.indexOf("[endif")) this.tag_type = "END", this.unindent(); else if (-1 != u.indexOf("[cdata[")) {
                var d = this.get_unformatted("]]>", h);
                o.push(d), t || (this.tag_type = "SINGLE");
            } else {
                var d = this.get_unformatted("-->", h);
                o.push(d), this.tag_type = "SINGLE";
            } else t || ("/" === u.charAt(0) ? (this.retrieve_tag(u.substring(1)), this.tag_type = "END") :(this.record_tag(u), 
            this.tag_type = "START"), this.Utils.in_array(u, this.Utils.extra_liners) && this.print_newline(!0, this.output));
            return t && (this.pos = s, this.line_char_count = a), o.join("");
        }, this.get_unformatted = function(t, e) {
            if (e && -1 != e.toLowerCase().indexOf(t)) return "";
            var i = "", n = "", o = !0;
            do {
                if (this.pos >= this.input.length) return n;
                if (i = this.input.charAt(this.pos), this.pos++, this.Utils.in_array(i, this.Utils.whitespace)) {
                    if (!o) {
                        this.line_char_count--;
                        continue;
                    }
                    if ("\n" === i || "\r" === i) {
                        n += "\n", this.line_char_count = 0;
                        continue;
                    }
                }
                n += i, this.line_char_count++, o = !0;
            } while (-1 == n.toLowerCase().indexOf(t));
            return n;
        }, this.get_token = function() {
            var t;
            if ("TK_TAG_SCRIPT" === this.last_token || "TK_TAG_STYLE" === this.last_token) {
                var e = this.last_token.substr(7);
                return t = this.get_contents_to(e), "string" != typeof t ? t :[ t, "TK_" + e ];
            }
            if ("CONTENT" === this.current_mode) return t = this.get_content(), "string" != typeof t ? t :[ t, "TK_CONTENT" ];
            if ("TAG" === this.current_mode) {
                if (t = this.get_tag(), "string" != typeof t) return t;
                var i = "TK_TAG_" + this.tag_type;
                return [ t, i ];
            }
        }, this.get_full_indent = function(t) {
            return t = this.indent_level + t || 0, 1 > t ? "" :Array(t + 1).join(this.indent_string);
        }, this.is_unformatted = function(t, e) {
            if (!this.Utils.in_array(t, e)) return !1;
            if ("a" !== t.toLowerCase() || !this.Utils.in_array("a", e)) return !0;
            var i = this.get_tag(!0);
            return i && this.Utils.in_array(i, e) ? !0 :!1;
        }, this.printer = function(t, e, i, n, o) {
            this.input = t || "", this.output = [], this.indent_character = e, this.indent_string = "", 
            this.indent_size = i, this.brace_style = o, this.indent_level = 0, this.max_char = n, 
            this.line_char_count = 0;
            for (var r = 0; r < this.indent_size; r++) this.indent_string += this.indent_character;
            this.print_newline = function(t, e) {
                if (this.line_char_count = 0, e && e.length) {
                    if (!t) for (;this.Utils.in_array(e[e.length - 1], this.Utils.whitespace); ) e.pop();
                    e.push("\n");
                    for (var i = 0; i < this.indent_level; i++) e.push(this.indent_string);
                }
            }, this.print_token = function(t) {
                this.output.push(t);
            }, this.indent = function() {
                this.indent_level++;
            }, this.unindent = function() {
                this.indent_level > 0 && this.indent_level--;
            };
        }, this;
    }
    var n, o, r, s, a, l;
    for (e = e || {}, o = e.indent_size || 4, r = e.indent_char || " ", a = e.brace_style || "collapse", 
    s = 0 == e.max_char ? 1/0 :e.max_char || 250, l = e.unformatted || [ "a", "bdo", "em", "strong", "dfn", "code", "samp", "kbd", "var", "cite", "abbr", "acronym", "q", "sub", "sup", "tt", "i", "b", "big", "small", "u", "s", "strike", "font", "ins", "del", "pre", "address", "dt" ], 
    n = new i(), n.printer(t, r, o, s, a); ;) {
        var c = n.get_token();
        if (n.token_text = c[0], n.token_type = c[1], "TK_EOF" === n.token_type) break;
        switch (n.token_type) {
          case "TK_TAG_START":
            n.print_newline(!1, n.output), n.print_token(n.token_text), n.indent(), n.current_mode = "CONTENT";
            break;

          case "TK_TAG_STYLE":
          case "TK_TAG_SCRIPT":
            n.print_newline(!1, n.output), n.print_token(n.token_text), n.current_mode = "CONTENT";
            break;

          case "TK_TAG_END":
            if ("TK_CONTENT" === n.last_token && "" === n.last_text) {
                var h = n.token_text.match(/\w+/)[0], u = n.output[n.output.length - 1].match(/<\s*(\w+)/);
                (null === u || u[1] !== h) && n.print_newline(!0, n.output);
            }
            n.print_token(n.token_text), n.current_mode = "CONTENT";
            break;

          case "TK_TAG_SINGLE":
            var d = n.token_text.match(/^\s*<([a-z]+)/i);
            d && n.Utils.in_array(d[1], l) || n.print_newline(!1, n.output), n.print_token(n.token_text), 
            n.current_mode = "CONTENT";
            break;

          case "TK_CONTENT":
            "" !== n.token_text && n.print_token(n.token_text), n.current_mode = "TAG";
            break;

          case "TK_STYLE":
          case "TK_SCRIPT":
            if ("" !== n.token_text) {
                n.output.push("\n");
                var p = n.token_text;
                if ("TK_SCRIPT" == n.token_type) var f = "function" == typeof js_beautify && js_beautify; else if ("TK_STYLE" == n.token_type) var f = "function" == typeof css_beautify && css_beautify;
                if ("keep" == e.indent_scripts) var g = 0; else if ("separate" == e.indent_scripts) var g = -n.indent_level; else var g = 1;
                var m = n.get_full_indent(g);
                if (f) p = f(p.replace(/^\s*/, m), e); else {
                    var _ = p.match(/^\s*/)[0], v = _.match(/[^\n\r]*$/)[0].split(n.indent_string).length - 1, y = n.get_full_indent(g - v);
                    p = p.replace(/^\s*/, m).replace(/\r\n|\r|\n/g, "\n" + y).replace(/\s*$/, "");
                }
                p && (n.print_token(p), n.print_newline(!0, n.output));
            }
            n.current_mode = "TAG";
        }
        n.last_token = n.token_type, n.last_text = n.token_text;
    }
    return n.output.join("");
}

function sanitizeCssSelectors(t, e) {
    function i(i, n) {
        function s(i, n, o) {
            var r, s, l, c, h;
            for (r = "", n > i && (c = t[i].toLowerCase(), ("*" === c || "body" === c && i + 1 !== n && !o || "number" == typeof (h = html4.ELEMENTS[c]) && !(h & html4.eflags.UNSAFE)) && (++i, 
            r = c)), s = ""; n > i; ) {
                if (c = t[i], "#" === c.charAt(0)) {
                    if (/^#_|__$|[^#0-9A-Za-z:_\-]/.test(c)) return null;
                    s += c + "-" + e;
                } else {
                    if ("." !== c) break;
                    if (!(++i < n && /^[0-9A-Za-z:_\-]+$/.test(c = t[i])) || /^_|__$/.test(c)) return null;
                    s += "." + c;
                }
                ++i;
            }
            if (l = "", n > i && ":" === t[i] && (c = t[++i], "visited" === c || "link" === c)) {
                if (!/^[a*]?$/.test(r)) return null;
                a = !0, l = ":" + c, r = "a", ++i;
            }
            return i === n ? r + s + l :null;
        }
        var a = !1;
        " " === t[i] && ++i, n - 1 !== i && " " === t[n] && --n;
        for (var l = [], c = i, h = "", u = i; n > u; ++u) {
            var d = t[u], p = ">" === d;
            if (p || " " === d) {
                if (h = s(c, u, !1), !h || p && /^html/i.test(h)) return;
                c = u + 1, l.push(h, p ? " > " :" ");
            }
        }
        if (h = s(c, n, !0)) {
            l.push(h);
            var f = l.join("");
            f = /^body\b/.test(f) ? ".vdoc-body___." + e + f.substring(4) :"." + e + " " + f, 
            (a ? o :r).push(f);
        }
    }
    var n, o = [], r = [], s = 0;
    for (n = 0; n < t.length; ++n) (" " != t[n] || ">" != t[n - 1] && ">" != t[n + 1]) && (t[s++] = t[n]);
    t.length = s;
    var a = t.length, l = 0;
    for (n = 0; a > n; ++n) "," == t[n] && (i(l, n), l = n + 1);
    return i(l, a), [ r, o ];
}

window.TESTING || console.log("loading js"), /*!
 * jQuery JavaScript Library v1.9.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2012 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-2-4
 */
function(t, e) {
    function i(t) {
        var e = t.length, i = le.type(t);
        return le.isWindow(t) ? !1 :1 === t.nodeType && e ? !0 :"array" === i || "function" !== i && (0 === e || "number" == typeof e && e > 0 && e - 1 in t);
    }
    function n(t) {
        var e = Te[t] = {};
        return le.each(t.match(he) || [], function(t, i) {
            e[i] = !0;
        }), e;
    }
    function o(t, i, n, o) {
        if (le.acceptData(t)) {
            var r, s, a = le.expando, l = "string" == typeof i, c = t.nodeType, h = c ? le.cache :t, u = c ? t[a] :t[a] && a;
            if (u && h[u] && (o || h[u].data) || !l || n !== e) return u || (c ? t[a] = u = Q.pop() || le.guid++ :u = a), 
            h[u] || (h[u] = {}, c || (h[u].toJSON = le.noop)), ("object" == typeof i || "function" == typeof i) && (o ? h[u] = le.extend(h[u], i) :h[u].data = le.extend(h[u].data, i)), 
            r = h[u], o || (r.data || (r.data = {}), r = r.data), n !== e && (r[le.camelCase(i)] = n), 
            l ? (s = r[i], null == s && (s = r[le.camelCase(i)])) :s = r, s;
        }
    }
    function r(t, e, i) {
        if (le.acceptData(t)) {
            var n, o, r, s = t.nodeType, l = s ? le.cache :t, c = s ? t[le.expando] :le.expando;
            if (l[c]) {
                if (e && (r = i ? l[c] :l[c].data)) {
                    le.isArray(e) ? e = e.concat(le.map(e, le.camelCase)) :e in r ? e = [ e ] :(e = le.camelCase(e), 
                    e = e in r ? [ e ] :e.split(" "));
                    for (n = 0, o = e.length; o > n; n++) delete r[e[n]];
                    if (!(i ? a :le.isEmptyObject)(r)) return;
                }
                (i || (delete l[c].data, a(l[c]))) && (s ? le.cleanData([ t ], !0) :le.support.deleteExpando || l != l.window ? delete l[c] :l[c] = null);
            }
        }
    }
    function s(t, i, n) {
        if (n === e && 1 === t.nodeType) {
            var o = "data-" + i.replace(Ee, "-$1").toLowerCase();
            if (n = t.getAttribute(o), "string" == typeof n) {
                try {
                    n = "true" === n ? !0 :"false" === n ? !1 :"null" === n ? null :+n + "" === n ? +n :De.test(n) ? le.parseJSON(n) :n;
                } catch (r) {}
                le.data(t, i, n);
            } else n = e;
        }
        return n;
    }
    function a(t) {
        var e;
        for (e in t) if (("data" !== e || !le.isEmptyObject(t[e])) && "toJSON" !== e) return !1;
        return !0;
    }
    function l() {
        return !0;
    }
    function c() {
        return !1;
    }
    function h(t, e) {
        do t = t[e]; while (t && 1 !== t.nodeType);
        return t;
    }
    function u(t, e, i) {
        if (e = e || 0, le.isFunction(e)) return le.grep(t, function(t, n) {
            var o = !!e.call(t, n, t);
            return o === i;
        });
        if (e.nodeType) return le.grep(t, function(t) {
            return t === e === i;
        });
        if ("string" == typeof e) {
            var n = le.grep(t, function(t) {
                return 1 === t.nodeType;
            });
            if ($e.test(e)) return le.filter(e, n, !i);
            e = le.filter(e, n);
        }
        return le.grep(t, function(t) {
            return le.inArray(t, e) >= 0 === i;
        });
    }
    function d(t) {
        var e = Ve.split("|"), i = t.createDocumentFragment();
        if (i.createElement) for (;e.length; ) i.createElement(e.pop());
        return i;
    }
    function p(t, e) {
        return t.getElementsByTagName(e)[0] || t.appendChild(t.ownerDocument.createElement(e));
    }
    function f(t) {
        var e = t.getAttributeNode("type");
        return t.type = (e && e.specified) + "/" + t.type, t;
    }
    function g(t) {
        var e = oi.exec(t.type);
        return e ? t.type = e[1] :t.removeAttribute("type"), t;
    }
    function m(t, e) {
        for (var i, n = 0; null != (i = t[n]); n++) le._data(i, "globalEval", !e || le._data(e[n], "globalEval"));
    }
    function _(t, e) {
        if (1 === e.nodeType && le.hasData(t)) {
            var i, n, o, r = le._data(t), s = le._data(e, r), a = r.events;
            if (a) {
                delete s.handle, s.events = {};
                for (i in a) for (n = 0, o = a[i].length; o > n; n++) le.event.add(e, i, a[i][n]);
            }
            s.data && (s.data = le.extend({}, s.data));
        }
    }
    function v(t, e) {
        var i, n, o;
        if (1 === e.nodeType) {
            if (i = e.nodeName.toLowerCase(), !le.support.noCloneEvent && e[le.expando]) {
                o = le._data(e);
                for (n in o.events) le.removeEvent(e, n, o.handle);
                e.removeAttribute(le.expando);
            }
            "script" === i && e.text !== t.text ? (f(e).text = t.text, g(e)) :"object" === i ? (e.parentNode && (e.outerHTML = t.outerHTML), 
            le.support.html5Clone && t.innerHTML && !le.trim(e.innerHTML) && (e.innerHTML = t.innerHTML)) :"input" === i && ei.test(t.type) ? (e.defaultChecked = e.checked = t.checked, 
            e.value !== t.value && (e.value = t.value)) :"option" === i ? e.defaultSelected = e.selected = t.defaultSelected :("input" === i || "textarea" === i) && (e.defaultValue = t.defaultValue);
        }
    }
    function y(t, i) {
        var n, o, r = 0, s = typeof t.getElementsByTagName !== W ? t.getElementsByTagName(i || "*") :typeof t.querySelectorAll !== W ? t.querySelectorAll(i || "*") :e;
        if (!s) for (s = [], n = t.childNodes || t; null != (o = n[r]); r++) !i || le.nodeName(o, i) ? s.push(o) :le.merge(s, y(o, i));
        return i === e || i && le.nodeName(t, i) ? le.merge([ t ], s) :s;
    }
    function b(t) {
        ei.test(t.type) && (t.defaultChecked = t.checked);
    }
    function w(t, e) {
        if (e in t) return e;
        for (var i = e.charAt(0).toUpperCase() + e.slice(1), n = e, o = Di.length; o--; ) if (e = Di[o] + i, 
        e in t) return e;
        return n;
    }
    function C(t, e) {
        return t = e || t, "none" === le.css(t, "display") || !le.contains(t.ownerDocument, t);
    }
    function T(t, e) {
        for (var i, n, o, r = [], s = 0, a = t.length; a > s; s++) n = t[s], n.style && (r[s] = le._data(n, "olddisplay"), 
        i = n.style.display, e ? (r[s] || "none" !== i || (n.style.display = ""), "" === n.style.display && C(n) && (r[s] = le._data(n, "olddisplay", S(n.nodeName)))) :r[s] || (o = C(n), 
        (i && "none" !== i || !o) && le._data(n, "olddisplay", o ? i :le.css(n, "display"))));
        for (s = 0; a > s; s++) n = t[s], n.style && (e && "none" !== n.style.display && "" !== n.style.display || (n.style.display = e ? r[s] || "" :"none"));
        return t;
    }
    function D(t, e, i) {
        var n = _i.exec(e);
        return n ? Math.max(0, n[1] - (i || 0)) + (n[2] || "px") :e;
    }
    function E(t, e, i, n, o) {
        for (var r = i === (n ? "border" :"content") ? 4 :"width" === e ? 1 :0, s = 0; 4 > r; r += 2) "margin" === i && (s += le.css(t, i + Ti[r], !0, o)), 
        n ? ("content" === i && (s -= le.css(t, "padding" + Ti[r], !0, o)), "margin" !== i && (s -= le.css(t, "border" + Ti[r] + "Width", !0, o))) :(s += le.css(t, "padding" + Ti[r], !0, o), 
        "padding" !== i && (s += le.css(t, "border" + Ti[r] + "Width", !0, o)));
        return s;
    }
    function x(t, e, i) {
        var n = !0, o = "width" === e ? t.offsetWidth :t.offsetHeight, r = hi(t), s = le.support.boxSizing && "border-box" === le.css(t, "boxSizing", !1, r);
        if (0 >= o || null == o) {
            if (o = ui(t, e, r), (0 > o || null == o) && (o = t.style[e]), vi.test(o)) return o;
            n = s && (le.support.boxSizingReliable || o === t.style[e]), o = parseFloat(o) || 0;
        }
        return o + E(t, e, i || (s ? "border" :"content"), n, r) + "px";
    }
    function S(t) {
        var e = q, i = bi[t];
        return i || (i = O(t, e), "none" !== i && i || (ci = (ci || le("<iframe frameborder='0' width='0' height='0'/>").css("cssText", "display:block !important")).appendTo(e.documentElement), 
        e = (ci[0].contentWindow || ci[0].contentDocument).document, e.write("<!doctype html><html><body>"), 
        e.close(), i = O(t, e), ci.detach()), bi[t] = i), i;
    }
    function O(t, e) {
        var i = le(e.createElement(t)).appendTo(e.body), n = le.css(i[0], "display");
        return i.remove(), n;
    }
    function k(t, e, i, n) {
        var o;
        if (le.isArray(e)) le.each(e, function(e, o) {
            i || xi.test(t) ? n(t, o) :k(t + "[" + ("object" == typeof o ? e :"") + "]", o, i, n);
        }); else if (i || "object" !== le.type(e)) n(t, e); else for (o in e) k(t + "[" + o + "]", e[o], i, n);
    }
    function I(t) {
        return function(e, i) {
            "string" != typeof e && (i = e, e = "*");
            var n, o = 0, r = e.toLowerCase().match(he) || [];
            if (le.isFunction(i)) for (;n = r[o++]; ) "+" === n[0] ? (n = n.slice(1) || "*", 
            (t[n] = t[n] || []).unshift(i)) :(t[n] = t[n] || []).push(i);
        };
    }
    function R(t, e, i, n) {
        function o(a) {
            var l;
            return r[a] = !0, le.each(t[a] || [], function(t, a) {
                var c = a(e, i, n);
                return "string" != typeof c || s || r[c] ? s ? !(l = c) :void 0 :(e.dataTypes.unshift(c), 
                o(c), !1);
            }), l;
        }
        var r = {}, s = t === $i;
        return o(e.dataTypes[0]) || !r["*"] && o("*");
    }
    function P(t, i) {
        var n, o, r = le.ajaxSettings.flatOptions || {};
        for (o in i) i[o] !== e && ((r[o] ? t :n || (n = {}))[o] = i[o]);
        return n && le.extend(!0, t, n), t;
    }
    function N(t, i, n) {
        var o, r, s, a, l = t.contents, c = t.dataTypes, h = t.responseFields;
        for (a in h) a in n && (i[h[a]] = n[a]);
        for (;"*" === c[0]; ) c.shift(), r === e && (r = t.mimeType || i.getResponseHeader("Content-Type"));
        if (r) for (a in l) if (l[a] && l[a].test(r)) {
            c.unshift(a);
            break;
        }
        if (c[0] in n) s = c[0]; else {
            for (a in n) {
                if (!c[0] || t.converters[a + " " + c[0]]) {
                    s = a;
                    break;
                }
                o || (o = a);
            }
            s = s || o;
        }
        return s ? (s !== c[0] && c.unshift(s), n[s]) :void 0;
    }
    function A(t, e) {
        var i, n, o, r, s = {}, a = 0, l = t.dataTypes.slice(), c = l[0];
        if (t.dataFilter && (e = t.dataFilter(e, t.dataType)), l[1]) for (o in t.converters) s[o.toLowerCase()] = t.converters[o];
        for (;n = l[++a]; ) if ("*" !== n) {
            if ("*" !== c && c !== n) {
                if (o = s[c + " " + n] || s["* " + n], !o) for (i in s) if (r = i.split(" "), r[1] === n && (o = s[c + " " + r[0]] || s["* " + r[0]])) {
                    o === !0 ? o = s[i] :s[i] !== !0 && (n = r[0], l.splice(a--, 0, n));
                    break;
                }
                if (o !== !0) if (o && t["throws"]) e = o(e); else try {
                    e = o(e);
                } catch (h) {
                    return {
                        state:"parsererror",
                        error:o ? h :"No conversion from " + c + " to " + n
                    };
                }
            }
            c = n;
        }
        return {
            state:"success",
            data:e
        };
    }
    function M() {
        try {
            return new t.XMLHttpRequest();
        } catch (e) {}
    }
    function L() {
        try {
            return new t.ActiveXObject("Microsoft.XMLHTTP");
        } catch (e) {}
    }
    function B() {
        return setTimeout(function() {
            Zi = e;
        }), Zi = le.now();
    }
    function z(t, e) {
        le.each(e, function(e, i) {
            for (var n = (rn[e] || []).concat(rn["*"]), o = 0, r = n.length; r > o; o++) if (n[o].call(t, e, i)) return;
        });
    }
    function K(t, e, i) {
        var n, o, r = 0, s = on.length, a = le.Deferred().always(function() {
            delete l.elem;
        }), l = function() {
            if (o) return !1;
            for (var e = Zi || B(), i = Math.max(0, c.startTime + c.duration - e), n = i / c.duration || 0, r = 1 - n, s = 0, l = c.tweens.length; l > s; s++) c.tweens[s].run(r);
            return a.notifyWith(t, [ c, r, i ]), 1 > r && l ? i :(a.resolveWith(t, [ c ]), !1);
        }, c = a.promise({
            elem:t,
            props:le.extend({}, e),
            opts:le.extend(!0, {
                specialEasing:{}
            }, i),
            originalProperties:e,
            originalOptions:i,
            startTime:Zi || B(),
            duration:i.duration,
            tweens:[],
            createTween:function(e, i) {
                var n = le.Tween(t, c.opts, e, i, c.opts.specialEasing[e] || c.opts.easing);
                return c.tweens.push(n), n;
            },
            stop:function(e) {
                var i = 0, n = e ? c.tweens.length :0;
                if (o) return this;
                for (o = !0; n > i; i++) c.tweens[i].run(1);
                return e ? a.resolveWith(t, [ c, e ]) :a.rejectWith(t, [ c, e ]), this;
            }
        }), h = c.props;
        for (F(h, c.opts.specialEasing); s > r; r++) if (n = on[r].call(c, t, h, c.opts)) return n;
        return z(c, h), le.isFunction(c.opts.start) && c.opts.start.call(t, c), le.fx.timer(le.extend(l, {
            elem:t,
            anim:c,
            queue:c.opts.queue
        })), c.progress(c.opts.progress).done(c.opts.done, c.opts.complete).fail(c.opts.fail).always(c.opts.always);
    }
    function F(t, e) {
        var i, n, o, r, s;
        for (o in t) if (n = le.camelCase(o), r = e[n], i = t[o], le.isArray(i) && (r = i[1], 
        i = t[o] = i[0]), o !== n && (t[n] = i, delete t[o]), s = le.cssHooks[n], s && "expand" in s) {
            i = s.expand(i), delete t[n];
            for (o in i) o in t || (t[o] = i[o], e[o] = r);
        } else e[n] = r;
    }
    function j(t, e, i) {
        var n, o, r, s, a, l, c, h, u, d = this, p = t.style, f = {}, g = [], m = t.nodeType && C(t);
        i.queue || (h = le._queueHooks(t, "fx"), null == h.unqueued && (h.unqueued = 0, 
        u = h.empty.fire, h.empty.fire = function() {
            h.unqueued || u();
        }), h.unqueued++, d.always(function() {
            d.always(function() {
                h.unqueued--, le.queue(t, "fx").length || h.empty.fire();
            });
        })), 1 === t.nodeType && ("height" in e || "width" in e) && (i.overflow = [ p.overflow, p.overflowX, p.overflowY ], 
        "inline" === le.css(t, "display") && "none" === le.css(t, "float") && (le.support.inlineBlockNeedsLayout && "inline" !== S(t.nodeName) ? p.zoom = 1 :p.display = "inline-block")), 
        i.overflow && (p.overflow = "hidden", le.support.shrinkWrapBlocks || d.always(function() {
            p.overflow = i.overflow[0], p.overflowX = i.overflow[1], p.overflowY = i.overflow[2];
        }));
        for (o in e) if (s = e[o], tn.exec(s)) {
            if (delete e[o], l = l || "toggle" === s, s === (m ? "hide" :"show")) continue;
            g.push(o);
        }
        if (r = g.length) {
            a = le._data(t, "fxshow") || le._data(t, "fxshow", {}), "hidden" in a && (m = a.hidden), 
            l && (a.hidden = !m), m ? le(t).show() :d.done(function() {
                le(t).hide();
            }), d.done(function() {
                var e;
                le._removeData(t, "fxshow");
                for (e in f) le.style(t, e, f[e]);
            });
            for (o = 0; r > o; o++) n = g[o], c = d.createTween(n, m ? a[n] :0), f[n] = a[n] || le.style(t, n), 
            n in a || (a[n] = c.start, m && (c.end = c.start, c.start = "width" === n || "height" === n ? 1 :0));
        }
    }
    function H(t, e, i, n, o) {
        return new H.prototype.init(t, e, i, n, o);
    }
    function $(t, e) {
        var i, n = {
            height:t
        }, o = 0;
        for (e = e ? 1 :0; 4 > o; o += 2 - e) i = Ti[o], n["margin" + i] = n["padding" + i] = t;
        return e && (n.opacity = n.width = t), n;
    }
    function G(t) {
        return le.isWindow(t) ? t :9 === t.nodeType ? t.defaultView || t.parentWindow :!1;
    }
    var U, V, W = typeof e, q = t.document, Y = t.location, J = t.jQuery, X = t.$, Z = {}, Q = [], te = "1.9.1", ee = Q.concat, ie = Q.push, ne = Q.slice, oe = Q.indexOf, re = Z.toString, se = Z.hasOwnProperty, ae = te.trim, le = function(t, e) {
        return new le.fn.init(t, e, V);
    }, ce = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source, he = /\S+/g, ue = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, de = /^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/, pe = /^<(\w+)\s*\/?>(?:<\/\1>|)$/, fe = /^[\],:{}\s]*$/, ge = /(?:^|:|,)(?:\s*\[)+/g, me = /\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g, _e = /"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g, ve = /^-ms-/, ye = /-([\da-z])/gi, be = function(t, e) {
        return e.toUpperCase();
    }, we = function(t) {
        (q.addEventListener || "load" === t.type || "complete" === q.readyState) && (Ce(), 
        le.ready());
    }, Ce = function() {
        q.addEventListener ? (q.removeEventListener("DOMContentLoaded", we, !1), t.removeEventListener("load", we, !1)) :(q.detachEvent("onreadystatechange", we), 
        t.detachEvent("onload", we));
    };
    le.fn = le.prototype = {
        jquery:te,
        constructor:le,
        init:function(t, i, n) {
            var o, r;
            if (!t) return this;
            if ("string" == typeof t) {
                if (o = "<" === t.charAt(0) && ">" === t.charAt(t.length - 1) && t.length >= 3 ? [ null, t, null ] :de.exec(t), 
                !o || !o[1] && i) return !i || i.jquery ? (i || n).find(t) :this.constructor(i).find(t);
                if (o[1]) {
                    if (i = i instanceof le ? i[0] :i, le.merge(this, le.parseHTML(o[1], i && i.nodeType ? i.ownerDocument || i :q, !0)), 
                    pe.test(o[1]) && le.isPlainObject(i)) for (o in i) le.isFunction(this[o]) ? this[o](i[o]) :this.attr(o, i[o]);
                    return this;
                }
                if (r = q.getElementById(o[2]), r && r.parentNode) {
                    if (r.id !== o[2]) return n.find(t);
                    this.length = 1, this[0] = r;
                }
                return this.context = q, this.selector = t, this;
            }
            return t.nodeType ? (this.context = this[0] = t, this.length = 1, this) :le.isFunction(t) ? n.ready(t) :(t.selector !== e && (this.selector = t.selector, 
            this.context = t.context), le.makeArray(t, this));
        },
        selector:"",
        length:0,
        size:function() {
            return this.length;
        },
        toArray:function() {
            return ne.call(this);
        },
        get:function(t) {
            return null == t ? this.toArray() :0 > t ? this[this.length + t] :this[t];
        },
        pushStack:function(t) {
            var e = le.merge(this.constructor(), t);
            return e.prevObject = this, e.context = this.context, e;
        },
        each:function(t, e) {
            return le.each(this, t, e);
        },
        ready:function(t) {
            return le.ready.promise().done(t), this;
        },
        slice:function() {
            return this.pushStack(ne.apply(this, arguments));
        },
        first:function() {
            return this.eq(0);
        },
        last:function() {
            return this.eq(-1);
        },
        eq:function(t) {
            var e = this.length, i = +t + (0 > t ? e :0);
            return this.pushStack(i >= 0 && e > i ? [ this[i] ] :[]);
        },
        map:function(t) {
            return this.pushStack(le.map(this, function(e, i) {
                return t.call(e, i, e);
            }));
        },
        end:function() {
            return this.prevObject || this.constructor(null);
        },
        push:ie,
        sort:[].sort,
        splice:[].splice
    }, le.fn.init.prototype = le.fn, le.extend = le.fn.extend = function() {
        var t, i, n, o, r, s, a = arguments[0] || {}, l = 1, c = arguments.length, h = !1;
        for ("boolean" == typeof a && (h = a, a = arguments[1] || {}, l = 2), "object" == typeof a || le.isFunction(a) || (a = {}), 
        c === l && (a = this, --l); c > l; l++) if (null != (r = arguments[l])) for (o in r) t = a[o], 
        n = r[o], a !== n && (h && n && (le.isPlainObject(n) || (i = le.isArray(n))) ? (i ? (i = !1, 
        s = t && le.isArray(t) ? t :[]) :s = t && le.isPlainObject(t) ? t :{}, a[o] = le.extend(h, s, n)) :n !== e && (a[o] = n));
        return a;
    }, le.extend({
        noConflict:function(e) {
            return t.$ === le && (t.$ = X), e && t.jQuery === le && (t.jQuery = J), le;
        },
        isReady:!1,
        readyWait:1,
        holdReady:function(t) {
            t ? le.readyWait++ :le.ready(!0);
        },
        ready:function(t) {
            if (t === !0 ? !--le.readyWait :!le.isReady) {
                if (!q.body) return setTimeout(le.ready);
                le.isReady = !0, t !== !0 && --le.readyWait > 0 || (U.resolveWith(q, [ le ]), le.fn.trigger && le(q).trigger("ready").off("ready"));
            }
        },
        isFunction:function(t) {
            return "function" === le.type(t);
        },
        isArray:Array.isArray || function(t) {
            return "array" === le.type(t);
        },
        isWindow:function(t) {
            return null != t && t == t.window;
        },
        isNumeric:function(t) {
            return !isNaN(parseFloat(t)) && isFinite(t);
        },
        type:function(t) {
            return null == t ? String(t) :"object" == typeof t || "function" == typeof t ? Z[re.call(t)] || "object" :typeof t;
        },
        isPlainObject:function(t) {
            if (!t || "object" !== le.type(t) || t.nodeType || le.isWindow(t)) return !1;
            try {
                if (t.constructor && !se.call(t, "constructor") && !se.call(t.constructor.prototype, "isPrototypeOf")) return !1;
            } catch (i) {
                return !1;
            }
            var n;
            for (n in t) ;
            return n === e || se.call(t, n);
        },
        isEmptyObject:function(t) {
            var e;
            for (e in t) return !1;
            return !0;
        },
        error:function(t) {
            throw new Error(t);
        },
        parseHTML:function(t, e, i) {
            if (!t || "string" != typeof t) return null;
            "boolean" == typeof e && (i = e, e = !1), e = e || q;
            var n = pe.exec(t), o = !i && [];
            return n ? [ e.createElement(n[1]) ] :(n = le.buildFragment([ t ], e, o), o && le(o).remove(), 
            le.merge([], n.childNodes));
        },
        parseJSON:function(e) {
            return t.JSON && t.JSON.parse ? t.JSON.parse(e) :null === e ? e :"string" == typeof e && (e = le.trim(e), 
            e && fe.test(e.replace(me, "@").replace(_e, "]").replace(ge, ""))) ? new Function("return " + e)() :(le.error("Invalid JSON: " + e), 
            void 0);
        },
        parseXML:function(i) {
            var n, o;
            if (!i || "string" != typeof i) return null;
            try {
                t.DOMParser ? (o = new DOMParser(), n = o.parseFromString(i, "text/xml")) :(n = new ActiveXObject("Microsoft.XMLDOM"), 
                n.async = "false", n.loadXML(i));
            } catch (r) {
                n = e;
            }
            return n && n.documentElement && !n.getElementsByTagName("parsererror").length || le.error("Invalid XML: " + i), 
            n;
        },
        noop:function() {},
        globalEval:function(e) {
            e && le.trim(e) && (t.execScript || function(e) {
                t.eval.call(t, e);
            })(e);
        },
        camelCase:function(t) {
            return t.replace(ve, "ms-").replace(ye, be);
        },
        nodeName:function(t, e) {
            return t.nodeName && t.nodeName.toLowerCase() === e.toLowerCase();
        },
        each:function(t, e, n) {
            var o, r = 0, s = t.length, a = i(t);
            if (n) {
                if (a) for (;s > r && (o = e.apply(t[r], n), o !== !1); r++) ; else for (r in t) if (o = e.apply(t[r], n), 
                o === !1) break;
            } else if (a) for (;s > r && (o = e.call(t[r], r, t[r]), o !== !1); r++) ; else for (r in t) if (o = e.call(t[r], r, t[r]), 
            o === !1) break;
            return t;
        },
        trim:ae && !ae.call("﻿ ") ? function(t) {
            return null == t ? "" :ae.call(t);
        } :function(t) {
            return null == t ? "" :(t + "").replace(ue, "");
        },
        makeArray:function(t, e) {
            var n = e || [];
            return null != t && (i(Object(t)) ? le.merge(n, "string" == typeof t ? [ t ] :t) :ie.call(n, t)), 
            n;
        },
        inArray:function(t, e, i) {
            var n;
            if (e) {
                if (oe) return oe.call(e, t, i);
                for (n = e.length, i = i ? 0 > i ? Math.max(0, n + i) :i :0; n > i; i++) if (i in e && e[i] === t) return i;
            }
            return -1;
        },
        merge:function(t, i) {
            var n = i.length, o = t.length, r = 0;
            if ("number" == typeof n) for (;n > r; r++) t[o++] = i[r]; else for (;i[r] !== e; ) t[o++] = i[r++];
            return t.length = o, t;
        },
        grep:function(t, e, i) {
            var n, o = [], r = 0, s = t.length;
            for (i = !!i; s > r; r++) n = !!e(t[r], r), i !== n && o.push(t[r]);
            return o;
        },
        map:function(t, e, n) {
            var o, r = 0, s = t.length, a = i(t), l = [];
            if (a) for (;s > r; r++) o = e(t[r], r, n), null != o && (l[l.length] = o); else for (r in t) o = e(t[r], r, n), 
            null != o && (l[l.length] = o);
            return ee.apply([], l);
        },
        guid:1,
        proxy:function(t, i) {
            var n, o, r;
            return "string" == typeof i && (r = t[i], i = t, t = r), le.isFunction(t) ? (n = ne.call(arguments, 2), 
            o = function() {
                return t.apply(i || this, n.concat(ne.call(arguments)));
            }, o.guid = t.guid = t.guid || le.guid++, o) :e;
        },
        access:function(t, i, n, o, r, s, a) {
            var l = 0, c = t.length, h = null == n;
            if ("object" === le.type(n)) {
                r = !0;
                for (l in n) le.access(t, i, l, n[l], !0, s, a);
            } else if (o !== e && (r = !0, le.isFunction(o) || (a = !0), h && (a ? (i.call(t, o), 
            i = null) :(h = i, i = function(t, e, i) {
                return h.call(le(t), i);
            })), i)) for (;c > l; l++) i(t[l], n, a ? o :o.call(t[l], l, i(t[l], n)));
            return r ? t :h ? i.call(t) :c ? i(t[0], n) :s;
        },
        now:function() {
            return new Date().getTime();
        }
    }), le.ready.promise = function(e) {
        if (!U) if (U = le.Deferred(), "complete" === q.readyState) setTimeout(le.ready); else if (q.addEventListener) q.addEventListener("DOMContentLoaded", we, !1), 
        t.addEventListener("load", we, !1); else {
            q.attachEvent("onreadystatechange", we), t.attachEvent("onload", we);
            var i = !1;
            try {
                i = null == t.frameElement && q.documentElement;
            } catch (n) {}
            i && i.doScroll && !function o() {
                if (!le.isReady) {
                    try {
                        i.doScroll("left");
                    } catch (t) {
                        return setTimeout(o, 50);
                    }
                    Ce(), le.ready();
                }
            }();
        }
        return U.promise(e);
    }, le.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(t, e) {
        Z["[object " + e + "]"] = e.toLowerCase();
    }), V = le(q);
    var Te = {};
    le.Callbacks = function(t) {
        t = "string" == typeof t ? Te[t] || n(t) :le.extend({}, t);
        var i, o, r, s, a, l, c = [], h = !t.once && [], u = function(e) {
            for (o = t.memory && e, r = !0, a = l || 0, l = 0, s = c.length, i = !0; c && s > a; a++) if (c[a].apply(e[0], e[1]) === !1 && t.stopOnFalse) {
                o = !1;
                break;
            }
            i = !1, c && (h ? h.length && u(h.shift()) :o ? c = [] :d.disable());
        }, d = {
            add:function() {
                if (c) {
                    var e = c.length;
                    !function n(e) {
                        le.each(e, function(e, i) {
                            var o = le.type(i);
                            "function" === o ? t.unique && d.has(i) || c.push(i) :i && i.length && "string" !== o && n(i);
                        });
                    }(arguments), i ? s = c.length :o && (l = e, u(o));
                }
                return this;
            },
            remove:function() {
                return c && le.each(arguments, function(t, e) {
                    for (var n; (n = le.inArray(e, c, n)) > -1; ) c.splice(n, 1), i && (s >= n && s--, 
                    a >= n && a--);
                }), this;
            },
            has:function(t) {
                return t ? le.inArray(t, c) > -1 :!(!c || !c.length);
            },
            empty:function() {
                return c = [], this;
            },
            disable:function() {
                return c = h = o = e, this;
            },
            disabled:function() {
                return !c;
            },
            lock:function() {
                return h = e, o || d.disable(), this;
            },
            locked:function() {
                return !h;
            },
            fireWith:function(t, e) {
                return e = e || [], e = [ t, e.slice ? e.slice() :e ], !c || r && !h || (i ? h.push(e) :u(e)), 
                this;
            },
            fire:function() {
                return d.fireWith(this, arguments), this;
            },
            fired:function() {
                return !!r;
            }
        };
        return d;
    }, le.extend({
        Deferred:function(t) {
            var e = [ [ "resolve", "done", le.Callbacks("once memory"), "resolved" ], [ "reject", "fail", le.Callbacks("once memory"), "rejected" ], [ "notify", "progress", le.Callbacks("memory") ] ], i = "pending", n = {
                state:function() {
                    return i;
                },
                always:function() {
                    return o.done(arguments).fail(arguments), this;
                },
                then:function() {
                    var t = arguments;
                    return le.Deferred(function(i) {
                        le.each(e, function(e, r) {
                            var s = r[0], a = le.isFunction(t[e]) && t[e];
                            o[r[1]](function() {
                                var t = a && a.apply(this, arguments);
                                t && le.isFunction(t.promise) ? t.promise().done(i.resolve).fail(i.reject).progress(i.notify) :i[s + "With"](this === n ? i.promise() :this, a ? [ t ] :arguments);
                            });
                        }), t = null;
                    }).promise();
                },
                promise:function(t) {
                    return null != t ? le.extend(t, n) :n;
                }
            }, o = {};
            return n.pipe = n.then, le.each(e, function(t, r) {
                var s = r[2], a = r[3];
                n[r[1]] = s.add, a && s.add(function() {
                    i = a;
                }, e[1 ^ t][2].disable, e[2][2].lock), o[r[0]] = function() {
                    return o[r[0] + "With"](this === o ? n :this, arguments), this;
                }, o[r[0] + "With"] = s.fireWith;
            }), n.promise(o), t && t.call(o, o), o;
        },
        when:function(t) {
            var e, i, n, o = 0, r = ne.call(arguments), s = r.length, a = 1 !== s || t && le.isFunction(t.promise) ? s :0, l = 1 === a ? t :le.Deferred(), c = function(t, i, n) {
                return function(o) {
                    i[t] = this, n[t] = arguments.length > 1 ? ne.call(arguments) :o, n === e ? l.notifyWith(i, n) :--a || l.resolveWith(i, n);
                };
            };
            if (s > 1) for (e = new Array(s), i = new Array(s), n = new Array(s); s > o; o++) r[o] && le.isFunction(r[o].promise) ? r[o].promise().done(c(o, n, r)).fail(l.reject).progress(c(o, i, e)) :--a;
            return a || l.resolveWith(n, r), l.promise();
        }
    }), le.support = function() {
        var e, i, n, o, r, s, a, l, c, h, u = q.createElement("div");
        if (u.setAttribute("className", "t"), u.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", 
        i = u.getElementsByTagName("*"), n = u.getElementsByTagName("a")[0], !i || !n || !i.length) return {};
        r = q.createElement("select"), a = r.appendChild(q.createElement("option")), o = u.getElementsByTagName("input")[0], 
        n.style.cssText = "top:1px;float:left;opacity:.5", e = {
            getSetAttribute:"t" !== u.className,
            leadingWhitespace:3 === u.firstChild.nodeType,
            tbody:!u.getElementsByTagName("tbody").length,
            htmlSerialize:!!u.getElementsByTagName("link").length,
            style:/top/.test(n.getAttribute("style")),
            hrefNormalized:"/a" === n.getAttribute("href"),
            opacity:/^0.5/.test(n.style.opacity),
            cssFloat:!!n.style.cssFloat,
            checkOn:!!o.value,
            optSelected:a.selected,
            enctype:!!q.createElement("form").enctype,
            html5Clone:"<:nav></:nav>" !== q.createElement("nav").cloneNode(!0).outerHTML,
            boxModel:"CSS1Compat" === q.compatMode,
            deleteExpando:!0,
            noCloneEvent:!0,
            inlineBlockNeedsLayout:!1,
            shrinkWrapBlocks:!1,
            reliableMarginRight:!0,
            boxSizingReliable:!0,
            pixelPosition:!1
        }, o.checked = !0, e.noCloneChecked = o.cloneNode(!0).checked, r.disabled = !0, 
        e.optDisabled = !a.disabled;
        try {
            delete u.test;
        } catch (d) {
            e.deleteExpando = !1;
        }
        o = q.createElement("input"), o.setAttribute("value", ""), e.input = "" === o.getAttribute("value"), 
        o.value = "t", o.setAttribute("type", "radio"), e.radioValue = "t" === o.value, 
        o.setAttribute("checked", "t"), o.setAttribute("name", "t"), s = q.createDocumentFragment(), 
        s.appendChild(o), e.appendChecked = o.checked, e.checkClone = s.cloneNode(!0).cloneNode(!0).lastChild.checked, 
        u.attachEvent && (u.attachEvent("onclick", function() {
            e.noCloneEvent = !1;
        }), u.cloneNode(!0).click());
        for (h in {
            submit:!0,
            change:!0,
            focusin:!0
        }) u.setAttribute(l = "on" + h, "t"), e[h + "Bubbles"] = l in t || u.attributes[l].expando === !1;
        return u.style.backgroundClip = "content-box", u.cloneNode(!0).style.backgroundClip = "", 
        e.clearCloneStyle = "content-box" === u.style.backgroundClip, le(function() {
            var i, n, o, r = "padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;", s = q.getElementsByTagName("body")[0];
            s && (i = q.createElement("div"), i.style.cssText = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px", 
            s.appendChild(i).appendChild(u), u.innerHTML = "<table><tr><td></td><td>t</td></tr></table>", 
            o = u.getElementsByTagName("td"), o[0].style.cssText = "padding:0;margin:0;border:0;display:none", 
            c = 0 === o[0].offsetHeight, o[0].style.display = "", o[1].style.display = "none", 
            e.reliableHiddenOffsets = c && 0 === o[0].offsetHeight, u.innerHTML = "", u.style.cssText = "box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;", 
            e.boxSizing = 4 === u.offsetWidth, e.doesNotIncludeMarginInBodyOffset = 1 !== s.offsetTop, 
            t.getComputedStyle && (e.pixelPosition = "1%" !== (t.getComputedStyle(u, null) || {}).top, 
            e.boxSizingReliable = "4px" === (t.getComputedStyle(u, null) || {
                width:"4px"
            }).width, n = u.appendChild(q.createElement("div")), n.style.cssText = u.style.cssText = r, 
            n.style.marginRight = n.style.width = "0", u.style.width = "1px", e.reliableMarginRight = !parseFloat((t.getComputedStyle(n, null) || {}).marginRight)), 
            typeof u.style.zoom !== W && (u.innerHTML = "", u.style.cssText = r + "width:1px;padding:1px;display:inline;zoom:1", 
            e.inlineBlockNeedsLayout = 3 === u.offsetWidth, u.style.display = "block", u.innerHTML = "<div></div>", 
            u.firstChild.style.width = "5px", e.shrinkWrapBlocks = 3 !== u.offsetWidth, e.inlineBlockNeedsLayout && (s.style.zoom = 1)), 
            s.removeChild(i), i = u = o = n = null);
        }), i = r = s = a = n = o = null, e;
    }();
    var De = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/, Ee = /([A-Z])/g;
    le.extend({
        cache:{},
        expando:"jQuery" + (te + Math.random()).replace(/\D/g, ""),
        noData:{
            embed:!0,
            object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",
            applet:!0
        },
        hasData:function(t) {
            return t = t.nodeType ? le.cache[t[le.expando]] :t[le.expando], !!t && !a(t);
        },
        data:function(t, e, i) {
            return o(t, e, i);
        },
        removeData:function(t, e) {
            return r(t, e);
        },
        _data:function(t, e, i) {
            return o(t, e, i, !0);
        },
        _removeData:function(t, e) {
            return r(t, e, !0);
        },
        acceptData:function(t) {
            if (t.nodeType && 1 !== t.nodeType && 9 !== t.nodeType) return !1;
            var e = t.nodeName && le.noData[t.nodeName.toLowerCase()];
            return !e || e !== !0 && t.getAttribute("classid") === e;
        }
    }), le.fn.extend({
        data:function(t, i) {
            var n, o, r = this[0], a = 0, l = null;
            if (t === e) {
                if (this.length && (l = le.data(r), 1 === r.nodeType && !le._data(r, "parsedAttrs"))) {
                    for (n = r.attributes; a < n.length; a++) o = n[a].name, o.indexOf("data-") || (o = le.camelCase(o.slice(5)), 
                    s(r, o, l[o]));
                    le._data(r, "parsedAttrs", !0);
                }
                return l;
            }
            return "object" == typeof t ? this.each(function() {
                le.data(this, t);
            }) :le.access(this, function(i) {
                return i === e ? r ? s(r, t, le.data(r, t)) :null :(this.each(function() {
                    le.data(this, t, i);
                }), void 0);
            }, null, i, arguments.length > 1, null, !0);
        },
        removeData:function(t) {
            return this.each(function() {
                le.removeData(this, t);
            });
        }
    }), le.extend({
        queue:function(t, e, i) {
            var n;
            return t ? (e = (e || "fx") + "queue", n = le._data(t, e), i && (!n || le.isArray(i) ? n = le._data(t, e, le.makeArray(i)) :n.push(i)), 
            n || []) :void 0;
        },
        dequeue:function(t, e) {
            e = e || "fx";
            var i = le.queue(t, e), n = i.length, o = i.shift(), r = le._queueHooks(t, e), s = function() {
                le.dequeue(t, e);
            };
            "inprogress" === o && (o = i.shift(), n--), r.cur = o, o && ("fx" === e && i.unshift("inprogress"), 
            delete r.stop, o.call(t, s, r)), !n && r && r.empty.fire();
        },
        _queueHooks:function(t, e) {
            var i = e + "queueHooks";
            return le._data(t, i) || le._data(t, i, {
                empty:le.Callbacks("once memory").add(function() {
                    le._removeData(t, e + "queue"), le._removeData(t, i);
                })
            });
        }
    }), le.fn.extend({
        queue:function(t, i) {
            var n = 2;
            return "string" != typeof t && (i = t, t = "fx", n--), arguments.length < n ? le.queue(this[0], t) :i === e ? this :this.each(function() {
                var e = le.queue(this, t, i);
                le._queueHooks(this, t), "fx" === t && "inprogress" !== e[0] && le.dequeue(this, t);
            });
        },
        dequeue:function(t) {
            return this.each(function() {
                le.dequeue(this, t);
            });
        },
        delay:function(t, e) {
            return t = le.fx ? le.fx.speeds[t] || t :t, e = e || "fx", this.queue(e, function(e, i) {
                var n = setTimeout(e, t);
                i.stop = function() {
                    clearTimeout(n);
                };
            });
        },
        clearQueue:function(t) {
            return this.queue(t || "fx", []);
        },
        promise:function(t, i) {
            var n, o = 1, r = le.Deferred(), s = this, a = this.length, l = function() {
                --o || r.resolveWith(s, [ s ]);
            };
            for ("string" != typeof t && (i = t, t = e), t = t || "fx"; a--; ) n = le._data(s[a], t + "queueHooks"), 
            n && n.empty && (o++, n.empty.add(l));
            return l(), r.promise(i);
        }
    });
    var xe, Se, Oe = /[\t\r\n]/g, ke = /\r/g, Ie = /^(?:input|select|textarea|button|object)$/i, Re = /^(?:a|area)$/i, Pe = /^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i, Ne = /^(?:checked|selected)$/i, Ae = le.support.getSetAttribute, Me = le.support.input;
    le.fn.extend({
        attr:function(t, e) {
            return le.access(this, le.attr, t, e, arguments.length > 1);
        },
        removeAttr:function(t) {
            return this.each(function() {
                le.removeAttr(this, t);
            });
        },
        prop:function(t, e) {
            return le.access(this, le.prop, t, e, arguments.length > 1);
        },
        removeProp:function(t) {
            return t = le.propFix[t] || t, this.each(function() {
                try {
                    this[t] = e, delete this[t];
                } catch (i) {}
            });
        },
        addClass:function(t) {
            var e, i, n, o, r, s = 0, a = this.length, l = "string" == typeof t && t;
            if (le.isFunction(t)) return this.each(function(e) {
                le(this).addClass(t.call(this, e, this.className));
            });
            if (l) for (e = (t || "").match(he) || []; a > s; s++) if (i = this[s], n = 1 === i.nodeType && (i.className ? (" " + i.className + " ").replace(Oe, " ") :" ")) {
                for (r = 0; o = e[r++]; ) n.indexOf(" " + o + " ") < 0 && (n += o + " ");
                i.className = le.trim(n);
            }
            return this;
        },
        removeClass:function(t) {
            var e, i, n, o, r, s = 0, a = this.length, l = 0 === arguments.length || "string" == typeof t && t;
            if (le.isFunction(t)) return this.each(function(e) {
                le(this).removeClass(t.call(this, e, this.className));
            });
            if (l) for (e = (t || "").match(he) || []; a > s; s++) if (i = this[s], n = 1 === i.nodeType && (i.className ? (" " + i.className + " ").replace(Oe, " ") :"")) {
                for (r = 0; o = e[r++]; ) for (;n.indexOf(" " + o + " ") >= 0; ) n = n.replace(" " + o + " ", " ");
                i.className = t ? le.trim(n) :"";
            }
            return this;
        },
        toggleClass:function(t, e) {
            var i = typeof t, n = "boolean" == typeof e;
            return le.isFunction(t) ? this.each(function(i) {
                le(this).toggleClass(t.call(this, i, this.className, e), e);
            }) :this.each(function() {
                if ("string" === i) for (var o, r = 0, s = le(this), a = e, l = t.match(he) || []; o = l[r++]; ) a = n ? a :!s.hasClass(o), 
                s[a ? "addClass" :"removeClass"](o); else (i === W || "boolean" === i) && (this.className && le._data(this, "__className__", this.className), 
                this.className = this.className || t === !1 ? "" :le._data(this, "__className__") || "");
            });
        },
        hasClass:function(t) {
            for (var e = " " + t + " ", i = 0, n = this.length; n > i; i++) if (1 === this[i].nodeType && (" " + this[i].className + " ").replace(Oe, " ").indexOf(e) >= 0) return !0;
            return !1;
        },
        val:function(t) {
            var i, n, o, r = this[0];
            {
                if (arguments.length) return o = le.isFunction(t), this.each(function(i) {
                    var r, s = le(this);
                    1 === this.nodeType && (r = o ? t.call(this, i, s.val()) :t, null == r ? r = "" :"number" == typeof r ? r += "" :le.isArray(r) && (r = le.map(r, function(t) {
                        return null == t ? "" :t + "";
                    })), n = le.valHooks[this.type] || le.valHooks[this.nodeName.toLowerCase()], n && "set" in n && n.set(this, r, "value") !== e || (this.value = r));
                });
                if (r) return n = le.valHooks[r.type] || le.valHooks[r.nodeName.toLowerCase()], 
                n && "get" in n && (i = n.get(r, "value")) !== e ? i :(i = r.value, "string" == typeof i ? i.replace(ke, "") :null == i ? "" :i);
            }
        }
    }), le.extend({
        valHooks:{
            option:{
                get:function(t) {
                    var e = t.attributes.value;
                    return !e || e.specified ? t.value :t.text;
                }
            },
            select:{
                get:function(t) {
                    for (var e, i, n = t.options, o = t.selectedIndex, r = "select-one" === t.type || 0 > o, s = r ? null :[], a = r ? o + 1 :n.length, l = 0 > o ? a :r ? o :0; a > l; l++) if (i = n[l], 
                    !(!i.selected && l !== o || (le.support.optDisabled ? i.disabled :null !== i.getAttribute("disabled")) || i.parentNode.disabled && le.nodeName(i.parentNode, "optgroup"))) {
                        if (e = le(i).val(), r) return e;
                        s.push(e);
                    }
                    return s;
                },
                set:function(t, e) {
                    var i = le.makeArray(e);
                    return le(t).find("option").each(function() {
                        this.selected = le.inArray(le(this).val(), i) >= 0;
                    }), i.length || (t.selectedIndex = -1), i;
                }
            }
        },
        attr:function(t, i, n) {
            var o, r, s, a = t.nodeType;
            if (t && 3 !== a && 8 !== a && 2 !== a) return typeof t.getAttribute === W ? le.prop(t, i, n) :(r = 1 !== a || !le.isXMLDoc(t), 
            r && (i = i.toLowerCase(), o = le.attrHooks[i] || (Pe.test(i) ? Se :xe)), n === e ? o && r && "get" in o && null !== (s = o.get(t, i)) ? s :(typeof t.getAttribute !== W && (s = t.getAttribute(i)), 
            null == s ? e :s) :null !== n ? o && r && "set" in o && (s = o.set(t, n, i)) !== e ? s :(t.setAttribute(i, n + ""), 
            n) :(le.removeAttr(t, i), void 0));
        },
        removeAttr:function(t, e) {
            var i, n, o = 0, r = e && e.match(he);
            if (r && 1 === t.nodeType) for (;i = r[o++]; ) n = le.propFix[i] || i, Pe.test(i) ? !Ae && Ne.test(i) ? t[le.camelCase("default-" + i)] = t[n] = !1 :t[n] = !1 :le.attr(t, i, ""), 
            t.removeAttribute(Ae ? i :n);
        },
        attrHooks:{
            type:{
                set:function(t, e) {
                    if (!le.support.radioValue && "radio" === e && le.nodeName(t, "input")) {
                        var i = t.value;
                        return t.setAttribute("type", e), i && (t.value = i), e;
                    }
                }
            }
        },
        propFix:{
            tabindex:"tabIndex",
            readonly:"readOnly",
            "for":"htmlFor",
            "class":"className",
            maxlength:"maxLength",
            cellspacing:"cellSpacing",
            cellpadding:"cellPadding",
            rowspan:"rowSpan",
            colspan:"colSpan",
            usemap:"useMap",
            frameborder:"frameBorder",
            contenteditable:"contentEditable"
        },
        prop:function(t, i, n) {
            var o, r, s, a = t.nodeType;
            if (t && 3 !== a && 8 !== a && 2 !== a) return s = 1 !== a || !le.isXMLDoc(t), s && (i = le.propFix[i] || i, 
            r = le.propHooks[i]), n !== e ? r && "set" in r && (o = r.set(t, n, i)) !== e ? o :t[i] = n :r && "get" in r && null !== (o = r.get(t, i)) ? o :t[i];
        },
        propHooks:{
            tabIndex:{
                get:function(t) {
                    var i = t.getAttributeNode("tabindex");
                    return i && i.specified ? parseInt(i.value, 10) :Ie.test(t.nodeName) || Re.test(t.nodeName) && t.href ? 0 :e;
                }
            }
        }
    }), Se = {
        get:function(t, i) {
            var n = le.prop(t, i), o = "boolean" == typeof n && t.getAttribute(i), r = "boolean" == typeof n ? Me && Ae ? null != o :Ne.test(i) ? t[le.camelCase("default-" + i)] :!!o :t.getAttributeNode(i);
            return r && r.value !== !1 ? i.toLowerCase() :e;
        },
        set:function(t, e, i) {
            return e === !1 ? le.removeAttr(t, i) :Me && Ae || !Ne.test(i) ? t.setAttribute(!Ae && le.propFix[i] || i, i) :t[le.camelCase("default-" + i)] = t[i] = !0, 
            i;
        }
    }, Me && Ae || (le.attrHooks.value = {
        get:function(t, i) {
            var n = t.getAttributeNode(i);
            return le.nodeName(t, "input") ? t.defaultValue :n && n.specified ? n.value :e;
        },
        set:function(t, e, i) {
            return le.nodeName(t, "input") ? (t.defaultValue = e, void 0) :xe && xe.set(t, e, i);
        }
    }), Ae || (xe = le.valHooks.button = {
        get:function(t, i) {
            var n = t.getAttributeNode(i);
            return n && ("id" === i || "name" === i || "coords" === i ? "" !== n.value :n.specified) ? n.value :e;
        },
        set:function(t, i, n) {
            var o = t.getAttributeNode(n);
            return o || t.setAttributeNode(o = t.ownerDocument.createAttribute(n)), o.value = i += "", 
            "value" === n || i === t.getAttribute(n) ? i :e;
        }
    }, le.attrHooks.contenteditable = {
        get:xe.get,
        set:function(t, e, i) {
            xe.set(t, "" === e ? !1 :e, i);
        }
    }, le.each([ "width", "height" ], function(t, e) {
        le.attrHooks[e] = le.extend(le.attrHooks[e], {
            set:function(t, i) {
                return "" === i ? (t.setAttribute(e, "auto"), i) :void 0;
            }
        });
    })), le.support.hrefNormalized || (le.each([ "href", "src", "width", "height" ], function(t, i) {
        le.attrHooks[i] = le.extend(le.attrHooks[i], {
            get:function(t) {
                var n = t.getAttribute(i, 2);
                return null == n ? e :n;
            }
        });
    }), le.each([ "href", "src" ], function(t, e) {
        le.propHooks[e] = {
            get:function(t) {
                return t.getAttribute(e, 4);
            }
        };
    })), le.support.style || (le.attrHooks.style = {
        get:function(t) {
            return t.style.cssText || e;
        },
        set:function(t, e) {
            return t.style.cssText = e + "";
        }
    }), le.support.optSelected || (le.propHooks.selected = le.extend(le.propHooks.selected, {
        get:function(t) {
            var e = t.parentNode;
            return e && (e.selectedIndex, e.parentNode && e.parentNode.selectedIndex), null;
        }
    })), le.support.enctype || (le.propFix.enctype = "encoding"), le.support.checkOn || le.each([ "radio", "checkbox" ], function() {
        le.valHooks[this] = {
            get:function(t) {
                return null === t.getAttribute("value") ? "on" :t.value;
            }
        };
    }), le.each([ "radio", "checkbox" ], function() {
        le.valHooks[this] = le.extend(le.valHooks[this], {
            set:function(t, e) {
                return le.isArray(e) ? t.checked = le.inArray(le(t).val(), e) >= 0 :void 0;
            }
        });
    });
    var Le = /^(?:input|select|textarea)$/i, Be = /^key/, ze = /^(?:mouse|contextmenu)|click/, Ke = /^(?:focusinfocus|focusoutblur)$/, Fe = /^([^.]*)(?:\.(.+)|)$/;
    le.event = {
        global:{},
        add:function(t, i, n, o, r) {
            var s, a, l, c, h, u, d, p, f, g, m, _ = le._data(t);
            if (_) {
                for (n.handler && (c = n, n = c.handler, r = c.selector), n.guid || (n.guid = le.guid++), 
                (a = _.events) || (a = _.events = {}), (u = _.handle) || (u = _.handle = function(t) {
                    return typeof le === W || t && le.event.triggered === t.type ? e :le.event.dispatch.apply(u.elem, arguments);
                }, u.elem = t), i = (i || "").match(he) || [ "" ], l = i.length; l--; ) s = Fe.exec(i[l]) || [], 
                f = m = s[1], g = (s[2] || "").split(".").sort(), h = le.event.special[f] || {}, 
                f = (r ? h.delegateType :h.bindType) || f, h = le.event.special[f] || {}, d = le.extend({
                    type:f,
                    origType:m,
                    data:o,
                    handler:n,
                    guid:n.guid,
                    selector:r,
                    needsContext:r && le.expr.match.needsContext.test(r),
                    namespace:g.join(".")
                }, c), (p = a[f]) || (p = a[f] = [], p.delegateCount = 0, h.setup && h.setup.call(t, o, g, u) !== !1 || (t.addEventListener ? t.addEventListener(f, u, !1) :t.attachEvent && t.attachEvent("on" + f, u))), 
                h.add && (h.add.call(t, d), d.handler.guid || (d.handler.guid = n.guid)), r ? p.splice(p.delegateCount++, 0, d) :p.push(d), 
                le.event.global[f] = !0;
                t = null;
            }
        },
        remove:function(t, e, i, n, o) {
            var r, s, a, l, c, h, u, d, p, f, g, m = le.hasData(t) && le._data(t);
            if (m && (h = m.events)) {
                for (e = (e || "").match(he) || [ "" ], c = e.length; c--; ) if (a = Fe.exec(e[c]) || [], 
                p = g = a[1], f = (a[2] || "").split(".").sort(), p) {
                    for (u = le.event.special[p] || {}, p = (n ? u.delegateType :u.bindType) || p, d = h[p] || [], 
                    a = a[2] && new RegExp("(^|\\.)" + f.join("\\.(?:.*\\.|)") + "(\\.|$)"), l = r = d.length; r--; ) s = d[r], 
                    !o && g !== s.origType || i && i.guid !== s.guid || a && !a.test(s.namespace) || n && n !== s.selector && ("**" !== n || !s.selector) || (d.splice(r, 1), 
                    s.selector && d.delegateCount--, u.remove && u.remove.call(t, s));
                    l && !d.length && (u.teardown && u.teardown.call(t, f, m.handle) !== !1 || le.removeEvent(t, p, m.handle), 
                    delete h[p]);
                } else for (p in h) le.event.remove(t, p + e[c], i, n, !0);
                le.isEmptyObject(h) && (delete m.handle, le._removeData(t, "events"));
            }
        },
        trigger:function(i, n, o, r) {
            var s, a, l, c, h, u, d, p = [ o || q ], f = se.call(i, "type") ? i.type :i, g = se.call(i, "namespace") ? i.namespace.split(".") :[];
            if (l = u = o = o || q, 3 !== o.nodeType && 8 !== o.nodeType && !Ke.test(f + le.event.triggered) && (f.indexOf(".") >= 0 && (g = f.split("."), 
            f = g.shift(), g.sort()), a = f.indexOf(":") < 0 && "on" + f, i = i[le.expando] ? i :new le.Event(f, "object" == typeof i && i), 
            i.isTrigger = !0, i.namespace = g.join("."), i.namespace_re = i.namespace ? new RegExp("(^|\\.)" + g.join("\\.(?:.*\\.|)") + "(\\.|$)") :null, 
            i.result = e, i.target || (i.target = o), n = null == n ? [ i ] :le.makeArray(n, [ i ]), 
            h = le.event.special[f] || {}, r || !h.trigger || h.trigger.apply(o, n) !== !1)) {
                if (!r && !h.noBubble && !le.isWindow(o)) {
                    for (c = h.delegateType || f, Ke.test(c + f) || (l = l.parentNode); l; l = l.parentNode) p.push(l), 
                    u = l;
                    u === (o.ownerDocument || q) && p.push(u.defaultView || u.parentWindow || t);
                }
                for (d = 0; (l = p[d++]) && !i.isPropagationStopped(); ) i.type = d > 1 ? c :h.bindType || f, 
                s = (le._data(l, "events") || {})[i.type] && le._data(l, "handle"), s && s.apply(l, n), 
                s = a && l[a], s && le.acceptData(l) && s.apply && s.apply(l, n) === !1 && i.preventDefault();
                if (i.type = f, !(r || i.isDefaultPrevented() || h._default && h._default.apply(o.ownerDocument, n) !== !1 || "click" === f && le.nodeName(o, "a") || !le.acceptData(o) || !a || !o[f] || le.isWindow(o))) {
                    u = o[a], u && (o[a] = null), le.event.triggered = f;
                    try {
                        o[f]();
                    } catch (m) {}
                    le.event.triggered = e, u && (o[a] = u);
                }
                return i.result;
            }
        },
        dispatch:function(t) {
            t = le.event.fix(t);
            var i, n, o, r, s, a = [], l = ne.call(arguments), c = (le._data(this, "events") || {})[t.type] || [], h = le.event.special[t.type] || {};
            if (l[0] = t, t.delegateTarget = this, !h.preDispatch || h.preDispatch.call(this, t) !== !1) {
                for (a = le.event.handlers.call(this, t, c), i = 0; (r = a[i++]) && !t.isPropagationStopped(); ) for (t.currentTarget = r.elem, 
                s = 0; (o = r.handlers[s++]) && !t.isImmediatePropagationStopped(); ) (!t.namespace_re || t.namespace_re.test(o.namespace)) && (t.handleObj = o, 
                t.data = o.data, n = ((le.event.special[o.origType] || {}).handle || o.handler).apply(r.elem, l), 
                n !== e && (t.result = n) === !1 && (t.preventDefault(), t.stopPropagation()));
                return h.postDispatch && h.postDispatch.call(this, t), t.result;
            }
        },
        handlers:function(t, i) {
            var n, o, r, s, a = [], l = i.delegateCount, c = t.target;
            if (l && c.nodeType && (!t.button || "click" !== t.type)) for (;c != this; c = c.parentNode || this) if (1 === c.nodeType && (c.disabled !== !0 || "click" !== t.type)) {
                for (r = [], s = 0; l > s; s++) o = i[s], n = o.selector + " ", r[n] === e && (r[n] = o.needsContext ? le(n, this).index(c) >= 0 :le.find(n, this, null, [ c ]).length), 
                r[n] && r.push(o);
                r.length && a.push({
                    elem:c,
                    handlers:r
                });
            }
            return l < i.length && a.push({
                elem:this,
                handlers:i.slice(l)
            }), a;
        },
        fix:function(t) {
            if (t[le.expando]) return t;
            var e, i, n, o = t.type, r = t, s = this.fixHooks[o];
            for (s || (this.fixHooks[o] = s = ze.test(o) ? this.mouseHooks :Be.test(o) ? this.keyHooks :{}), 
            n = s.props ? this.props.concat(s.props) :this.props, t = new le.Event(r), e = n.length; e--; ) i = n[e], 
            t[i] = r[i];
            return t.target || (t.target = r.srcElement || q), 3 === t.target.nodeType && (t.target = t.target.parentNode), 
            t.metaKey = !!t.metaKey, s.filter ? s.filter(t, r) :t;
        },
        props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks:{},
        keyHooks:{
            props:"char charCode key keyCode".split(" "),
            filter:function(t, e) {
                return null == t.which && (t.which = null != e.charCode ? e.charCode :e.keyCode), 
                t;
            }
        },
        mouseHooks:{
            props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter:function(t, i) {
                var n, o, r, s = i.button, a = i.fromElement;
                return null == t.pageX && null != i.clientX && (o = t.target.ownerDocument || q, 
                r = o.documentElement, n = o.body, t.pageX = i.clientX + (r && r.scrollLeft || n && n.scrollLeft || 0) - (r && r.clientLeft || n && n.clientLeft || 0), 
                t.pageY = i.clientY + (r && r.scrollTop || n && n.scrollTop || 0) - (r && r.clientTop || n && n.clientTop || 0)), 
                !t.relatedTarget && a && (t.relatedTarget = a === t.target ? i.toElement :a), t.which || s === e || (t.which = 1 & s ? 1 :2 & s ? 3 :4 & s ? 2 :0), 
                t;
            }
        },
        special:{
            load:{
                noBubble:!0
            },
            click:{
                trigger:function() {
                    return le.nodeName(this, "input") && "checkbox" === this.type && this.click ? (this.click(), 
                    !1) :void 0;
                }
            },
            focus:{
                trigger:function() {
                    if (this !== q.activeElement && this.focus) try {
                        return this.focus(), !1;
                    } catch (t) {}
                },
                delegateType:"focusin"
            },
            blur:{
                trigger:function() {
                    return this === q.activeElement && this.blur ? (this.blur(), !1) :void 0;
                },
                delegateType:"focusout"
            },
            beforeunload:{
                postDispatch:function(t) {
                    t.result !== e && (t.originalEvent.returnValue = t.result);
                }
            }
        },
        simulate:function(t, e, i, n) {
            var o = le.extend(new le.Event(), i, {
                type:t,
                isSimulated:!0,
                originalEvent:{}
            });
            n ? le.event.trigger(o, null, e) :le.event.dispatch.call(e, o), o.isDefaultPrevented() && i.preventDefault();
        }
    }, le.removeEvent = q.removeEventListener ? function(t, e, i) {
        t.removeEventListener && t.removeEventListener(e, i, !1);
    } :function(t, e, i) {
        var n = "on" + e;
        t.detachEvent && (typeof t[n] === W && (t[n] = null), t.detachEvent(n, i));
    }, le.Event = function(t, e) {
        return this instanceof le.Event ? (t && t.type ? (this.originalEvent = t, this.type = t.type, 
        this.isDefaultPrevented = t.defaultPrevented || t.returnValue === !1 || t.getPreventDefault && t.getPreventDefault() ? l :c) :this.type = t, 
        e && le.extend(this, e), this.timeStamp = t && t.timeStamp || le.now(), this[le.expando] = !0, 
        void 0) :new le.Event(t, e);
    }, le.Event.prototype = {
        isDefaultPrevented:c,
        isPropagationStopped:c,
        isImmediatePropagationStopped:c,
        preventDefault:function() {
            var t = this.originalEvent;
            this.isDefaultPrevented = l, t && (t.preventDefault ? t.preventDefault() :t.returnValue = !1);
        },
        stopPropagation:function() {
            var t = this.originalEvent;
            this.isPropagationStopped = l, t && (t.stopPropagation && t.stopPropagation(), t.cancelBubble = !0);
        },
        stopImmediatePropagation:function() {
            this.isImmediatePropagationStopped = l, this.stopPropagation();
        }
    }, le.each({
        mouseenter:"mouseover",
        mouseleave:"mouseout"
    }, function(t, e) {
        le.event.special[t] = {
            delegateType:e,
            bindType:e,
            handle:function(t) {
                var i, n = this, o = t.relatedTarget, r = t.handleObj;
                return (!o || o !== n && !le.contains(n, o)) && (t.type = r.origType, i = r.handler.apply(this, arguments), 
                t.type = e), i;
            }
        };
    }), le.support.submitBubbles || (le.event.special.submit = {
        setup:function() {
            return le.nodeName(this, "form") ? !1 :(le.event.add(this, "click._submit keypress._submit", function(t) {
                var i = t.target, n = le.nodeName(i, "input") || le.nodeName(i, "button") ? i.form :e;
                n && !le._data(n, "submitBubbles") && (le.event.add(n, "submit._submit", function(t) {
                    t._submit_bubble = !0;
                }), le._data(n, "submitBubbles", !0));
            }), void 0);
        },
        postDispatch:function(t) {
            t._submit_bubble && (delete t._submit_bubble, this.parentNode && !t.isTrigger && le.event.simulate("submit", this.parentNode, t, !0));
        },
        teardown:function() {
            return le.nodeName(this, "form") ? !1 :(le.event.remove(this, "._submit"), void 0);
        }
    }), le.support.changeBubbles || (le.event.special.change = {
        setup:function() {
            return Le.test(this.nodeName) ? (("checkbox" === this.type || "radio" === this.type) && (le.event.add(this, "propertychange._change", function(t) {
                "checked" === t.originalEvent.propertyName && (this._just_changed = !0);
            }), le.event.add(this, "click._change", function(t) {
                this._just_changed && !t.isTrigger && (this._just_changed = !1), le.event.simulate("change", this, t, !0);
            })), !1) :(le.event.add(this, "beforeactivate._change", function(t) {
                var e = t.target;
                Le.test(e.nodeName) && !le._data(e, "changeBubbles") && (le.event.add(e, "change._change", function(t) {
                    !this.parentNode || t.isSimulated || t.isTrigger || le.event.simulate("change", this.parentNode, t, !0);
                }), le._data(e, "changeBubbles", !0));
            }), void 0);
        },
        handle:function(t) {
            var e = t.target;
            return this !== e || t.isSimulated || t.isTrigger || "radio" !== e.type && "checkbox" !== e.type ? t.handleObj.handler.apply(this, arguments) :void 0;
        },
        teardown:function() {
            return le.event.remove(this, "._change"), !Le.test(this.nodeName);
        }
    }), le.support.focusinBubbles || le.each({
        focus:"focusin",
        blur:"focusout"
    }, function(t, e) {
        var i = 0, n = function(t) {
            le.event.simulate(e, t.target, le.event.fix(t), !0);
        };
        le.event.special[e] = {
            setup:function() {
                0 === i++ && q.addEventListener(t, n, !0);
            },
            teardown:function() {
                0 === --i && q.removeEventListener(t, n, !0);
            }
        };
    }), le.fn.extend({
        on:function(t, i, n, o, r) {
            var s, a;
            if ("object" == typeof t) {
                "string" != typeof i && (n = n || i, i = e);
                for (s in t) this.on(s, i, n, t[s], r);
                return this;
            }
            if (null == n && null == o ? (o = i, n = i = e) :null == o && ("string" == typeof i ? (o = n, 
            n = e) :(o = n, n = i, i = e)), o === !1) o = c; else if (!o) return this;
            return 1 === r && (a = o, o = function(t) {
                return le().off(t), a.apply(this, arguments);
            }, o.guid = a.guid || (a.guid = le.guid++)), this.each(function() {
                le.event.add(this, t, o, n, i);
            });
        },
        one:function(t, e, i, n) {
            return this.on(t, e, i, n, 1);
        },
        off:function(t, i, n) {
            var o, r;
            if (t && t.preventDefault && t.handleObj) return o = t.handleObj, le(t.delegateTarget).off(o.namespace ? o.origType + "." + o.namespace :o.origType, o.selector, o.handler), 
            this;
            if ("object" == typeof t) {
                for (r in t) this.off(r, i, t[r]);
                return this;
            }
            return (i === !1 || "function" == typeof i) && (n = i, i = e), n === !1 && (n = c), 
            this.each(function() {
                le.event.remove(this, t, n, i);
            });
        },
        bind:function(t, e, i) {
            return this.on(t, null, e, i);
        },
        unbind:function(t, e) {
            return this.off(t, null, e);
        },
        delegate:function(t, e, i, n) {
            return this.on(e, t, i, n);
        },
        undelegate:function(t, e, i) {
            return 1 === arguments.length ? this.off(t, "**") :this.off(e, t || "**", i);
        },
        trigger:function(t, e) {
            return this.each(function() {
                le.event.trigger(t, e, this);
            });
        },
        triggerHandler:function(t, e) {
            var i = this[0];
            return i ? le.event.trigger(t, e, i, !0) :void 0;
        }
    }), /*!
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */
    function(t, e) {
        function i(t) {
            return fe.test(t + "");
        }
        function n() {
            var t, e = [];
            return t = function(i, n) {
                return e.push(i += " ") > D.cacheLength && delete t[e.shift()], t[i] = n;
            };
        }
        function o(t) {
            return t[K] = !0, t;
        }
        function r(t) {
            var e = R.createElement("div");
            try {
                return t(e);
            } catch (i) {
                return !1;
            } finally {
                e = null;
            }
        }
        function s(t, e, i, n) {
            var o, r, s, a, l, c, h, p, f, g;
            if ((e ? e.ownerDocument || e :F) !== R && I(e), e = e || R, i = i || [], !t || "string" != typeof t) return i;
            if (1 !== (a = e.nodeType) && 9 !== a) return [];
            if (!N && !n) {
                if (o = ge.exec(t)) if (s = o[1]) {
                    if (9 === a) {
                        if (r = e.getElementById(s), !r || !r.parentNode) return i;
                        if (r.id === s) return i.push(r), i;
                    } else if (e.ownerDocument && (r = e.ownerDocument.getElementById(s)) && B(e, r) && r.id === s) return i.push(r), 
                    i;
                } else {
                    if (o[2]) return X.apply(i, Z.call(e.getElementsByTagName(t), 0)), i;
                    if ((s = o[3]) && j.getByClassName && e.getElementsByClassName) return X.apply(i, Z.call(e.getElementsByClassName(s), 0)), 
                    i;
                }
                if (j.qsa && !A.test(t)) {
                    if (h = !0, p = K, f = e, g = 9 === a && t, 1 === a && "object" !== e.nodeName.toLowerCase()) {
                        for (c = u(t), (h = e.getAttribute("id")) ? p = h.replace(ve, "\\$&") :e.setAttribute("id", p), 
                        p = "[id='" + p + "'] ", l = c.length; l--; ) c[l] = p + d(c[l]);
                        f = pe.test(t) && e.parentNode || e, g = c.join(",");
                    }
                    if (g) try {
                        return X.apply(i, Z.call(f.querySelectorAll(g), 0)), i;
                    } catch (m) {} finally {
                        h || e.removeAttribute("id");
                    }
                }
            }
            return b(t.replace(se, "$1"), e, i, n);
        }
        function a(t, e) {
            var i = e && t, n = i && (~e.sourceIndex || q) - (~t.sourceIndex || q);
            if (n) return n;
            if (i) for (;i = i.nextSibling; ) if (i === e) return -1;
            return t ? 1 :-1;
        }
        function l(t) {
            return function(e) {
                var i = e.nodeName.toLowerCase();
                return "input" === i && e.type === t;
            };
        }
        function c(t) {
            return function(e) {
                var i = e.nodeName.toLowerCase();
                return ("input" === i || "button" === i) && e.type === t;
            };
        }
        function h(t) {
            return o(function(e) {
                return e = +e, o(function(i, n) {
                    for (var o, r = t([], i.length, e), s = r.length; s--; ) i[o = r[s]] && (i[o] = !(n[o] = i[o]));
                });
            });
        }
        function u(t, e) {
            var i, n, o, r, a, l, c, h = U[t + " "];
            if (h) return e ? 0 :h.slice(0);
            for (a = t, l = [], c = D.preFilter; a; ) {
                (!i || (n = ae.exec(a))) && (n && (a = a.slice(n[0].length) || a), l.push(o = [])), 
                i = !1, (n = ce.exec(a)) && (i = n.shift(), o.push({
                    value:i,
                    type:n[0].replace(se, " ")
                }), a = a.slice(i.length));
                for (r in D.filter) !(n = de[r].exec(a)) || c[r] && !(n = c[r](n)) || (i = n.shift(), 
                o.push({
                    value:i,
                    type:r,
                    matches:n
                }), a = a.slice(i.length));
                if (!i) break;
            }
            return e ? a.length :a ? s.error(t) :U(t, l).slice(0);
        }
        function d(t) {
            for (var e = 0, i = t.length, n = ""; i > e; e++) n += t[e].value;
            return n;
        }
        function p(t, e, i) {
            var n = e.dir, o = i && "parentNode" === n, r = $++;
            return e.first ? function(e, i, r) {
                for (;e = e[n]; ) if (1 === e.nodeType || o) return t(e, i, r);
            } :function(e, i, s) {
                var a, l, c, h = H + " " + r;
                if (s) {
                    for (;e = e[n]; ) if ((1 === e.nodeType || o) && t(e, i, s)) return !0;
                } else for (;e = e[n]; ) if (1 === e.nodeType || o) if (c = e[K] || (e[K] = {}), 
                (l = c[n]) && l[0] === h) {
                    if ((a = l[1]) === !0 || a === T) return a === !0;
                } else if (l = c[n] = [ h ], l[1] = t(e, i, s) || T, l[1] === !0) return !0;
            };
        }
        function f(t) {
            return t.length > 1 ? function(e, i, n) {
                for (var o = t.length; o--; ) if (!t[o](e, i, n)) return !1;
                return !0;
            } :t[0];
        }
        function g(t, e, i, n, o) {
            for (var r, s = [], a = 0, l = t.length, c = null != e; l > a; a++) (r = t[a]) && (!i || i(r, n, o)) && (s.push(r), 
            c && e.push(a));
            return s;
        }
        function m(t, e, i, n, r, s) {
            return n && !n[K] && (n = m(n)), r && !r[K] && (r = m(r, s)), o(function(o, s, a, l) {
                var c, h, u, d = [], p = [], f = s.length, m = o || y(e || "*", a.nodeType ? [ a ] :a, []), _ = !t || !o && e ? m :g(m, d, t, a, l), v = i ? r || (o ? t :f || n) ? [] :s :_;
                if (i && i(_, v, a, l), n) for (c = g(v, p), n(c, [], a, l), h = c.length; h--; ) (u = c[h]) && (v[p[h]] = !(_[p[h]] = u));
                if (o) {
                    if (r || t) {
                        if (r) {
                            for (c = [], h = v.length; h--; ) (u = v[h]) && c.push(_[h] = u);
                            r(null, v = [], c, l);
                        }
                        for (h = v.length; h--; ) (u = v[h]) && (c = r ? Q.call(o, u) :d[h]) > -1 && (o[c] = !(s[c] = u));
                    }
                } else v = g(v === s ? v.splice(f, v.length) :v), r ? r(null, s, v, l) :X.apply(s, v);
            });
        }
        function _(t) {
            for (var e, i, n, o = t.length, r = D.relative[t[0].type], s = r || D.relative[" "], a = r ? 1 :0, l = p(function(t) {
                return t === e;
            }, s, !0), c = p(function(t) {
                return Q.call(e, t) > -1;
            }, s, !0), h = [ function(t, i, n) {
                return !r && (n || i !== k) || ((e = i).nodeType ? l(t, i, n) :c(t, i, n));
            } ]; o > a; a++) if (i = D.relative[t[a].type]) h = [ p(f(h), i) ]; else {
                if (i = D.filter[t[a].type].apply(null, t[a].matches), i[K]) {
                    for (n = ++a; o > n && !D.relative[t[n].type]; n++) ;
                    return m(a > 1 && f(h), a > 1 && d(t.slice(0, a - 1)).replace(se, "$1"), i, n > a && _(t.slice(a, n)), o > n && _(t = t.slice(n)), o > n && d(t));
                }
                h.push(i);
            }
            return f(h);
        }
        function v(t, e) {
            var i = 0, n = e.length > 0, r = t.length > 0, a = function(o, a, l, c, h) {
                var u, d, p, f = [], m = 0, _ = "0", v = o && [], y = null != h, b = k, w = o || r && D.find.TAG("*", h && a.parentNode || a), C = H += null == b ? 1 :Math.random() || .1;
                for (y && (k = a !== R && a, T = i); null != (u = w[_]); _++) {
                    if (r && u) {
                        for (d = 0; p = t[d++]; ) if (p(u, a, l)) {
                            c.push(u);
                            break;
                        }
                        y && (H = C, T = ++i);
                    }
                    n && ((u = !p && u) && m--, o && v.push(u));
                }
                if (m += _, n && _ !== m) {
                    for (d = 0; p = e[d++]; ) p(v, f, a, l);
                    if (o) {
                        if (m > 0) for (;_--; ) v[_] || f[_] || (f[_] = J.call(c));
                        f = g(f);
                    }
                    X.apply(c, f), y && !o && f.length > 0 && m + e.length > 1 && s.uniqueSort(c);
                }
                return y && (H = C, k = b), v;
            };
            return n ? o(a) :a;
        }
        function y(t, e, i) {
            for (var n = 0, o = e.length; o > n; n++) s(t, e[n], i);
            return i;
        }
        function b(t, e, i, n) {
            var o, r, s, a, l, c = u(t);
            if (!n && 1 === c.length) {
                if (r = c[0] = c[0].slice(0), r.length > 2 && "ID" === (s = r[0]).type && 9 === e.nodeType && !N && D.relative[r[1].type]) {
                    if (e = D.find.ID(s.matches[0].replace(be, we), e)[0], !e) return i;
                    t = t.slice(r.shift().value.length);
                }
                for (o = de.needsContext.test(t) ? 0 :r.length; o-- && (s = r[o], !D.relative[a = s.type]); ) if ((l = D.find[a]) && (n = l(s.matches[0].replace(be, we), pe.test(r[0].type) && e.parentNode || e))) {
                    if (r.splice(o, 1), t = n.length && d(r), !t) return X.apply(i, Z.call(n, 0)), i;
                    break;
                }
            }
            return S(t, c)(n, e, N, i, pe.test(t)), i;
        }
        function w() {}
        var C, T, D, E, x, S, O, k, I, R, P, N, A, M, L, B, z, K = "sizzle" + -new Date(), F = t.document, j = {}, H = 0, $ = 0, G = n(), U = n(), V = n(), W = typeof e, q = 1 << 31, Y = [], J = Y.pop, X = Y.push, Z = Y.slice, Q = Y.indexOf || function(t) {
            for (var e = 0, i = this.length; i > e; e++) if (this[e] === t) return e;
            return -1;
        }, te = "[\\x20\\t\\r\\n\\f]", ee = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+", ie = ee.replace("w", "w#"), ne = "([*^$|!~]?=)", oe = "\\[" + te + "*(" + ee + ")" + te + "*(?:" + ne + te + "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + ie + ")|)|)" + te + "*\\]", re = ":(" + ee + ")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|" + oe.replace(3, 8) + ")*)|.*)\\)|)", se = new RegExp("^" + te + "+|((?:^|[^\\\\])(?:\\\\.)*)" + te + "+$", "g"), ae = new RegExp("^" + te + "*," + te + "*"), ce = new RegExp("^" + te + "*([\\x20\\t\\r\\n\\f>+~])" + te + "*"), he = new RegExp(re), ue = new RegExp("^" + ie + "$"), de = {
            ID:new RegExp("^#(" + ee + ")"),
            CLASS:new RegExp("^\\.(" + ee + ")"),
            NAME:new RegExp("^\\[name=['\"]?(" + ee + ")['\"]?\\]"),
            TAG:new RegExp("^(" + ee.replace("w", "w*") + ")"),
            ATTR:new RegExp("^" + oe),
            PSEUDO:new RegExp("^" + re),
            CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + te + "*(even|odd|(([+-]|)(\\d*)n|)" + te + "*(?:([+-]|)" + te + "*(\\d+)|))" + te + "*\\)|)", "i"),
            needsContext:new RegExp("^" + te + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + te + "*((?:-\\d)?\\d*)" + te + "*\\)|)(?=[^-]|$)", "i")
        }, pe = /[\x20\t\r\n\f]*[+~]/, fe = /^[^{]+\{\s*\[native code/, ge = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, me = /^(?:input|select|textarea|button)$/i, _e = /^h\d$/i, ve = /'|\\/g, ye = /\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g, be = /\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g, we = function(t, e) {
            var i = "0x" + e - 65536;
            return i !== i ? e :0 > i ? String.fromCharCode(i + 65536) :String.fromCharCode(i >> 10 | 55296, 1023 & i | 56320);
        };
        try {
            Z.call(F.documentElement.childNodes, 0)[0].nodeType;
        } catch (Ce) {
            Z = function(t) {
                for (var e, i = []; e = this[t++]; ) i.push(e);
                return i;
            };
        }
        x = s.isXML = function(t) {
            var e = t && (t.ownerDocument || t).documentElement;
            return e ? "HTML" !== e.nodeName :!1;
        }, I = s.setDocument = function(t) {
            var n = t ? t.ownerDocument || t :F;
            return n !== R && 9 === n.nodeType && n.documentElement ? (R = n, P = n.documentElement, 
            N = x(n), j.tagNameNoComments = r(function(t) {
                return t.appendChild(n.createComment("")), !t.getElementsByTagName("*").length;
            }), j.attributes = r(function(t) {
                t.innerHTML = "<select></select>";
                var e = typeof t.lastChild.getAttribute("multiple");
                return "boolean" !== e && "string" !== e;
            }), j.getByClassName = r(function(t) {
                return t.innerHTML = "<div class='hidden e'></div><div class='hidden'></div>", t.getElementsByClassName && t.getElementsByClassName("e").length ? (t.lastChild.className = "e", 
                2 === t.getElementsByClassName("e").length) :!1;
            }), j.getByName = r(function(t) {
                t.id = K + 0, t.innerHTML = "<a name='" + K + "'></a><div name='" + K + "'></div>", 
                P.insertBefore(t, P.firstChild);
                var e = n.getElementsByName && n.getElementsByName(K).length === 2 + n.getElementsByName(K + 0).length;
                return j.getIdNotName = !n.getElementById(K), P.removeChild(t), e;
            }), D.attrHandle = r(function(t) {
                return t.innerHTML = "<a href='#'></a>", t.firstChild && typeof t.firstChild.getAttribute !== W && "#" === t.firstChild.getAttribute("href");
            }) ? {} :{
                href:function(t) {
                    return t.getAttribute("href", 2);
                },
                type:function(t) {
                    return t.getAttribute("type");
                }
            }, j.getIdNotName ? (D.find.ID = function(t, e) {
                if (typeof e.getElementById !== W && !N) {
                    var i = e.getElementById(t);
                    return i && i.parentNode ? [ i ] :[];
                }
            }, D.filter.ID = function(t) {
                var e = t.replace(be, we);
                return function(t) {
                    return t.getAttribute("id") === e;
                };
            }) :(D.find.ID = function(t, i) {
                if (typeof i.getElementById !== W && !N) {
                    var n = i.getElementById(t);
                    return n ? n.id === t || typeof n.getAttributeNode !== W && n.getAttributeNode("id").value === t ? [ n ] :e :[];
                }
            }, D.filter.ID = function(t) {
                var e = t.replace(be, we);
                return function(t) {
                    var i = typeof t.getAttributeNode !== W && t.getAttributeNode("id");
                    return i && i.value === e;
                };
            }), D.find.TAG = j.tagNameNoComments ? function(t, e) {
                return typeof e.getElementsByTagName !== W ? e.getElementsByTagName(t) :void 0;
            } :function(t, e) {
                var i, n = [], o = 0, r = e.getElementsByTagName(t);
                if ("*" === t) {
                    for (;i = r[o++]; ) 1 === i.nodeType && n.push(i);
                    return n;
                }
                return r;
            }, D.find.NAME = j.getByName && function(t, e) {
                return typeof e.getElementsByName !== W ? e.getElementsByName(name) :void 0;
            }, D.find.CLASS = j.getByClassName && function(t, e) {
                return typeof e.getElementsByClassName === W || N ? void 0 :e.getElementsByClassName(t);
            }, M = [], A = [ ":focus" ], (j.qsa = i(n.querySelectorAll)) && (r(function(t) {
                t.innerHTML = "<select><option selected=''></option></select>", t.querySelectorAll("[selected]").length || A.push("\\[" + te + "*(?:checked|disabled|ismap|multiple|readonly|selected|value)"), 
                t.querySelectorAll(":checked").length || A.push(":checked");
            }), r(function(t) {
                t.innerHTML = "<input type='hidden' i=''/>", t.querySelectorAll("[i^='']").length && A.push("[*^$]=" + te + "*(?:\"\"|'')"), 
                t.querySelectorAll(":enabled").length || A.push(":enabled", ":disabled"), t.querySelectorAll("*,:x"), 
                A.push(",.*:");
            })), (j.matchesSelector = i(L = P.matchesSelector || P.mozMatchesSelector || P.webkitMatchesSelector || P.oMatchesSelector || P.msMatchesSelector)) && r(function(t) {
                j.disconnectedMatch = L.call(t, "div"), L.call(t, "[s!='']:x"), M.push("!=", re);
            }), A = new RegExp(A.join("|")), M = new RegExp(M.join("|")), B = i(P.contains) || P.compareDocumentPosition ? function(t, e) {
                var i = 9 === t.nodeType ? t.documentElement :t, n = e && e.parentNode;
                return t === n || !(!n || 1 !== n.nodeType || !(i.contains ? i.contains(n) :t.compareDocumentPosition && 16 & t.compareDocumentPosition(n)));
            } :function(t, e) {
                if (e) for (;e = e.parentNode; ) if (e === t) return !0;
                return !1;
            }, z = P.compareDocumentPosition ? function(t, e) {
                var i;
                return t === e ? (O = !0, 0) :(i = e.compareDocumentPosition && t.compareDocumentPosition && t.compareDocumentPosition(e)) ? 1 & i || t.parentNode && 11 === t.parentNode.nodeType ? t === n || B(F, t) ? -1 :e === n || B(F, e) ? 1 :0 :4 & i ? -1 :1 :t.compareDocumentPosition ? -1 :1;
            } :function(t, e) {
                var i, o = 0, r = t.parentNode, s = e.parentNode, l = [ t ], c = [ e ];
                if (t === e) return O = !0, 0;
                if (!r || !s) return t === n ? -1 :e === n ? 1 :r ? -1 :s ? 1 :0;
                if (r === s) return a(t, e);
                for (i = t; i = i.parentNode; ) l.unshift(i);
                for (i = e; i = i.parentNode; ) c.unshift(i);
                for (;l[o] === c[o]; ) o++;
                return o ? a(l[o], c[o]) :l[o] === F ? -1 :c[o] === F ? 1 :0;
            }, O = !1, [ 0, 0 ].sort(z), j.detectDuplicates = O, R) :R;
        }, s.matches = function(t, e) {
            return s(t, null, null, e);
        }, s.matchesSelector = function(t, e) {
            if ((t.ownerDocument || t) !== R && I(t), e = e.replace(ye, "='$1']"), !(!j.matchesSelector || N || M && M.test(e) || A.test(e))) try {
                var i = L.call(t, e);
                if (i || j.disconnectedMatch || t.document && 11 !== t.document.nodeType) return i;
            } catch (n) {}
            return s(e, R, null, [ t ]).length > 0;
        }, s.contains = function(t, e) {
            return (t.ownerDocument || t) !== R && I(t), B(t, e);
        }, s.attr = function(t, e) {
            var i;
            return (t.ownerDocument || t) !== R && I(t), N || (e = e.toLowerCase()), (i = D.attrHandle[e]) ? i(t) :N || j.attributes ? t.getAttribute(e) :((i = t.getAttributeNode(e)) || t.getAttribute(e)) && t[e] === !0 ? e :i && i.specified ? i.value :null;
        }, s.error = function(t) {
            throw new Error("Syntax error, unrecognized expression: " + t);
        }, s.uniqueSort = function(t) {
            var e, i = [], n = 1, o = 0;
            if (O = !j.detectDuplicates, t.sort(z), O) {
                for (;e = t[n]; n++) e === t[n - 1] && (o = i.push(n));
                for (;o--; ) t.splice(i[o], 1);
            }
            return t;
        }, E = s.getText = function(t) {
            var e, i = "", n = 0, o = t.nodeType;
            if (o) {
                if (1 === o || 9 === o || 11 === o) {
                    if ("string" == typeof t.textContent) return t.textContent;
                    for (t = t.firstChild; t; t = t.nextSibling) i += E(t);
                } else if (3 === o || 4 === o) return t.nodeValue;
            } else for (;e = t[n]; n++) i += E(e);
            return i;
        }, D = s.selectors = {
            cacheLength:50,
            createPseudo:o,
            match:de,
            find:{},
            relative:{
                ">":{
                    dir:"parentNode",
                    first:!0
                },
                " ":{
                    dir:"parentNode"
                },
                "+":{
                    dir:"previousSibling",
                    first:!0
                },
                "~":{
                    dir:"previousSibling"
                }
            },
            preFilter:{
                ATTR:function(t) {
                    return t[1] = t[1].replace(be, we), t[3] = (t[4] || t[5] || "").replace(be, we), 
                    "~=" === t[2] && (t[3] = " " + t[3] + " "), t.slice(0, 4);
                },
                CHILD:function(t) {
                    return t[1] = t[1].toLowerCase(), "nth" === t[1].slice(0, 3) ? (t[3] || s.error(t[0]), 
                    t[4] = +(t[4] ? t[5] + (t[6] || 1) :2 * ("even" === t[3] || "odd" === t[3])), t[5] = +(t[7] + t[8] || "odd" === t[3])) :t[3] && s.error(t[0]), 
                    t;
                },
                PSEUDO:function(t) {
                    var e, i = !t[5] && t[2];
                    return de.CHILD.test(t[0]) ? null :(t[4] ? t[2] = t[4] :i && he.test(i) && (e = u(i, !0)) && (e = i.indexOf(")", i.length - e) - i.length) && (t[0] = t[0].slice(0, e), 
                    t[2] = i.slice(0, e)), t.slice(0, 3));
                }
            },
            filter:{
                TAG:function(t) {
                    return "*" === t ? function() {
                        return !0;
                    } :(t = t.replace(be, we).toLowerCase(), function(e) {
                        return e.nodeName && e.nodeName.toLowerCase() === t;
                    });
                },
                CLASS:function(t) {
                    var e = G[t + " "];
                    return e || (e = new RegExp("(^|" + te + ")" + t + "(" + te + "|$)")) && G(t, function(t) {
                        return e.test(t.className || typeof t.getAttribute !== W && t.getAttribute("class") || "");
                    });
                },
                ATTR:function(t, e, i) {
                    return function(n) {
                        var o = s.attr(n, t);
                        return null == o ? "!=" === e :e ? (o += "", "=" === e ? o === i :"!=" === e ? o !== i :"^=" === e ? i && 0 === o.indexOf(i) :"*=" === e ? i && o.indexOf(i) > -1 :"$=" === e ? i && o.slice(-i.length) === i :"~=" === e ? (" " + o + " ").indexOf(i) > -1 :"|=" === e ? o === i || o.slice(0, i.length + 1) === i + "-" :!1) :!0;
                    };
                },
                CHILD:function(t, e, i, n, o) {
                    var r = "nth" !== t.slice(0, 3), s = "last" !== t.slice(-4), a = "of-type" === e;
                    return 1 === n && 0 === o ? function(t) {
                        return !!t.parentNode;
                    } :function(e, i, l) {
                        var c, h, u, d, p, f, g = r !== s ? "nextSibling" :"previousSibling", m = e.parentNode, _ = a && e.nodeName.toLowerCase(), v = !l && !a;
                        if (m) {
                            if (r) {
                                for (;g; ) {
                                    for (u = e; u = u[g]; ) if (a ? u.nodeName.toLowerCase() === _ :1 === u.nodeType) return !1;
                                    f = g = "only" === t && !f && "nextSibling";
                                }
                                return !0;
                            }
                            if (f = [ s ? m.firstChild :m.lastChild ], s && v) {
                                for (h = m[K] || (m[K] = {}), c = h[t] || [], p = c[0] === H && c[1], d = c[0] === H && c[2], 
                                u = p && m.childNodes[p]; u = ++p && u && u[g] || (d = p = 0) || f.pop(); ) if (1 === u.nodeType && ++d && u === e) {
                                    h[t] = [ H, p, d ];
                                    break;
                                }
                            } else if (v && (c = (e[K] || (e[K] = {}))[t]) && c[0] === H) d = c[1]; else for (;(u = ++p && u && u[g] || (d = p = 0) || f.pop()) && ((a ? u.nodeName.toLowerCase() !== _ :1 !== u.nodeType) || !++d || (v && ((u[K] || (u[K] = {}))[t] = [ H, d ]), 
                            u !== e)); ) ;
                            return d -= o, d === n || d % n === 0 && d / n >= 0;
                        }
                    };
                },
                PSEUDO:function(t, e) {
                    var i, n = D.pseudos[t] || D.setFilters[t.toLowerCase()] || s.error("unsupported pseudo: " + t);
                    return n[K] ? n(e) :n.length > 1 ? (i = [ t, t, "", e ], D.setFilters.hasOwnProperty(t.toLowerCase()) ? o(function(t, i) {
                        for (var o, r = n(t, e), s = r.length; s--; ) o = Q.call(t, r[s]), t[o] = !(i[o] = r[s]);
                    }) :function(t) {
                        return n(t, 0, i);
                    }) :n;
                }
            },
            pseudos:{
                not:o(function(t) {
                    var e = [], i = [], n = S(t.replace(se, "$1"));
                    return n[K] ? o(function(t, e, i, o) {
                        for (var r, s = n(t, null, o, []), a = t.length; a--; ) (r = s[a]) && (t[a] = !(e[a] = r));
                    }) :function(t, o, r) {
                        return e[0] = t, n(e, null, r, i), !i.pop();
                    };
                }),
                has:o(function(t) {
                    return function(e) {
                        return s(t, e).length > 0;
                    };
                }),
                contains:o(function(t) {
                    return function(e) {
                        return (e.textContent || e.innerText || E(e)).indexOf(t) > -1;
                    };
                }),
                lang:o(function(t) {
                    return ue.test(t || "") || s.error("unsupported lang: " + t), t = t.replace(be, we).toLowerCase(), 
                    function(e) {
                        var i;
                        do if (i = N ? e.getAttribute("xml:lang") || e.getAttribute("lang") :e.lang) return i = i.toLowerCase(), 
                        i === t || 0 === i.indexOf(t + "-"); while ((e = e.parentNode) && 1 === e.nodeType);
                        return !1;
                    };
                }),
                target:function(e) {
                    var i = t.location && t.location.hash;
                    return i && i.slice(1) === e.id;
                },
                root:function(t) {
                    return t === P;
                },
                focus:function(t) {
                    return t === R.activeElement && (!R.hasFocus || R.hasFocus()) && !!(t.type || t.href || ~t.tabIndex);
                },
                enabled:function(t) {
                    return t.disabled === !1;
                },
                disabled:function(t) {
                    return t.disabled === !0;
                },
                checked:function(t) {
                    var e = t.nodeName.toLowerCase();
                    return "input" === e && !!t.checked || "option" === e && !!t.selected;
                },
                selected:function(t) {
                    return t.parentNode && t.parentNode.selectedIndex, t.selected === !0;
                },
                empty:function(t) {
                    for (t = t.firstChild; t; t = t.nextSibling) if (t.nodeName > "@" || 3 === t.nodeType || 4 === t.nodeType) return !1;
                    return !0;
                },
                parent:function(t) {
                    return !D.pseudos.empty(t);
                },
                header:function(t) {
                    return _e.test(t.nodeName);
                },
                input:function(t) {
                    return me.test(t.nodeName);
                },
                button:function(t) {
                    var e = t.nodeName.toLowerCase();
                    return "input" === e && "button" === t.type || "button" === e;
                },
                text:function(t) {
                    var e;
                    return "input" === t.nodeName.toLowerCase() && "text" === t.type && (null == (e = t.getAttribute("type")) || e.toLowerCase() === t.type);
                },
                first:h(function() {
                    return [ 0 ];
                }),
                last:h(function(t, e) {
                    return [ e - 1 ];
                }),
                eq:h(function(t, e, i) {
                    return [ 0 > i ? i + e :i ];
                }),
                even:h(function(t, e) {
                    for (var i = 0; e > i; i += 2) t.push(i);
                    return t;
                }),
                odd:h(function(t, e) {
                    for (var i = 1; e > i; i += 2) t.push(i);
                    return t;
                }),
                lt:h(function(t, e, i) {
                    for (var n = 0 > i ? i + e :i; --n >= 0; ) t.push(n);
                    return t;
                }),
                gt:h(function(t, e, i) {
                    for (var n = 0 > i ? i + e :i; ++n < e; ) t.push(n);
                    return t;
                })
            }
        };
        for (C in {
            radio:!0,
            checkbox:!0,
            file:!0,
            password:!0,
            image:!0
        }) D.pseudos[C] = l(C);
        for (C in {
            submit:!0,
            reset:!0
        }) D.pseudos[C] = c(C);
        S = s.compile = function(t, e) {
            var i, n = [], o = [], r = V[t + " "];
            if (!r) {
                for (e || (e = u(t)), i = e.length; i--; ) r = _(e[i]), r[K] ? n.push(r) :o.push(r);
                r = V(t, v(o, n));
            }
            return r;
        }, D.pseudos.nth = D.pseudos.eq, D.filters = w.prototype = D.pseudos, D.setFilters = new w(), 
        I(), s.attr = le.attr, le.find = s, le.expr = s.selectors, le.expr[":"] = le.expr.pseudos, 
        le.unique = s.uniqueSort, le.text = s.getText, le.isXMLDoc = s.isXML, le.contains = s.contains;
    }(t);
    var je = /Until$/, He = /^(?:parents|prev(?:Until|All))/, $e = /^.[^:#\[\.,]*$/, Ge = le.expr.match.needsContext, Ue = {
        children:!0,
        contents:!0,
        next:!0,
        prev:!0
    };
    le.fn.extend({
        find:function(t) {
            var e, i, n, o = this.length;
            if ("string" != typeof t) return n = this, this.pushStack(le(t).filter(function() {
                for (e = 0; o > e; e++) if (le.contains(n[e], this)) return !0;
            }));
            for (i = [], e = 0; o > e; e++) le.find(t, this[e], i);
            return i = this.pushStack(o > 1 ? le.unique(i) :i), i.selector = (this.selector ? this.selector + " " :"") + t, 
            i;
        },
        has:function(t) {
            var e, i = le(t, this), n = i.length;
            return this.filter(function() {
                for (e = 0; n > e; e++) if (le.contains(this, i[e])) return !0;
            });
        },
        not:function(t) {
            return this.pushStack(u(this, t, !1));
        },
        filter:function(t) {
            return this.pushStack(u(this, t, !0));
        },
        is:function(t) {
            return !!t && ("string" == typeof t ? Ge.test(t) ? le(t, this.context).index(this[0]) >= 0 :le.filter(t, this).length > 0 :this.filter(t).length > 0);
        },
        closest:function(t, e) {
            for (var i, n = 0, o = this.length, r = [], s = Ge.test(t) || "string" != typeof t ? le(t, e || this.context) :0; o > n; n++) for (i = this[n]; i && i.ownerDocument && i !== e && 11 !== i.nodeType; ) {
                if (s ? s.index(i) > -1 :le.find.matchesSelector(i, t)) {
                    r.push(i);
                    break;
                }
                i = i.parentNode;
            }
            return this.pushStack(r.length > 1 ? le.unique(r) :r);
        },
        index:function(t) {
            return t ? "string" == typeof t ? le.inArray(this[0], le(t)) :le.inArray(t.jquery ? t[0] :t, this) :this[0] && this[0].parentNode ? this.first().prevAll().length :-1;
        },
        add:function(t, e) {
            var i = "string" == typeof t ? le(t, e) :le.makeArray(t && t.nodeType ? [ t ] :t), n = le.merge(this.get(), i);
            return this.pushStack(le.unique(n));
        },
        addBack:function(t) {
            return this.add(null == t ? this.prevObject :this.prevObject.filter(t));
        }
    }), le.fn.andSelf = le.fn.addBack, le.each({
        parent:function(t) {
            var e = t.parentNode;
            return e && 11 !== e.nodeType ? e :null;
        },
        parents:function(t) {
            return le.dir(t, "parentNode");
        },
        parentsUntil:function(t, e, i) {
            return le.dir(t, "parentNode", i);
        },
        next:function(t) {
            return h(t, "nextSibling");
        },
        prev:function(t) {
            return h(t, "previousSibling");
        },
        nextAll:function(t) {
            return le.dir(t, "nextSibling");
        },
        prevAll:function(t) {
            return le.dir(t, "previousSibling");
        },
        nextUntil:function(t, e, i) {
            return le.dir(t, "nextSibling", i);
        },
        prevUntil:function(t, e, i) {
            return le.dir(t, "previousSibling", i);
        },
        siblings:function(t) {
            return le.sibling((t.parentNode || {}).firstChild, t);
        },
        children:function(t) {
            return le.sibling(t.firstChild);
        },
        contents:function(t) {
            return le.nodeName(t, "iframe") ? t.contentDocument || t.contentWindow.document :le.merge([], t.childNodes);
        }
    }, function(t, e) {
        le.fn[t] = function(i, n) {
            var o = le.map(this, e, i);
            return je.test(t) || (n = i), n && "string" == typeof n && (o = le.filter(n, o)), 
            o = this.length > 1 && !Ue[t] ? le.unique(o) :o, this.length > 1 && He.test(t) && (o = o.reverse()), 
            this.pushStack(o);
        };
    }), le.extend({
        filter:function(t, e, i) {
            return i && (t = ":not(" + t + ")"), 1 === e.length ? le.find.matchesSelector(e[0], t) ? [ e[0] ] :[] :le.find.matches(t, e);
        },
        dir:function(t, i, n) {
            for (var o = [], r = t[i]; r && 9 !== r.nodeType && (n === e || 1 !== r.nodeType || !le(r).is(n)); ) 1 === r.nodeType && o.push(r), 
            r = r[i];
            return o;
        },
        sibling:function(t, e) {
            for (var i = []; t; t = t.nextSibling) 1 === t.nodeType && t !== e && i.push(t);
            return i;
        }
    });
    var Ve = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video", We = / jQuery\d+="(?:null|\d+)"/g, qe = new RegExp("<(?:" + Ve + ")[\\s/>]", "i"), Ye = /^\s+/, Je = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi, Xe = /<([\w:]+)/, Ze = /<tbody/i, Qe = /<|&#?\w+;/, ti = /<(?:script|style|link)/i, ei = /^(?:checkbox|radio)$/i, ii = /checked\s*(?:[^=]|=\s*.checked.)/i, ni = /^$|\/(?:java|ecma)script/i, oi = /^true\/(.*)/, ri = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g, si = {
        option:[ 1, "<select multiple='multiple'>", "</select>" ],
        legend:[ 1, "<fieldset>", "</fieldset>" ],
        area:[ 1, "<map>", "</map>" ],
        param:[ 1, "<object>", "</object>" ],
        thead:[ 1, "<table>", "</table>" ],
        tr:[ 2, "<table><tbody>", "</tbody></table>" ],
        col:[ 2, "<table><tbody></tbody><colgroup>", "</colgroup></table>" ],
        td:[ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],
        _default:le.support.htmlSerialize ? [ 0, "", "" ] :[ 1, "X<div>", "</div>" ]
    }, ai = d(q), li = ai.appendChild(q.createElement("div"));
    si.optgroup = si.option, si.tbody = si.tfoot = si.colgroup = si.caption = si.thead, 
    si.th = si.td, le.fn.extend({
        text:function(t) {
            return le.access(this, function(t) {
                return t === e ? le.text(this) :this.empty().append((this[0] && this[0].ownerDocument || q).createTextNode(t));
            }, null, t, arguments.length);
        },
        wrapAll:function(t) {
            if (le.isFunction(t)) return this.each(function(e) {
                le(this).wrapAll(t.call(this, e));
            });
            if (this[0]) {
                var e = le(t, this[0].ownerDocument).eq(0).clone(!0);
                this[0].parentNode && e.insertBefore(this[0]), e.map(function() {
                    for (var t = this; t.firstChild && 1 === t.firstChild.nodeType; ) t = t.firstChild;
                    return t;
                }).append(this);
            }
            return this;
        },
        wrapInner:function(t) {
            return le.isFunction(t) ? this.each(function(e) {
                le(this).wrapInner(t.call(this, e));
            }) :this.each(function() {
                var e = le(this), i = e.contents();
                i.length ? i.wrapAll(t) :e.append(t);
            });
        },
        wrap:function(t) {
            var e = le.isFunction(t);
            return this.each(function(i) {
                le(this).wrapAll(e ? t.call(this, i) :t);
            });
        },
        unwrap:function() {
            return this.parent().each(function() {
                le.nodeName(this, "body") || le(this).replaceWith(this.childNodes);
            }).end();
        },
        append:function() {
            return this.domManip(arguments, !0, function(t) {
                (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) && this.appendChild(t);
            });
        },
        prepend:function() {
            return this.domManip(arguments, !0, function(t) {
                (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) && this.insertBefore(t, this.firstChild);
            });
        },
        before:function() {
            return this.domManip(arguments, !1, function(t) {
                this.parentNode && this.parentNode.insertBefore(t, this);
            });
        },
        after:function() {
            return this.domManip(arguments, !1, function(t) {
                this.parentNode && this.parentNode.insertBefore(t, this.nextSibling);
            });
        },
        remove:function(t, e) {
            for (var i, n = 0; null != (i = this[n]); n++) (!t || le.filter(t, [ i ]).length > 0) && (e || 1 !== i.nodeType || le.cleanData(y(i)), 
            i.parentNode && (e && le.contains(i.ownerDocument, i) && m(y(i, "script")), i.parentNode.removeChild(i)));
            return this;
        },
        empty:function() {
            for (var t, e = 0; null != (t = this[e]); e++) {
                for (1 === t.nodeType && le.cleanData(y(t, !1)); t.firstChild; ) t.removeChild(t.firstChild);
                t.options && le.nodeName(t, "select") && (t.options.length = 0);
            }
            return this;
        },
        clone:function(t, e) {
            return t = null == t ? !1 :t, e = null == e ? t :e, this.map(function() {
                return le.clone(this, t, e);
            });
        },
        html:function(t) {
            return le.access(this, function(t) {
                var i = this[0] || {}, n = 0, o = this.length;
                if (t === e) return 1 === i.nodeType ? i.innerHTML.replace(We, "") :e;
                if (!("string" != typeof t || ti.test(t) || !le.support.htmlSerialize && qe.test(t) || !le.support.leadingWhitespace && Ye.test(t) || si[(Xe.exec(t) || [ "", "" ])[1].toLowerCase()])) {
                    t = t.replace(Je, "<$1></$2>");
                    try {
                        for (;o > n; n++) i = this[n] || {}, 1 === i.nodeType && (le.cleanData(y(i, !1)), 
                        i.innerHTML = t);
                        i = 0;
                    } catch (r) {}
                }
                i && this.empty().append(t);
            }, null, t, arguments.length);
        },
        replaceWith:function(t) {
            var e = le.isFunction(t);
            return e || "string" == typeof t || (t = le(t).not(this).detach()), this.domManip([ t ], !0, function(t) {
                var e = this.nextSibling, i = this.parentNode;
                i && (le(this).remove(), i.insertBefore(t, e));
            });
        },
        detach:function(t) {
            return this.remove(t, !0);
        },
        domManip:function(t, i, n) {
            t = ee.apply([], t);
            var o, r, s, a, l, c, h = 0, u = this.length, d = this, m = u - 1, _ = t[0], v = le.isFunction(_);
            if (v || !(1 >= u || "string" != typeof _ || le.support.checkClone) && ii.test(_)) return this.each(function(o) {
                var r = d.eq(o);
                v && (t[0] = _.call(this, o, i ? r.html() :e)), r.domManip(t, i, n);
            });
            if (u && (c = le.buildFragment(t, this[0].ownerDocument, !1, this), o = c.firstChild, 
            1 === c.childNodes.length && (c = o), o)) {
                for (i = i && le.nodeName(o, "tr"), a = le.map(y(c, "script"), f), s = a.length; u > h; h++) r = c, 
                h !== m && (r = le.clone(r, !0, !0), s && le.merge(a, y(r, "script"))), n.call(i && le.nodeName(this[h], "table") ? p(this[h], "tbody") :this[h], r, h);
                if (s) for (l = a[a.length - 1].ownerDocument, le.map(a, g), h = 0; s > h; h++) r = a[h], 
                ni.test(r.type || "") && !le._data(r, "globalEval") && le.contains(l, r) && (r.src ? le.ajax({
                    url:r.src,
                    type:"GET",
                    dataType:"script",
                    async:!1,
                    global:!1,
                    "throws":!0
                }) :le.globalEval((r.text || r.textContent || r.innerHTML || "").replace(ri, "")));
                c = o = null;
            }
            return this;
        }
    }), le.each({
        appendTo:"append",
        prependTo:"prepend",
        insertBefore:"before",
        insertAfter:"after",
        replaceAll:"replaceWith"
    }, function(t, e) {
        le.fn[t] = function(t) {
            for (var i, n = 0, o = [], r = le(t), s = r.length - 1; s >= n; n++) i = n === s ? this :this.clone(!0), 
            le(r[n])[e](i), ie.apply(o, i.get());
            return this.pushStack(o);
        };
    }), le.extend({
        clone:function(t, e, i) {
            var n, o, r, s, a, l = le.contains(t.ownerDocument, t);
            if (le.support.html5Clone || le.isXMLDoc(t) || !qe.test("<" + t.nodeName + ">") ? r = t.cloneNode(!0) :(li.innerHTML = t.outerHTML, 
            li.removeChild(r = li.firstChild)), !(le.support.noCloneEvent && le.support.noCloneChecked || 1 !== t.nodeType && 11 !== t.nodeType || le.isXMLDoc(t))) for (n = y(r), 
            a = y(t), s = 0; null != (o = a[s]); ++s) n[s] && v(o, n[s]);
            if (e) if (i) for (a = a || y(t), n = n || y(r), s = 0; null != (o = a[s]); s++) _(o, n[s]); else _(t, r);
            return n = y(r, "script"), n.length > 0 && m(n, !l && y(t, "script")), n = a = o = null, 
            r;
        },
        buildFragment:function(t, e, i, n) {
            for (var o, r, s, a, l, c, h, u = t.length, p = d(e), f = [], g = 0; u > g; g++) if (r = t[g], 
            r || 0 === r) if ("object" === le.type(r)) le.merge(f, r.nodeType ? [ r ] :r); else if (Qe.test(r)) {
                for (a = a || p.appendChild(e.createElement("div")), l = (Xe.exec(r) || [ "", "" ])[1].toLowerCase(), 
                h = si[l] || si._default, a.innerHTML = h[1] + r.replace(Je, "<$1></$2>") + h[2], 
                o = h[0]; o--; ) a = a.lastChild;
                if (!le.support.leadingWhitespace && Ye.test(r) && f.push(e.createTextNode(Ye.exec(r)[0])), 
                !le.support.tbody) for (r = "table" !== l || Ze.test(r) ? "<table>" !== h[1] || Ze.test(r) ? 0 :a :a.firstChild, 
                o = r && r.childNodes.length; o--; ) le.nodeName(c = r.childNodes[o], "tbody") && !c.childNodes.length && r.removeChild(c);
                for (le.merge(f, a.childNodes), a.textContent = ""; a.firstChild; ) a.removeChild(a.firstChild);
                a = p.lastChild;
            } else f.push(e.createTextNode(r));
            for (a && p.removeChild(a), le.support.appendChecked || le.grep(y(f, "input"), b), 
            g = 0; r = f[g++]; ) if ((!n || -1 === le.inArray(r, n)) && (s = le.contains(r.ownerDocument, r), 
            a = y(p.appendChild(r), "script"), s && m(a), i)) for (o = 0; r = a[o++]; ) ni.test(r.type || "") && i.push(r);
            return a = null, p;
        },
        cleanData:function(t, e) {
            for (var i, n, o, r, s = 0, a = le.expando, l = le.cache, c = le.support.deleteExpando, h = le.event.special; null != (i = t[s]); s++) if ((e || le.acceptData(i)) && (o = i[a], 
            r = o && l[o])) {
                if (r.events) for (n in r.events) h[n] ? le.event.remove(i, n) :le.removeEvent(i, n, r.handle);
                l[o] && (delete l[o], c ? delete i[a] :typeof i.removeAttribute !== W ? i.removeAttribute(a) :i[a] = null, 
                Q.push(o));
            }
        }
    });
    var ci, hi, ui, di = /alpha\([^)]*\)/i, pi = /opacity\s*=\s*([^)]*)/, fi = /^(top|right|bottom|left)$/, gi = /^(none|table(?!-c[ea]).+)/, mi = /^margin/, _i = new RegExp("^(" + ce + ")(.*)$", "i"), vi = new RegExp("^(" + ce + ")(?!px)[a-z%]+$", "i"), yi = new RegExp("^([+-])=(" + ce + ")", "i"), bi = {
        BODY:"block"
    }, wi = {
        position:"absolute",
        visibility:"hidden",
        display:"block"
    }, Ci = {
        letterSpacing:0,
        fontWeight:400
    }, Ti = [ "Top", "Right", "Bottom", "Left" ], Di = [ "Webkit", "O", "Moz", "ms" ];
    le.fn.extend({
        css:function(t, i) {
            return le.access(this, function(t, i, n) {
                var o, r, s = {}, a = 0;
                if (le.isArray(i)) {
                    for (r = hi(t), o = i.length; o > a; a++) s[i[a]] = le.css(t, i[a], !1, r);
                    return s;
                }
                return n !== e ? le.style(t, i, n) :le.css(t, i);
            }, t, i, arguments.length > 1);
        },
        show:function() {
            return T(this, !0);
        },
        hide:function() {
            return T(this);
        },
        toggle:function(t) {
            var e = "boolean" == typeof t;
            return this.each(function() {
                (e ? t :C(this)) ? le(this).show() :le(this).hide();
            });
        }
    }), le.extend({
        cssHooks:{
            opacity:{
                get:function(t, e) {
                    if (e) {
                        var i = ui(t, "opacity");
                        return "" === i ? "1" :i;
                    }
                }
            }
        },
        cssNumber:{
            columnCount:!0,
            fillOpacity:!0,
            fontWeight:!0,
            lineHeight:!0,
            opacity:!0,
            orphans:!0,
            widows:!0,
            zIndex:!0,
            zoom:!0
        },
        cssProps:{
            "float":le.support.cssFloat ? "cssFloat" :"styleFloat"
        },
        style:function(t, i, n, o) {
            if (t && 3 !== t.nodeType && 8 !== t.nodeType && t.style) {
                var r, s, a, l = le.camelCase(i), c = t.style;
                if (i = le.cssProps[l] || (le.cssProps[l] = w(c, l)), a = le.cssHooks[i] || le.cssHooks[l], 
                n === e) return a && "get" in a && (r = a.get(t, !1, o)) !== e ? r :c[i];
                if (s = typeof n, "string" === s && (r = yi.exec(n)) && (n = (r[1] + 1) * r[2] + parseFloat(le.css(t, i)), 
                s = "number"), !(null == n || "number" === s && isNaN(n) || ("number" !== s || le.cssNumber[l] || (n += "px"), 
                le.support.clearCloneStyle || "" !== n || 0 !== i.indexOf("background") || (c[i] = "inherit"), 
                a && "set" in a && (n = a.set(t, n, o)) === e))) try {
                    c[i] = n;
                } catch (h) {}
            }
        },
        css:function(t, i, n, o) {
            var r, s, a, l = le.camelCase(i);
            return i = le.cssProps[l] || (le.cssProps[l] = w(t.style, l)), a = le.cssHooks[i] || le.cssHooks[l], 
            a && "get" in a && (s = a.get(t, !0, n)), s === e && (s = ui(t, i, o)), "normal" === s && i in Ci && (s = Ci[i]), 
            "" === n || n ? (r = parseFloat(s), n === !0 || le.isNumeric(r) ? r || 0 :s) :s;
        },
        swap:function(t, e, i, n) {
            var o, r, s = {};
            for (r in e) s[r] = t.style[r], t.style[r] = e[r];
            o = i.apply(t, n || []);
            for (r in e) t.style[r] = s[r];
            return o;
        }
    }), t.getComputedStyle ? (hi = function(e) {
        return t.getComputedStyle(e, null);
    }, ui = function(t, i, n) {
        var o, r, s, a = n || hi(t), l = a ? a.getPropertyValue(i) || a[i] :e, c = t.style;
        return a && ("" !== l || le.contains(t.ownerDocument, t) || (l = le.style(t, i)), 
        vi.test(l) && mi.test(i) && (o = c.width, r = c.minWidth, s = c.maxWidth, c.minWidth = c.maxWidth = c.width = l, 
        l = a.width, c.width = o, c.minWidth = r, c.maxWidth = s)), l;
    }) :q.documentElement.currentStyle && (hi = function(t) {
        return t.currentStyle;
    }, ui = function(t, i, n) {
        var o, r, s, a = n || hi(t), l = a ? a[i] :e, c = t.style;
        return null == l && c && c[i] && (l = c[i]), vi.test(l) && !fi.test(i) && (o = c.left, 
        r = t.runtimeStyle, s = r && r.left, s && (r.left = t.currentStyle.left), c.left = "fontSize" === i ? "1em" :l, 
        l = c.pixelLeft + "px", c.left = o, s && (r.left = s)), "" === l ? "auto" :l;
    }), le.each([ "height", "width" ], function(t, e) {
        le.cssHooks[e] = {
            get:function(t, i, n) {
                return i ? 0 === t.offsetWidth && gi.test(le.css(t, "display")) ? le.swap(t, wi, function() {
                    return x(t, e, n);
                }) :x(t, e, n) :void 0;
            },
            set:function(t, i, n) {
                var o = n && hi(t);
                return D(t, i, n ? E(t, e, n, le.support.boxSizing && "border-box" === le.css(t, "boxSizing", !1, o), o) :0);
            }
        };
    }), le.support.opacity || (le.cssHooks.opacity = {
        get:function(t, e) {
            return pi.test((e && t.currentStyle ? t.currentStyle.filter :t.style.filter) || "") ? .01 * parseFloat(RegExp.$1) + "" :e ? "1" :"";
        },
        set:function(t, e) {
            var i = t.style, n = t.currentStyle, o = le.isNumeric(e) ? "alpha(opacity=" + 100 * e + ")" :"", r = n && n.filter || i.filter || "";
            i.zoom = 1, (e >= 1 || "" === e) && "" === le.trim(r.replace(di, "")) && i.removeAttribute && (i.removeAttribute("filter"), 
            "" === e || n && !n.filter) || (i.filter = di.test(r) ? r.replace(di, o) :r + " " + o);
        }
    }), le(function() {
        le.support.reliableMarginRight || (le.cssHooks.marginRight = {
            get:function(t, e) {
                return e ? le.swap(t, {
                    display:"inline-block"
                }, ui, [ t, "marginRight" ]) :void 0;
            }
        }), !le.support.pixelPosition && le.fn.position && le.each([ "top", "left" ], function(t, e) {
            le.cssHooks[e] = {
                get:function(t, i) {
                    return i ? (i = ui(t, e), vi.test(i) ? le(t).position()[e] + "px" :i) :void 0;
                }
            };
        });
    }), le.expr && le.expr.filters && (le.expr.filters.hidden = function(t) {
        return t.offsetWidth <= 0 && t.offsetHeight <= 0 || !le.support.reliableHiddenOffsets && "none" === (t.style && t.style.display || le.css(t, "display"));
    }, le.expr.filters.visible = function(t) {
        return !le.expr.filters.hidden(t);
    }), le.each({
        margin:"",
        padding:"",
        border:"Width"
    }, function(t, e) {
        le.cssHooks[t + e] = {
            expand:function(i) {
                for (var n = 0, o = {}, r = "string" == typeof i ? i.split(" ") :[ i ]; 4 > n; n++) o[t + Ti[n] + e] = r[n] || r[n - 2] || r[0];
                return o;
            }
        }, mi.test(t) || (le.cssHooks[t + e].set = D);
    });
    var Ei = /%20/g, xi = /\[\]$/, Si = /\r?\n/g, Oi = /^(?:submit|button|image|reset|file)$/i, ki = /^(?:input|select|textarea|keygen)/i;
    le.fn.extend({
        serialize:function() {
            return le.param(this.serializeArray());
        },
        serializeArray:function() {
            return this.map(function() {
                var t = le.prop(this, "elements");
                return t ? le.makeArray(t) :this;
            }).filter(function() {
                var t = this.type;
                return this.name && !le(this).is(":disabled") && ki.test(this.nodeName) && !Oi.test(t) && (this.checked || !ei.test(t));
            }).map(function(t, e) {
                var i = le(this).val();
                return null == i ? null :le.isArray(i) ? le.map(i, function(t) {
                    return {
                        name:e.name,
                        value:t.replace(Si, "\r\n")
                    };
                }) :{
                    name:e.name,
                    value:i.replace(Si, "\r\n")
                };
            }).get();
        }
    }), le.param = function(t, i) {
        var n, o = [], r = function(t, e) {
            e = le.isFunction(e) ? e() :null == e ? "" :e, o[o.length] = encodeURIComponent(t) + "=" + encodeURIComponent(e);
        };
        if (i === e && (i = le.ajaxSettings && le.ajaxSettings.traditional), le.isArray(t) || t.jquery && !le.isPlainObject(t)) le.each(t, function() {
            r(this.name, this.value);
        }); else for (n in t) k(n, t[n], i, r);
        return o.join("&").replace(Ei, "+");
    }, le.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(t, e) {
        le.fn[e] = function(t, i) {
            return arguments.length > 0 ? this.on(e, null, t, i) :this.trigger(e);
        };
    }), le.fn.hover = function(t, e) {
        return this.mouseenter(t).mouseleave(e || t);
    };
    var Ii, Ri, Pi = le.now(), Ni = /\?/, Ai = /#.*$/, Mi = /([?&])_=[^&]*/, Li = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm, Bi = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/, zi = /^(?:GET|HEAD)$/, Ki = /^\/\//, Fi = /^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/, ji = le.fn.load, Hi = {}, $i = {}, Gi = "*/".concat("*");
    try {
        Ri = Y.href;
    } catch (Ui) {
        Ri = q.createElement("a"), Ri.href = "", Ri = Ri.href;
    }
    Ii = Fi.exec(Ri.toLowerCase()) || [], le.fn.load = function(t, i, n) {
        if ("string" != typeof t && ji) return ji.apply(this, arguments);
        var o, r, s, a = this, l = t.indexOf(" ");
        return l >= 0 && (o = t.slice(l, t.length), t = t.slice(0, l)), le.isFunction(i) ? (n = i, 
        i = e) :i && "object" == typeof i && (s = "POST"), a.length > 0 && le.ajax({
            url:t,
            type:s,
            dataType:"html",
            data:i
        }).done(function(t) {
            r = arguments, a.html(o ? le("<div>").append(le.parseHTML(t)).find(o) :t);
        }).complete(n && function(t, e) {
            a.each(n, r || [ t.responseText, e, t ]);
        }), this;
    }, le.each([ "ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend" ], function(t, e) {
        le.fn[e] = function(t) {
            return this.on(e, t);
        };
    }), le.each([ "get", "post" ], function(t, i) {
        le[i] = function(t, n, o, r) {
            return le.isFunction(n) && (r = r || o, o = n, n = e), le.ajax({
                url:t,
                type:i,
                dataType:r,
                data:n,
                success:o
            });
        };
    }), le.extend({
        active:0,
        lastModified:{},
        etag:{},
        ajaxSettings:{
            url:Ri,
            type:"GET",
            isLocal:Bi.test(Ii[1]),
            global:!0,
            processData:!0,
            async:!0,
            contentType:"application/x-www-form-urlencoded; charset=UTF-8",
            accepts:{
                "*":Gi,
                text:"text/plain",
                html:"text/html",
                xml:"application/xml, text/xml",
                json:"application/json, text/javascript"
            },
            contents:{
                xml:/xml/,
                html:/html/,
                json:/json/
            },
            responseFields:{
                xml:"responseXML",
                text:"responseText"
            },
            converters:{
                "* text":t.String,
                "text html":!0,
                "text json":le.parseJSON,
                "text xml":le.parseXML
            },
            flatOptions:{
                url:!0,
                context:!0
            }
        },
        ajaxSetup:function(t, e) {
            return e ? P(P(t, le.ajaxSettings), e) :P(le.ajaxSettings, t);
        },
        ajaxPrefilter:I(Hi),
        ajaxTransport:I($i),
        ajax:function(t, i) {
            function n(t, i, n, o) {
                var r, u, v, y, w, T = i;
                2 !== b && (b = 2, l && clearTimeout(l), h = e, a = o || "", C.readyState = t > 0 ? 4 :0, 
                n && (y = N(d, C, n)), t >= 200 && 300 > t || 304 === t ? (d.ifModified && (w = C.getResponseHeader("Last-Modified"), 
                w && (le.lastModified[s] = w), w = C.getResponseHeader("etag"), w && (le.etag[s] = w)), 
                204 === t ? (r = !0, T = "nocontent") :304 === t ? (r = !0, T = "notmodified") :(r = A(d, y), 
                T = r.state, u = r.data, v = r.error, r = !v)) :(v = T, (t || !T) && (T = "error", 
                0 > t && (t = 0))), C.status = t, C.statusText = (i || T) + "", r ? g.resolveWith(p, [ u, T, C ]) :g.rejectWith(p, [ C, T, v ]), 
                C.statusCode(_), _ = e, c && f.trigger(r ? "ajaxSuccess" :"ajaxError", [ C, d, r ? u :v ]), 
                m.fireWith(p, [ C, T ]), c && (f.trigger("ajaxComplete", [ C, d ]), --le.active || le.event.trigger("ajaxStop")));
            }
            "object" == typeof t && (i = t, t = e), i = i || {};
            var o, r, s, a, l, c, h, u, d = le.ajaxSetup({}, i), p = d.context || d, f = d.context && (p.nodeType || p.jquery) ? le(p) :le.event, g = le.Deferred(), m = le.Callbacks("once memory"), _ = d.statusCode || {}, v = {}, y = {}, b = 0, w = "canceled", C = {
                readyState:0,
                getResponseHeader:function(t) {
                    var e;
                    if (2 === b) {
                        if (!u) for (u = {}; e = Li.exec(a); ) u[e[1].toLowerCase()] = e[2];
                        e = u[t.toLowerCase()];
                    }
                    return null == e ? null :e;
                },
                getAllResponseHeaders:function() {
                    return 2 === b ? a :null;
                },
                setRequestHeader:function(t, e) {
                    var i = t.toLowerCase();
                    return b || (t = y[i] = y[i] || t, v[t] = e), this;
                },
                overrideMimeType:function(t) {
                    return b || (d.mimeType = t), this;
                },
                statusCode:function(t) {
                    var e;
                    if (t) if (2 > b) for (e in t) _[e] = [ _[e], t[e] ]; else C.always(t[C.status]);
                    return this;
                },
                abort:function(t) {
                    var e = t || w;
                    return h && h.abort(e), n(0, e), this;
                }
            };
            if (g.promise(C).complete = m.add, C.success = C.done, C.error = C.fail, d.url = ((t || d.url || Ri) + "").replace(Ai, "").replace(Ki, Ii[1] + "//"), 
            d.type = i.method || i.type || d.method || d.type, d.dataTypes = le.trim(d.dataType || "*").toLowerCase().match(he) || [ "" ], 
            null == d.crossDomain && (o = Fi.exec(d.url.toLowerCase()), d.crossDomain = !(!o || o[1] === Ii[1] && o[2] === Ii[2] && (o[3] || ("http:" === o[1] ? 80 :443)) == (Ii[3] || ("http:" === Ii[1] ? 80 :443)))), 
            d.data && d.processData && "string" != typeof d.data && (d.data = le.param(d.data, d.traditional)), 
            R(Hi, d, i, C), 2 === b) return C;
            c = d.global, c && 0 === le.active++ && le.event.trigger("ajaxStart"), d.type = d.type.toUpperCase(), 
            d.hasContent = !zi.test(d.type), s = d.url, d.hasContent || (d.data && (s = d.url += (Ni.test(s) ? "&" :"?") + d.data, 
            delete d.data), d.cache === !1 && (d.url = Mi.test(s) ? s.replace(Mi, "$1_=" + Pi++) :s + (Ni.test(s) ? "&" :"?") + "_=" + Pi++)), 
            d.ifModified && (le.lastModified[s] && C.setRequestHeader("If-Modified-Since", le.lastModified[s]), 
            le.etag[s] && C.setRequestHeader("If-None-Match", le.etag[s])), (d.data && d.hasContent && d.contentType !== !1 || i.contentType) && C.setRequestHeader("Content-Type", d.contentType), 
            C.setRequestHeader("Accept", d.dataTypes[0] && d.accepts[d.dataTypes[0]] ? d.accepts[d.dataTypes[0]] + ("*" !== d.dataTypes[0] ? ", " + Gi + "; q=0.01" :"") :d.accepts["*"]);
            for (r in d.headers) C.setRequestHeader(r, d.headers[r]);
            if (d.beforeSend && (d.beforeSend.call(p, C, d) === !1 || 2 === b)) return C.abort();
            w = "abort";
            for (r in {
                success:1,
                error:1,
                complete:1
            }) C[r](d[r]);
            if (h = R($i, d, i, C)) {
                C.readyState = 1, c && f.trigger("ajaxSend", [ C, d ]), d.async && d.timeout > 0 && (l = setTimeout(function() {
                    C.abort("timeout");
                }, d.timeout));
                try {
                    b = 1, h.send(v, n);
                } catch (T) {
                    if (!(2 > b)) throw T;
                    n(-1, T);
                }
            } else n(-1, "No Transport");
            return C;
        },
        getScript:function(t, i) {
            return le.get(t, e, i, "script");
        },
        getJSON:function(t, e, i) {
            return le.get(t, e, i, "json");
        }
    }), le.ajaxSetup({
        accepts:{
            script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        contents:{
            script:/(?:java|ecma)script/
        },
        converters:{
            "text script":function(t) {
                return le.globalEval(t), t;
            }
        }
    }), le.ajaxPrefilter("script", function(t) {
        t.cache === e && (t.cache = !1), t.crossDomain && (t.type = "GET", t.global = !1);
    }), le.ajaxTransport("script", function(t) {
        if (t.crossDomain) {
            var i, n = q.head || le("head")[0] || q.documentElement;
            return {
                send:function(e, o) {
                    i = q.createElement("script"), i.async = !0, t.scriptCharset && (i.charset = t.scriptCharset), 
                    i.src = t.url, i.onload = i.onreadystatechange = function(t, e) {
                        (e || !i.readyState || /loaded|complete/.test(i.readyState)) && (i.onload = i.onreadystatechange = null, 
                        i.parentNode && i.parentNode.removeChild(i), i = null, e || o(200, "success"));
                    }, n.insertBefore(i, n.firstChild);
                },
                abort:function() {
                    i && i.onload(e, !0);
                }
            };
        }
    });
    var Vi = [], Wi = /(=)\?(?=&|$)|\?\?/;
    le.ajaxSetup({
        jsonp:"callback",
        jsonpCallback:function() {
            var t = Vi.pop() || le.expando + "_" + Pi++;
            return this[t] = !0, t;
        }
    }), le.ajaxPrefilter("json jsonp", function(i, n, o) {
        var r, s, a, l = i.jsonp !== !1 && (Wi.test(i.url) ? "url" :"string" == typeof i.data && !(i.contentType || "").indexOf("application/x-www-form-urlencoded") && Wi.test(i.data) && "data");
        return l || "jsonp" === i.dataTypes[0] ? (r = i.jsonpCallback = le.isFunction(i.jsonpCallback) ? i.jsonpCallback() :i.jsonpCallback, 
        l ? i[l] = i[l].replace(Wi, "$1" + r) :i.jsonp !== !1 && (i.url += (Ni.test(i.url) ? "&" :"?") + i.jsonp + "=" + r), 
        i.converters["script json"] = function() {
            return a || le.error(r + " was not called"), a[0];
        }, i.dataTypes[0] = "json", s = t[r], t[r] = function() {
            a = arguments;
        }, o.always(function() {
            t[r] = s, i[r] && (i.jsonpCallback = n.jsonpCallback, Vi.push(r)), a && le.isFunction(s) && s(a[0]), 
            a = s = e;
        }), "script") :void 0;
    });
    var qi, Yi, Ji = 0, Xi = t.ActiveXObject && function() {
        var t;
        for (t in qi) qi[t](e, !0);
    };
    le.ajaxSettings.xhr = t.ActiveXObject ? function() {
        return !this.isLocal && M() || L();
    } :M, Yi = le.ajaxSettings.xhr(), le.support.cors = !!Yi && "withCredentials" in Yi, 
    Yi = le.support.ajax = !!Yi, Yi && le.ajaxTransport(function(i) {
        if (!i.crossDomain || le.support.cors) {
            var n;
            return {
                send:function(o, r) {
                    var s, a, l = i.xhr();
                    if (i.username ? l.open(i.type, i.url, i.async, i.username, i.password) :l.open(i.type, i.url, i.async), 
                    i.xhrFields) for (a in i.xhrFields) l[a] = i.xhrFields[a];
                    i.mimeType && l.overrideMimeType && l.overrideMimeType(i.mimeType), i.crossDomain || o["X-Requested-With"] || (o["X-Requested-With"] = "XMLHttpRequest");
                    try {
                        for (a in o) l.setRequestHeader(a, o[a]);
                    } catch (c) {}
                    l.send(i.hasContent && i.data || null), n = function(t, o) {
                        var a, c, h, u;
                        try {
                            if (n && (o || 4 === l.readyState)) if (n = e, s && (l.onreadystatechange = le.noop, 
                            Xi && delete qi[s]), o) 4 !== l.readyState && l.abort(); else {
                                u = {}, a = l.status, c = l.getAllResponseHeaders(), "string" == typeof l.responseText && (u.text = l.responseText);
                                try {
                                    h = l.statusText;
                                } catch (d) {
                                    h = "";
                                }
                                a || !i.isLocal || i.crossDomain ? 1223 === a && (a = 204) :a = u.text ? 200 :404;
                            }
                        } catch (p) {
                            o || r(-1, p);
                        }
                        u && r(a, h, u, c);
                    }, i.async ? 4 === l.readyState ? setTimeout(n) :(s = ++Ji, Xi && (qi || (qi = {}, 
                    le(t).unload(Xi)), qi[s] = n), l.onreadystatechange = n) :n();
                },
                abort:function() {
                    n && n(e, !0);
                }
            };
        }
    });
    var Zi, Qi, tn = /^(?:toggle|show|hide)$/, en = new RegExp("^(?:([+-])=|)(" + ce + ")([a-z%]*)$", "i"), nn = /queueHooks$/, on = [ j ], rn = {
        "*":[ function(t, e) {
            var i, n, o = this.createTween(t, e), r = en.exec(e), s = o.cur(), a = +s || 0, l = 1, c = 20;
            if (r) {
                if (i = +r[2], n = r[3] || (le.cssNumber[t] ? "" :"px"), "px" !== n && a) {
                    a = le.css(o.elem, t, !0) || i || 1;
                    do l = l || ".5", a /= l, le.style(o.elem, t, a + n); while (l !== (l = o.cur() / s) && 1 !== l && --c);
                }
                o.unit = n, o.start = a, o.end = r[1] ? a + (r[1] + 1) * i :i;
            }
            return o;
        } ]
    };
    le.Animation = le.extend(K, {
        tweener:function(t, e) {
            le.isFunction(t) ? (e = t, t = [ "*" ]) :t = t.split(" ");
            for (var i, n = 0, o = t.length; o > n; n++) i = t[n], rn[i] = rn[i] || [], rn[i].unshift(e);
        },
        prefilter:function(t, e) {
            e ? on.unshift(t) :on.push(t);
        }
    }), le.Tween = H, H.prototype = {
        constructor:H,
        init:function(t, e, i, n, o, r) {
            this.elem = t, this.prop = i, this.easing = o || "swing", this.options = e, this.start = this.now = this.cur(), 
            this.end = n, this.unit = r || (le.cssNumber[i] ? "" :"px");
        },
        cur:function() {
            var t = H.propHooks[this.prop];
            return t && t.get ? t.get(this) :H.propHooks._default.get(this);
        },
        run:function(t) {
            var e, i = H.propHooks[this.prop];
            return this.pos = e = this.options.duration ? le.easing[this.easing](t, this.options.duration * t, 0, 1, this.options.duration) :t, 
            this.now = (this.end - this.start) * e + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), 
            i && i.set ? i.set(this) :H.propHooks._default.set(this), this;
        }
    }, H.prototype.init.prototype = H.prototype, H.propHooks = {
        _default:{
            get:function(t) {
                var e;
                return null == t.elem[t.prop] || t.elem.style && null != t.elem.style[t.prop] ? (e = le.css(t.elem, t.prop, ""), 
                e && "auto" !== e ? e :0) :t.elem[t.prop];
            },
            set:function(t) {
                le.fx.step[t.prop] ? le.fx.step[t.prop](t) :t.elem.style && (null != t.elem.style[le.cssProps[t.prop]] || le.cssHooks[t.prop]) ? le.style(t.elem, t.prop, t.now + t.unit) :t.elem[t.prop] = t.now;
            }
        }
    }, H.propHooks.scrollTop = H.propHooks.scrollLeft = {
        set:function(t) {
            t.elem.nodeType && t.elem.parentNode && (t.elem[t.prop] = t.now);
        }
    }, le.each([ "toggle", "show", "hide" ], function(t, e) {
        var i = le.fn[e];
        le.fn[e] = function(t, n, o) {
            return null == t || "boolean" == typeof t ? i.apply(this, arguments) :this.animate($(e, !0), t, n, o);
        };
    }), le.fn.extend({
        fadeTo:function(t, e, i, n) {
            return this.filter(C).css("opacity", 0).show().end().animate({
                opacity:e
            }, t, i, n);
        },
        animate:function(t, e, i, n) {
            var o = le.isEmptyObject(t), r = le.speed(e, i, n), s = function() {
                var e = K(this, le.extend({}, t), r);
                s.finish = function() {
                    e.stop(!0);
                }, (o || le._data(this, "finish")) && e.stop(!0);
            };
            return s.finish = s, o || r.queue === !1 ? this.each(s) :this.queue(r.queue, s);
        },
        stop:function(t, i, n) {
            var o = function(t) {
                var e = t.stop;
                delete t.stop, e(n);
            };
            return "string" != typeof t && (n = i, i = t, t = e), i && t !== !1 && this.queue(t || "fx", []), 
            this.each(function() {
                var e = !0, i = null != t && t + "queueHooks", r = le.timers, s = le._data(this);
                if (i) s[i] && s[i].stop && o(s[i]); else for (i in s) s[i] && s[i].stop && nn.test(i) && o(s[i]);
                for (i = r.length; i--; ) r[i].elem !== this || null != t && r[i].queue !== t || (r[i].anim.stop(n), 
                e = !1, r.splice(i, 1));
                (e || !n) && le.dequeue(this, t);
            });
        },
        finish:function(t) {
            return t !== !1 && (t = t || "fx"), this.each(function() {
                var e, i = le._data(this), n = i[t + "queue"], o = i[t + "queueHooks"], r = le.timers, s = n ? n.length :0;
                for (i.finish = !0, le.queue(this, t, []), o && o.cur && o.cur.finish && o.cur.finish.call(this), 
                e = r.length; e--; ) r[e].elem === this && r[e].queue === t && (r[e].anim.stop(!0), 
                r.splice(e, 1));
                for (e = 0; s > e; e++) n[e] && n[e].finish && n[e].finish.call(this);
                delete i.finish;
            });
        }
    }), le.each({
        slideDown:$("show"),
        slideUp:$("hide"),
        slideToggle:$("toggle"),
        fadeIn:{
            opacity:"show"
        },
        fadeOut:{
            opacity:"hide"
        },
        fadeToggle:{
            opacity:"toggle"
        }
    }, function(t, e) {
        le.fn[t] = function(t, i, n) {
            return this.animate(e, t, i, n);
        };
    }), le.speed = function(t, e, i) {
        var n = t && "object" == typeof t ? le.extend({}, t) :{
            complete:i || !i && e || le.isFunction(t) && t,
            duration:t,
            easing:i && e || e && !le.isFunction(e) && e
        };
        return n.duration = le.fx.off ? 0 :"number" == typeof n.duration ? n.duration :n.duration in le.fx.speeds ? le.fx.speeds[n.duration] :le.fx.speeds._default, 
        (null == n.queue || n.queue === !0) && (n.queue = "fx"), n.old = n.complete, n.complete = function() {
            le.isFunction(n.old) && n.old.call(this), n.queue && le.dequeue(this, n.queue);
        }, n;
    }, le.easing = {
        linear:function(t) {
            return t;
        },
        swing:function(t) {
            return .5 - Math.cos(t * Math.PI) / 2;
        }
    }, le.timers = [], le.fx = H.prototype.init, le.fx.tick = function() {
        var t, i = le.timers, n = 0;
        for (Zi = le.now(); n < i.length; n++) t = i[n], t() || i[n] !== t || i.splice(n--, 1);
        i.length || le.fx.stop(), Zi = e;
    }, le.fx.timer = function(t) {
        t() && le.timers.push(t) && le.fx.start();
    }, le.fx.interval = 13, le.fx.start = function() {
        Qi || (Qi = setInterval(le.fx.tick, le.fx.interval));
    }, le.fx.stop = function() {
        clearInterval(Qi), Qi = null;
    }, le.fx.speeds = {
        slow:600,
        fast:200,
        _default:400
    }, le.fx.step = {}, le.expr && le.expr.filters && (le.expr.filters.animated = function(t) {
        return le.grep(le.timers, function(e) {
            return t === e.elem;
        }).length;
    }), le.fn.offset = function(t) {
        if (arguments.length) return t === e ? this :this.each(function(e) {
            le.offset.setOffset(this, t, e);
        });
        var i, n, o = {
            top:0,
            left:0
        }, r = this[0], s = r && r.ownerDocument;
        if (s) return i = s.documentElement, le.contains(i, r) ? (typeof r.getBoundingClientRect !== W && (o = r.getBoundingClientRect()), 
        n = G(s), {
            top:o.top + (n.pageYOffset || i.scrollTop) - (i.clientTop || 0),
            left:o.left + (n.pageXOffset || i.scrollLeft) - (i.clientLeft || 0)
        }) :o;
    }, le.offset = {
        setOffset:function(t, e, i) {
            var n = le.css(t, "position");
            "static" === n && (t.style.position = "relative");
            var o, r, s = le(t), a = s.offset(), l = le.css(t, "top"), c = le.css(t, "left"), h = ("absolute" === n || "fixed" === n) && le.inArray("auto", [ l, c ]) > -1, u = {}, d = {};
            h ? (d = s.position(), o = d.top, r = d.left) :(o = parseFloat(l) || 0, r = parseFloat(c) || 0), 
            le.isFunction(e) && (e = e.call(t, i, a)), null != e.top && (u.top = e.top - a.top + o), 
            null != e.left && (u.left = e.left - a.left + r), "using" in e ? e.using.call(t, u) :s.css(u);
        }
    }, le.fn.extend({
        position:function() {
            if (this[0]) {
                var t, e, i = {
                    top:0,
                    left:0
                }, n = this[0];
                return "fixed" === le.css(n, "position") ? e = n.getBoundingClientRect() :(t = this.offsetParent(), 
                e = this.offset(), le.nodeName(t[0], "html") || (i = t.offset()), i.top += le.css(t[0], "borderTopWidth", !0), 
                i.left += le.css(t[0], "borderLeftWidth", !0)), {
                    top:e.top - i.top - le.css(n, "marginTop", !0),
                    left:e.left - i.left - le.css(n, "marginLeft", !0)
                };
            }
        },
        offsetParent:function() {
            return this.map(function() {
                for (var t = this.offsetParent || q.documentElement; t && !le.nodeName(t, "html") && "static" === le.css(t, "position"); ) t = t.offsetParent;
                return t || q.documentElement;
            });
        }
    }), le.each({
        scrollLeft:"pageXOffset",
        scrollTop:"pageYOffset"
    }, function(t, i) {
        var n = /Y/.test(i);
        le.fn[t] = function(o) {
            return le.access(this, function(t, o, r) {
                var s = G(t);
                return r === e ? s ? i in s ? s[i] :s.document.documentElement[o] :t[o] :(s ? s.scrollTo(n ? le(s).scrollLeft() :r, n ? r :le(s).scrollTop()) :t[o] = r, 
                void 0);
            }, t, o, arguments.length, null);
        };
    }), le.each({
        Height:"height",
        Width:"width"
    }, function(t, i) {
        le.each({
            padding:"inner" + t,
            content:i,
            "":"outer" + t
        }, function(n, o) {
            le.fn[o] = function(o, r) {
                var s = arguments.length && (n || "boolean" != typeof o), a = n || (o === !0 || r === !0 ? "margin" :"border");
                return le.access(this, function(i, n, o) {
                    var r;
                    return le.isWindow(i) ? i.document.documentElement["client" + t] :9 === i.nodeType ? (r = i.documentElement, 
                    Math.max(i.body["scroll" + t], r["scroll" + t], i.body["offset" + t], r["offset" + t], r["client" + t])) :o === e ? le.css(i, n, a) :le.style(i, n, o, a);
                }, i, s ? o :e, s, null);
            };
        });
    }), t.jQuery = t.$ = le, "function" == typeof define && define.amd && define.amd.jQuery && define("jquery", [], function() {
        return le;
    });
}(window), /*! jQuery UI - v1.9.2 - 2012-11-23
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright 2012 jQuery Foundation and other contributors; Licensed MIT */
function(t, e) {
    function i(e, i) {
        var o, r, s, a = e.nodeName.toLowerCase();
        return "area" === a ? (o = e.parentNode, r = o.name, e.href && r && "map" === o.nodeName.toLowerCase() ? (s = t("img[usemap=#" + r + "]")[0], 
        !!s && n(s)) :!1) :(/input|select|textarea|button|object/.test(a) ? !e.disabled :"a" === a ? e.href || i :i) && n(e);
    }
    function n(e) {
        return t.expr.filters.visible(e) && !t(e).parents().andSelf().filter(function() {
            return "hidden" === t.css(this, "visibility");
        }).length;
    }
    var o = 0, r = /^ui-id-\d+$/;
    t.ui = t.ui || {}, t.ui.version || (t.extend(t.ui, {
        version:"1.9.2",
        keyCode:{
            BACKSPACE:8,
            COMMA:188,
            DELETE:46,
            DOWN:40,
            END:35,
            ENTER:13,
            ESCAPE:27,
            HOME:36,
            LEFT:37,
            NUMPAD_ADD:107,
            NUMPAD_DECIMAL:110,
            NUMPAD_DIVIDE:111,
            NUMPAD_ENTER:108,
            NUMPAD_MULTIPLY:106,
            NUMPAD_SUBTRACT:109,
            PAGE_DOWN:34,
            PAGE_UP:33,
            PERIOD:190,
            RIGHT:39,
            SPACE:32,
            TAB:9,
            UP:38
        }
    }), t.fn.extend({
        _focus:t.fn.focus,
        focus:function(e, i) {
            return "number" == typeof e ? this.each(function() {
                var n = this;
                setTimeout(function() {
                    t(n).focus(), i && i.call(n);
                }, e);
            }) :this._focus.apply(this, arguments);
        },
        scrollParent:function() {
            var e;
            return e = t.ui.ie && /(static|relative)/.test(this.css("position")) || /absolute/.test(this.css("position")) ? this.parents().filter(function() {
                return /(relative|absolute|fixed)/.test(t.css(this, "position")) && /(auto|scroll)/.test(t.css(this, "overflow") + t.css(this, "overflow-y") + t.css(this, "overflow-x"));
            }).eq(0) :this.parents().filter(function() {
                return /(auto|scroll)/.test(t.css(this, "overflow") + t.css(this, "overflow-y") + t.css(this, "overflow-x"));
            }).eq(0), /fixed/.test(this.css("position")) || !e.length ? t(document) :e;
        },
        zIndex:function(i) {
            if (i !== e) return this.css("zIndex", i);
            if (this.length) for (var n, o, r = t(this[0]); r.length && r[0] !== document; ) {
                if (n = r.css("position"), ("absolute" === n || "relative" === n || "fixed" === n) && (o = parseInt(r.css("zIndex"), 10), 
                !isNaN(o) && 0 !== o)) return o;
                r = r.parent();
            }
            return 0;
        },
        uniqueId:function() {
            return this.each(function() {
                this.id || (this.id = "ui-id-" + ++o);
            });
        },
        removeUniqueId:function() {
            return this.each(function() {
                r.test(this.id) && t(this).removeAttr("id");
            });
        }
    }), t.extend(t.expr[":"], {
        data:t.expr.createPseudo ? t.expr.createPseudo(function(e) {
            return function(i) {
                return !!t.data(i, e);
            };
        }) :function(e, i, n) {
            return !!t.data(e, n[3]);
        },
        focusable:function(e) {
            return i(e, !isNaN(t.attr(e, "tabindex")));
        },
        tabbable:function(e) {
            var n = t.attr(e, "tabindex"), o = isNaN(n);
            return (o || n >= 0) && i(e, !o);
        }
    }), t(function() {
        var e = document.body, i = e.appendChild(i = document.createElement("div"));
        i.offsetHeight, t.extend(i.style, {
            minHeight:"100px",
            height:"auto",
            padding:0,
            borderWidth:0
        }), t.support.minHeight = 100 === i.offsetHeight, t.support.selectstart = "onselectstart" in i, 
        e.removeChild(i).style.display = "none";
    }), t("<a>").outerWidth(1).jquery || t.each([ "Width", "Height" ], function(i, n) {
        function o(e, i, n, o) {
            return t.each(r, function() {
                i -= parseFloat(t.css(e, "padding" + this)) || 0, n && (i -= parseFloat(t.css(e, "border" + this + "Width")) || 0), 
                o && (i -= parseFloat(t.css(e, "margin" + this)) || 0);
            }), i;
        }
        var r = "Width" === n ? [ "Left", "Right" ] :[ "Top", "Bottom" ], s = n.toLowerCase(), a = {
            innerWidth:t.fn.innerWidth,
            innerHeight:t.fn.innerHeight,
            outerWidth:t.fn.outerWidth,
            outerHeight:t.fn.outerHeight
        };
        t.fn["inner" + n] = function(i) {
            return i === e ? a["inner" + n].call(this) :this.each(function() {
                t(this).css(s, o(this, i) + "px");
            });
        }, t.fn["outer" + n] = function(e, i) {
            return "number" != typeof e ? a["outer" + n].call(this, e) :this.each(function() {
                t(this).css(s, o(this, e, !0, i) + "px");
            });
        };
    }), t("<a>").data("a-b", "a").removeData("a-b").data("a-b") && (t.fn.removeData = function(e) {
        return function(i) {
            return arguments.length ? e.call(this, t.camelCase(i)) :e.call(this);
        };
    }(t.fn.removeData)), function() {
        var e = /msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase()) || [];
        t.ui.ie = e.length ? !0 :!1, t.ui.ie6 = 6 === parseFloat(e[1], 10);
    }(), t.fn.extend({
        disableSelection:function() {
            return this.bind((t.support.selectstart ? "selectstart" :"mousedown") + ".ui-disableSelection", function(t) {
                t.preventDefault();
            });
        },
        enableSelection:function() {
            return this.unbind(".ui-disableSelection");
        }
    }), t.extend(t.ui, {
        plugin:{
            add:function(e, i, n) {
                var o, r = t.ui[e].prototype;
                for (o in n) r.plugins[o] = r.plugins[o] || [], r.plugins[o].push([ i, n[o] ]);
            },
            call:function(t, e, i) {
                var n, o = t.plugins[e];
                if (o && t.element[0].parentNode && 11 !== t.element[0].parentNode.nodeType) for (n = 0; n < o.length; n++) t.options[o[n][0]] && o[n][1].apply(t.element, i);
            }
        },
        contains:t.contains,
        hasScroll:function(e, i) {
            if ("hidden" === t(e).css("overflow")) return !1;
            var n = i && "left" === i ? "scrollLeft" :"scrollTop", o = !1;
            return e[n] > 0 ? !0 :(e[n] = 1, o = e[n] > 0, e[n] = 0, o);
        },
        isOverAxis:function(t, e, i) {
            return t > e && e + i > t;
        },
        isOver:function(e, i, n, o, r, s) {
            return t.ui.isOverAxis(e, n, r) && t.ui.isOverAxis(i, o, s);
        }
    }));
}(jQuery), function(t, e) {
    var i = 0, n = Array.prototype.slice, o = t.cleanData;
    t.cleanData = function(e) {
        for (var i, n = 0; null != (i = e[n]); n++) try {
            t(i).triggerHandler("remove");
        } catch (r) {}
        o(e);
    }, t.widget = function(e, i, n) {
        var o, r, s, a, l = e.split(".")[0];
        e = e.split(".")[1], o = l + "-" + e, n || (n = i, i = t.Widget), t.expr[":"][o.toLowerCase()] = function(e) {
            return !!t.data(e, o);
        }, t[l] = t[l] || {}, r = t[l][e], s = t[l][e] = function(t, e) {
            return this._createWidget ? (arguments.length && this._createWidget(t, e), void 0) :new s(t, e);
        }, t.extend(s, r, {
            version:n.version,
            _proto:t.extend({}, n),
            _childConstructors:[]
        }), a = new i(), a.options = t.widget.extend({}, a.options), t.each(n, function(e, o) {
            t.isFunction(o) && (n[e] = function() {
                var t = function() {
                    return i.prototype[e].apply(this, arguments);
                }, n = function(t) {
                    return i.prototype[e].apply(this, t);
                };
                return function() {
                    var e, i = this._super, r = this._superApply;
                    return this._super = t, this._superApply = n, e = o.apply(this, arguments), this._super = i, 
                    this._superApply = r, e;
                };
            }());
        }), s.prototype = t.widget.extend(a, {
            widgetEventPrefix:r ? a.widgetEventPrefix :e
        }, n, {
            constructor:s,
            namespace:l,
            widgetName:e,
            widgetBaseClass:o,
            widgetFullName:o
        }), r ? (t.each(r._childConstructors, function(e, i) {
            var n = i.prototype;
            t.widget(n.namespace + "." + n.widgetName, s, i._proto);
        }), delete r._childConstructors) :i._childConstructors.push(s), t.widget.bridge(e, s);
    }, t.widget.extend = function(i) {
        for (var o, r, s = n.call(arguments, 1), a = 0, l = s.length; l > a; a++) for (o in s[a]) r = s[a][o], 
        s[a].hasOwnProperty(o) && r !== e && (i[o] = t.isPlainObject(r) ? t.isPlainObject(i[o]) ? t.widget.extend({}, i[o], r) :t.widget.extend({}, r) :r);
        return i;
    }, t.widget.bridge = function(i, o) {
        var r = o.prototype.widgetFullName || i;
        t.fn[i] = function(s) {
            var a = "string" == typeof s, l = n.call(arguments, 1), c = this;
            return s = !a && l.length ? t.widget.extend.apply(null, [ s ].concat(l)) :s, a ? this.each(function() {
                var n, o = t.data(this, r);
                return o ? t.isFunction(o[s]) && "_" !== s.charAt(0) ? (n = o[s].apply(o, l), n !== o && n !== e ? (c = n && n.jquery ? c.pushStack(n.get()) :n, 
                !1) :void 0) :t.error("no such method '" + s + "' for " + i + " widget instance") :t.error("cannot call methods on " + i + " prior to initialization; attempted to call method '" + s + "'");
            }) :this.each(function() {
                var e = t.data(this, r);
                e ? e.option(s || {})._init() :t.data(this, r, new o(s, this));
            }), c;
        };
    }, t.Widget = function() {}, t.Widget._childConstructors = [], t.Widget.prototype = {
        widgetName:"widget",
        widgetEventPrefix:"",
        defaultElement:"<div>",
        options:{
            disabled:!1,
            create:null
        },
        _createWidget:function(e, n) {
            n = t(n || this.defaultElement || this)[0], this.element = t(n), this.uuid = i++, 
            this.eventNamespace = "." + this.widgetName + this.uuid, this.options = t.widget.extend({}, this.options, this._getCreateOptions(), e), 
            this.bindings = t(), this.hoverable = t(), this.focusable = t(), n !== this && (t.data(n, this.widgetName, this), 
            t.data(n, this.widgetFullName, this), this._on(!0, this.element, {
                remove:function(t) {
                    t.target === n && this.destroy();
                }
            }), this.document = t(n.style ? n.ownerDocument :n.document || n), this.window = t(this.document[0].defaultView || this.document[0].parentWindow)), 
            this._create(), this._trigger("create", null, this._getCreateEventData()), this._init();
        },
        _getCreateOptions:t.noop,
        _getCreateEventData:t.noop,
        _create:t.noop,
        _init:t.noop,
        destroy:function() {
            this._destroy(), this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)), 
            this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled ui-state-disabled"), 
            this.bindings.unbind(this.eventNamespace), this.hoverable.removeClass("ui-state-hover"), 
            this.focusable.removeClass("ui-state-focus");
        },
        _destroy:t.noop,
        widget:function() {
            return this.element;
        },
        option:function(i, n) {
            var o, r, s, a = i;
            if (0 === arguments.length) return t.widget.extend({}, this.options);
            if ("string" == typeof i) if (a = {}, o = i.split("."), i = o.shift(), o.length) {
                for (r = a[i] = t.widget.extend({}, this.options[i]), s = 0; s < o.length - 1; s++) r[o[s]] = r[o[s]] || {}, 
                r = r[o[s]];
                if (i = o.pop(), n === e) return r[i] === e ? null :r[i];
                r[i] = n;
            } else {
                if (n === e) return this.options[i] === e ? null :this.options[i];
                a[i] = n;
            }
            return this._setOptions(a), this;
        },
        _setOptions:function(t) {
            var e;
            for (e in t) this._setOption(e, t[e]);
            return this;
        },
        _setOption:function(t, e) {
            return this.options[t] = e, "disabled" === t && (this.widget().toggleClass(this.widgetFullName + "-disabled ui-state-disabled", !!e).attr("aria-disabled", e), 
            this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")), 
            this;
        },
        enable:function() {
            return this._setOption("disabled", !1);
        },
        disable:function() {
            return this._setOption("disabled", !0);
        },
        _on:function(e, i, n) {
            var o, r = this;
            "boolean" != typeof e && (n = i, i = e, e = !1), n ? (i = o = t(i), this.bindings = this.bindings.add(i)) :(n = i, 
            i = this.element, o = this.widget()), t.each(n, function(n, s) {
                function a() {
                    return e || r.options.disabled !== !0 && !t(this).hasClass("ui-state-disabled") ? ("string" == typeof s ? r[s] :s).apply(r, arguments) :void 0;
                }
                "string" != typeof s && (a.guid = s.guid = s.guid || a.guid || t.guid++);
                var l = n.match(/^(\w+)\s*(.*)$/), c = l[1] + r.eventNamespace, h = l[2];
                h ? o.delegate(h, c, a) :i.bind(c, a);
            });
        },
        _off:function(t, e) {
            e = (e || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace, 
            t.unbind(e).undelegate(e);
        },
        _delay:function(t, e) {
            function i() {
                return ("string" == typeof t ? n[t] :t).apply(n, arguments);
            }
            var n = this;
            return setTimeout(i, e || 0);
        },
        _hoverable:function(e) {
            this.hoverable = this.hoverable.add(e), this._on(e, {
                mouseenter:function(e) {
                    t(e.currentTarget).addClass("ui-state-hover");
                },
                mouseleave:function(e) {
                    t(e.currentTarget).removeClass("ui-state-hover");
                }
            });
        },
        _focusable:function(e) {
            this.focusable = this.focusable.add(e), this._on(e, {
                focusin:function(e) {
                    t(e.currentTarget).addClass("ui-state-focus");
                },
                focusout:function(e) {
                    t(e.currentTarget).removeClass("ui-state-focus");
                }
            });
        },
        _trigger:function(e, i, n) {
            var o, r, s = this.options[e];
            if (n = n || {}, i = t.Event(i), i.type = (e === this.widgetEventPrefix ? e :this.widgetEventPrefix + e).toLowerCase(), 
            i.target = this.element[0], r = i.originalEvent) for (o in r) o in i || (i[o] = r[o]);
            return this.element.trigger(i, n), !(t.isFunction(s) && s.apply(this.element[0], [ i ].concat(n)) === !1 || i.isDefaultPrevented());
        }
    }, t.each({
        show:"fadeIn",
        hide:"fadeOut"
    }, function(e, i) {
        t.Widget.prototype["_" + e] = function(n, o, r) {
            "string" == typeof o && (o = {
                effect:o
            });
            var s, a = o ? o === !0 || "number" == typeof o ? i :o.effect || i :e;
            o = o || {}, "number" == typeof o && (o = {
                duration:o
            }), s = !t.isEmptyObject(o), o.complete = r, o.delay && n.delay(o.delay), s && t.effects && (t.effects.effect[a] || t.uiBackCompat !== !1 && t.effects[a]) ? n[e](o) :a !== e && n[a] ? n[a](o.duration, o.easing, r) :n.queue(function(i) {
                t(this)[e](), r && r.call(n[0]), i();
            });
        };
    }), t.uiBackCompat !== !1 && (t.Widget.prototype._getCreateOptions = function() {
        return t.metadata && t.metadata.get(this.element[0])[this.widgetName];
    });
}(jQuery), function(t) {
    var e = !1;
    t(document).mouseup(function() {
        e = !1;
    }), t.widget("ui.mouse", {
        version:"1.9.2",
        options:{
            cancel:"input,textarea,button,select,option",
            distance:1,
            delay:0
        },
        _mouseInit:function() {
            var e = this;
            this.element.bind("mousedown." + this.widgetName, function(t) {
                return e._mouseDown(t);
            }).bind("click." + this.widgetName, function(i) {
                return !0 === t.data(i.target, e.widgetName + ".preventClickEvent") ? (t.removeData(i.target, e.widgetName + ".preventClickEvent"), 
                i.stopImmediatePropagation(), !1) :void 0;
            }), this.started = !1;
        },
        _mouseDestroy:function() {
            this.element.unbind("." + this.widgetName), this._mouseMoveDelegate && t(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate);
        },
        _mouseDown:function(i) {
            if (!e) {
                this._mouseStarted && this._mouseUp(i), this._mouseDownEvent = i;
                var n = this, o = 1 === i.which, r = "string" == typeof this.options.cancel && i.target.nodeName ? t(i.target).closest(this.options.cancel).length :!1;
                return o && !r && this._mouseCapture(i) ? (this.mouseDelayMet = !this.options.delay, 
                this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function() {
                    n.mouseDelayMet = !0;
                }, this.options.delay)), this._mouseDistanceMet(i) && this._mouseDelayMet(i) && (this._mouseStarted = this._mouseStart(i) !== !1, 
                !this._mouseStarted) ? (i.preventDefault(), !0) :(!0 === t.data(i.target, this.widgetName + ".preventClickEvent") && t.removeData(i.target, this.widgetName + ".preventClickEvent"), 
                this._mouseMoveDelegate = function(t) {
                    return n._mouseMove(t);
                }, this._mouseUpDelegate = function(t) {
                    return n._mouseUp(t);
                }, t(document).bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate), 
                i.preventDefault(), e = !0, !0)) :!0;
            }
        },
        _mouseMove:function(e) {
            return !t.ui.ie || document.documentMode >= 9 || e.button ? this._mouseStarted ? (this._mouseDrag(e), 
            e.preventDefault()) :(this._mouseDistanceMet(e) && this._mouseDelayMet(e) && (this._mouseStarted = this._mouseStart(this._mouseDownEvent, e) !== !1, 
            this._mouseStarted ? this._mouseDrag(e) :this._mouseUp(e)), !this._mouseStarted) :this._mouseUp(e);
        },
        _mouseUp:function(e) {
            return t(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate), 
            this._mouseStarted && (this._mouseStarted = !1, e.target === this._mouseDownEvent.target && t.data(e.target, this.widgetName + ".preventClickEvent", !0), 
            this._mouseStop(e)), !1;
        },
        _mouseDistanceMet:function(t) {
            return Math.max(Math.abs(this._mouseDownEvent.pageX - t.pageX), Math.abs(this._mouseDownEvent.pageY - t.pageY)) >= this.options.distance;
        },
        _mouseDelayMet:function() {
            return this.mouseDelayMet;
        },
        _mouseStart:function() {},
        _mouseDrag:function() {},
        _mouseStop:function() {},
        _mouseCapture:function() {
            return !0;
        }
    });
}(jQuery), function(t) {
    t.widget("ui.draggable", t.ui.mouse, {
        version:"1.9.2",
        widgetEventPrefix:"drag",
        options:{
            addClasses:!0,
            appendTo:"parent",
            axis:!1,
            connectToSortable:!1,
            containment:!1,
            cursor:"auto",
            cursorAt:!1,
            grid:!1,
            handle:!1,
            helper:"original",
            iframeFix:!1,
            opacity:!1,
            refreshPositions:!1,
            revert:!1,
            revertDuration:500,
            scope:"default",
            scroll:!0,
            scrollSensitivity:20,
            scrollSpeed:20,
            snap:!1,
            snapMode:"both",
            snapTolerance:20,
            stack:!1,
            zIndex:!1
        },
        _create:function() {
            "original" != this.options.helper || /^(?:r|a|f)/.test(this.element.css("position")) || (this.element[0].style.position = "relative"), 
            this.options.addClasses && this.element.addClass("ui-draggable"), this.options.disabled && this.element.addClass("ui-draggable-disabled"), 
            this._mouseInit();
        },
        _destroy:function() {
            this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"), 
            this._mouseDestroy();
        },
        _mouseCapture:function(e) {
            var i = this.options;
            return this.helper || i.disabled || t(e.target).is(".ui-resizable-handle") ? !1 :(this.handle = this._getHandle(e), 
            this.handle ? (t(i.iframeFix === !0 ? "iframe" :i.iframeFix).each(function() {
                t('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({
                    width:this.offsetWidth + "px",
                    height:this.offsetHeight + "px",
                    position:"absolute",
                    opacity:"0.001",
                    zIndex:1e3
                }).css(t(this).offset()).appendTo("body");
            }), !0) :!1);
        },
        _mouseStart:function(e) {
            var i = this.options;
            return this.helper = this._createHelper(e), this.helper.addClass("ui-draggable-dragging"), 
            this._cacheHelperProportions(), t.ui.ddmanager && (t.ui.ddmanager.current = this), 
            this._cacheMargins(), this.cssPosition = this.helper.css("position"), this.scrollParent = this.helper.scrollParent(), 
            this.offset = this.positionAbs = this.element.offset(), this.offset = {
                top:this.offset.top - this.margins.top,
                left:this.offset.left - this.margins.left
            }, t.extend(this.offset, {
                click:{
                    left:e.pageX - this.offset.left,
                    top:e.pageY - this.offset.top
                },
                parent:this._getParentOffset(),
                relative:this._getRelativeOffset()
            }), this.originalPosition = this.position = this._generatePosition(e), this.originalPageX = e.pageX, 
            this.originalPageY = e.pageY, i.cursorAt && this._adjustOffsetFromHelper(i.cursorAt), 
            i.containment && this._setContainment(), this._trigger("start", e) === !1 ? (this._clear(), 
            !1) :(this._cacheHelperProportions(), t.ui.ddmanager && !i.dropBehaviour && t.ui.ddmanager.prepareOffsets(this, e), 
            this._mouseDrag(e, !0), t.ui.ddmanager && t.ui.ddmanager.dragStart(this, e), !0);
        },
        _mouseDrag:function(e, i) {
            if (this.position = this._generatePosition(e), this.positionAbs = this._convertPositionTo("absolute"), 
            !i) {
                var n = this._uiHash();
                if (this._trigger("drag", e, n) === !1) return this._mouseUp({}), !1;
                this.position = n.position;
            }
            return this.options.axis && "y" == this.options.axis || (this.helper[0].style.left = this.position.left + "px"), 
            this.options.axis && "x" == this.options.axis || (this.helper[0].style.top = this.position.top + "px"), 
            t.ui.ddmanager && t.ui.ddmanager.drag(this, e), !1;
        },
        _mouseStop:function(e) {
            var i = !1;
            t.ui.ddmanager && !this.options.dropBehaviour && (i = t.ui.ddmanager.drop(this, e)), 
            this.dropped && (i = this.dropped, this.dropped = !1);
            for (var n = this.element[0], o = !1; n && (n = n.parentNode); ) n == document && (o = !0);
            if (!o && "original" === this.options.helper) return !1;
            if ("invalid" == this.options.revert && !i || "valid" == this.options.revert && i || this.options.revert === !0 || t.isFunction(this.options.revert) && this.options.revert.call(this.element, i)) {
                var r = this;
                t(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {
                    r._trigger("stop", e) !== !1 && r._clear();
                });
            } else this._trigger("stop", e) !== !1 && this._clear();
            return !1;
        },
        _mouseUp:function(e) {
            return t("div.ui-draggable-iframeFix").each(function() {
                this.parentNode.removeChild(this);
            }), t.ui.ddmanager && t.ui.ddmanager.dragStop(this, e), t.ui.mouse.prototype._mouseUp.call(this, e);
        },
        cancel:function() {
            return this.helper.is(".ui-draggable-dragging") ? this._mouseUp({}) :this._clear(), 
            this;
        },
        _getHandle:function(e) {
            var i = this.options.handle && t(this.options.handle, this.element).length ? !1 :!0;
            return t(this.options.handle, this.element).find("*").andSelf().each(function() {
                this == e.target && (i = !0);
            }), i;
        },
        _createHelper:function(e) {
            var i = this.options, n = t.isFunction(i.helper) ? t(i.helper.apply(this.element[0], [ e ])) :"clone" == i.helper ? this.element.clone().removeAttr("id") :this.element;
            return n.parents("body").length || n.appendTo("parent" == i.appendTo ? this.element[0].parentNode :i.appendTo), 
            n[0] == this.element[0] || /(fixed|absolute)/.test(n.css("position")) || n.css("position", "absolute"), 
            n;
        },
        _adjustOffsetFromHelper:function(e) {
            "string" == typeof e && (e = e.split(" ")), t.isArray(e) && (e = {
                left:+e[0],
                top:+e[1] || 0
            }), "left" in e && (this.offset.click.left = e.left + this.margins.left), "right" in e && (this.offset.click.left = this.helperProportions.width - e.right + this.margins.left), 
            "top" in e && (this.offset.click.top = e.top + this.margins.top), "bottom" in e && (this.offset.click.top = this.helperProportions.height - e.bottom + this.margins.top);
        },
        _getParentOffset:function() {
            this.offsetParent = this.helper.offsetParent();
            var e = this.offsetParent.offset();
            return "absolute" == this.cssPosition && this.scrollParent[0] != document && t.contains(this.scrollParent[0], this.offsetParent[0]) && (e.left += this.scrollParent.scrollLeft(), 
            e.top += this.scrollParent.scrollTop()), (this.offsetParent[0] == document.body || this.offsetParent[0].tagName && "html" == this.offsetParent[0].tagName.toLowerCase() && t.ui.ie) && (e = {
                top:0,
                left:0
            }), {
                top:e.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                left:e.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
            };
        },
        _getRelativeOffset:function() {
            if ("relative" == this.cssPosition) {
                var t = this.element.position();
                return {
                    top:t.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                    left:t.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                };
            }
            return {
                top:0,
                left:0
            };
        },
        _cacheMargins:function() {
            this.margins = {
                left:parseInt(this.element.css("marginLeft"), 10) || 0,
                top:parseInt(this.element.css("marginTop"), 10) || 0,
                right:parseInt(this.element.css("marginRight"), 10) || 0,
                bottom:parseInt(this.element.css("marginBottom"), 10) || 0
            };
        },
        _cacheHelperProportions:function() {
            this.helperProportions = {
                width:this.helper.outerWidth(),
                height:this.helper.outerHeight()
            };
        },
        _setContainment:function() {
            var e = this.options;
            if ("parent" == e.containment && (e.containment = this.helper[0].parentNode), ("document" == e.containment || "window" == e.containment) && (this.containment = [ "document" == e.containment ? 0 :t(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, "document" == e.containment ? 0 :t(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, ("document" == e.containment ? 0 :t(window).scrollLeft()) + t("document" == e.containment ? document :window).width() - this.helperProportions.width - this.margins.left, ("document" == e.containment ? 0 :t(window).scrollTop()) + (t("document" == e.containment ? document :window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top ]), 
            /^(document|window|parent)$/.test(e.containment) || e.containment.constructor == Array) e.containment.constructor == Array && (this.containment = e.containment); else {
                var i = t(e.containment), n = i[0];
                if (!n) return;
                var o = (i.offset(), "hidden" != t(n).css("overflow"));
                this.containment = [ (parseInt(t(n).css("borderLeftWidth"), 10) || 0) + (parseInt(t(n).css("paddingLeft"), 10) || 0), (parseInt(t(n).css("borderTopWidth"), 10) || 0) + (parseInt(t(n).css("paddingTop"), 10) || 0), (o ? Math.max(n.scrollWidth, n.offsetWidth) :n.offsetWidth) - (parseInt(t(n).css("borderLeftWidth"), 10) || 0) - (parseInt(t(n).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (o ? Math.max(n.scrollHeight, n.offsetHeight) :n.offsetHeight) - (parseInt(t(n).css("borderTopWidth"), 10) || 0) - (parseInt(t(n).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom ], 
                this.relative_container = i;
            }
        },
        _convertPositionTo:function(e, i) {
            i || (i = this.position);
            var n = "absolute" == e ? 1 :-1, o = (this.options, "absolute" != this.cssPosition || this.scrollParent[0] != document && t.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent :this.offsetParent), r = /(html|body)/i.test(o[0].tagName);
            return {
                top:i.top + this.offset.relative.top * n + this.offset.parent.top * n - ("fixed" == this.cssPosition ? -this.scrollParent.scrollTop() :r ? 0 :o.scrollTop()) * n,
                left:i.left + this.offset.relative.left * n + this.offset.parent.left * n - ("fixed" == this.cssPosition ? -this.scrollParent.scrollLeft() :r ? 0 :o.scrollLeft()) * n
            };
        },
        _generatePosition:function(e) {
            var i = this.options, n = "absolute" != this.cssPosition || this.scrollParent[0] != document && t.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent :this.offsetParent, o = /(html|body)/i.test(n[0].tagName), r = e.pageX, s = e.pageY;
            if (this.originalPosition) {
                var a;
                if (this.containment) {
                    if (this.relative_container) {
                        var l = this.relative_container.offset();
                        a = [ this.containment[0] + l.left, this.containment[1] + l.top, this.containment[2] + l.left, this.containment[3] + l.top ];
                    } else a = this.containment;
                    e.pageX - this.offset.click.left < a[0] && (r = a[0] + this.offset.click.left), 
                    e.pageY - this.offset.click.top < a[1] && (s = a[1] + this.offset.click.top), e.pageX - this.offset.click.left > a[2] && (r = a[2] + this.offset.click.left), 
                    e.pageY - this.offset.click.top > a[3] && (s = a[3] + this.offset.click.top);
                }
                if (i.grid) {
                    var c = i.grid[1] ? this.originalPageY + Math.round((s - this.originalPageY) / i.grid[1]) * i.grid[1] :this.originalPageY;
                    s = a ? c - this.offset.click.top < a[1] || c - this.offset.click.top > a[3] ? c - this.offset.click.top < a[1] ? c + i.grid[1] :c - i.grid[1] :c :c;
                    var h = i.grid[0] ? this.originalPageX + Math.round((r - this.originalPageX) / i.grid[0]) * i.grid[0] :this.originalPageX;
                    r = a ? h - this.offset.click.left < a[0] || h - this.offset.click.left > a[2] ? h - this.offset.click.left < a[0] ? h + i.grid[0] :h - i.grid[0] :h :h;
                }
            }
            return {
                top:s - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" == this.cssPosition ? -this.scrollParent.scrollTop() :o ? 0 :n.scrollTop()),
                left:r - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" == this.cssPosition ? -this.scrollParent.scrollLeft() :o ? 0 :n.scrollLeft())
            };
        },
        _clear:function() {
            this.helper.removeClass("ui-draggable-dragging"), this.helper[0] == this.element[0] || this.cancelHelperRemoval || this.helper.remove(), 
            this.helper = null, this.cancelHelperRemoval = !1;
        },
        _trigger:function(e, i, n) {
            return n = n || this._uiHash(), t.ui.plugin.call(this, e, [ i, n ]), "drag" == e && (this.positionAbs = this._convertPositionTo("absolute")), 
            t.Widget.prototype._trigger.call(this, e, i, n);
        },
        plugins:{},
        _uiHash:function() {
            return {
                helper:this.helper,
                position:this.position,
                originalPosition:this.originalPosition,
                offset:this.positionAbs
            };
        }
    }), t.ui.plugin.add("draggable", "connectToSortable", {
        start:function(e, i) {
            var n = t(this).data("draggable"), o = n.options, r = t.extend({}, i, {
                item:n.element
            });
            n.sortables = [], t(o.connectToSortable).each(function() {
                var i = t.data(this, "sortable");
                i && !i.options.disabled && (n.sortables.push({
                    instance:i,
                    shouldRevert:i.options.revert
                }), i.refreshPositions(), i._trigger("activate", e, r));
            });
        },
        stop:function(e, i) {
            var n = t(this).data("draggable"), o = t.extend({}, i, {
                item:n.element
            });
            t.each(n.sortables, function() {
                this.instance.isOver ? (this.instance.isOver = 0, n.cancelHelperRemoval = !0, this.instance.cancelHelperRemoval = !1, 
                this.shouldRevert && (this.instance.options.revert = !0), this.instance._mouseStop(e), 
                this.instance.options.helper = this.instance.options._helper, "original" == n.options.helper && this.instance.currentItem.css({
                    top:"auto",
                    left:"auto"
                })) :(this.instance.cancelHelperRemoval = !1, this.instance._trigger("deactivate", e, o));
            });
        },
        drag:function(e, i) {
            var n = t(this).data("draggable"), o = this;
            t.each(n.sortables, function() {
                var r = !1, s = this;
                this.instance.positionAbs = n.positionAbs, this.instance.helperProportions = n.helperProportions, 
                this.instance.offset.click = n.offset.click, this.instance._intersectsWith(this.instance.containerCache) && (r = !0, 
                t.each(n.sortables, function() {
                    return this.instance.positionAbs = n.positionAbs, this.instance.helperProportions = n.helperProportions, 
                    this.instance.offset.click = n.offset.click, this != s && this.instance._intersectsWith(this.instance.containerCache) && t.ui.contains(s.instance.element[0], this.instance.element[0]) && (r = !1), 
                    r;
                })), r ? (this.instance.isOver || (this.instance.isOver = 1, this.instance.currentItem = t(o).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item", !0), 
                this.instance.options._helper = this.instance.options.helper, this.instance.options.helper = function() {
                    return i.helper[0];
                }, e.target = this.instance.currentItem[0], this.instance._mouseCapture(e, !0), 
                this.instance._mouseStart(e, !0, !0), this.instance.offset.click.top = n.offset.click.top, 
                this.instance.offset.click.left = n.offset.click.left, this.instance.offset.parent.left -= n.offset.parent.left - this.instance.offset.parent.left, 
                this.instance.offset.parent.top -= n.offset.parent.top - this.instance.offset.parent.top, 
                n._trigger("toSortable", e), n.dropped = this.instance.element, n.currentItem = n.element, 
                this.instance.fromOutside = n), this.instance.currentItem && this.instance._mouseDrag(e)) :this.instance.isOver && (this.instance.isOver = 0, 
                this.instance.cancelHelperRemoval = !0, this.instance.options.revert = !1, this.instance._trigger("out", e, this.instance._uiHash(this.instance)), 
                this.instance._mouseStop(e, !0), this.instance.options.helper = this.instance.options._helper, 
                this.instance.currentItem.remove(), this.instance.placeholder && this.instance.placeholder.remove(), 
                n._trigger("fromSortable", e), n.dropped = !1);
            });
        }
    }), t.ui.plugin.add("draggable", "cursor", {
        start:function() {
            var e = t("body"), i = t(this).data("draggable").options;
            e.css("cursor") && (i._cursor = e.css("cursor")), e.css("cursor", i.cursor);
        },
        stop:function() {
            var e = t(this).data("draggable").options;
            e._cursor && t("body").css("cursor", e._cursor);
        }
    }), t.ui.plugin.add("draggable", "opacity", {
        start:function(e, i) {
            var n = t(i.helper), o = t(this).data("draggable").options;
            n.css("opacity") && (o._opacity = n.css("opacity")), n.css("opacity", o.opacity);
        },
        stop:function(e, i) {
            var n = t(this).data("draggable").options;
            n._opacity && t(i.helper).css("opacity", n._opacity);
        }
    }), t.ui.plugin.add("draggable", "scroll", {
        start:function() {
            var e = t(this).data("draggable");
            e.scrollParent[0] != document && "HTML" != e.scrollParent[0].tagName && (e.overflowOffset = e.scrollParent.offset());
        },
        drag:function(e) {
            var i = t(this).data("draggable"), n = i.options, o = !1;
            i.scrollParent[0] != document && "HTML" != i.scrollParent[0].tagName ? (n.axis && "x" == n.axis || (i.overflowOffset.top + i.scrollParent[0].offsetHeight - e.pageY < n.scrollSensitivity ? i.scrollParent[0].scrollTop = o = i.scrollParent[0].scrollTop + n.scrollSpeed :e.pageY - i.overflowOffset.top < n.scrollSensitivity && (i.scrollParent[0].scrollTop = o = i.scrollParent[0].scrollTop - n.scrollSpeed)), 
            n.axis && "y" == n.axis || (i.overflowOffset.left + i.scrollParent[0].offsetWidth - e.pageX < n.scrollSensitivity ? i.scrollParent[0].scrollLeft = o = i.scrollParent[0].scrollLeft + n.scrollSpeed :e.pageX - i.overflowOffset.left < n.scrollSensitivity && (i.scrollParent[0].scrollLeft = o = i.scrollParent[0].scrollLeft - n.scrollSpeed))) :(n.axis && "x" == n.axis || (e.pageY - t(document).scrollTop() < n.scrollSensitivity ? o = t(document).scrollTop(t(document).scrollTop() - n.scrollSpeed) :t(window).height() - (e.pageY - t(document).scrollTop()) < n.scrollSensitivity && (o = t(document).scrollTop(t(document).scrollTop() + n.scrollSpeed))), 
            n.axis && "y" == n.axis || (e.pageX - t(document).scrollLeft() < n.scrollSensitivity ? o = t(document).scrollLeft(t(document).scrollLeft() - n.scrollSpeed) :t(window).width() - (e.pageX - t(document).scrollLeft()) < n.scrollSensitivity && (o = t(document).scrollLeft(t(document).scrollLeft() + n.scrollSpeed)))), 
            o !== !1 && t.ui.ddmanager && !n.dropBehaviour && t.ui.ddmanager.prepareOffsets(i, e);
        }
    }), t.ui.plugin.add("draggable", "snap", {
        start:function() {
            var e = t(this).data("draggable"), i = e.options;
            e.snapElements = [], t(i.snap.constructor != String ? i.snap.items || ":data(draggable)" :i.snap).each(function() {
                var i = t(this), n = i.offset();
                this != e.element[0] && e.snapElements.push({
                    item:this,
                    width:i.outerWidth(),
                    height:i.outerHeight(),
                    top:n.top,
                    left:n.left
                });
            });
        },
        drag:function(e, i) {
            for (var n = t(this).data("draggable"), o = n.options, r = o.snapTolerance, s = i.offset.left, a = s + n.helperProportions.width, l = i.offset.top, c = l + n.helperProportions.height, h = n.snapElements.length - 1; h >= 0; h--) {
                var u = n.snapElements[h].left, d = u + n.snapElements[h].width, p = n.snapElements[h].top, f = p + n.snapElements[h].height;
                if (s > u - r && d + r > s && l > p - r && f + r > l || s > u - r && d + r > s && c > p - r && f + r > c || a > u - r && d + r > a && l > p - r && f + r > l || a > u - r && d + r > a && c > p - r && f + r > c) {
                    if ("inner" != o.snapMode) {
                        var g = Math.abs(p - c) <= r, m = Math.abs(f - l) <= r, _ = Math.abs(u - a) <= r, v = Math.abs(d - s) <= r;
                        g && (i.position.top = n._convertPositionTo("relative", {
                            top:p - n.helperProportions.height,
                            left:0
                        }).top - n.margins.top), m && (i.position.top = n._convertPositionTo("relative", {
                            top:f,
                            left:0
                        }).top - n.margins.top), _ && (i.position.left = n._convertPositionTo("relative", {
                            top:0,
                            left:u - n.helperProportions.width
                        }).left - n.margins.left), v && (i.position.left = n._convertPositionTo("relative", {
                            top:0,
                            left:d
                        }).left - n.margins.left);
                    }
                    var y = g || m || _ || v;
                    if ("outer" != o.snapMode) {
                        var g = Math.abs(p - l) <= r, m = Math.abs(f - c) <= r, _ = Math.abs(u - s) <= r, v = Math.abs(d - a) <= r;
                        g && (i.position.top = n._convertPositionTo("relative", {
                            top:p,
                            left:0
                        }).top - n.margins.top), m && (i.position.top = n._convertPositionTo("relative", {
                            top:f - n.helperProportions.height,
                            left:0
                        }).top - n.margins.top), _ && (i.position.left = n._convertPositionTo("relative", {
                            top:0,
                            left:u
                        }).left - n.margins.left), v && (i.position.left = n._convertPositionTo("relative", {
                            top:0,
                            left:d - n.helperProportions.width
                        }).left - n.margins.left);
                    }
                    !n.snapElements[h].snapping && (g || m || _ || v || y) && n.options.snap.snap && n.options.snap.snap.call(n.element, e, t.extend(n._uiHash(), {
                        snapItem:n.snapElements[h].item
                    })), n.snapElements[h].snapping = g || m || _ || v || y;
                } else n.snapElements[h].snapping && n.options.snap.release && n.options.snap.release.call(n.element, e, t.extend(n._uiHash(), {
                    snapItem:n.snapElements[h].item
                })), n.snapElements[h].snapping = !1;
            }
        }
    }), t.ui.plugin.add("draggable", "stack", {
        start:function() {
            var e = t(this).data("draggable").options, i = t.makeArray(t(e.stack)).sort(function(e, i) {
                return (parseInt(t(e).css("zIndex"), 10) || 0) - (parseInt(t(i).css("zIndex"), 10) || 0);
            });
            if (i.length) {
                var n = parseInt(i[0].style.zIndex) || 0;
                t(i).each(function(t) {
                    this.style.zIndex = n + t;
                }), this[0].style.zIndex = n + i.length;
            }
        }
    }), t.ui.plugin.add("draggable", "zIndex", {
        start:function(e, i) {
            var n = t(i.helper), o = t(this).data("draggable").options;
            n.css("zIndex") && (o._zIndex = n.css("zIndex")), n.css("zIndex", o.zIndex);
        },
        stop:function(e, i) {
            var n = t(this).data("draggable").options;
            n._zIndex && t(i.helper).css("zIndex", n._zIndex);
        }
    });
}(jQuery), function(t) {
    t.widget("ui.droppable", {
        version:"1.9.2",
        widgetEventPrefix:"drop",
        options:{
            accept:"*",
            activeClass:!1,
            addClasses:!0,
            greedy:!1,
            hoverClass:!1,
            scope:"default",
            tolerance:"intersect"
        },
        _create:function() {
            var e = this.options, i = e.accept;
            this.isover = 0, this.isout = 1, this.accept = t.isFunction(i) ? i :function(t) {
                return t.is(i);
            }, this.proportions = {
                width:this.element[0].offsetWidth,
                height:this.element[0].offsetHeight
            }, t.ui.ddmanager.droppables[e.scope] = t.ui.ddmanager.droppables[e.scope] || [], 
            t.ui.ddmanager.droppables[e.scope].push(this), e.addClasses && this.element.addClass("ui-droppable");
        },
        _destroy:function() {
            for (var e = t.ui.ddmanager.droppables[this.options.scope], i = 0; i < e.length; i++) e[i] == this && e.splice(i, 1);
            this.element.removeClass("ui-droppable ui-droppable-disabled");
        },
        _setOption:function(e, i) {
            "accept" == e && (this.accept = t.isFunction(i) ? i :function(t) {
                return t.is(i);
            }), t.Widget.prototype._setOption.apply(this, arguments);
        },
        _activate:function(e) {
            var i = t.ui.ddmanager.current;
            this.options.activeClass && this.element.addClass(this.options.activeClass), i && this._trigger("activate", e, this.ui(i));
        },
        _deactivate:function(e) {
            var i = t.ui.ddmanager.current;
            this.options.activeClass && this.element.removeClass(this.options.activeClass), 
            i && this._trigger("deactivate", e, this.ui(i));
        },
        _over:function(e) {
            var i = t.ui.ddmanager.current;
            i && (i.currentItem || i.element)[0] != this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this.options.hoverClass && this.element.addClass(this.options.hoverClass), 
            this._trigger("over", e, this.ui(i)));
        },
        _out:function(e) {
            var i = t.ui.ddmanager.current;
            i && (i.currentItem || i.element)[0] != this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this.options.hoverClass && this.element.removeClass(this.options.hoverClass), 
            this._trigger("out", e, this.ui(i)));
        },
        _drop:function(e, i) {
            var n = i || t.ui.ddmanager.current;
            if (!n || (n.currentItem || n.element)[0] == this.element[0]) return !1;
            var o = !1;
            return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function() {
                var e = t.data(this, "droppable");
                return e.options.greedy && !e.options.disabled && e.options.scope == n.options.scope && e.accept.call(e.element[0], n.currentItem || n.element) && t.ui.intersect(n, t.extend(e, {
                    offset:e.element.offset()
                }), e.options.tolerance) ? (o = !0, !1) :void 0;
            }), o ? !1 :this.accept.call(this.element[0], n.currentItem || n.element) ? (this.options.activeClass && this.element.removeClass(this.options.activeClass), 
            this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("drop", e, this.ui(n)), 
            this.element) :!1;
        },
        ui:function(t) {
            return {
                draggable:t.currentItem || t.element,
                helper:t.helper,
                position:t.position,
                offset:t.positionAbs
            };
        }
    }), t.ui.intersect = function(e, i, n) {
        if (!i.offset) return !1;
        var o = (e.positionAbs || e.position.absolute).left, r = o + e.helperProportions.width, s = (e.positionAbs || e.position.absolute).top, a = s + e.helperProportions.height, l = i.offset.left, c = l + i.proportions.width, h = i.offset.top, u = h + i.proportions.height;
        switch (n) {
          case "fit":
            return o >= l && c >= r && s >= h && u >= a;

          case "intersect":
            return l < o + e.helperProportions.width / 2 && r - e.helperProportions.width / 2 < c && h < s + e.helperProportions.height / 2 && a - e.helperProportions.height / 2 < u;

          case "pointer":
            var d = (e.positionAbs || e.position.absolute).left + (e.clickOffset || e.offset.click).left, p = (e.positionAbs || e.position.absolute).top + (e.clickOffset || e.offset.click).top, f = t.ui.isOver(p, d, h, l, i.proportions.height, i.proportions.width);
            return f;

          case "touch":
            return (s >= h && u >= s || a >= h && u >= a || h > s && a > u) && (o >= l && c >= o || r >= l && c >= r || l > o && r > c);

          default:
            return !1;
        }
    }, t.ui.ddmanager = {
        current:null,
        droppables:{
            "default":[]
        },
        prepareOffsets:function(e, i) {
            var n = t.ui.ddmanager.droppables[e.options.scope] || [], o = i ? i.type :null, r = (e.currentItem || e.element).find(":data(droppable)").andSelf();
            t:for (var s = 0; s < n.length; s++) if (!(n[s].options.disabled || e && !n[s].accept.call(n[s].element[0], e.currentItem || e.element))) {
                for (var a = 0; a < r.length; a++) if (r[a] == n[s].element[0]) {
                    n[s].proportions.height = 0;
                    continue t;
                }
                n[s].visible = "none" != n[s].element.css("display"), n[s].visible && ("mousedown" == o && n[s]._activate.call(n[s], i), 
                n[s].offset = n[s].element.offset(), n[s].proportions = {
                    width:n[s].element[0].offsetWidth,
                    height:n[s].element[0].offsetHeight
                });
            }
        },
        drop:function(e, i) {
            var n = !1;
            return t.each(t.ui.ddmanager.droppables[e.options.scope] || [], function() {
                this.options && (!this.options.disabled && this.visible && t.ui.intersect(e, this, this.options.tolerance) && (n = this._drop.call(this, i) || n), 
                !this.options.disabled && this.visible && this.accept.call(this.element[0], e.currentItem || e.element) && (this.isout = 1, 
                this.isover = 0, this._deactivate.call(this, i)));
            }), n;
        },
        dragStart:function(e, i) {
            e.element.parentsUntil("body").bind("scroll.droppable", function() {
                e.options.refreshPositions || t.ui.ddmanager.prepareOffsets(e, i);
            });
        },
        drag:function(e, i) {
            e.options.refreshPositions && t.ui.ddmanager.prepareOffsets(e, i), t.each(t.ui.ddmanager.droppables[e.options.scope] || [], function() {
                if (!this.options.disabled && !this.greedyChild && this.visible) {
                    var n = t.ui.intersect(e, this, this.options.tolerance), o = n || 1 != this.isover ? n && 0 == this.isover ? "isover" :null :"isout";
                    if (o) {
                        var r;
                        if (this.options.greedy) {
                            var s = this.options.scope, a = this.element.parents(":data(droppable)").filter(function() {
                                return t.data(this, "droppable").options.scope === s;
                            });
                            a.length && (r = t.data(a[0], "droppable"), r.greedyChild = "isover" == o ? 1 :0);
                        }
                        r && "isover" == o && (r.isover = 0, r.isout = 1, r._out.call(r, i)), this[o] = 1, 
                        this["isout" == o ? "isover" :"isout"] = 0, this["isover" == o ? "_over" :"_out"].call(this, i), 
                        r && "isout" == o && (r.isout = 0, r.isover = 1, r._over.call(r, i));
                    }
                }
            });
        },
        dragStop:function(e, i) {
            e.element.parentsUntil("body").unbind("scroll.droppable"), e.options.refreshPositions || t.ui.ddmanager.prepareOffsets(e, i);
        }
    };
}(jQuery), function(t) {
    t.widget("ui.resizable", t.ui.mouse, {
        version:"1.9.2",
        widgetEventPrefix:"resize",
        options:{
            alsoResize:!1,
            animate:!1,
            animateDuration:"slow",
            animateEasing:"swing",
            aspectRatio:!1,
            autoHide:!1,
            containment:!1,
            ghost:!1,
            grid:!1,
            handles:"e,s,se",
            helper:!1,
            maxHeight:null,
            maxWidth:null,
            minHeight:10,
            minWidth:10,
            zIndex:1e3
        },
        _create:function() {
            var e = this, i = this.options;
            if (this.element.addClass("ui-resizable"), t.extend(this, {
                _aspectRatio:!!i.aspectRatio,
                aspectRatio:i.aspectRatio,
                originalElement:this.element,
                _proportionallyResizeElements:[],
                _helper:i.helper || i.ghost || i.animate ? i.helper || "ui-resizable-helper" :null
            }), this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i) && (this.element.wrap(t('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({
                position:this.element.css("position"),
                width:this.element.outerWidth(),
                height:this.element.outerHeight(),
                top:this.element.css("top"),
                left:this.element.css("left")
            })), this.element = this.element.parent().data("resizable", this.element.data("resizable")), 
            this.elementIsWrapper = !0, this.element.css({
                marginLeft:this.originalElement.css("marginLeft"),
                marginTop:this.originalElement.css("marginTop"),
                marginRight:this.originalElement.css("marginRight"),
                marginBottom:this.originalElement.css("marginBottom")
            }), this.originalElement.css({
                marginLeft:0,
                marginTop:0,
                marginRight:0,
                marginBottom:0
            }), this.originalResizeStyle = this.originalElement.css("resize"), this.originalElement.css("resize", "none"), 
            this._proportionallyResizeElements.push(this.originalElement.css({
                position:"static",
                zoom:1,
                display:"block"
            })), this.originalElement.css({
                margin:this.originalElement.css("margin")
            }), this._proportionallyResize()), this.handles = i.handles || (t(".ui-resizable-handle", this.element).length ? {
                n:".ui-resizable-n",
                e:".ui-resizable-e",
                s:".ui-resizable-s",
                w:".ui-resizable-w",
                se:".ui-resizable-se",
                sw:".ui-resizable-sw",
                ne:".ui-resizable-ne",
                nw:".ui-resizable-nw"
            } :"e,s,se"), this.handles.constructor == String) {
                "all" == this.handles && (this.handles = "n,e,s,w,se,sw,ne,nw");
                var n = this.handles.split(",");
                this.handles = {};
                for (var o = 0; o < n.length; o++) {
                    var r = t.trim(n[o]), s = "ui-resizable-" + r, a = t('<div class="ui-resizable-handle ' + s + '"></div>');
                    a.css({
                        zIndex:i.zIndex
                    }), "se" == r && a.addClass("ui-icon ui-icon-gripsmall-diagonal-se"), this.handles[r] = ".ui-resizable-" + r, 
                    this.element.append(a);
                }
            }
            this._renderAxis = function(e) {
                e = e || this.element;
                for (var i in this.handles) {
                    if (this.handles[i].constructor == String && (this.handles[i] = t(this.handles[i], this.element).show()), 
                    this.elementIsWrapper && this.originalElement[0].nodeName.match(/textarea|input|select|button/i)) {
                        var n = t(this.handles[i], this.element), o = 0;
                        o = /sw|ne|nw|se|n|s/.test(i) ? n.outerHeight() :n.outerWidth();
                        var r = [ "padding", /ne|nw|n/.test(i) ? "Top" :/se|sw|s/.test(i) ? "Bottom" :/^e$/.test(i) ? "Right" :"Left" ].join("");
                        e.css(r, o), this._proportionallyResize();
                    }
                    t(this.handles[i]).length;
                }
            }, this._renderAxis(this.element), this._handles = t(".ui-resizable-handle", this.element).disableSelection(), 
            this._handles.mouseover(function() {
                if (!e.resizing) {
                    if (this.className) var t = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);
                    e.axis = t && t[1] ? t[1] :"se";
                }
            }), i.autoHide && (this._handles.hide(), t(this.element).addClass("ui-resizable-autohide").mouseenter(function() {
                i.disabled || (t(this).removeClass("ui-resizable-autohide"), e._handles.show());
            }).mouseleave(function() {
                i.disabled || e.resizing || (t(this).addClass("ui-resizable-autohide"), e._handles.hide());
            })), this._mouseInit();
        },
        _destroy:function() {
            this._mouseDestroy();
            var e = function(e) {
                t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove();
            };
            if (this.elementIsWrapper) {
                e(this.element);
                var i = this.element;
                this.originalElement.css({
                    position:i.css("position"),
                    width:i.outerWidth(),
                    height:i.outerHeight(),
                    top:i.css("top"),
                    left:i.css("left")
                }).insertAfter(i), i.remove();
            }
            return this.originalElement.css("resize", this.originalResizeStyle), e(this.originalElement), 
            this;
        },
        _mouseCapture:function(e) {
            var i = !1;
            for (var n in this.handles) t(this.handles[n])[0] == e.target && (i = !0);
            return !this.options.disabled && i;
        },
        _mouseStart:function(i) {
            var n = this.options, o = this.element.position(), r = this.element;
            this.resizing = !0, this.documentScroll = {
                top:t(document).scrollTop(),
                left:t(document).scrollLeft()
            }, (r.is(".ui-draggable") || /absolute/.test(r.css("position"))) && r.css({
                position:"absolute",
                top:o.top,
                left:o.left
            }), this._renderProxy();
            var s = e(this.helper.css("left")), a = e(this.helper.css("top"));
            n.containment && (s += t(n.containment).scrollLeft() || 0, a += t(n.containment).scrollTop() || 0), 
            this.offset = this.helper.offset(), this.position = {
                left:s,
                top:a
            }, this.size = this._helper ? {
                width:r.outerWidth(),
                height:r.outerHeight()
            } :{
                width:r.width(),
                height:r.height()
            }, this.originalSize = this._helper ? {
                width:r.outerWidth(),
                height:r.outerHeight()
            } :{
                width:r.width(),
                height:r.height()
            }, this.originalPosition = {
                left:s,
                top:a
            }, this.sizeDiff = {
                width:r.outerWidth() - r.width(),
                height:r.outerHeight() - r.height()
            }, this.originalMousePosition = {
                left:i.pageX,
                top:i.pageY
            }, this.aspectRatio = "number" == typeof n.aspectRatio ? n.aspectRatio :this.originalSize.width / this.originalSize.height || 1;
            var l = t(".ui-resizable-" + this.axis).css("cursor");
            return t("body").css("cursor", "auto" == l ? this.axis + "-resize" :l), r.addClass("ui-resizable-resizing"), 
            this._propagate("start", i), !0;
        },
        _mouseDrag:function(t) {
            var e = this.helper, i = (this.options, this.originalMousePosition), n = this.axis, o = t.pageX - i.left || 0, r = t.pageY - i.top || 0, s = this._change[n];
            if (!s) return !1;
            var a = s.apply(this, [ t, o, r ]);
            return this._updateVirtualBoundaries(t.shiftKey), (this._aspectRatio || t.shiftKey) && (a = this._updateRatio(a, t)), 
            a = this._respectSize(a, t), this._propagate("resize", t), e.css({
                top:this.position.top + "px",
                left:this.position.left + "px",
                width:this.size.width + "px",
                height:this.size.height + "px"
            }), !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize(), 
            this._updateCache(a), this._trigger("resize", t, this.ui()), !1;
        },
        _mouseStop:function(e) {
            this.resizing = !1;
            var i = this.options, n = this;
            if (this._helper) {
                var o = this._proportionallyResizeElements, r = o.length && /textarea/i.test(o[0].nodeName), s = r && t.ui.hasScroll(o[0], "left") ? 0 :n.sizeDiff.height, a = r ? 0 :n.sizeDiff.width, l = {
                    width:n.helper.width() - a,
                    height:n.helper.height() - s
                }, c = parseInt(n.element.css("left"), 10) + (n.position.left - n.originalPosition.left) || null, h = parseInt(n.element.css("top"), 10) + (n.position.top - n.originalPosition.top) || null;
                i.animate || this.element.css(t.extend(l, {
                    top:h,
                    left:c
                })), n.helper.height(n.size.height), n.helper.width(n.size.width), this._helper && !i.animate && this._proportionallyResize();
            }
            return t("body").css("cursor", "auto"), this.element.removeClass("ui-resizable-resizing"), 
            this._propagate("stop", e), this._helper && this.helper.remove(), !1;
        },
        _updateVirtualBoundaries:function(t) {
            var e, n, o, r, s, a = this.options;
            s = {
                minWidth:i(a.minWidth) ? a.minWidth :0,
                maxWidth:i(a.maxWidth) ? a.maxWidth :1/0,
                minHeight:i(a.minHeight) ? a.minHeight :0,
                maxHeight:i(a.maxHeight) ? a.maxHeight :1/0
            }, (this._aspectRatio || t) && (e = s.minHeight * this.aspectRatio, o = s.minWidth / this.aspectRatio, 
            n = s.maxHeight * this.aspectRatio, r = s.maxWidth / this.aspectRatio, e > s.minWidth && (s.minWidth = e), 
            o > s.minHeight && (s.minHeight = o), n < s.maxWidth && (s.maxWidth = n), r < s.maxHeight && (s.maxHeight = r)), 
            this._vBoundaries = s;
        },
        _updateCache:function(t) {
            this.options;
            this.offset = this.helper.offset(), i(t.left) && (this.position.left = t.left), 
            i(t.top) && (this.position.top = t.top), i(t.height) && (this.size.height = t.height), 
            i(t.width) && (this.size.width = t.width);
        },
        _updateRatio:function(t) {
            var e = (this.options, this.position), n = this.size, o = this.axis;
            return i(t.height) ? t.width = t.height * this.aspectRatio :i(t.width) && (t.height = t.width / this.aspectRatio), 
            "sw" == o && (t.left = e.left + (n.width - t.width), t.top = null), "nw" == o && (t.top = e.top + (n.height - t.height), 
            t.left = e.left + (n.width - t.width)), t;
        },
        _respectSize:function(t, e) {
            var n = (this.helper, this._vBoundaries), o = (this._aspectRatio || e.shiftKey, 
            this.axis), r = i(t.width) && n.maxWidth && n.maxWidth < t.width, s = i(t.height) && n.maxHeight && n.maxHeight < t.height, a = i(t.width) && n.minWidth && n.minWidth > t.width, l = i(t.height) && n.minHeight && n.minHeight > t.height;
            a && (t.width = n.minWidth), l && (t.height = n.minHeight), r && (t.width = n.maxWidth), 
            s && (t.height = n.maxHeight);
            var c = this.originalPosition.left + this.originalSize.width, h = this.position.top + this.size.height, u = /sw|nw|w/.test(o), d = /nw|ne|n/.test(o);
            a && u && (t.left = c - n.minWidth), r && u && (t.left = c - n.maxWidth), l && d && (t.top = h - n.minHeight), 
            s && d && (t.top = h - n.maxHeight);
            var p = !t.width && !t.height;
            return p && !t.left && t.top ? t.top = null :p && !t.top && t.left && (t.left = null), 
            t;
        },
        _proportionallyResize:function() {
            this.options;
            if (this._proportionallyResizeElements.length) for (var e = this.helper || this.element, i = 0; i < this._proportionallyResizeElements.length; i++) {
                var n = this._proportionallyResizeElements[i];
                if (!this.borderDif) {
                    var o = [ n.css("borderTopWidth"), n.css("borderRightWidth"), n.css("borderBottomWidth"), n.css("borderLeftWidth") ], r = [ n.css("paddingTop"), n.css("paddingRight"), n.css("paddingBottom"), n.css("paddingLeft") ];
                    this.borderDif = t.map(o, function(t, e) {
                        var i = parseInt(t, 10) || 0, n = parseInt(r[e], 10) || 0;
                        return i + n;
                    });
                }
                n.css({
                    height:e.height() - this.borderDif[0] - this.borderDif[2] || 0,
                    width:e.width() - this.borderDif[1] - this.borderDif[3] || 0
                });
            }
        },
        _renderProxy:function() {
            var e = this.element, i = this.options;
            if (this.elementOffset = e.offset(), this._helper) {
                this.helper = this.helper || t('<div style="overflow:hidden;"></div>');
                var n = t.ui.ie6 ? 1 :0, o = t.ui.ie6 ? 2 :-1;
                this.helper.addClass(this._helper).css({
                    width:this.element.outerWidth() + o,
                    height:this.element.outerHeight() + o,
                    position:"absolute",
                    left:this.elementOffset.left - n + "px",
                    top:this.elementOffset.top - n + "px",
                    zIndex:++i.zIndex
                }), this.helper.appendTo("body").disableSelection();
            } else this.helper = this.element;
        },
        _change:{
            e:function(t, e) {
                return {
                    width:this.originalSize.width + e
                };
            },
            w:function(t, e) {
                var i = (this.options, this.originalSize), n = this.originalPosition;
                return {
                    left:n.left + e,
                    width:i.width - e
                };
            },
            n:function(t, e, i) {
                var n = (this.options, this.originalSize), o = this.originalPosition;
                return {
                    top:o.top + i,
                    height:n.height - i
                };
            },
            s:function(t, e, i) {
                return {
                    height:this.originalSize.height + i
                };
            },
            se:function(e, i, n) {
                return t.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [ e, i, n ]));
            },
            sw:function(e, i, n) {
                return t.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [ e, i, n ]));
            },
            ne:function(e, i, n) {
                return t.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [ e, i, n ]));
            },
            nw:function(e, i, n) {
                return t.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [ e, i, n ]));
            }
        },
        _propagate:function(e, i) {
            t.ui.plugin.call(this, e, [ i, this.ui() ]), "resize" != e && this._trigger(e, i, this.ui());
        },
        plugins:{},
        ui:function() {
            return {
                originalElement:this.originalElement,
                element:this.element,
                helper:this.helper,
                position:this.position,
                size:this.size,
                originalSize:this.originalSize,
                originalPosition:this.originalPosition
            };
        }
    }), t.ui.plugin.add("resizable", "alsoResize", {
        start:function() {
            var e = t(this).data("resizable"), i = e.options, n = function(e) {
                t(e).each(function() {
                    var e = t(this);
                    e.data("resizable-alsoresize", {
                        width:parseInt(e.width(), 10),
                        height:parseInt(e.height(), 10),
                        left:parseInt(e.css("left"), 10),
                        top:parseInt(e.css("top"), 10)
                    });
                });
            };
            "object" != typeof i.alsoResize || i.alsoResize.parentNode ? n(i.alsoResize) :i.alsoResize.length ? (i.alsoResize = i.alsoResize[0], 
            n(i.alsoResize)) :t.each(i.alsoResize, function(t) {
                n(t);
            });
        },
        resize:function(e, i) {
            var n = t(this).data("resizable"), o = n.options, r = n.originalSize, s = n.originalPosition, a = {
                height:n.size.height - r.height || 0,
                width:n.size.width - r.width || 0,
                top:n.position.top - s.top || 0,
                left:n.position.left - s.left || 0
            }, l = function(e, n) {
                t(e).each(function() {
                    var e = t(this), o = t(this).data("resizable-alsoresize"), r = {}, s = n && n.length ? n :e.parents(i.originalElement[0]).length ? [ "width", "height" ] :[ "width", "height", "top", "left" ];
                    t.each(s, function(t, e) {
                        var i = (o[e] || 0) + (a[e] || 0);
                        i && i >= 0 && (r[e] = i || null);
                    }), e.css(r);
                });
            };
            "object" != typeof o.alsoResize || o.alsoResize.nodeType ? l(o.alsoResize) :t.each(o.alsoResize, function(t, e) {
                l(t, e);
            });
        },
        stop:function() {
            t(this).removeData("resizable-alsoresize");
        }
    }), t.ui.plugin.add("resizable", "animate", {
        stop:function(e) {
            var i = t(this).data("resizable"), n = i.options, o = i._proportionallyResizeElements, r = o.length && /textarea/i.test(o[0].nodeName), s = r && t.ui.hasScroll(o[0], "left") ? 0 :i.sizeDiff.height, a = r ? 0 :i.sizeDiff.width, l = {
                width:i.size.width - a,
                height:i.size.height - s
            }, c = parseInt(i.element.css("left"), 10) + (i.position.left - i.originalPosition.left) || null, h = parseInt(i.element.css("top"), 10) + (i.position.top - i.originalPosition.top) || null;
            i.element.animate(t.extend(l, h && c ? {
                top:h,
                left:c
            } :{}), {
                duration:n.animateDuration,
                easing:n.animateEasing,
                step:function() {
                    var n = {
                        width:parseInt(i.element.css("width"), 10),
                        height:parseInt(i.element.css("height"), 10),
                        top:parseInt(i.element.css("top"), 10),
                        left:parseInt(i.element.css("left"), 10)
                    };
                    o && o.length && t(o[0]).css({
                        width:n.width,
                        height:n.height
                    }), i._updateCache(n), i._propagate("resize", e);
                }
            });
        }
    }), t.ui.plugin.add("resizable", "containment", {
        start:function() {
            var i = t(this).data("resizable"), n = i.options, o = i.element, r = n.containment, s = r instanceof t ? r.get(0) :/parent/.test(r) ? o.parent().get(0) :r;
            if (s) if (i.containerElement = t(s), /document/.test(r) || r == document) i.containerOffset = {
                left:0,
                top:0
            }, i.containerPosition = {
                left:0,
                top:0
            }, i.parentData = {
                element:t(document),
                left:0,
                top:0,
                width:t(document).width(),
                height:t(document).height() || document.body.parentNode.scrollHeight
            }; else {
                var a = t(s), l = [];
                t([ "Top", "Right", "Left", "Bottom" ]).each(function(t, i) {
                    l[t] = e(a.css("padding" + i));
                }), i.containerOffset = a.offset(), i.containerPosition = a.position(), i.containerSize = {
                    height:a.innerHeight() - l[3],
                    width:a.innerWidth() - l[1]
                };
                var c = i.containerOffset, h = i.containerSize.height, u = i.containerSize.width, d = t.ui.hasScroll(s, "left") ? s.scrollWidth :u, p = t.ui.hasScroll(s) ? s.scrollHeight :h;
                i.parentData = {
                    element:s,
                    left:c.left,
                    top:c.top,
                    width:d,
                    height:p
                };
            }
        },
        resize:function(e) {
            var i = t(this).data("resizable"), n = i.options, o = (i.containerSize, i.containerOffset), r = (i.size, 
            i.position), s = i._aspectRatio || e.shiftKey, a = {
                top:0,
                left:0
            }, l = i.containerElement;
            l[0] != document && /static/.test(l.css("position")) && (a = o), r.left < (i._helper ? o.left :0) && (i.size.width = i.size.width + (i._helper ? i.position.left - o.left :i.position.left - a.left), 
            s && (i.size.height = i.size.width / i.aspectRatio), i.position.left = n.helper ? o.left :0), 
            r.top < (i._helper ? o.top :0) && (i.size.height = i.size.height + (i._helper ? i.position.top - o.top :i.position.top), 
            s && (i.size.width = i.size.height * i.aspectRatio), i.position.top = i._helper ? o.top :0), 
            i.offset.left = i.parentData.left + i.position.left, i.offset.top = i.parentData.top + i.position.top;
            var c = Math.abs((i._helper ? i.offset.left - a.left :i.offset.left - a.left) + i.sizeDiff.width), h = Math.abs((i._helper ? i.offset.top - a.top :i.offset.top - o.top) + i.sizeDiff.height), u = i.containerElement.get(0) == i.element.parent().get(0), d = /relative|absolute/.test(i.containerElement.css("position"));
            u && d && (c -= i.parentData.left), c + i.size.width >= i.parentData.width && (i.size.width = i.parentData.width - c, 
            s && (i.size.height = i.size.width / i.aspectRatio)), h + i.size.height >= i.parentData.height && (i.size.height = i.parentData.height - h, 
            s && (i.size.width = i.size.height * i.aspectRatio));
        },
        stop:function() {
            var e = t(this).data("resizable"), i = e.options, n = (e.position, e.containerOffset), o = e.containerPosition, r = e.containerElement, s = t(e.helper), a = s.offset(), l = s.outerWidth() - e.sizeDiff.width, c = s.outerHeight() - e.sizeDiff.height;
            e._helper && !i.animate && /relative/.test(r.css("position")) && t(this).css({
                left:a.left - o.left - n.left,
                width:l,
                height:c
            }), e._helper && !i.animate && /static/.test(r.css("position")) && t(this).css({
                left:a.left - o.left - n.left,
                width:l,
                height:c
            });
        }
    }), t.ui.plugin.add("resizable", "ghost", {
        start:function() {
            var e = t(this).data("resizable"), i = e.options, n = e.size;
            e.ghost = e.originalElement.clone(), e.ghost.css({
                opacity:.25,
                display:"block",
                position:"relative",
                height:n.height,
                width:n.width,
                margin:0,
                left:0,
                top:0
            }).addClass("ui-resizable-ghost").addClass("string" == typeof i.ghost ? i.ghost :""), 
            e.ghost.appendTo(e.helper);
        },
        resize:function() {
            {
                var e = t(this).data("resizable");
                e.options;
            }
            e.ghost && e.ghost.css({
                position:"relative",
                height:e.size.height,
                width:e.size.width
            });
        },
        stop:function() {
            {
                var e = t(this).data("resizable");
                e.options;
            }
            e.ghost && e.helper && e.helper.get(0).removeChild(e.ghost.get(0));
        }
    }), t.ui.plugin.add("resizable", "grid", {
        resize:function(e) {
            {
                var i = t(this).data("resizable"), n = i.options, o = i.size, r = i.originalSize, s = i.originalPosition, a = i.axis;
                n._aspectRatio || e.shiftKey;
            }
            n.grid = "number" == typeof n.grid ? [ n.grid, n.grid ] :n.grid;
            var l = Math.round((o.width - r.width) / (n.grid[0] || 1)) * (n.grid[0] || 1), c = Math.round((o.height - r.height) / (n.grid[1] || 1)) * (n.grid[1] || 1);
            /^(se|s|e)$/.test(a) ? (i.size.width = r.width + l, i.size.height = r.height + c) :/^(ne)$/.test(a) ? (i.size.width = r.width + l, 
            i.size.height = r.height + c, i.position.top = s.top - c) :/^(sw)$/.test(a) ? (i.size.width = r.width + l, 
            i.size.height = r.height + c, i.position.left = s.left - l) :(i.size.width = r.width + l, 
            i.size.height = r.height + c, i.position.top = s.top - c, i.position.left = s.left - l);
        }
    });
    var e = function(t) {
        return parseInt(t, 10) || 0;
    }, i = function(t) {
        return !isNaN(parseInt(t, 10));
    };
}(jQuery), function(t) {
    t.widget("ui.selectable", t.ui.mouse, {
        version:"1.9.2",
        options:{
            appendTo:"body",
            autoRefresh:!0,
            distance:0,
            filter:"*",
            tolerance:"touch"
        },
        _create:function() {
            var e = this;
            this.element.addClass("ui-selectable"), this.dragged = !1;
            var i;
            this.refresh = function() {
                i = t(e.options.filter, e.element[0]), i.addClass("ui-selectee"), i.each(function() {
                    var e = t(this), i = e.offset();
                    t.data(this, "selectable-item", {
                        element:this,
                        $element:e,
                        left:i.left,
                        top:i.top,
                        right:i.left + e.outerWidth(),
                        bottom:i.top + e.outerHeight(),
                        startselected:!1,
                        selected:e.hasClass("ui-selected"),
                        selecting:e.hasClass("ui-selecting"),
                        unselecting:e.hasClass("ui-unselecting")
                    });
                });
            }, this.refresh(), this.selectees = i.addClass("ui-selectee"), this._mouseInit(), 
            this.helper = t("<div class='ui-selectable-helper'></div>");
        },
        _destroy:function() {
            this.selectees.removeClass("ui-selectee").removeData("selectable-item"), this.element.removeClass("ui-selectable ui-selectable-disabled"), 
            this._mouseDestroy();
        },
        _mouseStart:function(e) {
            var i = this;
            if (this.opos = [ e.pageX, e.pageY ], !this.options.disabled) {
                var n = this.options;
                this.selectees = t(n.filter, this.element[0]), this._trigger("start", e), t(n.appendTo).append(this.helper), 
                this.helper.css({
                    left:e.clientX,
                    top:e.clientY,
                    width:0,
                    height:0
                }), n.autoRefresh && this.refresh(), this.selectees.filter(".ui-selected").each(function() {
                    var n = t.data(this, "selectable-item");
                    n.startselected = !0, e.metaKey || e.ctrlKey || (n.$element.removeClass("ui-selected"), 
                    n.selected = !1, n.$element.addClass("ui-unselecting"), n.unselecting = !0, i._trigger("unselecting", e, {
                        unselecting:n.element
                    }));
                }), t(e.target).parents().andSelf().each(function() {
                    var n = t.data(this, "selectable-item");
                    if (n) {
                        var o = !e.metaKey && !e.ctrlKey || !n.$element.hasClass("ui-selected");
                        return n.$element.removeClass(o ? "ui-unselecting" :"ui-selected").addClass(o ? "ui-selecting" :"ui-unselecting"), 
                        n.unselecting = !o, n.selecting = o, n.selected = o, o ? i._trigger("selecting", e, {
                            selecting:n.element
                        }) :i._trigger("unselecting", e, {
                            unselecting:n.element
                        }), !1;
                    }
                });
            }
        },
        _mouseDrag:function(e) {
            var i = this;
            if (this.dragged = !0, !this.options.disabled) {
                var n = this.options, o = this.opos[0], r = this.opos[1], s = e.pageX, a = e.pageY;
                if (o > s) {
                    var l = s;
                    s = o, o = l;
                }
                if (r > a) {
                    var l = a;
                    a = r, r = l;
                }
                return this.helper.css({
                    left:o,
                    top:r,
                    width:s - o,
                    height:a - r
                }), this.selectees.each(function() {
                    var l = t.data(this, "selectable-item");
                    if (l && l.element != i.element[0]) {
                        var c = !1;
                        "touch" == n.tolerance ? c = !(l.left > s || l.right < o || l.top > a || l.bottom < r) :"fit" == n.tolerance && (c = l.left > o && l.right < s && l.top > r && l.bottom < a), 
                        c ? (l.selected && (l.$element.removeClass("ui-selected"), l.selected = !1), l.unselecting && (l.$element.removeClass("ui-unselecting"), 
                        l.unselecting = !1), l.selecting || (l.$element.addClass("ui-selecting"), l.selecting = !0, 
                        i._trigger("selecting", e, {
                            selecting:l.element
                        }))) :(l.selecting && ((e.metaKey || e.ctrlKey) && l.startselected ? (l.$element.removeClass("ui-selecting"), 
                        l.selecting = !1, l.$element.addClass("ui-selected"), l.selected = !0) :(l.$element.removeClass("ui-selecting"), 
                        l.selecting = !1, l.startselected && (l.$element.addClass("ui-unselecting"), l.unselecting = !0), 
                        i._trigger("unselecting", e, {
                            unselecting:l.element
                        }))), l.selected && (e.metaKey || e.ctrlKey || l.startselected || (l.$element.removeClass("ui-selected"), 
                        l.selected = !1, l.$element.addClass("ui-unselecting"), l.unselecting = !0, i._trigger("unselecting", e, {
                            unselecting:l.element
                        }))));
                    }
                }), !1;
            }
        },
        _mouseStop:function(e) {
            var i = this;
            this.dragged = !1;
            this.options;
            return t(".ui-unselecting", this.element[0]).each(function() {
                var n = t.data(this, "selectable-item");
                n.$element.removeClass("ui-unselecting"), n.unselecting = !1, n.startselected = !1, 
                i._trigger("unselected", e, {
                    unselected:n.element
                });
            }), t(".ui-selecting", this.element[0]).each(function() {
                var n = t.data(this, "selectable-item");
                n.$element.removeClass("ui-selecting").addClass("ui-selected"), n.selecting = !1, 
                n.selected = !0, n.startselected = !0, i._trigger("selected", e, {
                    selected:n.element
                });
            }), this._trigger("stop", e), this.helper.remove(), !1;
        }
    });
}(jQuery), function(t) {
    t.widget("ui.sortable", t.ui.mouse, {
        version:"1.9.2",
        widgetEventPrefix:"sort",
        ready:!1,
        options:{
            appendTo:"parent",
            axis:!1,
            connectWith:!1,
            containment:!1,
            cursor:"auto",
            cursorAt:!1,
            dropOnEmpty:!0,
            forcePlaceholderSize:!1,
            forceHelperSize:!1,
            grid:!1,
            handle:!1,
            helper:"original",
            items:"> *",
            opacity:!1,
            placeholder:!1,
            revert:!1,
            scroll:!0,
            scrollSensitivity:20,
            scrollSpeed:20,
            scope:"default",
            tolerance:"intersect",
            zIndex:1e3
        },
        _create:function() {
            var t = this.options;
            this.containerCache = {}, this.element.addClass("ui-sortable"), this.refresh(), 
            this.floating = this.items.length ? "x" === t.axis || /left|right/.test(this.items[0].item.css("float")) || /inline|table-cell/.test(this.items[0].item.css("display")) :!1, 
            this.offset = this.element.offset(), this._mouseInit(), this.ready = !0;
        },
        _destroy:function() {
            this.element.removeClass("ui-sortable ui-sortable-disabled"), this._mouseDestroy();
            for (var t = this.items.length - 1; t >= 0; t--) this.items[t].item.removeData(this.widgetName + "-item");
            return this;
        },
        _setOption:function(e, i) {
            "disabled" === e ? (this.options[e] = i, this.widget().toggleClass("ui-sortable-disabled", !!i)) :t.Widget.prototype._setOption.apply(this, arguments);
        },
        _mouseCapture:function(e, i) {
            var n = this;
            if (this.reverting) return !1;
            if (this.options.disabled || "static" == this.options.type) return !1;
            this._refreshItems(e);
            {
                var o = null;
                t(e.target).parents().each(function() {
                    return t.data(this, n.widgetName + "-item") == n ? (o = t(this), !1) :void 0;
                });
            }
            if (t.data(e.target, n.widgetName + "-item") == n && (o = t(e.target)), !o) return !1;
            if (this.options.handle && !i) {
                var r = !1;
                if (t(this.options.handle, o).find("*").andSelf().each(function() {
                    this == e.target && (r = !0);
                }), !r) return !1;
            }
            return this.currentItem = o, this._removeCurrentsFromItems(), !0;
        },
        _mouseStart:function(e, i, n) {
            var o = this.options;
            if (this.currentContainer = this, this.refreshPositions(), this.helper = this._createHelper(e), 
            this._cacheHelperProportions(), this._cacheMargins(), this.scrollParent = this.helper.scrollParent(), 
            this.offset = this.currentItem.offset(), this.offset = {
                top:this.offset.top - this.margins.top,
                left:this.offset.left - this.margins.left
            }, t.extend(this.offset, {
                click:{
                    left:e.pageX - this.offset.left,
                    top:e.pageY - this.offset.top
                },
                parent:this._getParentOffset(),
                relative:this._getRelativeOffset()
            }), this.helper.css("position", "absolute"), this.cssPosition = this.helper.css("position"), 
            this.originalPosition = this._generatePosition(e), this.originalPageX = e.pageX, 
            this.originalPageY = e.pageY, o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt), 
            this.domPosition = {
                prev:this.currentItem.prev()[0],
                parent:this.currentItem.parent()[0]
            }, this.helper[0] != this.currentItem[0] && this.currentItem.hide(), this._createPlaceholder(), 
            o.containment && this._setContainment(), o.cursor && (t("body").css("cursor") && (this._storedCursor = t("body").css("cursor")), 
            t("body").css("cursor", o.cursor)), o.opacity && (this.helper.css("opacity") && (this._storedOpacity = this.helper.css("opacity")), 
            this.helper.css("opacity", o.opacity)), o.zIndex && (this.helper.css("zIndex") && (this._storedZIndex = this.helper.css("zIndex")), 
            this.helper.css("zIndex", o.zIndex)), this.scrollParent[0] != document && "HTML" != this.scrollParent[0].tagName && (this.overflowOffset = this.scrollParent.offset()), 
            this._trigger("start", e, this._uiHash()), this._preserveHelperProportions || this._cacheHelperProportions(), 
            !n) for (var r = this.containers.length - 1; r >= 0; r--) this.containers[r]._trigger("activate", e, this._uiHash(this));
            return t.ui.ddmanager && (t.ui.ddmanager.current = this), t.ui.ddmanager && !o.dropBehaviour && t.ui.ddmanager.prepareOffsets(this, e), 
            this.dragging = !0, this.helper.addClass("ui-sortable-helper"), this._mouseDrag(e), 
            !0;
        },
        _mouseDrag:function(e) {
            if (this.position = this._generatePosition(e), this.positionAbs = this._convertPositionTo("absolute"), 
            this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs), this.options.scroll) {
                var i = this.options, n = !1;
                this.scrollParent[0] != document && "HTML" != this.scrollParent[0].tagName ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - e.pageY < i.scrollSensitivity ? this.scrollParent[0].scrollTop = n = this.scrollParent[0].scrollTop + i.scrollSpeed :e.pageY - this.overflowOffset.top < i.scrollSensitivity && (this.scrollParent[0].scrollTop = n = this.scrollParent[0].scrollTop - i.scrollSpeed), 
                this.overflowOffset.left + this.scrollParent[0].offsetWidth - e.pageX < i.scrollSensitivity ? this.scrollParent[0].scrollLeft = n = this.scrollParent[0].scrollLeft + i.scrollSpeed :e.pageX - this.overflowOffset.left < i.scrollSensitivity && (this.scrollParent[0].scrollLeft = n = this.scrollParent[0].scrollLeft - i.scrollSpeed)) :(e.pageY - t(document).scrollTop() < i.scrollSensitivity ? n = t(document).scrollTop(t(document).scrollTop() - i.scrollSpeed) :t(window).height() - (e.pageY - t(document).scrollTop()) < i.scrollSensitivity && (n = t(document).scrollTop(t(document).scrollTop() + i.scrollSpeed)), 
                e.pageX - t(document).scrollLeft() < i.scrollSensitivity ? n = t(document).scrollLeft(t(document).scrollLeft() - i.scrollSpeed) :t(window).width() - (e.pageX - t(document).scrollLeft()) < i.scrollSensitivity && (n = t(document).scrollLeft(t(document).scrollLeft() + i.scrollSpeed))), 
                n !== !1 && t.ui.ddmanager && !i.dropBehaviour && t.ui.ddmanager.prepareOffsets(this, e);
            }
            this.positionAbs = this._convertPositionTo("absolute"), this.options.axis && "y" == this.options.axis || (this.helper[0].style.left = this.position.left + "px"), 
            this.options.axis && "x" == this.options.axis || (this.helper[0].style.top = this.position.top + "px");
            for (var o = this.items.length - 1; o >= 0; o--) {
                var r = this.items[o], s = r.item[0], a = this._intersectsWithPointer(r);
                if (a && r.instance === this.currentContainer && s != this.currentItem[0] && this.placeholder[1 == a ? "next" :"prev"]()[0] != s && !t.contains(this.placeholder[0], s) && ("semi-dynamic" == this.options.type ? !t.contains(this.element[0], s) :!0)) {
                    if (this.direction = 1 == a ? "down" :"up", "pointer" != this.options.tolerance && !this._intersectsWithSides(r)) break;
                    this._rearrange(e, r), this._trigger("change", e, this._uiHash());
                    break;
                }
            }
            return this._contactContainers(e), t.ui.ddmanager && t.ui.ddmanager.drag(this, e), 
            this._trigger("sort", e, this._uiHash()), this.lastPositionAbs = this.positionAbs, 
            !1;
        },
        _mouseStop:function(e, i) {
            if (e) {
                if (t.ui.ddmanager && !this.options.dropBehaviour && t.ui.ddmanager.drop(this, e), 
                this.options.revert) {
                    var n = this, o = this.placeholder.offset();
                    this.reverting = !0, t(this.helper).animate({
                        left:o.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] == document.body ? 0 :this.offsetParent[0].scrollLeft),
                        top:o.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] == document.body ? 0 :this.offsetParent[0].scrollTop)
                    }, parseInt(this.options.revert, 10) || 500, function() {
                        n._clear(e);
                    });
                } else this._clear(e, i);
                return !1;
            }
        },
        cancel:function() {
            if (this.dragging) {
                this._mouseUp({
                    target:null
                }), "original" == this.options.helper ? this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper") :this.currentItem.show();
                for (var e = this.containers.length - 1; e >= 0; e--) this.containers[e]._trigger("deactivate", null, this._uiHash(this)), 
                this.containers[e].containerCache.over && (this.containers[e]._trigger("out", null, this._uiHash(this)), 
                this.containers[e].containerCache.over = 0);
            }
            return this.placeholder && (this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]), 
            "original" != this.options.helper && this.helper && this.helper[0].parentNode && this.helper.remove(), 
            t.extend(this, {
                helper:null,
                dragging:!1,
                reverting:!1,
                _noFinalSort:null
            }), this.domPosition.prev ? t(this.domPosition.prev).after(this.currentItem) :t(this.domPosition.parent).prepend(this.currentItem)), 
            this;
        },
        serialize:function(e) {
            var i = this._getItemsAsjQuery(e && e.connected), n = [];
            return e = e || {}, t(i).each(function() {
                var i = (t(e.item || this).attr(e.attribute || "id") || "").match(e.expression || /(.+)[-=_](.+)/);
                i && n.push((e.key || i[1] + "[]") + "=" + (e.key && e.expression ? i[1] :i[2]));
            }), !n.length && e.key && n.push(e.key + "="), n.join("&");
        },
        toArray:function(e) {
            var i = this._getItemsAsjQuery(e && e.connected), n = [];
            return e = e || {}, i.each(function() {
                n.push(t(e.item || this).attr(e.attribute || "id") || "");
            }), n;
        },
        _intersectsWith:function(t) {
            var e = this.positionAbs.left, i = e + this.helperProportions.width, n = this.positionAbs.top, o = n + this.helperProportions.height, r = t.left, s = r + t.width, a = t.top, l = a + t.height, c = this.offset.click.top, h = this.offset.click.left, u = n + c > a && l > n + c && e + h > r && s > e + h;
            return "pointer" == this.options.tolerance || this.options.forcePointerForContainers || "pointer" != this.options.tolerance && this.helperProportions[this.floating ? "width" :"height"] > t[this.floating ? "width" :"height"] ? u :r < e + this.helperProportions.width / 2 && i - this.helperProportions.width / 2 < s && a < n + this.helperProportions.height / 2 && o - this.helperProportions.height / 2 < l;
        },
        _intersectsWithPointer:function(e) {
            var i = "x" === this.options.axis || t.ui.isOverAxis(this.positionAbs.top + this.offset.click.top, e.top, e.height), n = "y" === this.options.axis || t.ui.isOverAxis(this.positionAbs.left + this.offset.click.left, e.left, e.width), o = i && n, r = this._getDragVerticalDirection(), s = this._getDragHorizontalDirection();
            return o ? this.floating ? s && "right" == s || "down" == r ? 2 :1 :r && ("down" == r ? 2 :1) :!1;
        },
        _intersectsWithSides:function(e) {
            var i = t.ui.isOverAxis(this.positionAbs.top + this.offset.click.top, e.top + e.height / 2, e.height), n = t.ui.isOverAxis(this.positionAbs.left + this.offset.click.left, e.left + e.width / 2, e.width), o = this._getDragVerticalDirection(), r = this._getDragHorizontalDirection();
            return this.floating && r ? "right" == r && n || "left" == r && !n :o && ("down" == o && i || "up" == o && !i);
        },
        _getDragVerticalDirection:function() {
            var t = this.positionAbs.top - this.lastPositionAbs.top;
            return 0 != t && (t > 0 ? "down" :"up");
        },
        _getDragHorizontalDirection:function() {
            var t = this.positionAbs.left - this.lastPositionAbs.left;
            return 0 != t && (t > 0 ? "right" :"left");
        },
        refresh:function(t) {
            return this._refreshItems(t), this.refreshPositions(), this;
        },
        _connectWith:function() {
            var t = this.options;
            return t.connectWith.constructor == String ? [ t.connectWith ] :t.connectWith;
        },
        _getItemsAsjQuery:function(e) {
            var i = [], n = [], o = this._connectWith();
            if (o && e) for (var r = o.length - 1; r >= 0; r--) for (var s = t(o[r]), a = s.length - 1; a >= 0; a--) {
                var l = t.data(s[a], this.widgetName);
                l && l != this && !l.options.disabled && n.push([ t.isFunction(l.options.items) ? l.options.items.call(l.element) :t(l.options.items, l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), l ]);
            }
            n.push([ t.isFunction(this.options.items) ? this.options.items.call(this.element, null, {
                options:this.options,
                item:this.currentItem
            }) :t(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this ]);
            for (var r = n.length - 1; r >= 0; r--) n[r][0].each(function() {
                i.push(this);
            });
            return t(i);
        },
        _removeCurrentsFromItems:function() {
            var e = this.currentItem.find(":data(" + this.widgetName + "-item)");
            this.items = t.grep(this.items, function(t) {
                for (var i = 0; i < e.length; i++) if (e[i] == t.item[0]) return !1;
                return !0;
            });
        },
        _refreshItems:function(e) {
            this.items = [], this.containers = [ this ];
            var i = this.items, n = [ [ t.isFunction(this.options.items) ? this.options.items.call(this.element[0], e, {
                item:this.currentItem
            }) :t(this.options.items, this.element), this ] ], o = this._connectWith();
            if (o && this.ready) for (var r = o.length - 1; r >= 0; r--) for (var s = t(o[r]), a = s.length - 1; a >= 0; a--) {
                var l = t.data(s[a], this.widgetName);
                l && l != this && !l.options.disabled && (n.push([ t.isFunction(l.options.items) ? l.options.items.call(l.element[0], e, {
                    item:this.currentItem
                }) :t(l.options.items, l.element), l ]), this.containers.push(l));
            }
            for (var r = n.length - 1; r >= 0; r--) for (var c = n[r][1], h = n[r][0], a = 0, u = h.length; u > a; a++) {
                var d = t(h[a]);
                d.data(this.widgetName + "-item", c), i.push({
                    item:d,
                    instance:c,
                    width:0,
                    height:0,
                    left:0,
                    top:0
                });
            }
        },
        refreshPositions:function(e) {
            this.offsetParent && this.helper && (this.offset.parent = this._getParentOffset());
            for (var i = this.items.length - 1; i >= 0; i--) {
                var n = this.items[i];
                if (n.instance == this.currentContainer || !this.currentContainer || n.item[0] == this.currentItem[0]) {
                    var o = this.options.toleranceElement ? t(this.options.toleranceElement, n.item) :n.item;
                    e || (n.width = o.outerWidth(), n.height = o.outerHeight());
                    var r = o.offset();
                    n.left = r.left, n.top = r.top;
                }
            }
            if (this.options.custom && this.options.custom.refreshContainers) this.options.custom.refreshContainers.call(this); else for (var i = this.containers.length - 1; i >= 0; i--) {
                var r = this.containers[i].element.offset();
                this.containers[i].containerCache.left = r.left, this.containers[i].containerCache.top = r.top, 
                this.containers[i].containerCache.width = this.containers[i].element.outerWidth(), 
                this.containers[i].containerCache.height = this.containers[i].element.outerHeight();
            }
            return this;
        },
        _createPlaceholder:function(e) {
            e = e || this;
            var i = e.options;
            if (!i.placeholder || i.placeholder.constructor == String) {
                var n = i.placeholder;
                i.placeholder = {
                    element:function() {
                        var i = t(document.createElement(e.currentItem[0].nodeName)).addClass(n || e.currentItem[0].className + " ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];
                        return n || (i.style.visibility = "hidden"), i;
                    },
                    update:function(t, o) {
                        (!n || i.forcePlaceholderSize) && (o.height() || o.height(e.currentItem.innerHeight() - parseInt(e.currentItem.css("paddingTop") || 0, 10) - parseInt(e.currentItem.css("paddingBottom") || 0, 10)), 
                        o.width() || o.width(e.currentItem.innerWidth() - parseInt(e.currentItem.css("paddingLeft") || 0, 10) - parseInt(e.currentItem.css("paddingRight") || 0, 10)));
                    }
                };
            }
            e.placeholder = t(i.placeholder.element.call(e.element, e.currentItem)), e.currentItem.after(e.placeholder), 
            i.placeholder.update(e, e.placeholder);
        },
        _contactContainers:function(e) {
            for (var i = null, n = null, o = this.containers.length - 1; o >= 0; o--) if (!t.contains(this.currentItem[0], this.containers[o].element[0])) if (this._intersectsWith(this.containers[o].containerCache)) {
                if (i && t.contains(this.containers[o].element[0], i.element[0])) continue;
                i = this.containers[o], n = o;
            } else this.containers[o].containerCache.over && (this.containers[o]._trigger("out", e, this._uiHash(this)), 
            this.containers[o].containerCache.over = 0);
            if (i) if (1 === this.containers.length) this.containers[n]._trigger("over", e, this._uiHash(this)), 
            this.containers[n].containerCache.over = 1; else {
                for (var r = 1e4, s = null, a = this.containers[n].floating ? "left" :"top", l = this.containers[n].floating ? "width" :"height", c = this.positionAbs[a] + this.offset.click[a], h = this.items.length - 1; h >= 0; h--) if (t.contains(this.containers[n].element[0], this.items[h].item[0]) && this.items[h].item[0] != this.currentItem[0]) {
                    var u = this.items[h].item.offset()[a], d = !1;
                    Math.abs(u - c) > Math.abs(u + this.items[h][l] - c) && (d = !0, u += this.items[h][l]), 
                    Math.abs(u - c) < r && (r = Math.abs(u - c), s = this.items[h], this.direction = d ? "up" :"down");
                }
                if (!s && !this.options.dropOnEmpty) return;
                this.currentContainer = this.containers[n], s ? this._rearrange(e, s, null, !0) :this._rearrange(e, null, this.containers[n].element, !0), 
                this._trigger("change", e, this._uiHash()), this.containers[n]._trigger("change", e, this._uiHash(this)), 
                this.options.placeholder.update(this.currentContainer, this.placeholder), this.containers[n]._trigger("over", e, this._uiHash(this)), 
                this.containers[n].containerCache.over = 1;
            }
        },
        _createHelper:function(e) {
            var i = this.options, n = t.isFunction(i.helper) ? t(i.helper.apply(this.element[0], [ e, this.currentItem ])) :"clone" == i.helper ? this.currentItem.clone() :this.currentItem;
            return n.parents("body").length || t("parent" != i.appendTo ? i.appendTo :this.currentItem[0].parentNode)[0].appendChild(n[0]), 
            n[0] == this.currentItem[0] && (this._storedCSS = {
                width:this.currentItem[0].style.width,
                height:this.currentItem[0].style.height,
                position:this.currentItem.css("position"),
                top:this.currentItem.css("top"),
                left:this.currentItem.css("left")
            }), ("" == n[0].style.width || i.forceHelperSize) && n.width(this.currentItem.width()), 
            ("" == n[0].style.height || i.forceHelperSize) && n.height(this.currentItem.height()), 
            n;
        },
        _adjustOffsetFromHelper:function(e) {
            "string" == typeof e && (e = e.split(" ")), t.isArray(e) && (e = {
                left:+e[0],
                top:+e[1] || 0
            }), "left" in e && (this.offset.click.left = e.left + this.margins.left), "right" in e && (this.offset.click.left = this.helperProportions.width - e.right + this.margins.left), 
            "top" in e && (this.offset.click.top = e.top + this.margins.top), "bottom" in e && (this.offset.click.top = this.helperProportions.height - e.bottom + this.margins.top);
        },
        _getParentOffset:function() {
            this.offsetParent = this.helper.offsetParent();
            var e = this.offsetParent.offset();
            return "absolute" == this.cssPosition && this.scrollParent[0] != document && t.contains(this.scrollParent[0], this.offsetParent[0]) && (e.left += this.scrollParent.scrollLeft(), 
            e.top += this.scrollParent.scrollTop()), (this.offsetParent[0] == document.body || this.offsetParent[0].tagName && "html" == this.offsetParent[0].tagName.toLowerCase() && t.ui.ie) && (e = {
                top:0,
                left:0
            }), {
                top:e.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                left:e.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
            };
        },
        _getRelativeOffset:function() {
            if ("relative" == this.cssPosition) {
                var t = this.currentItem.position();
                return {
                    top:t.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                    left:t.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                };
            }
            return {
                top:0,
                left:0
            };
        },
        _cacheMargins:function() {
            this.margins = {
                left:parseInt(this.currentItem.css("marginLeft"), 10) || 0,
                top:parseInt(this.currentItem.css("marginTop"), 10) || 0
            };
        },
        _cacheHelperProportions:function() {
            this.helperProportions = {
                width:this.helper.outerWidth(),
                height:this.helper.outerHeight()
            };
        },
        _setContainment:function() {
            var e = this.options;
            if ("parent" == e.containment && (e.containment = this.helper[0].parentNode), ("document" == e.containment || "window" == e.containment) && (this.containment = [ 0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, t("document" == e.containment ? document :window).width() - this.helperProportions.width - this.margins.left, (t("document" == e.containment ? document :window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top ]), 
            !/^(document|window|parent)$/.test(e.containment)) {
                var i = t(e.containment)[0], n = t(e.containment).offset(), o = "hidden" != t(i).css("overflow");
                this.containment = [ n.left + (parseInt(t(i).css("borderLeftWidth"), 10) || 0) + (parseInt(t(i).css("paddingLeft"), 10) || 0) - this.margins.left, n.top + (parseInt(t(i).css("borderTopWidth"), 10) || 0) + (parseInt(t(i).css("paddingTop"), 10) || 0) - this.margins.top, n.left + (o ? Math.max(i.scrollWidth, i.offsetWidth) :i.offsetWidth) - (parseInt(t(i).css("borderLeftWidth"), 10) || 0) - (parseInt(t(i).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left, n.top + (o ? Math.max(i.scrollHeight, i.offsetHeight) :i.offsetHeight) - (parseInt(t(i).css("borderTopWidth"), 10) || 0) - (parseInt(t(i).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top ];
            }
        },
        _convertPositionTo:function(e, i) {
            i || (i = this.position);
            var n = "absolute" == e ? 1 :-1, o = (this.options, "absolute" != this.cssPosition || this.scrollParent[0] != document && t.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent :this.offsetParent), r = /(html|body)/i.test(o[0].tagName);
            return {
                top:i.top + this.offset.relative.top * n + this.offset.parent.top * n - ("fixed" == this.cssPosition ? -this.scrollParent.scrollTop() :r ? 0 :o.scrollTop()) * n,
                left:i.left + this.offset.relative.left * n + this.offset.parent.left * n - ("fixed" == this.cssPosition ? -this.scrollParent.scrollLeft() :r ? 0 :o.scrollLeft()) * n
            };
        },
        _generatePosition:function(e) {
            var i = this.options, n = "absolute" != this.cssPosition || this.scrollParent[0] != document && t.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent :this.offsetParent, o = /(html|body)/i.test(n[0].tagName);
            "relative" != this.cssPosition || this.scrollParent[0] != document && this.scrollParent[0] != this.offsetParent[0] || (this.offset.relative = this._getRelativeOffset());
            var r = e.pageX, s = e.pageY;
            if (this.originalPosition && (this.containment && (e.pageX - this.offset.click.left < this.containment[0] && (r = this.containment[0] + this.offset.click.left), 
            e.pageY - this.offset.click.top < this.containment[1] && (s = this.containment[1] + this.offset.click.top), 
            e.pageX - this.offset.click.left > this.containment[2] && (r = this.containment[2] + this.offset.click.left), 
            e.pageY - this.offset.click.top > this.containment[3] && (s = this.containment[3] + this.offset.click.top)), 
            i.grid)) {
                var a = this.originalPageY + Math.round((s - this.originalPageY) / i.grid[1]) * i.grid[1];
                s = this.containment ? a - this.offset.click.top < this.containment[1] || a - this.offset.click.top > this.containment[3] ? a - this.offset.click.top < this.containment[1] ? a + i.grid[1] :a - i.grid[1] :a :a;
                var l = this.originalPageX + Math.round((r - this.originalPageX) / i.grid[0]) * i.grid[0];
                r = this.containment ? l - this.offset.click.left < this.containment[0] || l - this.offset.click.left > this.containment[2] ? l - this.offset.click.left < this.containment[0] ? l + i.grid[0] :l - i.grid[0] :l :l;
            }
            return {
                top:s - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" == this.cssPosition ? -this.scrollParent.scrollTop() :o ? 0 :n.scrollTop()),
                left:r - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" == this.cssPosition ? -this.scrollParent.scrollLeft() :o ? 0 :n.scrollLeft())
            };
        },
        _rearrange:function(t, e, i, n) {
            i ? i[0].appendChild(this.placeholder[0]) :e.item[0].parentNode.insertBefore(this.placeholder[0], "down" == this.direction ? e.item[0] :e.item[0].nextSibling), 
            this.counter = this.counter ? ++this.counter :1;
            var o = this.counter;
            this._delay(function() {
                o == this.counter && this.refreshPositions(!n);
            });
        },
        _clear:function(e, i) {
            this.reverting = !1;
            var n = [];
            if (!this._noFinalSort && this.currentItem.parent().length && this.placeholder.before(this.currentItem), 
            this._noFinalSort = null, this.helper[0] == this.currentItem[0]) {
                for (var o in this._storedCSS) ("auto" == this._storedCSS[o] || "static" == this._storedCSS[o]) && (this._storedCSS[o] = "");
                this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
            } else this.currentItem.show();
            this.fromOutside && !i && n.push(function(t) {
                this._trigger("receive", t, this._uiHash(this.fromOutside));
            }), !this.fromOutside && this.domPosition.prev == this.currentItem.prev().not(".ui-sortable-helper")[0] && this.domPosition.parent == this.currentItem.parent()[0] || i || n.push(function(t) {
                this._trigger("update", t, this._uiHash());
            }), this !== this.currentContainer && (i || (n.push(function(t) {
                this._trigger("remove", t, this._uiHash());
            }), n.push(function(t) {
                return function(e) {
                    t._trigger("receive", e, this._uiHash(this));
                };
            }.call(this, this.currentContainer)), n.push(function(t) {
                return function(e) {
                    t._trigger("update", e, this._uiHash(this));
                };
            }.call(this, this.currentContainer))));
            for (var o = this.containers.length - 1; o >= 0; o--) i || n.push(function(t) {
                return function(e) {
                    t._trigger("deactivate", e, this._uiHash(this));
                };
            }.call(this, this.containers[o])), this.containers[o].containerCache.over && (n.push(function(t) {
                return function(e) {
                    t._trigger("out", e, this._uiHash(this));
                };
            }.call(this, this.containers[o])), this.containers[o].containerCache.over = 0);
            if (this._storedCursor && t("body").css("cursor", this._storedCursor), this._storedOpacity && this.helper.css("opacity", this._storedOpacity), 
            this._storedZIndex && this.helper.css("zIndex", "auto" == this._storedZIndex ? "" :this._storedZIndex), 
            this.dragging = !1, this.cancelHelperRemoval) {
                if (!i) {
                    this._trigger("beforeStop", e, this._uiHash());
                    for (var o = 0; o < n.length; o++) n[o].call(this, e);
                    this._trigger("stop", e, this._uiHash());
                }
                return this.fromOutside = !1, !1;
            }
            if (i || this._trigger("beforeStop", e, this._uiHash()), this.placeholder[0].parentNode.removeChild(this.placeholder[0]), 
            this.helper[0] != this.currentItem[0] && this.helper.remove(), this.helper = null, 
            !i) {
                for (var o = 0; o < n.length; o++) n[o].call(this, e);
                this._trigger("stop", e, this._uiHash());
            }
            return this.fromOutside = !1, !0;
        },
        _trigger:function() {
            t.Widget.prototype._trigger.apply(this, arguments) === !1 && this.cancel();
        },
        _uiHash:function(e) {
            var i = e || this;
            return {
                helper:i.helper,
                placeholder:i.placeholder || t([]),
                position:i.position,
                originalPosition:i.originalPosition,
                offset:i.positionAbs,
                item:i.currentItem,
                sender:e ? e.element :null
            };
        }
    });
}(jQuery), jQuery.effects || function(t, e) {
    var i = t.uiBackCompat !== !1, n = "ui-effects-";
    t.effects = {
        effect:{}
    }, /*!
 * jQuery Color Animations v2.0.0
 * http://jquery.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Mon Aug 13 13:41:02 2012 -0500
 */
    function(e, i) {
        function n(t, e, i) {
            var n = d[e.type] || {};
            return null == t ? i || !e.def ? null :e.def :(t = n.floor ? ~~t :parseFloat(t), 
            isNaN(t) ? e.def :n.mod ? (t + n.mod) % n.mod :0 > t ? 0 :n.max < t ? n.max :t);
        }
        function o(t) {
            var i = h(), n = i._rgba = [];
            return t = t.toLowerCase(), g(c, function(e, o) {
                var r, s = o.re.exec(t), a = s && o.parse(s), l = o.space || "rgba";
                return a ? (r = i[l](a), i[u[l].cache] = r[u[l].cache], n = i._rgba = r._rgba, !1) :void 0;
            }), n.length ? ("0,0,0,0" === n.join() && e.extend(n, s.transparent), i) :s[t];
        }
        function r(t, e, i) {
            return i = (i + 1) % 1, 1 > 6 * i ? t + (e - t) * i * 6 :1 > 2 * i ? e :2 > 3 * i ? t + (e - t) * (2 / 3 - i) * 6 :t;
        }
        var s, a = "backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "), l = /^([\-+])=\s*(\d+\.?\d*)/, c = [ {
            re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,
            parse:function(t) {
                return [ t[1], t[2], t[3], t[4] ];
            }
        }, {
            re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,
            parse:function(t) {
                return [ 2.55 * t[1], 2.55 * t[2], 2.55 * t[3], t[4] ];
            }
        }, {
            re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
            parse:function(t) {
                return [ parseInt(t[1], 16), parseInt(t[2], 16), parseInt(t[3], 16) ];
            }
        }, {
            re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,
            parse:function(t) {
                return [ parseInt(t[1] + t[1], 16), parseInt(t[2] + t[2], 16), parseInt(t[3] + t[3], 16) ];
            }
        }, {
            re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,
            space:"hsla",
            parse:function(t) {
                return [ t[1], t[2] / 100, t[3] / 100, t[4] ];
            }
        } ], h = e.Color = function(t, i, n, o) {
            return new e.Color.fn.parse(t, i, n, o);
        }, u = {
            rgba:{
                props:{
                    red:{
                        idx:0,
                        type:"byte"
                    },
                    green:{
                        idx:1,
                        type:"byte"
                    },
                    blue:{
                        idx:2,
                        type:"byte"
                    }
                }
            },
            hsla:{
                props:{
                    hue:{
                        idx:0,
                        type:"degrees"
                    },
                    saturation:{
                        idx:1,
                        type:"percent"
                    },
                    lightness:{
                        idx:2,
                        type:"percent"
                    }
                }
            }
        }, d = {
            "byte":{
                floor:!0,
                max:255
            },
            percent:{
                max:1
            },
            degrees:{
                mod:360,
                floor:!0
            }
        }, p = h.support = {}, f = e("<p>")[0], g = e.each;
        f.style.cssText = "background-color:rgba(1,1,1,.5)", p.rgba = f.style.backgroundColor.indexOf("rgba") > -1, 
        g(u, function(t, e) {
            e.cache = "_" + t, e.props.alpha = {
                idx:3,
                type:"percent",
                def:1
            };
        }), h.fn = e.extend(h.prototype, {
            parse:function(r, a, l, c) {
                if (r === i) return this._rgba = [ null, null, null, null ], this;
                (r.jquery || r.nodeType) && (r = e(r).css(a), a = i);
                var d = this, p = e.type(r), f = this._rgba = [];
                return a !== i && (r = [ r, a, l, c ], p = "array"), "string" === p ? this.parse(o(r) || s._default) :"array" === p ? (g(u.rgba.props, function(t, e) {
                    f[e.idx] = n(r[e.idx], e);
                }), this) :"object" === p ? (r instanceof h ? g(u, function(t, e) {
                    r[e.cache] && (d[e.cache] = r[e.cache].slice());
                }) :g(u, function(e, i) {
                    var o = i.cache;
                    g(i.props, function(t, e) {
                        if (!d[o] && i.to) {
                            if ("alpha" === t || null == r[t]) return;
                            d[o] = i.to(d._rgba);
                        }
                        d[o][e.idx] = n(r[t], e, !0);
                    }), d[o] && t.inArray(null, d[o].slice(0, 3)) < 0 && (d[o][3] = 1, i.from && (d._rgba = i.from(d[o])));
                }), this) :void 0;
            },
            is:function(t) {
                var e = h(t), i = !0, n = this;
                return g(u, function(t, o) {
                    var r, s = e[o.cache];
                    return s && (r = n[o.cache] || o.to && o.to(n._rgba) || [], g(o.props, function(t, e) {
                        return null != s[e.idx] ? i = s[e.idx] === r[e.idx] :void 0;
                    })), i;
                }), i;
            },
            _space:function() {
                var t = [], e = this;
                return g(u, function(i, n) {
                    e[n.cache] && t.push(i);
                }), t.pop();
            },
            transition:function(t, e) {
                var i = h(t), o = i._space(), r = u[o], s = 0 === this.alpha() ? h("transparent") :this, a = s[r.cache] || r.to(s._rgba), l = a.slice();
                return i = i[r.cache], g(r.props, function(t, o) {
                    var r = o.idx, s = a[r], c = i[r], h = d[o.type] || {};
                    null !== c && (null === s ? l[r] = c :(h.mod && (c - s > h.mod / 2 ? s += h.mod :s - c > h.mod / 2 && (s -= h.mod)), 
                    l[r] = n((c - s) * e + s, o)));
                }), this[o](l);
            },
            blend:function(t) {
                if (1 === this._rgba[3]) return this;
                var i = this._rgba.slice(), n = i.pop(), o = h(t)._rgba;
                return h(e.map(i, function(t, e) {
                    return (1 - n) * o[e] + n * t;
                }));
            },
            toRgbaString:function() {
                var t = "rgba(", i = e.map(this._rgba, function(t, e) {
                    return null == t ? e > 2 ? 1 :0 :t;
                });
                return 1 === i[3] && (i.pop(), t = "rgb("), t + i.join() + ")";
            },
            toHslaString:function() {
                var t = "hsla(", i = e.map(this.hsla(), function(t, e) {
                    return null == t && (t = e > 2 ? 1 :0), e && 3 > e && (t = Math.round(100 * t) + "%"), 
                    t;
                });
                return 1 === i[3] && (i.pop(), t = "hsl("), t + i.join() + ")";
            },
            toHexString:function(t) {
                var i = this._rgba.slice(), n = i.pop();
                return t && i.push(~~(255 * n)), "#" + e.map(i, function(t) {
                    return t = (t || 0).toString(16), 1 === t.length ? "0" + t :t;
                }).join("");
            },
            toString:function() {
                return 0 === this._rgba[3] ? "transparent" :this.toRgbaString();
            }
        }), h.fn.parse.prototype = h.fn, u.hsla.to = function(t) {
            if (null == t[0] || null == t[1] || null == t[2]) return [ null, null, null, t[3] ];
            var e, i, n = t[0] / 255, o = t[1] / 255, r = t[2] / 255, s = t[3], a = Math.max(n, o, r), l = Math.min(n, o, r), c = a - l, h = a + l, u = .5 * h;
            return e = l === a ? 0 :n === a ? 60 * (o - r) / c + 360 :o === a ? 60 * (r - n) / c + 120 :60 * (n - o) / c + 240, 
            i = 0 === u || 1 === u ? u :.5 >= u ? c / h :c / (2 - h), [ Math.round(e) % 360, i, u, null == s ? 1 :s ];
        }, u.hsla.from = function(t) {
            if (null == t[0] || null == t[1] || null == t[2]) return [ null, null, null, t[3] ];
            var e = t[0] / 360, i = t[1], n = t[2], o = t[3], s = .5 >= n ? n * (1 + i) :n + i - n * i, a = 2 * n - s;
            return [ Math.round(255 * r(a, s, e + 1 / 3)), Math.round(255 * r(a, s, e)), Math.round(255 * r(a, s, e - 1 / 3)), o ];
        }, g(u, function(t, o) {
            var r = o.props, s = o.cache, a = o.to, c = o.from;
            h.fn[t] = function(t) {
                if (a && !this[s] && (this[s] = a(this._rgba)), t === i) return this[s].slice();
                var o, l = e.type(t), u = "array" === l || "object" === l ? t :arguments, d = this[s].slice();
                return g(r, function(t, e) {
                    var i = u["object" === l ? t :e.idx];
                    null == i && (i = d[e.idx]), d[e.idx] = n(i, e);
                }), c ? (o = h(c(d)), o[s] = d, o) :h(d);
            }, g(r, function(i, n) {
                h.fn[i] || (h.fn[i] = function(o) {
                    var r, s = e.type(o), a = "alpha" === i ? this._hsla ? "hsla" :"rgba" :t, c = this[a](), h = c[n.idx];
                    return "undefined" === s ? h :("function" === s && (o = o.call(this, h), s = e.type(o)), 
                    null == o && n.empty ? this :("string" === s && (r = l.exec(o), r && (o = h + parseFloat(r[2]) * ("+" === r[1] ? 1 :-1))), 
                    c[n.idx] = o, this[a](c)));
                });
            });
        }), g(a, function(t, i) {
            e.cssHooks[i] = {
                set:function(t, n) {
                    var r, s, a = "";
                    if ("string" !== e.type(n) || (r = o(n))) {
                        if (n = h(r || n), !p.rgba && 1 !== n._rgba[3]) {
                            for (s = "backgroundColor" === i ? t.parentNode :t; ("" === a || "transparent" === a) && s && s.style; ) try {
                                a = e.css(s, "backgroundColor"), s = s.parentNode;
                            } catch (l) {}
                            n = n.blend(a && "transparent" !== a ? a :"_default");
                        }
                        n = n.toRgbaString();
                    }
                    try {
                        t.style[i] = n;
                    } catch (c) {}
                }
            }, e.fx.step[i] = function(t) {
                t.colorInit || (t.start = h(t.elem, i), t.end = h(t.end), t.colorInit = !0), e.cssHooks[i].set(t.elem, t.start.transition(t.end, t.pos));
            };
        }), e.cssHooks.borderColor = {
            expand:function(t) {
                var e = {};
                return g([ "Top", "Right", "Bottom", "Left" ], function(i, n) {
                    e["border" + n + "Color"] = t;
                }), e;
            }
        }, s = e.Color.names = {
            aqua:"#00ffff",
            black:"#000000",
            blue:"#0000ff",
            fuchsia:"#ff00ff",
            gray:"#808080",
            green:"#008000",
            lime:"#00ff00",
            maroon:"#800000",
            navy:"#000080",
            olive:"#808000",
            purple:"#800080",
            red:"#ff0000",
            silver:"#c0c0c0",
            teal:"#008080",
            white:"#ffffff",
            yellow:"#ffff00",
            transparent:[ null, null, null, 0 ],
            _default:"#ffffff"
        };
    }(jQuery), function() {
        function i() {
            var e, i, n = this.ownerDocument.defaultView ? this.ownerDocument.defaultView.getComputedStyle(this, null) :this.currentStyle, o = {};
            if (n && n.length && n[0] && n[n[0]]) for (i = n.length; i--; ) e = n[i], "string" == typeof n[e] && (o[t.camelCase(e)] = n[e]); else for (e in n) "string" == typeof n[e] && (o[e] = n[e]);
            return o;
        }
        function n(e, i) {
            var n, o, s = {};
            for (n in i) o = i[n], e[n] !== o && (r[n] || (t.fx.step[n] || !isNaN(parseFloat(o))) && (s[n] = o));
            return s;
        }
        var o = [ "add", "remove", "toggle" ], r = {
            border:1,
            borderBottom:1,
            borderColor:1,
            borderLeft:1,
            borderRight:1,
            borderTop:1,
            borderWidth:1,
            margin:1,
            padding:1
        };
        t.each([ "borderLeftStyle", "borderRightStyle", "borderBottomStyle", "borderTopStyle" ], function(e, i) {
            t.fx.step[i] = function(t) {
                ("none" !== t.end && !t.setAttr || 1 === t.pos && !t.setAttr) && (jQuery.style(t.elem, i, t.end), 
                t.setAttr = !0);
            };
        }), t.effects.animateClass = function(e, r, s, a) {
            var l = t.speed(r, s, a);
            return this.queue(function() {
                var r, s = t(this), a = s.attr("class") || "", c = l.children ? s.find("*").andSelf() :s;
                c = c.map(function() {
                    var e = t(this);
                    return {
                        el:e,
                        start:i.call(this)
                    };
                }), r = function() {
                    t.each(o, function(t, i) {
                        e[i] && s[i + "Class"](e[i]);
                    });
                }, r(), c = c.map(function() {
                    return this.end = i.call(this.el[0]), this.diff = n(this.start, this.end), this;
                }), s.attr("class", a), c = c.map(function() {
                    var e = this, i = t.Deferred(), n = jQuery.extend({}, l, {
                        queue:!1,
                        complete:function() {
                            i.resolve(e);
                        }
                    });
                    return this.el.animate(this.diff, n), i.promise();
                }), t.when.apply(t, c.get()).done(function() {
                    r(), t.each(arguments, function() {
                        var e = this.el;
                        t.each(this.diff, function(t) {
                            e.css(t, "");
                        });
                    }), l.complete.call(s[0]);
                });
            });
        }, t.fn.extend({
            _addClass:t.fn.addClass,
            addClass:function(e, i, n, o) {
                return i ? t.effects.animateClass.call(this, {
                    add:e
                }, i, n, o) :this._addClass(e);
            },
            _removeClass:t.fn.removeClass,
            removeClass:function(e, i, n, o) {
                return i ? t.effects.animateClass.call(this, {
                    remove:e
                }, i, n, o) :this._removeClass(e);
            },
            _toggleClass:t.fn.toggleClass,
            toggleClass:function(i, n, o, r, s) {
                return "boolean" == typeof n || n === e ? o ? t.effects.animateClass.call(this, n ? {
                    add:i
                } :{
                    remove:i
                }, o, r, s) :this._toggleClass(i, n) :t.effects.animateClass.call(this, {
                    toggle:i
                }, n, o, r);
            },
            switchClass:function(e, i, n, o, r) {
                return t.effects.animateClass.call(this, {
                    add:i,
                    remove:e
                }, n, o, r);
            }
        });
    }(), function() {
        function o(e, i, n, o) {
            return t.isPlainObject(e) && (i = e, e = e.effect), e = {
                effect:e
            }, null == i && (i = {}), t.isFunction(i) && (o = i, n = null, i = {}), ("number" == typeof i || t.fx.speeds[i]) && (o = n, 
            n = i, i = {}), t.isFunction(n) && (o = n, n = null), i && t.extend(e, i), n = n || i.duration, 
            e.duration = t.fx.off ? 0 :"number" == typeof n ? n :n in t.fx.speeds ? t.fx.speeds[n] :t.fx.speeds._default, 
            e.complete = o || i.complete, e;
        }
        function r(e) {
            return !e || "number" == typeof e || t.fx.speeds[e] ? !0 :"string" != typeof e || t.effects.effect[e] ? !1 :i && t.effects[e] ? !1 :!0;
        }
        t.extend(t.effects, {
            version:"1.9.2",
            save:function(t, e) {
                for (var i = 0; i < e.length; i++) null !== e[i] && t.data(n + e[i], t[0].style[e[i]]);
            },
            restore:function(t, i) {
                var o, r;
                for (r = 0; r < i.length; r++) null !== i[r] && (o = t.data(n + i[r]), o === e && (o = ""), 
                t.css(i[r], o));
            },
            setMode:function(t, e) {
                return "toggle" === e && (e = t.is(":hidden") ? "show" :"hide"), e;
            },
            getBaseline:function(t, e) {
                var i, n;
                switch (t[0]) {
                  case "top":
                    i = 0;
                    break;

                  case "middle":
                    i = .5;
                    break;

                  case "bottom":
                    i = 1;
                    break;

                  default:
                    i = t[0] / e.height;
                }
                switch (t[1]) {
                  case "left":
                    n = 0;
                    break;

                  case "center":
                    n = .5;
                    break;

                  case "right":
                    n = 1;
                    break;

                  default:
                    n = t[1] / e.width;
                }
                return {
                    x:n,
                    y:i
                };
            },
            createWrapper:function(e) {
                if (e.parent().is(".ui-effects-wrapper")) return e.parent();
                var i = {
                    width:e.outerWidth(!0),
                    height:e.outerHeight(!0),
                    "float":e.css("float")
                }, n = t("<div></div>").addClass("ui-effects-wrapper").css({
                    fontSize:"100%",
                    background:"transparent",
                    border:"none",
                    margin:0,
                    padding:0
                }), o = {
                    width:e.width(),
                    height:e.height()
                }, r = document.activeElement;
                try {
                    r.id;
                } catch (s) {
                    r = document.body;
                }
                return e.wrap(n), (e[0] === r || t.contains(e[0], r)) && t(r).focus(), n = e.parent(), 
                "static" === e.css("position") ? (n.css({
                    position:"relative"
                }), e.css({
                    position:"relative"
                })) :(t.extend(i, {
                    position:e.css("position"),
                    zIndex:e.css("z-index")
                }), t.each([ "top", "left", "bottom", "right" ], function(t, n) {
                    i[n] = e.css(n), isNaN(parseInt(i[n], 10)) && (i[n] = "auto");
                }), e.css({
                    position:"relative",
                    top:0,
                    left:0,
                    right:"auto",
                    bottom:"auto"
                })), e.css(o), n.css(i).show();
            },
            removeWrapper:function(e) {
                var i = document.activeElement;
                return e.parent().is(".ui-effects-wrapper") && (e.parent().replaceWith(e), (e[0] === i || t.contains(e[0], i)) && t(i).focus()), 
                e;
            },
            setTransition:function(e, i, n, o) {
                return o = o || {}, t.each(i, function(t, i) {
                    var r = e.cssUnit(i);
                    r[0] > 0 && (o[i] = r[0] * n + r[1]);
                }), o;
            }
        }), t.fn.extend({
            effect:function() {
                function e(e) {
                    function i() {
                        t.isFunction(r) && r.call(o[0]), t.isFunction(e) && e();
                    }
                    var o = t(this), r = n.complete, s = n.mode;
                    (o.is(":hidden") ? "hide" === s :"show" === s) ? i() :a.call(o[0], n, i);
                }
                var n = o.apply(this, arguments), r = n.mode, s = n.queue, a = t.effects.effect[n.effect], l = !a && i && t.effects[n.effect];
                return t.fx.off || !a && !l ? r ? this[r](n.duration, n.complete) :this.each(function() {
                    n.complete && n.complete.call(this);
                }) :a ? s === !1 ? this.each(e) :this.queue(s || "fx", e) :l.call(this, {
                    options:n,
                    duration:n.duration,
                    callback:n.complete,
                    mode:n.mode
                });
            },
            _show:t.fn.show,
            show:function(t) {
                if (r(t)) return this._show.apply(this, arguments);
                var e = o.apply(this, arguments);
                return e.mode = "show", this.effect.call(this, e);
            },
            _hide:t.fn.hide,
            hide:function(t) {
                if (r(t)) return this._hide.apply(this, arguments);
                var e = o.apply(this, arguments);
                return e.mode = "hide", this.effect.call(this, e);
            },
            __toggle:t.fn.toggle,
            toggle:function(e) {
                if (r(e) || "boolean" == typeof e || t.isFunction(e)) return this.__toggle.apply(this, arguments);
                var i = o.apply(this, arguments);
                return i.mode = "toggle", this.effect.call(this, i);
            },
            cssUnit:function(e) {
                var i = this.css(e), n = [];
                return t.each([ "em", "px", "%", "pt" ], function(t, e) {
                    i.indexOf(e) > 0 && (n = [ parseFloat(i), e ]);
                }), n;
            }
        });
    }(), function() {
        var e = {};
        t.each([ "Quad", "Cubic", "Quart", "Quint", "Expo" ], function(t, i) {
            e[i] = function(e) {
                return Math.pow(e, t + 2);
            };
        }), t.extend(e, {
            Sine:function(t) {
                return 1 - Math.cos(t * Math.PI / 2);
            },
            Circ:function(t) {
                return 1 - Math.sqrt(1 - t * t);
            },
            Elastic:function(t) {
                return 0 === t || 1 === t ? t :-Math.pow(2, 8 * (t - 1)) * Math.sin((80 * (t - 1) - 7.5) * Math.PI / 15);
            },
            Back:function(t) {
                return t * t * (3 * t - 2);
            },
            Bounce:function(t) {
                for (var e, i = 4; t < ((e = Math.pow(2, --i)) - 1) / 11; ) ;
                return 1 / Math.pow(4, 3 - i) - 7.5625 * Math.pow((3 * e - 2) / 22 - t, 2);
            }
        }), t.each(e, function(e, i) {
            t.easing["easeIn" + e] = i, t.easing["easeOut" + e] = function(t) {
                return 1 - i(1 - t);
            }, t.easing["easeInOut" + e] = function(t) {
                return .5 > t ? i(2 * t) / 2 :1 - i(-2 * t + 2) / 2;
            };
        });
    }();
}(jQuery), function(t) {
    var e = 0, i = {}, n = {};
    i.height = i.paddingTop = i.paddingBottom = i.borderTopWidth = i.borderBottomWidth = "hide", 
    n.height = n.paddingTop = n.paddingBottom = n.borderTopWidth = n.borderBottomWidth = "show", 
    t.widget("ui.accordion", {
        version:"1.9.2",
        options:{
            active:0,
            animate:{},
            collapsible:!1,
            event:"click",
            header:"> li > :first-child,> :not(li):even",
            heightStyle:"auto",
            icons:{
                activeHeader:"ui-icon-triangle-1-s",
                header:"ui-icon-triangle-1-e"
            },
            activate:null,
            beforeActivate:null
        },
        _create:function() {
            var i = this.accordionId = "ui-accordion-" + (this.element.attr("id") || ++e), n = this.options;
            this.prevShow = this.prevHide = t(), this.element.addClass("ui-accordion ui-widget ui-helper-reset"), 
            this.headers = this.element.find(n.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"), 
            this._hoverable(this.headers), this._focusable(this.headers), this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide(), 
            n.collapsible || n.active !== !1 && null != n.active || (n.active = 0), n.active < 0 && (n.active += this.headers.length), 
            this.active = this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"), 
            this.active.next().addClass("ui-accordion-content-active").show(), this._createIcons(), 
            this.refresh(), this.element.attr("role", "tablist"), this.headers.attr("role", "tab").each(function(e) {
                var n = t(this), o = n.attr("id"), r = n.next(), s = r.attr("id");
                o || (o = i + "-header-" + e, n.attr("id", o)), s || (s = i + "-panel-" + e, r.attr("id", s)), 
                n.attr("aria-controls", s), r.attr("aria-labelledby", o);
            }).next().attr("role", "tabpanel"), this.headers.not(this.active).attr({
                "aria-selected":"false",
                tabIndex:-1
            }).next().attr({
                "aria-expanded":"false",
                "aria-hidden":"true"
            }).hide(), this.active.length ? this.active.attr({
                "aria-selected":"true",
                tabIndex:0
            }).next().attr({
                "aria-expanded":"true",
                "aria-hidden":"false"
            }) :this.headers.eq(0).attr("tabIndex", 0), this._on(this.headers, {
                keydown:"_keydown"
            }), this._on(this.headers.next(), {
                keydown:"_panelKeyDown"
            }), this._setupEvents(n.event);
        },
        _getCreateEventData:function() {
            return {
                header:this.active,
                content:this.active.length ? this.active.next() :t()
            };
        },
        _createIcons:function() {
            var e = this.options.icons;
            e && (t("<span>").addClass("ui-accordion-header-icon ui-icon " + e.header).prependTo(this.headers), 
            this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader), 
            this.headers.addClass("ui-accordion-icons"));
        },
        _destroyIcons:function() {
            this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove();
        },
        _destroy:function() {
            var t;
            this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"), 
            this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function() {
                /^ui-accordion/.test(this.id) && this.removeAttribute("id");
            }), this._destroyIcons(), t = this.headers.next().css("display", "").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function() {
                /^ui-accordion/.test(this.id) && this.removeAttribute("id");
            }), "content" !== this.options.heightStyle && t.css("height", "");
        },
        _setOption:function(t, e) {
            return "active" === t ? (this._activate(e), void 0) :("event" === t && (this.options.event && this._off(this.headers, this.options.event), 
            this._setupEvents(e)), this._super(t, e), "collapsible" !== t || e || this.options.active !== !1 || this._activate(0), 
            "icons" === t && (this._destroyIcons(), e && this._createIcons()), "disabled" === t && this.headers.add(this.headers.next()).toggleClass("ui-state-disabled", !!e), 
            void 0);
        },
        _keydown:function(e) {
            if (!e.altKey && !e.ctrlKey) {
                var i = t.ui.keyCode, n = this.headers.length, o = this.headers.index(e.target), r = !1;
                switch (e.keyCode) {
                  case i.RIGHT:
                  case i.DOWN:
                    r = this.headers[(o + 1) % n];
                    break;

                  case i.LEFT:
                  case i.UP:
                    r = this.headers[(o - 1 + n) % n];
                    break;

                  case i.SPACE:
                  case i.ENTER:
                    this._eventHandler(e);
                    break;

                  case i.HOME:
                    r = this.headers[0];
                    break;

                  case i.END:
                    r = this.headers[n - 1];
                }
                r && (t(e.target).attr("tabIndex", -1), t(r).attr("tabIndex", 0), r.focus(), e.preventDefault());
            }
        },
        _panelKeyDown:function(e) {
            e.keyCode === t.ui.keyCode.UP && e.ctrlKey && t(e.currentTarget).prev().focus();
        },
        refresh:function() {
            var e, i, n = this.options.heightStyle, o = this.element.parent();
            "fill" === n ? (t.support.minHeight || (i = o.css("overflow"), o.css("overflow", "hidden")), 
            e = o.height(), this.element.siblings(":visible").each(function() {
                var i = t(this), n = i.css("position");
                "absolute" !== n && "fixed" !== n && (e -= i.outerHeight(!0));
            }), i && o.css("overflow", i), this.headers.each(function() {
                e -= t(this).outerHeight(!0);
            }), this.headers.next().each(function() {
                t(this).height(Math.max(0, e - t(this).innerHeight() + t(this).height()));
            }).css("overflow", "auto")) :"auto" === n && (e = 0, this.headers.next().each(function() {
                e = Math.max(e, t(this).css("height", "").height());
            }).height(e));
        },
        _activate:function(e) {
            var i = this._findActive(e)[0];
            i !== this.active[0] && (i = i || this.active[0], this._eventHandler({
                target:i,
                currentTarget:i,
                preventDefault:t.noop
            }));
        },
        _findActive:function(e) {
            return "number" == typeof e ? this.headers.eq(e) :t();
        },
        _setupEvents:function(e) {
            var i = {};
            e && (t.each(e.split(" "), function(t, e) {
                i[e] = "_eventHandler";
            }), this._on(this.headers, i));
        },
        _eventHandler:function(e) {
            var i = this.options, n = this.active, o = t(e.currentTarget), r = o[0] === n[0], s = r && i.collapsible, a = s ? t() :o.next(), l = n.next(), c = {
                oldHeader:n,
                oldPanel:l,
                newHeader:s ? t() :o,
                newPanel:a
            };
            e.preventDefault(), r && !i.collapsible || this._trigger("beforeActivate", e, c) === !1 || (i.active = s ? !1 :this.headers.index(o), 
            this.active = r ? t() :o, this._toggle(c), n.removeClass("ui-accordion-header-active ui-state-active"), 
            i.icons && n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header), 
            r || (o.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"), 
            i.icons && o.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader), 
            o.next().addClass("ui-accordion-content-active")));
        },
        _toggle:function(e) {
            var i = e.newPanel, n = this.prevShow.length ? this.prevShow :e.oldPanel;
            this.prevShow.add(this.prevHide).stop(!0, !0), this.prevShow = i, this.prevHide = n, 
            this.options.animate ? this._animate(i, n, e) :(n.hide(), i.show(), this._toggleComplete(e)), 
            n.attr({
                "aria-expanded":"false",
                "aria-hidden":"true"
            }), n.prev().attr("aria-selected", "false"), i.length && n.length ? n.prev().attr("tabIndex", -1) :i.length && this.headers.filter(function() {
                return 0 === t(this).attr("tabIndex");
            }).attr("tabIndex", -1), i.attr({
                "aria-expanded":"true",
                "aria-hidden":"false"
            }).prev().attr({
                "aria-selected":"true",
                tabIndex:0
            });
        },
        _animate:function(t, e, o) {
            var r, s, a, l = this, c = 0, h = t.length && (!e.length || t.index() < e.index()), u = this.options.animate || {}, d = h && u.down || u, p = function() {
                l._toggleComplete(o);
            };
            return "number" == typeof d && (a = d), "string" == typeof d && (s = d), s = s || d.easing || u.easing, 
            a = a || d.duration || u.duration, e.length ? t.length ? (r = t.show().outerHeight(), 
            e.animate(i, {
                duration:a,
                easing:s,
                step:function(t, e) {
                    e.now = Math.round(t);
                }
            }), t.hide().animate(n, {
                duration:a,
                easing:s,
                complete:p,
                step:function(t, i) {
                    i.now = Math.round(t), "height" !== i.prop ? c += i.now :"content" !== l.options.heightStyle && (i.now = Math.round(r - e.outerHeight() - c), 
                    c = 0);
                }
            }), void 0) :e.animate(i, a, s, p) :t.animate(n, a, s, p);
        },
        _toggleComplete:function(t) {
            var e = t.oldPanel;
            e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"), 
            e.length && (e.parent()[0].className = e.parent()[0].className), this._trigger("activate", null, t);
        }
    }), t.uiBackCompat !== !1 && (!function(t, e) {
        t.extend(e.options, {
            navigation:!1,
            navigationFilter:function() {
                return this.href.toLowerCase() === location.href.toLowerCase();
            }
        });
        var i = e._create;
        e._create = function() {
            if (this.options.navigation) {
                var e = this, n = this.element.find(this.options.header), o = n.next(), r = n.add(o).find("a").filter(this.options.navigationFilter)[0];
                r && n.add(o).each(function(i) {
                    return t.contains(this, r) ? (e.options.active = Math.floor(i / 2), !1) :void 0;
                });
            }
            i.call(this);
        };
    }(jQuery, jQuery.ui.accordion.prototype), function(t, e) {
        t.extend(e.options, {
            heightStyle:null,
            autoHeight:!0,
            clearStyle:!1,
            fillSpace:!1
        });
        var i = e._create, n = e._setOption;
        t.extend(e, {
            _create:function() {
                this.options.heightStyle = this.options.heightStyle || this._mergeHeightStyle(), 
                i.call(this);
            },
            _setOption:function(t) {
                ("autoHeight" === t || "clearStyle" === t || "fillSpace" === t) && (this.options.heightStyle = this._mergeHeightStyle()), 
                n.apply(this, arguments);
            },
            _mergeHeightStyle:function() {
                var t = this.options;
                return t.fillSpace ? "fill" :t.clearStyle ? "content" :t.autoHeight ? "auto" :void 0;
            }
        });
    }(jQuery, jQuery.ui.accordion.prototype), function(t, e) {
        t.extend(e.options.icons, {
            activeHeader:null,
            headerSelected:"ui-icon-triangle-1-s"
        });
        var i = e._createIcons;
        e._createIcons = function() {
            this.options.icons && (this.options.icons.activeHeader = this.options.icons.activeHeader || this.options.icons.headerSelected), 
            i.call(this);
        };
    }(jQuery, jQuery.ui.accordion.prototype), function(t, e) {
        e.activate = e._activate;
        var i = e._findActive;
        e._findActive = function(t) {
            return -1 === t && (t = !1), t && "number" != typeof t && (t = this.headers.index(this.headers.filter(t)), 
            -1 === t && (t = !1)), i.call(this, t);
        };
    }(jQuery, jQuery.ui.accordion.prototype), jQuery.ui.accordion.prototype.resize = jQuery.ui.accordion.prototype.refresh, 
    function(t, e) {
        t.extend(e.options, {
            change:null,
            changestart:null
        });
        var i = e._trigger;
        e._trigger = function(t, e, n) {
            var o = i.apply(this, arguments);
            return o ? ("beforeActivate" === t ? o = i.call(this, "changestart", e, {
                oldHeader:n.oldHeader,
                oldContent:n.oldPanel,
                newHeader:n.newHeader,
                newContent:n.newPanel
            }) :"activate" === t && (o = i.call(this, "change", e, {
                oldHeader:n.oldHeader,
                oldContent:n.oldPanel,
                newHeader:n.newHeader,
                newContent:n.newPanel
            })), o) :!1;
        };
    }(jQuery, jQuery.ui.accordion.prototype), function(t, e) {
        t.extend(e.options, {
            animate:null,
            animated:"slide"
        });
        var i = e._create;
        e._create = function() {
            var t = this.options;
            null === t.animate && (t.animate = t.animated ? "slide" === t.animated ? 300 :"bounceslide" === t.animated ? {
                duration:200,
                down:{
                    easing:"easeOutBounce",
                    duration:1e3
                }
            } :t.animated :!1), i.call(this);
        };
    }(jQuery, jQuery.ui.accordion.prototype));
}(jQuery), function(t) {
    var e = 0;
    t.widget("ui.autocomplete", {
        version:"1.9.2",
        defaultElement:"<input>",
        options:{
            appendTo:"body",
            autoFocus:!1,
            delay:300,
            minLength:1,
            position:{
                my:"left top",
                at:"left bottom",
                collision:"none"
            },
            source:null,
            change:null,
            close:null,
            focus:null,
            open:null,
            response:null,
            search:null,
            select:null
        },
        pending:0,
        _create:function() {
            var e, i, n;
            this.isMultiLine = this._isMultiLine(), this.valueMethod = this.element[this.element.is("input,textarea") ? "val" :"text"], 
            this.isNewMenu = !0, this.element.addClass("ui-autocomplete-input").attr("autocomplete", "off"), 
            this._on(this.element, {
                keydown:function(o) {
                    if (this.element.prop("readOnly")) return e = !0, n = !0, i = !0, void 0;
                    e = !1, n = !1, i = !1;
                    var r = t.ui.keyCode;
                    switch (o.keyCode) {
                      case r.PAGE_UP:
                        e = !0, this._move("previousPage", o);
                        break;

                      case r.PAGE_DOWN:
                        e = !0, this._move("nextPage", o);
                        break;

                      case r.UP:
                        e = !0, this._keyEvent("previous", o);
                        break;

                      case r.DOWN:
                        e = !0, this._keyEvent("next", o);
                        break;

                      case r.ENTER:
                      case r.NUMPAD_ENTER:
                        this.menu.active && (e = !0, o.preventDefault(), this.menu.select(o));
                        break;

                      case r.TAB:
                        this.menu.active && this.menu.select(o);
                        break;

                      case r.ESCAPE:
                        this.menu.element.is(":visible") && (this._value(this.term), this.close(o), o.preventDefault());
                        break;

                      default:
                        i = !0, this._searchTimeout(o);
                    }
                },
                keypress:function(n) {
                    if (e) return e = !1, n.preventDefault(), void 0;
                    if (!i) {
                        var o = t.ui.keyCode;
                        switch (n.keyCode) {
                          case o.PAGE_UP:
                            this._move("previousPage", n);
                            break;

                          case o.PAGE_DOWN:
                            this._move("nextPage", n);
                            break;

                          case o.UP:
                            this._keyEvent("previous", n);
                            break;

                          case o.DOWN:
                            this._keyEvent("next", n);
                        }
                    }
                },
                input:function(t) {
                    return n ? (n = !1, t.preventDefault(), void 0) :(this._searchTimeout(t), void 0);
                },
                focus:function() {
                    this.selectedItem = null, this.previous = this._value();
                },
                blur:function(t) {
                    return this.cancelBlur ? (delete this.cancelBlur, void 0) :(clearTimeout(this.searching), 
                    this.close(t), this._change(t), void 0);
                }
            }), this._initSource(), this.menu = t("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo || "body")[0]).menu({
                input:t(),
                role:null
            }).zIndex(this.element.zIndex() + 1).hide().data("menu"), this._on(this.menu.element, {
                mousedown:function(e) {
                    e.preventDefault(), this.cancelBlur = !0, this._delay(function() {
                        delete this.cancelBlur;
                    });
                    var i = this.menu.element[0];
                    t(e.target).closest(".ui-menu-item").length || this._delay(function() {
                        var e = this;
                        this.document.one("mousedown", function(n) {
                            n.target === e.element[0] || n.target === i || t.contains(i, n.target) || e.close();
                        });
                    });
                },
                menufocus:function(e, i) {
                    if (this.isNewMenu && (this.isNewMenu = !1, e.originalEvent && /^mouse/.test(e.originalEvent.type))) return this.menu.blur(), 
                    this.document.one("mousemove", function() {
                        t(e.target).trigger(e.originalEvent);
                    }), void 0;
                    var n = i.item.data("ui-autocomplete-item") || i.item.data("item.autocomplete");
                    !1 !== this._trigger("focus", e, {
                        item:n
                    }) ? e.originalEvent && /^key/.test(e.originalEvent.type) && this._value(n.value) :this.liveRegion.text(n.value);
                },
                menuselect:function(t, e) {
                    var i = e.item.data("ui-autocomplete-item") || e.item.data("item.autocomplete"), n = this.previous;
                    this.element[0] !== this.document[0].activeElement && (this.element.focus(), this.previous = n, 
                    this._delay(function() {
                        this.previous = n, this.selectedItem = i;
                    })), !1 !== this._trigger("select", t, {
                        item:i
                    }) && this._value(i.value), this.term = this._value(), this.close(t), this.selectedItem = i;
                }
            }), this.liveRegion = t("<span>", {
                role:"status",
                "aria-live":"polite"
            }).addClass("ui-helper-hidden-accessible").insertAfter(this.element), t.fn.bgiframe && this.menu.element.bgiframe(), 
            this._on(this.window, {
                beforeunload:function() {
                    this.element.removeAttr("autocomplete");
                }
            });
        },
        _destroy:function() {
            clearTimeout(this.searching), this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"), 
            this.menu.element.remove(), this.liveRegion.remove();
        },
        _setOption:function(t, e) {
            this._super(t, e), "source" === t && this._initSource(), "appendTo" === t && this.menu.element.appendTo(this.document.find(e || "body")[0]), 
            "disabled" === t && e && this.xhr && this.xhr.abort();
        },
        _isMultiLine:function() {
            return this.element.is("textarea") ? !0 :this.element.is("input") ? !1 :this.element.prop("isContentEditable");
        },
        _initSource:function() {
            var e, i, n = this;
            t.isArray(this.options.source) ? (e = this.options.source, this.source = function(i, n) {
                n(t.ui.autocomplete.filter(e, i.term));
            }) :"string" == typeof this.options.source ? (i = this.options.source, this.source = function(e, o) {
                n.xhr && n.xhr.abort(), n.xhr = t.ajax({
                    url:i,
                    data:e,
                    dataType:"json",
                    success:function(t) {
                        o(t);
                    },
                    error:function() {
                        o([]);
                    }
                });
            }) :this.source = this.options.source;
        },
        _searchTimeout:function(t) {
            clearTimeout(this.searching), this.searching = this._delay(function() {
                this.term !== this._value() && (this.selectedItem = null, this.search(null, t));
            }, this.options.delay);
        },
        search:function(t, e) {
            return t = null != t ? t :this._value(), this.term = this._value(), t.length < this.options.minLength ? this.close(e) :this._trigger("search", e) !== !1 ? this._search(t) :void 0;
        },
        _search:function(t) {
            this.pending++, this.element.addClass("ui-autocomplete-loading"), this.cancelSearch = !1, 
            this.source({
                term:t
            }, this._response());
        },
        _response:function() {
            var t = this, i = ++e;
            return function(n) {
                i === e && t.__response(n), t.pending--, t.pending || t.element.removeClass("ui-autocomplete-loading");
            };
        },
        __response:function(t) {
            t && (t = this._normalize(t)), this._trigger("response", null, {
                content:t
            }), !this.options.disabled && t && t.length && !this.cancelSearch ? (this._suggest(t), 
            this._trigger("open")) :this._close();
        },
        close:function(t) {
            this.cancelSearch = !0, this._close(t);
        },
        _close:function(t) {
            this.menu.element.is(":visible") && (this.menu.element.hide(), this.menu.blur(), 
            this.isNewMenu = !0, this._trigger("close", t));
        },
        _change:function(t) {
            this.previous !== this._value() && this._trigger("change", t, {
                item:this.selectedItem
            });
        },
        _normalize:function(e) {
            return e.length && e[0].label && e[0].value ? e :t.map(e, function(e) {
                return "string" == typeof e ? {
                    label:e,
                    value:e
                } :t.extend({
                    label:e.label || e.value,
                    value:e.value || e.label
                }, e);
            });
        },
        _suggest:function(e) {
            var i = this.menu.element.empty().zIndex(this.element.zIndex() + 1);
            this._renderMenu(i, e), this.menu.refresh(), i.show(), this._resizeMenu(), i.position(t.extend({
                of:this.element
            }, this.options.position)), this.options.autoFocus && this.menu.next();
        },
        _resizeMenu:function() {
            var t = this.menu.element;
            t.outerWidth(Math.max(t.width("").outerWidth() + 1, this.element.outerWidth()));
        },
        _renderMenu:function(e, i) {
            var n = this;
            t.each(i, function(t, i) {
                n._renderItemData(e, i);
            });
        },
        _renderItemData:function(t, e) {
            return this._renderItem(t, e).data("ui-autocomplete-item", e);
        },
        _renderItem:function(e, i) {
            return t("<li>").append(t("<a>").text(i.label)).appendTo(e);
        },
        _move:function(t, e) {
            return this.menu.element.is(":visible") ? this.menu.isFirstItem() && /^previous/.test(t) || this.menu.isLastItem() && /^next/.test(t) ? (this._value(this.term), 
            this.menu.blur(), void 0) :(this.menu[t](e), void 0) :(this.search(null, e), void 0);
        },
        widget:function() {
            return this.menu.element;
        },
        _value:function() {
            return this.valueMethod.apply(this.element, arguments);
        },
        _keyEvent:function(t, e) {
            (!this.isMultiLine || this.menu.element.is(":visible")) && (this._move(t, e), e.preventDefault());
        }
    }), t.extend(t.ui.autocomplete, {
        escapeRegex:function(t) {
            return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
        },
        filter:function(e, i) {
            var n = new RegExp(t.ui.autocomplete.escapeRegex(i), "i");
            return t.grep(e, function(t) {
                return n.test(t.label || t.value || t);
            });
        }
    }), t.widget("ui.autocomplete", t.ui.autocomplete, {
        options:{
            messages:{
                noResults:"No search results.",
                results:function(t) {
                    return t + (t > 1 ? " results are" :" result is") + " available, use up and down arrow keys to navigate.";
                }
            }
        },
        __response:function(t) {
            var e;
            this._superApply(arguments), this.options.disabled || this.cancelSearch || (e = t && t.length ? this.options.messages.results(t.length) :this.options.messages.noResults, 
            this.liveRegion.text(e));
        }
    });
}(jQuery), function(t) {
    var e, i, n, o, r = "ui-button ui-widget ui-state-default ui-corner-all", s = "ui-state-hover ui-state-active ", a = "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only", l = function() {
        var e = t(this).find(":ui-button");
        setTimeout(function() {
            e.button("refresh");
        }, 1);
    }, c = function(e) {
        var i = e.name, n = e.form, o = t([]);
        return i && (o = n ? t(n).find("[name='" + i + "']") :t("[name='" + i + "']", e.ownerDocument).filter(function() {
            return !this.form;
        })), o;
    };
    t.widget("ui.button", {
        version:"1.9.2",
        defaultElement:"<button>",
        options:{
            disabled:null,
            text:!0,
            label:null,
            icons:{
                primary:null,
                secondary:null
            }
        },
        _create:function() {
            this.element.closest("form").unbind("reset" + this.eventNamespace).bind("reset" + this.eventNamespace, l), 
            "boolean" != typeof this.options.disabled ? this.options.disabled = !!this.element.prop("disabled") :this.element.prop("disabled", this.options.disabled), 
            this._determineButtonType(), this.hasTitle = !!this.buttonElement.attr("title");
            var s = this, a = this.options, h = "checkbox" === this.type || "radio" === this.type, u = h ? "" :"ui-state-active", d = "ui-state-focus";
            null === a.label && (a.label = "input" === this.type ? this.buttonElement.val() :this.buttonElement.html()), 
            this._hoverable(this.buttonElement), this.buttonElement.addClass(r).attr("role", "button").bind("mouseenter" + this.eventNamespace, function() {
                a.disabled || this === e && t(this).addClass("ui-state-active");
            }).bind("mouseleave" + this.eventNamespace, function() {
                a.disabled || t(this).removeClass(u);
            }).bind("click" + this.eventNamespace, function(t) {
                a.disabled && (t.preventDefault(), t.stopImmediatePropagation());
            }), this.element.bind("focus" + this.eventNamespace, function() {
                s.buttonElement.addClass(d);
            }).bind("blur" + this.eventNamespace, function() {
                s.buttonElement.removeClass(d);
            }), h && (this.element.bind("change" + this.eventNamespace, function() {
                o || s.refresh();
            }), this.buttonElement.bind("mousedown" + this.eventNamespace, function(t) {
                a.disabled || (o = !1, i = t.pageX, n = t.pageY);
            }).bind("mouseup" + this.eventNamespace, function(t) {
                a.disabled || (i !== t.pageX || n !== t.pageY) && (o = !0);
            })), "checkbox" === this.type ? this.buttonElement.bind("click" + this.eventNamespace, function() {
                return a.disabled || o ? !1 :(t(this).toggleClass("ui-state-active"), s.buttonElement.attr("aria-pressed", s.element[0].checked), 
                void 0);
            }) :"radio" === this.type ? this.buttonElement.bind("click" + this.eventNamespace, function() {
                if (a.disabled || o) return !1;
                t(this).addClass("ui-state-active"), s.buttonElement.attr("aria-pressed", "true");
                var e = s.element[0];
                c(e).not(e).map(function() {
                    return t(this).button("widget")[0];
                }).removeClass("ui-state-active").attr("aria-pressed", "false");
            }) :(this.buttonElement.bind("mousedown" + this.eventNamespace, function() {
                return a.disabled ? !1 :(t(this).addClass("ui-state-active"), e = this, s.document.one("mouseup", function() {
                    e = null;
                }), void 0);
            }).bind("mouseup" + this.eventNamespace, function() {
                return a.disabled ? !1 :(t(this).removeClass("ui-state-active"), void 0);
            }).bind("keydown" + this.eventNamespace, function(e) {
                return a.disabled ? !1 :((e.keyCode === t.ui.keyCode.SPACE || e.keyCode === t.ui.keyCode.ENTER) && t(this).addClass("ui-state-active"), 
                void 0);
            }).bind("keyup" + this.eventNamespace, function() {
                t(this).removeClass("ui-state-active");
            }), this.buttonElement.is("a") && this.buttonElement.keyup(function(e) {
                e.keyCode === t.ui.keyCode.SPACE && t(this).click();
            })), this._setOption("disabled", a.disabled), this._resetButton();
        },
        _determineButtonType:function() {
            var t, e, i;
            this.type = this.element.is("[type=checkbox]") ? "checkbox" :this.element.is("[type=radio]") ? "radio" :this.element.is("input") ? "input" :"button", 
            "checkbox" === this.type || "radio" === this.type ? (t = this.element.parents().last(), 
            e = "label[for='" + this.element.attr("id") + "']", this.buttonElement = t.find(e), 
            this.buttonElement.length || (t = t.length ? t.siblings() :this.element.siblings(), 
            this.buttonElement = t.filter(e), this.buttonElement.length || (this.buttonElement = t.find(e))), 
            this.element.addClass("ui-helper-hidden-accessible"), i = this.element.is(":checked"), 
            i && this.buttonElement.addClass("ui-state-active"), this.buttonElement.prop("aria-pressed", i)) :this.buttonElement = this.element;
        },
        widget:function() {
            return this.buttonElement;
        },
        _destroy:function() {
            this.element.removeClass("ui-helper-hidden-accessible"), this.buttonElement.removeClass(r + " " + s + " " + a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()), 
            this.hasTitle || this.buttonElement.removeAttr("title");
        },
        _setOption:function(t, e) {
            return this._super(t, e), "disabled" === t ? (e ? this.element.prop("disabled", !0) :this.element.prop("disabled", !1), 
            void 0) :(this._resetButton(), void 0);
        },
        refresh:function() {
            var e = this.element.is("input, button") ? this.element.is(":disabled") :this.element.hasClass("ui-button-disabled");
            e !== this.options.disabled && this._setOption("disabled", e), "radio" === this.type ? c(this.element[0]).each(function() {
                t(this).is(":checked") ? t(this).button("widget").addClass("ui-state-active").attr("aria-pressed", "true") :t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed", "false");
            }) :"checkbox" === this.type && (this.element.is(":checked") ? this.buttonElement.addClass("ui-state-active").attr("aria-pressed", "true") :this.buttonElement.removeClass("ui-state-active").attr("aria-pressed", "false"));
        },
        _resetButton:function() {
            if ("input" === this.type) return this.options.label && this.element.val(this.options.label), 
            void 0;
            var e = this.buttonElement.removeClass(a), i = t("<span></span>", this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(), n = this.options.icons, o = n.primary && n.secondary, r = [];
            n.primary || n.secondary ? (this.options.text && r.push("ui-button-text-icon" + (o ? "s" :n.primary ? "-primary" :"-secondary")), 
            n.primary && e.prepend("<span class='ui-button-icon-primary ui-icon " + n.primary + "'></span>"), 
            n.secondary && e.append("<span class='ui-button-icon-secondary ui-icon " + n.secondary + "'></span>"), 
            this.options.text || (r.push(o ? "ui-button-icons-only" :"ui-button-icon-only"), 
            this.hasTitle || e.attr("title", t.trim(i)))) :r.push("ui-button-text-only"), e.addClass(r.join(" "));
        }
    }), t.widget("ui.buttonset", {
        version:"1.9.2",
        options:{
            items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"
        },
        _create:function() {
            this.element.addClass("ui-buttonset");
        },
        _init:function() {
            this.refresh();
        },
        _setOption:function(t, e) {
            "disabled" === t && this.buttons.button("option", t, e), this._super(t, e);
        },
        refresh:function() {
            var e = "rtl" === this.element.css("direction");
            this.buttons = this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function() {
                return t(this).button("widget")[0];
            }).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e ? "ui-corner-right" :"ui-corner-left").end().filter(":last").addClass(e ? "ui-corner-left" :"ui-corner-right").end().end();
        },
        _destroy:function() {
            this.element.removeClass("ui-buttonset"), this.buttons.map(function() {
                return t(this).button("widget")[0];
            }).removeClass("ui-corner-left ui-corner-right").end().button("destroy");
        }
    });
}(jQuery), function($, undefined) {
    function Datepicker() {
        this.debug = !1, this._curInst = null, this._keyEvent = !1, this._disabledInputs = [], 
        this._datepickerShowing = !1, this._inDialog = !1, this._mainDivId = "ui-datepicker-div", 
        this._inlineClass = "ui-datepicker-inline", this._appendClass = "ui-datepicker-append", 
        this._triggerClass = "ui-datepicker-trigger", this._dialogClass = "ui-datepicker-dialog", 
        this._disableClass = "ui-datepicker-disabled", this._unselectableClass = "ui-datepicker-unselectable", 
        this._currentClass = "ui-datepicker-current-day", this._dayOverClass = "ui-datepicker-days-cell-over", 
        this.regional = [], this.regional[""] = {
            closeText:"Done",
            prevText:"Prev",
            nextText:"Next",
            currentText:"Today",
            monthNames:[ "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" ],
            monthNamesShort:[ "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" ],
            dayNames:[ "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday" ],
            dayNamesShort:[ "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat" ],
            dayNamesMin:[ "Su", "Mo", "Tu", "We", "Th", "Fr", "Sa" ],
            weekHeader:"Wk",
            dateFormat:"mm/dd/yy",
            firstDay:0,
            isRTL:!1,
            showMonthAfterYear:!1,
            yearSuffix:""
        }, this._defaults = {
            showOn:"focus",
            showAnim:"fadeIn",
            showOptions:{},
            defaultDate:null,
            appendText:"",
            buttonText:"...",
            buttonImage:"",
            buttonImageOnly:!1,
            hideIfNoPrevNext:!1,
            navigationAsDateFormat:!1,
            gotoCurrent:!1,
            changeMonth:!1,
            changeYear:!1,
            yearRange:"c-10:c+10",
            showOtherMonths:!1,
            selectOtherMonths:!1,
            showWeek:!1,
            calculateWeek:this.iso8601Week,
            shortYearCutoff:"+10",
            minDate:null,
            maxDate:null,
            duration:"fast",
            beforeShowDay:null,
            beforeShow:null,
            onSelect:null,
            onChangeMonthYear:null,
            onClose:null,
            numberOfMonths:1,
            showCurrentAtPos:0,
            stepMonths:1,
            stepBigMonths:12,
            altField:"",
            altFormat:"",
            constrainInput:!0,
            showButtonPanel:!1,
            autoSize:!1,
            disabled:!1
        }, $.extend(this._defaults, this.regional[""]), this.dpDiv = bindHover($('<div id="' + this._mainDivId + '" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'));
    }
    function bindHover(t) {
        var e = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
        return t.delegate(e, "mouseout", function() {
            $(this).removeClass("ui-state-hover"), -1 != this.className.indexOf("ui-datepicker-prev") && $(this).removeClass("ui-datepicker-prev-hover"), 
            -1 != this.className.indexOf("ui-datepicker-next") && $(this).removeClass("ui-datepicker-next-hover");
        }).delegate(e, "mouseover", function() {
            $.datepicker._isDisabledDatepicker(instActive.inline ? t.parent()[0] :instActive.input[0]) || ($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"), 
            $(this).addClass("ui-state-hover"), -1 != this.className.indexOf("ui-datepicker-prev") && $(this).addClass("ui-datepicker-prev-hover"), 
            -1 != this.className.indexOf("ui-datepicker-next") && $(this).addClass("ui-datepicker-next-hover"));
        });
    }
    function extendRemove(t, e) {
        $.extend(t, e);
        for (var i in e) (null == e[i] || e[i] == undefined) && (t[i] = e[i]);
        return t;
    }
    $.extend($.ui, {
        datepicker:{
            version:"1.9.2"
        }
    });
    var PROP_NAME = "datepicker", dpuuid = new Date().getTime(), instActive;
    $.extend(Datepicker.prototype, {
        markerClassName:"hasDatepicker",
        maxRows:4,
        log:function() {
            this.debug && console.log.apply("", arguments);
        },
        _widgetDatepicker:function() {
            return this.dpDiv;
        },
        setDefaults:function(t) {
            return extendRemove(this._defaults, t || {}), this;
        },
        _attachDatepicker:function(target, settings) {
            var inlineSettings = null;
            for (var attrName in this._defaults) {
                var attrValue = target.getAttribute("date:" + attrName);
                if (attrValue) {
                    inlineSettings = inlineSettings || {};
                    try {
                        inlineSettings[attrName] = eval(attrValue);
                    } catch (err) {
                        inlineSettings[attrName] = attrValue;
                    }
                }
            }
            var nodeName = target.nodeName.toLowerCase(), inline = "div" == nodeName || "span" == nodeName;
            target.id || (this.uuid += 1, target.id = "dp" + this.uuid);
            var inst = this._newInst($(target), inline);
            inst.settings = $.extend({}, settings || {}, inlineSettings || {}), "input" == nodeName ? this._connectDatepicker(target, inst) :inline && this._inlineDatepicker(target, inst);
        },
        _newInst:function(t, e) {
            var i = t[0].id.replace(/([^A-Za-z0-9_-])/g, "\\\\$1");
            return {
                id:i,
                input:t,
                selectedDay:0,
                selectedMonth:0,
                selectedYear:0,
                drawMonth:0,
                drawYear:0,
                inline:e,
                dpDiv:e ? bindHover($('<div class="' + this._inlineClass + ' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')) :this.dpDiv
            };
        },
        _connectDatepicker:function(t, e) {
            var i = $(t);
            e.append = $([]), e.trigger = $([]), i.hasClass(this.markerClassName) || (this._attachments(i, e), 
            i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker", function(t, i, n) {
                e.settings[i] = n;
            }).bind("getData.datepicker", function(t, i) {
                return this._get(e, i);
            }), this._autoSize(e), $.data(t, PROP_NAME, e), e.settings.disabled && this._disableDatepicker(t));
        },
        _attachments:function(t, e) {
            var i = this._get(e, "appendText"), n = this._get(e, "isRTL");
            e.append && e.append.remove(), i && (e.append = $('<span class="' + this._appendClass + '">' + i + "</span>"), 
            t[n ? "before" :"after"](e.append)), t.unbind("focus", this._showDatepicker), e.trigger && e.trigger.remove();
            var o = this._get(e, "showOn");
            if (("focus" == o || "both" == o) && t.focus(this._showDatepicker), "button" == o || "both" == o) {
                var r = this._get(e, "buttonText"), s = this._get(e, "buttonImage");
                e.trigger = $(this._get(e, "buttonImageOnly") ? $("<img/>").addClass(this._triggerClass).attr({
                    src:s,
                    alt:r,
                    title:r
                }) :$('<button type="button"></button>').addClass(this._triggerClass).html("" == s ? r :$("<img/>").attr({
                    src:s,
                    alt:r,
                    title:r
                }))), t[n ? "before" :"after"](e.trigger), e.trigger.click(function() {
                    return $.datepicker._datepickerShowing && $.datepicker._lastInput == t[0] ? $.datepicker._hideDatepicker() :$.datepicker._datepickerShowing && $.datepicker._lastInput != t[0] ? ($.datepicker._hideDatepicker(), 
                    $.datepicker._showDatepicker(t[0])) :$.datepicker._showDatepicker(t[0]), !1;
                });
            }
        },
        _autoSize:function(t) {
            if (this._get(t, "autoSize") && !t.inline) {
                var e = new Date(2009, 11, 20), i = this._get(t, "dateFormat");
                if (i.match(/[DM]/)) {
                    var n = function(t) {
                        for (var e = 0, i = 0, n = 0; n < t.length; n++) t[n].length > e && (e = t[n].length, 
                        i = n);
                        return i;
                    };
                    e.setMonth(n(this._get(t, i.match(/MM/) ? "monthNames" :"monthNamesShort"))), e.setDate(n(this._get(t, i.match(/DD/) ? "dayNames" :"dayNamesShort")) + 20 - e.getDay());
                }
                t.input.attr("size", this._formatDate(t, e).length);
            }
        },
        _inlineDatepicker:function(t, e) {
            var i = $(t);
            i.hasClass(this.markerClassName) || (i.addClass(this.markerClassName).append(e.dpDiv).bind("setData.datepicker", function(t, i, n) {
                e.settings[i] = n;
            }).bind("getData.datepicker", function(t, i) {
                return this._get(e, i);
            }), $.data(t, PROP_NAME, e), this._setDate(e, this._getDefaultDate(e), !0), this._updateDatepicker(e), 
            this._updateAlternate(e), e.settings.disabled && this._disableDatepicker(t), e.dpDiv.css("display", "block"));
        },
        _dialogDatepicker:function(t, e, i, n, o) {
            var r = this._dialogInst;
            if (!r) {
                this.uuid += 1;
                var s = "dp" + this.uuid;
                this._dialogInput = $('<input type="text" id="' + s + '" style="position: absolute; top: -100px; width: 0px;"/>'), 
                this._dialogInput.keydown(this._doKeyDown), $("body").append(this._dialogInput), 
                r = this._dialogInst = this._newInst(this._dialogInput, !1), r.settings = {}, $.data(this._dialogInput[0], PROP_NAME, r);
            }
            if (extendRemove(r.settings, n || {}), e = e && e.constructor == Date ? this._formatDate(r, e) :e, 
            this._dialogInput.val(e), this._pos = o ? o.length ? o :[ o.pageX, o.pageY ] :null, 
            !this._pos) {
                var a = document.documentElement.clientWidth, l = document.documentElement.clientHeight, c = document.documentElement.scrollLeft || document.body.scrollLeft, h = document.documentElement.scrollTop || document.body.scrollTop;
                this._pos = [ a / 2 - 100 + c, l / 2 - 150 + h ];
            }
            return this._dialogInput.css("left", this._pos[0] + 20 + "px").css("top", this._pos[1] + "px"), 
            r.settings.onSelect = i, this._inDialog = !0, this.dpDiv.addClass(this._dialogClass), 
            this._showDatepicker(this._dialogInput[0]), $.blockUI && $.blockUI(this.dpDiv), 
            $.data(this._dialogInput[0], PROP_NAME, r), this;
        },
        _destroyDatepicker:function(t) {
            var e = $(t), i = $.data(t, PROP_NAME);
            if (e.hasClass(this.markerClassName)) {
                var n = t.nodeName.toLowerCase();
                $.removeData(t, PROP_NAME), "input" == n ? (i.append.remove(), i.trigger.remove(), 
                e.removeClass(this.markerClassName).unbind("focus", this._showDatepicker).unbind("keydown", this._doKeyDown).unbind("keypress", this._doKeyPress).unbind("keyup", this._doKeyUp)) :("div" == n || "span" == n) && e.removeClass(this.markerClassName).empty();
            }
        },
        _enableDatepicker:function(t) {
            var e = $(t), i = $.data(t, PROP_NAME);
            if (e.hasClass(this.markerClassName)) {
                var n = t.nodeName.toLowerCase();
                if ("input" == n) t.disabled = !1, i.trigger.filter("button").each(function() {
                    this.disabled = !1;
                }).end().filter("img").css({
                    opacity:"1.0",
                    cursor:""
                }); else if ("div" == n || "span" == n) {
                    var o = e.children("." + this._inlineClass);
                    o.children().removeClass("ui-state-disabled"), o.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !1);
                }
                this._disabledInputs = $.map(this._disabledInputs, function(e) {
                    return e == t ? null :e;
                });
            }
        },
        _disableDatepicker:function(t) {
            var e = $(t), i = $.data(t, PROP_NAME);
            if (e.hasClass(this.markerClassName)) {
                var n = t.nodeName.toLowerCase();
                if ("input" == n) t.disabled = !0, i.trigger.filter("button").each(function() {
                    this.disabled = !0;
                }).end().filter("img").css({
                    opacity:"0.5",
                    cursor:"default"
                }); else if ("div" == n || "span" == n) {
                    var o = e.children("." + this._inlineClass);
                    o.children().addClass("ui-state-disabled"), o.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !0);
                }
                this._disabledInputs = $.map(this._disabledInputs, function(e) {
                    return e == t ? null :e;
                }), this._disabledInputs[this._disabledInputs.length] = t;
            }
        },
        _isDisabledDatepicker:function(t) {
            if (!t) return !1;
            for (var e = 0; e < this._disabledInputs.length; e++) if (this._disabledInputs[e] == t) return !0;
            return !1;
        },
        _getInst:function(t) {
            try {
                return $.data(t, PROP_NAME);
            } catch (e) {
                throw "Missing instance data for this datepicker";
            }
        },
        _optionDatepicker:function(t, e, i) {
            var n = this._getInst(t);
            if (2 == arguments.length && "string" == typeof e) return "defaults" == e ? $.extend({}, $.datepicker._defaults) :n ? "all" == e ? $.extend({}, n.settings) :this._get(n, e) :null;
            var o = e || {};
            if ("string" == typeof e && (o = {}, o[e] = i), n) {
                this._curInst == n && this._hideDatepicker();
                var r = this._getDateDatepicker(t, !0), s = this._getMinMaxDate(n, "min"), a = this._getMinMaxDate(n, "max");
                extendRemove(n.settings, o), null !== s && o.dateFormat !== undefined && o.minDate === undefined && (n.settings.minDate = this._formatDate(n, s)), 
                null !== a && o.dateFormat !== undefined && o.maxDate === undefined && (n.settings.maxDate = this._formatDate(n, a)), 
                this._attachments($(t), n), this._autoSize(n), this._setDate(n, r), this._updateAlternate(n), 
                this._updateDatepicker(n);
            }
        },
        _changeDatepicker:function(t, e, i) {
            this._optionDatepicker(t, e, i);
        },
        _refreshDatepicker:function(t) {
            var e = this._getInst(t);
            e && this._updateDatepicker(e);
        },
        _setDateDatepicker:function(t, e) {
            var i = this._getInst(t);
            i && (this._setDate(i, e), this._updateDatepicker(i), this._updateAlternate(i));
        },
        _getDateDatepicker:function(t, e) {
            var i = this._getInst(t);
            return i && !i.inline && this._setDateFromField(i, e), i ? this._getDate(i) :null;
        },
        _doKeyDown:function(t) {
            var e = $.datepicker._getInst(t.target), i = !0, n = e.dpDiv.is(".ui-datepicker-rtl");
            if (e._keyEvent = !0, $.datepicker._datepickerShowing) switch (t.keyCode) {
              case 9:
                $.datepicker._hideDatepicker(), i = !1;
                break;

              case 13:
                var o = $("td." + $.datepicker._dayOverClass + ":not(." + $.datepicker._currentClass + ")", e.dpDiv);
                o[0] && $.datepicker._selectDay(t.target, e.selectedMonth, e.selectedYear, o[0]);
                var r = $.datepicker._get(e, "onSelect");
                if (r) {
                    var s = $.datepicker._formatDate(e);
                    r.apply(e.input ? e.input[0] :null, [ s, e ]);
                } else $.datepicker._hideDatepicker();
                return !1;

              case 27:
                $.datepicker._hideDatepicker();
                break;

              case 33:
                $.datepicker._adjustDate(t.target, t.ctrlKey ? -$.datepicker._get(e, "stepBigMonths") :-$.datepicker._get(e, "stepMonths"), "M");
                break;

              case 34:
                $.datepicker._adjustDate(t.target, t.ctrlKey ? +$.datepicker._get(e, "stepBigMonths") :+$.datepicker._get(e, "stepMonths"), "M");
                break;

              case 35:
                (t.ctrlKey || t.metaKey) && $.datepicker._clearDate(t.target), i = t.ctrlKey || t.metaKey;
                break;

              case 36:
                (t.ctrlKey || t.metaKey) && $.datepicker._gotoToday(t.target), i = t.ctrlKey || t.metaKey;
                break;

              case 37:
                (t.ctrlKey || t.metaKey) && $.datepicker._adjustDate(t.target, n ? 1 :-1, "D"), 
                i = t.ctrlKey || t.metaKey, t.originalEvent.altKey && $.datepicker._adjustDate(t.target, t.ctrlKey ? -$.datepicker._get(e, "stepBigMonths") :-$.datepicker._get(e, "stepMonths"), "M");
                break;

              case 38:
                (t.ctrlKey || t.metaKey) && $.datepicker._adjustDate(t.target, -7, "D"), i = t.ctrlKey || t.metaKey;
                break;

              case 39:
                (t.ctrlKey || t.metaKey) && $.datepicker._adjustDate(t.target, n ? -1 :1, "D"), 
                i = t.ctrlKey || t.metaKey, t.originalEvent.altKey && $.datepicker._adjustDate(t.target, t.ctrlKey ? +$.datepicker._get(e, "stepBigMonths") :+$.datepicker._get(e, "stepMonths"), "M");
                break;

              case 40:
                (t.ctrlKey || t.metaKey) && $.datepicker._adjustDate(t.target, 7, "D"), i = t.ctrlKey || t.metaKey;
                break;

              default:
                i = !1;
            } else 36 == t.keyCode && t.ctrlKey ? $.datepicker._showDatepicker(this) :i = !1;
            i && (t.preventDefault(), t.stopPropagation());
        },
        _doKeyPress:function(t) {
            var e = $.datepicker._getInst(t.target);
            if ($.datepicker._get(e, "constrainInput")) {
                var i = $.datepicker._possibleChars($.datepicker._get(e, "dateFormat")), n = String.fromCharCode(t.charCode == undefined ? t.keyCode :t.charCode);
                return t.ctrlKey || t.metaKey || " " > n || !i || i.indexOf(n) > -1;
            }
        },
        _doKeyUp:function(t) {
            var e = $.datepicker._getInst(t.target);
            if (e.input.val() != e.lastVal) try {
                var i = $.datepicker.parseDate($.datepicker._get(e, "dateFormat"), e.input ? e.input.val() :null, $.datepicker._getFormatConfig(e));
                i && ($.datepicker._setDateFromField(e), $.datepicker._updateAlternate(e), $.datepicker._updateDatepicker(e));
            } catch (n) {
                $.datepicker.log(n);
            }
            return !0;
        },
        _showDatepicker:function(t) {
            if (t = t.target || t, "input" != t.nodeName.toLowerCase() && (t = $("input", t.parentNode)[0]), 
            !$.datepicker._isDisabledDatepicker(t) && $.datepicker._lastInput != t) {
                var e = $.datepicker._getInst(t);
                $.datepicker._curInst && $.datepicker._curInst != e && ($.datepicker._curInst.dpDiv.stop(!0, !0), 
                e && $.datepicker._datepickerShowing && $.datepicker._hideDatepicker($.datepicker._curInst.input[0]));
                var i = $.datepicker._get(e, "beforeShow"), n = i ? i.apply(t, [ t, e ]) :{};
                if (n !== !1) {
                    extendRemove(e.settings, n), e.lastVal = null, $.datepicker._lastInput = t, $.datepicker._setDateFromField(e), 
                    $.datepicker._inDialog && (t.value = ""), $.datepicker._pos || ($.datepicker._pos = $.datepicker._findPos(t), 
                    $.datepicker._pos[1] += t.offsetHeight);
                    var o = !1;
                    $(t).parents().each(function() {
                        return o |= "fixed" == $(this).css("position"), !o;
                    });
                    var r = {
                        left:$.datepicker._pos[0],
                        top:$.datepicker._pos[1]
                    };
                    if ($.datepicker._pos = null, e.dpDiv.empty(), e.dpDiv.css({
                        position:"absolute",
                        display:"block",
                        top:"-1000px"
                    }), $.datepicker._updateDatepicker(e), r = $.datepicker._checkOffset(e, r, o), e.dpDiv.css({
                        position:$.datepicker._inDialog && $.blockUI ? "static" :o ? "fixed" :"absolute",
                        display:"none",
                        left:r.left + "px",
                        top:r.top + "px"
                    }), !e.inline) {
                        var s = $.datepicker._get(e, "showAnim"), a = $.datepicker._get(e, "duration"), l = function() {
                            var t = e.dpDiv.find("iframe.ui-datepicker-cover");
                            if (t.length) {
                                var i = $.datepicker._getBorders(e.dpDiv);
                                t.css({
                                    left:-i[0],
                                    top:-i[1],
                                    width:e.dpDiv.outerWidth(),
                                    height:e.dpDiv.outerHeight()
                                });
                            }
                        };
                        e.dpDiv.zIndex($(t).zIndex() + 1), $.datepicker._datepickerShowing = !0, $.effects && ($.effects.effect[s] || $.effects[s]) ? e.dpDiv.show(s, $.datepicker._get(e, "showOptions"), a, l) :e.dpDiv[s || "show"](s ? a :null, l), 
                        s && a || l(), e.input.is(":visible") && !e.input.is(":disabled") && e.input.focus(), 
                        $.datepicker._curInst = e;
                    }
                }
            }
        },
        _updateDatepicker:function(t) {
            this.maxRows = 4;
            var e = $.datepicker._getBorders(t.dpDiv);
            instActive = t, t.dpDiv.empty().append(this._generateHTML(t)), this._attachHandlers(t);
            var i = t.dpDiv.find("iframe.ui-datepicker-cover");
            i.length && i.css({
                left:-e[0],
                top:-e[1],
                width:t.dpDiv.outerWidth(),
                height:t.dpDiv.outerHeight()
            }), t.dpDiv.find("." + this._dayOverClass + " a").mouseover();
            var n = this._getNumberOfMonths(t), o = n[1], r = 17;
            if (t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""), 
            o > 1 && t.dpDiv.addClass("ui-datepicker-multi-" + o).css("width", r * o + "em"), 
            t.dpDiv[(1 != n[0] || 1 != n[1] ? "add" :"remove") + "Class"]("ui-datepicker-multi"), 
            t.dpDiv[(this._get(t, "isRTL") ? "add" :"remove") + "Class"]("ui-datepicker-rtl"), 
            t == $.datepicker._curInst && $.datepicker._datepickerShowing && t.input && t.input.is(":visible") && !t.input.is(":disabled") && t.input[0] != document.activeElement && t.input.focus(), 
            t.yearshtml) {
                var s = t.yearshtml;
                setTimeout(function() {
                    s === t.yearshtml && t.yearshtml && t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml), 
                    s = t.yearshtml = null;
                }, 0);
            }
        },
        _getBorders:function(t) {
            var e = function(t) {
                return {
                    thin:1,
                    medium:2,
                    thick:3
                }[t] || t;
            };
            return [ parseFloat(e(t.css("border-left-width"))), parseFloat(e(t.css("border-top-width"))) ];
        },
        _checkOffset:function(t, e, i) {
            var n = t.dpDiv.outerWidth(), o = t.dpDiv.outerHeight(), r = t.input ? t.input.outerWidth() :0, s = t.input ? t.input.outerHeight() :0, a = document.documentElement.clientWidth + (i ? 0 :$(document).scrollLeft()), l = document.documentElement.clientHeight + (i ? 0 :$(document).scrollTop());
            return e.left -= this._get(t, "isRTL") ? n - r :0, e.left -= i && e.left == t.input.offset().left ? $(document).scrollLeft() :0, 
            e.top -= i && e.top == t.input.offset().top + s ? $(document).scrollTop() :0, e.left -= Math.min(e.left, e.left + n > a && a > n ? Math.abs(e.left + n - a) :0), 
            e.top -= Math.min(e.top, e.top + o > l && l > o ? Math.abs(o + s) :0), e;
        },
        _findPos:function(t) {
            for (var e = this._getInst(t), i = this._get(e, "isRTL"); t && ("hidden" == t.type || 1 != t.nodeType || $.expr.filters.hidden(t)); ) t = t[i ? "previousSibling" :"nextSibling"];
            var n = $(t).offset();
            return [ n.left, n.top ];
        },
        _hideDatepicker:function(t) {
            var e = this._curInst;
            if (e && (!t || e == $.data(t, PROP_NAME)) && this._datepickerShowing) {
                var i = this._get(e, "showAnim"), n = this._get(e, "duration"), o = function() {
                    $.datepicker._tidyDialog(e);
                };
                $.effects && ($.effects.effect[i] || $.effects[i]) ? e.dpDiv.hide(i, $.datepicker._get(e, "showOptions"), n, o) :e.dpDiv["slideDown" == i ? "slideUp" :"fadeIn" == i ? "fadeOut" :"hide"](i ? n :null, o), 
                i || o(), this._datepickerShowing = !1;
                var r = this._get(e, "onClose");
                r && r.apply(e.input ? e.input[0] :null, [ e.input ? e.input.val() :"", e ]), this._lastInput = null, 
                this._inDialog && (this._dialogInput.css({
                    position:"absolute",
                    left:"0",
                    top:"-100px"
                }), $.blockUI && ($.unblockUI(), $("body").append(this.dpDiv))), this._inDialog = !1;
            }
        },
        _tidyDialog:function(t) {
            t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar");
        },
        _checkExternalClick:function(t) {
            if ($.datepicker._curInst) {
                var e = $(t.target), i = $.datepicker._getInst(e[0]);
                (e[0].id != $.datepicker._mainDivId && 0 == e.parents("#" + $.datepicker._mainDivId).length && !e.hasClass($.datepicker.markerClassName) && !e.closest("." + $.datepicker._triggerClass).length && $.datepicker._datepickerShowing && (!$.datepicker._inDialog || !$.blockUI) || e.hasClass($.datepicker.markerClassName) && $.datepicker._curInst != i) && $.datepicker._hideDatepicker();
            }
        },
        _adjustDate:function(t, e, i) {
            var n = $(t), o = this._getInst(n[0]);
            this._isDisabledDatepicker(n[0]) || (this._adjustInstDate(o, e + ("M" == i ? this._get(o, "showCurrentAtPos") :0), i), 
            this._updateDatepicker(o));
        },
        _gotoToday:function(t) {
            var e = $(t), i = this._getInst(e[0]);
            if (this._get(i, "gotoCurrent") && i.currentDay) i.selectedDay = i.currentDay, i.drawMonth = i.selectedMonth = i.currentMonth, 
            i.drawYear = i.selectedYear = i.currentYear; else {
                var n = new Date();
                i.selectedDay = n.getDate(), i.drawMonth = i.selectedMonth = n.getMonth(), i.drawYear = i.selectedYear = n.getFullYear();
            }
            this._notifyChange(i), this._adjustDate(e);
        },
        _selectMonthYear:function(t, e, i) {
            var n = $(t), o = this._getInst(n[0]);
            o["selected" + ("M" == i ? "Month" :"Year")] = o["draw" + ("M" == i ? "Month" :"Year")] = parseInt(e.options[e.selectedIndex].value, 10), 
            this._notifyChange(o), this._adjustDate(n);
        },
        _selectDay:function(t, e, i, n) {
            var o = $(t);
            if (!$(n).hasClass(this._unselectableClass) && !this._isDisabledDatepicker(o[0])) {
                var r = this._getInst(o[0]);
                r.selectedDay = r.currentDay = $("a", n).html(), r.selectedMonth = r.currentMonth = e, 
                r.selectedYear = r.currentYear = i, this._selectDate(t, this._formatDate(r, r.currentDay, r.currentMonth, r.currentYear));
            }
        },
        _clearDate:function(t) {
            {
                var e = $(t);
                this._getInst(e[0]);
            }
            this._selectDate(e, "");
        },
        _selectDate:function(t, e) {
            var i = $(t), n = this._getInst(i[0]);
            e = null != e ? e :this._formatDate(n), n.input && n.input.val(e), this._updateAlternate(n);
            var o = this._get(n, "onSelect");
            o ? o.apply(n.input ? n.input[0] :null, [ e, n ]) :n.input && n.input.trigger("change"), 
            n.inline ? this._updateDatepicker(n) :(this._hideDatepicker(), this._lastInput = n.input[0], 
            "object" != typeof n.input[0] && n.input.focus(), this._lastInput = null);
        },
        _updateAlternate:function(t) {
            var e = this._get(t, "altField");
            if (e) {
                var i = this._get(t, "altFormat") || this._get(t, "dateFormat"), n = this._getDate(t), o = this.formatDate(i, n, this._getFormatConfig(t));
                $(e).each(function() {
                    $(this).val(o);
                });
            }
        },
        noWeekends:function(t) {
            var e = t.getDay();
            return [ e > 0 && 6 > e, "" ];
        },
        iso8601Week:function(t) {
            var e = new Date(t.getTime());
            e.setDate(e.getDate() + 4 - (e.getDay() || 7));
            var i = e.getTime();
            return e.setMonth(0), e.setDate(1), Math.floor(Math.round((i - e) / 864e5) / 7) + 1;
        },
        parseDate:function(t, e, i) {
            if (null == t || null == e) throw "Invalid arguments";
            if (e = "object" == typeof e ? e.toString() :e + "", "" == e) return null;
            var n = (i ? i.shortYearCutoff :null) || this._defaults.shortYearCutoff;
            n = "string" != typeof n ? n :new Date().getFullYear() % 100 + parseInt(n, 10);
            for (var o = (i ? i.dayNamesShort :null) || this._defaults.dayNamesShort, r = (i ? i.dayNames :null) || this._defaults.dayNames, s = (i ? i.monthNamesShort :null) || this._defaults.monthNamesShort, a = (i ? i.monthNames :null) || this._defaults.monthNames, l = -1, c = -1, h = -1, u = -1, d = !1, p = function(e) {
                var i = v + 1 < t.length && t.charAt(v + 1) == e;
                return i && v++, i;
            }, f = function(t) {
                var i = p(t), n = "@" == t ? 14 :"!" == t ? 20 :"y" == t && i ? 4 :"o" == t ? 3 :2, o = new RegExp("^\\d{1," + n + "}"), r = e.substring(_).match(o);
                if (!r) throw "Missing number at position " + _;
                return _ += r[0].length, parseInt(r[0], 10);
            }, g = function(t, i, n) {
                var o = $.map(p(t) ? n :i, function(t, e) {
                    return [ [ e, t ] ];
                }).sort(function(t, e) {
                    return -(t[1].length - e[1].length);
                }), r = -1;
                if ($.each(o, function(t, i) {
                    var n = i[1];
                    return e.substr(_, n.length).toLowerCase() == n.toLowerCase() ? (r = i[0], _ += n.length, 
                    !1) :void 0;
                }), -1 != r) return r + 1;
                throw "Unknown name at position " + _;
            }, m = function() {
                if (e.charAt(_) != t.charAt(v)) throw "Unexpected literal at position " + _;
                _++;
            }, _ = 0, v = 0; v < t.length; v++) if (d) "'" != t.charAt(v) || p("'") ? m() :d = !1; else switch (t.charAt(v)) {
              case "d":
                h = f("d");
                break;

              case "D":
                g("D", o, r);
                break;

              case "o":
                u = f("o");
                break;

              case "m":
                c = f("m");
                break;

              case "M":
                c = g("M", s, a);
                break;

              case "y":
                l = f("y");
                break;

              case "@":
                var y = new Date(f("@"));
                l = y.getFullYear(), c = y.getMonth() + 1, h = y.getDate();
                break;

              case "!":
                var y = new Date((f("!") - this._ticksTo1970) / 1e4);
                l = y.getFullYear(), c = y.getMonth() + 1, h = y.getDate();
                break;

              case "'":
                p("'") ? m() :d = !0;
                break;

              default:
                m();
            }
            if (_ < e.length) {
                var b = e.substr(_);
                if (!/^\s+/.test(b)) throw "Extra/unparsed characters found in date: " + b;
            }
            if (-1 == l ? l = new Date().getFullYear() :100 > l && (l += new Date().getFullYear() - new Date().getFullYear() % 100 + (n >= l ? 0 :-100)), 
            u > -1) for (c = 1, h = u; ;) {
                var w = this._getDaysInMonth(l, c - 1);
                if (w >= h) break;
                c++, h -= w;
            }
            var y = this._daylightSavingAdjust(new Date(l, c - 1, h));
            if (y.getFullYear() != l || y.getMonth() + 1 != c || y.getDate() != h) throw "Invalid date";
            return y;
        },
        ATOM:"yy-mm-dd",
        COOKIE:"D, dd M yy",
        ISO_8601:"yy-mm-dd",
        RFC_822:"D, d M y",
        RFC_850:"DD, dd-M-y",
        RFC_1036:"D, d M y",
        RFC_1123:"D, d M yy",
        RFC_2822:"D, d M yy",
        RSS:"D, d M y",
        TICKS:"!",
        TIMESTAMP:"@",
        W3C:"yy-mm-dd",
        _ticksTo1970:24 * (718685 + Math.floor(492.5) - Math.floor(19.7) + Math.floor(4.925)) * 60 * 60 * 1e7,
        formatDate:function(t, e, i) {
            if (!e) return "";
            var n = (i ? i.dayNamesShort :null) || this._defaults.dayNamesShort, o = (i ? i.dayNames :null) || this._defaults.dayNames, r = (i ? i.monthNamesShort :null) || this._defaults.monthNamesShort, s = (i ? i.monthNames :null) || this._defaults.monthNames, a = function(e) {
                var i = d + 1 < t.length && t.charAt(d + 1) == e;
                return i && d++, i;
            }, l = function(t, e, i) {
                var n = "" + e;
                if (a(t)) for (;n.length < i; ) n = "0" + n;
                return n;
            }, c = function(t, e, i, n) {
                return a(t) ? n[e] :i[e];
            }, h = "", u = !1;
            if (e) for (var d = 0; d < t.length; d++) if (u) "'" != t.charAt(d) || a("'") ? h += t.charAt(d) :u = !1; else switch (t.charAt(d)) {
              case "d":
                h += l("d", e.getDate(), 2);
                break;

              case "D":
                h += c("D", e.getDay(), n, o);
                break;

              case "o":
                h += l("o", Math.round((new Date(e.getFullYear(), e.getMonth(), e.getDate()).getTime() - new Date(e.getFullYear(), 0, 0).getTime()) / 864e5), 3);
                break;

              case "m":
                h += l("m", e.getMonth() + 1, 2);
                break;

              case "M":
                h += c("M", e.getMonth(), r, s);
                break;

              case "y":
                h += a("y") ? e.getFullYear() :(e.getYear() % 100 < 10 ? "0" :"") + e.getYear() % 100;
                break;

              case "@":
                h += e.getTime();
                break;

              case "!":
                h += 1e4 * e.getTime() + this._ticksTo1970;
                break;

              case "'":
                a("'") ? h += "'" :u = !0;
                break;

              default:
                h += t.charAt(d);
            }
            return h;
        },
        _possibleChars:function(t) {
            for (var e = "", i = !1, n = function(e) {
                var i = o + 1 < t.length && t.charAt(o + 1) == e;
                return i && o++, i;
            }, o = 0; o < t.length; o++) if (i) "'" != t.charAt(o) || n("'") ? e += t.charAt(o) :i = !1; else switch (t.charAt(o)) {
              case "d":
              case "m":
              case "y":
              case "@":
                e += "0123456789";
                break;

              case "D":
              case "M":
                return null;

              case "'":
                n("'") ? e += "'" :i = !0;
                break;

              default:
                e += t.charAt(o);
            }
            return e;
        },
        _get:function(t, e) {
            return t.settings[e] !== undefined ? t.settings[e] :this._defaults[e];
        },
        _setDateFromField:function(t, e) {
            if (t.input.val() != t.lastVal) {
                var i, n, o = this._get(t, "dateFormat"), r = t.lastVal = t.input ? t.input.val() :null;
                i = n = this._getDefaultDate(t);
                var s = this._getFormatConfig(t);
                try {
                    i = this.parseDate(o, r, s) || n;
                } catch (a) {
                    this.log(a), r = e ? "" :r;
                }
                t.selectedDay = i.getDate(), t.drawMonth = t.selectedMonth = i.getMonth(), t.drawYear = t.selectedYear = i.getFullYear(), 
                t.currentDay = r ? i.getDate() :0, t.currentMonth = r ? i.getMonth() :0, t.currentYear = r ? i.getFullYear() :0, 
                this._adjustInstDate(t);
            }
        },
        _getDefaultDate:function(t) {
            return this._restrictMinMax(t, this._determineDate(t, this._get(t, "defaultDate"), new Date()));
        },
        _determineDate:function(t, e, i) {
            var n = function(t) {
                var e = new Date();
                return e.setDate(e.getDate() + t), e;
            }, o = function(e) {
                try {
                    return $.datepicker.parseDate($.datepicker._get(t, "dateFormat"), e, $.datepicker._getFormatConfig(t));
                } catch (i) {}
                for (var n = (e.toLowerCase().match(/^c/) ? $.datepicker._getDate(t) :null) || new Date(), o = n.getFullYear(), r = n.getMonth(), s = n.getDate(), a = /([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g, l = a.exec(e); l; ) {
                    switch (l[2] || "d") {
                      case "d":
                      case "D":
                        s += parseInt(l[1], 10);
                        break;

                      case "w":
                      case "W":
                        s += 7 * parseInt(l[1], 10);
                        break;

                      case "m":
                      case "M":
                        r += parseInt(l[1], 10), s = Math.min(s, $.datepicker._getDaysInMonth(o, r));
                        break;

                      case "y":
                      case "Y":
                        o += parseInt(l[1], 10), s = Math.min(s, $.datepicker._getDaysInMonth(o, r));
                    }
                    l = a.exec(e);
                }
                return new Date(o, r, s);
            }, r = null == e || "" === e ? i :"string" == typeof e ? o(e) :"number" == typeof e ? isNaN(e) ? i :n(e) :new Date(e.getTime());
            return r = r && "Invalid Date" == r.toString() ? i :r, r && (r.setHours(0), r.setMinutes(0), 
            r.setSeconds(0), r.setMilliseconds(0)), this._daylightSavingAdjust(r);
        },
        _daylightSavingAdjust:function(t) {
            return t ? (t.setHours(t.getHours() > 12 ? t.getHours() + 2 :0), t) :null;
        },
        _setDate:function(t, e, i) {
            var n = !e, o = t.selectedMonth, r = t.selectedYear, s = this._restrictMinMax(t, this._determineDate(t, e, new Date()));
            t.selectedDay = t.currentDay = s.getDate(), t.drawMonth = t.selectedMonth = t.currentMonth = s.getMonth(), 
            t.drawYear = t.selectedYear = t.currentYear = s.getFullYear(), o == t.selectedMonth && r == t.selectedYear || i || this._notifyChange(t), 
            this._adjustInstDate(t), t.input && t.input.val(n ? "" :this._formatDate(t));
        },
        _getDate:function(t) {
            var e = !t.currentYear || t.input && "" == t.input.val() ? null :this._daylightSavingAdjust(new Date(t.currentYear, t.currentMonth, t.currentDay));
            return e;
        },
        _attachHandlers:function(t) {
            var e = this._get(t, "stepMonths"), i = "#" + t.id.replace(/\\\\/g, "\\");
            t.dpDiv.find("[data-handler]").map(function() {
                var t = {
                    prev:function() {
                        window["DP_jQuery_" + dpuuid].datepicker._adjustDate(i, -e, "M");
                    },
                    next:function() {
                        window["DP_jQuery_" + dpuuid].datepicker._adjustDate(i, +e, "M");
                    },
                    hide:function() {
                        window["DP_jQuery_" + dpuuid].datepicker._hideDatepicker();
                    },
                    today:function() {
                        window["DP_jQuery_" + dpuuid].datepicker._gotoToday(i);
                    },
                    selectDay:function() {
                        return window["DP_jQuery_" + dpuuid].datepicker._selectDay(i, +this.getAttribute("data-month"), +this.getAttribute("data-year"), this), 
                        !1;
                    },
                    selectMonth:function() {
                        return window["DP_jQuery_" + dpuuid].datepicker._selectMonthYear(i, this, "M"), 
                        !1;
                    },
                    selectYear:function() {
                        return window["DP_jQuery_" + dpuuid].datepicker._selectMonthYear(i, this, "Y"), 
                        !1;
                    }
                };
                $(this).bind(this.getAttribute("data-event"), t[this.getAttribute("data-handler")]);
            });
        },
        _generateHTML:function(t) {
            var e = new Date();
            e = this._daylightSavingAdjust(new Date(e.getFullYear(), e.getMonth(), e.getDate()));
            var i = this._get(t, "isRTL"), n = this._get(t, "showButtonPanel"), o = this._get(t, "hideIfNoPrevNext"), r = this._get(t, "navigationAsDateFormat"), s = this._getNumberOfMonths(t), a = this._get(t, "showCurrentAtPos"), l = this._get(t, "stepMonths"), c = 1 != s[0] || 1 != s[1], h = this._daylightSavingAdjust(t.currentDay ? new Date(t.currentYear, t.currentMonth, t.currentDay) :new Date(9999, 9, 9)), u = this._getMinMaxDate(t, "min"), d = this._getMinMaxDate(t, "max"), p = t.drawMonth - a, f = t.drawYear;
            if (0 > p && (p += 12, f--), d) {
                var g = this._daylightSavingAdjust(new Date(d.getFullYear(), d.getMonth() - s[0] * s[1] + 1, d.getDate()));
                for (g = u && u > g ? u :g; this._daylightSavingAdjust(new Date(f, p, 1)) > g; ) p--, 
                0 > p && (p = 11, f--);
            }
            t.drawMonth = p, t.drawYear = f;
            var m = this._get(t, "prevText");
            m = r ? this.formatDate(m, this._daylightSavingAdjust(new Date(f, p - l, 1)), this._getFormatConfig(t)) :m;
            var _ = this._canAdjustMonth(t, -1, f, p) ? '<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="' + m + '"><span class="ui-icon ui-icon-circle-triangle-' + (i ? "e" :"w") + '">' + m + "</span></a>" :o ? "" :'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="' + m + '"><span class="ui-icon ui-icon-circle-triangle-' + (i ? "e" :"w") + '">' + m + "</span></a>", v = this._get(t, "nextText");
            v = r ? this.formatDate(v, this._daylightSavingAdjust(new Date(f, p + l, 1)), this._getFormatConfig(t)) :v;
            var y = this._canAdjustMonth(t, 1, f, p) ? '<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="' + v + '"><span class="ui-icon ui-icon-circle-triangle-' + (i ? "w" :"e") + '">' + v + "</span></a>" :o ? "" :'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="' + v + '"><span class="ui-icon ui-icon-circle-triangle-' + (i ? "w" :"e") + '">' + v + "</span></a>", b = this._get(t, "currentText"), w = this._get(t, "gotoCurrent") && t.currentDay ? h :e;
            b = r ? this.formatDate(b, w, this._getFormatConfig(t)) :b;
            var C = t.inline ? "" :'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">' + this._get(t, "closeText") + "</button>", T = n ? '<div class="ui-datepicker-buttonpane ui-widget-content">' + (i ? C :"") + (this._isInRange(t, w) ? '<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">' + b + "</button>" :"") + (i ? "" :C) + "</div>" :"", D = parseInt(this._get(t, "firstDay"), 10);
            D = isNaN(D) ? 0 :D;
            for (var E = this._get(t, "showWeek"), x = this._get(t, "dayNames"), S = (this._get(t, "dayNamesShort"), 
            this._get(t, "dayNamesMin")), O = this._get(t, "monthNames"), k = this._get(t, "monthNamesShort"), I = this._get(t, "beforeShowDay"), R = this._get(t, "showOtherMonths"), P = this._get(t, "selectOtherMonths"), N = (this._get(t, "calculateWeek") || this.iso8601Week, 
            this._getDefaultDate(t)), A = "", M = 0; M < s[0]; M++) {
                var L = "";
                this.maxRows = 4;
                for (var B = 0; B < s[1]; B++) {
                    var z = this._daylightSavingAdjust(new Date(f, p, t.selectedDay)), K = " ui-corner-all", F = "";
                    if (c) {
                        if (F += '<div class="ui-datepicker-group', s[1] > 1) switch (B) {
                          case 0:
                            F += " ui-datepicker-group-first", K = " ui-corner-" + (i ? "right" :"left");
                            break;

                          case s[1] - 1:
                            F += " ui-datepicker-group-last", K = " ui-corner-" + (i ? "left" :"right");
                            break;

                          default:
                            F += " ui-datepicker-group-middle", K = "";
                        }
                        F += '">';
                    }
                    F += '<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix' + K + '">' + (/all|left/.test(K) && 0 == M ? i ? y :_ :"") + (/all|right/.test(K) && 0 == M ? i ? _ :y :"") + this._generateMonthYearHeader(t, p, f, u, d, M > 0 || B > 0, O, k) + '</div><table class="ui-datepicker-calendar"><thead><tr>';
                    for (var j = E ? '<th class="ui-datepicker-week-col">' + this._get(t, "weekHeader") + "</th>" :"", H = 0; 7 > H; H++) {
                        var G = (H + D) % 7;
                        j += "<th" + ((H + D + 6) % 7 >= 5 ? ' class="ui-datepicker-week-end"' :"") + '><span title="' + x[G] + '">' + S[G] + "</span></th>";
                    }
                    F += j + "</tr></thead><tbody>";
                    var U = this._getDaysInMonth(f, p);
                    f == t.selectedYear && p == t.selectedMonth && (t.selectedDay = Math.min(t.selectedDay, U));
                    var V = (this._getFirstDayOfMonth(f, p) - D + 7) % 7, W = Math.ceil((V + U) / 7), q = c ? this.maxRows > W ? this.maxRows :W :W;
                    this.maxRows = q;
                    for (var Y = this._daylightSavingAdjust(new Date(f, p, 1 - V)), J = 0; q > J; J++) {
                        F += "<tr>";
                        for (var X = E ? '<td class="ui-datepicker-week-col">' + this._get(t, "calculateWeek")(Y) + "</td>" :"", H = 0; 7 > H; H++) {
                            var Z = I ? I.apply(t.input ? t.input[0] :null, [ Y ]) :[ !0, "" ], Q = Y.getMonth() != p, te = Q && !P || !Z[0] || u && u > Y || d && Y > d;
                            X += '<td class="' + ((H + D + 6) % 7 >= 5 ? " ui-datepicker-week-end" :"") + (Q ? " ui-datepicker-other-month" :"") + (Y.getTime() == z.getTime() && p == t.selectedMonth && t._keyEvent || N.getTime() == Y.getTime() && N.getTime() == z.getTime() ? " " + this._dayOverClass :"") + (te ? " " + this._unselectableClass + " ui-state-disabled" :"") + (Q && !R ? "" :" " + Z[1] + (Y.getTime() == h.getTime() ? " " + this._currentClass :"") + (Y.getTime() == e.getTime() ? " ui-datepicker-today" :"")) + '"' + (Q && !R || !Z[2] ? "" :' title="' + Z[2] + '"') + (te ? "" :' data-handler="selectDay" data-event="click" data-month="' + Y.getMonth() + '" data-year="' + Y.getFullYear() + '"') + ">" + (Q && !R ? "&#xa0;" :te ? '<span class="ui-state-default">' + Y.getDate() + "</span>" :'<a class="ui-state-default' + (Y.getTime() == e.getTime() ? " ui-state-highlight" :"") + (Y.getTime() == h.getTime() ? " ui-state-active" :"") + (Q ? " ui-priority-secondary" :"") + '" href="#">' + Y.getDate() + "</a>") + "</td>", 
                            Y.setDate(Y.getDate() + 1), Y = this._daylightSavingAdjust(Y);
                        }
                        F += X + "</tr>";
                    }
                    p++, p > 11 && (p = 0, f++), F += "</tbody></table>" + (c ? "</div>" + (s[0] > 0 && B == s[1] - 1 ? '<div class="ui-datepicker-row-break"></div>' :"") :""), 
                    L += F;
                }
                A += L;
            }
            return A += T + ($.ui.ie6 && !t.inline ? '<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>' :""), 
            t._keyEvent = !1, A;
        },
        _generateMonthYearHeader:function(t, e, i, n, o, r, s, a) {
            var l = this._get(t, "changeMonth"), c = this._get(t, "changeYear"), h = this._get(t, "showMonthAfterYear"), u = '<div class="ui-datepicker-title">', d = "";
            if (r || !l) d += '<span class="ui-datepicker-month">' + s[e] + "</span>"; else {
                var p = n && n.getFullYear() == i, f = o && o.getFullYear() == i;
                d += '<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';
                for (var g = 0; 12 > g; g++) (!p || g >= n.getMonth()) && (!f || g <= o.getMonth()) && (d += '<option value="' + g + '"' + (g == e ? ' selected="selected"' :"") + ">" + a[g] + "</option>");
                d += "</select>";
            }
            if (h || (u += d + (!r && l && c ? "" :"&#xa0;")), !t.yearshtml) if (t.yearshtml = "", 
            r || !c) u += '<span class="ui-datepicker-year">' + i + "</span>"; else {
                var m = this._get(t, "yearRange").split(":"), _ = new Date().getFullYear(), v = function(t) {
                    var e = t.match(/c[+-].*/) ? i + parseInt(t.substring(1), 10) :t.match(/[+-].*/) ? _ + parseInt(t, 10) :parseInt(t, 10);
                    return isNaN(e) ? _ :e;
                }, y = v(m[0]), b = Math.max(y, v(m[1] || ""));
                for (y = n ? Math.max(y, n.getFullYear()) :y, b = o ? Math.min(b, o.getFullYear()) :b, 
                t.yearshtml += '<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">'; b >= y; y++) t.yearshtml += '<option value="' + y + '"' + (y == i ? ' selected="selected"' :"") + ">" + y + "</option>";
                t.yearshtml += "</select>", u += t.yearshtml, t.yearshtml = null;
            }
            return u += this._get(t, "yearSuffix"), h && (u += (!r && l && c ? "" :"&#xa0;") + d), 
            u += "</div>";
        },
        _adjustInstDate:function(t, e, i) {
            var n = t.drawYear + ("Y" == i ? e :0), o = t.drawMonth + ("M" == i ? e :0), r = Math.min(t.selectedDay, this._getDaysInMonth(n, o)) + ("D" == i ? e :0), s = this._restrictMinMax(t, this._daylightSavingAdjust(new Date(n, o, r)));
            t.selectedDay = s.getDate(), t.drawMonth = t.selectedMonth = s.getMonth(), t.drawYear = t.selectedYear = s.getFullYear(), 
            ("M" == i || "Y" == i) && this._notifyChange(t);
        },
        _restrictMinMax:function(t, e) {
            var i = this._getMinMaxDate(t, "min"), n = this._getMinMaxDate(t, "max"), o = i && i > e ? i :e;
            return o = n && o > n ? n :o;
        },
        _notifyChange:function(t) {
            var e = this._get(t, "onChangeMonthYear");
            e && e.apply(t.input ? t.input[0] :null, [ t.selectedYear, t.selectedMonth + 1, t ]);
        },
        _getNumberOfMonths:function(t) {
            var e = this._get(t, "numberOfMonths");
            return null == e ? [ 1, 1 ] :"number" == typeof e ? [ 1, e ] :e;
        },
        _getMinMaxDate:function(t, e) {
            return this._determineDate(t, this._get(t, e + "Date"), null);
        },
        _getDaysInMonth:function(t, e) {
            return 32 - this._daylightSavingAdjust(new Date(t, e, 32)).getDate();
        },
        _getFirstDayOfMonth:function(t, e) {
            return new Date(t, e, 1).getDay();
        },
        _canAdjustMonth:function(t, e, i, n) {
            var o = this._getNumberOfMonths(t), r = this._daylightSavingAdjust(new Date(i, n + (0 > e ? e :o[0] * o[1]), 1));
            return 0 > e && r.setDate(this._getDaysInMonth(r.getFullYear(), r.getMonth())), 
            this._isInRange(t, r);
        },
        _isInRange:function(t, e) {
            var i = this._getMinMaxDate(t, "min"), n = this._getMinMaxDate(t, "max");
            return (!i || e.getTime() >= i.getTime()) && (!n || e.getTime() <= n.getTime());
        },
        _getFormatConfig:function(t) {
            var e = this._get(t, "shortYearCutoff");
            return e = "string" != typeof e ? e :new Date().getFullYear() % 100 + parseInt(e, 10), 
            {
                shortYearCutoff:e,
                dayNamesShort:this._get(t, "dayNamesShort"),
                dayNames:this._get(t, "dayNames"),
                monthNamesShort:this._get(t, "monthNamesShort"),
                monthNames:this._get(t, "monthNames")
            };
        },
        _formatDate:function(t, e, i, n) {
            e || (t.currentDay = t.selectedDay, t.currentMonth = t.selectedMonth, t.currentYear = t.selectedYear);
            var o = e ? "object" == typeof e ? e :this._daylightSavingAdjust(new Date(n, i, e)) :this._daylightSavingAdjust(new Date(t.currentYear, t.currentMonth, t.currentDay));
            return this.formatDate(this._get(t, "dateFormat"), o, this._getFormatConfig(t));
        }
    }), $.fn.datepicker = function(t) {
        if (!this.length) return this;
        $.datepicker.initialized || ($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv), 
        $.datepicker.initialized = !0);
        var e = Array.prototype.slice.call(arguments, 1);
        return "string" != typeof t || "isDisabled" != t && "getDate" != t && "widget" != t ? "option" == t && 2 == arguments.length && "string" == typeof arguments[1] ? $.datepicker["_" + t + "Datepicker"].apply($.datepicker, [ this[0] ].concat(e)) :this.each(function() {
            "string" == typeof t ? $.datepicker["_" + t + "Datepicker"].apply($.datepicker, [ this ].concat(e)) :$.datepicker._attachDatepicker(this, t);
        }) :$.datepicker["_" + t + "Datepicker"].apply($.datepicker, [ this[0] ].concat(e));
    }, $.datepicker = new Datepicker(), $.datepicker.initialized = !1, $.datepicker.uuid = new Date().getTime(), 
    $.datepicker.version = "1.9.2", window["DP_jQuery_" + dpuuid] = $;
}(jQuery), function(t, e) {
    var i = "ui-dialog ui-widget ui-widget-content ui-corner-all ", n = {
        buttons:!0,
        height:!0,
        maxHeight:!0,
        maxWidth:!0,
        minHeight:!0,
        minWidth:!0,
        width:!0
    }, o = {
        maxHeight:!0,
        maxWidth:!0,
        minHeight:!0,
        minWidth:!0
    };
    t.widget("ui.dialog", {
        version:"1.9.2",
        options:{
            autoOpen:!0,
            buttons:{},
            closeOnEscape:!0,
            closeText:"close",
            dialogClass:"",
            draggable:!0,
            hide:null,
            height:"auto",
            maxHeight:!1,
            maxWidth:!1,
            minHeight:150,
            minWidth:150,
            modal:!1,
            position:{
                my:"center",
                at:"center",
                of:window,
                collision:"fit",
                using:function(e) {
                    var i = t(this).css(e).offset().top;
                    0 > i && t(this).css("top", e.top - i);
                }
            },
            resizable:!0,
            show:null,
            stack:!0,
            title:"",
            width:300,
            zIndex:1e3
        },
        _create:function() {
            this.originalTitle = this.element.attr("title"), "string" != typeof this.originalTitle && (this.originalTitle = ""), 
            this.oldPosition = {
                parent:this.element.parent(),
                index:this.element.parent().children().index(this.element)
            }, this.options.title = this.options.title || this.originalTitle;
            var e, n, o, r, s, a = this, l = this.options, c = l.title || "&#160;";
            e = (this.uiDialog = t("<div>")).addClass(i + l.dialogClass).css({
                display:"none",
                outline:0,
                zIndex:l.zIndex
            }).attr("tabIndex", -1).keydown(function(e) {
                l.closeOnEscape && !e.isDefaultPrevented() && e.keyCode && e.keyCode === t.ui.keyCode.ESCAPE && (a.close(e), 
                e.preventDefault());
            }).mousedown(function(t) {
                a.moveToTop(!1, t);
            }).appendTo("body"), this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(e), 
            n = (this.uiDialogTitlebar = t("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown", function() {
                e.focus();
            }).prependTo(e), o = t("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role", "button").click(function(t) {
                t.preventDefault(), a.close(t);
            }).appendTo(n), (this.uiDialogTitlebarCloseText = t("<span>")).addClass("ui-icon ui-icon-closethick").text(l.closeText).appendTo(o), 
            r = t("<span>").uniqueId().addClass("ui-dialog-title").html(c).prependTo(n), s = (this.uiDialogButtonPane = t("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"), 
            (this.uiButtonSet = t("<div>")).addClass("ui-dialog-buttonset").appendTo(s), e.attr({
                role:"dialog",
                "aria-labelledby":r.attr("id")
            }), n.find("*").add(n).disableSelection(), this._hoverable(o), this._focusable(o), 
            l.draggable && t.fn.draggable && this._makeDraggable(), l.resizable && t.fn.resizable && this._makeResizable(), 
            this._createButtons(l.buttons), this._isOpen = !1, t.fn.bgiframe && e.bgiframe(), 
            this._on(e, {
                keydown:function(i) {
                    if (l.modal && i.keyCode === t.ui.keyCode.TAB) {
                        var n = t(":tabbable", e), o = n.filter(":first"), r = n.filter(":last");
                        return i.target !== r[0] || i.shiftKey ? i.target === o[0] && i.shiftKey ? (r.focus(1), 
                        !1) :void 0 :(o.focus(1), !1);
                    }
                }
            });
        },
        _init:function() {
            this.options.autoOpen && this.open();
        },
        _destroy:function() {
            var t, e = this.oldPosition;
            this.overlay && this.overlay.destroy(), this.uiDialog.hide(), this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"), 
            this.uiDialog.remove(), this.originalTitle && this.element.attr("title", this.originalTitle), 
            t = e.parent.children().eq(e.index), t.length && t[0] !== this.element[0] ? t.before(this.element) :e.parent.append(this.element);
        },
        widget:function() {
            return this.uiDialog;
        },
        close:function(e) {
            var i, n, o = this;
            if (this._isOpen && !1 !== this._trigger("beforeClose", e)) return this._isOpen = !1, 
            this.overlay && this.overlay.destroy(), this.options.hide ? this._hide(this.uiDialog, this.options.hide, function() {
                o._trigger("close", e);
            }) :(this.uiDialog.hide(), this._trigger("close", e)), t.ui.dialog.overlay.resize(), 
            this.options.modal && (i = 0, t(".ui-dialog").each(function() {
                this !== o.uiDialog[0] && (n = t(this).css("z-index"), isNaN(n) || (i = Math.max(i, n)));
            }), t.ui.dialog.maxZ = i), this;
        },
        isOpen:function() {
            return this._isOpen;
        },
        moveToTop:function(e, i) {
            var n, o = this.options;
            return o.modal && !e || !o.stack && !o.modal ? this._trigger("focus", i) :(o.zIndex > t.ui.dialog.maxZ && (t.ui.dialog.maxZ = o.zIndex), 
            this.overlay && (t.ui.dialog.maxZ += 1, t.ui.dialog.overlay.maxZ = t.ui.dialog.maxZ, 
            this.overlay.$el.css("z-index", t.ui.dialog.overlay.maxZ)), n = {
                scrollTop:this.element.scrollTop(),
                scrollLeft:this.element.scrollLeft()
            }, t.ui.dialog.maxZ += 1, this.uiDialog.css("z-index", t.ui.dialog.maxZ), this.element.attr(n), 
            this._trigger("focus", i), this);
        },
        open:function() {
            if (!this._isOpen) {
                var e, i = this.options, n = this.uiDialog;
                return this._size(), this._position(i.position), n.show(i.show), this.overlay = i.modal ? new t.ui.dialog.overlay(this) :null, 
                this.moveToTop(!0), e = this.element.find(":tabbable"), e.length || (e = this.uiDialogButtonPane.find(":tabbable"), 
                e.length || (e = n)), e.eq(0).focus(), this._isOpen = !0, this._trigger("open"), 
                this;
            }
        },
        _createButtons:function(e) {
            var i = this, n = !1;
            this.uiDialogButtonPane.remove(), this.uiButtonSet.empty(), "object" == typeof e && null !== e && t.each(e, function() {
                return !(n = !0);
            }), n ? (t.each(e, function(e, n) {
                var o, r;
                n = t.isFunction(n) ? {
                    click:n,
                    text:e
                } :n, n = t.extend({
                    type:"button"
                }, n), r = n.click, n.click = function() {
                    r.apply(i.element[0], arguments);
                }, o = t("<button></button>", n).appendTo(i.uiButtonSet), t.fn.button && o.button();
            }), this.uiDialog.addClass("ui-dialog-buttons"), this.uiDialogButtonPane.appendTo(this.uiDialog)) :this.uiDialog.removeClass("ui-dialog-buttons");
        },
        _makeDraggable:function() {
            function e(t) {
                return {
                    position:t.position,
                    offset:t.offset
                };
            }
            var i = this, n = this.options;
            this.uiDialog.draggable({
                cancel:".ui-dialog-content, .ui-dialog-titlebar-close",
                handle:".ui-dialog-titlebar",
                containment:"document",
                start:function(n, o) {
                    t(this).addClass("ui-dialog-dragging"), i._trigger("dragStart", n, e(o));
                },
                drag:function(t, n) {
                    i._trigger("drag", t, e(n));
                },
                stop:function(o, r) {
                    n.position = [ r.position.left - i.document.scrollLeft(), r.position.top - i.document.scrollTop() ], 
                    t(this).removeClass("ui-dialog-dragging"), i._trigger("dragStop", o, e(r)), t.ui.dialog.overlay.resize();
                }
            });
        },
        _makeResizable:function(i) {
            function n(t) {
                return {
                    originalPosition:t.originalPosition,
                    originalSize:t.originalSize,
                    position:t.position,
                    size:t.size
                };
            }
            i = i === e ? this.options.resizable :i;
            var o = this, r = this.options, s = this.uiDialog.css("position"), a = "string" == typeof i ? i :"n,e,s,w,se,sw,ne,nw";
            this.uiDialog.resizable({
                cancel:".ui-dialog-content",
                containment:"document",
                alsoResize:this.element,
                maxWidth:r.maxWidth,
                maxHeight:r.maxHeight,
                minWidth:r.minWidth,
                minHeight:this._minHeight(),
                handles:a,
                start:function(e, i) {
                    t(this).addClass("ui-dialog-resizing"), o._trigger("resizeStart", e, n(i));
                },
                resize:function(t, e) {
                    o._trigger("resize", t, n(e));
                },
                stop:function(e, i) {
                    t(this).removeClass("ui-dialog-resizing"), r.height = t(this).height(), r.width = t(this).width(), 
                    o._trigger("resizeStop", e, n(i)), t.ui.dialog.overlay.resize();
                }
            }).css("position", s).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se");
        },
        _minHeight:function() {
            var t = this.options;
            return "auto" === t.height ? t.minHeight :Math.min(t.minHeight, t.height);
        },
        _position:function(e) {
            var i, n = [], o = [ 0, 0 ];
            e ? (("string" == typeof e || "object" == typeof e && "0" in e) && (n = e.split ? e.split(" ") :[ e[0], e[1] ], 
            1 === n.length && (n[1] = n[0]), t.each([ "left", "top" ], function(t, e) {
                +n[t] === n[t] && (o[t] = n[t], n[t] = e);
            }), e = {
                my:n[0] + (o[0] < 0 ? o[0] :"+" + o[0]) + " " + n[1] + (o[1] < 0 ? o[1] :"+" + o[1]),
                at:n.join(" ")
            }), e = t.extend({}, t.ui.dialog.prototype.options.position, e)) :e = t.ui.dialog.prototype.options.position, 
            i = this.uiDialog.is(":visible"), i || this.uiDialog.show(), this.uiDialog.position(e), 
            i || this.uiDialog.hide();
        },
        _setOptions:function(e) {
            var i = this, r = {}, s = !1;
            t.each(e, function(t, e) {
                i._setOption(t, e), t in n && (s = !0), t in o && (r[t] = e);
            }), s && this._size(), this.uiDialog.is(":data(resizable)") && this.uiDialog.resizable("option", r);
        },
        _setOption:function(e, n) {
            var o, r, s = this.uiDialog;
            switch (e) {
              case "buttons":
                this._createButtons(n);
                break;

              case "closeText":
                this.uiDialogTitlebarCloseText.text("" + n);
                break;

              case "dialogClass":
                s.removeClass(this.options.dialogClass).addClass(i + n);
                break;

              case "disabled":
                n ? s.addClass("ui-dialog-disabled") :s.removeClass("ui-dialog-disabled");
                break;

              case "draggable":
                o = s.is(":data(draggable)"), o && !n && s.draggable("destroy"), !o && n && this._makeDraggable();
                break;

              case "position":
                this._position(n);
                break;

              case "resizable":
                r = s.is(":data(resizable)"), r && !n && s.resizable("destroy"), r && "string" == typeof n && s.resizable("option", "handles", n), 
                r || n === !1 || this._makeResizable(n);
                break;

              case "title":
                t(".ui-dialog-title", this.uiDialogTitlebar).html("" + (n || "&#160;"));
            }
            this._super(e, n);
        },
        _size:function() {
            var e, i, n, o = this.options, r = this.uiDialog.is(":visible");
            this.element.show().css({
                width:"auto",
                minHeight:0,
                height:0
            }), o.minWidth > o.width && (o.width = o.minWidth), e = this.uiDialog.css({
                height:"auto",
                width:o.width
            }).outerHeight(), i = Math.max(0, o.minHeight - e), "auto" === o.height ? t.support.minHeight ? this.element.css({
                minHeight:i,
                height:"auto"
            }) :(this.uiDialog.show(), n = this.element.css("height", "auto").height(), r || this.uiDialog.hide(), 
            this.element.height(Math.max(n, i))) :this.element.height(Math.max(o.height - e, 0)), 
            this.uiDialog.is(":data(resizable)") && this.uiDialog.resizable("option", "minHeight", this._minHeight());
        }
    }), t.extend(t.ui.dialog, {
        uuid:0,
        maxZ:0,
        getTitleId:function(t) {
            var e = t.attr("id");
            return e || (this.uuid += 1, e = this.uuid), "ui-dialog-title-" + e;
        },
        overlay:function(e) {
            this.$el = t.ui.dialog.overlay.create(e);
        }
    }), t.extend(t.ui.dialog.overlay, {
        instances:[],
        oldInstances:[],
        maxZ:0,
        events:t.map("focus,mousedown,mouseup,keydown,keypress,click".split(","), function(t) {
            return t + ".dialog-overlay";
        }).join(" "),
        create:function(e) {
            0 === this.instances.length && (setTimeout(function() {
                t.ui.dialog.overlay.instances.length && t(document).bind(t.ui.dialog.overlay.events, function(e) {
                    return t(e.target).zIndex() < t.ui.dialog.overlay.maxZ ? !1 :void 0;
                });
            }, 1), t(window).bind("resize.dialog-overlay", t.ui.dialog.overlay.resize));
            var i = this.oldInstances.pop() || t("<div>").addClass("ui-widget-overlay");
            return t(document).bind("keydown.dialog-overlay", function(n) {
                var o = t.ui.dialog.overlay.instances;
                0 !== o.length && o[o.length - 1] === i && e.options.closeOnEscape && !n.isDefaultPrevented() && n.keyCode && n.keyCode === t.ui.keyCode.ESCAPE && (e.close(n), 
                n.preventDefault());
            }), i.appendTo(document.body).css({
                width:this.width(),
                height:this.height()
            }), t.fn.bgiframe && i.bgiframe(), this.instances.push(i), i;
        },
        destroy:function(e) {
            var i = t.inArray(e, this.instances), n = 0;
            -1 !== i && this.oldInstances.push(this.instances.splice(i, 1)[0]), 0 === this.instances.length && t([ document, window ]).unbind(".dialog-overlay"), 
            e.height(0).width(0).remove(), t.each(this.instances, function() {
                n = Math.max(n, this.css("z-index"));
            }), this.maxZ = n;
        },
        height:function() {
            var e, i;
            return t.ui.ie ? (e = Math.max(document.documentElement.scrollHeight, document.body.scrollHeight), 
            i = Math.max(document.documentElement.offsetHeight, document.body.offsetHeight), 
            i > e ? t(window).height() + "px" :e + "px") :t(document).height() + "px";
        },
        width:function() {
            var e, i;
            return t.ui.ie ? (e = Math.max(document.documentElement.scrollWidth, document.body.scrollWidth), 
            i = Math.max(document.documentElement.offsetWidth, document.body.offsetWidth), i > e ? t(window).width() + "px" :e + "px") :t(document).width() + "px";
        },
        resize:function() {
            var e = t([]);
            t.each(t.ui.dialog.overlay.instances, function() {
                e = e.add(this);
            }), e.css({
                width:0,
                height:0
            }).css({
                width:t.ui.dialog.overlay.width(),
                height:t.ui.dialog.overlay.height()
            });
        }
    }), t.extend(t.ui.dialog.overlay.prototype, {
        destroy:function() {
            t.ui.dialog.overlay.destroy(this.$el);
        }
    });
}(jQuery), function(t) {
    var e = /up|down|vertical/, i = /up|left|vertical|horizontal/;
    t.effects.effect.blind = function(n, o) {
        var r, s, a, l = t(this), c = [ "position", "top", "bottom", "left", "right", "height", "width" ], h = t.effects.setMode(l, n.mode || "hide"), u = n.direction || "up", d = e.test(u), p = d ? "height" :"width", f = d ? "top" :"left", g = i.test(u), m = {}, _ = "show" === h;
        l.parent().is(".ui-effects-wrapper") ? t.effects.save(l.parent(), c) :t.effects.save(l, c), 
        l.show(), r = t.effects.createWrapper(l).css({
            overflow:"hidden"
        }), s = r[p](), a = parseFloat(r.css(f)) || 0, m[p] = _ ? s :0, g || (l.css(d ? "bottom" :"right", 0).css(d ? "top" :"left", "auto").css({
            position:"absolute"
        }), m[f] = _ ? a :s + a), _ && (r.css(p, 0), g || r.css(f, a + s)), r.animate(m, {
            duration:n.duration,
            easing:n.easing,
            queue:!1,
            complete:function() {
                "hide" === h && l.hide(), t.effects.restore(l, c), t.effects.removeWrapper(l), o();
            }
        });
    };
}(jQuery), function(t) {
    t.effects.effect.bounce = function(e, i) {
        var n, o, r, s = t(this), a = [ "position", "top", "bottom", "left", "right", "height", "width" ], l = t.effects.setMode(s, e.mode || "effect"), c = "hide" === l, h = "show" === l, u = e.direction || "up", d = e.distance, p = e.times || 5, f = 2 * p + (h || c ? 1 :0), g = e.duration / f, m = e.easing, _ = "up" === u || "down" === u ? "top" :"left", v = "up" === u || "left" === u, y = s.queue(), b = y.length;
        for ((h || c) && a.push("opacity"), t.effects.save(s, a), s.show(), t.effects.createWrapper(s), 
        d || (d = s["top" === _ ? "outerHeight" :"outerWidth"]() / 3), h && (r = {
            opacity:1
        }, r[_] = 0, s.css("opacity", 0).css(_, v ? 2 * -d :2 * d).animate(r, g, m)), c && (d /= Math.pow(2, p - 1)), 
        r = {}, r[_] = 0, n = 0; p > n; n++) o = {}, o[_] = (v ? "-=" :"+=") + d, s.animate(o, g, m).animate(r, g, m), 
        d = c ? 2 * d :d / 2;
        c && (o = {
            opacity:0
        }, o[_] = (v ? "-=" :"+=") + d, s.animate(o, g, m)), s.queue(function() {
            c && s.hide(), t.effects.restore(s, a), t.effects.removeWrapper(s), i();
        }), b > 1 && y.splice.apply(y, [ 1, 0 ].concat(y.splice(b, f + 1))), s.dequeue();
    };
}(jQuery), function(t) {
    t.effects.effect.clip = function(e, i) {
        var n, o, r, s = t(this), a = [ "position", "top", "bottom", "left", "right", "height", "width" ], l = t.effects.setMode(s, e.mode || "hide"), c = "show" === l, h = e.direction || "vertical", u = "vertical" === h, d = u ? "height" :"width", p = u ? "top" :"left", f = {};
        t.effects.save(s, a), s.show(), n = t.effects.createWrapper(s).css({
            overflow:"hidden"
        }), o = "IMG" === s[0].tagName ? n :s, r = o[d](), c && (o.css(d, 0), o.css(p, r / 2)), 
        f[d] = c ? r :0, f[p] = c ? 0 :r / 2, o.animate(f, {
            queue:!1,
            duration:e.duration,
            easing:e.easing,
            complete:function() {
                c || s.hide(), t.effects.restore(s, a), t.effects.removeWrapper(s), i();
            }
        });
    };
}(jQuery), function(t) {
    t.effects.effect.drop = function(e, i) {
        var n, o = t(this), r = [ "position", "top", "bottom", "left", "right", "opacity", "height", "width" ], s = t.effects.setMode(o, e.mode || "hide"), a = "show" === s, l = e.direction || "left", c = "up" === l || "down" === l ? "top" :"left", h = "up" === l || "left" === l ? "pos" :"neg", u = {
            opacity:a ? 1 :0
        };
        t.effects.save(o, r), o.show(), t.effects.createWrapper(o), n = e.distance || o["top" === c ? "outerHeight" :"outerWidth"](!0) / 2, 
        a && o.css("opacity", 0).css(c, "pos" === h ? -n :n), u[c] = (a ? "pos" === h ? "+=" :"-=" :"pos" === h ? "-=" :"+=") + n, 
        o.animate(u, {
            queue:!1,
            duration:e.duration,
            easing:e.easing,
            complete:function() {
                "hide" === s && o.hide(), t.effects.restore(o, r), t.effects.removeWrapper(o), i();
            }
        });
    };
}(jQuery), function(t) {
    t.effects.effect.explode = function(e, i) {
        function n() {
            y.push(this), y.length === u * d && o();
        }
        function o() {
            p.css({
                visibility:"visible"
            }), t(y).remove(), g || p.hide(), i();
        }
        var r, s, a, l, c, h, u = e.pieces ? Math.round(Math.sqrt(e.pieces)) :3, d = u, p = t(this), f = t.effects.setMode(p, e.mode || "hide"), g = "show" === f, m = p.show().css("visibility", "hidden").offset(), _ = Math.ceil(p.outerWidth() / d), v = Math.ceil(p.outerHeight() / u), y = [];
        for (r = 0; u > r; r++) for (l = m.top + r * v, h = r - (u - 1) / 2, s = 0; d > s; s++) a = m.left + s * _, 
        c = s - (d - 1) / 2, p.clone().appendTo("body").wrap("<div></div>").css({
            position:"absolute",
            visibility:"visible",
            left:-s * _,
            top:-r * v
        }).parent().addClass("ui-effects-explode").css({
            position:"absolute",
            overflow:"hidden",
            width:_,
            height:v,
            left:a + (g ? c * _ :0),
            top:l + (g ? h * v :0),
            opacity:g ? 0 :1
        }).animate({
            left:a + (g ? 0 :c * _),
            top:l + (g ? 0 :h * v),
            opacity:g ? 1 :0
        }, e.duration || 500, e.easing, n);
    };
}(jQuery), function(t) {
    t.effects.effect.fade = function(e, i) {
        var n = t(this), o = t.effects.setMode(n, e.mode || "toggle");
        n.animate({
            opacity:o
        }, {
            queue:!1,
            duration:e.duration,
            easing:e.easing,
            complete:i
        });
    };
}(jQuery), function(t) {
    t.effects.effect.fold = function(e, i) {
        var n, o, r = t(this), s = [ "position", "top", "bottom", "left", "right", "height", "width" ], a = t.effects.setMode(r, e.mode || "hide"), l = "show" === a, c = "hide" === a, h = e.size || 15, u = /([0-9]+)%/.exec(h), d = !!e.horizFirst, p = l !== d, f = p ? [ "width", "height" ] :[ "height", "width" ], g = e.duration / 2, m = {}, _ = {};
        t.effects.save(r, s), r.show(), n = t.effects.createWrapper(r).css({
            overflow:"hidden"
        }), o = p ? [ n.width(), n.height() ] :[ n.height(), n.width() ], u && (h = parseInt(u[1], 10) / 100 * o[c ? 0 :1]), 
        l && n.css(d ? {
            height:0,
            width:h
        } :{
            height:h,
            width:0
        }), m[f[0]] = l ? o[0] :h, _[f[1]] = l ? o[1] :0, n.animate(m, g, e.easing).animate(_, g, e.easing, function() {
            c && r.hide(), t.effects.restore(r, s), t.effects.removeWrapper(r), i();
        });
    };
}(jQuery), function(t) {
    t.effects.effect.highlight = function(e, i) {
        var n = t(this), o = [ "backgroundImage", "backgroundColor", "opacity" ], r = t.effects.setMode(n, e.mode || "show"), s = {
            backgroundColor:n.css("backgroundColor")
        };
        "hide" === r && (s.opacity = 0), t.effects.save(n, o), n.show().css({
            backgroundImage:"none",
            backgroundColor:e.color || "#ffff99"
        }).animate(s, {
            queue:!1,
            duration:e.duration,
            easing:e.easing,
            complete:function() {
                "hide" === r && n.hide(), t.effects.restore(n, o), i();
            }
        });
    };
}(jQuery), function(t) {
    t.effects.effect.pulsate = function(e, i) {
        var n, o = t(this), r = t.effects.setMode(o, e.mode || "show"), s = "show" === r, a = "hide" === r, l = s || "hide" === r, c = 2 * (e.times || 5) + (l ? 1 :0), h = e.duration / c, u = 0, d = o.queue(), p = d.length;
        for ((s || !o.is(":visible")) && (o.css("opacity", 0).show(), u = 1), n = 1; c > n; n++) o.animate({
            opacity:u
        }, h, e.easing), u = 1 - u;
        o.animate({
            opacity:u
        }, h, e.easing), o.queue(function() {
            a && o.hide(), i();
        }), p > 1 && d.splice.apply(d, [ 1, 0 ].concat(d.splice(p, c + 1))), o.dequeue();
    };
}(jQuery), function(t) {
    t.effects.effect.puff = function(e, i) {
        var n = t(this), o = t.effects.setMode(n, e.mode || "hide"), r = "hide" === o, s = parseInt(e.percent, 10) || 150, a = s / 100, l = {
            height:n.height(),
            width:n.width(),
            outerHeight:n.outerHeight(),
            outerWidth:n.outerWidth()
        };
        t.extend(e, {
            effect:"scale",
            queue:!1,
            fade:!0,
            mode:o,
            complete:i,
            percent:r ? s :100,
            from:r ? l :{
                height:l.height * a,
                width:l.width * a,
                outerHeight:l.outerHeight * a,
                outerWidth:l.outerWidth * a
            }
        }), n.effect(e);
    }, t.effects.effect.scale = function(e, i) {
        var n = t(this), o = t.extend(!0, {}, e), r = t.effects.setMode(n, e.mode || "effect"), s = parseInt(e.percent, 10) || (0 === parseInt(e.percent, 10) ? 0 :"hide" === r ? 0 :100), a = e.direction || "both", l = e.origin, c = {
            height:n.height(),
            width:n.width(),
            outerHeight:n.outerHeight(),
            outerWidth:n.outerWidth()
        }, h = {
            y:"horizontal" !== a ? s / 100 :1,
            x:"vertical" !== a ? s / 100 :1
        };
        o.effect = "size", o.queue = !1, o.complete = i, "effect" !== r && (o.origin = l || [ "middle", "center" ], 
        o.restore = !0), o.from = e.from || ("show" === r ? {
            height:0,
            width:0,
            outerHeight:0,
            outerWidth:0
        } :c), o.to = {
            height:c.height * h.y,
            width:c.width * h.x,
            outerHeight:c.outerHeight * h.y,
            outerWidth:c.outerWidth * h.x
        }, o.fade && ("show" === r && (o.from.opacity = 0, o.to.opacity = 1), "hide" === r && (o.from.opacity = 1, 
        o.to.opacity = 0)), n.effect(o);
    }, t.effects.effect.size = function(e, i) {
        var n, o, r, s = t(this), a = [ "position", "top", "bottom", "left", "right", "width", "height", "overflow", "opacity" ], l = [ "position", "top", "bottom", "left", "right", "overflow", "opacity" ], c = [ "width", "height", "overflow" ], h = [ "fontSize" ], u = [ "borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom" ], d = [ "borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight" ], p = t.effects.setMode(s, e.mode || "effect"), f = e.restore || "effect" !== p, g = e.scale || "both", m = e.origin || [ "middle", "center" ], _ = s.css("position"), v = f ? a :l, y = {
            height:0,
            width:0,
            outerHeight:0,
            outerWidth:0
        };
        "show" === p && s.show(), n = {
            height:s.height(),
            width:s.width(),
            outerHeight:s.outerHeight(),
            outerWidth:s.outerWidth()
        }, "toggle" === e.mode && "show" === p ? (s.from = e.to || y, s.to = e.from || n) :(s.from = e.from || ("show" === p ? y :n), 
        s.to = e.to || ("hide" === p ? y :n)), r = {
            from:{
                y:s.from.height / n.height,
                x:s.from.width / n.width
            },
            to:{
                y:s.to.height / n.height,
                x:s.to.width / n.width
            }
        }, ("box" === g || "both" === g) && (r.from.y !== r.to.y && (v = v.concat(u), s.from = t.effects.setTransition(s, u, r.from.y, s.from), 
        s.to = t.effects.setTransition(s, u, r.to.y, s.to)), r.from.x !== r.to.x && (v = v.concat(d), 
        s.from = t.effects.setTransition(s, d, r.from.x, s.from), s.to = t.effects.setTransition(s, d, r.to.x, s.to))), 
        ("content" === g || "both" === g) && r.from.y !== r.to.y && (v = v.concat(h).concat(c), 
        s.from = t.effects.setTransition(s, h, r.from.y, s.from), s.to = t.effects.setTransition(s, h, r.to.y, s.to)), 
        t.effects.save(s, v), s.show(), t.effects.createWrapper(s), s.css("overflow", "hidden").css(s.from), 
        m && (o = t.effects.getBaseline(m, n), s.from.top = (n.outerHeight - s.outerHeight()) * o.y, 
        s.from.left = (n.outerWidth - s.outerWidth()) * o.x, s.to.top = (n.outerHeight - s.to.outerHeight) * o.y, 
        s.to.left = (n.outerWidth - s.to.outerWidth) * o.x), s.css(s.from), ("content" === g || "both" === g) && (u = u.concat([ "marginTop", "marginBottom" ]).concat(h), 
        d = d.concat([ "marginLeft", "marginRight" ]), c = a.concat(u).concat(d), s.find("*[width]").each(function() {
            var i = t(this), n = {
                height:i.height(),
                width:i.width(),
                outerHeight:i.outerHeight(),
                outerWidth:i.outerWidth()
            };
            f && t.effects.save(i, c), i.from = {
                height:n.height * r.from.y,
                width:n.width * r.from.x,
                outerHeight:n.outerHeight * r.from.y,
                outerWidth:n.outerWidth * r.from.x
            }, i.to = {
                height:n.height * r.to.y,
                width:n.width * r.to.x,
                outerHeight:n.height * r.to.y,
                outerWidth:n.width * r.to.x
            }, r.from.y !== r.to.y && (i.from = t.effects.setTransition(i, u, r.from.y, i.from), 
            i.to = t.effects.setTransition(i, u, r.to.y, i.to)), r.from.x !== r.to.x && (i.from = t.effects.setTransition(i, d, r.from.x, i.from), 
            i.to = t.effects.setTransition(i, d, r.to.x, i.to)), i.css(i.from), i.animate(i.to, e.duration, e.easing, function() {
                f && t.effects.restore(i, c);
            });
        })), s.animate(s.to, {
            queue:!1,
            duration:e.duration,
            easing:e.easing,
            complete:function() {
                0 === s.to.opacity && s.css("opacity", s.from.opacity), "hide" === p && s.hide(), 
                t.effects.restore(s, v), f || ("static" === _ ? s.css({
                    position:"relative",
                    top:s.to.top,
                    left:s.to.left
                }) :t.each([ "top", "left" ], function(t, e) {
                    s.css(e, function(e, i) {
                        var n = parseInt(i, 10), o = t ? s.to.left :s.to.top;
                        return "auto" === i ? o + "px" :n + o + "px";
                    });
                })), t.effects.removeWrapper(s), i();
            }
        });
    };
}(jQuery), function(t) {
    t.effects.effect.shake = function(e, i) {
        var n, o = t(this), r = [ "position", "top", "bottom", "left", "right", "height", "width" ], s = t.effects.setMode(o, e.mode || "effect"), a = e.direction || "left", l = e.distance || 20, c = e.times || 3, h = 2 * c + 1, u = Math.round(e.duration / h), d = "up" === a || "down" === a ? "top" :"left", p = "up" === a || "left" === a, f = {}, g = {}, m = {}, _ = o.queue(), v = _.length;
        for (t.effects.save(o, r), o.show(), t.effects.createWrapper(o), f[d] = (p ? "-=" :"+=") + l, 
        g[d] = (p ? "+=" :"-=") + 2 * l, m[d] = (p ? "-=" :"+=") + 2 * l, o.animate(f, u, e.easing), 
        n = 1; c > n; n++) o.animate(g, u, e.easing).animate(m, u, e.easing);
        o.animate(g, u, e.easing).animate(f, u / 2, e.easing).queue(function() {
            "hide" === s && o.hide(), t.effects.restore(o, r), t.effects.removeWrapper(o), i();
        }), v > 1 && _.splice.apply(_, [ 1, 0 ].concat(_.splice(v, h + 1))), o.dequeue();
    };
}(jQuery), function(t) {
    t.effects.effect.slide = function(e, i) {
        var n, o = t(this), r = [ "position", "top", "bottom", "left", "right", "width", "height" ], s = t.effects.setMode(o, e.mode || "show"), a = "show" === s, l = e.direction || "left", c = "up" === l || "down" === l ? "top" :"left", h = "up" === l || "left" === l, u = {};
        t.effects.save(o, r), o.show(), n = e.distance || o["top" === c ? "outerHeight" :"outerWidth"](!0), 
        t.effects.createWrapper(o).css({
            overflow:"hidden"
        }), a && o.css(c, h ? isNaN(n) ? "-" + n :-n :n), u[c] = (a ? h ? "+=" :"-=" :h ? "-=" :"+=") + n, 
        o.animate(u, {
            queue:!1,
            duration:e.duration,
            easing:e.easing,
            complete:function() {
                "hide" === s && o.hide(), t.effects.restore(o, r), t.effects.removeWrapper(o), i();
            }
        });
    };
}(jQuery), function(t) {
    t.effects.effect.transfer = function(e, i) {
        var n = t(this), o = t(e.to), r = "fixed" === o.css("position"), s = t("body"), a = r ? s.scrollTop() :0, l = r ? s.scrollLeft() :0, c = o.offset(), h = {
            top:c.top - a,
            left:c.left - l,
            height:o.innerHeight(),
            width:o.innerWidth()
        }, u = n.offset(), d = t('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(e.className).css({
            top:u.top - a,
            left:u.left - l,
            height:n.innerHeight(),
            width:n.innerWidth(),
            position:r ? "fixed" :"absolute"
        }).animate(h, e.duration, e.easing, function() {
            d.remove(), i();
        });
    };
}(jQuery), function(t) {
    var e = !1;
    t.widget("ui.menu", {
        version:"1.9.2",
        defaultElement:"<ul>",
        delay:300,
        options:{
            icons:{
                submenu:"ui-icon-carat-1-e"
            },
            menus:"ul",
            position:{
                my:"left top",
                at:"right top"
            },
            role:"menu",
            blur:null,
            focus:null,
            select:null
        },
        _create:function() {
            this.activeMenu = this.element, this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length).attr({
                role:this.options.role,
                tabIndex:0
            }).bind("click" + this.eventNamespace, t.proxy(function(t) {
                this.options.disabled && t.preventDefault();
            }, this)), this.options.disabled && this.element.addClass("ui-state-disabled").attr("aria-disabled", "true"), 
            this._on({
                "mousedown .ui-menu-item > a":function(t) {
                    t.preventDefault();
                },
                "click .ui-state-disabled > a":function(t) {
                    t.preventDefault();
                },
                "click .ui-menu-item:has(a)":function(i) {
                    var n = t(i.target).closest(".ui-menu-item");
                    !e && n.not(".ui-state-disabled").length && (e = !0, this.select(i), n.has(".ui-menu").length ? this.expand(i) :this.element.is(":focus") || (this.element.trigger("focus", [ !0 ]), 
                    this.active && 1 === this.active.parents(".ui-menu").length && clearTimeout(this.timer)));
                },
                "mouseenter .ui-menu-item":function(e) {
                    var i = t(e.currentTarget);
                    i.siblings().children(".ui-state-active").removeClass("ui-state-active"), this.focus(e, i);
                },
                mouseleave:"collapseAll",
                "mouseleave .ui-menu":"collapseAll",
                focus:function(t, e) {
                    var i = this.active || this.element.children(".ui-menu-item").eq(0);
                    e || this.focus(t, i);
                },
                blur:function(e) {
                    this._delay(function() {
                        t.contains(this.element[0], this.document[0].activeElement) || this.collapseAll(e);
                    });
                },
                keydown:"_keydown"
            }), this.refresh(), this._on(this.document, {
                click:function(i) {
                    t(i.target).closest(".ui-menu").length || this.collapseAll(i), e = !1;
                }
            });
        },
        _destroy:function() {
            this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(), 
            this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function() {
                var e = t(this);
                e.data("ui-menu-submenu-carat") && e.remove();
            }), this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content");
        },
        _keydown:function(e) {
            function i(t) {
                return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
            }
            var n, o, r, s, a, l = !0;
            switch (e.keyCode) {
              case t.ui.keyCode.PAGE_UP:
                this.previousPage(e);
                break;

              case t.ui.keyCode.PAGE_DOWN:
                this.nextPage(e);
                break;

              case t.ui.keyCode.HOME:
                this._move("first", "first", e);
                break;

              case t.ui.keyCode.END:
                this._move("last", "last", e);
                break;

              case t.ui.keyCode.UP:
                this.previous(e);
                break;

              case t.ui.keyCode.DOWN:
                this.next(e);
                break;

              case t.ui.keyCode.LEFT:
                this.collapse(e);
                break;

              case t.ui.keyCode.RIGHT:
                this.active && !this.active.is(".ui-state-disabled") && this.expand(e);
                break;

              case t.ui.keyCode.ENTER:
              case t.ui.keyCode.SPACE:
                this._activate(e);
                break;

              case t.ui.keyCode.ESCAPE:
                this.collapse(e);
                break;

              default:
                l = !1, o = this.previousFilter || "", r = String.fromCharCode(e.keyCode), s = !1, 
                clearTimeout(this.filterTimer), r === o ? s = !0 :r = o + r, a = new RegExp("^" + i(r), "i"), 
                n = this.activeMenu.children(".ui-menu-item").filter(function() {
                    return a.test(t(this).children("a").text());
                }), n = s && -1 !== n.index(this.active.next()) ? this.active.nextAll(".ui-menu-item") :n, 
                n.length || (r = String.fromCharCode(e.keyCode), a = new RegExp("^" + i(r), "i"), 
                n = this.activeMenu.children(".ui-menu-item").filter(function() {
                    return a.test(t(this).children("a").text());
                })), n.length ? (this.focus(e, n), n.length > 1 ? (this.previousFilter = r, this.filterTimer = this._delay(function() {
                    delete this.previousFilter;
                }, 1e3)) :delete this.previousFilter) :delete this.previousFilter;
            }
            l && e.preventDefault();
        },
        _activate:function(t) {
            this.active.is(".ui-state-disabled") || (this.active.children("a[aria-haspopup='true']").length ? this.expand(t) :this.select(t));
        },
        refresh:function() {
            var e, i = this.options.icons.submenu, n = this.element.find(this.options.menus);
            n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({
                role:this.options.role,
                "aria-hidden":"true",
                "aria-expanded":"false"
            }).each(function() {
                var e = t(this), n = e.prev("a"), o = t("<span>").addClass("ui-menu-icon ui-icon " + i).data("ui-menu-submenu-carat", !0);
                n.attr("aria-haspopup", "true").prepend(o), e.attr("aria-labelledby", n.attr("id"));
            }), e = n.add(this.element), e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role", "presentation").children("a").uniqueId().addClass("ui-corner-all").attr({
                tabIndex:-1,
                role:this._itemRole()
            }), e.children(":not(.ui-menu-item)").each(function() {
                var e = t(this);
                /[^\-—–\s]/.test(e.text()) || e.addClass("ui-widget-content ui-menu-divider");
            }), e.children(".ui-state-disabled").attr("aria-disabled", "true"), this.active && !t.contains(this.element[0], this.active[0]) && this.blur();
        },
        _itemRole:function() {
            return {
                menu:"menuitem",
                listbox:"option"
            }[this.options.role];
        },
        focus:function(t, e) {
            var i, n;
            this.blur(t, t && "focus" === t.type), this._scrollIntoView(e), this.active = e.first(), 
            n = this.active.children("a").addClass("ui-state-focus"), this.options.role && this.element.attr("aria-activedescendant", n.attr("id")), 
            this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"), 
            t && "keydown" === t.type ? this._close() :this.timer = this._delay(function() {
                this._close();
            }, this.delay), i = e.children(".ui-menu"), i.length && /^mouse/.test(t.type) && this._startOpening(i), 
            this.activeMenu = e.parent(), this._trigger("focus", t, {
                item:e
            });
        },
        _scrollIntoView:function(e) {
            var i, n, o, r, s, a;
            this._hasScroll() && (i = parseFloat(t.css(this.activeMenu[0], "borderTopWidth")) || 0, 
            n = parseFloat(t.css(this.activeMenu[0], "paddingTop")) || 0, o = e.offset().top - this.activeMenu.offset().top - i - n, 
            r = this.activeMenu.scrollTop(), s = this.activeMenu.height(), a = e.height(), 0 > o ? this.activeMenu.scrollTop(r + o) :o + a > s && this.activeMenu.scrollTop(r + o - s + a));
        },
        blur:function(t, e) {
            e || clearTimeout(this.timer), this.active && (this.active.children("a").removeClass("ui-state-focus"), 
            this.active = null, this._trigger("blur", t, {
                item:this.active
            }));
        },
        _startOpening:function(t) {
            clearTimeout(this.timer), "true" === t.attr("aria-hidden") && (this.timer = this._delay(function() {
                this._close(), this._open(t);
            }, this.delay));
        },
        _open:function(e) {
            var i = t.extend({
                of:this.active
            }, this.options.position);
            clearTimeout(this.timer), this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden", "true"), 
            e.show().removeAttr("aria-hidden").attr("aria-expanded", "true").position(i);
        },
        collapseAll:function(e, i) {
            clearTimeout(this.timer), this.timer = this._delay(function() {
                var n = i ? this.element :t(e && e.target).closest(this.element.find(".ui-menu"));
                n.length || (n = this.element), this._close(n), this.blur(e), this.activeMenu = n;
            }, this.delay);
        },
        _close:function(t) {
            t || (t = this.active ? this.active.parent() :this.element), t.find(".ui-menu").hide().attr("aria-hidden", "true").attr("aria-expanded", "false").end().find("a.ui-state-active").removeClass("ui-state-active");
        },
        collapse:function(t) {
            var e = this.active && this.active.parent().closest(".ui-menu-item", this.element);
            e && e.length && (this._close(), this.focus(t, e));
        },
        expand:function(t) {
            var e = this.active && this.active.children(".ui-menu ").children(".ui-menu-item").first();
            e && e.length && (this._open(e.parent()), this._delay(function() {
                this.focus(t, e);
            }));
        },
        next:function(t) {
            this._move("next", "first", t);
        },
        previous:function(t) {
            this._move("prev", "last", t);
        },
        isFirstItem:function() {
            return this.active && !this.active.prevAll(".ui-menu-item").length;
        },
        isLastItem:function() {
            return this.active && !this.active.nextAll(".ui-menu-item").length;
        },
        _move:function(t, e, i) {
            var n;
            this.active && (n = "first" === t || "last" === t ? this.active["first" === t ? "prevAll" :"nextAll"](".ui-menu-item").eq(-1) :this.active[t + "All"](".ui-menu-item").eq(0)), 
            n && n.length && this.active || (n = this.activeMenu.children(".ui-menu-item")[e]()), 
            this.focus(i, n);
        },
        nextPage:function(e) {
            var i, n, o;
            return this.active ? (this.isLastItem() || (this._hasScroll() ? (n = this.active.offset().top, 
            o = this.element.height(), this.active.nextAll(".ui-menu-item").each(function() {
                return i = t(this), i.offset().top - n - o < 0;
            }), this.focus(e, i)) :this.focus(e, this.activeMenu.children(".ui-menu-item")[this.active ? "last" :"first"]())), 
            void 0) :(this.next(e), void 0);
        },
        previousPage:function(e) {
            var i, n, o;
            return this.active ? (this.isFirstItem() || (this._hasScroll() ? (n = this.active.offset().top, 
            o = this.element.height(), this.active.prevAll(".ui-menu-item").each(function() {
                return i = t(this), i.offset().top - n + o > 0;
            }), this.focus(e, i)) :this.focus(e, this.activeMenu.children(".ui-menu-item").first())), 
            void 0) :(this.next(e), void 0);
        },
        _hasScroll:function() {
            return this.element.outerHeight() < this.element.prop("scrollHeight");
        },
        select:function(e) {
            this.active = this.active || t(e.target).closest(".ui-menu-item");
            var i = {
                item:this.active
            };
            this.active.has(".ui-menu").length || this.collapseAll(e, !0), this._trigger("select", e, i);
        }
    });
}(jQuery), function(t, e) {
    function i(t, e, i) {
        return [ parseInt(t[0], 10) * (d.test(t[0]) ? e / 100 :1), parseInt(t[1], 10) * (d.test(t[1]) ? i / 100 :1) ];
    }
    function n(e, i) {
        return parseInt(t.css(e, i), 10) || 0;
    }
    t.ui = t.ui || {};
    var o, r = Math.max, s = Math.abs, a = Math.round, l = /left|center|right/, c = /top|center|bottom/, h = /[\+\-]\d+%?/, u = /^\w+/, d = /%$/, p = t.fn.position;
    t.position = {
        scrollbarWidth:function() {
            if (o !== e) return o;
            var i, n, r = t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"), s = r.children()[0];
            return t("body").append(r), i = s.offsetWidth, r.css("overflow", "scroll"), n = s.offsetWidth, 
            i === n && (n = r[0].clientWidth), r.remove(), o = i - n;
        },
        getScrollInfo:function(e) {
            var i = e.isWindow ? "" :e.element.css("overflow-x"), n = e.isWindow ? "" :e.element.css("overflow-y"), o = "scroll" === i || "auto" === i && e.width < e.element[0].scrollWidth, r = "scroll" === n || "auto" === n && e.height < e.element[0].scrollHeight;
            return {
                width:o ? t.position.scrollbarWidth() :0,
                height:r ? t.position.scrollbarWidth() :0
            };
        },
        getWithinInfo:function(e) {
            var i = t(e || window), n = t.isWindow(i[0]);
            return {
                element:i,
                isWindow:n,
                offset:i.offset() || {
                    left:0,
                    top:0
                },
                scrollLeft:i.scrollLeft(),
                scrollTop:i.scrollTop(),
                width:n ? i.width() :i.outerWidth(),
                height:n ? i.height() :i.outerHeight()
            };
        }
    }, t.fn.position = function(e) {
        if (!e || !e.of) return p.apply(this, arguments);
        e = t.extend({}, e);
        var o, d, f, g, m, _ = t(e.of), v = t.position.getWithinInfo(e.within), y = t.position.getScrollInfo(v), b = _[0], w = (e.collision || "flip").split(" "), C = {};
        return 9 === b.nodeType ? (d = _.width(), f = _.height(), g = {
            top:0,
            left:0
        }) :t.isWindow(b) ? (d = _.width(), f = _.height(), g = {
            top:_.scrollTop(),
            left:_.scrollLeft()
        }) :b.preventDefault ? (e.at = "left top", d = f = 0, g = {
            top:b.pageY,
            left:b.pageX
        }) :(d = _.outerWidth(), f = _.outerHeight(), g = _.offset()), m = t.extend({}, g), 
        t.each([ "my", "at" ], function() {
            var t, i, n = (e[this] || "").split(" ");
            1 === n.length && (n = l.test(n[0]) ? n.concat([ "center" ]) :c.test(n[0]) ? [ "center" ].concat(n) :[ "center", "center" ]), 
            n[0] = l.test(n[0]) ? n[0] :"center", n[1] = c.test(n[1]) ? n[1] :"center", t = h.exec(n[0]), 
            i = h.exec(n[1]), C[this] = [ t ? t[0] :0, i ? i[0] :0 ], e[this] = [ u.exec(n[0])[0], u.exec(n[1])[0] ];
        }), 1 === w.length && (w[1] = w[0]), "right" === e.at[0] ? m.left += d :"center" === e.at[0] && (m.left += d / 2), 
        "bottom" === e.at[1] ? m.top += f :"center" === e.at[1] && (m.top += f / 2), o = i(C.at, d, f), 
        m.left += o[0], m.top += o[1], this.each(function() {
            var l, c, h = t(this), u = h.outerWidth(), p = h.outerHeight(), b = n(this, "marginLeft"), T = n(this, "marginTop"), D = u + b + n(this, "marginRight") + y.width, E = p + T + n(this, "marginBottom") + y.height, x = t.extend({}, m), S = i(C.my, h.outerWidth(), h.outerHeight());
            "right" === e.my[0] ? x.left -= u :"center" === e.my[0] && (x.left -= u / 2), "bottom" === e.my[1] ? x.top -= p :"center" === e.my[1] && (x.top -= p / 2), 
            x.left += S[0], x.top += S[1], t.support.offsetFractions || (x.left = a(x.left), 
            x.top = a(x.top)), l = {
                marginLeft:b,
                marginTop:T
            }, t.each([ "left", "top" ], function(i, n) {
                t.ui.position[w[i]] && t.ui.position[w[i]][n](x, {
                    targetWidth:d,
                    targetHeight:f,
                    elemWidth:u,
                    elemHeight:p,
                    collisionPosition:l,
                    collisionWidth:D,
                    collisionHeight:E,
                    offset:[ o[0] + S[0], o[1] + S[1] ],
                    my:e.my,
                    at:e.at,
                    within:v,
                    elem:h
                });
            }), t.fn.bgiframe && h.bgiframe(), e.using && (c = function(t) {
                var i = g.left - x.left, n = i + d - u, o = g.top - x.top, a = o + f - p, l = {
                    target:{
                        element:_,
                        left:g.left,
                        top:g.top,
                        width:d,
                        height:f
                    },
                    element:{
                        element:h,
                        left:x.left,
                        top:x.top,
                        width:u,
                        height:p
                    },
                    horizontal:0 > n ? "left" :i > 0 ? "right" :"center",
                    vertical:0 > a ? "top" :o > 0 ? "bottom" :"middle"
                };
                u > d && s(i + n) < d && (l.horizontal = "center"), p > f && s(o + a) < f && (l.vertical = "middle"), 
                l.important = r(s(i), s(n)) > r(s(o), s(a)) ? "horizontal" :"vertical", e.using.call(this, t, l);
            }), h.offset(t.extend(x, {
                using:c
            }));
        });
    }, t.ui.position = {
        fit:{
            left:function(t, e) {
                var i, n = e.within, o = n.isWindow ? n.scrollLeft :n.offset.left, s = n.width, a = t.left - e.collisionPosition.marginLeft, l = o - a, c = a + e.collisionWidth - s - o;
                e.collisionWidth > s ? l > 0 && 0 >= c ? (i = t.left + l + e.collisionWidth - s - o, 
                t.left += l - i) :t.left = c > 0 && 0 >= l ? o :l > c ? o + s - e.collisionWidth :o :l > 0 ? t.left += l :c > 0 ? t.left -= c :t.left = r(t.left - a, t.left);
            },
            top:function(t, e) {
                var i, n = e.within, o = n.isWindow ? n.scrollTop :n.offset.top, s = e.within.height, a = t.top - e.collisionPosition.marginTop, l = o - a, c = a + e.collisionHeight - s - o;
                e.collisionHeight > s ? l > 0 && 0 >= c ? (i = t.top + l + e.collisionHeight - s - o, 
                t.top += l - i) :t.top = c > 0 && 0 >= l ? o :l > c ? o + s - e.collisionHeight :o :l > 0 ? t.top += l :c > 0 ? t.top -= c :t.top = r(t.top - a, t.top);
            }
        },
        flip:{
            left:function(t, e) {
                var i, n, o = e.within, r = o.offset.left + o.scrollLeft, a = o.width, l = o.isWindow ? o.scrollLeft :o.offset.left, c = t.left - e.collisionPosition.marginLeft, h = c - l, u = c + e.collisionWidth - a - l, d = "left" === e.my[0] ? -e.elemWidth :"right" === e.my[0] ? e.elemWidth :0, p = "left" === e.at[0] ? e.targetWidth :"right" === e.at[0] ? -e.targetWidth :0, f = -2 * e.offset[0];
                0 > h ? (i = t.left + d + p + f + e.collisionWidth - a - r, (0 > i || i < s(h)) && (t.left += d + p + f)) :u > 0 && (n = t.left - e.collisionPosition.marginLeft + d + p + f - l, 
                (n > 0 || s(n) < u) && (t.left += d + p + f));
            },
            top:function(t, e) {
                var i, n, o = e.within, r = o.offset.top + o.scrollTop, a = o.height, l = o.isWindow ? o.scrollTop :o.offset.top, c = t.top - e.collisionPosition.marginTop, h = c - l, u = c + e.collisionHeight - a - l, d = "top" === e.my[1], p = d ? -e.elemHeight :"bottom" === e.my[1] ? e.elemHeight :0, f = "top" === e.at[1] ? e.targetHeight :"bottom" === e.at[1] ? -e.targetHeight :0, g = -2 * e.offset[1];
                0 > h ? (n = t.top + p + f + g + e.collisionHeight - a - r, t.top + p + f + g > h && (0 > n || n < s(h)) && (t.top += p + f + g)) :u > 0 && (i = t.top - e.collisionPosition.marginTop + p + f + g - l, 
                t.top + p + f + g > u && (i > 0 || s(i) < u) && (t.top += p + f + g));
            }
        },
        flipfit:{
            left:function() {
                t.ui.position.flip.left.apply(this, arguments), t.ui.position.fit.left.apply(this, arguments);
            },
            top:function() {
                t.ui.position.flip.top.apply(this, arguments), t.ui.position.fit.top.apply(this, arguments);
            }
        }
    }, function() {
        var e, i, n, o, r, s = document.getElementsByTagName("body")[0], a = document.createElement("div");
        e = document.createElement(s ? "div" :"body"), n = {
            visibility:"hidden",
            width:0,
            height:0,
            border:0,
            margin:0,
            background:"none"
        }, s && t.extend(n, {
            position:"absolute",
            left:"-1000px",
            top:"-1000px"
        });
        for (r in n) e.style[r] = n[r];
        e.appendChild(a), i = s || document.documentElement, i.insertBefore(e, i.firstChild), 
        a.style.cssText = "position: absolute; left: 10.7432222px;", o = t(a).offset().left, 
        t.support.offsetFractions = o > 10 && 11 > o, e.innerHTML = "", i.removeChild(e);
    }(), t.uiBackCompat !== !1 && !function(t) {
        var i = t.fn.position;
        t.fn.position = function(n) {
            if (!n || !n.offset) return i.call(this, n);
            var o = n.offset.split(" "), r = n.at.split(" ");
            return 1 === o.length && (o[1] = o[0]), /^\d/.test(o[0]) && (o[0] = "+" + o[0]), 
            /^\d/.test(o[1]) && (o[1] = "+" + o[1]), 1 === r.length && (/left|center|right/.test(r[0]) ? r[1] = "center" :(r[1] = r[0], 
            r[0] = "center")), i.call(this, t.extend(n, {
                at:r[0] + o[0] + " " + r[1] + o[1],
                offset:e
            }));
        };
    }(jQuery);
}(jQuery), function(t, e) {
    t.widget("ui.progressbar", {
        version:"1.9.2",
        options:{
            value:0,
            max:100
        },
        min:0,
        _create:function() {
            this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({
                role:"progressbar",
                "aria-valuemin":this.min,
                "aria-valuemax":this.options.max,
                "aria-valuenow":this._value()
            }), this.valueDiv = t("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element), 
            this.oldValue = this._value(), this._refreshValue();
        },
        _destroy:function() {
            this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"), 
            this.valueDiv.remove();
        },
        value:function(t) {
            return t === e ? this._value() :(this._setOption("value", t), this);
        },
        _setOption:function(t, e) {
            "value" === t && (this.options.value = e, this._refreshValue(), this._value() === this.options.max && this._trigger("complete")), 
            this._super(t, e);
        },
        _value:function() {
            var t = this.options.value;
            return "number" != typeof t && (t = 0), Math.min(this.options.max, Math.max(this.min, t));
        },
        _percentage:function() {
            return 100 * this._value() / this.options.max;
        },
        _refreshValue:function() {
            var t = this.value(), e = this._percentage();
            this.oldValue !== t && (this.oldValue = t, this._trigger("change")), this.valueDiv.toggle(t > this.min).toggleClass("ui-corner-right", t === this.options.max).width(e.toFixed(0) + "%"), 
            this.element.attr("aria-valuenow", t);
        }
    });
}(jQuery), function(t) {
    var e = 5;
    t.widget("ui.slider", t.ui.mouse, {
        version:"1.9.2",
        widgetEventPrefix:"slide",
        options:{
            animate:!1,
            distance:0,
            max:100,
            min:0,
            orientation:"horizontal",
            range:!1,
            step:1,
            value:0,
            values:null
        },
        _create:function() {
            var i, n, o = this.options, r = this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"), s = "<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>", a = [];
            for (this._keySliding = !1, this._mouseSliding = !1, this._animateOff = !0, this._handleIndex = null, 
            this._detectOrientation(), this._mouseInit(), this.element.addClass("ui-slider ui-slider-" + this.orientation + " ui-widget ui-widget-content ui-corner-all" + (o.disabled ? " ui-slider-disabled ui-disabled" :"")), 
            this.range = t([]), o.range && (o.range === !0 && (o.values || (o.values = [ this._valueMin(), this._valueMin() ]), 
            o.values.length && 2 !== o.values.length && (o.values = [ o.values[0], o.values[0] ])), 
            this.range = t("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header" + ("min" === o.range || "max" === o.range ? " ui-slider-range-" + o.range :""))), 
            n = o.values && o.values.length || 1, i = r.length; n > i; i++) a.push(s);
            this.handles = r.add(t(a.join("")).appendTo(this.element)), this.handle = this.handles.eq(0), 
            this.handles.add(this.range).filter("a").click(function(t) {
                t.preventDefault();
            }).mouseenter(function() {
                o.disabled || t(this).addClass("ui-state-hover");
            }).mouseleave(function() {
                t(this).removeClass("ui-state-hover");
            }).focus(function() {
                o.disabled ? t(this).blur() :(t(".ui-slider .ui-state-focus").removeClass("ui-state-focus"), 
                t(this).addClass("ui-state-focus"));
            }).blur(function() {
                t(this).removeClass("ui-state-focus");
            }), this.handles.each(function(e) {
                t(this).data("ui-slider-handle-index", e);
            }), this._on(this.handles, {
                keydown:function(i) {
                    var n, o, r, s, a = t(i.target).data("ui-slider-handle-index");
                    switch (i.keyCode) {
                      case t.ui.keyCode.HOME:
                      case t.ui.keyCode.END:
                      case t.ui.keyCode.PAGE_UP:
                      case t.ui.keyCode.PAGE_DOWN:
                      case t.ui.keyCode.UP:
                      case t.ui.keyCode.RIGHT:
                      case t.ui.keyCode.DOWN:
                      case t.ui.keyCode.LEFT:
                        if (i.preventDefault(), !this._keySliding && (this._keySliding = !0, t(i.target).addClass("ui-state-active"), 
                        n = this._start(i, a), n === !1)) return;
                    }
                    switch (s = this.options.step, o = r = this.options.values && this.options.values.length ? this.values(a) :this.value(), 
                    i.keyCode) {
                      case t.ui.keyCode.HOME:
                        r = this._valueMin();
                        break;

                      case t.ui.keyCode.END:
                        r = this._valueMax();
                        break;

                      case t.ui.keyCode.PAGE_UP:
                        r = this._trimAlignValue(o + (this._valueMax() - this._valueMin()) / e);
                        break;

                      case t.ui.keyCode.PAGE_DOWN:
                        r = this._trimAlignValue(o - (this._valueMax() - this._valueMin()) / e);
                        break;

                      case t.ui.keyCode.UP:
                      case t.ui.keyCode.RIGHT:
                        if (o === this._valueMax()) return;
                        r = this._trimAlignValue(o + s);
                        break;

                      case t.ui.keyCode.DOWN:
                      case t.ui.keyCode.LEFT:
                        if (o === this._valueMin()) return;
                        r = this._trimAlignValue(o - s);
                    }
                    this._slide(i, a, r);
                },
                keyup:function(e) {
                    var i = t(e.target).data("ui-slider-handle-index");
                    this._keySliding && (this._keySliding = !1, this._stop(e, i), this._change(e, i), 
                    t(e.target).removeClass("ui-state-active"));
                }
            }), this._refreshValue(), this._animateOff = !1;
        },
        _destroy:function() {
            this.handles.remove(), this.range.remove(), this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"), 
            this._mouseDestroy();
        },
        _mouseCapture:function(e) {
            var i, n, o, r, s, a, l, c, h = this, u = this.options;
            return u.disabled ? !1 :(this.elementSize = {
                width:this.element.outerWidth(),
                height:this.element.outerHeight()
            }, this.elementOffset = this.element.offset(), i = {
                x:e.pageX,
                y:e.pageY
            }, n = this._normValueFromMouse(i), o = this._valueMax() - this._valueMin() + 1, 
            this.handles.each(function(e) {
                var i = Math.abs(n - h.values(e));
                o > i && (o = i, r = t(this), s = e);
            }), u.range === !0 && this.values(1) === u.min && (s += 1, r = t(this.handles[s])), 
            a = this._start(e, s), a === !1 ? !1 :(this._mouseSliding = !0, this._handleIndex = s, 
            r.addClass("ui-state-active").focus(), l = r.offset(), c = !t(e.target).parents().andSelf().is(".ui-slider-handle"), 
            this._clickOffset = c ? {
                left:0,
                top:0
            } :{
                left:e.pageX - l.left - r.width() / 2,
                top:e.pageY - l.top - r.height() / 2 - (parseInt(r.css("borderTopWidth"), 10) || 0) - (parseInt(r.css("borderBottomWidth"), 10) || 0) + (parseInt(r.css("marginTop"), 10) || 0)
            }, this.handles.hasClass("ui-state-hover") || this._slide(e, s, n), this._animateOff = !0, 
            !0));
        },
        _mouseStart:function() {
            return !0;
        },
        _mouseDrag:function(t) {
            var e = {
                x:t.pageX,
                y:t.pageY
            }, i = this._normValueFromMouse(e);
            return this._slide(t, this._handleIndex, i), !1;
        },
        _mouseStop:function(t) {
            return this.handles.removeClass("ui-state-active"), this._mouseSliding = !1, this._stop(t, this._handleIndex), 
            this._change(t, this._handleIndex), this._handleIndex = null, this._clickOffset = null, 
            this._animateOff = !1, !1;
        },
        _detectOrientation:function() {
            this.orientation = "vertical" === this.options.orientation ? "vertical" :"horizontal";
        },
        _normValueFromMouse:function(t) {
            var e, i, n, o, r;
            return "horizontal" === this.orientation ? (e = this.elementSize.width, i = t.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left :0)) :(e = this.elementSize.height, 
            i = t.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top :0)), 
            n = i / e, n > 1 && (n = 1), 0 > n && (n = 0), "vertical" === this.orientation && (n = 1 - n), 
            o = this._valueMax() - this._valueMin(), r = this._valueMin() + n * o, this._trimAlignValue(r);
        },
        _start:function(t, e) {
            var i = {
                handle:this.handles[e],
                value:this.value()
            };
            return this.options.values && this.options.values.length && (i.value = this.values(e), 
            i.values = this.values()), this._trigger("start", t, i);
        },
        _slide:function(t, e, i) {
            var n, o, r;
            this.options.values && this.options.values.length ? (n = this.values(e ? 0 :1), 
            2 === this.options.values.length && this.options.range === !0 && (0 === e && i > n || 1 === e && n > i) && (i = n), 
            i !== this.values(e) && (o = this.values(), o[e] = i, r = this._trigger("slide", t, {
                handle:this.handles[e],
                value:i,
                values:o
            }), n = this.values(e ? 0 :1), r !== !1 && this.values(e, i, !0))) :i !== this.value() && (r = this._trigger("slide", t, {
                handle:this.handles[e],
                value:i
            }), r !== !1 && this.value(i));
        },
        _stop:function(t, e) {
            var i = {
                handle:this.handles[e],
                value:this.value()
            };
            this.options.values && this.options.values.length && (i.value = this.values(e), 
            i.values = this.values()), this._trigger("stop", t, i);
        },
        _change:function(t, e) {
            if (!this._keySliding && !this._mouseSliding) {
                var i = {
                    handle:this.handles[e],
                    value:this.value()
                };
                this.options.values && this.options.values.length && (i.value = this.values(e), 
                i.values = this.values()), this._trigger("change", t, i);
            }
        },
        value:function(t) {
            return arguments.length ? (this.options.value = this._trimAlignValue(t), this._refreshValue(), 
            this._change(null, 0), void 0) :this._value();
        },
        values:function(e, i) {
            var n, o, r;
            if (arguments.length > 1) return this.options.values[e] = this._trimAlignValue(i), 
            this._refreshValue(), this._change(null, e), void 0;
            if (!arguments.length) return this._values();
            if (!t.isArray(arguments[0])) return this.options.values && this.options.values.length ? this._values(e) :this.value();
            for (n = this.options.values, o = arguments[0], r = 0; r < n.length; r += 1) n[r] = this._trimAlignValue(o[r]), 
            this._change(null, r);
            this._refreshValue();
        },
        _setOption:function(e, i) {
            var n, o = 0;
            switch (t.isArray(this.options.values) && (o = this.options.values.length), t.Widget.prototype._setOption.apply(this, arguments), 
            e) {
              case "disabled":
                i ? (this.handles.filter(".ui-state-focus").blur(), this.handles.removeClass("ui-state-hover"), 
                this.handles.prop("disabled", !0), this.element.addClass("ui-disabled")) :(this.handles.prop("disabled", !1), 
                this.element.removeClass("ui-disabled"));
                break;

              case "orientation":
                this._detectOrientation(), this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-" + this.orientation), 
                this._refreshValue();
                break;

              case "value":
                this._animateOff = !0, this._refreshValue(), this._change(null, 0), this._animateOff = !1;
                break;

              case "values":
                for (this._animateOff = !0, this._refreshValue(), n = 0; o > n; n += 1) this._change(null, n);
                this._animateOff = !1;
                break;

              case "min":
              case "max":
                this._animateOff = !0, this._refreshValue(), this._animateOff = !1;
            }
        },
        _value:function() {
            var t = this.options.value;
            return t = this._trimAlignValue(t);
        },
        _values:function(t) {
            var e, i, n;
            if (arguments.length) return e = this.options.values[t], e = this._trimAlignValue(e);
            for (i = this.options.values.slice(), n = 0; n < i.length; n += 1) i[n] = this._trimAlignValue(i[n]);
            return i;
        },
        _trimAlignValue:function(t) {
            if (t <= this._valueMin()) return this._valueMin();
            if (t >= this._valueMax()) return this._valueMax();
            var e = this.options.step > 0 ? this.options.step :1, i = (t - this._valueMin()) % e, n = t - i;
            return 2 * Math.abs(i) >= e && (n += i > 0 ? e :-e), parseFloat(n.toFixed(5));
        },
        _valueMin:function() {
            return this.options.min;
        },
        _valueMax:function() {
            return this.options.max;
        },
        _refreshValue:function() {
            var e, i, n, o, r, s = this.options.range, a = this.options, l = this, c = this._animateOff ? !1 :a.animate, h = {};
            this.options.values && this.options.values.length ? this.handles.each(function(n) {
                i = (l.values(n) - l._valueMin()) / (l._valueMax() - l._valueMin()) * 100, h["horizontal" === l.orientation ? "left" :"bottom"] = i + "%", 
                t(this).stop(1, 1)[c ? "animate" :"css"](h, a.animate), l.options.range === !0 && ("horizontal" === l.orientation ? (0 === n && l.range.stop(1, 1)[c ? "animate" :"css"]({
                    left:i + "%"
                }, a.animate), 1 === n && l.range[c ? "animate" :"css"]({
                    width:i - e + "%"
                }, {
                    queue:!1,
                    duration:a.animate
                })) :(0 === n && l.range.stop(1, 1)[c ? "animate" :"css"]({
                    bottom:i + "%"
                }, a.animate), 1 === n && l.range[c ? "animate" :"css"]({
                    height:i - e + "%"
                }, {
                    queue:!1,
                    duration:a.animate
                }))), e = i;
            }) :(n = this.value(), o = this._valueMin(), r = this._valueMax(), i = r !== o ? (n - o) / (r - o) * 100 :0, 
            h["horizontal" === this.orientation ? "left" :"bottom"] = i + "%", this.handle.stop(1, 1)[c ? "animate" :"css"](h, a.animate), 
            "min" === s && "horizontal" === this.orientation && this.range.stop(1, 1)[c ? "animate" :"css"]({
                width:i + "%"
            }, a.animate), "max" === s && "horizontal" === this.orientation && this.range[c ? "animate" :"css"]({
                width:100 - i + "%"
            }, {
                queue:!1,
                duration:a.animate
            }), "min" === s && "vertical" === this.orientation && this.range.stop(1, 1)[c ? "animate" :"css"]({
                height:i + "%"
            }, a.animate), "max" === s && "vertical" === this.orientation && this.range[c ? "animate" :"css"]({
                height:100 - i + "%"
            }, {
                queue:!1,
                duration:a.animate
            }));
        }
    });
}(jQuery), function(t) {
    function e(t) {
        return function() {
            var e = this.element.val();
            t.apply(this, arguments), this._refresh(), e !== this.element.val() && this._trigger("change");
        };
    }
    t.widget("ui.spinner", {
        version:"1.9.2",
        defaultElement:"<input>",
        widgetEventPrefix:"spin",
        options:{
            culture:null,
            icons:{
                down:"ui-icon-triangle-1-s",
                up:"ui-icon-triangle-1-n"
            },
            incremental:!0,
            max:null,
            min:null,
            numberFormat:null,
            page:10,
            step:1,
            change:null,
            spin:null,
            start:null,
            stop:null
        },
        _create:function() {
            this._setOption("max", this.options.max), this._setOption("min", this.options.min), 
            this._setOption("step", this.options.step), this._value(this.element.val(), !0), 
            this._draw(), this._on(this._events), this._refresh(), this._on(this.window, {
                beforeunload:function() {
                    this.element.removeAttr("autocomplete");
                }
            });
        },
        _getCreateOptions:function() {
            var e = {}, i = this.element;
            return t.each([ "min", "max", "step" ], function(t, n) {
                var o = i.attr(n);
                void 0 !== o && o.length && (e[n] = o);
            }), e;
        },
        _events:{
            keydown:function(t) {
                this._start(t) && this._keydown(t) && t.preventDefault();
            },
            keyup:"_stop",
            focus:function() {
                this.previous = this.element.val();
            },
            blur:function(t) {
                return this.cancelBlur ? (delete this.cancelBlur, void 0) :(this._refresh(), this.previous !== this.element.val() && this._trigger("change", t), 
                void 0);
            },
            mousewheel:function(t, e) {
                if (e) {
                    if (!this.spinning && !this._start(t)) return !1;
                    this._spin((e > 0 ? 1 :-1) * this.options.step, t), clearTimeout(this.mousewheelTimer), 
                    this.mousewheelTimer = this._delay(function() {
                        this.spinning && this._stop(t);
                    }, 100), t.preventDefault();
                }
            },
            "mousedown .ui-spinner-button":function(e) {
                function i() {
                    var t = this.element[0] === this.document[0].activeElement;
                    t || (this.element.focus(), this.previous = n, this._delay(function() {
                        this.previous = n;
                    }));
                }
                var n;
                n = this.element[0] === this.document[0].activeElement ? this.previous :this.element.val(), 
                e.preventDefault(), i.call(this), this.cancelBlur = !0, this._delay(function() {
                    delete this.cancelBlur, i.call(this);
                }), this._start(e) !== !1 && this._repeat(null, t(e.currentTarget).hasClass("ui-spinner-up") ? 1 :-1, e);
            },
            "mouseup .ui-spinner-button":"_stop",
            "mouseenter .ui-spinner-button":function(e) {
                return t(e.currentTarget).hasClass("ui-state-active") ? this._start(e) === !1 ? !1 :(this._repeat(null, t(e.currentTarget).hasClass("ui-spinner-up") ? 1 :-1, e), 
                void 0) :void 0;
            },
            "mouseleave .ui-spinner-button":"_stop"
        },
        _draw:function() {
            var t = this.uiSpinner = this.element.addClass("ui-spinner-input").attr("autocomplete", "off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());
            this.element.attr("role", "spinbutton"), this.buttons = t.find(".ui-spinner-button").attr("tabIndex", -1).button().removeClass("ui-corner-all"), 
            this.buttons.height() > Math.ceil(.5 * t.height()) && t.height() > 0 && t.height(t.height()), 
            this.options.disabled && this.disable();
        },
        _keydown:function(e) {
            var i = this.options, n = t.ui.keyCode;
            switch (e.keyCode) {
              case n.UP:
                return this._repeat(null, 1, e), !0;

              case n.DOWN:
                return this._repeat(null, -1, e), !0;

              case n.PAGE_UP:
                return this._repeat(null, i.page, e), !0;

              case n.PAGE_DOWN:
                return this._repeat(null, -i.page, e), !0;
            }
            return !1;
        },
        _uiSpinnerHtml:function() {
            return "<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>";
        },
        _buttonHtml:function() {
            return "<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon " + this.options.icons.up + "'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon " + this.options.icons.down + "'>&#9660;</span></a>";
        },
        _start:function(t) {
            return this.spinning || this._trigger("start", t) !== !1 ? (this.counter || (this.counter = 1), 
            this.spinning = !0, !0) :!1;
        },
        _repeat:function(t, e, i) {
            t = t || 500, clearTimeout(this.timer), this.timer = this._delay(function() {
                this._repeat(40, e, i);
            }, t), this._spin(e * this.options.step, i);
        },
        _spin:function(t, e) {
            var i = this.value() || 0;
            this.counter || (this.counter = 1), i = this._adjustValue(i + t * this._increment(this.counter)), 
            this.spinning && this._trigger("spin", e, {
                value:i
            }) === !1 || (this._value(i), this.counter++);
        },
        _increment:function(e) {
            var i = this.options.incremental;
            return i ? t.isFunction(i) ? i(e) :Math.floor(e * e * e / 5e4 - e * e / 500 + 17 * e / 200 + 1) :1;
        },
        _precision:function() {
            var t = this._precisionOf(this.options.step);
            return null !== this.options.min && (t = Math.max(t, this._precisionOf(this.options.min))), 
            t;
        },
        _precisionOf:function(t) {
            var e = t.toString(), i = e.indexOf(".");
            return -1 === i ? 0 :e.length - i - 1;
        },
        _adjustValue:function(t) {
            var e, i, n = this.options;
            return e = null !== n.min ? n.min :0, i = t - e, i = Math.round(i / n.step) * n.step, 
            t = e + i, t = parseFloat(t.toFixed(this._precision())), null !== n.max && t > n.max ? n.max :null !== n.min && t < n.min ? n.min :t;
        },
        _stop:function(t) {
            this.spinning && (clearTimeout(this.timer), clearTimeout(this.mousewheelTimer), 
            this.counter = 0, this.spinning = !1, this._trigger("stop", t));
        },
        _setOption:function(t, e) {
            if ("culture" === t || "numberFormat" === t) {
                var i = this._parse(this.element.val());
                return this.options[t] = e, this.element.val(this._format(i)), void 0;
            }
            ("max" === t || "min" === t || "step" === t) && "string" == typeof e && (e = this._parse(e)), 
            this._super(t, e), "disabled" === t && (e ? (this.element.prop("disabled", !0), 
            this.buttons.button("disable")) :(this.element.prop("disabled", !1), this.buttons.button("enable")));
        },
        _setOptions:e(function(t) {
            this._super(t), this._value(this.element.val());
        }),
        _parse:function(t) {
            return "string" == typeof t && "" !== t && (t = window.Globalize && this.options.numberFormat ? Globalize.parseFloat(t, 10, this.options.culture) :+t), 
            "" === t || isNaN(t) ? null :t;
        },
        _format:function(t) {
            return "" === t ? "" :window.Globalize && this.options.numberFormat ? Globalize.format(t, this.options.numberFormat, this.options.culture) :t;
        },
        _refresh:function() {
            this.element.attr({
                "aria-valuemin":this.options.min,
                "aria-valuemax":this.options.max,
                "aria-valuenow":this._parse(this.element.val())
            });
        },
        _value:function(t, e) {
            var i;
            "" !== t && (i = this._parse(t), null !== i && (e || (i = this._adjustValue(i)), 
            t = this._format(i))), this.element.val(t), this._refresh();
        },
        _destroy:function() {
            this.element.removeClass("ui-spinner-input").prop("disabled", !1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"), 
            this.uiSpinner.replaceWith(this.element);
        },
        stepUp:e(function(t) {
            this._stepUp(t);
        }),
        _stepUp:function(t) {
            this._spin((t || 1) * this.options.step);
        },
        stepDown:e(function(t) {
            this._stepDown(t);
        }),
        _stepDown:function(t) {
            this._spin((t || 1) * -this.options.step);
        },
        pageUp:e(function(t) {
            this._stepUp((t || 1) * this.options.page);
        }),
        pageDown:e(function(t) {
            this._stepDown((t || 1) * this.options.page);
        }),
        value:function(t) {
            return arguments.length ? (e(this._value).call(this, t), void 0) :this._parse(this.element.val());
        },
        widget:function() {
            return this.uiSpinner;
        }
    });
}(jQuery), function(t, e) {
    function i() {
        return ++o;
    }
    function n(t) {
        return t.hash.length > 1 && t.href.replace(r, "") === location.href.replace(r, "").replace(/\s/g, "%20");
    }
    var o = 0, r = /#.*$/;
    t.widget("ui.tabs", {
        version:"1.9.2",
        delay:300,
        options:{
            active:null,
            collapsible:!1,
            event:"click",
            heightStyle:"content",
            hide:null,
            show:null,
            activate:null,
            beforeActivate:null,
            beforeLoad:null,
            load:null
        },
        _create:function() {
            var e = this, i = this.options, n = i.active, o = location.hash.substring(1);
            this.running = !1, this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible", i.collapsible).delegate(".ui-tabs-nav > li", "mousedown" + this.eventNamespace, function(e) {
                t(this).is(".ui-state-disabled") && e.preventDefault();
            }).delegate(".ui-tabs-anchor", "focus" + this.eventNamespace, function() {
                t(this).closest("li").is(".ui-state-disabled") && this.blur();
            }), this._processTabs(), null === n && (o && this.tabs.each(function(e, i) {
                return t(i).attr("aria-controls") === o ? (n = e, !1) :void 0;
            }), null === n && (n = this.tabs.index(this.tabs.filter(".ui-tabs-active"))), (null === n || -1 === n) && (n = this.tabs.length ? 0 :!1)), 
            n !== !1 && (n = this.tabs.index(this.tabs.eq(n)), -1 === n && (n = i.collapsible ? !1 :0)), 
            i.active = n, !i.collapsible && i.active === !1 && this.anchors.length && (i.active = 0), 
            t.isArray(i.disabled) && (i.disabled = t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"), function(t) {
                return e.tabs.index(t);
            }))).sort()), this.active = this.options.active !== !1 && this.anchors.length ? this._findActive(this.options.active) :t(), 
            this._refresh(), this.active.length && this.load(i.active);
        },
        _getCreateEventData:function() {
            return {
                tab:this.active,
                panel:this.active.length ? this._getPanelForTab(this.active) :t()
            };
        },
        _tabKeydown:function(e) {
            var i = t(this.document[0].activeElement).closest("li"), n = this.tabs.index(i), o = !0;
            if (!this._handlePageNav(e)) {
                switch (e.keyCode) {
                  case t.ui.keyCode.RIGHT:
                  case t.ui.keyCode.DOWN:
                    n++;
                    break;

                  case t.ui.keyCode.UP:
                  case t.ui.keyCode.LEFT:
                    o = !1, n--;
                    break;

                  case t.ui.keyCode.END:
                    n = this.anchors.length - 1;
                    break;

                  case t.ui.keyCode.HOME:
                    n = 0;
                    break;

                  case t.ui.keyCode.SPACE:
                    return e.preventDefault(), clearTimeout(this.activating), this._activate(n), void 0;

                  case t.ui.keyCode.ENTER:
                    return e.preventDefault(), clearTimeout(this.activating), this._activate(n === this.options.active ? !1 :n), 
                    void 0;

                  default:
                    return;
                }
                e.preventDefault(), clearTimeout(this.activating), n = this._focusNextTab(n, o), 
                e.ctrlKey || (i.attr("aria-selected", "false"), this.tabs.eq(n).attr("aria-selected", "true"), 
                this.activating = this._delay(function() {
                    this.option("active", n);
                }, this.delay));
            }
        },
        _panelKeydown:function(e) {
            this._handlePageNav(e) || e.ctrlKey && e.keyCode === t.ui.keyCode.UP && (e.preventDefault(), 
            this.active.focus());
        },
        _handlePageNav:function(e) {
            return e.altKey && e.keyCode === t.ui.keyCode.PAGE_UP ? (this._activate(this._focusNextTab(this.options.active - 1, !1)), 
            !0) :e.altKey && e.keyCode === t.ui.keyCode.PAGE_DOWN ? (this._activate(this._focusNextTab(this.options.active + 1, !0)), 
            !0) :void 0;
        },
        _findNextTab:function(e, i) {
            function n() {
                return e > o && (e = 0), 0 > e && (e = o), e;
            }
            for (var o = this.tabs.length - 1; -1 !== t.inArray(n(), this.options.disabled); ) e = i ? e + 1 :e - 1;
            return e;
        },
        _focusNextTab:function(t, e) {
            return t = this._findNextTab(t, e), this.tabs.eq(t).focus(), t;
        },
        _setOption:function(t, e) {
            return "active" === t ? (this._activate(e), void 0) :"disabled" === t ? (this._setupDisabled(e), 
            void 0) :(this._super(t, e), "collapsible" === t && (this.element.toggleClass("ui-tabs-collapsible", e), 
            e || this.options.active !== !1 || this._activate(0)), "event" === t && this._setupEvents(e), 
            "heightStyle" === t && this._setupHeightStyle(e), void 0);
        },
        _tabId:function(t) {
            return t.attr("aria-controls") || "ui-tabs-" + i();
        },
        _sanitizeSelector:function(t) {
            return t ? t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&") :"";
        },
        refresh:function() {
            var e = this.options, i = this.tablist.children(":has(a[href])");
            e.disabled = t.map(i.filter(".ui-state-disabled"), function(t) {
                return i.index(t);
            }), this._processTabs(), e.active !== !1 && this.anchors.length ? this.active.length && !t.contains(this.tablist[0], this.active[0]) ? this.tabs.length === e.disabled.length ? (e.active = !1, 
            this.active = t()) :this._activate(this._findNextTab(Math.max(0, e.active - 1), !1)) :e.active = this.tabs.index(this.active) :(e.active = !1, 
            this.active = t()), this._refresh();
        },
        _refresh:function() {
            this._setupDisabled(this.options.disabled), this._setupEvents(this.options.event), 
            this._setupHeightStyle(this.options.heightStyle), this.tabs.not(this.active).attr({
                "aria-selected":"false",
                tabIndex:-1
            }), this.panels.not(this._getPanelForTab(this.active)).hide().attr({
                "aria-expanded":"false",
                "aria-hidden":"true"
            }), this.active.length ? (this.active.addClass("ui-tabs-active ui-state-active").attr({
                "aria-selected":"true",
                tabIndex:0
            }), this._getPanelForTab(this.active).show().attr({
                "aria-expanded":"true",
                "aria-hidden":"false"
            })) :this.tabs.eq(0).attr("tabIndex", 0);
        },
        _processTabs:function() {
            var e = this;
            this.tablist = this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role", "tablist"), 
            this.tabs = this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({
                role:"tab",
                tabIndex:-1
            }), this.anchors = this.tabs.map(function() {
                return t("a", this)[0];
            }).addClass("ui-tabs-anchor").attr({
                role:"presentation",
                tabIndex:-1
            }), this.panels = t(), this.anchors.each(function(i, o) {
                var r, s, a, l = t(o).uniqueId().attr("id"), c = t(o).closest("li"), h = c.attr("aria-controls");
                n(o) ? (r = o.hash, s = e.element.find(e._sanitizeSelector(r))) :(a = e._tabId(c), 
                r = "#" + a, s = e.element.find(r), s.length || (s = e._createPanel(a), s.insertAfter(e.panels[i - 1] || e.tablist)), 
                s.attr("aria-live", "polite")), s.length && (e.panels = e.panels.add(s)), h && c.data("ui-tabs-aria-controls", h), 
                c.attr({
                    "aria-controls":r.substring(1),
                    "aria-labelledby":l
                }), s.attr("aria-labelledby", l);
            }), this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role", "tabpanel");
        },
        _getList:function() {
            return this.element.find("ol,ul").eq(0);
        },
        _createPanel:function(e) {
            return t("<div>").attr("id", e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy", !0);
        },
        _setupDisabled:function(e) {
            t.isArray(e) && (e.length ? e.length === this.anchors.length && (e = !0) :e = !1);
            for (var i, n = 0; i = this.tabs[n]; n++) e === !0 || -1 !== t.inArray(n, e) ? t(i).addClass("ui-state-disabled").attr("aria-disabled", "true") :t(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");
            this.options.disabled = e;
        },
        _setupEvents:function(e) {
            var i = {
                click:function(t) {
                    t.preventDefault();
                }
            };
            e && t.each(e.split(" "), function(t, e) {
                i[e] = "_eventHandler";
            }), this._off(this.anchors.add(this.tabs).add(this.panels)), this._on(this.anchors, i), 
            this._on(this.tabs, {
                keydown:"_tabKeydown"
            }), this._on(this.panels, {
                keydown:"_panelKeydown"
            }), this._focusable(this.tabs), this._hoverable(this.tabs);
        },
        _setupHeightStyle:function(e) {
            var i, n, o = this.element.parent();
            "fill" === e ? (t.support.minHeight || (n = o.css("overflow"), o.css("overflow", "hidden")), 
            i = o.height(), this.element.siblings(":visible").each(function() {
                var e = t(this), n = e.css("position");
                "absolute" !== n && "fixed" !== n && (i -= e.outerHeight(!0));
            }), n && o.css("overflow", n), this.element.children().not(this.panels).each(function() {
                i -= t(this).outerHeight(!0);
            }), this.panels.each(function() {
                t(this).height(Math.max(0, i - t(this).innerHeight() + t(this).height()));
            }).css("overflow", "auto")) :"auto" === e && (i = 0, this.panels.each(function() {
                i = Math.max(i, t(this).height("").height());
            }).height(i));
        },
        _eventHandler:function(e) {
            var i = this.options, n = this.active, o = t(e.currentTarget), r = o.closest("li"), s = r[0] === n[0], a = s && i.collapsible, l = a ? t() :this._getPanelForTab(r), c = n.length ? this._getPanelForTab(n) :t(), h = {
                oldTab:n,
                oldPanel:c,
                newTab:a ? t() :r,
                newPanel:l
            };
            e.preventDefault(), r.hasClass("ui-state-disabled") || r.hasClass("ui-tabs-loading") || this.running || s && !i.collapsible || this._trigger("beforeActivate", e, h) === !1 || (i.active = a ? !1 :this.tabs.index(r), 
            this.active = s ? t() :r, this.xhr && this.xhr.abort(), c.length || l.length || t.error("jQuery UI Tabs: Mismatching fragment identifier."), 
            l.length && this.load(this.tabs.index(r), e), this._toggle(e, h));
        },
        _toggle:function(e, i) {
            function n() {
                r.running = !1, r._trigger("activate", e, i);
            }
            function o() {
                i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"), s.length && r.options.show ? r._show(s, r.options.show, n) :(s.show(), 
                n());
            }
            var r = this, s = i.newPanel, a = i.oldPanel;
            this.running = !0, a.length && this.options.hide ? this._hide(a, this.options.hide, function() {
                i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"), o();
            }) :(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"), a.hide(), 
            o()), a.attr({
                "aria-expanded":"false",
                "aria-hidden":"true"
            }), i.oldTab.attr("aria-selected", "false"), s.length && a.length ? i.oldTab.attr("tabIndex", -1) :s.length && this.tabs.filter(function() {
                return 0 === t(this).attr("tabIndex");
            }).attr("tabIndex", -1), s.attr({
                "aria-expanded":"true",
                "aria-hidden":"false"
            }), i.newTab.attr({
                "aria-selected":"true",
                tabIndex:0
            });
        },
        _activate:function(e) {
            var i, n = this._findActive(e);
            n[0] !== this.active[0] && (n.length || (n = this.active), i = n.find(".ui-tabs-anchor")[0], 
            this._eventHandler({
                target:i,
                currentTarget:i,
                preventDefault:t.noop
            }));
        },
        _findActive:function(e) {
            return e === !1 ? t() :this.tabs.eq(e);
        },
        _getIndex:function(t) {
            return "string" == typeof t && (t = this.anchors.index(this.anchors.filter("[href$='" + t + "']"))), 
            t;
        },
        _destroy:function() {
            this.xhr && this.xhr.abort(), this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"), 
            this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"), 
            this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId(), 
            this.tabs.add(this.panels).each(function() {
                t.data(this, "ui-tabs-destroy") ? t(this).remove() :t(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role");
            }), this.tabs.each(function() {
                var e = t(this), i = e.data("ui-tabs-aria-controls");
                i ? e.attr("aria-controls", i) :e.removeAttr("aria-controls");
            }), this.panels.show(), "content" !== this.options.heightStyle && this.panels.css("height", "");
        },
        enable:function(i) {
            var n = this.options.disabled;
            n !== !1 && (i === e ? n = !1 :(i = this._getIndex(i), n = t.isArray(n) ? t.map(n, function(t) {
                return t !== i ? t :null;
            }) :t.map(this.tabs, function(t, e) {
                return e !== i ? e :null;
            })), this._setupDisabled(n));
        },
        disable:function(i) {
            var n = this.options.disabled;
            if (n !== !0) {
                if (i === e) n = !0; else {
                    if (i = this._getIndex(i), -1 !== t.inArray(i, n)) return;
                    n = t.isArray(n) ? t.merge([ i ], n).sort() :[ i ];
                }
                this._setupDisabled(n);
            }
        },
        load:function(e, i) {
            e = this._getIndex(e);
            var o = this, r = this.tabs.eq(e), s = r.find(".ui-tabs-anchor"), a = this._getPanelForTab(r), l = {
                tab:r,
                panel:a
            };
            n(s[0]) || (this.xhr = t.ajax(this._ajaxSettings(s, i, l)), this.xhr && "canceled" !== this.xhr.statusText && (r.addClass("ui-tabs-loading"), 
            a.attr("aria-busy", "true"), this.xhr.success(function(t) {
                setTimeout(function() {
                    a.html(t), o._trigger("load", i, l);
                }, 1);
            }).complete(function(t, e) {
                setTimeout(function() {
                    "abort" === e && o.panels.stop(!1, !0), r.removeClass("ui-tabs-loading"), a.removeAttr("aria-busy"), 
                    t === o.xhr && delete o.xhr;
                }, 1);
            })));
        },
        _ajaxSettings:function(e, i, n) {
            var o = this;
            return {
                url:e.attr("href"),
                beforeSend:function(e, r) {
                    return o._trigger("beforeLoad", i, t.extend({
                        jqXHR:e,
                        ajaxSettings:r
                    }, n));
                }
            };
        },
        _getPanelForTab:function(e) {
            var i = t(e).attr("aria-controls");
            return this.element.find(this._sanitizeSelector("#" + i));
        }
    }), t.uiBackCompat !== !1 && (t.ui.tabs.prototype._ui = function(t, e) {
        return {
            tab:t,
            panel:e,
            index:this.anchors.index(t)
        };
    }, t.widget("ui.tabs", t.ui.tabs, {
        url:function(t, e) {
            this.anchors.eq(t).attr("href", e);
        }
    }), t.widget("ui.tabs", t.ui.tabs, {
        options:{
            ajaxOptions:null,
            cache:!1
        },
        _create:function() {
            this._super();
            var e = this;
            this._on({
                tabsbeforeload:function(i, n) {
                    return t.data(n.tab[0], "cache.tabs") ? (i.preventDefault(), void 0) :(n.jqXHR.success(function() {
                        e.options.cache && t.data(n.tab[0], "cache.tabs", !0);
                    }), void 0);
                }
            });
        },
        _ajaxSettings:function(e, i, n) {
            var o = this.options.ajaxOptions;
            return t.extend({}, o, {
                error:function(t, e) {
                    try {
                        o.error(t, e, n.tab.closest("li").index(), n.tab[0]);
                    } catch (i) {}
                }
            }, this._superApply(arguments));
        },
        _setOption:function(t, e) {
            "cache" === t && e === !1 && this.anchors.removeData("cache.tabs"), this._super(t, e);
        },
        _destroy:function() {
            this.anchors.removeData("cache.tabs"), this._super();
        },
        url:function(t) {
            this.anchors.eq(t).removeData("cache.tabs"), this._superApply(arguments);
        }
    }), t.widget("ui.tabs", t.ui.tabs, {
        abort:function() {
            this.xhr && this.xhr.abort();
        }
    }), t.widget("ui.tabs", t.ui.tabs, {
        options:{
            spinner:"<em>Loading&#8230;</em>"
        },
        _create:function() {
            this._super(), this._on({
                tabsbeforeload:function(t, e) {
                    if (t.target === this.element[0] && this.options.spinner) {
                        var i = e.tab.find("span"), n = i.html();
                        i.html(this.options.spinner), e.jqXHR.complete(function() {
                            i.html(n);
                        });
                    }
                }
            });
        }
    }), t.widget("ui.tabs", t.ui.tabs, {
        options:{
            enable:null,
            disable:null
        },
        enable:function(e) {
            var i, n = this.options;
            (e && n.disabled === !0 || t.isArray(n.disabled) && -1 !== t.inArray(e, n.disabled)) && (i = !0), 
            this._superApply(arguments), i && this._trigger("enable", null, this._ui(this.anchors[e], this.panels[e]));
        },
        disable:function(e) {
            var i, n = this.options;
            (e && n.disabled === !1 || t.isArray(n.disabled) && -1 === t.inArray(e, n.disabled)) && (i = !0), 
            this._superApply(arguments), i && this._trigger("disable", null, this._ui(this.anchors[e], this.panels[e]));
        }
    }), t.widget("ui.tabs", t.ui.tabs, {
        options:{
            add:null,
            remove:null,
            tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"
        },
        add:function(i, n, o) {
            o === e && (o = this.anchors.length);
            var r, s, a = this.options, l = t(a.tabTemplate.replace(/#\{href\}/g, i).replace(/#\{label\}/g, n)), c = i.indexOf("#") ? this._tabId(l) :i.replace("#", "");
            return l.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy", !0), 
            l.attr("aria-controls", c), r = o >= this.tabs.length, s = this.element.find("#" + c), 
            s.length || (s = this._createPanel(c), r ? o > 0 ? s.insertAfter(this.panels.eq(-1)) :s.appendTo(this.element) :s.insertBefore(this.panels[o])), 
            s.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(), r ? l.appendTo(this.tablist) :l.insertBefore(this.tabs[o]), 
            a.disabled = t.map(a.disabled, function(t) {
                return t >= o ? ++t :t;
            }), this.refresh(), 1 === this.tabs.length && a.active === !1 && this.option("active", 0), 
            this._trigger("add", null, this._ui(this.anchors[o], this.panels[o])), this;
        },
        remove:function(e) {
            e = this._getIndex(e);
            var i = this.options, n = this.tabs.eq(e).remove(), o = this._getPanelForTab(n).remove();
            return n.hasClass("ui-tabs-active") && this.anchors.length > 2 && this._activate(e + (e + 1 < this.anchors.length ? 1 :-1)), 
            i.disabled = t.map(t.grep(i.disabled, function(t) {
                return t !== e;
            }), function(t) {
                return t >= e ? --t :t;
            }), this.refresh(), this._trigger("remove", null, this._ui(n.find("a")[0], o[0])), 
            this;
        }
    }), t.widget("ui.tabs", t.ui.tabs, {
        length:function() {
            return this.anchors.length;
        }
    }), t.widget("ui.tabs", t.ui.tabs, {
        options:{
            idPrefix:"ui-tabs-"
        },
        _tabId:function(e) {
            var n = e.is("li") ? e.find("a[href]") :e;
            return n = n[0], t(n).closest("li").attr("aria-controls") || n.title && n.title.replace(/\s/g, "_").replace(/[^\w\u00c0-\uFFFF\-]/g, "") || this.options.idPrefix + i();
        }
    }), t.widget("ui.tabs", t.ui.tabs, {
        options:{
            panelTemplate:"<div></div>"
        },
        _createPanel:function(e) {
            return t(this.options.panelTemplate).attr("id", e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy", !0);
        }
    }), t.widget("ui.tabs", t.ui.tabs, {
        _create:function() {
            var t = this.options;
            null === t.active && t.selected !== e && (t.active = -1 === t.selected ? !1 :t.selected), 
            this._super(), t.selected = t.active, t.selected === !1 && (t.selected = -1);
        },
        _setOption:function(t, e) {
            if ("selected" !== t) return this._super(t, e);
            var i = this.options;
            this._super("active", -1 === e ? !1 :e), i.selected = i.active, i.selected === !1 && (i.selected = -1);
        },
        _eventHandler:function() {
            this._superApply(arguments), this.options.selected = this.options.active, this.options.selected === !1 && (this.options.selected = -1);
        }
    }), t.widget("ui.tabs", t.ui.tabs, {
        options:{
            show:null,
            select:null
        },
        _create:function() {
            this._super(), this.options.active !== !1 && this._trigger("show", null, this._ui(this.active.find(".ui-tabs-anchor")[0], this._getPanelForTab(this.active)[0]));
        },
        _trigger:function(t, e, i) {
            var n, o, r = this._superApply(arguments);
            return r ? ("beforeActivate" === t ? (n = i.newTab.length ? i.newTab :i.oldTab, 
            o = i.newPanel.length ? i.newPanel :i.oldPanel, r = this._super("select", e, {
                tab:n.find(".ui-tabs-anchor")[0],
                panel:o[0],
                index:n.closest("li").index()
            })) :"activate" === t && i.newTab.length && (r = this._super("show", e, {
                tab:i.newTab.find(".ui-tabs-anchor")[0],
                panel:i.newPanel[0],
                index:i.newTab.closest("li").index()
            })), r) :!1;
        }
    }), t.widget("ui.tabs", t.ui.tabs, {
        select:function(t) {
            if (t = this._getIndex(t), -1 === t) {
                if (!this.options.collapsible || -1 === this.options.selected) return;
                t = this.options.selected;
            }
            this.anchors.eq(t).trigger(this.options.event + this.eventNamespace);
        }
    }), function() {
        var e = 0;
        t.widget("ui.tabs", t.ui.tabs, {
            options:{
                cookie:null
            },
            _create:function() {
                var t, e = this.options;
                null == e.active && e.cookie && (t = parseInt(this._cookie(), 10), -1 === t && (t = !1), 
                e.active = t), this._super();
            },
            _cookie:function(i) {
                var n = [ this.cookie || (this.cookie = this.options.cookie.name || "ui-tabs-" + ++e) ];
                return arguments.length && (n.push(i === !1 ? -1 :i), n.push(this.options.cookie)), 
                t.cookie.apply(null, n);
            },
            _refresh:function() {
                this._super(), this.options.cookie && this._cookie(this.options.active, this.options.cookie);
            },
            _eventHandler:function() {
                this._superApply(arguments), this.options.cookie && this._cookie(this.options.active, this.options.cookie);
            },
            _destroy:function() {
                this._super(), this.options.cookie && this._cookie(null, this.options.cookie);
            }
        });
    }(), t.widget("ui.tabs", t.ui.tabs, {
        _trigger:function(e, i, n) {
            var o = t.extend({}, n);
            return "load" === e && (o.panel = o.panel[0], o.tab = o.tab.find(".ui-tabs-anchor")[0]), 
            this._super(e, i, o);
        }
    }), t.widget("ui.tabs", t.ui.tabs, {
        options:{
            fx:null
        },
        _getFx:function() {
            var e, i, n = this.options.fx;
            return n && (t.isArray(n) ? (e = n[0], i = n[1]) :e = i = n), n ? {
                show:i,
                hide:e
            } :null;
        },
        _toggle:function(t, e) {
            function i() {
                o.running = !1, o._trigger("activate", t, e);
            }
            function n() {
                e.newTab.closest("li").addClass("ui-tabs-active ui-state-active"), r.length && a.show ? r.animate(a.show, a.show.duration, function() {
                    i();
                }) :(r.show(), i());
            }
            var o = this, r = e.newPanel, s = e.oldPanel, a = this._getFx();
            return a ? (o.running = !0, s.length && a.hide ? s.animate(a.hide, a.hide.duration, function() {
                e.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"), n();
            }) :(e.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"), s.hide(), 
            n()), void 0) :this._super(t, e);
        }
    }));
}(jQuery), function(t) {
    function e(e, i) {
        var n = (e.attr("aria-describedby") || "").split(/\s+/);
        n.push(i), e.data("ui-tooltip-id", i).attr("aria-describedby", t.trim(n.join(" ")));
    }
    function i(e) {
        var i = e.data("ui-tooltip-id"), n = (e.attr("aria-describedby") || "").split(/\s+/), o = t.inArray(i, n);
        -1 !== o && n.splice(o, 1), e.removeData("ui-tooltip-id"), n = t.trim(n.join(" ")), 
        n ? e.attr("aria-describedby", n) :e.removeAttr("aria-describedby");
    }
    var n = 0;
    t.widget("ui.tooltip", {
        version:"1.9.2",
        options:{
            content:function() {
                return t(this).attr("title");
            },
            hide:!0,
            items:"[title]:not([disabled])",
            position:{
                my:"left top+15",
                at:"left bottom",
                collision:"flipfit flip"
            },
            show:!0,
            tooltipClass:null,
            track:!1,
            close:null,
            open:null
        },
        _create:function() {
            this._on({
                mouseover:"open",
                focusin:"open"
            }), this.tooltips = {}, this.parents = {}, this.options.disabled && this._disable();
        },
        _setOption:function(e, i) {
            var n = this;
            return "disabled" === e ? (this[i ? "_disable" :"_enable"](), this.options[e] = i, 
            void 0) :(this._super(e, i), "content" === e && t.each(this.tooltips, function(t, e) {
                n._updateContent(e);
            }), void 0);
        },
        _disable:function() {
            var e = this;
            t.each(this.tooltips, function(i, n) {
                var o = t.Event("blur");
                o.target = o.currentTarget = n[0], e.close(o, !0);
            }), this.element.find(this.options.items).andSelf().each(function() {
                var e = t(this);
                e.is("[title]") && e.data("ui-tooltip-title", e.attr("title")).attr("title", "");
            });
        },
        _enable:function() {
            this.element.find(this.options.items).andSelf().each(function() {
                var e = t(this);
                e.data("ui-tooltip-title") && e.attr("title", e.data("ui-tooltip-title"));
            });
        },
        open:function(e) {
            var i = this, n = t(e ? e.target :this.element).closest(this.options.items);
            n.length && !n.data("ui-tooltip-id") && (n.attr("title") && n.data("ui-tooltip-title", n.attr("title")), 
            n.data("ui-tooltip-open", !0), e && "mouseover" === e.type && n.parents().each(function() {
                var e, n = t(this);
                n.data("ui-tooltip-open") && (e = t.Event("blur"), e.target = e.currentTarget = this, 
                i.close(e, !0)), n.attr("title") && (n.uniqueId(), i.parents[this.id] = {
                    element:this,
                    title:n.attr("title")
                }, n.attr("title", ""));
            }), this._updateContent(n, e));
        },
        _updateContent:function(t, e) {
            var i, n = this.options.content, o = this, r = e ? e.type :null;
            return "string" == typeof n ? this._open(e, t, n) :(i = n.call(t[0], function(i) {
                t.data("ui-tooltip-open") && o._delay(function() {
                    e && (e.type = r), this._open(e, t, i);
                });
            }), i && this._open(e, t, i), void 0);
        },
        _open:function(i, n, o) {
            function r(t) {
                c.of = t, s.is(":hidden") || s.position(c);
            }
            var s, a, l, c = t.extend({}, this.options.position);
            if (o) {
                if (s = this._find(n), s.length) return s.find(".ui-tooltip-content").html(o), void 0;
                n.is("[title]") && (i && "mouseover" === i.type ? n.attr("title", "") :n.removeAttr("title")), 
                s = this._tooltip(n), e(n, s.attr("id")), s.find(".ui-tooltip-content").html(o), 
                this.options.track && i && /^mouse/.test(i.type) ? (this._on(this.document, {
                    mousemove:r
                }), r(i)) :s.position(t.extend({
                    of:n
                }, this.options.position)), s.hide(), this._show(s, this.options.show), this.options.show && this.options.show.delay && (l = setInterval(function() {
                    s.is(":visible") && (r(c.of), clearInterval(l));
                }, t.fx.interval)), this._trigger("open", i, {
                    tooltip:s
                }), a = {
                    keyup:function(e) {
                        if (e.keyCode === t.ui.keyCode.ESCAPE) {
                            var i = t.Event(e);
                            i.currentTarget = n[0], this.close(i, !0);
                        }
                    },
                    remove:function() {
                        this._removeTooltip(s);
                    }
                }, i && "mouseover" !== i.type || (a.mouseleave = "close"), i && "focusin" !== i.type || (a.focusout = "close"), 
                this._on(!0, n, a);
            }
        },
        close:function(e) {
            var n = this, o = t(e ? e.currentTarget :this.element), r = this._find(o);
            this.closing || (o.data("ui-tooltip-title") && o.attr("title", o.data("ui-tooltip-title")), 
            i(o), r.stop(!0), this._hide(r, this.options.hide, function() {
                n._removeTooltip(t(this));
            }), o.removeData("ui-tooltip-open"), this._off(o, "mouseleave focusout keyup"), 
            o[0] !== this.element[0] && this._off(o, "remove"), this._off(this.document, "mousemove"), 
            e && "mouseleave" === e.type && t.each(this.parents, function(e, i) {
                t(i.element).attr("title", i.title), delete n.parents[e];
            }), this.closing = !0, this._trigger("close", e, {
                tooltip:r
            }), this.closing = !1);
        },
        _tooltip:function(e) {
            var i = "ui-tooltip-" + n++, o = t("<div>").attr({
                id:i,
                role:"tooltip"
            }).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content " + (this.options.tooltipClass || ""));
            return t("<div>").addClass("ui-tooltip-content").appendTo(o), o.appendTo(this.document[0].body), 
            t.fn.bgiframe && o.bgiframe(), this.tooltips[i] = e, o;
        },
        _find:function(e) {
            var i = e.data("ui-tooltip-id");
            return i ? t("#" + i) :t();
        },
        _removeTooltip:function(t) {
            t.remove(), delete this.tooltips[t.attr("id")];
        },
        _destroy:function() {
            var e = this;
            t.each(this.tooltips, function(i, n) {
                var o = t.Event("blur");
                o.target = o.currentTarget = n[0], e.close(o, !0), t("#" + i).remove(), n.data("ui-tooltip-title") && (n.attr("title", n.data("ui-tooltip-title")), 
                n.removeData("ui-tooltip-title"));
            });
        }
    });
}(jQuery), function(t, e) {
    var i = function() {
        var e = t._data(document, "events");
        return e && e.click && t.grep(e.click, function(t) {
            return "rails" === t.namespace;
        }).length;
    };
    i() && t.error("jquery-ujs has already been loaded!");
    var n;
    t.rails = n = {
        linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",
        inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",
        formSubmitSelector:"form",
        formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",
        disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",
        enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",
        requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",
        fileInputSelector:"input[type=file]",
        linkDisableSelector:"a[data-disable-with]",
        CSRFProtection:function(e) {
            var i = t('meta[name="csrf-token"]').attr("content");
            i && e.setRequestHeader("X-CSRF-Token", i);
        },
        fire:function(e, i, n) {
            var o = t.Event(i);
            return e.trigger(o, n), o.result !== !1;
        },
        confirm:function(t) {
            return confirm(t);
        },
        ajax:function(e) {
            return t.ajax(e);
        },
        href:function(t) {
            return t.attr("href");
        },
        handleRemote:function(i) {
            var o, r, s, a, l, c, h, u;
            if (n.fire(i, "ajax:before")) {
                if (a = i.data("cross-domain"), l = a === e ? null :a, c = i.data("with-credentials") || null, 
                h = i.data("type") || t.ajaxSettings && t.ajaxSettings.dataType, i.is("form")) {
                    o = i.attr("method"), r = i.attr("action"), s = i.serializeArray();
                    var d = i.data("ujs:submit-button");
                    d && (s.push(d), i.data("ujs:submit-button", null));
                } else i.is(n.inputChangeSelector) ? (o = i.data("method"), r = i.data("url"), s = i.serialize(), 
                i.data("params") && (s = s + "&" + i.data("params"))) :(o = i.data("method"), r = n.href(i), 
                s = i.data("params") || null);
                u = {
                    type:o || "GET",
                    data:s,
                    dataType:h,
                    beforeSend:function(t, o) {
                        return o.dataType === e && t.setRequestHeader("accept", "*/*;q=0.5, " + o.accepts.script), 
                        n.fire(i, "ajax:beforeSend", [ t, o ]);
                    },
                    success:function(t, e, n) {
                        i.trigger("ajax:success", [ t, e, n ]);
                    },
                    complete:function(t, e) {
                        i.trigger("ajax:complete", [ t, e ]);
                    },
                    error:function(t, e, n) {
                        i.trigger("ajax:error", [ t, e, n ]);
                    },
                    crossDomain:l
                }, c && (u.xhrFields = {
                    withCredentials:c
                }), r && (u.url = r);
                var p = n.ajax(u);
                return i.trigger("ajax:send", p), p;
            }
            return !1;
        },
        handleMethod:function(i) {
            var o = n.href(i), r = i.data("method"), s = i.attr("target"), a = t("meta[name=csrf-token]").attr("content"), l = t("meta[name=csrf-param]").attr("content"), c = t('<form method="post" action="' + o + '"></form>'), h = '<input name="_method" value="' + r + '" type="hidden" />';
            l !== e && a !== e && (h += '<input name="' + l + '" value="' + a + '" type="hidden" />'), 
            s && c.attr("target", s), c.hide().append(h).appendTo("body"), c.submit();
        },
        disableFormElements:function(e) {
            e.find(n.disableSelector).each(function() {
                var e = t(this), i = e.is("button") ? "html" :"val";
                e.data("ujs:enable-with", e[i]()), e[i](e.data("disable-with")), e.prop("disabled", !0);
            });
        },
        enableFormElements:function(e) {
            e.find(n.enableSelector).each(function() {
                var e = t(this), i = e.is("button") ? "html" :"val";
                e.data("ujs:enable-with") && e[i](e.data("ujs:enable-with")), e.prop("disabled", !1);
            });
        },
        allowAction:function(t) {
            var e, i = t.data("confirm"), o = !1;
            return i ? (n.fire(t, "confirm") && (o = n.confirm(i), e = n.fire(t, "confirm:complete", [ o ])), 
            o && e) :!0;
        },
        blankInputs:function(e, i, n) {
            var o, r, s = t(), a = i || "input,textarea", l = e.find(a);
            return l.each(function() {
                if (o = t(this), r = o.is("input[type=checkbox],input[type=radio]") ? o.is(":checked") :o.val(), 
                !r == !n) {
                    if (o.is("input[type=radio]") && l.filter('input[type=radio]:checked[name="' + o.attr("name") + '"]').length) return !0;
                    s = s.add(o);
                }
            }), s.length ? s :!1;
        },
        nonBlankInputs:function(t, e) {
            return n.blankInputs(t, e, !0);
        },
        stopEverything:function(e) {
            return t(e.target).trigger("ujs:everythingStopped"), e.stopImmediatePropagation(), 
            !1;
        },
        callFormSubmitBindings:function(i, n) {
            var o = i.data("events"), r = !0;
            return o !== e && o.submit !== e && t.each(o.submit, function(t, e) {
                return "function" == typeof e.handler ? r = e.handler(n) :void 0;
            }), r;
        },
        disableElement:function(t) {
            t.data("ujs:enable-with", t.html()), t.html(t.data("disable-with")), t.bind("click.railsDisable", function(t) {
                return n.stopEverything(t);
            });
        },
        enableElement:function(t) {
            t.data("ujs:enable-with") !== e && (t.html(t.data("ujs:enable-with")), t.data("ujs:enable-with", !1)), 
            t.unbind("click.railsDisable");
        }
    }, n.fire(t(document), "rails:attachBindings") && (t.ajaxPrefilter(function(t, e, i) {
        t.crossDomain || n.CSRFProtection(i);
    }), t(document).delegate(n.linkDisableSelector, "ajax:complete", function() {
        n.enableElement(t(this));
    }), t(document).delegate(n.linkClickSelector, "click.rails", function(i) {
        var o = t(this), r = o.data("method"), s = o.data("params");
        if (!n.allowAction(o)) return n.stopEverything(i);
        if (o.is(n.linkDisableSelector) && n.disableElement(o), o.data("remote") !== e) {
            if (!(!i.metaKey && !i.ctrlKey || r && "GET" !== r || s)) return !0;
            var a = n.handleRemote(o);
            return a === !1 ? n.enableElement(o) :a.error(function() {
                n.enableElement(o);
            }), !1;
        }
        return o.data("method") ? (n.handleMethod(o), !1) :void 0;
    }), t(document).delegate(n.inputChangeSelector, "change.rails", function(e) {
        var i = t(this);
        return n.allowAction(i) ? (n.handleRemote(i), !1) :n.stopEverything(e);
    }), t(document).delegate(n.formSubmitSelector, "submit.rails", function(i) {
        var o = t(this), r = o.data("remote") !== e, s = n.blankInputs(o, n.requiredInputSelector), a = n.nonBlankInputs(o, n.fileInputSelector);
        if (!n.allowAction(o)) return n.stopEverything(i);
        if (s && o.attr("novalidate") == e && n.fire(o, "ajax:aborted:required", [ s ])) return n.stopEverything(i);
        if (r) {
            if (a) {
                setTimeout(function() {
                    n.disableFormElements(o);
                }, 13);
                var l = n.fire(o, "ajax:aborted:file", [ a ]);
                return l || setTimeout(function() {
                    n.enableFormElements(o);
                }, 13), l;
            }
            return !t.support.submitBubbles && t().jquery < "1.7" && n.callFormSubmitBindings(o, i) === !1 ? n.stopEverything(i) :(n.handleRemote(o), 
            !1);
        }
        setTimeout(function() {
            n.disableFormElements(o);
        }, 13);
    }), t(document).delegate(n.formInputClickSelector, "click.rails", function(e) {
        var i = t(this);
        if (!n.allowAction(i)) return n.stopEverything(e);
        var o = i.attr("name"), r = o ? {
            name:o,
            value:i.val()
        } :null;
        i.closest("form").data("ujs:submit-button", r);
    }), t(document).delegate(n.formSubmitSelector, "ajax:beforeSend.rails", function(e) {
        this == e.target && n.disableFormElements(t(this));
    }), t(document).delegate(n.formSubmitSelector, "ajax:complete.rails", function(e) {
        this == e.target && n.enableFormElements(t(this));
    }), t(function() {
        var e = t("meta[name=csrf-token]").attr("content"), i = t("meta[name=csrf-param]").attr("content");
        t('form input[name="' + i + '"]').val(e);
    }));
}(jQuery), function(t) {
    function e(t) {
        return new RegExp("^" + t + "$");
    }
    function i(t, e) {
        for (var i = Array.prototype.slice.call(arguments).splice(2), n = t.split("."), o = n.pop(), r = 0; r < n.length; r++) e = e[n[r]];
        return e[o].apply(this, i);
    }
    var n = [], o = {
        options:{
            sniffHtml:!0,
            preventSubmit:!0,
            submitError:!1,
            submitSuccess:!1,
            autoAdd:{
                helpBlocks:!0
            }
        },
        methods:{
            init:function(e) {
                var i = t.extend(!0, {}, o);
                i.options = t.extend(!0, i.options, e);
                var a = this, l = t.unique(a.map(function() {
                    return t(this).parents("form")[0];
                }).toArray());
                return t(l).bind("submit", function(e) {
                    var n = t(this), o = 0, r = n.find("input,textarea,select").not("[type=submit],[type=image]");
                    r.trigger("submit.validation").trigger("validationLostFocus.validation"), r.each(function(e, i) {
                        var n = t(i), r = n.parents(".control-group").first();
                        r.hasClass("warning") && (r.removeClass("warning").addClass("error"), o++);
                    }), r.trigger("validationLostFocus.validation"), o ? (i.options.preventSubmit && e.preventDefault(), 
                    n.addClass("error"), t.isFunction(i.options.submitError) && i.options.submitError(n, e, r.jqBootstrapValidation("collectErrors", !0))) :(n.removeClass("error"), 
                    t.isFunction(i.options.submitSuccess) && i.options.submitSuccess(n, e));
                }), this.each(function() {
                    var e = t(this), o = e.parents(".control-group").first(), a = o.find(".help-block").first(), l = e.parents("form").first(), c = [];
                    if (!a.length && i.options.autoAdd && i.options.autoAdd.helpBlocks && (a = t('<div class="help-block" />'), 
                    o.find(".controls").append(a), n.push(a[0])), i.options.sniffHtml) {
                        var h = "";
                        if (void 0 !== e.attr("pattern") && (h = "Not in the expected format<!-- data-validation-pattern-message to override -->", 
                        e.data("validationPatternMessage") && (h = e.data("validationPatternMessage")), 
                        e.data("validationPatternMessage", h), e.data("validationPatternRegex", e.attr("pattern"))), 
                        void 0 !== e.attr("max") || void 0 !== e.attr("aria-valuemax")) {
                            var u = void 0 !== e.attr("max") ? e.attr("max") :e.attr("aria-valuemax");
                            h = "Too high: Maximum of '" + u + "'<!-- data-validation-max-message to override -->", 
                            e.data("validationMaxMessage") && (h = e.data("validationMaxMessage")), e.data("validationMaxMessage", h), 
                            e.data("validationMaxMax", u);
                        }
                        if (void 0 !== e.attr("min") || void 0 !== e.attr("aria-valuemin")) {
                            var d = void 0 !== e.attr("min") ? e.attr("min") :e.attr("aria-valuemin");
                            h = "Too low: Minimum of '" + d + "'<!-- data-validation-min-message to override -->", 
                            e.data("validationMinMessage") && (h = e.data("validationMinMessage")), e.data("validationMinMessage", h), 
                            e.data("validationMinMin", d);
                        }
                        void 0 !== e.attr("maxlength") && (h = "Too long: Maximum of '" + e.attr("maxlength") + "' characters<!-- data-validation-maxlength-message to override -->", 
                        e.data("validationMaxlengthMessage") && (h = e.data("validationMaxlengthMessage")), 
                        e.data("validationMaxlengthMessage", h), e.data("validationMaxlengthMaxlength", e.attr("maxlength"))), 
                        void 0 !== e.attr("minlength") && (h = "Too short: Minimum of '" + e.attr("minlength") + "' characters<!-- data-validation-minlength-message to override -->", 
                        e.data("validationMinlengthMessage") && (h = e.data("validationMinlengthMessage")), 
                        e.data("validationMinlengthMessage", h), e.data("validationMinlengthMinlength", e.attr("minlength"))), 
                        (void 0 !== e.attr("required") || void 0 !== e.attr("aria-required")) && (h = i.builtInValidators.required.message, 
                        e.data("validationRequiredMessage") && (h = e.data("validationRequiredMessage")), 
                        e.data("validationRequiredMessage", h)), void 0 !== e.attr("type") && "number" == e.attr("type").toLowerCase() && (h = i.builtInValidators.number.message, 
                        e.data("validationNumberMessage") && (h = e.data("validationNumberMessage")), e.data("validationNumberMessage", h)), 
                        void 0 !== e.attr("type") && "email" == e.attr("type").toLowerCase() && (h = "Not a valid email address<!-- data-validator-validemail-message to override -->", 
                        e.data("validationValidemailMessage") ? h = e.data("validationValidemailMessage") :e.data("validationEmailMessage") && (h = e.data("validationEmailMessage")), 
                        e.data("validationValidemailMessage", h)), void 0 !== e.attr("minchecked") && (h = "Not enough options checked; Minimum of '" + e.attr("minchecked") + "' required<!-- data-validation-minchecked-message to override -->", 
                        e.data("validationMincheckedMessage") && (h = e.data("validationMincheckedMessage")), 
                        e.data("validationMincheckedMessage", h), e.data("validationMincheckedMinchecked", e.attr("minchecked"))), 
                        void 0 !== e.attr("maxchecked") && (h = "Too many options checked; Maximum of '" + e.attr("maxchecked") + "' required<!-- data-validation-maxchecked-message to override -->", 
                        e.data("validationMaxcheckedMessage") && (h = e.data("validationMaxcheckedMessage")), 
                        e.data("validationMaxcheckedMessage", h), e.data("validationMaxcheckedMaxchecked", e.attr("maxchecked")));
                    }
                    void 0 != e.data("validation") && (c = e.data("validation").split(",")), t.each(e.data(), function(t) {
                        var e = t.replace(/([A-Z])/g, ",$1").split(",");
                        "validation" == e[0] && e[1] && c.push(e[1]);
                    });
                    var p = c, f = [];
                    do t.each(c, function(t, e) {
                        c[t] = r(e);
                    }), c = t.unique(c), f = [], t.each(p, function(n, o) {
                        if (void 0 != e.data("validation" + o + "Shortcut")) t.each(e.data("validation" + o + "Shortcut").split(","), function(t, e) {
                            f.push(e);
                        }); else if (i.builtInValidators[o.toLowerCase()]) {
                            var s = i.builtInValidators[o.toLowerCase()];
                            "shortcut" == s.type.toLowerCase() && t.each(s.shortcut.split(","), function(t, e) {
                                e = r(e), f.push(e), c.push(e);
                            });
                        }
                    }), p = f; while (p.length > 0);
                    var g = {};
                    t.each(c, function(n, o) {
                        var s = e.data("validation" + o + "Message"), a = void 0 != s, l = !1;
                        if (s = s ? s :"'" + o + "' validation failed <!-- Add attribute 'data-validation-" + o.toLowerCase() + "-message' to input to change this message -->", 
                        t.each(i.validatorTypes, function(i, n) {
                            void 0 == g[i] && (g[i] = []), l || void 0 === e.data("validation" + o + r(n.name)) || (g[i].push(t.extend(!0, {
                                name:r(n.name),
                                message:s
                            }, n.init(e, o))), l = !0);
                        }), !l && i.builtInValidators[o.toLowerCase()]) {
                            var c = t.extend(!0, {}, i.builtInValidators[o.toLowerCase()]);
                            a && (c.message = s);
                            var h = c.type.toLowerCase();
                            "shortcut" == h ? l = !0 :t.each(i.validatorTypes, function(i, n) {
                                void 0 == g[i] && (g[i] = []), l || h != i.toLowerCase() || (e.data("validation" + o + r(n.name), c[n.name.toLowerCase()]), 
                                g[h].push(t.extend(c, n.init(e, o))), l = !0);
                            });
                        }
                        l || t.error("Cannot find validation info for '" + o + "'");
                    }), a.data("original-contents", a.data("original-contents") ? a.data("original-contents") :a.html()), 
                    a.data("original-role", a.data("original-role") ? a.data("original-role") :a.attr("role")), 
                    o.data("original-classes", o.data("original-clases") ? o.data("original-classes") :o.attr("class")), 
                    e.data("original-aria-invalid", e.data("original-aria-invalid") ? e.data("original-aria-invalid") :e.attr("aria-invalid")), 
                    e.bind("validation.validation", function(n, o) {
                        n = n;
                        var r = s(e), a = [];
                        return t.each(g, function(n, s) {
                            (r || r.length || o && o.includeEmpty || i.validatorTypes[n].blockSubmit && o && o.submitting) && t.each(s, function(t, o) {
                                i.validatorTypes[n].validate(e, r, o) && a.push(o.message);
                            });
                        }), a;
                    }), e.bind("getValidators.validation", function(t) {
                        return t = t, g;
                    }), e.bind("submit.validation", function() {
                        return e.triggerHandler("change.validation", {
                            submitting:!0
                        });
                    }), e.bind([ "keyup", "focus", "blur", "click", "keydown", "keypress", "change" ].join(".validation ") + ".validation", function(i, n) {
                        var r = s(e), c = [];
                        o.find("input,textarea,select").each(function(i, o) {
                            var r = c.length;
                            if (t.each(t(o).triggerHandler("validation.validation", n), function(t, e) {
                                c.push(e);
                            }), c.length > r) t(o).attr("aria-invalid", "true"); else {
                                var s = e.data("original-aria-invalid");
                                t(o).attr("aria-invalid", void 0 !== s ? s :!1);
                            }
                        }), l.find("input,select,textarea").not(e).not('[name="' + e.attr("name") + '"]').trigger("validationLostFocus.validation"), 
                        c = t.unique(c), c.length ? (o.removeClass("success error").addClass("warning"), 
                        a.html('<ul role="alert"><li>' + c.join("</li><li>") + "</li></ul>")) :(o.removeClass("warning error success"), 
                        r.length > 0 && o.addClass("success"), a.html(a.data("original-contents"))), "blur" == i.type && o.removeClass("success");
                    }), e.bind("validationLostFocus.validation", function() {
                        o.removeClass("success");
                    });
                });
            },
            destroy:function() {
                return this.each(function() {
                    var e = t(this), i = e.parents(".control-group").first(), o = i.find(".help-block").first();
                    e.unbind(".validation"), o.html(o.data("original-contents")), i.attr("class", i.data("original-classes")), 
                    e.attr("aria-invalid", e.data("original-aria-invalid")), o.attr("role", e.data("original-role")), 
                    n.indexOf(o[0]) > -1 && o.remove();
                });
            },
            collectErrors:function() {
                var e = {};
                return this.each(function(i, n) {
                    var o = t(n), r = o.attr("name"), s = o.triggerHandler("validation.validation", {
                        includeEmpty:!0
                    });
                    e[r] = t.extend(!0, s, e[r]);
                }), t.each(e, function(t, i) {
                    0 == i.length && delete e[t];
                }), e;
            },
            hasErrors:function() {
                var e = [];
                return this.each(function(i, n) {
                    e = e.concat(t(n).triggerHandler("getValidators.validation") ? t(n).triggerHandler("validation.validation", {
                        submitting:!0
                    }) :[]);
                }), e.length > 0;
            },
            override:function(e) {
                o = t.extend(!0, o, e);
            }
        },
        validatorTypes:{
            callback:{
                name:"callback",
                init:function(t, e) {
                    return {
                        validatorName:e,
                        callback:t.data("validation" + e + "Callback"),
                        lastValue:t.val(),
                        lastValid:!0,
                        lastFinished:!0
                    };
                },
                validate:function(t, e, n) {
                    if (n.lastValue == e && n.lastFinished) return !n.lastValid;
                    if (1 == n.lastFinished) {
                        n.lastValue = e, n.lastValid = !0, n.lastFinished = !1;
                        var o = n, r = t;
                        i(n.callback, window, t, e, function(t) {
                            o.lastValue == t.value && (o.lastValid = t.valid, t.message && (o.message = t.message), 
                            o.lastFinished = !0, r.data("validation" + o.validatorName + "Message", o.message), 
                            setTimeout(function() {
                                r.trigger("change.validation");
                            }, 1));
                        });
                    }
                    return !1;
                }
            },
            ajax:{
                name:"ajax",
                init:function(t, e) {
                    return {
                        validatorName:e,
                        url:t.data("validation" + e + "Ajax"),
                        lastValue:t.val(),
                        lastValid:!0,
                        lastFinished:!0
                    };
                },
                validate:function(e, i, n) {
                    return console.log(e), n.lastValue == i && 1 == n.lastFinished ? 0 == n.lastValid :(1 == n.lastFinished && (n.lastValue = i, 
                    n.lastValid = !0, n.lastFinished = !1, t.ajax({
                        url:n.url,
                        data:"value=" + i + "&field=" + e.attr("name"),
                        dataType:"json",
                        success:function(t) {
                            n.lastValue == t.value && (n.lastValid = t.valid, t.message && (n.message = t.message), 
                            n.lastFinished = !0, e.data("validation" + n.validatorName + "Message", n.message), 
                            setTimeout(function() {
                                e.trigger("change.validation");
                            }, 1));
                        },
                        failure:function() {
                            n.lastValid = !0, n.message = "ajax call failed", n.lastFinished = !0, e.data("validation" + n.validatorName + "Message", n.message), 
                            setTimeout(function() {
                                e.trigger("change.validation");
                            }, 1);
                        }
                    })), !1);
                }
            },
            regex:{
                name:"regex",
                init:function(t, i) {
                    return {
                        regex:e(t.data("validation" + i + "Regex"))
                    };
                },
                validate:function(t, e, i) {
                    return !i.regex.test(e) && !i.negative || i.regex.test(e) && i.negative;
                }
            },
            required:{
                name:"required",
                init:function() {
                    return {};
                },
                validate:function(t, e, i) {
                    return !(0 != e.length || i.negative) || !!(e.length > 0 && i.negative);
                },
                blockSubmit:!0
            },
            match:{
                name:"match",
                init:function(t, e) {
                    var i = t.parents("form").first().find('[name="' + t.data("validation" + e + "Match") + '"]').first();
                    return i.bind("validation.validation", function() {
                        t.trigger("change.validation", {
                            submitting:!0
                        });
                    }), {
                        element:i
                    };
                },
                validate:function(t, e, i) {
                    return e != i.element.val() && !i.negative || e == i.element.val() && i.negative;
                },
                blockSubmit:!0
            },
            max:{
                name:"max",
                init:function(t, e) {
                    return {
                        max:t.data("validation" + e + "Max")
                    };
                },
                validate:function(t, e, i) {
                    return parseFloat(e, 10) > parseFloat(i.max, 10) && !i.negative || parseFloat(e, 10) <= parseFloat(i.max, 10) && i.negative;
                }
            },
            min:{
                name:"min",
                init:function(t, e) {
                    return {
                        min:t.data("validation" + e + "Min")
                    };
                },
                validate:function(t, e, i) {
                    return parseFloat(e) < parseFloat(i.min) && !i.negative || parseFloat(e) >= parseFloat(i.min) && i.negative;
                }
            },
            maxlength:{
                name:"maxlength",
                init:function(t, e) {
                    return {
                        maxlength:t.data("validation" + e + "Maxlength")
                    };
                },
                validate:function(t, e, i) {
                    return e.length > i.maxlength && !i.negative || e.length <= i.maxlength && i.negative;
                }
            },
            minlength:{
                name:"minlength",
                init:function(t, e) {
                    return {
                        minlength:t.data("validation" + e + "Minlength")
                    };
                },
                validate:function(t, e, i) {
                    return e.length < i.minlength && !i.negative || e.length >= i.minlength && i.negative;
                }
            },
            maxchecked:{
                name:"maxchecked",
                init:function(t, e) {
                    var i = t.parents("form").first().find('[name="' + t.attr("name") + '"]');
                    return i.bind("click.validation", function() {
                        t.trigger("change.validation", {
                            includeEmpty:!0
                        });
                    }), {
                        maxchecked:t.data("validation" + e + "Maxchecked"),
                        elements:i
                    };
                },
                validate:function(t, e, i) {
                    return i.elements.filter(":checked").length > i.maxchecked && !i.negative || i.elements.filter(":checked").length <= i.maxchecked && i.negative;
                },
                blockSubmit:!0
            },
            minchecked:{
                name:"minchecked",
                init:function(t, e) {
                    var i = t.parents("form").first().find('[name="' + t.attr("name") + '"]');
                    return i.bind("click.validation", function() {
                        t.trigger("change.validation", {
                            includeEmpty:!0
                        });
                    }), {
                        minchecked:t.data("validation" + e + "Minchecked"),
                        elements:i
                    };
                },
                validate:function(t, e, i) {
                    return i.elements.filter(":checked").length < i.minchecked && !i.negative || i.elements.filter(":checked").length >= i.minchecked && i.negative;
                },
                blockSubmit:!0
            }
        },
        builtInValidators:{
            email:{
                name:"Email",
                type:"shortcut",
                shortcut:"validemail"
            },
            validemail:{
                name:"Validemail",
                type:"regex",
                regex:"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}",
                message:"Not a valid email address<!-- data-validator-validemail-message to override -->"
            },
            passwordagain:{
                name:"Passwordagain",
                type:"match",
                match:"password",
                message:"Does not match the given password<!-- data-validator-paswordagain-message to override -->"
            },
            positive:{
                name:"Positive",
                type:"shortcut",
                shortcut:"number,positivenumber"
            },
            negative:{
                name:"Negative",
                type:"shortcut",
                shortcut:"number,negativenumber"
            },
            number:{
                name:"Number",
                type:"regex",
                regex:"([+-]?\\d+(\\.\\d*)?([eE][+-]?[0-9]+)?)?",
                message:"Must be a number<!-- data-validator-number-message to override -->"
            },
            integer:{
                name:"Integer",
                type:"regex",
                regex:"[+-]?\\d+",
                message:"No decimal places allowed<!-- data-validator-integer-message to override -->"
            },
            positivenumber:{
                name:"Positivenumber",
                type:"min",
                min:0,
                message:"Must be a positive number<!-- data-validator-positivenumber-message to override -->"
            },
            negativenumber:{
                name:"Negativenumber",
                type:"max",
                max:0,
                message:"Must be a negative number<!-- data-validator-negativenumber-message to override -->"
            },
            required:{
                name:"Required",
                type:"required",
                message:"This is required<!-- data-validator-required-message to override -->"
            },
            checkone:{
                name:"Checkone",
                type:"minchecked",
                minchecked:1,
                message:"Check at least one option<!-- data-validation-checkone-message to override -->"
            }
        }
    }, r = function(t) {
        return t.toLowerCase().replace(/(^|\s)([a-z])/g, function(t, e, i) {
            return e + i.toUpperCase();
        });
    }, s = function(e) {
        var i = e.val(), n = e.attr("type");
        return "checkbox" == n && (i = e.is(":checked") ? i :""), "radio" == n && (i = t('input[name="' + e.attr("name") + '"]:checked').length > 0 ? i :""), 
        i;
    };
    t.fn.jqBootstrapValidation = function(e) {
        return o.methods[e] ? o.methods[e].apply(this, Array.prototype.slice.call(arguments, 1)) :"object" != typeof e && e ? (t.error("Method " + e + " does not exist on jQuery.jqBootstrapValidation"), 
        null) :o.methods.init.apply(this, arguments);
    }, t.jqBootstrapValidation = function(e) {
        t(":input").not("[type=image],[type=submit]").jqBootstrapValidation(e);
    };
}(jQuery), function(t) {
    var e, i, n, o, r, s, a = t.navigator.userAgent, l = t.navigator.platform;
    /MSIE/.test(a) ? (e = "Internet Explorer", /IEMobile/.test(a) && (n = 1), i = /MSIE \d+[.]\d+/.exec(a)[0].split(" ")[1]) :/Chrome/.test(a) ? (e = "Chrome", 
    i = /Chrome\/[\d\.]+/.exec(a)[0].split("/")[1]) :/Opera/.test(a) ? (e = "Opera", 
    (/mini/.test(a) || /Mobile/.test(a)) && (n = 1)) :/Android/.test(a) ? (e = "Android Webkit Browser", 
    n = 1, o = /Android\s[\.\d]+/.exec(a)) :/Firefox/.test(a) ? (e = "Firefox", /Fennec/.test(a) && (n = 1), 
    i = /Firefox\/[\.\d]+/.exec(a)[0].split("/")[1]) :/Safari/.test(a) && (e = "Safari", 
    (/iPhone/.test(a) || /iPad/.test(a) || /iPod/.test(a)) && (o = "iOS", n = 1)), i || (i = /Version\/[\.\d]+/.exec(a), 
    i ? i = i[0].split("/")[1] :/Opera\/[\.\d]+/.exec(a) && (i = /Opera\/[\.\d]+/.exec(a)[0].split("/")[1])), 
    "MacIntel" === l || "MacPPC" === l ? (o = "Mac OS X", r = /10[\.\_\d]+/.exec(a), 
    r && (r = r[0], /[\_]/.test(r) && (r = r.split("_").join(".")))) :"Win32" === l || "Win64" == l ? (o = "Windows", 
    s = l.replace(/[^0-9]+/, "")) :!o && /Linux/.test(l) ? o = "Linux" :!o && /Windows/.test(a) && (o = "Windows"), 
    t.ui = {
        browser:e,
        version:i,
        mobile:n,
        os:o,
        osversion:r,
        bit:s
    };
}(this), function(t) {
    "use strict";
    function e(e) {
        var i = e.data;
        e.isDefaultPrevented() || (e.preventDefault(), t(this).ajaxSubmit(i));
    }
    function i(e) {
        var i = e.target, n = t(i);
        if (!n.is(":submit,input:image")) {
            var o = n.closest(":submit");
            if (0 === o.length) return;
            i = o[0];
        }
        var r = this;
        if (r.clk = i, "image" == i.type) if (void 0 !== e.offsetX) r.clk_x = e.offsetX, 
        r.clk_y = e.offsetY; else if ("function" == typeof t.fn.offset) {
            var s = n.offset();
            r.clk_x = e.pageX - s.left, r.clk_y = e.pageY - s.top;
        } else r.clk_x = e.pageX - i.offsetLeft, r.clk_y = e.pageY - i.offsetTop;
        setTimeout(function() {
            r.clk = r.clk_x = r.clk_y = null;
        }, 100);
    }
    function n() {
        if (t.fn.ajaxSubmit.debug) {
            var e = "[jquery.form] " + Array.prototype.join.call(arguments, "");
            window.console && window.console.log ? window.console.log(e) :window.opera && window.opera.postError && window.opera.postError(e);
        }
    }
    var o = {};
    o.fileapi = void 0 !== t("<input type='file'/>").get(0).files, o.formdata = void 0 !== window.FormData, 
    t.fn.ajaxSubmit = function(e) {
        function i(i) {
            for (var n = new FormData(), o = 0; o < i.length; o++) n.append(i[o].name, i[o].value);
            if (e.extraData) for (var r in e.extraData) e.extraData.hasOwnProperty(r) && n.append(r, e.extraData[r]);
            e.data = null;
            var s = t.extend(!0, {}, t.ajaxSettings, e, {
                contentType:!1,
                processData:!1,
                cache:!1,
                type:"POST"
            });
            e.uploadProgress && (s.xhr = function() {
                var t = jQuery.ajaxSettings.xhr();
                return t.upload && (t.upload.onprogress = function(t) {
                    var i = 0;
                    t.lengthComputable && (i = parseInt(t.position / t.total * 100, 10)), e.uploadProgress(t, t.position, t.total, i);
                }), t;
            }), s.data = null;
            var a = s.beforeSend;
            s.beforeSend = function(t, i) {
                i.data = n, a && a.call(i, t, e);
            }, t.ajax(s);
        }
        function r(i) {
            function o(t) {
                var e = t.contentWindow ? t.contentWindow.document :t.contentDocument ? t.contentDocument :t.document;
                return e;
            }
            function r() {
                function e() {
                    try {
                        var t = o(g).readyState;
                        n("state = " + t), t && "uninitialized" == t.toLowerCase() && setTimeout(e, 50);
                    } catch (i) {
                        n("Server abort: ", i, " (", i.name, ")"), a(D), b && clearTimeout(b), b = void 0;
                    }
                }
                var i = c.attr("target"), r = c.attr("action");
                w.setAttribute("target", p), s || w.setAttribute("method", "POST"), r != u.url && w.setAttribute("action", u.url), 
                u.skipEncodingOverride || s && !/post/i.test(s) || c.attr({
                    encoding:"multipart/form-data",
                    enctype:"multipart/form-data"
                }), u.timeout && (b = setTimeout(function() {
                    y = !0, a(T);
                }, u.timeout));
                var l = [];
                try {
                    if (u.extraData) for (var h in u.extraData) u.extraData.hasOwnProperty(h) && l.push(t('<input type="hidden" name="' + h + '">').attr("value", u.extraData[h]).appendTo(w)[0]);
                    u.iframeTarget || (f.appendTo("body"), g.attachEvent ? g.attachEvent("onload", a) :g.addEventListener("load", a, !1)), 
                    setTimeout(e, 15), w.submit();
                } finally {
                    w.setAttribute("action", r), i ? w.setAttribute("target", i) :c.removeAttr("target"), 
                    t(l).remove();
                }
            }
            function a(e) {
                if (!m.aborted && !k) {
                    try {
                        O = o(g);
                    } catch (i) {
                        n("cannot access response document: ", i), e = D;
                    }
                    if (e === T && m) return m.abort("timeout"), void 0;
                    if (e == D && m) return m.abort("server abort"), void 0;
                    if (O && O.location.href != u.iframeSrc || y) {
                        g.detachEvent ? g.detachEvent("onload", a) :g.removeEventListener("load", a, !1);
                        var r, s = "success";
                        try {
                            if (y) throw "timeout";
                            var l = "xml" == u.dataType || O.XMLDocument || t.isXMLDoc(O);
                            if (n("isXml=" + l), !l && window.opera && (null === O.body || !O.body.innerHTML) && --I) return n("requeing onLoad callback, DOM not available"), 
                            setTimeout(a, 250), void 0;
                            var c = O.body ? O.body :O.documentElement;
                            m.responseText = c ? c.innerHTML :null, m.responseXML = O.XMLDocument ? O.XMLDocument :O, 
                            l && (u.dataType = "xml"), m.getResponseHeader = function(t) {
                                var e = {
                                    "content-type":u.dataType
                                };
                                return e[t];
                            }, c && (m.status = Number(c.getAttribute("status")) || m.status, m.statusText = c.getAttribute("statusText") || m.statusText);
                            var h = (u.dataType || "").toLowerCase(), p = /(json|script|text)/.test(h);
                            if (p || u.textarea) {
                                var _ = O.getElementsByTagName("textarea")[0];
                                if (_) m.responseText = _.value, m.status = Number(_.getAttribute("status")) || m.status, 
                                m.statusText = _.getAttribute("statusText") || m.statusText; else if (p) {
                                    var v = O.getElementsByTagName("pre")[0], w = O.getElementsByTagName("body")[0];
                                    v ? m.responseText = v.textContent ? v.textContent :v.innerText :w && (m.responseText = w.textContent ? w.textContent :w.innerText);
                                }
                            } else "xml" == h && !m.responseXML && m.responseText && (m.responseXML = R(m.responseText));
                            try {
                                S = N(m, h, u);
                            } catch (e) {
                                s = "parsererror", m.error = r = e || s;
                            }
                        } catch (e) {
                            n("error caught: ", e), s = "error", m.error = r = e || s;
                        }
                        m.aborted && (n("upload aborted"), s = null), m.status && (s = m.status >= 200 && m.status < 300 || 304 === m.status ? "success" :"error"), 
                        "success" === s ? (u.success && u.success.call(u.context, S, "success", m), d && t.event.trigger("ajaxSuccess", [ m, u ])) :s && (void 0 === r && (r = m.statusText), 
                        u.error && u.error.call(u.context, m, s, r), d && t.event.trigger("ajaxError", [ m, u, r ])), 
                        d && t.event.trigger("ajaxComplete", [ m, u ]), d && !--t.active && t.event.trigger("ajaxStop"), 
                        u.complete && u.complete.call(u.context, m, s), k = !0, u.timeout && clearTimeout(b), 
                        setTimeout(function() {
                            u.iframeTarget || f.remove(), m.responseXML = null;
                        }, 100);
                    }
                }
            }
            var l, h, u, d, p, f, g, m, _, v, y, b, w = c[0], C = !!t.fn.prop;
            if (i) if (C) for (h = 0; h < i.length; h++) l = t(w[i[h].name]), l.prop("disabled", !1); else for (h = 0; h < i.length; h++) l = t(w[i[h].name]), 
            l.removeAttr("disabled");
            if (t(":input[name=submit],:input[id=submit]", w).length) return alert('Error: Form elements must not have name or id of "submit".'), 
            void 0;
            if (u = t.extend(!0, {}, t.ajaxSettings, e), u.context = u.context || u, p = "jqFormIO" + new Date().getTime(), 
            u.iframeTarget ? (f = t(u.iframeTarget), v = f.attr("name"), v ? p = v :f.attr("name", p)) :(f = t('<iframe name="' + p + '" src="' + u.iframeSrc + '" />'), 
            f.css({
                position:"absolute",
                top:"-1000px",
                left:"-1000px"
            })), g = f[0], m = {
                aborted:0,
                responseText:null,
                responseXML:null,
                status:0,
                statusText:"n/a",
                getAllResponseHeaders:function() {},
                getResponseHeader:function() {},
                setRequestHeader:function() {},
                abort:function(e) {
                    var i = "timeout" === e ? "timeout" :"aborted";
                    n("aborting upload... " + i), this.aborted = 1, f.attr("src", u.iframeSrc), m.error = i, 
                    u.error && u.error.call(u.context, m, i, e), d && t.event.trigger("ajaxError", [ m, u, i ]), 
                    u.complete && u.complete.call(u.context, m, i);
                }
            }, d = u.global, d && 0 === t.active++ && t.event.trigger("ajaxStart"), d && t.event.trigger("ajaxSend", [ m, u ]), 
            u.beforeSend && u.beforeSend.call(u.context, m, u) === !1) return u.global && t.active--, 
            void 0;
            if (!m.aborted) {
                _ = w.clk, _ && (v = _.name, v && !_.disabled && (u.extraData = u.extraData || {}, 
                u.extraData[v] = _.value, "image" == _.type && (u.extraData[v + ".x"] = w.clk_x, 
                u.extraData[v + ".y"] = w.clk_y)));
                var T = 1, D = 2, E = t("meta[name=csrf-token]").attr("content"), x = t("meta[name=csrf-param]").attr("content");
                x && E && (u.extraData = u.extraData || {}, u.extraData[x] = E), u.forceSync ? r() :setTimeout(r, 10);
                var S, O, k, I = 50, R = t.parseXML || function(t, e) {
                    return window.ActiveXObject ? (e = new ActiveXObject("Microsoft.XMLDOM"), e.async = "false", 
                    e.loadXML(t)) :e = new DOMParser().parseFromString(t, "text/xml"), e && e.documentElement && "parsererror" != e.documentElement.nodeName ? e :null;
                }, P = t.parseJSON || function(t) {
                    return window.eval("(" + t + ")");
                }, N = function(e, i, n) {
                    var o = e.getResponseHeader("content-type") || "", r = "xml" === i || !i && o.indexOf("xml") >= 0, s = r ? e.responseXML :e.responseText;
                    return r && "parsererror" === s.documentElement.nodeName && t.error && t.error("parsererror"), 
                    n && n.dataFilter && (s = n.dataFilter(s, i)), "string" == typeof s && ("json" === i || !i && o.indexOf("json") >= 0 ? s = P(s) :("script" === i || !i && o.indexOf("javascript") >= 0) && t.globalEval(s)), 
                    s;
                };
            }
        }
        if (!this.length) return n("ajaxSubmit: skipping submit process - no element selected"), 
        this;
        var s, a, l, c = this;
        "function" == typeof e && (e = {
            success:e
        }), s = this.attr("method"), a = this.attr("action"), l = "string" == typeof a ? t.trim(a) :"", 
        l = l || window.location.href || "", l && (l = (l.match(/^([^#]+)/) || [])[1]), 
        e = t.extend(!0, {
            url:l,
            success:t.ajaxSettings.success,
            type:s || "GET",
            iframeSrc:/^https/i.test(window.location.href || "") ? "javascript:false" :"about:blank"
        }, e);
        var h = {};
        if (this.trigger("form-pre-serialize", [ this, e, h ]), h.veto) return n("ajaxSubmit: submit vetoed via form-pre-serialize trigger"), 
        this;
        if (e.beforeSerialize && e.beforeSerialize(this, e) === !1) return n("ajaxSubmit: submit aborted via beforeSerialize callback"), 
        this;
        var u = e.traditional;
        void 0 === u && (u = t.ajaxSettings.traditional);
        var d, p = this.formToArray(e.semantic);
        if (e.data && (e.extraData = e.data, d = t.param(e.data, u)), e.beforeSubmit && e.beforeSubmit(p, this, e) === !1) return n("ajaxSubmit: submit aborted via beforeSubmit callback"), 
        this;
        if (this.trigger("form-submit-validate", [ p, this, e, h ]), h.veto) return n("ajaxSubmit: submit vetoed via form-submit-validate trigger"), 
        this;
        var f = t.param(p, u);
        d && (f = f ? f + "&" + d :d), "GET" == e.type.toUpperCase() ? (e.url += (e.url.indexOf("?") >= 0 ? "&" :"?") + f, 
        e.data = null) :e.data = f;
        var g = [];
        if (e.resetForm && g.push(function() {
            c.resetForm();
        }), e.clearForm && g.push(function() {
            c.clearForm(e.includeHidden);
        }), !e.dataType && e.target) {
            var m = e.success || function() {};
            g.push(function(i) {
                var n = e.replaceTarget ? "replaceWith" :"html";
                t(e.target)[n](i).each(m, arguments);
            });
        } else e.success && g.push(e.success);
        e.success = function(t, i, n) {
            for (var o = e.context || e, r = 0, s = g.length; s > r; r++) g[r].apply(o, [ t, i, n || c, c ]);
        };
        var _ = t("input:file:enabled[value]", this), v = _.length > 0, y = "multipart/form-data", b = c.attr("enctype") == y || c.attr("encoding") == y, w = o.fileapi && o.formdata;
        n("fileAPI :" + w);
        var C = (v || b) && !w;
        return e.iframe !== !1 && (e.iframe || C) ? e.closeKeepAlive ? t.get(e.closeKeepAlive, function() {
            r(p);
        }) :r(p) :(v || b) && w ? i(p) :t.ajax(e), this.trigger("form-submit-notify", [ this, e ]), 
        this;
    }, t.fn.ajaxForm = function(o) {
        if (o = o || {}, o.delegation = o.delegation && t.isFunction(t.fn.on), !o.delegation && 0 === this.length) {
            var r = {
                s:this.selector,
                c:this.context
            };
            return !t.isReady && r.s ? (n("DOM not ready, queuing ajaxForm"), t(function() {
                t(r.s, r.c).ajaxForm(o);
            }), this) :(n("terminating; zero elements found by selector" + (t.isReady ? "" :" (DOM not ready)")), 
            this);
        }
        return o.delegation ? (t(document).off("submit.form-plugin", this.selector, e).off("click.form-plugin", this.selector, i).on("submit.form-plugin", this.selector, o, e).on("click.form-plugin", this.selector, o, i), 
        this) :this.ajaxFormUnbind().bind("submit.form-plugin", o, e).bind("click.form-plugin", o, i);
    }, t.fn.ajaxFormUnbind = function() {
        return this.unbind("submit.form-plugin click.form-plugin");
    }, t.fn.formToArray = function(e) {
        var i = [];
        if (0 === this.length) return i;
        var n = this[0], r = e ? n.getElementsByTagName("*") :n.elements;
        if (!r) return i;
        var s, a, l, c, h, u, d;
        for (s = 0, u = r.length; u > s; s++) if (h = r[s], l = h.name) if (e && n.clk && "image" == h.type) h.disabled || n.clk != h || (i.push({
            name:l,
            value:t(h).val(),
            type:h.type
        }), i.push({
            name:l + ".x",
            value:n.clk_x
        }, {
            name:l + ".y",
            value:n.clk_y
        })); else if (c = t.fieldValue(h, !0), c && c.constructor == Array) for (a = 0, 
        d = c.length; d > a; a++) i.push({
            name:l,
            value:c[a]
        }); else if (o.fileapi && "file" == h.type && !h.disabled) {
            var p = h.files;
            for (a = 0; a < p.length; a++) i.push({
                name:l,
                value:p[a],
                type:h.type
            });
        } else null !== c && "undefined" != typeof c && i.push({
            name:l,
            value:c,
            type:h.type
        });
        if (!e && n.clk) {
            var f = t(n.clk), g = f[0];
            l = g.name, l && !g.disabled && "image" == g.type && (i.push({
                name:l,
                value:f.val()
            }), i.push({
                name:l + ".x",
                value:n.clk_x
            }, {
                name:l + ".y",
                value:n.clk_y
            }));
        }
        return i;
    }, t.fn.formSerialize = function(e) {
        return t.param(this.formToArray(e));
    }, t.fn.fieldSerialize = function(e) {
        var i = [];
        return this.each(function() {
            var n = this.name;
            if (n) {
                var o = t.fieldValue(this, e);
                if (o && o.constructor == Array) for (var r = 0, s = o.length; s > r; r++) i.push({
                    name:n,
                    value:o[r]
                }); else null !== o && "undefined" != typeof o && i.push({
                    name:this.name,
                    value:o
                });
            }
        }), t.param(i);
    }, t.fn.fieldValue = function(e) {
        for (var i = [], n = 0, o = this.length; o > n; n++) {
            var r = this[n], s = t.fieldValue(r, e);
            null === s || "undefined" == typeof s || s.constructor == Array && !s.length || (s.constructor == Array ? t.merge(i, s) :i.push(s));
        }
        return i;
    }, t.fieldValue = function(e, i) {
        var n = e.name, o = e.type, r = e.tagName.toLowerCase();
        if (void 0 === i && (i = !0), i && (!n || e.disabled || "reset" == o || "button" == o || ("checkbox" == o || "radio" == o) && !e.checked || ("submit" == o || "image" == o) && e.form && e.form.clk != e || "select" == r && -1 == e.selectedIndex)) return null;
        if ("select" == r) {
            var s = e.selectedIndex;
            if (0 > s) return null;
            for (var a = [], l = e.options, c = "select-one" == o, h = c ? s + 1 :l.length, u = c ? s :0; h > u; u++) {
                var d = l[u];
                if (d.selected) {
                    var p = d.value;
                    if (p || (p = d.attributes && d.attributes.value && !d.attributes.value.specified ? d.text :d.value), 
                    c) return p;
                    a.push(p);
                }
            }
            return a;
        }
        return t(e).val();
    }, t.fn.clearForm = function(e) {
        return this.each(function() {
            t("input,select,textarea", this).clearFields(e);
        });
    }, t.fn.clearFields = t.fn.clearInputs = function(t) {
        var e = /^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;
        return this.each(function() {
            var i = this.type, n = this.tagName.toLowerCase();
            e.test(i) || "textarea" == n || t && /hidden/.test(i) ? this.value = "" :"checkbox" == i || "radio" == i ? this.checked = !1 :"select" == n && (this.selectedIndex = -1);
        });
    }, t.fn.resetForm = function() {
        return this.each(function() {
            ("function" == typeof this.reset || "object" == typeof this.reset && !this.reset.nodeType) && this.reset();
        });
    }, t.fn.enable = function(t) {
        return void 0 === t && (t = !0), this.each(function() {
            this.disabled = !t;
        });
    }, t.fn.selected = function(e) {
        return void 0 === e && (e = !0), this.each(function() {
            var i = this.type;
            if ("checkbox" == i || "radio" == i) this.checked = e; else if ("option" == this.tagName.toLowerCase()) {
                var n = t(this).parent("select");
                e && n[0] && "select-one" == n[0].type && n.find("option").selected(!1), this.selected = e;
            }
        });
    }, t.fn.ajaxSubmit.debug = !1;
}(jQuery), function() {
    var t = this, e = t._, i = {}, n = Array.prototype, o = Object.prototype, r = Function.prototype, s = n.slice, a = n.unshift, l = o.toString, c = o.hasOwnProperty, h = n.forEach, u = n.map, d = n.reduce, p = n.reduceRight, f = n.filter, g = n.every, m = n.some, _ = n.indexOf, v = n.lastIndexOf, y = Array.isArray, b = Object.keys, w = r.bind, C = function(t) {
        return new S(t);
    };
    "undefined" != typeof module && module.exports ? (module.exports = C, C._ = C) :t._ = C, 
    C.VERSION = "1.1.7";
    var T = C.each = C.forEach = function(t, e, n) {
        if (null != t) if (h && t.forEach === h) t.forEach(e, n); else if (t.length === +t.length) {
            for (var o = 0, r = t.length; r > o; o++) if (o in t && e.call(n, t[o], o, t) === i) return;
        } else for (var s in t) if (c.call(t, s) && e.call(n, t[s], s, t) === i) return;
    };
    C.map = function(t, e, i) {
        var n = [];
        return null == t ? n :u && t.map === u ? t.map(e, i) :(T(t, function(t, o, r) {
            n[n.length] = e.call(i, t, o, r);
        }), n);
    }, C.reduce = C.foldl = C.inject = function(t, e, i, n) {
        var o = void 0 !== i;
        if (null == t && (t = []), d && t.reduce === d) return n && (e = C.bind(e, n)), 
        o ? t.reduce(e, i) :t.reduce(e);
        if (T(t, function(t, r, s) {
            o ? i = e.call(n, i, t, r, s) :(i = t, o = !0);
        }), !o) throw new TypeError("Reduce of empty array with no initial value");
        return i;
    }, C.reduceRight = C.foldr = function(t, e, i, n) {
        if (null == t && (t = []), p && t.reduceRight === p) return n && (e = C.bind(e, n)), 
        void 0 !== i ? t.reduceRight(e, i) :t.reduceRight(e);
        var o = (C.isArray(t) ? t.slice() :C.toArray(t)).reverse();
        return C.reduce(o, e, i, n);
    }, C.find = C.detect = function(t, e, i) {
        var n;
        return D(t, function(t, o, r) {
            return e.call(i, t, o, r) ? (n = t, !0) :void 0;
        }), n;
    }, C.filter = C.select = function(t, e, i) {
        var n = [];
        return null == t ? n :f && t.filter === f ? t.filter(e, i) :(T(t, function(t, o, r) {
            e.call(i, t, o, r) && (n[n.length] = t);
        }), n);
    }, C.reject = function(t, e, i) {
        var n = [];
        return null == t ? n :(T(t, function(t, o, r) {
            e.call(i, t, o, r) || (n[n.length] = t);
        }), n);
    }, C.every = C.all = function(t, e, n) {
        var o = !0;
        return null == t ? o :g && t.every === g ? t.every(e, n) :(T(t, function(t, r, s) {
            return (o = o && e.call(n, t, r, s)) ? void 0 :i;
        }), o);
    };
    var D = C.some = C.any = function(t, e, n) {
        e = e || C.identity;
        var o = !1;
        return null == t ? o :m && t.some === m ? t.some(e, n) :(T(t, function(t, r, s) {
            return (o |= e.call(n, t, r, s)) ? i :void 0;
        }), !!o);
    };
    C.include = C.contains = function(t, e) {
        var i = !1;
        return null == t ? i :_ && t.indexOf === _ ? -1 != t.indexOf(e) :(D(t, function(t) {
            return (i = t === e) ? !0 :void 0;
        }), i);
    }, C.invoke = function(t, e) {
        var i = s.call(arguments, 2);
        return C.map(t, function(t) {
            return (e.call ? e || t :t[e]).apply(t, i);
        });
    }, C.pluck = function(t, e) {
        return C.map(t, function(t) {
            return t[e];
        });
    }, C.max = function(t, e, i) {
        if (!e && C.isArray(t)) return Math.max.apply(Math, t);
        var n = {
            computed:-1/0
        };
        return T(t, function(t, o, r) {
            var s = e ? e.call(i, t, o, r) :t;
            s >= n.computed && (n = {
                value:t,
                computed:s
            });
        }), n.value;
    }, C.min = function(t, e, i) {
        if (!e && C.isArray(t)) return Math.min.apply(Math, t);
        var n = {
            computed:1/0
        };
        return T(t, function(t, o, r) {
            var s = e ? e.call(i, t, o, r) :t;
            s < n.computed && (n = {
                value:t,
                computed:s
            });
        }), n.value;
    }, C.sortBy = function(t, e, i) {
        return C.pluck(C.map(t, function(t, n, o) {
            return {
                value:t,
                criteria:e.call(i, t, n, o)
            };
        }).sort(function(t, e) {
            var i = t.criteria, n = e.criteria;
            return n > i ? -1 :i > n ? 1 :0;
        }), "value");
    }, C.groupBy = function(t, e) {
        var i = {};
        return T(t, function(t, n) {
            var o = e(t, n);
            (i[o] || (i[o] = [])).push(t);
        }), i;
    }, C.sortedIndex = function(t, e, i) {
        i || (i = C.identity);
        for (var n = 0, o = t.length; o > n; ) {
            var r = n + o >> 1;
            i(t[r]) < i(e) ? n = r + 1 :o = r;
        }
        return n;
    }, C.toArray = function(t) {
        return t ? t.toArray ? t.toArray() :C.isArray(t) ? s.call(t) :C.isArguments(t) ? s.call(t) :C.values(t) :[];
    }, C.size = function(t) {
        return C.toArray(t).length;
    }, C.first = C.head = function(t, e, i) {
        return null == e || i ? t[0] :s.call(t, 0, e);
    }, C.rest = C.tail = function(t, e, i) {
        return s.call(t, null == e || i ? 1 :e);
    }, C.last = function(t) {
        return t[t.length - 1];
    }, C.compact = function(t) {
        return C.filter(t, function(t) {
            return !!t;
        });
    }, C.flatten = function(t) {
        return C.reduce(t, function(t, e) {
            return C.isArray(e) ? t.concat(C.flatten(e)) :(t[t.length] = e, t);
        }, []);
    }, C.without = function(t) {
        return C.difference(t, s.call(arguments, 1));
    }, C.uniq = C.unique = function(t, e) {
        return C.reduce(t, function(t, i, n) {
            return 0 != n && (e === !0 ? C.last(t) == i :C.include(t, i)) || (t[t.length] = i), 
            t;
        }, []);
    }, C.union = function() {
        return C.uniq(C.flatten(arguments));
    }, C.intersection = C.intersect = function(t) {
        var e = s.call(arguments, 1);
        return C.filter(C.uniq(t), function(t) {
            return C.every(e, function(e) {
                return C.indexOf(e, t) >= 0;
            });
        });
    }, C.difference = function(t, e) {
        return C.filter(t, function(t) {
            return !C.include(e, t);
        });
    }, C.zip = function() {
        for (var t = s.call(arguments), e = C.max(C.pluck(t, "length")), i = new Array(e), n = 0; e > n; n++) i[n] = C.pluck(t, "" + n);
        return i;
    }, C.indexOf = function(t, e, i) {
        if (null == t) return -1;
        var n, o;
        if (i) return n = C.sortedIndex(t, e), t[n] === e ? n :-1;
        if (_ && t.indexOf === _) return t.indexOf(e);
        for (n = 0, o = t.length; o > n; n++) if (t[n] === e) return n;
        return -1;
    }, C.lastIndexOf = function(t, e) {
        if (null == t) return -1;
        if (v && t.lastIndexOf === v) return t.lastIndexOf(e);
        for (var i = t.length; i--; ) if (t[i] === e) return i;
        return -1;
    }, C.range = function(t, e, i) {
        arguments.length <= 1 && (e = t || 0, t = 0), i = arguments[2] || 1;
        for (var n = Math.max(Math.ceil((e - t) / i), 0), o = 0, r = new Array(n); n > o; ) r[o++] = t, 
        t += i;
        return r;
    }, C.bind = function(t, e) {
        if (t.bind === w && w) return w.apply(t, s.call(arguments, 1));
        var i = s.call(arguments, 2);
        return function() {
            return t.apply(e, i.concat(s.call(arguments)));
        };
    }, C.bindAll = function(t) {
        var e = s.call(arguments, 1);
        return 0 == e.length && (e = C.functions(t)), T(e, function(e) {
            t[e] = C.bind(t[e], t);
        }), t;
    }, C.memoize = function(t, e) {
        var i = {};
        return e || (e = C.identity), function() {
            var n = e.apply(this, arguments);
            return c.call(i, n) ? i[n] :i[n] = t.apply(this, arguments);
        };
    }, C.delay = function(t, e) {
        var i = s.call(arguments, 2);
        return setTimeout(function() {
            return t.apply(t, i);
        }, e);
    }, C.defer = function(t) {
        return C.delay.apply(C, [ t, 1 ].concat(s.call(arguments, 1)));
    };
    var E = function(t, e, i) {
        var n;
        return function() {
            var o = this, r = arguments, s = function() {
                n = null, t.apply(o, r);
            };
            i && clearTimeout(n), (i || !n) && (n = setTimeout(s, e));
        };
    };
    C.throttle = function(t, e) {
        return E(t, e, !1);
    }, C.debounce = function(t, e) {
        return E(t, e, !0);
    }, C.once = function(t) {
        var e, i = !1;
        return function() {
            return i ? e :(i = !0, e = t.apply(this, arguments));
        };
    }, C.wrap = function(t, e) {
        return function() {
            var i = [ t ].concat(s.call(arguments));
            return e.apply(this, i);
        };
    }, C.compose = function() {
        var t = s.call(arguments);
        return function() {
            for (var e = s.call(arguments), i = t.length - 1; i >= 0; i--) e = [ t[i].apply(this, e) ];
            return e[0];
        };
    }, C.after = function(t, e) {
        return function() {
            return --t < 1 ? e.apply(this, arguments) :void 0;
        };
    }, C.keys = b || function(t) {
        if (t !== Object(t)) throw new TypeError("Invalid object");
        var e = [];
        for (var i in t) c.call(t, i) && (e[e.length] = i);
        return e;
    }, C.values = function(t) {
        return C.map(t, C.identity);
    }, C.functions = C.methods = function(t) {
        var e = [];
        for (var i in t) C.isFunction(t[i]) && e.push(i);
        return e.sort();
    }, C.extend = function(t) {
        return T(s.call(arguments, 1), function(e) {
            for (var i in e) void 0 !== e[i] && (t[i] = e[i]);
        }), t;
    }, C.defaults = function(t) {
        return T(s.call(arguments, 1), function(e) {
            for (var i in e) null == t[i] && (t[i] = e[i]);
        }), t;
    }, C.clone = function(t) {
        return C.isArray(t) ? t.slice() :C.extend({}, t);
    }, C.tap = function(t, e) {
        return e(t), t;
    }, C.isEqual = function(t, e) {
        if (t === e) return !0;
        var i = typeof t, n = typeof e;
        if (i != n) return !1;
        if (t == e) return !0;
        if (!t && e || t && !e) return !1;
        if (t._chain && (t = t._wrapped), e._chain && (e = e._wrapped), t.isEqual) return t.isEqual(e);
        if (e.isEqual) return e.isEqual(t);
        if (C.isDate(t) && C.isDate(e)) return t.getTime() === e.getTime();
        if (C.isNaN(t) && C.isNaN(e)) return !1;
        if (C.isRegExp(t) && C.isRegExp(e)) return t.source === e.source && t.global === e.global && t.ignoreCase === e.ignoreCase && t.multiline === e.multiline;
        if ("object" !== i) return !1;
        if (t.length && t.length !== e.length) return !1;
        var o = C.keys(t), r = C.keys(e);
        if (o.length != r.length) return !1;
        for (var s in t) if (!(s in e && C.isEqual(t[s], e[s]))) return !1;
        return !0;
    }, C.isEmpty = function(t) {
        if (C.isArray(t) || C.isString(t)) return 0 === t.length;
        for (var e in t) if (c.call(t, e)) return !1;
        return !0;
    }, C.isElement = function(t) {
        return !(!t || 1 != t.nodeType);
    }, C.isArray = y || function(t) {
        return "[object Array]" === l.call(t);
    }, C.isObject = function(t) {
        return t === Object(t);
    }, C.isArguments = function(t) {
        return !(!t || !c.call(t, "callee"));
    }, C.isFunction = function(t) {
        return !!(t && t.constructor && t.call && t.apply);
    }, C.isString = function(t) {
        return !!("" === t || t && t.charCodeAt && t.substr);
    }, C.isNumber = function(t) {
        return !!(0 === t || t && t.toExponential && t.toFixed);
    }, C.isNaN = function(t) {
        return t !== t;
    }, C.isBoolean = function(t) {
        return t === !0 || t === !1;
    }, C.isDate = function(t) {
        return !!(t && t.getTimezoneOffset && t.setUTCFullYear);
    }, C.isRegExp = function(t) {
        return !(!(t && t.test && t.exec) || !t.ignoreCase && t.ignoreCase !== !1);
    }, C.isNull = function(t) {
        return null === t;
    }, C.isUndefined = function(t) {
        return void 0 === t;
    }, C.noConflict = function() {
        return t._ = e, this;
    }, C.identity = function(t) {
        return t;
    }, C.times = function(t, e, i) {
        for (var n = 0; t > n; n++) e.call(i, n);
    }, C.mixin = function(t) {
        T(C.functions(t), function(e) {
            k(e, C[e] = t[e]);
        });
    };
    var x = 0;
    C.uniqueId = function(t) {
        var e = x++;
        return t ? t + e :e;
    }, C.templateSettings = {
        evaluate:/<%([\s\S]+?)%>/g,
        interpolate:/<%=([\s\S]+?)%>/g
    }, C.template = function(t, e) {
        var i = C.templateSettings, n = "var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('" + t.replace(/\\/g, "\\\\").replace(/'/g, "\\'").replace(i.interpolate, function(t, e) {
            return "'," + e.replace(/\\'/g, "'") + ",'";
        }).replace(i.evaluate || null, function(t, e) {
            return "');" + e.replace(/\\'/g, "'").replace(/[\r\n\t]/g, " ") + "__p.push('";
        }).replace(/\r/g, "\\r").replace(/\n/g, "\\n").replace(/\t/g, "\\t") + "');}return __p.join('');", o = new Function("obj", n);
        return e ? o(e) :o;
    };
    var S = function(t) {
        this._wrapped = t;
    };
    C.prototype = S.prototype;
    var O = function(t, e) {
        return e ? C(t).chain() :t;
    }, k = function(t, e) {
        S.prototype[t] = function() {
            var t = s.call(arguments);
            return a.call(t, this._wrapped), O(e.apply(C, t), this._chain);
        };
    };
    C.mixin(C), T([ "pop", "push", "reverse", "shift", "sort", "splice", "unshift" ], function(t) {
        var e = n[t];
        S.prototype[t] = function() {
            return e.apply(this._wrapped, arguments), O(this._wrapped, this._chain);
        };
    }), T([ "concat", "join", "slice" ], function(t) {
        var e = n[t];
        S.prototype[t] = function() {
            return O(e.apply(this._wrapped, arguments), this._chain);
        };
    }), S.prototype.chain = function() {
        return this._chain = !0, this;
    }, S.prototype.value = function() {
        return this._wrapped;
    };
}(), function() {
    var t, e = this, i = e.Backbone;
    t = "undefined" != typeof exports ? exports :e.Backbone = {}, t.VERSION = "0.5.3";
    var n = e._;
    n || "undefined" == typeof require || (n = require("underscore")._);
    var o = e.jQuery || e.Zepto;
    t.noConflict = function() {
        return e.Backbone = i, this;
    }, t.emulateHTTP = !1, t.emulateJSON = !1, t.Events = {
        bind:function(t, e, i) {
            var n = this._callbacks || (this._callbacks = {}), o = n[t] || (n[t] = []);
            return o.push([ e, i ]), this;
        },
        unbind:function(t, e) {
            var i;
            if (t) {
                if (i = this._callbacks) if (e) {
                    var n = i[t];
                    if (!n) return this;
                    for (var o = 0, r = n.length; r > o; o++) if (n[o] && e === n[o][0]) {
                        n[o] = null;
                        break;
                    }
                } else i[t] = [];
            } else this._callbacks = {};
            return this;
        },
        trigger:function(t) {
            var e, i, n, o, r, s = 2;
            if (!(i = this._callbacks)) return this;
            for (;s--; ) if (n = s ? t :"all", e = i[n]) for (var a = 0, l = e.length; l > a; a++) (o = e[a]) ? (r = s ? Array.prototype.slice.call(arguments, 1) :arguments, 
            o[0].apply(o[1] || this, r)) :(e.splice(a, 1), a--, l--);
            return this;
        }
    }, t.Model = function(t, e) {
        var i;
        t || (t = {}), (i = this.defaults) && (n.isFunction(i) && (i = i.call(this)), t = n.extend({}, i, t)), 
        this.attributes = {}, this._escapedAttributes = {}, this.cid = n.uniqueId("c"), 
        this.set(t, {
            silent:!0
        }), this._changed = !1, this._previousAttributes = n.clone(this.attributes), e && e.collection && (this.collection = e.collection), 
        this.initialize(t, e);
    }, n.extend(t.Model.prototype, t.Events, {
        _previousAttributes:null,
        _changed:!1,
        idAttribute:"id",
        initialize:function() {},
        toJSON:function() {
            return n.clone(this.attributes);
        },
        get:function(t) {
            return this.attributes[t];
        },
        escape:function(t) {
            var e;
            if (e = this._escapedAttributes[t]) return e;
            var i = this.attributes[t];
            return this._escapedAttributes[t] = C(null == i ? "" :"" + i);
        },
        has:function(t) {
            return null != this.attributes[t];
        },
        set:function(t, e) {
            if (e || (e = {}), !t) return this;
            t.attributes && (t = t.attributes);
            var i = this.attributes, o = this._escapedAttributes;
            if (!e.silent && this.validate && !this._performValidation(t, e)) return !1;
            this.idAttribute in t && (this.id = t[this.idAttribute]);
            var r = this._changing;
            this._changing = !0;
            for (var s in t) {
                var a = t[s];
                n.isEqual(i[s], a) || (i[s] = a, delete o[s], this._changed = !0, e.silent || this.trigger("change:" + s, this, a, e));
            }
            return r || e.silent || !this._changed || this.change(e), this._changing = !1, this;
        },
        unset:function(t, e) {
            if (!(t in this.attributes)) return this;
            e || (e = {});
            var i = (this.attributes[t], {});
            return i[t] = void 0, e.silent || !this.validate || this._performValidation(i, e) ? (delete this.attributes[t], 
            delete this._escapedAttributes[t], t == this.idAttribute && delete this.id, this._changed = !0, 
            e.silent || (this.trigger("change:" + t, this, void 0, e), this.change(e)), this) :!1;
        },
        clear:function(t) {
            t || (t = {});
            var e, i = this.attributes, n = {};
            for (e in i) n[e] = void 0;
            if (!t.silent && this.validate && !this._performValidation(n, t)) return !1;
            if (this.attributes = {}, this._escapedAttributes = {}, this._changed = !0, !t.silent) {
                for (e in i) this.trigger("change:" + e, this, void 0, t);
                this.change(t);
            }
            return this;
        },
        fetch:function(e) {
            e || (e = {});
            var i = this, n = e.success;
            return e.success = function(t, o, r) {
                return i.set(i.parse(t, r), e) ? (n && n(i, t), void 0) :!1;
            }, e.error = w(e.error, i, e), (this.sync || t.sync).call(this, "read", this, e);
        },
        save:function(e, i) {
            if (i || (i = {}), e && !this.set(e, i)) return !1;
            var n = this, o = i.success;
            i.success = function(t, e, r) {
                return n.set(n.parse(t, r), i) ? (o && o(n, t, r), void 0) :!1;
            }, i.error = w(i.error, n, i);
            var r = this.isNew() ? "create" :"update";
            return (this.sync || t.sync).call(this, r, this, i);
        },
        destroy:function(e) {
            if (e || (e = {}), this.isNew()) return this.trigger("destroy", this, this.collection, e);
            var i = this, n = e.success;
            return e.success = function(t) {
                i.trigger("destroy", i, i.collection, e), n && n(i, t);
            }, e.error = w(e.error, i, e), (this.sync || t.sync).call(this, "delete", this, e);
        },
        url:function() {
            var t = y(this.collection) || this.urlRoot || b();
            return this.isNew() ? t :t + ("/" == t.charAt(t.length - 1) ? "" :"/") + encodeURIComponent(this.id);
        },
        parse:function(t) {
            return t;
        },
        clone:function() {
            return new this.constructor(this);
        },
        isNew:function() {
            return null == this.id;
        },
        change:function(t) {
            this.trigger("change", this, t), this._previousAttributes = n.clone(this.attributes), 
            this._changed = !1;
        },
        hasChanged:function(t) {
            return t ? this._previousAttributes[t] != this.attributes[t] :this._changed;
        },
        changedAttributes:function(t) {
            t || (t = this.attributes);
            var e = this._previousAttributes, i = !1;
            for (var o in t) n.isEqual(e[o], t[o]) || (i = i || {}, i[o] = t[o]);
            return i;
        },
        previous:function(t) {
            return t && this._previousAttributes ? this._previousAttributes[t] :null;
        },
        previousAttributes:function() {
            return n.clone(this._previousAttributes);
        },
        _performValidation:function(t, e) {
            var i = this.validate(t);
            return i ? (e.error ? e.error(this, i, e) :this.trigger("error", this, i, e), !1) :!0;
        }
    }), t.Collection = function(t, e) {
        e || (e = {}), e.comparator && (this.comparator = e.comparator), n.bindAll(this, "_onModelEvent", "_removeReference"), 
        this._reset(), t && this.reset(t, {
            silent:!0
        }), this.initialize.apply(this, arguments);
    }, n.extend(t.Collection.prototype, t.Events, {
        model:t.Model,
        initialize:function() {},
        toJSON:function() {
            return this.map(function(t) {
                return t.toJSON();
            });
        },
        add:function(t, e) {
            if (n.isArray(t)) for (var i = 0, o = t.length; o > i; i++) this._add(t[i], e); else this._add(t, e);
            return this;
        },
        remove:function(t, e) {
            if (n.isArray(t)) for (var i = 0, o = t.length; o > i; i++) this._remove(t[i], e); else this._remove(t, e);
            return this;
        },
        get:function(t) {
            return null == t ? null :this._byId[null != t.id ? t.id :t];
        },
        getByCid:function(t) {
            return t && this._byCid[t.cid || t];
        },
        at:function(t) {
            return this.models[t];
        },
        sort:function(t) {
            if (t || (t = {}), !this.comparator) throw new Error("Cannot sort a set without a comparator");
            return this.models = this.sortBy(this.comparator), t.silent || this.trigger("reset", this, t), 
            this;
        },
        pluck:function(t) {
            return n.map(this.models, function(e) {
                return e.get(t);
            });
        },
        reset:function(t, e) {
            return t || (t = []), e || (e = {}), this.each(this._removeReference), this._reset(), 
            this.add(t, {
                silent:!0
            }), e.silent || this.trigger("reset", this, e), this;
        },
        fetch:function(e) {
            e || (e = {});
            var i = this, n = e.success;
            return e.success = function(t, o, r) {
                i[e.add ? "add" :"reset"](i.parse(t, r), e), n && n(i, t);
            }, e.error = w(e.error, i, e), (this.sync || t.sync).call(this, "read", this, e);
        },
        create:function(t, e) {
            var i = this;
            if (e || (e = {}), t = this._prepareModel(t, e), !t) return !1;
            var n = e.success;
            return e.success = function(t, o, r) {
                i.add(t, e), n && n(t, o, r);
            }, t.save(null, e), t;
        },
        parse:function(t) {
            return t;
        },
        chain:function() {
            return n(this.models).chain();
        },
        _reset:function() {
            this.length = 0, this.models = [], this._byId = {}, this._byCid = {};
        },
        _prepareModel:function(e, i) {
            if (e instanceof t.Model) e.collection || (e.collection = this); else {
                var n = e;
                e = new this.model(n, {
                    collection:this
                }), e.validate && !e._performValidation(n, i) && (e = !1);
            }
            return e;
        },
        _add:function(t, e) {
            if (e || (e = {}), t = this._prepareModel(t, e), !t) return !1;
            var i = this.getByCid(t);
            if (i) throw new Error([ "Can't add the same model to a set twice", i.id ]);
            this._byId[t.id] = t, this._byCid[t.cid] = t;
            var n = null != e.at ? e.at :this.comparator ? this.sortedIndex(t, this.comparator) :this.length;
            return this.models.splice(n, 0, t), t.bind("all", this._onModelEvent), this.length++, 
            e.silent || t.trigger("add", t, this, e), t;
        },
        _remove:function(t, e) {
            return e || (e = {}), (t = this.getByCid(t) || this.get(t)) ? (delete this._byId[t.id], 
            delete this._byCid[t.cid], e.index = this.indexOf(t), this.models.splice(e.index, 1), 
            this.length--, e.silent || t.trigger("remove", t, this, e), this._removeReference(t), 
            t) :null;
        },
        _removeReference:function(t) {
            this == t.collection && delete t.collection, t.unbind("all", this._onModelEvent);
        },
        _onModelEvent:function(e, i, n, o) {
            ("add" != e && "remove" != e || n == this) && ("destroy" == e && this._remove(i, o), 
            i && e === "change:" + i.idAttribute && (delete this._byId[i.previous(i.idAttribute)], 
            this._byId[i.id] = i), t.PRINT && print(e + "::" + this.NAME + "::" + i.get("text")), 
            this.trigger.apply(this, arguments));
        }
    });
    var r = [ "forEach", "each", "map", "reduce", "reduceRight", "find", "detect", "filter", "select", "reject", "every", "all", "some", "any", "include", "contains", "invoke", "max", "min", "sortBy", "sortedIndex", "toArray", "size", "first", "rest", "last", "without", "indexOf", "lastIndexOf", "isEmpty", "groupBy" ];
    n.each(r, function(e) {
        t.Collection.prototype[e] = function() {
            return n[e].apply(n, [ this.models ].concat(n.toArray(arguments)));
        };
    }), t.Router = function(t) {
        t || (t = {}), t.routes && (this.routes = t.routes), this._bindRoutes(), this.initialize.apply(this, arguments);
    };
    var s = /:([\w\d]+)/g, a = /\*([\w\d]+)/g, l = /[-[\]{}()+?.,\\^$|#\s]/g;
    n.extend(t.Router.prototype, t.Events, {
        initialize:function() {},
        route:function(e, i, o) {
            t.history || (t.history = new t.History()), n.isRegExp(e) || (e = this._routeToRegExp(e)), 
            t.history.route(e, n.bind(function(t) {
                var n = this._extractParameters(e, t);
                o.apply(this, n), this.trigger.apply(this, [ "route:" + i ].concat(n));
            }, this));
        },
        navigate:function(e, i) {
            t.history.navigate(e, i);
        },
        _bindRoutes:function() {
            if (this.routes) {
                var t = [];
                for (var e in this.routes) t.unshift([ e, this.routes[e] ]);
                for (var i = 0, n = t.length; n > i; i++) this.route(t[i][0], t[i][1], this[t[i][1]]);
            }
        },
        _routeToRegExp:function(t) {
            return t = t.replace(l, "\\$&").replace(s, "([^/]*)").replace(a, "(.*?)"), new RegExp("^" + t + "$");
        },
        _extractParameters:function(t, e) {
            return t.exec(e).slice(1);
        }
    }), t.History = function() {
        this.handlers = [], n.bindAll(this, "checkUrl");
    };
    var c = /^#*/, h = /msie [\w.]+/, u = !1;
    n.extend(t.History.prototype, {
        interval:50,
        getFragment:function(t, e) {
            if (null == t) if (this._hasPushState || e) {
                t = window.location.pathname;
                var i = window.location.search;
                i && (t += i), 0 == t.indexOf(this.options.root) && (t = t.substr(this.options.root.length));
            } else t = window.location.hash;
            return decodeURIComponent(t.replace(c, ""));
        },
        start:function(t) {
            if (u) throw new Error("Backbone.history has already been started");
            this.options = n.extend({}, {
                root:"/"
            }, this.options, t), this._wantsPushState = !!this.options.pushState, this._hasPushState = !!(this.options.pushState && window.history && window.history.pushState);
            var e = this.getFragment(), i = document.documentMode, r = h.exec(navigator.userAgent.toLowerCase()) && (!i || 7 >= i);
            r && (this.iframe = o('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow, 
            this.navigate(e)), this._hasPushState ? o(window).bind("popstate", this.checkUrl) :"onhashchange" in window && !r ? o(window).bind("hashchange", this.checkUrl) :setInterval(this.checkUrl, this.interval), 
            this.fragment = e, u = !0;
            var s = window.location, a = s.pathname == this.options.root;
            return !this._wantsPushState || this._hasPushState || a ? (this._wantsPushState && this._hasPushState && a && s.hash && (this.fragment = s.hash.replace(c, ""), 
            window.history.replaceState({}, document.title, s.protocol + "//" + s.host + this.options.root + this.fragment)), 
            this.options.silent ? void 0 :this.loadUrl()) :(this.fragment = this.getFragment(null, !0), 
            window.location.replace(this.options.root + "#" + this.fragment), !0);
        },
        route:function(t, e) {
            this.handlers.unshift({
                route:t,
                callback:e
            });
        },
        checkUrl:function() {
            var t = this.getFragment();
            return t == this.fragment && this.iframe && (t = this.getFragment(this.iframe.location.hash)), 
            t == this.fragment || t == decodeURIComponent(this.fragment) ? !1 :(this.iframe && this.navigate(t), 
            this.loadUrl() || this.loadUrl(window.location.hash), void 0);
        },
        loadUrl:function(t) {
            var e = this.fragment = this.getFragment(t), i = n.any(this.handlers, function(t) {
                return t.route.test(e) ? (t.callback(e), !0) :void 0;
            });
            return i;
        },
        navigate:function(t, e) {
            var i = (t || "").replace(c, "");
            if (this.fragment != i && this.fragment != decodeURIComponent(i)) {
                if (this._hasPushState) {
                    var n = window.location;
                    0 != i.indexOf(this.options.root) && (i = this.options.root + i), this.fragment = i, 
                    window.history.pushState({}, document.title, n.protocol + "//" + n.host + i);
                } else window.location.hash = this.fragment = i, this.iframe && i != this.getFragment(this.iframe.location.hash) && (this.iframe.document.open().close(), 
                this.iframe.location.hash = i);
                e && this.loadUrl(t);
            }
        }
    }), t.View = function(t) {
        this.cid = n.uniqueId("view"), this._configure(t || {}), this._ensureElement(), 
        this.delegateEvents(), this.initialize.apply(this, arguments);
    };
    var d = function(t) {
        return o(t, this.el);
    }, p = /^(\S+)\s*(.*)$/, f = [ "model", "collection", "el", "id", "attributes", "className", "tagName" ];
    n.extend(t.View.prototype, t.Events, {
        tagName:"div",
        $:d,
        initialize:function() {},
        render:function() {
            return this;
        },
        remove:function() {
            return o(this.el).remove(), this;
        },
        make:function(t, e, i) {
            var n = document.createElement(t);
            return e && o(n).attr(e), i && o(n).html(i), n;
        },
        delegateEvents:function(t) {
            if (t || (t = this.events)) {
                n.isFunction(t) && (t = t.call(this)), o(this.el).unbind(".delegateEvents" + this.cid);
                for (var e in t) {
                    var i = this[t[e]];
                    if (!i) throw new Error('Event "' + t[e] + '" does not exist');
                    var r = e.match(p), s = r[1], a = r[2];
                    i = n.bind(i, this), s += ".delegateEvents" + this.cid, "" === a ? o(this.el).bind(s, i) :o(this.el).delegate(a, s, i);
                }
            }
        },
        _configure:function(t) {
            this.options && (t = n.extend({}, this.options, t));
            for (var e = 0, i = f.length; i > e; e++) {
                var o = f[e];
                t[o] && (this[o] = t[o]);
            }
            this.options = t;
        },
        _ensureElement:function() {
            if (this.el) n.isString(this.el) && (this.el = o(this.el).get(0)); else {
                var t = this.attributes || {};
                this.id && (t.id = this.id), this.className && (t["class"] = this.className), this.el = this.make(this.tagName, t);
            }
        }
    });
    var g = function(t, e) {
        var i = v(this, t, e);
        return i.extend = this.extend, i;
    };
    t.Model.extend = t.Collection.extend = t.Router.extend = t.View.extend = g;
    var m = {
        create:"POST",
        update:"PUT",
        "delete":"DELETE",
        read:"GET"
    };
    t.sync = function(e, i, r) {
        var s = m[e], a = n.extend({
            type:s,
            dataType:"json"
        }, r);
        return a.url || (a.url = y(i) || b()), a.data || !i || "create" != e && "update" != e || (a.contentType = "application/json", 
        a.data = JSON.stringify(i.toJSON())), t.emulateJSON && (a.contentType = "application/x-www-form-urlencoded", 
        a.data = a.data ? {
            model:a.data
        } :{}), t.emulateHTTP && ("PUT" === s || "DELETE" === s) && (t.emulateJSON && (a.data._method = s), 
        a.type = "POST", a.beforeSend = function(t) {
            t.setRequestHeader("X-HTTP-Method-Override", s);
        }), "GET" === a.type || t.emulateJSON || (a.processData = !1), o.ajax(a);
    };
    var _ = function() {}, v = function(t, e, i) {
        var o;
        return o = e && e.hasOwnProperty("constructor") ? e.constructor :function() {
            return t.apply(this, arguments);
        }, n.extend(o, t), _.prototype = t.prototype, o.prototype = new _(), e && n.extend(o.prototype, e), 
        i && n.extend(o, i), o.prototype.constructor = o, o.__super__ = t.prototype, o;
    }, y = function(t) {
        return t && t.url ? n.isFunction(t.url) ? t.url() :t.url :null;
    }, b = function() {
        throw new Error('A "url" property or function must be specified');
    }, w = function(t, e, i) {
        return function(n) {
            t ? t(e, n, i) :e.trigger("error", e, n, i);
        };
    }, C = function(t) {
        return t.replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#x27;").replace(/\//g, "&#x2F;");
    };
}.call(this), /*!
 * jQuery Cookie Plugin v1.3.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
function(t, e, i) {
    function n(t) {
        return t;
    }
    function o(t) {
        return r(decodeURIComponent(t.replace(a, " ")));
    }
    function r(t) {
        return 0 === t.indexOf('"') && (t = t.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, "\\")), 
        t;
    }
    function s(t) {
        return l.json ? JSON.parse(t) :t;
    }
    var a = /\+/g, l = t.cookie = function(r, a, c) {
        if (a !== i) {
            if (c = t.extend({}, l.defaults, c), null === a && (c.expires = -1), "number" == typeof c.expires) {
                var h = c.expires, u = c.expires = new Date();
                u.setDate(u.getDate() + h);
            }
            return a = l.json ? JSON.stringify(a) :String(a), e.cookie = [ encodeURIComponent(r), "=", l.raw ? a :encodeURIComponent(a), c.expires ? "; expires=" + c.expires.toUTCString() :"", c.path ? "; path=" + c.path :"", c.domain ? "; domain=" + c.domain :"", c.secure ? "; secure" :"" ].join("");
        }
        for (var d = l.raw ? n :o, p = e.cookie.split("; "), f = r ? null :{}, g = 0, m = p.length; m > g; g++) {
            var _ = p[g].split("="), v = d(_.shift()), y = d(_.join("="));
            if (r && r === v) {
                f = s(y);
                break;
            }
            r || (f[v] = s(y));
        }
        return f;
    };
    l.defaults = {}, t.removeCookie = function(e, i) {
        return null !== t.cookie(e) ? (t.cookie(e, null, i), !0) :!1;
    };
}(jQuery, document), /*!
 * qTip2 - Pretty powerful tooltips - v2.0.1-27-
 * http://qtip2.com
 *
 * Copyright (c) 2013 Craig Michael Thompson
 * Released under the MIT, GPL licenses
 * http://jquery.org/license
 *
 * Date: Tue Feb 26 2013 11:17 GMT+0000
 * Plugins: svg ajax tips modal viewport imagemap ie6
 * Styles: basic css3
 */
function(t, e, i) {
    !function(t) {
        "use strict";
        "function" == typeof define && define.amd ? define([ "jquery" ], t) :jQuery && !jQuery.fn.qtip && t(jQuery);
    }(function(n) {
        function o(i) {
            g = {
                pageX:i.pageX,
                pageY:i.pageY,
                type:"mousemove",
                scrollX:t.pageXOffset || e.body.scrollLeft || e.documentElement.scrollLeft,
                scrollY:t.pageYOffset || e.body.scrollTop || e.documentElement.scrollTop
            };
        }
        function r(t) {
            var e = function(t) {
                return t === y || "object" != typeof t;
            }, i = function(t) {
                return !n.isFunction(t) && (!t && !t.attr || t.length < 1 || "object" == typeof t && !t.jquery && !t.then);
            };
            return t && "object" == typeof t ? (e(t.metadata) && (t.metadata = {
                type:t.metadata
            }), "content" in t && ((e(t.content) || t.content.jquery) && (t.content = {
                text:t.content
            }), i(t.content.text || v) && (t.content.text = v), "title" in t.content && (e(t.content.title) && (t.content.title = {
                text:t.content.title
            }), i(t.content.title.text || v) && (t.content.title.text = v))), "position" in t && e(t.position) && (t.position = {
                my:t.position,
                at:t.position
            }), "show" in t && e(t.show) && (t.show = t.show.jquery ? {
                target:t.show
            } :t.show === _ ? {
                ready:_
            } :{
                event:t.show
            }), "hide" in t && e(t.hide) && (t.hide = t.hide.jquery ? {
                target:t.hide
            } :{
                event:t.hide
            }), "style" in t && e(t.style) && (t.style = {
                classes:t.style
            }), n.each(f, function() {
                this.sanitize && this.sanitize(t);
            }), t) :v;
        }
        function s(i, s, a, l) {
            function c(t) {
                for (var e, i = 0, n = s, o = t.split("."); n = n[o[i++]]; ) i < o.length && (e = n);
                return [ e || s, o.pop() ];
            }
            function h(t) {
                return M.concat("").join(t ? "-" + t + " " :" ");
            }
            function u() {
                var t = s.style.widget, e = Y.hasClass(X);
                Y.removeClass(X), X = t ? "ui-state-disabled" :"qtip-disabled", Y.toggleClass(X, e), 
                Y.toggleClass("ui-helper-reset " + h(), t).toggleClass(B, s.style.def && !t), $.content && $.content.toggleClass(h("content"), t), 
                $.titlebar && $.titlebar.toggleClass(h("header"), t), $.button && $.button.toggleClass(P + "-icon", !t);
            }
            function d(t) {
                $.title && ($.titlebar.remove(), $.titlebar = $.title = $.button = y, t !== v && U.reposition());
            }
            function b() {
                var t = s.content.title.button, e = "string" == typeof t, i = e ? t :"Close tooltip";
                $.button && $.button.remove(), $.button = t.jquery ? t :n("<a />", {
                    "class":"qtip-close " + (s.style.widget ? "" :P + "-icon"),
                    title:i,
                    "aria-label":i
                }).prepend(n("<span />", {
                    "class":"ui-icon ui-icon-close",
                    html:"&times;"
                })), $.button.appendTo($.titlebar || Y).attr("role", "button").click(function(t) {
                    return Y.hasClass(X) || U.hide(t), v;
                });
            }
            function w() {
                var t = V + "-title";
                $.titlebar && d(), $.titlebar = n("<div />", {
                    "class":P + "-titlebar " + (s.style.widget ? h("header") :"")
                }).append($.title = n("<div />", {
                    id:t,
                    "class":P + "-title",
                    "aria-atomic":_
                })).insertBefore($.content).delegate(".qtip-close", "mousedown keydown mouseup keyup mouseout", function(t) {
                    n(this).toggleClass("ui-state-active ui-state-focus", "down" === t.type.substr(-4));
                }).delegate(".qtip-close", "mouseover mouseout", function(t) {
                    n(this).toggleClass("ui-state-hover", "mouseover" === t.type);
                }), s.content.title.button && b();
            }
            function C(t) {
                var e = $.button;
                return U.rendered ? (t ? b() :e.remove(), void 0) :v;
            }
            function T(t, e) {
                var o = $.title;
                return U.rendered && t ? (n.isFunction(t) && (t = t.call(i, G.event, U)), t === v || !t && "" !== t ? d(v) :(t.jquery && t.length > 0 ? o.empty().append(t.css({
                    display:"block"
                })) :o.html(t), e !== v && U.rendered && Y[0].offsetWidth > 0 && U.reposition(G.event), 
                void 0)) :v;
            }
            function k(t) {
                t && n.isFunction(t.done) && t.done(function(t) {
                    I(t, null, v);
                });
            }
            function I(t, e, o) {
                function r(t) {
                    function e(e) {
                        e.src !== R && -1 === n.inArray(e, r) && (r.push(e), n.data(e, "imagesLoaded", {
                            src:e.src
                        }), o.length === r.length && (setTimeout(t), o.unbind(".imagesLoaded")));
                    }
                    var i = n(this), o = i.find("img").add(i.filter("img")), r = [];
                    return o.length ? (o.bind("load.imagesLoaded error.imagesLoaded", function(t) {
                        e(t.target);
                    }).each(function(t, i) {
                        var o = i.src, r = n.data(i, "imagesLoaded");
                        r && r.src === o || i.complete && i.naturalWidth ? e(i) :(i.readyState || i.complete) && (i.src = R, 
                        i.src = o);
                    }), void 0) :t();
                }
                var a = $.content;
                return U.rendered && t ? (n.isFunction(t) && (t = t.call(i, G.event, U) || ""), 
                o !== v && k(s.content.deferred), t.jquery && t.length > 0 ? a.empty().append(t.css({
                    display:"block"
                })) :a.html(t), U.rendered < 0 ? Y.queue("fx", r) :(q = 0, r.call(Y[0], n.noop)), 
                U) :v;
            }
            function F() {
                function r(t) {
                    if (Y.hasClass(X)) return v;
                    clearTimeout(U.timers.show), clearTimeout(U.timers.hide);
                    var e = function() {
                        U.toggle(_, t);
                    };
                    s.show.delay > 0 ? U.timers.show = setTimeout(e, s.show.delay) :e();
                }
                function l(t) {
                    if (Y.hasClass(X) || W || q) return v;
                    var e = n(t.relatedTarget), i = e.closest(L)[0] === Y[0], o = e[0] === d.show[0];
                    if (clearTimeout(U.timers.show), clearTimeout(U.timers.hide), this !== e[0] && "mouse" === u.target && i || s.hide.fixed && /mouse(out|leave|move)/.test(t.type) && (i || o)) try {
                        t.preventDefault(), t.stopImmediatePropagation();
                    } catch (r) {} else s.hide.delay > 0 ? U.timers.hide = setTimeout(function() {
                        U.hide(t);
                    }, s.hide.delay) :U.hide(t);
                }
                function c(t) {
                    return Y.hasClass(X) ? v :(clearTimeout(U.timers.inactive), U.timers.inactive = setTimeout(function() {
                        U.hide(t);
                    }, s.hide.inactive), void 0);
                }
                function h(t) {
                    U.rendered && Y[0].offsetWidth > 0 && U.reposition(t);
                }
                var u = s.position, d = {
                    show:s.show.target,
                    hide:s.hide.target,
                    viewport:n(u.viewport),
                    document:n(e),
                    body:n(e.body),
                    window:n(t)
                }, m = {
                    show:n.trim("" + s.show.event).split(" "),
                    hide:n.trim("" + s.hide.event).split(" ")
                }, y = 6 === f.ie;
                Y.bind("mouseenter" + J + " mouseleave" + J, function(t) {
                    var e = "mouseenter" === t.type;
                    e && U.focus(t), Y.toggleClass(K, e);
                }), /mouse(out|leave)/i.test(s.hide.event) && "window" === s.hide.leave && d.document.bind("mouseout" + J + " blur" + J, function(t) {
                    /select|option/.test(t.target.nodeName) || t.relatedTarget || U.hide(t);
                }), s.hide.fixed ? (d.hide = d.hide.add(Y), Y.bind("mouseover" + J, function() {
                    Y.hasClass(X) || clearTimeout(U.timers.hide);
                })) :/mouse(over|enter)/i.test(s.show.event) && d.hide.bind("mouseleave" + J, function() {
                    clearTimeout(U.timers.show);
                }), ("" + s.hide.event).indexOf("unfocus") > -1 && u.container.closest("html").bind("mousedown" + J + " touchstart" + J, function(t) {
                    var e = n(t.target), o = U.rendered && !Y.hasClass(X) && Y[0].offsetWidth > 0, r = e.parents(L).filter(Y[0]).length > 0;
                    e[0] === i[0] || e[0] === Y[0] || r || i.has(e[0]).length || !o || U.hide(t);
                }), "number" == typeof s.hide.inactive && (d.show.bind("qtip-" + a + "-inactive", c), 
                n.each(p.inactiveEvents, function(t, e) {
                    d.hide.add($.tooltip).bind(e + J + "-inactive", c);
                })), n.each(m.hide, function(t, e) {
                    var i = n.inArray(e, m.show), o = n(d.hide);
                    i > -1 && o.add(d.show).length === o.length || "unfocus" === e ? (d.show.bind(e + J, function(t) {
                        Y[0].offsetWidth > 0 ? l(t) :r(t);
                    }), delete m.show[i]) :d.hide.bind(e + J, l);
                }), n.each(m.show, function(t, e) {
                    d.show.bind(e + J, r);
                }), "number" == typeof s.hide.distance && d.show.add(Y).bind("mousemove" + J, function(t) {
                    var e = G.origin || {}, i = s.hide.distance, n = Math.abs;
                    (n(t.pageX - e.pageX) >= i || n(t.pageY - e.pageY) >= i) && U.hide(t);
                }), "mouse" === u.target && (d.show.bind("mousemove" + J, o), u.adjust.mouse && (s.hide.event && (Y.bind("mouseleave" + J, function(t) {
                    (t.relatedTarget || t.target) !== d.show[0] && U.hide(t);
                }), $.target.bind("mouseenter" + J + " mouseleave" + J, function(t) {
                    G.onTarget = "mouseenter" === t.type;
                })), d.document.bind("mousemove" + J, function(t) {
                    U.rendered && G.onTarget && !Y.hasClass(X) && Y[0].offsetWidth > 0 && U.reposition(t || g);
                }))), (u.adjust.resize || d.viewport.length) && (n.event.special.resize ? d.viewport :d.window).bind("resize" + J, h), 
                (d.viewport.length && 0 != u.adjust.scroll || y && "fixed" === Y.css("position")) && d.window.add(u.container).bind("scroll" + J, h);
            }
            function H() {
                var i = [ s.show.target[0], s.hide.target[0], U.rendered && $.tooltip[0], s.position.container[0], s.position.viewport[0], s.position.container.closest("html")[0], t, e ];
                U.rendered ? n([]).pushStack(n.grep(i, function(t) {
                    return "object" == typeof t;
                })).unbind(J) :s.show.target.unbind(J + "-create");
            }
            var $, G, U = this, V = (e.body, P + "-" + a), W = 0, q = 0, Y = n(), J = ".qtip-" + a, X = "qtip-disabled";
            U.id = a, U.rendered = v, U.destroyed = v, U.elements = $ = {
                target:i
            }, U.timers = {
                img:{}
            }, U.options = s, U.checks = {}, U.plugins = {}, U.cache = G = {
                event:{},
                target:n(),
                disabled:v,
                attr:l,
                onTarget:v,
                lastClass:""
            }, U.checks.builtin = {
                "^id$":function(t, e, i) {
                    var o = i === _ ? p.nextid :i, r = P + "-" + o;
                    o !== v && o.length > 0 && !n("#" + r).length && (Y[0].id = r, $.content[0].id = r + "-content", 
                    $.title[0].id = r + "-title");
                },
                "^content.text$":function() {
                    I(s.content.text);
                },
                "^content.deferred$":function() {
                    k(s.content.deferred);
                },
                "^content.title.text$":function(t, e, i) {
                    return i ? (!$.title && i && w(), T(i), void 0) :d();
                },
                "^content.title.button$":function(t, e, i) {
                    C(i);
                },
                "^position.(my|at)$":function(t, e, i) {
                    "string" == typeof i && (t[e] = new f.Corner(i));
                },
                "^position.container$":function(t, e, i) {
                    U.rendered && Y.appendTo(i);
                },
                "^show.ready$":function() {
                    U.rendered ? U.toggle(_) :U.render(1);
                },
                "^style.classes$":function(t, e, i) {
                    Y.attr("class", P + " qtip " + i);
                },
                "^style.width|height":function(t, e, i) {
                    Y.css(e, i);
                },
                "^style.widget|content.title":u,
                "^events.(render|show|move|hide|focus|blur)$":function(t, e, i) {
                    Y[(n.isFunction(i) ? "" :"un") + "bind"]("tooltip" + e, i);
                },
                "^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function() {
                    var t = s.position;
                    Y.attr("tracking", "mouse" === t.target && t.adjust.mouse), H(), F();
                }
            }, n.extend(U, {
                _triggerEvent:function(t, e, i) {
                    var o = n.Event("tooltip" + t);
                    return o.originalEvent = (i ? n.extend({}, i) :y) || G.event || y, Y.trigger(o, [ U ].concat(e || [])), 
                    !o.isDefaultPrevented();
                },
                render:function(t) {
                    if (U.rendered) return U;
                    var e = s.content.text, o = s.content.title, r = s.position;
                    return n.attr(i[0], "aria-describedby", V), Y = $.tooltip = n("<div/>", {
                        id:V,
                        "class":[ P, B, s.style.classes, P + "-pos-" + s.position.my.abbrev() ].join(" "),
                        width:s.style.width || "",
                        height:s.style.height || "",
                        tracking:"mouse" === r.target && r.adjust.mouse,
                        role:"alert",
                        "aria-live":"polite",
                        "aria-atomic":v,
                        "aria-describedby":V + "-content",
                        "aria-hidden":_
                    }).toggleClass(X, G.disabled).data("qtip", U).appendTo(s.position.container).append($.content = n("<div />", {
                        "class":P + "-content",
                        id:V + "-content",
                        "aria-atomic":_
                    })), U.rendered = -1, W = 1, o.text ? (w(), n.isFunction(o.text) || T(o.text, v)) :o.button && b(), 
                    (!n.isFunction(e) || e.then) && I(e, v), U.rendered = _, u(), n.each(s.events, function(t, e) {
                        n.isFunction(e) && Y.bind("toggle" === t ? "tooltipshow tooltiphide" :"tooltip" + t, e);
                    }), n.each(f, function() {
                        "render" === this.initialize && this(U);
                    }), F(), Y.queue("fx", function(e) {
                        U._triggerEvent("render"), W = 0, (s.show.ready || t) && U.toggle(_, G.event, v), 
                        e();
                    }), U;
                },
                get:function(t) {
                    var e, i;
                    switch (t.toLowerCase()) {
                      case "dimensions":
                        e = {
                            height:Y.outerHeight(v),
                            width:Y.outerWidth(v)
                        };
                        break;

                      case "offset":
                        e = f.offset(Y, s.position.container);
                        break;

                      default:
                        i = c(t.toLowerCase()), e = i[0][i[1]], e = e.precedance ? e.string() :e;
                    }
                    return e;
                },
                set:function(t, e) {
                    function i(t, e) {
                        var i, n, o;
                        for (i in h) for (n in h[i]) (o = new RegExp(n, "i").exec(t)) && (e.push(o), h[i][n].apply(U, e));
                    }
                    var o, a = /^position\.(my|at|adjust|target|container)|style|content|show\.ready/i, l = v, h = U.checks;
                    return "string" == typeof t ? (o = t, t = {}, t[o] = e) :t = n.extend(_, {}, t), 
                    n.each(t, function(e, i) {
                        var o, r = c(e.toLowerCase());
                        o = r[0][r[1]], r[0][r[1]] = "object" == typeof i && i.nodeType ? n(i) :i, t[e] = [ r[0], r[1], i, o ], 
                        l = a.test(e) || l;
                    }), r(s), W = 1, n.each(t, i), W = 0, U.rendered && Y[0].offsetWidth > 0 && l && U.reposition("mouse" === s.position.target ? y :G.event), 
                    U;
                },
                toggle:function(t, i) {
                    function r() {
                        t ? (f.ie && Y[0].style.removeAttribute("filter"), Y.css("overflow", ""), "string" == typeof c.autofocus && n(c.autofocus, Y).focus(), 
                        c.target.trigger("qtip-" + a + "-inactive")) :Y.css({
                            display:"",
                            visibility:"",
                            opacity:"",
                            left:"",
                            top:""
                        }), U._triggerEvent(t ? "visible" :"hidden");
                    }
                    if (i) {
                        if (/over|enter/.test(i.type) && /out|leave/.test(G.event.type) && s.show.target.add(i.target).length === s.show.target.length && Y.has(i.relatedTarget).length) return U;
                        G.event = n.extend({}, i);
                    }
                    if (!U.rendered) return t ? U.render(1) :U;
                    var l = t ? "show" :"hide", c = s[l], h = (s[t ? "hide" :"show"], s.position), u = s.content, d = Y.css("width"), p = Y[0].offsetWidth > 0, y = t || 1 === c.target.length, b = !i || c.target.length < 2 || G.target[0] === i.target;
                    return (typeof t).search("boolean|number") && (t = !p), !Y.is(":animated") && p === t && b ? U :U._triggerEvent(l, [ 90 ]) ? (n.attr(Y[0], "aria-hidden", !t), 
                    t ? (G.origin = n.extend({}, g), U.focus(i), n.isFunction(u.text) && I(u.text, v), 
                    n.isFunction(u.title.text) && T(u.title.text, v), !m && "mouse" === h.target && h.adjust.mouse && (n(e).bind("mousemove.qtip", o), 
                    m = _), d || Y.css("width", Y.outerWidth()), U.reposition(i, arguments[2]), d || Y.css("width", ""), 
                    c.solo && ("string" == typeof c.solo ? n(c.solo) :n(L, c.solo)).not(Y).not(c.target).qtip("hide", n.Event("tooltipsolo"))) :(clearTimeout(U.timers.show), 
                    delete G.origin, m && !n(L + '[tracking="true"]:visible', c.solo).not(Y).length && (n(e).unbind("mousemove.qtip"), 
                    m = v), U.blur(i)), c.effect === v || y === v ? (Y[l](), r.call(Y)) :n.isFunction(c.effect) ? (Y.stop(1, 1), 
                    c.effect.call(Y, U), Y.queue("fx", function(t) {
                        r(), t();
                    })) :Y.fadeTo(90, t ? 1 :0, r), t && c.target.trigger("qtip-" + a + "-inactive"), 
                    U) :U;
                },
                show:function(t) {
                    return U.toggle(_, t);
                },
                hide:function(t) {
                    return U.toggle(v, t);
                },
                focus:function(t) {
                    if (!U.rendered) return U;
                    var e = n(L), i = parseInt(Y[0].style.zIndex, 10), o = (s.zindex || p.zindex) + e.length, r = n.extend({}, t);
                    return Y.hasClass(z) || U._triggerEvent("focus", [ o ], r) && (i !== o && (e.each(function() {
                        this.style.zIndex > i && (this.style.zIndex = this.style.zIndex - 1);
                    }), e.filter("." + z).qtip("blur", r)), Y.addClass(z)[0].style.zIndex = o), U;
                },
                blur:function(t) {
                    return Y.removeClass(z), U._triggerEvent("blur", [ Y.css("zIndex") ], t), U;
                },
                reposition:function(i, o) {
                    if (!U.rendered || W) return U;
                    W = 1;
                    var r, a, l = s.position.target, c = s.position, h = c.my, u = c.at, d = c.adjust, p = d.method.split(" "), m = Y.outerWidth(v), _ = Y.outerHeight(v), y = 0, b = 0, w = Y.css("position"), C = c.viewport, T = {
                        left:0,
                        top:0
                    }, k = c.container, I = Y[0].offsetWidth > 0, R = i && "scroll" === i.type, P = n(t);
                    if (n.isArray(l) && 2 === l.length) u = {
                        x:E,
                        y:D
                    }, T = {
                        left:l[0],
                        top:l[1]
                    }; else if ("mouse" === l && (i && i.pageX || G.event.pageX)) u = {
                        x:E,
                        y:D
                    }, i = !g || !g.pageX || !d.mouse && i && i.pageX ? (!i || "resize" !== i.type && "scroll" !== i.type ? i && i.pageX && "mousemove" === i.type ? i :(!d.mouse || s.show.distance) && G.origin && G.origin.pageX ? G.origin :i :G.event) || i || G.event || g || {} :{
                        pageX:g.pageX,
                        pageY:g.pageY
                    }, "static" !== w && (T = k.offset()), T = {
                        left:i.pageX - T.left,
                        top:i.pageY - T.top
                    }, d.mouse && R && (T.left -= g.scrollX - P.scrollLeft(), T.top -= g.scrollY - P.scrollTop()); else {
                        if ("event" === l && i && i.target && "scroll" !== i.type && "resize" !== i.type ? G.target = n(i.target) :"event" !== l && (G.target = n(l.jquery ? l :$.target)), 
                        l = G.target, l = n(l).eq(0), 0 === l.length) return U;
                        l[0] === e || l[0] === t ? (y = f.iOS ? t.innerWidth :l.width(), b = f.iOS ? t.innerHeight :l.height(), 
                        l[0] === t && (T = {
                            top:(C || l).scrollTop(),
                            left:(C || l).scrollLeft()
                        })) :f.imagemap && l.is("area") ? r = f.imagemap(U, l, u, f.viewport ? p :v) :f.svg && l[0].ownerSVGElement ? r = f.svg(U, l, u, f.viewport ? p :v) :(y = l.outerWidth(v), 
                        b = l.outerHeight(v), T = f.offset(l, k)), r && (y = r.width, b = r.height, a = r.offset, 
                        T = r.position), (f.iOS > 3.1 && f.iOS < 4.1 || f.iOS >= 4.3 && f.iOS < 4.33 || !f.iOS && "fixed" === w) && (T.left -= P.scrollLeft(), 
                        T.top -= P.scrollTop()), T.left += u.x === S ? y :u.x === O ? y / 2 :0, T.top += u.y === x ? b :u.y === O ? b / 2 :0;
                    }
                    return T.left += d.x + (h.x === S ? -m :h.x === O ? -m / 2 :0), T.top += d.y + (h.y === x ? -_ :h.y === O ? -_ / 2 :0), 
                    f.viewport ? (T.adjusted = f.viewport(U, T, c, y, b, m, _), a && T.adjusted.left && (T.left += a.left), 
                    a && T.adjusted.top && (T.top += a.top)) :T.adjusted = {
                        left:0,
                        top:0
                    }, U._triggerEvent("move", [ T, C.elem || C ], i) ? (delete T.adjusted, o === v || !I || isNaN(T.left) || isNaN(T.top) || "mouse" === l || !n.isFunction(c.effect) ? Y.css(T) :n.isFunction(c.effect) && (c.effect.call(Y, U, n.extend({}, T)), 
                    Y.queue(function(t) {
                        n(this).css({
                            opacity:"",
                            height:""
                        }), f.ie && this.style.removeAttribute("filter"), t();
                    })), W = 0, U) :U;
                },
                disable:function(t) {
                    return "boolean" != typeof t && (t = !(Y.hasClass(X) || G.disabled)), U.rendered ? (Y.toggleClass(X, t), 
                    n.attr(Y[0], "aria-disabled", t)) :G.disabled = !!t, U;
                },
                enable:function() {
                    return U.disable(v);
                },
                destroy:function(t) {
                    function e() {
                        var t = i[0], e = n.attr(t, j), o = i.data("qtip");
                        U.rendered && (n.each(U.plugins, function(t) {
                            this.destroy && this.destroy(), delete U.plugins[t];
                        }), Y.stop(1, 0).find("*").remove().end().remove(), U.rendered = v), clearTimeout(U.timers.show), 
                        clearTimeout(U.timers.hide), H(), o && U !== o || (i.removeData("qtip").removeAttr(N), 
                        s.suppress && e && (i.attr("title", e), i.removeAttr(j)), i.removeAttr("aria-describedby")), 
                        i.unbind(".qtip-" + a), delete A[U.id], delete U.options, delete U.elements, delete U.cache, 
                        delete U.timers, delete U.checks;
                    }
                    if (!U.destroyed) return U.destroyed = _, t === _ ? e() :(Y.bind("tooltiphidden", e), 
                    U.hide()), i;
                }
            });
        }
        function a(t, i, o) {
            var a, l, c, h, u, d = n(e.body), g = t[0] === e ? d :t, m = t.metadata ? t.metadata(o.metadata) :y, b = "html5" === o.metadata.type && m ? m[o.metadata.name] :y, w = t.data(o.metadata.name || "qtipopts");
            try {
                w = "string" == typeof w ? n.parseJSON(w) :w;
            } catch (C) {}
            if (h = n.extend(_, {}, p.defaults, o, "object" == typeof w ? r(w) :y, r(b || m)), 
            l = h.position, h.id = i, "boolean" == typeof h.content.text) {
                if (c = t.attr(h.content.attr), h.content.attr === v || !c) return v;
                h.content.text = c;
            }
            if (l.container.length || (l.container = d), l.target === v && (l.target = g), h.show.target === v && (h.show.target = g), 
            h.show.solo === _ && (h.show.solo = l.container.closest("body")), h.hide.target === v && (h.hide.target = g), 
            h.position.viewport === _ && (h.position.viewport = l.container), l.container = l.container.eq(0), 
            l.at = new f.Corner(l.at), l.my = new f.Corner(l.my), t.data("qtip")) if (h.overwrite) t.qtip("destroy"); else if (h.overwrite === v) return v;
            return t.attr(N, !0), h.suppress && (u = t.attr("title")) && t.removeAttr("title").attr(j, u).attr("title", ""), 
            a = new s(t, h, i, !!c), t.data("qtip", a), t.one("remove.qtip-" + i + " removeqtip.qtip-" + i, function() {
                var t;
                (t = n(this).data("qtip")) && t.destroy();
            }), a;
        }
        function l(t) {
            var e, i = this, o = t.elements.tooltip, r = t.options.content.ajax, s = p.defaults.content.ajax, a = _, l = v;
            t.checks.ajax = {
                "^content.ajax":function(t, e, n) {
                    "ajax" === e && (r = n), "once" === e ? i.init() :r && r.url ? i.load() :o.unbind($);
                }
            }, n.extend(i, {
                init:function() {
                    return r && r.url && o.unbind($)[r.once ? "one" :"bind"]("tooltipshow" + $, i.load), 
                    i;
                },
                load:function(o) {
                    function c() {
                        var e;
                        t.destroyed || (a = v, g && (l = _, t.show(o.originalEvent)), (e = s.complete || r.complete) && n.isFunction(e) && e.apply(r.context || t, arguments));
                    }
                    function h(e, i, o) {
                        var a;
                        t.destroyed || (d && "string" == typeof e && (e = n("<div/>").append(e.replace(G, "")).find(d)), 
                        (a = s.success || r.success) && n.isFunction(a) ? a.call(r.context || t, e, i, o) :t.set("content.text", e));
                    }
                    function u(e, i, n) {
                        t.destroyed || 0 === e.status || t.set("content.text", i + ": " + n);
                    }
                    if (l) return l = v, void 0;
                    var d, p = r.url.lastIndexOf(" "), f = r.url, g = !r.loading && a;
                    if (g) try {
                        o.preventDefault();
                    } catch (m) {} else if (o && o.isDefaultPrevented()) return i;
                    e && e.abort && e.abort(), p > -1 && (d = f.substr(p), f = f.substr(0, p)), e = n.ajax(n.extend({
                        error:s.error || u,
                        context:t
                    }, r, {
                        url:f,
                        success:h,
                        complete:c
                    }));
                },
                destroy:function() {
                    e && e.abort && e.abort(), t.destroyed = _;
                }
            }), i.init();
        }
        function c(t, e, i) {
            var n = Math.ceil(e / 2), o = Math.ceil(i / 2), r = {
                bottomright:[ [ 0, 0 ], [ e, i ], [ e, 0 ] ],
                bottomleft:[ [ 0, 0 ], [ e, 0 ], [ 0, i ] ],
                topright:[ [ 0, i ], [ e, 0 ], [ e, i ] ],
                topleft:[ [ 0, 0 ], [ 0, i ], [ e, i ] ],
                topcenter:[ [ 0, i ], [ n, 0 ], [ e, i ] ],
                bottomcenter:[ [ 0, 0 ], [ e, 0 ], [ n, i ] ],
                rightcenter:[ [ 0, 0 ], [ e, o ], [ 0, i ] ],
                leftcenter:[ [ e, 0 ], [ e, i ], [ 0, o ] ]
            };
            return r.lefttop = r.bottomright, r.righttop = r.bottomleft, r.leftbottom = r.topright, 
            r.rightbottom = r.topleft, r[t.string()];
        }
        function h(t) {
            function e(t) {
                var e = R.is(":visible");
                R.show(), t(), R.toggle(e);
            }
            function o() {
                N.width = m.height, N.height = m.width;
            }
            function r() {
                N.width = m.width, N.height = m.height;
            }
            function s(e, n, o) {
                if (k.tip) {
                    var r, s, a = g.corner.clone(), c = o.adjusted, h = t.options.position.adjust.method.split(" "), u = h[0], d = h[1] || h[0], p = {
                        left:v,
                        top:v,
                        x:0,
                        y:0
                    }, f = {};
                    g.corner.fixed !== _ && (u === I && a.precedance === b && c.left && a.y !== O ? a.precedance = a.precedance === b ? w :b :u !== I && c.left && (a.x = a.x === O ? c.left > 0 ? E :S :a.x === E ? S :E), 
                    d === I && a.precedance === w && c.top && a.x !== O ? a.precedance = a.precedance === w ? b :w :d !== I && c.top && (a.y = a.y === O ? c.top > 0 ? D :x :a.y === D ? x :D), 
                    a.string() === P.corner.string() || P.top === c.top && P.left === c.left || g.update(a, v)), 
                    r = g.position(a, c), r[a.x] += l(a, a.x), r[a.y] += l(a, a.y), r.right !== i && (r.left = -r.right), 
                    r.bottom !== i && (r.top = -r.bottom), r.user = Math.max(0, m.offset), (p.left = u === I && !!c.left) && (a.x === O ? f["margin-left"] = p.x = r["margin-left"] - c.left :(s = r.right !== i ? [ c.left, -r.left ] :[ -c.left, r.left ], 
                    (p.x = Math.max(s[0], s[1])) > s[0] && (o.left -= c.left, p.left = v), f[r.right !== i ? S :E] = p.x)), 
                    (p.top = d === I && !!c.top) && (a.y === O ? f["margin-top"] = p.y = r["margin-top"] - c.top :(s = r.bottom !== i ? [ c.top, -r.top ] :[ -c.top, r.top ], 
                    (p.y = Math.max(s[0], s[1])) > s[0] && (o.top -= c.top, p.top = v), f[r.bottom !== i ? x :D] = p.y)), 
                    k.tip.css(f).toggle(!(p.x && p.y || a.x === O && p.y || a.y === O && p.x)), o.left -= r.left.charAt ? r.user :u !== I || p.top || !p.left && !p.top ? r.left :0, 
                    o.top -= r.top.charAt ? r.user :d !== I || p.left || !p.left && !p.top ? r.top :0, 
                    P.left = c.left, P.top = c.top, P.corner = a.clone();
                }
            }
            function a() {
                var e = m.corner, i = t.options.position, n = i.at, o = i.my.string ? i.my.string() :i.my;
                return e === v || o === v && n === v ? v :(e === _ ? g.corner = new f.Corner(o) :e.string || (g.corner = new f.Corner(e), 
                g.corner.fixed = _), P.corner = new f.Corner(g.corner.string()), "centercenter" !== g.corner.string());
            }
            function l(t, i, n) {
                i = i ? i :t[t.precedance];
                var o, r = k.titlebar && t.y === D, s = r ? k.titlebar :R, a = "border-" + i + "-width", l = function(t) {
                    return parseInt(t.css(a), 10);
                };
                return e(function() {
                    o = (n ? l(n) :l(k.content) || l(s) || l(R)) || 0;
                }), o;
            }
            function h(t) {
                var i, n = k.titlebar && t.y === D, o = n ? k.titlebar :k.content, r = "-moz-", s = "-webkit-", a = "border-radius-" + t.y + t.x, l = "border-" + t.y + "-" + t.x + "-radius", c = function(t) {
                    return parseInt(o.css(t), 10) || parseInt(R.css(t), 10);
                };
                return e(function() {
                    i = c(l) || c(a) || c(r + l) || c(r + a) || c(s + l) || c(s + a) || 0;
                }), i;
            }
            function u(t) {
                function i(t, e, i) {
                    var n = t.css(e) || c;
                    return i && n === t.css(i) ? v :s.test(n) ? v :n;
                }
                var o = k.tip.css("cssText", ""), r = t || g.corner, s = /rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i, a = "border-" + r[r.precedance] + "-color", l = "background-color", c = "transparent", h = " !important", u = k.titlebar, d = u && (r.y === D || r.y === O && o.position().top + N.height / 2 + m.offset < u.outerHeight(_)), p = d ? u :k.content;
                e(function() {
                    A.fill = i(o, l) || i(p, l) || i(k.content, l) || i(R, l) || o.css(l), A.border = i(o, a, "color") || i(p, a, "color") || i(k.content, a, "color") || i(R, a, "color") || R.css(a), 
                    n("*", o).add(o).css("cssText", l + ":" + c + h + ";border:0" + h + ";");
                });
            }
            function d(t) {
                var e, i, n, o = t.precedance === w, r = N[o ? C :T], s = N[o ? T :C], a = t.string().indexOf(O) > -1, l = r * (a ? .5 :1), c = Math.pow, h = Math.round, u = Math.sqrt(c(l, 2) + c(s, 2)), d = [ M / l * u, M / s * u ];
                return d[2] = Math.sqrt(c(d[0], 2) - c(M, 2)), d[3] = Math.sqrt(c(d[1], 2) - c(M, 2)), 
                e = u + d[2] + d[3] + (a ? 0 :d[0]), i = e / u, n = [ h(i * s), h(i * r) ], {
                    height:n[o ? 0 :1],
                    width:n[o ? 1 :0]
                };
            }
            function p(t, e, i) {
                return "<qvml:" + t + ' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" ' + (e || "") + ' style="behavior: url(#default#VML); ' + (i || "") + '" />';
            }
            var g = this, m = t.options.style.tip, k = t.elements, R = k.tooltip, P = {
                top:0,
                left:0
            }, N = {
                width:m.width,
                height:m.height
            }, A = {}, M = m.border || 0;
            g.corner = y, g.mimic = y, g.border = M, g.offset = m.offset, g.size = N, t.checks.tip = {
                "^position.my|style.tip.(corner|mimic|border)$":function() {
                    g.init() || g.destroy(), t.reposition();
                },
                "^style.tip.(height|width)$":function() {
                    N = {
                        width:m.width,
                        height:m.height
                    }, g.create(), g.update(), t.reposition();
                },
                "^content.title.text|style.(classes|widget)$":function() {
                    k.tip && k.tip.length && g.update();
                }
            }, n.extend(g, {
                init:function() {
                    var t = a() && (W || f.ie);
                    return t && (g.create(), g.update(), R.unbind(V).bind("tooltipmove" + V, s)), t;
                },
                create:function() {
                    var t, e = N.width, i = N.height;
                    k.tip && k.tip.remove(), k.tip = n("<div />", {
                        "class":"qtip-tip"
                    }).css({
                        width:e,
                        height:i
                    }).prependTo(R), W ? n("<canvas />").appendTo(k.tip)[0].getContext("2d").save() :(t = p("shape", 'coordorigin="0,0"', "position:absolute;"), 
                    k.tip.html(t + t), n("*", k.tip).bind("click" + V + " mousedown" + V, function(t) {
                        t.stopPropagation();
                    }));
                },
                update:function(t, e) {
                    var i, s, a, h, C, T = k.tip, I = T.children(), L = N.width, B = N.height, z = m.mimic, K = Math.round;
                    t || (t = P.corner || g.corner), z === v ? z = t :(z = new f.Corner(z), z.precedance = t.precedance, 
                    "inherit" === z.x ? z.x = t.x :"inherit" === z.y ? z.y = t.y :z.x === z.y && (z[t.precedance] = t[t.precedance])), 
                    i = z.precedance, t.precedance === b ? o() :r(), k.tip.css({
                        width:L = N.width,
                        height:B = N.height
                    }), u(t), "transparent" !== A.border ? (M = l(t, y), 0 === m.border && M > 0 && (A.fill = A.border), 
                    g.border = M = m.border !== _ ? m.border :M) :g.border = M = 0, a = c(z, L, B), 
                    g.size = C = d(t), T.css(C).css("line-height", C.height + "px"), h = t.precedance === w ? [ K(z.x === E ? M :z.x === S ? C.width - L - M :(C.width - L) / 2), K(z.y === D ? C.height - B :0) ] :[ K(z.x === E ? C.width - L :0), K(z.y === D ? M :z.y === x ? C.height - B - M :(C.height - B) / 2) ], 
                    W ? (I.attr(C), s = I[0].getContext("2d"), s.restore(), s.save(), s.clearRect(0, 0, 3e3, 3e3), 
                    s.fillStyle = A.fill, s.strokeStyle = A.border, s.lineWidth = 2 * M, s.lineJoin = "miter", 
                    s.miterLimit = 100, s.translate(h[0], h[1]), s.beginPath(), s.moveTo(a[0][0], a[0][1]), 
                    s.lineTo(a[1][0], a[1][1]), s.lineTo(a[2][0], a[2][1]), s.closePath(), M && ("border-box" === R.css("background-clip") && (s.strokeStyle = A.fill, 
                    s.stroke()), s.strokeStyle = A.border, s.stroke()), s.fill()) :(a = "m" + a[0][0] + "," + a[0][1] + " l" + a[1][0] + "," + a[1][1] + " " + a[2][0] + "," + a[2][1] + " xe", 
                    h[2] = M && /^(r|b)/i.test(t.string()) ? 8 === f.ie ? 2 :1 :0, I.css({
                        coordsize:L + M + " " + (B + M),
                        antialias:"" + (z.string().indexOf(O) > -1),
                        left:h[0],
                        top:h[1],
                        width:L + M,
                        height:B + M
                    }).each(function(t) {
                        var e = n(this);
                        e[e.prop ? "prop" :"attr"]({
                            coordsize:L + M + " " + (B + M),
                            path:a,
                            fillcolor:A.fill,
                            filled:!!t,
                            stroked:!t
                        }).toggle(!(!M && !t)), t || "" !== e.html() || e.html(p("stroke", 'weight="' + 2 * M + 'px" color="' + A.border + '" miterlimit="1000" joinstyle="miter"'));
                    })), setTimeout(function() {
                        k.tip.css({
                            display:"inline-block",
                            visibility:"visible"
                        });
                    }, 1), e !== v && g.position(t);
                },
                position:function(t) {
                    var e, i, o, r = k.tip, s = {}, a = Math.max(0, m.offset);
                    return m.corner !== v && r ? (t = t || g.corner, e = t.precedance, i = d(t), o = [ t.x, t.y ], 
                    e === b && o.reverse(), n.each(o, function(n, o) {
                        var r, c, u;
                        o === O ? (r = e === w ? E :D, s[r] = "50%", s["margin-" + r] = -Math.round(i[e === w ? C :T] / 2) + a) :(r = l(t, o), 
                        c = l(t, o, k.content), u = h(t), s[o] = n ? c :a + (u > r ? u :-r));
                    }), s[t[e]] -= i[e === b ? C :T], r.css({
                        top:"",
                        bottom:"",
                        left:"",
                        right:"",
                        margin:""
                    }).css(s), s) :v;
                },
                destroy:function() {
                    R.unbind(V), k.tip && k.tip.find("*").remove().end().remove(), delete g.corner, 
                    delete g.mimic, delete g.size;
                }
            }), g.init();
        }
        function u(t) {
            var i, o = this, r = t.options.show.modal, s = t.elements, a = s.tooltip, l = Z + t.id;
            t.checks.modal = {
                "^show.modal.(on|blur)$":function() {
                    o.destroy(), o.init(), i.toggle(a.is(":visible"));
                }
            }, n.extend(o, {
                init:function() {
                    return r.on ? (i = s.overlay = Y.elem, a.attr(J, _).css("z-index", f.modal.zindex + n(X).length).bind("tooltipshow" + l + " tooltiphide" + l, function(t, e, r) {
                        var s = t.originalEvent;
                        if (t.target === a[0]) if (s && "tooltiphide" === t.type && /mouse(leave|enter)/.test(s.type) && n(s.relatedTarget).closest(i[0]).length) try {
                            t.preventDefault();
                        } catch (l) {} else (!s || s && !s.solo) && o.toggle(t, "tooltipshow" === t.type, r);
                    }).bind("tooltipfocus" + l, function(t, e) {
                        if (!t.isDefaultPrevented() && t.target === a[0]) {
                            var o = n(X), r = f.modal.zindex + o.length, s = parseInt(a[0].style.zIndex, 10);
                            i[0].style.zIndex = r - 1, o.each(function() {
                                this.style.zIndex > s && (this.style.zIndex -= 1);
                            }), o.filter("." + z).qtip("blur", t.originalEvent), a.addClass(z)[0].style.zIndex = r, 
                            Y.update(e);
                            try {
                                t.preventDefault();
                            } catch (l) {}
                        }
                    }).bind("tooltiphide" + l, function(t) {
                        t.target === a[0] && n(X).filter(":visible").not(a).last().qtip("focus", t);
                    }), o) :o;
                },
                toggle:function(e, i, n) {
                    return e && e.isDefaultPrevented() ? o :(Y.toggle(t, !!i, n), o);
                },
                destroy:function() {
                    n([ e, a ]).removeAttr(J).unbind(l), Y.toggle(t, v), delete s.overlay;
                }
            }), o.init();
        }
        function d(i) {
            var o, r = this, s = i.elements, a = i.options, l = s.tooltip, c = ".ie6-" + i.id, h = n("select, object").length < 1, u = 0, d = v;
            i.checks.ie6 = {
                "^content|style$":function() {
                    redraw();
                }
            }, n.extend(r, {
                init:function() {
                    var i, a = n(t);
                    h && (s.bgiframe = n('<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>'), 
                    s.bgiframe.appendTo(l), l.bind("tooltipmove" + c, r.adjustBGIFrame)), o = n("<div/>", {
                        id:"qtip-rcontainer"
                    }).appendTo(e.body), r.redraw(), s.overlay && !d && (i = function() {
                        s.overlay[0].style.top = a.scrollTop() + "px";
                    }, a.bind("scroll.qtip-ie6, resize.qtip-ie6", i), i(), s.overlay.addClass("qtipmodal-ie6fix"), 
                    d = _);
                },
                adjustBGIFrame:function() {
                    var t, e, n = i.get("dimensions"), o = i.plugins.tip, r = s.tip;
                    e = parseInt(l.css("border-left-width"), 10) || 0, e = {
                        left:-e,
                        top:-e
                    }, o && r && (t = "x" === o.corner.precedance ? [ "width", "left" ] :[ "height", "top" ], 
                    e[t[1]] -= r[t[0]]()), s.bgiframe.css(e).css(n);
                },
                redraw:function() {
                    if (i.rendered < 1 || u) return r;
                    var t, e, n, s, c = a.style, h = a.position.container;
                    return u = 1, c.height && l.css(T, c.height), c.width ? l.css(C, c.width) :(l.css(C, "").appendTo(o), 
                    e = l.width(), 1 > e % 2 && (e += 1), n = l.css("max-width") || "", s = l.css("min-width") || "", 
                    t = (n + s).indexOf("%") > -1 ? h.width() / 100 :0, n = (n.indexOf("%") > -1 ? t :1) * parseInt(n, 10) || e, 
                    s = (s.indexOf("%") > -1 ? t :1) * parseInt(s, 10) || 0, e = n + s ? Math.min(Math.max(e, s), n) :e, 
                    l.css(C, Math.round(e)).appendTo(h)), u = 0, r;
                },
                destroy:function() {
                    h && s.bgiframe.remove(), l.unbind(c);
                }
            }), r.init();
        }
        var p, f, g, m, _ = !0, v = !1, y = null, b = "x", w = "y", C = "width", T = "height", D = "top", E = "left", x = "bottom", S = "right", O = "center", k = "flipinvert", I = "shift", R = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==", P = "qtip", N = "data-hasqtip", A = {}, M = [ "ui-widget", "ui-tooltip" ], L = "div.qtip." + P, B = P + "-default", z = P + "-focus", K = P + "-hover", F = "_replacedByqTip", j = "oldtitle";
        p = n.fn.qtip = function(t, e, o) {
            var s = ("" + t).toLowerCase(), a = y, l = n.makeArray(arguments).slice(1), c = l[l.length - 1], h = this[0] ? n.data(this[0], "qtip") :y;
            return !arguments.length && h || "api" === s ? h :"string" == typeof t ? (this.each(function() {
                var t = n.data(this, "qtip");
                if (!t) return _;
                if (c && c.timeStamp && (t.cache.event = c), "option" !== s && "options" !== s || !e) t[s] && t[s].apply(t[s], l); else {
                    if (!n.isPlainObject(e) && o === i) return a = t.get(e), v;
                    t.set(e, o);
                }
            }), a !== y ? a :this) :"object" != typeof t && arguments.length ? void 0 :(h = r(n.extend(_, {}, t)), 
            p.bind.call(this, h, c));
        }, p.bind = function(t, e) {
            return this.each(function(r) {
                function s(t) {
                    function e() {
                        d.render("object" == typeof t || l.show.ready), c.show.add(c.hide).unbind(u);
                    }
                    return d.cache.disabled ? v :(d.cache.event = n.extend({}, t), d.cache.target = t ? n(t.target) :[ i ], 
                    l.show.delay > 0 ? (clearTimeout(d.timers.show), d.timers.show = setTimeout(e, l.show.delay), 
                    h.show !== h.hide && c.hide.bind(h.hide, function() {
                        clearTimeout(d.timers.show);
                    })) :e(), void 0);
                }
                var l, c, h, u, d, g;
                return g = n.isArray(t.id) ? t.id[r] :t.id, g = !g || g === v || g.length < 1 || A[g] ? p.nextid++ :A[g] = g, 
                u = ".qtip-" + g + "-create", d = a(n(this), g, t), d === v ? _ :(l = d.options, 
                n.each(f, function() {
                    "initialize" === this.initialize && this(d);
                }), c = {
                    show:l.show.target,
                    hide:l.hide.target
                }, h = {
                    show:n.trim("" + l.show.event).replace(/ /g, u + " ") + u,
                    hide:n.trim("" + l.hide.event).replace(/ /g, u + " ") + u
                }, /mouse(over|enter)/i.test(h.show) && !/mouse(out|leave)/i.test(h.hide) && (h.hide += " mouseleave" + u), 
                c.show.bind("mousemove" + u, function(t) {
                    o(t), d.cache.onTarget = _;
                }), c.show.bind(h.show, s), (l.show.ready || l.prerender) && s(e), void 0);
            });
        }, f = p.plugins = {
            Corner:function(t) {
                t = ("" + t).replace(/([A-Z])/, " $1").replace(/middle/gi, O).toLowerCase(), this.x = (t.match(/left|right/i) || t.match(/center/) || [ "inherit" ])[0].toLowerCase(), 
                this.y = (t.match(/top|bottom|center/i) || [ "inherit" ])[0].toLowerCase();
                var e = t.charAt(0);
                this.precedance = "t" === e || "b" === e ? w :b, this.string = function() {
                    return this.precedance === w ? this.y + this.x :this.x + this.y;
                }, this.abbrev = function() {
                    var t = this.x.substr(0, 1), e = this.y.substr(0, 1);
                    return t === e ? t :this.precedance === w ? e + t :t + e;
                }, this.invertx = function(t) {
                    this.x = this.x === E ? S :this.x === S ? E :t || this.x;
                }, this.inverty = function(t) {
                    this.y = this.y === D ? x :this.y === x ? D :t || this.y;
                }, this.clone = function() {
                    return {
                        x:this.x,
                        y:this.y,
                        precedance:this.precedance,
                        string:this.string,
                        abbrev:this.abbrev,
                        clone:this.clone,
                        invertx:this.invertx,
                        inverty:this.inverty
                    };
                };
            },
            offset:function(t, i) {
                function o(t, e) {
                    a.left += e * t.scrollLeft(), a.top += e * t.scrollTop();
                }
                var r, s, a = t.offset(), l = t.closest("body"), c = f.ie && "CSS1Compat" !== e.compatMode, h = i;
                if (h) {
                    do "static" !== h.css("position") && (s = h.position(), a.left -= s.left + (parseInt(h.css("borderLeftWidth"), 10) || 0) + (parseInt(h.css("marginLeft"), 10) || 0), 
                    a.top -= s.top + (parseInt(h.css("borderTopWidth"), 10) || 0) + (parseInt(h.css("marginTop"), 10) || 0)); while ((h = n(h[0].offsetParent)).length);
                    (r && r[0] !== l[0] || c) && o(r || l, 1);
                }
                return a;
            },
            ie:function() {
                for (var t = 3, i = e.createElement("div"); (i.innerHTML = "<!--[if gt IE " + ++t + "]><i></i><![endif]-->") && i.getElementsByTagName("i")[0]; ) ;
                return t > 4 ? t :v;
            }(),
            iOS:parseFloat(("" + (/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent) || [ 0, "" ])[1]).replace("undefined", "3_2").replace("_", ".").replace("_", "")) || v,
            fn:{
                attr:function(t, e) {
                    if (this.length) {
                        var i = this[0], o = "title", r = n.data(i, "qtip");
                        if (t === o && r && "object" == typeof r && r.options.suppress) return arguments.length < 2 ? n.attr(i, j) :(r && r.options.content.attr === o && r.cache.attr && r.set("content.text", e), 
                        this.attr(j, e));
                    }
                    return n.fn["attr" + F].apply(this, arguments);
                },
                clone:function(t) {
                    var e = (n([]), n.fn["clone" + F].apply(this, arguments));
                    return t || e.filter("[" + j + "]").attr("title", function() {
                        return n.attr(this, j);
                    }).removeAttr(j), e;
                }
            }
        }, n.each(f.fn, function(t, e) {
            if (!e || n.fn[t + F]) return _;
            var i = n.fn[t + F] = n.fn[t];
            n.fn[t] = function() {
                return e.apply(this, arguments) || i.apply(this, arguments);
            };
        }), n.ui || (n["cleanData" + F] = n.cleanData, n.cleanData = function(t) {
            for (var e, o = 0; (e = t[o]) !== i && e.getAttribute(N); o++) try {
                n(e).triggerHandler("removeqtip");
            } catch (r) {}
            n["cleanData" + F](t);
        }), p.version = "2.0.1-27-", p.nextid = 0, p.inactiveEvents = "click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "), 
        p.zindex = 15e3, p.defaults = {
            prerender:v,
            id:v,
            overwrite:_,
            suppress:_,
            content:{
                text:_,
                attr:"title",
                deferred:v,
                title:{
                    text:v,
                    button:v
                }
            },
            position:{
                my:"top left",
                at:"bottom right",
                target:v,
                container:v,
                viewport:v,
                adjust:{
                    x:0,
                    y:0,
                    mouse:_,
                    scroll:_,
                    resize:_,
                    method:"flipinvert flipinvert"
                },
                effect:function(t, e) {
                    n(this).animate(e, {
                        duration:200,
                        queue:v
                    });
                }
            },
            show:{
                target:v,
                event:"mouseenter",
                effect:_,
                delay:90,
                solo:v,
                ready:v,
                autofocus:v
            },
            hide:{
                target:v,
                event:"mouseleave",
                effect:_,
                delay:0,
                fixed:v,
                inactive:v,
                leave:"window",
                distance:v
            },
            style:{
                classes:"",
                widget:v,
                width:v,
                height:v,
                def:_
            },
            events:{
                render:y,
                move:y,
                show:y,
                hide:y,
                toggle:y,
                visible:y,
                hidden:y,
                focus:y,
                blur:y
            }
        }, f.svg = function(t, i) {
            for (var o, r, s, a, l, c = n(e), h = i[0], u = {
                width:0,
                height:0,
                position:{
                    top:1e10,
                    left:1e10
                }
            }; !h.getBBox; ) h = h.parentNode;
            if (h.getBBox && h.parentNode) {
                if (o = h.getBBox(), r = h.getScreenCTM(), s = h.farthestViewportElement || h, !s.createSVGPoint) return u;
                a = s.createSVGPoint(), a.x = o.x, a.y = o.y, l = a.matrixTransform(r), u.position.left = l.x, 
                u.position.top = l.y, a.x += o.width, a.y += o.height, l = a.matrixTransform(r), 
                u.width = l.x - u.position.left, u.height = l.y - u.position.top, u.position.left += c.scrollLeft(), 
                u.position.top += c.scrollTop();
            }
            return u;
        };
        var H, $ = ".qtip-ajax", G = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;
        H = f.ajax = function(t) {
            var e = t.plugins.ajax;
            return "object" == typeof e ? e :t.plugins.ajax = new l(t);
        }, H.initialize = "render", H.sanitize = function(t) {
            var e, i = t.content;
            i && "ajax" in i && (e = i.ajax, "object" != typeof e && (e = t.content.ajax = {
                url:e
            }), "boolean" != typeof e.once && e.once && (e.once = !!e.once));
        }, n.extend(_, p.defaults, {
            content:{
                ajax:{
                    loading:_,
                    once:_
                }
            }
        });
        var U, V = ".qtip-tip", W = !!e.createElement("canvas").getContext;
        U = f.tip = function(t) {
            var e = t.plugins.tip;
            return "object" == typeof e ? e :t.plugins.tip = new h(t);
        }, U.initialize = "render", U.sanitize = function(t) {
            var e, i = t.style;
            i && "tip" in i && (e = t.style.tip, "object" != typeof e && (t.style.tip = {
                corner:e
            }), /string|boolean/i.test(typeof e.corner) || (e.corner = _), "number" != typeof e.width && delete e.width, 
            "number" != typeof e.height && delete e.height, "number" != typeof e.border && e.border !== _ && delete e.border, 
            "number" != typeof e.offset && delete e.offset);
        }, n.extend(_, p.defaults, {
            style:{
                tip:{
                    corner:_,
                    mimic:v,
                    width:6,
                    height:6,
                    border:_,
                    offset:0
                }
            }
        });
        var q, Y, J = "is-modal-qtip", X = L + "[" + J + "]", Z = ".qtipmodal";
        Y = function() {
            function i(t) {
                if (n.expr[":"].focusable) return n.expr[":"].focusable;
                var e, i, o, r = !isNaN(n.attr(t, "tabindex")), s = t.nodeName.toLowerCase();
                return "area" === s ? (e = t.parentNode, i = e.name, t.href && i && "map" === e.nodeName.toLowerCase() ? (o = n("img[usemap=#" + i + "]")[0], 
                !!o && o.is(":visible")) :!1) :/input|select|textarea|button|object/.test(s) ? !t.disabled :"a" === s ? t.href || r :r;
            }
            function o(t) {
                u.length < 1 && t.length ? t.not("body").blur() :u.first().focus();
            }
            function r(t) {
                if (c.is(":visible")) {
                    var e, i = n(t.target), r = s.elements.tooltip, l = i.closest(L);
                    e = l.length < 1 ? v :parseInt(l[0].style.zIndex, 10) > parseInt(r[0].style.zIndex, 10), 
                    e || i.closest(L)[0] === r[0] || o(i), a = t.target === u[u.length - 1];
                }
            }
            var s, a, l, c, h = this, u = {};
            n.extend(h, {
                init:function() {
                    function i() {
                        var t = n(this);
                        c.css({
                            height:t.height(),
                            width:t.width()
                        });
                    }
                    return c = h.elem = n("<div />", {
                        id:"qtip-overlay",
                        html:"<div></div>",
                        mousedown:function() {
                            return v;
                        }
                    }).hide(), n(t).bind("resize" + Z, i), i(), n(e.body).bind("focusin" + Z, r), n(e).bind("keydown" + Z, function(t) {
                        s && s.options.show.modal.escape && 27 === t.keyCode && s.hide(t);
                    }), c.bind("click" + Z, function(t) {
                        s && s.options.show.modal.blur && s.hide(t);
                    }), h;
                },
                update:function(t) {
                    s = t, u = t.options.show.modal.stealfocus !== v ? t.elements.tooltip.find("*").filter(function() {
                        return i(this);
                    }) :[];
                },
                toggle:function(t, i, r) {
                    var a = (n(e.body), t.elements.tooltip), u = t.options.show.modal, d = u.effect, p = i ? "show" :"hide", f = c.is(":visible"), g = n(X).filter(":visible:not(:animated)").not(a);
                    return h.update(t), i && u.stealfocus !== v && o(n(":focus")), c.toggleClass("blurs", u.blur), 
                    i && c.css({
                        left:0,
                        top:0
                    }).appendTo(e.body), c.is(":animated") && f === i && l !== v || !i && g.length ? h :(c.stop(_, v), 
                    n.isFunction(d) ? d.call(c, i) :d === v ? c[p]() :c.fadeTo(parseInt(r, 10) || 90, i ? 1 :0, function() {
                        i || c.hide();
                    }), i || c.queue(function(t) {
                        c.css({
                            left:"",
                            top:""
                        }), g.length || c.detach(), t();
                    }), l = i, s.destroyed && (s = y), h);
                }
            }), h.init();
        }, Y = new Y(), q = f.modal = function(t) {
            var e = t.plugins.modal;
            return "object" == typeof e ? e :t.plugins.modal = new u(t);
        }, q.sanitize = function(t) {
            t.show && ("object" != typeof t.show.modal ? t.show.modal = {
                on:!!t.show.modal
            } :"undefined" == typeof t.show.modal.on && (t.show.modal.on = _));
        }, q.zindex = p.zindex - 200, q.initialize = "render", n.extend(_, p.defaults, {
            show:{
                modal:{
                    on:v,
                    effect:_,
                    blur:_,
                    stealfocus:_,
                    escape:_
                }
            }
        }), f.viewport = function(i, n, o, r, s, a, l) {
            function c(t, e, i, o, r, s, a, l, c) {
                var h = n[r], d = g[t], p = m[t], f = i === I, _ = -A.offset[r] + N.offset[r] + N["scroll" + r], v = d === r ? c :d === s ? -c :-c / 2, y = p === r ? l :p === s ? -l :-l / 2, b = L && L.size ? L.size[a] || 0 :0, w = L && L.corner && L.corner.precedance === t && !f ? b :0, C = _ - h + w, T = h + c - N[a] - _ + w, D = v - (g.precedance === t || d === g[e] ? y :0) - (p === O ? l / 2 :0);
                return f ? (w = L && L.corner && L.corner.precedance === e ? b :0, D = (d === r ? 1 :-1) * v - w, 
                n[r] += C > 0 ? C :T > 0 ? -T :0, n[r] = Math.max(-A.offset[r] + N.offset[r] + (w && L.corner[t] === O ? L.offset :0), h - D, Math.min(Math.max(-A.offset[r] + N.offset[r] + N[a], h + D), n[r]))) :(o *= i === k ? 2 :0, 
                C > 0 && (d !== r || T > 0) ? (n[r] -= D + o, u["invert" + t](r)) :T > 0 && (d !== s || C > 0) && (n[r] -= (d === O ? -D :D) + o, 
                u["invert" + t](s)), n[r] < _ && -n[r] > T && (n[r] = h, u = g.clone())), n[r] - h;
            }
            var h, u, d, p = o.target, f = i.elements.tooltip, g = o.my, m = o.at, _ = o.adjust, v = _.method.split(" "), y = v[0], R = v[1] || v[0], N = o.viewport, A = o.container, M = i.cache, L = i.plugins.tip, B = {
                left:0,
                top:0
            };
            return N.jquery && p[0] !== t && p[0] !== e.body && "none" !== _.method ? (h = "fixed" === f.css("position"), 
            N = {
                elem:N,
                height:N[(N[0] === t ? "h" :"outerH") + "eight"](),
                width:N[(N[0] === t ? "w" :"outerW") + "idth"](),
                scrollleft:h ? 0 :N.scrollLeft(),
                scrolltop:h ? 0 :N.scrollTop(),
                offset:N.offset() || {
                    left:0,
                    top:0
                }
            }, A = {
                elem:A,
                scrollLeft:A.scrollLeft(),
                scrollTop:A.scrollTop(),
                offset:A.offset() || {
                    left:0,
                    top:0
                }
            }, ("shift" !== y || "shift" !== R) && (u = g.clone()), B = {
                left:"none" !== y ? c(b, w, y, _.x, E, S, C, r, a) :0,
                top:"none" !== R ? c(w, b, R, _.y, D, x, T, s, l) :0
            }, u && M.lastClass !== (d = P + "-pos-" + u.abbrev()) && f.removeClass(i.cache.lastClass).addClass(i.cache.lastClass = d), 
            B) :B;
        }, f.imagemap = function(t, e, i, o) {
            function r(t, e, i) {
                for (var n = 0, o = 1, r = 1, s = 0, a = 0, l = t.width, c = t.height; l > 0 && c > 0 && o > 0 && r > 0; ) for (l = Math.floor(l / 2), 
                c = Math.floor(c / 2), i.x === E ? o = l :i.x === S ? o = t.width - l :o += Math.floor(l / 2), 
                i.y === D ? r = c :i.y === x ? r = t.height - c :r += Math.floor(c / 2), n = e.length; n-- && !(e.length < 2); ) s = e[n][0] - t.position.left, 
                a = e[n][1] - t.position.top, (i.x === E && s >= o || i.x === S && o >= s || i.x === O && (o > s || s > t.width - o) || i.y === D && a >= r || i.y === x && r >= a || i.y === O && (r > a || a > t.height - r)) && e.splice(n, 1);
                return {
                    left:e[0][0],
                    top:e[0][1]
                };
            }
            e.jquery || (e = n(e));
            var s = t.cache.areas = {}, a = (e[0].shape || e.attr("shape")).toLowerCase(), l = e[0].coords || e.attr("coords"), c = l.split(","), h = [], u = n('img[usemap="#' + e.parent("map").attr("name") + '"]'), d = u.offset(), p = {
                width:0,
                height:0,
                position:{
                    top:1e10,
                    right:0,
                    bottom:0,
                    left:1e10
                }
            }, f = 0, g = 0;
            if (d.left += Math.ceil((u.outerWidth() - u.width()) / 2), d.top += Math.ceil((u.outerHeight() - u.height()) / 2), 
            "poly" === a) for (f = c.length; f--; ) g = [ parseInt(c[--f], 10), parseInt(c[f + 1], 10) ], 
            g[0] > p.position.right && (p.position.right = g[0]), g[0] < p.position.left && (p.position.left = g[0]), 
            g[1] > p.position.bottom && (p.position.bottom = g[1]), g[1] < p.position.top && (p.position.top = g[1]), 
            h.push(g); else for (f = -1; f++ < c.length; ) h.push(parseInt(c[f], 10));
            switch (a) {
              case "rect":
                p = {
                    width:Math.abs(h[2] - h[0]),
                    height:Math.abs(h[3] - h[1]),
                    position:{
                        left:Math.min(h[0], h[2]),
                        top:Math.min(h[1], h[3])
                    }
                };
                break;

              case "circle":
                p = {
                    width:h[2] + 2,
                    height:h[2] + 2,
                    position:{
                        left:h[0],
                        top:h[1]
                    }
                };
                break;

              case "poly":
                p.width = Math.abs(p.position.right - p.position.left), p.height = Math.abs(p.position.bottom - p.position.top), 
                "c" === i.abbrev() ? p.position = {
                    left:p.position.left + p.width / 2,
                    top:p.position.top + p.height / 2
                } :(s[i + l] || (p.position = r(p, h.slice(), i), !o || "flip" !== o[0] && "flip" !== o[1] || (p.offset = r(p, h.slice(), {
                    x:i.x === E ? S :i.x === S ? E :O,
                    y:i.y === D ? x :i.y === x ? D :O
                }), p.offset.left -= p.position.left, p.offset.top -= p.position.top), s[i + l] = p), 
                p = s[i + l]), p.width = p.height = 0;
            }
            return p.position.left += d.left, p.position.top += d.top, p;
        };
        var Q;
        Q = f.ie6 = function(t) {
            var e = t.plugins.ie6;
            return 6 !== f.ie ? v :"object" == typeof e ? e :t.plugins.ie6 = new d(t);
        }, Q.initialize = "render";
    });
}(window, document), function() {
    var t, e = [].slice;
    t = function() {
        function t(e, i) {
            var n, o, r;
            this.elem = $(e), o = $.extend({}, t.defaults, i);
            for (n in o) r = o[n], this[n] = r;
            this.elem.data(this.dataName, this), this.wrapCheckboxWithDivs(), this.attachEvents(), 
            this.resizeHandle && this.optionallyResize("handle"), this.resizeContainer && this.optionallyResize("container"), 
            this.initialPosition();
        }
        return t.prototype.isDisabled = function() {
            return this.elem.is(":disabled");
        }, t.prototype.wrapCheckboxWithDivs = function() {
            return this.elem.wrap("<div class='" + this.containerClass + "' />"), this.container = this.elem.parent(), 
            this.offLabel = $("<label class='" + this.labelOffClass + "'>\n  <span>" + this.uncheckedLabel + "</span>\n</label>").appendTo(this.container), 
            this.offSpan = this.offLabel.children("span"), this.onLabel = $("<label class='" + this.labelOnClass + "'>\n  <span>" + this.checkedLabel + "</span>\n</label>").appendTo(this.container), 
            this.onSpan = this.onLabel.children("span"), this.handle = $("<div class='" + this.handleClass + "'>\n  <div class='" + this.handleRightClass + "'>\n    <div class='" + this.handleCenterClass + "' />\n  </div>\n</div>").appendTo(this.container);
        }, t.prototype._getDimension = function(t, e) {
            return null != $.fn.actual ? t.actual(e) :t[e]();
        }, t.prototype.optionallyResize = function(t) {
            var e, i, n;
            return n = this._getDimension(this.onLabel, "width"), i = this._getDimension(this.offLabel, "width"), 
            "container" === t ? (e = n > i ? n :i, e += this._getDimension(this.handle, "width") + this.handleMargin, 
            this.container.css({
                width:e
            })) :(e = n > i ? n :i, this.handle.css({
                width:e
            }));
        }, t.prototype.onMouseDown = function(e) {
            var i;
            return e.preventDefault(), this.isDisabled() ? void 0 :(i = e.pageX || e.originalEvent.changedTouches[0].pageX, 
            t.currentlyClicking = this.handle, t.dragStartPosition = i, t.handleLeftOffset = parseInt(this.handle.css("left"), 10) || 0);
        }, t.prototype.onDragMove = function(e, i) {
            var n, o;
            if (t.currentlyClicking === this.handle) return o = (i + t.handleLeftOffset - t.dragStartPosition) / this.rightSide, 
            0 > o && (o = 0), o > 1 && (o = 1), n = o * this.rightSide, this.handle.css({
                left:n
            }), this.onLabel.css({
                width:n + this.handleRadius
            }), this.offSpan.css({
                marginRight:-n
            }), this.onSpan.css({
                marginLeft:-(1 - o) * this.rightSide
            });
        }, t.prototype.onDragEnd = function(e, i) {
            var n;
            if (t.currentlyClicking === this.handle && !this.isDisabled()) return t.dragging ? (n = (i - t.dragStartPosition) / this.rightSide, 
            this.elem.prop("checked", n >= .5)) :this.elem.prop("checked", !this.elem.prop("checked")), 
            t.currentlyClicking = null, t.dragging = null, this.didChange();
        }, t.prototype.refresh = function() {
            return this.didChange();
        }, t.prototype.didChange = function() {
            var t;
            return "function" == typeof this.onChange && this.onChange(this.elem, this.elem.prop("checked")), 
            this.isDisabled() ? (this.container.addClass(this.disabledClass), !1) :(this.container.removeClass(this.disabledClass), 
            t = this.elem.prop("checked") ? this.rightSide :0, this.handle.animate({
                left:t
            }, this.duration), this.onLabel.animate({
                width:t + this.handleRadius
            }, this.duration), this.offSpan.animate({
                marginRight:-t
            }, this.duration), this.onSpan.animate({
                marginLeft:t - this.rightSide
            }, this.duration));
        }, t.prototype.attachEvents = function() {
            var t, e, i;
            return i = this, t = function() {
                return i.onGlobalMove.apply(i, arguments);
            }, e = function() {
                return i.onGlobalUp.apply(i, arguments), $(document).unbind("mousemove touchmove", t), 
                $(document).unbind("mouseup touchend", e);
            }, this.elem.change(function() {
                return i.refresh();
            }), this.container.bind("mousedown touchstart", function() {
                return i.onMouseDown.apply(i, arguments), $(document).bind("mousemove touchmove", t), 
                $(document).bind("mouseup touchend", e);
            });
        }, t.prototype.initialPosition = function() {
            var t, e;
            return t = this._getDimension(this.container, "width"), this.offLabel.css({
                width:t - this.containerRadius
            }), e = this.containerRadius + 1, this.rightSide = t - this._getDimension(this.handle, "width") - e, 
            this.elem.is(":checked") ? (this.handle.css({
                left:this.rightSide
            }), this.onLabel.css({
                width:this.rightSide + this.handleRadius
            }), this.offSpan.css({
                marginRight:-this.rightSide
            })) :(this.onLabel.css({
                width:0
            }), this.onSpan.css({
                marginLeft:-this.rightSide
            })), this.isDisabled() ? this.container.addClass(this.disabledClass) :void 0;
        }, t.prototype.onGlobalMove = function(e) {
            var i;
            if (!this.isDisabled() && t.currentlyClicking) return e.preventDefault(), i = e.pageX || e.originalEvent.changedTouches[0].pageX, 
            !t.dragging && Math.abs(t.dragStartPosition - i) > this.dragThreshold && (t.dragging = !0), 
            this.onDragMove(e, i);
        }, t.prototype.onGlobalUp = function(e) {
            var i;
            if (t.currentlyClicking) return e.preventDefault(), i = e.pageX || e.originalEvent.changedTouches[0].pageX, 
            this.onDragEnd(e, i), !1;
        }, t.defaults = {
            duration:200,
            checkedLabel:"ON",
            uncheckedLabel:"OFF",
            resizeHandle:!0,
            resizeContainer:!0,
            disabledClass:"iPhoneCheckDisabled",
            containerClass:"iPhoneCheckContainer",
            labelOnClass:"iPhoneCheckLabelOn",
            labelOffClass:"iPhoneCheckLabelOff",
            handleClass:"iPhoneCheckHandle",
            handleCenterClass:"iPhoneCheckHandleCenter",
            handleRightClass:"iPhoneCheckHandleRight",
            dragThreshold:5,
            handleMargin:15,
            handleRadius:4,
            containerRadius:5,
            dataName:"iphoneStyle",
            onChange:function() {}
        }, t;
    }(), $.iphoneStyle = this.iOSCheckbox = t, $.fn.iphoneStyle = function() {
        var i, n, o, r, s, a, l, c, h, u, d, p;
        for (i = 1 <= arguments.length ? e.call(arguments, 0) :[], o = null != (h = null != (u = i[0]) ? u.dataName :void 0) ? h :t.defaults.dataName, 
        d = this.filter(":checkbox"), l = 0, c = d.length; c > l; l++) n = d[l], r = $(n).data(o), 
        null != r ? (s = i[0], a = 2 <= i.length ? e.call(i, 1) :[], null != (p = r[s]) && p.apply(r, a)) :new t(n, i[0]);
        return this;
    }, $.fn.iOSCheckbox = function(t) {
        var e;
        return null == t && (t = {}), e = $.extend({}, t, {
            resizeHandle:!1,
            disabledClass:"iOSCheckDisabled",
            containerClass:"iOSCheckContainer",
            labelOnClass:"iOSCheckLabelOn",
            labelOffClass:"iOSCheckLabelOff",
            handleClass:"iOSCheckHandle",
            handleCenterClass:"iOSCheckHandleCenter",
            handleRightClass:"iOSCheckHandleRight",
            dataName:"iOSCheckbox"
        }), this.iphoneStyle(e);
    };
}.call(this), /*
 * jQuery Iframe Transport Plugin 1.4
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(t) {
    "use strict";
    "function" == typeof define && define.amd ? define([ "jquery" ], t) :t(window.jQuery);
}(function(t) {
    "use strict";
    var e = 0;
    t.ajaxTransport("iframe", function(i) {
        if (i.async && ("POST" === i.type || "GET" === i.type)) {
            var n, o;
            return {
                send:function(r, s) {
                    n = t('<form style="display:none;"></form>'), o = t('<iframe src="javascript:false;" name="iframe-transport-' + (e += 1) + '"></iframe>').bind("load", function() {
                        var e, r = t.isArray(i.paramName) ? i.paramName :[ i.paramName ];
                        o.unbind("load").bind("load", function() {
                            var e;
                            try {
                                if (e = o.contents(), !e.length || !e[0].firstChild) throw new Error();
                            } catch (i) {
                                e = void 0;
                            }
                            s(200, "success", {
                                iframe:e
                            }), t('<iframe src="javascript:false;"></iframe>').appendTo(n), n.remove();
                        }), n.prop("target", o.prop("name")).prop("action", i.url).prop("method", i.type), 
                        i.formData && t.each(i.formData, function(e, i) {
                            t('<input type="hidden"/>').prop("name", i.name).val(i.value).appendTo(n);
                        }), i.fileInput && i.fileInput.length && "POST" === i.type && (e = i.fileInput.clone(), 
                        i.fileInput.after(function(t) {
                            return e[t];
                        }), i.paramName && i.fileInput.each(function(e) {
                            t(this).prop("name", r[e] || i.paramName);
                        }), n.append(i.fileInput).prop("enctype", "multipart/form-data").prop("encoding", "multipart/form-data")), 
                        n.submit(), e && e.length && i.fileInput.each(function(i, n) {
                            var o = t(e[i]);
                            t(n).prop("name", o.prop("name")), o.replaceWith(n);
                        });
                    }), n.append(o).appendTo(document.body);
                },
                abort:function() {
                    o && o.unbind("load").prop("src", "javascript".concat(":false;")), n && n.remove();
                }
            };
        }
    }), t.ajaxSetup({
        converters:{
            "iframe text":function(e) {
                return t(e[0].body).text();
            },
            "iframe json":function(e) {
                return t.parseJSON(t(e[0].body).text());
            },
            "iframe html":function(e) {
                return t(e[0].body).html();
            },
            "iframe script":function(e) {
                return t.globalEval(t(e[0].body).text());
            }
        }
    });
}), /*
 * jQuery File Upload Plugin 5.11.2
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(t) {
    "use strict";
    "function" == typeof define && define.amd ? define([ "jquery", "jquery.ui.widget" ], t) :t(window.jQuery);
}(function(t) {
    "use strict";
    t.support.xhrFileUpload = !(!window.XMLHttpRequestUpload || !window.FileReader), 
    t.support.xhrFormDataFileUpload = !!window.FormData, t.widget("blueimp.fileupload", {
        options:{
            namespace:void 0,
            dropZone:t(document),
            fileInput:void 0,
            replaceFileInput:!0,
            paramName:void 0,
            singleFileUploads:!0,
            limitMultiFileUploads:void 0,
            sequentialUploads:!1,
            limitConcurrentUploads:void 0,
            forceIframeTransport:!1,
            redirect:void 0,
            redirectParamName:void 0,
            postMessage:void 0,
            multipart:!0,
            maxChunkSize:void 0,
            uploadedBytes:void 0,
            recalculateProgress:!0,
            progressInterval:100,
            bitrateInterval:500,
            formData:function(t) {
                return t.serializeArray();
            },
            add:function(t, e) {
                e.submit();
            },
            processData:!1,
            contentType:!1,
            cache:!1
        },
        _refreshOptionsList:[ "namespace", "dropZone", "fileInput", "multipart", "forceIframeTransport" ],
        _BitrateTimer:function() {
            this.timestamp = +new Date(), this.loaded = 0, this.bitrate = 0, this.getBitrate = function(t, e, i) {
                var n = t - this.timestamp;
                return (!this.bitrate || !i || n > i) && (this.bitrate = (e - this.loaded) * (1e3 / n) * 8, 
                this.loaded = e, this.timestamp = t), this.bitrate;
            };
        },
        _isXHRUpload:function(e) {
            return !e.forceIframeTransport && (!e.multipart && t.support.xhrFileUpload || t.support.xhrFormDataFileUpload);
        },
        _getFormData:function(e) {
            var i;
            return "function" == typeof e.formData ? e.formData(e.form) :t.isArray(e.formData) ? e.formData :e.formData ? (i = [], 
            t.each(e.formData, function(t, e) {
                i.push({
                    name:t,
                    value:e
                });
            }), i) :[];
        },
        _getTotal:function(e) {
            var i = 0;
            return t.each(e, function(t, e) {
                i += e.size || 1;
            }), i;
        },
        _onProgress:function(t, e) {
            if (t.lengthComputable) {
                var i, n, o = +new Date();
                if (e._time && e.progressInterval && o - e._time < e.progressInterval && t.loaded !== t.total) return;
                e._time = o, i = e.total || this._getTotal(e.files), n = parseInt(t.loaded / t.total * (e.chunkSize || i), 10) + (e.uploadedBytes || 0), 
                this._loaded += n - (e.loaded || e.uploadedBytes || 0), e.lengthComputable = !0, 
                e.loaded = n, e.total = i, e.bitrate = e._bitrateTimer.getBitrate(o, n, e.bitrateInterval), 
                this._trigger("progress", t, e), this._trigger("progressall", t, {
                    lengthComputable:!0,
                    loaded:this._loaded,
                    total:this._total,
                    bitrate:this._bitrateTimer.getBitrate(o, this._loaded, e.bitrateInterval)
                });
            }
        },
        _initProgressListener:function(e) {
            var i = this, n = e.xhr ? e.xhr() :t.ajaxSettings.xhr();
            n.upload && (t(n.upload).bind("progress", function(t) {
                var n = t.originalEvent;
                t.lengthComputable = n.lengthComputable, t.loaded = n.loaded, t.total = n.total, 
                i._onProgress(t, e);
            }), e.xhr = function() {
                return n;
            });
        },
        _initXHRData:function(e) {
            var i, n = e.files[0], o = e.multipart || !t.support.xhrFileUpload, r = e.paramName[0];
            (!o || e.blob) && (e.headers = t.extend(e.headers, {
                "X-File-Name":n.name,
                "X-File-Type":n.type,
                "X-File-Size":n.size
            }), e.blob ? o || (e.contentType = "application/octet-stream", e.data = e.blob) :(e.contentType = n.type, 
            e.data = n)), o && t.support.xhrFormDataFileUpload && (e.postMessage ? (i = this._getFormData(e), 
            e.blob ? i.push({
                name:r,
                value:e.blob
            }) :t.each(e.files, function(t, n) {
                i.push({
                    name:e.paramName[t] || r,
                    value:n
                });
            })) :(e.formData instanceof FormData ? i = e.formData :(i = new FormData(), t.each(this._getFormData(e), function(t, e) {
                i.append(e.name, e.value);
            })), e.blob ? i.append(r, e.blob, n.name) :t.each(e.files, function(t, n) {
                n instanceof Blob && i.append(e.paramName[t] || r, n, n.name);
            })), e.data = i), e.blob = null;
        },
        _initIframeSettings:function(e) {
            e.dataType = "iframe " + (e.dataType || ""), e.formData = this._getFormData(e), 
            e.redirect && t("<a></a>").prop("href", e.url).prop("host") !== location.host && e.formData.push({
                name:e.redirectParamName || "redirect",
                value:e.redirect
            });
        },
        _initDataSettings:function(t) {
            this._isXHRUpload(t) ? (this._chunkedUpload(t, !0) || (t.data || this._initXHRData(t), 
            this._initProgressListener(t)), t.postMessage && (t.dataType = "postmessage " + (t.dataType || ""))) :this._initIframeSettings(t, "iframe");
        },
        _getParamName:function(e) {
            var i = t(e.fileInput), n = e.paramName;
            return n ? t.isArray(n) || (n = [ n ]) :(n = [], i.each(function() {
                for (var e = t(this), i = e.prop("name") || "files[]", o = (e.prop("files") || [ 1 ]).length; o; ) n.push(i), 
                o -= 1;
            }), n.length || (n = [ i.prop("name") || "files[]" ])), n;
        },
        _initFormSettings:function(e) {
            e.form && e.form.length || (e.form = t(e.fileInput.prop("form"))), e.paramName = this._getParamName(e), 
            e.url || (e.url = e.form.prop("action") || location.href), e.type = (e.type || e.form.prop("method") || "").toUpperCase(), 
            "POST" !== e.type && "PUT" !== e.type && (e.type = "POST");
        },
        _getAJAXSettings:function(e) {
            var i = t.extend({}, this.options, e);
            return this._initFormSettings(i), this._initDataSettings(i), i;
        },
        _enhancePromise:function(t) {
            return t.success = t.done, t.error = t.fail, t.complete = t.always, t;
        },
        _getXHRPromise:function(e, i, n) {
            var o = t.Deferred(), r = o.promise();
            return i = i || this.options.context || r, e === !0 ? o.resolveWith(i, n) :e === !1 && o.rejectWith(i, n), 
            r.abort = o.promise, this._enhancePromise(r);
        },
        _chunkedUpload:function(e, i) {
            var n, o, r, s, a = this, l = e.files[0], c = l.size, h = e.uploadedBytes = e.uploadedBytes || 0, u = e.maxChunkSize || c, d = l.webkitSlice || l.mozSlice || l.slice;
            return this._isXHRUpload(e) && d && (h || c > u) && !e.data ? i ? !0 :h >= c ? (l.error = "uploadedBytes", 
            this._getXHRPromise(!1, e.context, [ null, "error", l.error ])) :(o = Math.ceil((c - h) / u), 
            n = function(i) {
                return i ? n(i -= 1).pipe(function() {
                    var n = t.extend({}, e);
                    return n.blob = d.call(l, h + i * u, h + (i + 1) * u), n.chunkSize = n.blob.size, 
                    a._initXHRData(n), a._initProgressListener(n), r = (t.ajax(n) || a._getXHRPromise(!1, n.context)).done(function() {
                        n.loaded || a._onProgress(t.Event("progress", {
                            lengthComputable:!0,
                            loaded:n.chunkSize,
                            total:n.chunkSize
                        }), n), e.uploadedBytes = n.uploadedBytes += n.chunkSize;
                    });
                }) :a._getXHRPromise(!0, e.context);
            }, s = n(o), s.abort = function() {
                return r.abort();
            }, this._enhancePromise(s)) :!1;
        },
        _beforeSend:function(t, e) {
            0 === this._active && (this._trigger("start"), this._bitrateTimer = new this._BitrateTimer()), 
            this._active += 1, this._loaded += e.uploadedBytes || 0, this._total += this._getTotal(e.files);
        },
        _onDone:function(e, i, n, o) {
            this._isXHRUpload(o) || this._onProgress(t.Event("progress", {
                lengthComputable:!0,
                loaded:1,
                total:1
            }), o), o.result = e, o.textStatus = i, o.jqXHR = n, this._trigger("done", null, o);
        },
        _onFail:function(t, e, i, n) {
            n.jqXHR = t, n.textStatus = e, n.errorThrown = i, this._trigger("fail", null, n), 
            n.recalculateProgress && (this._loaded -= n.loaded || n.uploadedBytes || 0, this._total -= n.total || this._getTotal(n.files));
        },
        _onAlways:function(t, e, i, n) {
            this._active -= 1, n.textStatus = e, i && i.always ? (n.jqXHR = i, n.result = t) :(n.jqXHR = t, 
            n.errorThrown = i), this._trigger("always", null, n), 0 === this._active && (this._trigger("stop"), 
            this._loaded = this._total = 0, this._bitrateTimer = null);
        },
        _onSend:function(e, i) {
            var n, o, r, s = this, a = s._getAJAXSettings(i), l = function(i, o) {
                return s._sending += 1, a._bitrateTimer = new s._BitrateTimer(), n = n || (i !== !1 && s._trigger("send", e, a) !== !1 && (s._chunkedUpload(a) || t.ajax(a)) || s._getXHRPromise(!1, a.context, o)).done(function(t, e, i) {
                    s._onDone(t, e, i, a);
                }).fail(function(t, e, i) {
                    s._onFail(t, e, i, a);
                }).always(function(t, e, i) {
                    if (s._sending -= 1, s._onAlways(t, e, i, a), a.limitConcurrentUploads && a.limitConcurrentUploads > s._sending) for (var n = s._slots.shift(); n; ) {
                        if (!n.isRejected()) {
                            n.resolve();
                            break;
                        }
                        n = s._slots.shift();
                    }
                });
            };
            return this._beforeSend(e, a), this.options.sequentialUploads || this.options.limitConcurrentUploads && this.options.limitConcurrentUploads <= this._sending ? (this.options.limitConcurrentUploads > 1 ? (o = t.Deferred(), 
            this._slots.push(o), r = o.pipe(l)) :r = this._sequence = this._sequence.pipe(l, l), 
            r.abort = function() {
                var t = [ void 0, "abort", "abort" ];
                return n ? n.abort() :(o && o.rejectWith(t), l(!1, t));
            }, this._enhancePromise(r)) :l();
        },
        _onAdd:function(e, i) {
            var n, o, r, s, a = this, l = !0, c = t.extend({}, this.options, i), h = c.limitMultiFileUploads, u = this._getParamName(c);
            if ((c.singleFileUploads || h) && this._isXHRUpload(c)) if (!c.singleFileUploads && h) for (r = [], 
            n = [], s = 0; s < i.files.length; s += h) r.push(i.files.slice(s, s + h)), o = u.slice(s, s + h), 
            o.length || (o = u), n.push(o); else n = u; else r = [ i.files ], n = [ u ];
            return i.originalFiles = i.files, t.each(r || i.files, function(o, s) {
                var c = t.extend({}, i);
                return c.files = r ? s :[ s ], c.paramName = n[o], c.submit = function() {
                    return c.jqXHR = this.jqXHR = a._trigger("submit", e, this) !== !1 && a._onSend(e, this), 
                    this.jqXHR;
                }, l = a._trigger("add", e, c);
            }), l;
        },
        _normalizeFile:function(t, e) {
            void 0 === e.name && void 0 === e.size && (e.name = e.fileName, e.size = e.fileSize);
        },
        _replaceFileInput:function(e) {
            var i = e.clone(!0);
            t("<form></form>").append(i)[0].reset(), e.after(i).detach(), t.cleanData(e.unbind("remove")), 
            this.options.fileInput = this.options.fileInput.map(function(t, n) {
                return n === e[0] ? i[0] :n;
            }), e[0] === this.element[0] && (this.element = i);
        },
        _onChange:function(e) {
            var i = e.data.fileupload, n = {
                files:t.each(t.makeArray(e.target.files), i._normalizeFile),
                fileInput:t(e.target),
                form:t(e.target.form)
            };
            return n.files.length || (n.files = [ {
                name:e.target.value.replace(/^.*\\/, "")
            } ]), i.options.replaceFileInput && i._replaceFileInput(n.fileInput), i._trigger("change", e, n) === !1 || i._onAdd(e, n) === !1 ? !1 :void 0;
        },
        _onPaste:function(e) {
            var i = e.data.fileupload, n = e.originalEvent.clipboardData, o = n && n.items || [], r = {
                files:[]
            };
            return t.each(o, function(t, e) {
                var i = e.getAsFile && e.getAsFile();
                i && r.files.push(i);
            }), i._trigger("paste", e, r) === !1 || i._onAdd(e, r) === !1 ? !1 :void 0;
        },
        _onDrop:function(e) {
            var i = e.data.fileupload, n = e.dataTransfer = e.originalEvent.dataTransfer, o = {
                files:t.each(t.makeArray(n && n.files), i._normalizeFile)
            };
            return i._trigger("drop", e, o) === !1 || i._onAdd(e, o) === !1 ? !1 :(e.preventDefault(), 
            void 0);
        },
        _onDragOver:function(t) {
            var e = t.data.fileupload, i = t.dataTransfer = t.originalEvent.dataTransfer;
            return e._trigger("dragover", t) === !1 ? !1 :(i && (i.dropEffect = i.effectAllowed = "copy"), 
            t.preventDefault(), void 0);
        },
        _onDragLeave:function(t) {
            var e = t.data.fileupload;
            return e._trigger("dragleave", t) === !1 ? !1 :(t.preventDefault(), void 0);
        },
        _initEventHandlers:function() {
            var t = this.options.namespace;
            this._isXHRUpload(this.options) && this.options.dropZone.bind("dragover." + t, {
                fileupload:this
            }, this._onDragOver).bind("dragleave." + t, {
                fileupload:this
            }, this._onDragLeave).bind("drop." + t, {
                fileupload:this
            }, this._onDrop).bind("paste." + t, {
                fileupload:this
            }, this._onPaste), this.options.fileInput.bind("change." + t, {
                fileupload:this
            }, this._onChange);
        },
        _destroyEventHandlers:function() {
            var t = this.options.namespace;
            this.options.dropZone.unbind("dragover." + t, this._onDragOver).unbind("dragleave." + t, this._onDragLeave).unbind("drop." + t, this._onDrop).unbind("paste." + t, this._onPaste), 
            this.options.fileInput.unbind("change." + t, this._onChange);
        },
        _setOption:function(e, i) {
            var n = -1 !== t.inArray(e, this._refreshOptionsList);
            n && this._destroyEventHandlers(), t.Widget.prototype._setOption.call(this, e, i), 
            n && (this._initSpecialOptions(), this._initEventHandlers());
        },
        _initSpecialOptions:function() {
            var e = this.options;
            void 0 === e.fileInput ? e.fileInput = this.element.is("input:file") ? this.element :this.element.find("input:file") :e.fileInput instanceof t || (e.fileInput = t(e.fileInput)), 
            e.dropZone instanceof t || (e.dropZone = t(e.dropZone));
        },
        _create:function() {
            var e = this.options;
            t.extend(e, t(this.element[0].cloneNode(!1)).data()), e.namespace = e.namespace || this.widgetName, 
            this._initSpecialOptions(), this._slots = [], this._sequence = this._getXHRPromise(!0), 
            this._sending = this._active = this._loaded = this._total = 0, this._initEventHandlers();
        },
        destroy:function() {
            this._destroyEventHandlers(), t.Widget.prototype.destroy.call(this);
        },
        enable:function() {
            t.Widget.prototype.enable.call(this), this._initEventHandlers();
        },
        disable:function() {
            this._destroyEventHandlers(), t.Widget.prototype.disable.call(this);
        },
        add:function(e) {
            e && !this.options.disabled && (e.files = t.each(t.makeArray(e.files), this._normalizeFile), 
            this._onAdd(null, e));
        },
        send:function(e) {
            return e && !this.options.disabled && (e.files = t.each(t.makeArray(e.files), this._normalizeFile), 
            e.files.length) ? this._onSend(null, e) :this._getXHRPromise(!1, e && e.context);
        }
    });
}), function() {
    var t;
    t = this, t.Debouncer = function() {
        function e(t, e) {
            this.time = t, this.callback = e, this.timeout = null;
        }
        return e.prototype.start = function() {
            return arguments.length && (this._callback_args = arguments), this._setTimeout();
        }, e.prototype.update = function() {
            return this.stop(), t.Debouncer.prototype.start.apply(this, arguments);
        }, e.prototype.stop = function() {
            return this.timeout ? (clearTimeout(this.timeout), this.timeout = null) :void 0;
        }, e.prototype.destroy = function() {
            return this.stop(), this._callback_args = null, this.timeout = null, this.callback = null;
        }, e.prototype.isRunning = function() {
            return !!this.timeout;
        }, e.prototype._setTimeout = function() {
            var t, e = this;
            return t = function() {
                return e.callback.apply(e, e._callback_args || []), e.stop();
            }, this.time ? this.timeout = setTimeout(t, this.time) :t();
        }, e;
    }();
}.call(this), /**
 * jquery.computed-styles.js
 *
 * A simple jQuery plugin to fetch the computed CSS styles
 * for any element. Includes some helper wrapper methods
 *
 * Usage:
 *    $('some_element_selector').computedCSS('css_property');
 *    $('some_element_selector').computedWidth();
 *    $('some_element_selector').computedHeight();
 *
 * by Jamie Rumbelow <jamie@jamierumbelow.net>
 * http://jamieonsoftware.com
 * Copyright (c)2011 Jamie Rumbelow
 *
 * Licensed under the MIT license (http://www.opensource.org/licenses/MIT)
 */
function(t) {
    t.fn.computedStyle = function(t) {
        if (!this.length > 0) return !1;
        null == t && (t = !1);
        var e, i = this.first();
        return e = "undefined" != typeof document.defaultView && "undefined" != typeof document.defaultView.getComputedStyle ? document.defaultView.getComputedStyle(i.get(0), null) :i.currentStyle, 
        t === !1 ? e :e[t];
    }, t.fn.computedWidth = function() {
        return parseInt(this.computedStyle("width"));
    }, t.fn.computedHeight = function() {
        return parseInt(this.computedStyle("height"));
    };
}(jQuery), function() {
    var t, e;
    $.specificity = function(i, n) {
        var o, r, s, a, l, c, h, u;
        if (null == n && (n = {}), n.element) {
            for (o = n.element, o instanceof jQuery && (o = o[0]), a = i.split(","), c = function() {
                var i, n, r;
                for (r = [], i = 0, n = a.length; n > i; i++) s = a[i], t(o, s) && r.push(e(s));
                return r;
            }(), r = 0, h = 0, u = c.length; u > h; h++) l = c[h], l > r && (r = l);
            return r;
        }
        return e(i);
    }, e = function(t) {
        var e, i, n, o, r, s, a, l, c, h, u, d;
        for (a = [ 0, 0, 0, 0, 0 ], l = 0, s = t.split(/\s*,\s*/), c = 0, u = s.length; u > c; c++) r = s[c], 
        i = r.match(/#/g), i && (a[1] += i.length), i = r.match(/\./g), i && (a[2] += i.length), 
        i = r.match(/\[.+\]/g), i && (a[2] += i.length), i = r.match(/:(?:first-letter|first-line|before|after|:selection)/g), 
        i && (l = i.length, a[3] += l), i = r.match(/:/g), i && (a[2] += i.length - l), 
        l = 0, i = r.match(/[+>~]/g), i && (a[4] += i.length), r = r.replace(/\(.*?\)/g, "").replace(/\[.*?\]/g, "").replace(/[.#:][^ +>~]*/gi, ""), 
        i = r.match(/[^ +>~]+/g), i && (a[3] += i.length);
        for (e = 1e4, o = 0, h = 0, d = a.length; d > h; h++) n = a[h], o += n * e, e /= 10;
        return o;
    }, t = function(t, e) {
        var i;
        i = t.matchesSelector || t.mozMatchesSelector || t.webkitMatchesSelector;
        try {
            return i.call(t, e);
        } catch (n) {}
        return null;
    };
}.call(this), function() {
    var t, e, i, n, o, r, s, a, l, c;
    $.fn.cascadedStyle = function(t) {
        return a($(this), t);
    }, a = function(t, e) {
        var i;
        return null == e && (e = {}), i = r(e).getMatchedCSSRules, (!i || e.polyfill) && (i = o), 
        e["function"] = i, s(t, e);
    }, r = function(t) {
        return null == t && (t = {}), t.window || window;
    }, o = function(t) {
        var e, i, n, o, r, s, a, l, c, h;
        if (!t) return [];
        for (n = [], a = Array.prototype.slice.call(this.document.styleSheets); r = a.shift(); ) {
            try {
                s = r.media.mediaText, r.cssRules;
            } catch (u) {
                e = u;
                continue;
            }
            if (!r.disabled && r.cssRules && (!s.length || this.matchMedia && this.matchMedia(s).matches)) for (h = r.cssRules, 
            l = 0, c = h.length; c > l; l++) if (o = h[l], o.stylesheet) a.push(o.stylesheet); else if (o.media) a.push(o); else {
                i = t.matchesSelector || t.mozMatchesSelector || t.webkitMatchesSelector;
                try {
                    i.call(t, o.selectorText) && n.push(o);
                } catch (u) {
                    e = u;
                }
            }
        }
        return n;
    }, c = function(t, e) {
        var i, n, o, r, s, a;
        for (r = {}, n = function() {
            return function(t) {
                return null == r[t.selectorText] && (r[t.selectorText] = $.specificity(t.selectorText, {
                    element:e
                })), r[t.selectorText];
            };
        }(this), i = function(t, e) {
            var i;
            return i = n(t) - n(e), i || (i = t.__pos - e.__pos), i;
        }, o = s = 0, a = t.length; a >= 0 ? a > s :s > a; o = a >= 0 ? ++s :--s) t[o].__pos = o;
        return t.sort(i), t;
    }, s = function(t, e) {
        var n, o, s, a, h, u, d, p, f, g, m, _, v;
        for (null == e && (e = {}), f = r(e), e["function"] || (e["function"] = f.getMatchedCSSRules), 
        t instanceof jQuery && (t = t[0]), u = {}, n = {}, a = e["function"].call(f, t, null) || [], 
        a = Array.prototype.slice.call(a), a = c(a, t), a.push(t), a.reverse(), g = 0, _ = a.length; _ > g; g++) if (s = a[g], 
        s && s.style) for (d = s.style, m = 0, v = d.length; v > m; m++) h = d[m], o = d.getPropertyPriority(h), 
        p = d.getPropertyValue(h), null == u[h] && p ? u[h] = p :p && o && !n[h] && (u[h] = p, 
        n[h] = !0);
        return u = l(t, u, "initial"), e.replaceInherit && (u = l(t, u, "inherit")), e.properties && (u = i(t, u, e.properties)), 
        u;
    }, i = function(t, i, o) {
        var r, s, a, l, c, h;
        if (!o || !o.length) return i;
        for (l = $(t).computedStyle(), r = function(t) {
            var o;
            return o = e(t, i), null == o && (o = n(l, t)), o;
        }, a = {}, c = 0, h = o.length; h > c; c++) s = o[c], a[s] = s in i ? i[s] :r(s);
        return a;
    }, l = function(t, e, i) {
        var o, r, s;
        r = $(t).computedStyle();
        for (o in e) s = e[o], null != s && 0 === s.indexOf(i) && (e[o] = n(r, o));
        return e;
    }, n = function(t, e) {
        return t.getPropertyValue ? t.getPropertyValue(e) :t[e];
    }, e = function(e, i) {
        return t[e] ? t[e](i) :null;
    }, t = {
        "background-position":function(t) {
            return t["background-position-x"] && t["background-position-y"] ? "" + t["background-position-x"] + " " + t["background-position-y"] :null;
        },
        "border-left-width":function(t) {
            return t["border-left-width-value"] ? t["border-left-width-value"] :null;
        },
        "border-left-color":function(t) {
            return t["border-left-color-value"] ? t["border-left-color-value"] :null;
        },
        "border-left-style":function(t) {
            return t["border-left-style-value"] ? t["border-left-style-value"] :null;
        },
        "border-right-width":function(t) {
            return t["border-right-width-value"] ? t["border-right-width-value"] :null;
        },
        "border-right-color":function(t) {
            return t["border-right-color-value"] ? t["border-right-color-value"] :null;
        },
        "border-right-style":function(t) {
            return t["border-right-style-value"] ? t["border-right-style-value"] :null;
        }
    };
}.call(this), function() {
    var t, e, i, n, o = {}.hasOwnProperty, r = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var n in e) o.call(e, n) && (t[n] = e[n]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    }, s = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    window.Tourist = window.Tourist || {}, Tourist.Model = function(e) {
        function i() {
            return t = i.__super__.constructor.apply(this, arguments);
        }
        return r(i, e), i.prototype._module = "Tourist", i;
    }(Backbone.Model), window.Tourist.Tip = window.Tourist.Tip || {}, Tourist.Tip.Base = function() {
        function t(t) {
            this.options = null != t ? t :{}, this.onClickNext = s(this.onClickNext, this), 
            this.onClickClose = s(this.onClickClose, this), this.el = $("<div/>"), this.initialize(t), 
            this._bindClickEvents(), Tourist.Tip.Base._cacheTip(this);
        }
        return t.prototype._module = "Tourist", _.extend(t.prototype, Backbone.Events), 
        t.prototype.skipButtonTemplate = '<button class="btn btn-small pull-right tour-next">Skip this step →</button>', 
        t.prototype.nextButtonTemplate = '<button class="btn btn-primary btn-small pull-right tour-next">Next step →</button>', 
        t.prototype.finalButtonTemplate = '<button class="btn btn-primary btn-small pull-right tour-next">Finish up</button>', 
        t.prototype.closeButtonTemplate = '<a class="btn btn-close tour-close" href="#"><i class="icon icon-remove"></i></a>', 
        t.prototype.okButtonTemplate = '<button class="btn btn-small tour-close btn-primary">Okay</button>', 
        t.prototype.actionLabelTemplate = _.template('<h4 class="action-label"><%= label %></h4>'), 
        t.prototype.actionLabels = [ "Do this:", "Then this:", "Next this:" ], t.prototype.highlightClass = "tour-highlight", 
        t.prototype.template = _.template('<div>\n  <div class="tour-container">\n    <%= close_button %>\n    <%= content %>\n    <p class="tour-counter <%= counter_class %>"><%= counter%></p>\n  </div>\n  <div class="tour-buttons">\n    <%= buttons %>\n  </div>\n</div>'), 
        t.prototype.destroy = function() {
            return this.el.remove();
        }, t.prototype.render = function(t) {
            return this.hide(), t && (this._setTarget(t.target || !1, t), this._setZIndex(""), 
            this._renderContent(t, this._buildContentElement(t)), t.target && this.show(), t.zIndex && this._setZIndex(t.zIndex, t)), 
            this;
        }, t.prototype.show = function() {}, t.prototype.hide = function() {}, t.prototype.setTarget = function(t, e) {
            return this._setTarget(t, e);
        }, t.prototype.cleanupCurrentTarget = function() {
            return this.target && this.target.removeClass && this.target.removeClass(this.highlightClass), 
            this.target = null;
        }, t.prototype.onClickClose = function(t) {
            return this.trigger("click:close", this, t), !1;
        }, t.prototype.onClickNext = function(t) {
            return this.trigger("click:next", this, t), !1;
        }, t.prototype._getTipElement = function() {}, t.prototype._renderContent = function() {}, 
        t.prototype._bindClickEvents = function() {
            var t;
            return t = this._getTipElement(), t.delegate(".tour-close", "click", this.onClickClose), 
            t.delegate(".tour-next", "click", this.onClickNext);
        }, t.prototype._setTarget = function(t, e) {
            return this.cleanupCurrentTarget(), t && e && e.highlightTarget && t.addClass(this.highlightClass), 
            this.target = t;
        }, t.prototype._setZIndex = function(t) {
            var e;
            return e = this._getTipElement(), e.css("z-index", t || "");
        }, t.prototype._buildContentElement = function(t) {
            var e, i;
            return e = this._buildButtons(t), i = $($.parseHTML(this.template({
                content:t.content,
                buttons:e,
                close_button:this._buildCloseButton(t),
                counter:t.final ? "" :"step " + (t.index + 1) + " of " + t.total,
                counter_class:t.final ? "final" :""
            }))), e || i.find(".tour-buttons").addClass("no-buttons"), this._renderActionLabels(i), 
            i;
        }, t.prototype._buildButtons = function(t) {
            var e;
            return e = "", t.okButton && (e += this.okButtonTemplate), t.skipButton && (e += this.skipButtonTemplate), 
            t.nextButton && (e += t.final ? this.finalButtonTemplate :this.nextButtonTemplate), 
            e;
        }, t.prototype._buildCloseButton = function(t) {
            return t.closeButton ? this.closeButtonTemplate :"";
        }, t.prototype._renderActionLabels = function(t) {
            var e, i, n, o, r, s, a;
            for (n = t.find(".action"), i = 0, a = [], r = 0, s = n.length; s > r; r++) e = n[r], 
            o = $($.parseHTML(this.actionLabelTemplate({
                label:this.actionLabels[i]
            }))), o.insertBefore(e), a.push(i++);
            return a;
        }, t._cacheTip = function(t) {
            return Tourist.Tip.Base._cachedTips || (Tourist.Tip.Base._cachedTips = []), Tourist.Tip.Base._cachedTips.push(t);
        }, t.destroy = function() {
            var t, e, i, n;
            if (Tourist.Tip.Base._cachedTips) {
                for (n = Tourist.Tip.Base._cachedTips, e = 0, i = n.length; i > e; e++) t = n[e], 
                t.destroy();
                return Tourist.Tip.Base._cachedTips = null;
            }
        }, t;
    }(), Tourist.Tip.Bootstrap = function(t) {
        function i() {
            return e = i.__super__.constructor.apply(this, arguments);
        }
        return r(i, t), i.prototype.initialize = function(t) {
            var e;
            return e = {
                showEffect:null,
                hideEffect:null
            }, this.options = _.extend(e, t), this.tip = new Tourist.Tip.BootstrapTip();
        }, i.prototype.destroy = function() {
            return this.tip.destroy(), i.__super__.destroy.call(this);
        }, i.prototype.show = function() {
            var t;
            return this.options.showEffect ? (t = Tourist.Tip.Bootstrap.effects[this.options.showEffect], 
            t.call(this, this.tip, this.tip.el)) :this.tip.show();
        }, i.prototype.hide = function() {
            var t;
            return this.options.hideEffect ? (t = Tourist.Tip.Bootstrap.effects[this.options.hideEffect], 
            t.call(this, this.tip, this.tip.el)) :this.tip.hide();
        }, i.prototype._getTipElement = function() {
            return this.tip.el;
        }, i.prototype._setTarget = function(t, e) {
            return i.__super__._setTarget.call(this, t, e), this.tip.setTarget(t);
        }, i.prototype._renderContent = function(t, e) {
            var i, n;
            return n = t.my || "left center", i = t.at || "right center", this.tip.setContainer(t.container || $("body")), 
            this.tip.setContent(e), this.tip.setPosition(t.target || !1, n, i);
        }, i;
    }(Tourist.Tip.Base), Tourist.Tip.Bootstrap.effects = {
        slidein:function(t, e) {
            var i, n, o, r, s, a, l, c, h;
            for (i = {
                top:80,
                left:80,
                right:-80,
                bottom:-80
            }, a = t.my.split(" ")[0], a = a || "top", s = i[a], "bottom" === a && (a = "top"), 
            "right" === a && (a = "left"), l = parseInt(e.css(a)), e.stop(), n = {}, n[a] = l + s, 
            e.css(n), e.show(), n[a] = l, r = [ "easeOutCubic", "swing", "linear" ], c = 0, 
            h = r.length; h > c && (o = r[c], !$.easing[o]); c++) ;
            return e.animate(n, 300, o), null;
        }
    }, Tourist.Tip.BootstrapTip = function() {
        function t(t) {
            var e;
            e = {
                offset:10,
                tipOffset:10
            }, this.options = _.extend(e, t), this.el = $($.parseHTML(this.template)), this.hide();
        }
        return t.prototype.template = '<div class="popover">\n  <div class="arrow"></div>\n  <div class="popover-content"></div>\n</div>', 
        t.prototype.FLIP_POSITION = {
            bottom:"top",
            top:"bottom",
            left:"right",
            right:"left"
        }, t.prototype.destroy = function() {
            return this.el.remove();
        }, t.prototype.show = function() {
            return this.el.show().addClass("visible");
        }, t.prototype.hide = function() {
            return this.el.hide().removeClass("visible");
        }, t.prototype.setTarget = function(t) {
            return this.target = t, this._setPosition(this.target, this.my, this.at);
        }, t.prototype.setPosition = function(t, e, i) {
            return this.target = t, this.my = e, this.at = i, this._setPosition(this.target, this.my, this.at);
        }, t.prototype.setContainer = function(t) {
            return t.append(this.el);
        }, t.prototype.setContent = function(t) {
            return this._getContentElement().html(t);
        }, t.prototype._getContentElement = function() {
            return this.el.find(".popover-content");
        }, t.prototype._getTipElement = function() {
            return this.el.find(".arrow");
        }, t.prototype._setPosition = function(t, e, i) {
            var n, o, r, s, a, l, c, h, u, d;
            return null == e && (e = "left center"), null == i && (i = "right center"), t && (d = e.split(" "), 
            n = d[0], a = d[1], r = this.el.css("display"), this.el.css({
                top:0,
                left:0,
                margin:0,
                display:"block"
            }).removeClass("top").removeClass("bottom").removeClass("left").removeClass("right").addClass(this.FLIP_POSITION[n]), 
            t) ? (c = this._getTipElement().css({
                left:"",
                right:"",
                top:"",
                bottom:""
            }), "center" !== a && (h = {
                left:c[0].offsetWidth / 2,
                right:0,
                top:c[0].offsetHeight / 2,
                bottom:0
            }, o = {}, o[a] = h[a] + this.options.tipOffset, o[this.FLIP_POSITION[a]] = "auto", 
            c.css(o)), l = this._caculateTargetPosition(i, t), u = this._caculateTipPosition(e, l), 
            s = this._adjustForArrow(e, u), this.el.css(s), this.el.css({
                display:r
            })) :void 0;
        }, t.prototype._caculateTargetPosition = function(t, e) {
            var i, n;
            return "[object Array]" === Object.prototype.toString.call(e) ? {
                left:e[0],
                top:e[1]
            } :(i = this._getTargetBounds(e), n = this._lookupPosition(t, i.width, i.height), 
            {
                left:i.left + n[0],
                top:i.top + n[1]
            });
        }, t.prototype._caculateTipPosition = function(t, e) {
            var i, n, o;
            return o = this.el[0].offsetWidth, i = this.el[0].offsetHeight, n = this._lookupPosition(t, o, i), 
            {
                left:e.left - n[0],
                top:e.top - n[1]
            };
        }, t.prototype._adjustForArrow = function(t, e) {
            var i, n, o, r, s, a, l;
            switch (l = t.split(" "), i = l[0], r = l[1], s = this._getTipElement(), a = s[0].offsetWidth, 
            n = s[0].offsetHeight, o = {
                top:e.top,
                left:e.left
            }, i) {
              case "top":
                o.top += n + this.options.offset;
                break;

              case "bottom":
                o.top -= n + this.options.offset;
                break;

              case "left":
                o.left += a + this.options.offset;
                break;

              case "right":
                o.left -= a + this.options.offset;
            }
            switch (r) {
              case "left":
                o.left -= a / 2 + this.options.tipOffset;
                break;

              case "right":
                o.left += a / 2 + this.options.tipOffset;
                break;

              case "top":
                o.top -= n / 2 + this.options.tipOffset;
                break;

              case "bottom":
                o.top += n / 2 + this.options.tipOffset;
            }
            return o;
        }, t.prototype._lookupPosition = function(t, e, i) {
            var n, o, r;
            return r = e / 2, n = i / 2, o = {
                "top left":[ 0, 0 ],
                "left top":[ 0, 0 ],
                "top right":[ e, 0 ],
                "right top":[ e, 0 ],
                "bottom left":[ 0, i ],
                "left bottom":[ 0, i ],
                "bottom right":[ e, i ],
                "right bottom":[ e, i ],
                "top center":[ r, 0 ],
                "left center":[ 0, n ],
                "right center":[ e, n ],
                "bottom center":[ r, i ]
            }, o[t];
        }, t.prototype._getTargetBounds = function(t) {
            var e, i;
            return e = t[0], i = "function" == typeof e.getBoundingClientRect ? e.getBoundingClientRect() :{
                width:e.offsetWidth,
                height:e.offsetHeight
            }, $.extend({}, i, t.offset());
        }, t;
    }(), Tourist.Tip.QTip = function(t) {
        function e() {
            return this._renderTipBackground = s(this._renderTipBackground, this), i = e.__super__.constructor.apply(this, arguments);
        }
        var n, o, a, l;
        return r(e, t), l = 6, a = 14, n = 10, o = {
            top:80,
            left:80,
            right:-80,
            bottom:-80
        }, e.prototype.QTIP_DEFAULTS = {
            content:{
                text:""
            },
            show:{
                ready:!1,
                delay:0,
                effect:function(t) {
                    var e, i, n, r, s;
                    return i = $(this), r = t.options.position.my, r && (r = r[r.precedance]), r = r || "top", 
                    n = o[r], "bottom" === r && (r = "top"), "right" === r && (r = "left"), s = parseInt(i.css(r)), 
                    e = {}, e[r] = s + n, i.css(e), i.show(), e[r] = s, i.animate(e, 300, "easeOutCubic"), 
                    null;
                },
                autofocus:!1
            },
            hide:{
                event:null,
                delay:0,
                effect:!1
            },
            position:{
                adjust:{
                    method:"shift shift",
                    scroll:!1
                }
            },
            style:{
                classes:"ui-tour-tip",
                tip:{
                    height:l,
                    width:a
                }
            },
            events:{},
            zindex:2e3
        }, e.prototype.initialize = function(t) {
            return t = $.extend(!0, {}, this.QTIP_DEFAULTS, t), this.el.qtip(t), this.qtip = this.el.qtip("api"), 
            this.qtip.render();
        }, e.prototype.destroy = function() {
            return this.qtip && this.qtip.destroy(), e.__super__.destroy.call(this);
        }, e.prototype.show = function() {
            return this.qtip.show();
        }, e.prototype.hide = function() {
            return this.qtip.hide();
        }, e.prototype._getTipElement = function() {
            return $("#qtip-" + this.qtip.id);
        }, e.prototype._setTarget = function(t, i) {
            return e.__super__._setTarget.call(this, t, i), this.qtip.set("position.target", t || !1);
        }, e.prototype._renderContent = function(t, e) {
            var i, n, o = this;
            return n = t.my || "left center", i = t.at || "right center", this._adjustPlacement(n, i), 
            this.qtip.set("content.text", e), this.qtip.set("position.container", t.container || $("body")), 
            this.qtip.set("position.my", n), this.qtip.set("position.at", i), this.qtip.set("position.viewport", t.viewport || !1), 
            this.qtip.set("position.target", t.target || !1), setTimeout(function() {
                return o._renderTipBackground(n.split(" ")[0]);
            }, 10);
        }, e.prototype._adjustPlacement = function(t) {
            return 0 === t.indexOf("top") ? this._adjust(0, n) :0 === t.indexOf("bottom") ? this._adjust(0, -n) :0 === t.indexOf("right") ? this._adjust(-n, 0) :this._adjust(n, 0);
        }, e.prototype._adjust = function(t, e) {
            return this.qtip.set("position.adjust.x", t), this.qtip.set("position.adjust.y", e);
        }, e.prototype._renderTipBackground = function(t) {
            var e, i;
            return i = $("#qtip-" + this.qtip.id + " .qtip-tip"), e = i.find(".qtip-tip-bg"), 
            e.length || (e = $("<div/>", {
                "class":"icon icon-tip qtip-tip-bg"
            }), i.append(e)), e.removeClass("top left right bottom"), e.addClass(t);
        }, e;
    }(Tourist.Tip.Base), Tourist.Tip.Simple = function(t) {
        function e() {
            return n = e.__super__.constructor.apply(this, arguments);
        }
        return r(e, t), e.prototype.initialize = function() {
            return $("body").append(this.el);
        }, e.prototype.show = function() {
            return this.el.show();
        }, e.prototype.hide = function() {
            return this.el.hide();
        }, e.prototype._getTipElement = function() {
            return this.el;
        }, e.prototype._renderContent = function(t, e) {
            return this.el.html(e);
        }, e;
    }(Tourist.Tip.Base), Tourist.Tour = function() {
        function t(t) {
            var e, i;
            this.options = null != t ? t :{}, this.onChangeCurrentStep = s(this.onChangeCurrentStep, this), 
            this.next = s(this.next, this), e = {
                tipClass:"Bootstrap"
            }, this.options = _.extend(e, this.options), this.model = new Tourist.Model({
                current_step:null
            }), i = _.extend({
                model:this.model
            }, this.options.tipOptions), this.view = new Tourist.Tip[this.options.tipClass](i), 
            this.view.bind("click:close", _.bind(this.stop, this, !0)), this.view.bind("click:next", this.next), 
            this.model.bind("change:current_step", this.onChangeCurrentStep);
        }
        return _.extend(t.prototype, Backbone.Events), t.prototype.start = function() {
            return this.trigger("start", this), this.next();
        }, t.prototype.stop = function(t) {
            return t ? this._showCancelFinalStep() :this._stop();
        }, t.prototype.next = function() {
            var t, e;
            return t = this._teardownCurrentStep(), e = 0, t && (e = t.index + 1), e < this.options.steps.length ? this._showStep(this.options.steps[e], e) :e === this.options.steps.length ? this._showSuccessFinalStep() :this._stop();
        }, t.prototype.setStepOptions = function(t) {
            return this.options.stepOptions = t;
        }, t.prototype.onChangeCurrentStep = function(t, e) {
            return this.view.render(e);
        }, t.prototype._showCancelFinalStep = function() {
            return this._showFinalStep(!1);
        }, t.prototype._showSuccessFinalStep = function() {
            return this._showFinalStep(!0);
        }, t.prototype._teardownCurrentStep = function() {
            var t;
            return t = this.model.get("current_step"), this._teardownStep(t), t;
        }, t.prototype._stop = function() {
            return this._teardownCurrentStep(), this.model.set({
                current_step:null
            }), this.trigger("stop", this);
        }, t.prototype._showFinalStep = function(t) {
            var e, i;
            return e = this._teardownCurrentStep(), i = t ? this.options.successStep :this.options.cancelStep, 
            _.isFunction(i) && (i.call(this, this, this.options.stepOptions), i = null), i ? e && e.final ? this._stop() :(i.final = !0, 
            this._showStep(i, this.options.steps.length)) :this._stop();
        }, t.prototype._showStep = function(t, e) {
            return t ? (t = _.clone(t), t.index = e, t.total = this.options.steps.length, t.final || (t.final = this.options.steps.length === e + 1 && !this.options.successStep), 
            t = _.extend(t, this._setupStep(t)), this.model.set({
                current_step:t
            })) :void 0;
        }, t.prototype._setupStep = function(t) {
            var e, i, n, o;
            if (!t || !t.setup) return {};
            if (t.bind) for (o = t.bind, i = 0, n = o.length; n > i; i++) e = o[i], t[e] = _.bind(t[e], t, this, this.options.stepOptions);
            return t.setup.call(t, this, this.options.stepOptions) || {};
        }, t.prototype._teardownStep = function(t) {
            return t && t.teardown && t.teardown.call(t, this, this.options.stepOptions), this.view.cleanupCurrentTarget();
        }, t;
    }();
}.call(this), function() {
    var t, e, i;
    window.onerror = function(e, i, n) {
        var o, r, s, a;
        if (void 0 === i || "" === i) return !0;
        if ("Script error." === e) return !0;
        for (o = [ /\.mixpanel\.com/, /js\.stripe\.com/, /use\.typekit\.com/, /\.google-analytics\.com/, /chrome:\/\// ], 
        s = 0, a = o.length; a > s; s++) if (r = o[s], i.match(r)) return !0;
        return setTimeout(function() {
            var o;
            return o = {
                message:"window.onerror: " + e,
                stack:i + ":" + n
            }, Err.notify(o, "window.onerror", "", t());
        }, 100), !0;
    }, t = function() {
        var t, e, i, n, o, r;
        if (!APP || !APP.document) return {};
        for (n = APP.document.selectionModel.getSelectedList(), i = {
            selectedObjects:[]
        }, o = 0, r = n.length; r > o; o++) e = n[o], t = {
            name:e + ""
        }, e.toJSON && (t.json = e.toJSON()), i.selectedObjects.push(t);
        return i.selectedObjects = JSON.stringify(i.selectedObjects), i;
    }, window.Err = {
        notify:function(t, e, i, n) {
            return t.stack || (t.stack = ""), window.ErrorTank ? window.ErrorTank.Notifier.send(t.message, t.stack, _.extend({
                component:e,
                action:i,
                ipAddress:window.__i,
                user:window.__u,
                document:window.__d,
                url:window.location.href,
                userAgent:navigator.userAgent
            }, n)) :window.console && console.error ? (console.error("(console):", e, ":", i, t.message), 
            t.stack && console.error(t.stack), console.error(n)) :void 0;
        },
        wrap:function(t, e, i) {
            var n;
            return n = function() {
                var n, o;
                o = null;
                try {
                    o = e.apply(this, arguments);
                } catch (r) {
                    n = r, Err.notify(n, i, t);
                }
                return o;
            };
        }
    }, window.paper && (e = paper.DomEvent.add, paper.DomEvent.add = function(t, i) {
        var n, o;
        for (n in i) o = i[n], i[n] = Err.wrap(n, o, "EventHandler");
        return e.call(this, t, i);
    }, i = paper.handleKey, paper.handleKey = function(t, e, n, o, r) {
        var s, a, l;
        a = r || (t ? "onKeyDown" :"onKeyUp"), l = null;
        try {
            l = i.apply(this, arguments);
        } catch (c) {
            s = c, Err.notify(s, "KeyEvent", a);
        }
        return l;
    });
}.call(this), function() {
    window.Asset = {
        DEFAULT_THUMBNAIL:"//127.0.0.1/easel/assets/core/default_thumbnail-82276cf0dbdbd514579bfa2b9dd4ae97.png",
        DEFAULT_DEMO_THUMBNAIL:"//127.0.0.1/easel/assets/core/demo_thumbnail-ab465f0f51d6e7c07642931b0d890c20.png",
        DEFAULT_TOUR_THUMBNAIL:"//127.0.0.1/easel/assets/core/tour_thumbnail-80f450d1fe6728868210f5f421540614.png",
        IMAGE_REPLACEMENT_URL:"//127.0.0.1/easel/assets/editor/white_10x10-f4f59e6a21250941b0294dcd2082e1ce.png",
        LOADING_URL:"//127.0.0.1/easel/assets/core/loading-0b26d5879d45a209d407155db8b9e512.gif",
        LOADING_URL_WHITE:"//127.0.0.1/easel/assets/core/loading_white-05244c9192f6709b1bf659403d771a34.gif",
        CHROME_IMAGE_PATH:"//127.0.0.1/easel/assets/chrome-cabf6bc46f133c9e4a76a17eba7b9a42.png",
        SETTING_TYPE_TOUR_THUMBNAIL:"//127.0.0.1/easel/assets/static/tutorials/setting_type_tour-9aeaa0b6f8d01616944c3c627091d69b.png",
        SHADOWS_TOUR_THUMBNAIL:"//127.0.0.1/easel/assets/static/tutorials/shadows_tour-75806c067ad9e92926e120618b65a19c.png"
    };
}.call(this), function(t) {
    window.Util = {
        getjQueryObject:function(e) {
            return e ? e.jquery ? e :_.isString(e) ? t(e) :t.isFunction(e) ? e.call(this) :null :null;
        },
        round:function(t, e) {
            return Math.round(t * Math.pow(10, e)) / Math.pow(10, e);
        },
        zeroPad:function(t, e) {
            if (t = "" + t, t.length >= e) return t;
            for (var i = [], n = e - t.length, o = 0; n > o; o++) i.push("0");
            return i.join("") + t;
        },
        pluralize:function(t, e, i, n) {
            t = t || 0;
            var o = e;
            return 1 == t ? o = i :0 == t && _.isString(n) && (o = n), o.replace("{0}", t);
        },
        andJoin:function(t) {
            return 0 == t.length ? "" :1 == t.length ? t[0] :t.slice(0, t.length - 1).join(", ") + " and " + t[t.length - 1];
        },
        replace:function(t, e) {
            function i(t, e, i) {
                for (;t.indexOf(e) > -1; ) t = t.replace(e, i);
                return t;
            }
            if (_.isArray(e)) for (var n = 0; n < e.length; n++) t = i(t, "{" + n + "}", e[n]); else for (var o in e) t = i(t, "{" + o + "}", e[o]);
            return t;
        },
        commifyNumber:function(t, e) {
            if (e) {
                var i = Math.pow(10, e);
                t = parseInt(Math.round(Math.round(t / i) * i));
            }
            t = "" + t;
            var n = t.split("."), o = n[0], r = null;
            n.length > 1 && (r = n[1]);
            var s = "-" == t[0];
            o = o.replace("-", "");
            var a = "";
            o = o.split("").reverse();
            for (var l = 0; l < o.length; l++) 0 != l && l % 3 == 0 && (a = "," + a), a = o[l] + a;
            return r && (a += "." + r), s && (a = "-" + a), a;
        },
        scrollTo:function(e, i, n) {
            i = i || t("body"), n = void 0 == n ? 200 :n, e instanceof jQuery && (e = e.offset().top), 
            i.animate({
                scrollTop:e
            }, n);
        },
        _SUPPORTED_PARTS:"demYyHIklpPMS",
        _extractDelimiters:function(t) {
            for (var e = null, i = [], n = 0; n < t.length; n++) Util._SUPPORTED_PARTS.indexOf(t[n]) > -1 ? (e && i.push(e), 
            e = null) :e = e ? e + t[n] :t[n];
            return e && i.push(e), i;
        },
        _tokenize:function(t, e) {
            for (var i = 0, n = 0, o = null, r = []; n < t.length; n++) e[i] && t.substr(n, e[i].length) == e[i] ? (o && r.push(o), 
            o = null, n += e[i].length - 1, i++) :o = o ? o + t[n] :t[n];
            return o && r.push(o), r;
        },
        parseDate:function(t, e) {
            if (!t) return null;
            if (t.constructor == Date || _.isNumber(t)) return new Date(t);
            if (!_.isString(t) || !e) return null;
            for (var i, n, o, r, s, a, l = Util._extractDelimiters(e), c = Util._tokenize(t, l), h = Util._tokenize(e, l), u = new Date(), d = 0; d < c.length; d++) switch (h[d]) {
              case "d":
              case "e":
                i = parseInt(c[d], 10);
                break;

              case "m":
                n = parseInt(c[d], 10) - 1;
                break;

              case "Y":
              case "y":
                o = parseInt(c[d], 10), o += o > 100 ? 0 :29 > o ? 2e3 :1900;
                break;

              case "H":
              case "I":
              case "k":
              case "l":
                r = parseInt(c[d], 10);
                break;

              case "P":
              case "p":
                /pm/i.test(c[d]) && 12 > r ? r += 12 :/am/i.test(c[d]) && r >= 12 && (r -= 12);
                break;

              case "M":
                s = parseInt(c[d], 10);
                break;

              case "S":
                a = parseInt(c[d], 10);
            }
            return new Date(void 0 === o ? u.getFullYear() :o, void 0 === n ? u.getMonth() :n, void 0 === i ? u.getDate() :i, void 0 === r ? 0 :r, void 0 === s ? 0 :s, void 0 === a ? 0 :a);
        },
        formatDate:function(t, e) {
            var i = t.getMonth(), n = t.getDate(), o = t.getFullYear(), r = t.getDay(), s = t.getHours(), a = s >= 12, l = a ? s - 12 :s;
            0 == l && (l = 12);
            for (var c, h = t.getMinutes(), u = t.getSeconds(), d = e.split(""), p = 0; p < d.length; p++) {
                switch (c = d[p], d[p]) {
                  case "a":
                    c = Util.daysShort[r];
                    break;

                  case "A":
                    c = Util.days[r];
                    break;

                  case "b":
                    c = Util.monthsShort[i];
                    break;

                  case "B":
                    c = Util.months[i];
                    break;

                  case "C":
                    c = 1 + Math.floor(o / 100);
                    break;

                  case "d":
                    c = Util.zeroPad(n, 2);
                    break;

                  case "e":
                    c = n;
                    break;

                  case "H":
                    c = Util.zeroPad(s, 2);
                    break;

                  case "I":
                    c = Util.zeroPad(l, 2);
                    break;

                  case "j":
                    var f = new Date(t.getFullYear(), t.getMonth(), t.getDate(), 0, 0, 0), g = new Date(t.getFullYear(), 0, 0, 0, 0, 0), m = f - g, _ = Math.floor(m / 864e5);
                    c = Util.zeroPad(_, 3);
                    break;

                  case "k":
                    c = s;
                    break;

                  case "l":
                    c = l;
                    break;

                  case "m":
                    c = Util.zeroPad(1 + i, 2);
                    break;

                  case "M":
                    c = Util.zeroPad(h, 2);
                    break;

                  case "p":
                    c = a ? "pm" :"am";
                    break;

                  case "P":
                    c = a ? "PM" :"AM";
                    break;

                  case "s":
                    c = Math.floor(t.getTime() / 1e3);
                    break;

                  case "S":
                    c = Util.zeroPad(u, 2);
                    break;

                  case "u":
                    c = r + 1;
                    break;

                  case "w":
                    c = r;
                    break;

                  case "y":
                    c = ("" + o).substr(2, 2);
                    break;

                  case "Y":
                    c = o;
                }
                d[p] = c;
            }
            return d.join("");
        },
        getTimezone:function() {
            var t = new Date().getTimezoneOffset() / 60 * -1, e = parseInt(t);
            return e;
        },
        _MS_PER_HOUR:36e5,
        fromUtc:function(t) {
            var e = Util.getTimezone();
            return new Date(t.getTime() + e * Util._MS_PER_HOUR);
        },
        relativeTimeSpan:function(t) {
            for (var e = [ 1e3, 60, 60, 24, 7, 52 ], i = [ "milli", "second", "minute", "hour", "day", "week" ], n = t, o = "year", r = 0; r < e.length; r++) {
                var s = n / e[r];
                if (1 > s) {
                    o = i[r];
                    break;
                }
                n = s;
            }
            return Util.DataFormatters.number(n) + Util.pluralize(parseInt(n), " " + o + "s", " " + o);
        },
        absoluteTimeSpan:function(t) {
            var e = Util.relativeTimeData(t);
            return [ Util.zeroPad(e.hourstotal, 2), Util.zeroPad(e.min, 2), Util.zeroPad(e.sec, 2) ].join(":");
        },
        relativeTimeData:function(t) {
            return ret = {}, ret.mstotal = t, ret.ispast = ret.mstotal < 0, ret.mstotal = Math.abs(ret.mstotal), 
            ret.ms = ret.mstotal % 1e3, ret.sectotal = parseInt(ret.mstotal / 1e3), ret.sec = ret.sectotal % 60, 
            ret.mintotal = parseInt(ret.sectotal / 60), ret.min = ret.mintotal % 60, ret.hourstotal = parseInt(ret.mintotal / 60), 
            ret.hours = ret.hourstotal % 24, ret.daystotal = parseInt(ret.hourstotal / 24), 
            ret;
        },
        relativeDate:function(t, e) {
            return e = e || new Date(), Util.relativeTimeData(t - e);
        },
        relativeDateStr:function(t, e) {
            function i(t) {
                return data.ispast ? t + " ago" :"in " + t;
            }
            return e = e || new Date(), t ? (data = Util.relativeDate(t, e), data.sectotal < 10 && data.ispast ? "Just now" :data.daystotal > 7 ? Util.formatDate(t, "b e, Y") :1 == data.daystotal && data.ispast ? "Yesterday" :1 != data.daystotal || data.ispast ? data.daystotal > 0 ? i(data.daystotal + " days") :data.hourstotal ? i(Util.pluralize(data.hourstotal, "{0} hours", "{0} hour")) :data.mintotal ? i(Util.pluralize(data.mintotal, "{0} minutes", "{0} minute")) :data.sectotal ? i(Util.pluralize(data.sectotal, "{0} seconds", "{0} second")) :data.mstotal ? i(Util.pluralize(data.mstotal, "{0} millis", "now!")) :Util.formatDate(t, "b e, Y") :"Tomorrow") :"unknown";
        },
        extendUrl:function(e, i) {
            var n = e.indexOf("?"), o = e, r = "";
            return n > -1 && (o = e.substring(0, n), r = e.substring(n)), o + "?" + Util.serializeUrlParams(t.extend(Util.parseUrlParams(r), i));
        },
        serializeUrlParams:function(e) {
            return t.param(e);
        },
        parseUrlParams:function(t) {
            if (!t) return {};
            var e = t.indexOf("?");
            e > -1 && (t = t.substring(e + 1));
            var i = /(?:^|&)([^&=]*)=?([^&]*)/g, n = {};
            return t = t.replace(/#(.*)$/g, ""), t.replace(i, function(t, e, i) {
                t && (n[e] = i.replace("#", ""));
            }), n;
        },
        getCurrentUrlParams:function() {
            return Util.parseUrlParams(window.location + "");
        },
        redirect:function(e, i, n) {
            if (0 == i) window.location.replace(e); else {
                n = n || "get";
                var o = t("<form/>", {
                    action:e,
                    method:n,
                    html:"&nbsp;"
                });
                if (t("body").append(o), e.indexOf("?") > -1) {
                    var r = Util.parseUrlParams(e);
                    for (var s in r) o.append(t("<input/>", {
                        type:"hidden",
                        name:s,
                        value:r[s]
                    }));
                }
                o.submit().hide();
            }
        },
        reload:function() {
            window.location.reload();
        }
    }, t.extend(Util, {
        days:[ "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday" ],
        daysShort:[ "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun" ],
        daysMin:[ "S", "M", "T", "W", "T", "F", "S", "S" ],
        months:[ "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" ],
        monthsShort:[ "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" ]
    }), Util.DataFormatters = {
        dateParseFormat:"Y-m-dTH:M:SZ",
        datetimeFormat:"b e, Y H:M",
        dateFormat:"b e, Y",
        dateParsedAsUtc:!0,
        _parseInterpreter:function(t) {
            var e = {};
            if (_.isFunction(t)) e.fn = t; else {
                var i = /([A-Za-z_]+)(\(([0-9]+)\))?/, n = i.exec(t), o = Util.DataFormatters;
                e.fn = n[1] in o ? o[n[1]] :function(t) {
                    return t;
                }, e.num = n[3] ? parseInt(n[3]) :null;
            }
            return e;
        },
        get:function(t, e) {
            var i = Util.DataFormatters, n = i._parseInterpreter(t), o = [ e ];
            return n.num && o.push(n.num), n.fn.apply(this, o);
        },
        number:function(t) {
            return _.isString(t) ? t :t ? Util.commifyNumber(parseInt(t)) :"0";
        },
        integer:function(t) {
            return _.isString(t) ? t :t ? parseInt(t) + "" :"0";
        },
        decimal:function(t, e) {
            if (_.isString(t)) return t;
            var i = t ? Util.commifyNumber(Util.round(t, void 0 == e ? 4 :e) + "") :"0", n = i.indexOf(".");
            if (e > 0) {
                var o = e;
                n > -1 ? o = Math.max(0, e - (i.length - 1 - n)) :i += ".", i += Util.zeroPad("", o);
            }
            return i;
        },
        percent:function(t, e) {
            return Util.DataFormatters.decimal(t, e) + "%";
        },
        dollar:function(t) {
            return _.isString(t) ? t :t ? "$" + Util.DataFormatters.decimal(t, 2) :"$0.00";
        },
        _date:function(t) {
            var e = Util.parseDate(t, Util.DataFormatters.dateParseFormat);
            return !Util.DataFormatters.dateParsedAsUtc || t instanceof Date || (e = Util.fromUtc(e)), 
            e;
        },
        date:function(t) {
            if (!t) return "N/A";
            var e = Util.DataFormatters._date(t);
            return Util.formatDate(e, Util.DataFormatters.dateFormat);
        },
        datetime:function(t) {
            if (!t) return "N/A";
            var e = Util.DataFormatters._date(t);
            return Util.formatDate(e, Util.DataFormatters.datetimeFormat);
        },
        relativetime:function(t) {
            if (!t) return "N/A";
            var e = Util.DataFormatters._date(t);
            return Util.relativeDateStr(e);
        },
        bool:function(t) {
            return t ? "Yes" :"No";
        },
        checkbox:function(t) {
            return '<input class="checkbox" type="checkbox" ' + (t ? 'checked="checked"' :"") + "/>";
        }
    };
}(jQuery), /*
MIT License

Copyright (c) 2011, Ben Ogle

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/
function(t) {
    function e(t, e) {
        for (var i = 0; i < t.length; i++) if (t[i] == e) return i;
        return -1;
    }
    t.log = function() {
        t.log.enabled && (t.log.logFn.apply(null, arguments) || t.isFunction(t.log.failoverFn) && t.log.failoverFn(arguments));
    }, t.log.scopeCookie = "module_scopes", t.log.enabled = !0, t.log.failoverToFirebugLite = !0, 
    t.log.firebugLiteUrl = "https://getfirebug.com/releases/lite/1.4/firebug-lite.js", 
    t.log.level = 0, t.log.DEBUG = "DEBUG:", t.log.INFO = "INFO:", t.log.WARNING = "WARNING:", 
    t.log.ERROR = "ERROR:", t.log.LOG = "LOG:", t.log.LEVEL_ORDER = [ t.log.DEBUG, t.log.INFO, t.log.WARNING, t.log.ERROR, t.log.LOG ], 
    t.log.LEVEL_FUNCTIONS = {}, t.log.LEVEL_FUNCTIONS[t.log.DEBUG] = "debug", t.log.LEVEL_FUNCTIONS[t.log.INFO] = "info", 
    t.log.LEVEL_FUNCTIONS[t.log.WARNING] = "warn", t.log.LEVEL_FUNCTIONS[t.log.ERROR] = "error", 
    t.log.LEVEL_FUNCTIONS[t.log.LOG] = "log", t.log.logFn = function() {
        if (window.console && window.console.log && t.isFunction(window.console.log)) {
            for (var i, n = window.console.log, o = [], r = 0; r < arguments.length; r++) o.push(arguments[r]);
            if (arguments.length > 0 && (i = e(t.log.LEVEL_ORDER, arguments[0])) > -1) {
                var s = window.console[t.log.LEVEL_FUNCTIONS[t.log.LEVEL_ORDER[i]]];
                t.isFunction(s) ? (n = s, o = o.slice(1)) :o = [ o.join(" ") ];
            }
            return n.apply(window.console, o), !0;
        }
        if (window.console && window.console.log) {
            for (var o = [], r = 0; r < arguments.length; r++) o.push(arguments[r]);
            window.console.log(o);
        }
        return !1;
    }, t.log._specialLog = function(e, i) {
        for (var n = [ e ], o = 0; o < i.length; o++) n.push(i[o]);
        t.log.apply(this, n);
    };
    for (var i = 0; i < t.log.LEVEL_ORDER.length; i++) {
        var n = t.log.LEVEL_FUNCTIONS[t.log.LEVEL_ORDER[i]];
        "log" != n && function(e) {
            t[n] = function() {
                e >= t.log.level && t.log._specialLog(t.log.LEVEL_ORDER[e], arguments);
            };
        }(i);
    }
    t.log.failoverFn = function(e) {
        function i(i) {
            var n = setInterval(function() {
                t.log.logFn.apply(null, e) && (clearInterval(n), t.isFunction(i) && i());
            }, 100);
        }
        if (t.log.failoverToFirebugLite && t.log.enabled) if (t.log.loading) i(); else {
            t.log.loading = !0;
            var n = t("<script/>", {
                type:"text/javascript",
                src:t.log.firebugLiteUrl
            });
            t("body").append(n), i(function() {
                t.log.loading = !1;
            });
        } else t.SimpleConsole && t.log.enabled && (window.console = t("body").SimpleConsole(), 
        t.log.logFn.apply(null, e));
    };
    var o;
    t.log.DEBUG_MODULES = [], t.cookie && (o = t.cookie(t.log.scopeCookie)) && (t.log.DEBUG_MODULES = o.split(",")), 
    t.log.setModules = function(e) {
        t.log.DEBUG_MODULES = _.uniq(e), t.cookie && t.cookie(t.log.scopeCookie, t.log.DEBUG_MODULES.join(","));
    }, t.log.addModules = function() {
        t.log.setModules(t.log.DEBUG_MODULES.concat(_.toArray(arguments)));
    }, t.log.clearModules = function() {
        t.log.setModules([]);
    }, t.log.removeModule = function(e) {
        t.log.setModules(_.without(t.log.DEBUG_MODULES, e));
    }, t.scopedDebug = function(e) {
        if (t.log.enabled && !(t.log.level > 0)) {
            var i = arguments, n = null;
            if (e && (n = _.isString(e) ? e :e._module || e.constructor.name), n && (!t.log.DEBUG_MODULES || _.indexOf(t.log.DEBUG_MODULES, n) > -1)) {
                var o = arguments.callee.caller.toString(), r = null;
                if (!_.isString(e)) for (var s in e) if (_.isFunction(e[s]) && e[s].toString() == o) {
                    r = s;
                    break;
                }
                i = [ n + (s ? "." + s + ": " :"") ].concat(Array.prototype.slice.call(i, 1)), t.debug.apply(this, i);
            }
        }
    }, window.print = t.log, window.pd = t.debug, window.pds = t.scopedDebug, window.smod = t.log.setModules, 
    window.amod = t.log.addModules, window.cmod = t.log.clearModules, window.rmod = t.log.removeModule;
}(jQuery), function(t) {
    Forms = {
        CONTROL_CHARS:[ 8, 12, 13, 16, 17, 18, 19, 20, 27 ],
        ARROW_CHARS:{
            38:"up",
            40:"down"
        }
    }, Forms.Textbox = Backbone.View.extend({
        className:"Textbox",
        initialize:function(e) {
            this.options = e, this.el = t(this.el), this.el.data(this.className, this);
        },
        val:function(t) {
            return t ? this.el.val(t) :this.el.val();
        },
        select:function() {
            this.el.select();
        },
        testRegex:function(t, e, i, n) {
            if (_.contains(Forms.CONTROL_CHARS, e)) return !0;
            var o = i[1] - i[0];
            return t = t.split(""), t.splice(i[0], o, String.fromCharCode(e)), t = t.join(""), 
            n.test(t);
        },
        getSelectionRange:function() {
            var t = this.el[0], e = [ 0, 0 ];
            if (t.createTextRange) {
                var i = document.selection.createRange().duplicate();
                i.moveEnd("character", t.value.length), "" == i.text && (e[0] = t.value.length), 
                e[0] = t.value.lastIndexOf(i.text), i.moveStart("character", -t.value.length), e[1] = i.text.length;
            } else e = [ t.selectionStart, t.selectionEnd ];
            return e;
        },
        getSelection:function() {
            var t = this.el[0], e = "";
            if (void 0 != document.selection) {
                t.focus();
                var i = document.selection.createRange();
                e = i.text;
            } else if (void 0 != t.selectionStart) {
                var n = t.selectionStart, o = t.selectionEnd;
                e = t.value.substring(n, o);
            }
            return e;
        }
    }), Forms.LimitedTextBox = Forms.Textbox.extend({
        ACCEPT:/^.*$/,
        defaults:{
            maxDigits:7,
            min:0,
            max:5e5,
            increment:1,
            largeIncrement:10
        },
        initialize:function(e) {
            if (_.bindAll(this, "handleKey", "handleKeyDown"), e = t.extend(!0, {}, this.defaults, e), 
            Forms.LimitedTextBox.__super__.initialize.call(this, e), this.el.attr("autocomplete", "off"), 
            this.ACCEPT) {
                var i = this;
                setTimeout(function() {
                    i.el.keypress(i.handleKey), i.el.keydown(i.handleKeyDown), i.el.focus(function() {
                        setTimeout(function() {
                            i.select();
                        }, 1);
                    });
                }, 20);
            }
        },
        increment:function() {},
        getIncrementValue:function(t) {
            return t.shiftKey ? this.options.largeIncrement :this.options.increment;
        },
        handleKeyDown:function(t) {
            if (t.which in Forms.ARROW_CHARS) {
                var e = Forms.ARROW_CHARS[t.which], i = this.getIncrementValue(t);
                return "up" == e && this.increment(i), "down" == e && this.increment(-i), !1;
            }
            return !0;
        },
        handleKey:function(t) {
            var e = this.testRegex(this.el.val(), t.which, this.getSelectionRange(), this.ACCEPT);
            return e;
        }
    }), Forms.IntBox = Forms.LimitedTextBox.extend({
        className:"IntBox",
        ACCEPT:/^([0-9]*)$/,
        val:function(t) {
            return void 0 == t ? (val = parseInt(this.el.val()), val = isNaN(val) ? this.options.min :val) :(this.el.val(t), 
            void 0);
        },
        increment:function(t) {
            var e = this.val() + t, e = _.clamp(e, this.options.min, this.options.max);
            this.val(e);
            this.el.change(), this.select();
        }
    }), Forms.DecimalBox = Forms.IntBox.extend({
        className:"DecimalBox",
        ACCEPT:/^([0-9]*(\.[0-9]*)?)?$/,
        val:function(t) {
            return void 0 != t && this.options.round && (t = parseFloat(t), t = Math.round(t * this.options.round) / this.options.round), 
            void 0 != t ? this.el.val(t) :parseFloat(this.el.val());
        }
    }), Forms.Form = Backbone.View.extend({
        initialize:function(e) {
            _.bindAll(this, "_onSubmit", "_onInvalid");
            if (this.options = e = t.extend(!0, {}, Forms.Form.defaults, e), this.el = Util.getjQueryObject(this.el), 
            this.el.is("form")) this.form = this.el; else if (this.form = this.$("form"), !this.form.length) return;
            this.form.submit(this._onSubmit), this.form.validate && (e.validationOptions.invalidHandler = this._onInvalid, 
            this.validator = this.form.validate(e.validationOptions)), e.submitters = Util.getjQueryObject(e.submitters), 
            e.submitters || (e.submitters = this.form.find('input[type="submit"]')), e.submitters.click(function(i) {
                var n = t(this);
                return n.hasClass(e.disabledClass) ? (i.stopPropagation(), !1) :n.is(":not(:submit)") ? (this.submit(), 
                !1) :void 0;
            }), e.resetInitially && this.reset(), this._setupDataTypes(), this._enabled = !0;
        },
        DATA_TYPE_PARSER:/(\w+)(\(([\w, ]+)\))?/,
        _setupDataTypes:function() {
            var t = this.options.dataTypes;
            for (var e in t) {
                var i = this.getElement(e);
                i.length && this._setElementDataFilter(i, t[e]);
            }
        },
        _setElementDataFilter:function(e, i) {
            t.isFunction(Forms.Form.dataTypes[i]) && Forms.Form.dataTypes[i].call(this, e);
        },
        _setData:function(e, i) {
            "radio" == e.attr("type") ? e.each(function() {
                t(this).val() == i && t(this).attr("checked", "checked"), t(this).change();
            }) :"checkbox" == e.attr("type") ? i ? e.prop("checked", !0) :e.prop("checked", !1) :e.val(i);
        },
        _onInvalid:function() {
            return this._submittersEnable(!0), t.isFunction(this.options.onInvalid) ? this.options.onInvalid.call(this, arguments) :void 0;
        },
        _onSubmit:function() {
            if (!this._enabled) return !1;
            this.options.disableSubmittersOnSubmit && this._submittersEnable(!1);
            var e = this.val();
            return this.trigger("submit", this, this.form, e, arguments), t.isFunction(this.options.onSubmit) ? this.options.onSubmit.call(this, this.form, e, arguments) :!0;
        },
        _submittersEnable:function(e) {
            var i = this;
            this._enabled = e, i.options.submitters && i.options.submitters.each(function() {
                var n = t(this);
                n.is("input") && !e ? n.attr("disabled", "disabled") :n.is("input") && e && n.removeAttr("disabled"), 
                n[e ? "removeClass" :"addClass"](i.options.disabledClass);
            }), this.trigger("change:enable", this, e);
        },
        getDefaultData:function() {
            return this.options.defaultData;
        },
        setDefaultData:function(t) {
            this.options.defaultData = t;
        },
        getElement:function(t) {
            return this.form.find('input[name="' + t + '"], textarea[name="' + t + '"], select[name="' + t + '"]');
        },
        val:function(t, e) {
            if (0 == arguments.length) {
                for (var i = {}, n = this.form.find('input[type="hidden"], input, textarea, select'), o = 0; o < n.length; o++) {
                    var r = n.eq(o), s = r.attr("name");
                    "submit" != r.attr("type") && s && (i[s] = this.val(s));
                }
                return i;
            }
            var r = this.getElement(t);
            return void 0 != e ? this._setData(r, e) :"radio" == r.eq(0).attr("type") ? r.filter(":checked").val() :"checkbox" == r.attr("type") ? r.is(":checked") :r.val();
        },
        focusFirst:function() {
            this.form.find('input[type="text"]:first, textarea:first').focus();
        },
        clearErrors:function() {
            var t = this.validator;
            t && (t.submitted = {}, t.prepareForm(), t.hideErrors(), t.elements().removeClass(t.options.errorClass));
        },
        reset:function() {
            for (var t = this.form.find("input, textarea, select"), e = this.options.defaultData, i = 0; i < t.length; i++) {
                var n = t.eq(i), o = n.attr("name");
                if ("submit" != n.attr("type")) {
                    var r = "";
                    o in e && (r = e[o]), this._setData(n, r);
                }
            }
            this._submittersEnable(!0);
            var s = this;
            setTimeout(function() {
                s._resetValidator();
            }, 5);
        },
        _resetValidator:function() {
            if (this.validator) {
                var t = this.validator;
                t.submitted = {}, t.lastElement = null, t.prepareForm(), t.hideErrors(), t.elements().removeClass(t.settings.errorClass);
            }
        },
        load:function(e) {
            t.isFunction(this.options.onLoad) && this.options.onLoad.call(this, e);
            for (var i in e) this.val(i, e[i]);
        },
        hide:function() {
            this.el.hide();
        },
        show:function() {
            this.el.show(), this.focusFirst();
        },
        disable:function() {
            for (var t = this.form.find("input, textarea, select"), e = 0; e < t.length; e++) {
                var i = t.eq(e);
                0 == i.hasClass("skip-disable") && i.prop("disabled", !0);
            }
        },
        enable:function() {
            for (var t = this.form.find("input, textarea, select"), e = 0; e < t.length; e++) {
                var i = t.eq(e);
                i.prop("disabled") && i.prop("disabled", !1);
            }
        },
        valid:function() {
            return this.validator && this.form ? this.form.valid() :!0;
        },
        submit:function() {
            this.form.submit();
        }
    }), _.extend(Forms.Form, {
        defaults:{
            dataTypes:{},
            validationOptions:{},
            defaultData:{},
            resetInitially:!1,
            submitters:null,
            disableSubmittersOnSubmit:!0,
            disabledClass:"disabled",
            onLoad:function() {},
            onSubmit:function() {
                return !0;
            },
            onInvalid:function() {
                return !0;
            }
        },
        dataTypes:{
            "int":function(t) {
                new Forms.IntBox({
                    el:t
                });
            },
            decimal:function(t) {
                new Forms.DecimalBox({
                    el:t
                });
            }
        }
    });
}(jQuery), function() {
    Backbone.Item = Backbone.Model.extend({
        toString:function() {
            return "Backbone.Item";
        },
        initialize:function(t, e) {
            this.options = e || {}, this.set(_.extend({}, this.defaults, this.attributes), {
                silent:!0
            });
        },
        url:function() {
            return this.options.url || this.url;
        },
        parse:function(t) {
            return t.results;
        },
        destroy:function(t) {
            this.get(this.idAttribute) ? Backbone.Model.prototype.destroy.call(this, t) :this.collection && this.collection.remove(this);
        }
    }), Backbone.Item.DEFAULT = {}, Backbone.Filter = Backbone.Model.extend({
        initialize:function() {
            _.bindAll(this, "_setFn", "matchStr", "matchRe"), this.bind("change:function", this._setFn), 
            this.bind("change:pattern", this._setFn), this._setFn();
        },
        _setFn:function() {
            if (this.get("function")) return this.fn = this.get("function"), void 0;
            try {
                var t = new RegExp(this.get("pattern"), "i");
                this.set({
                    pattern:t
                }, {
                    silent:!0
                }), this.fn = this.matchRe;
            } catch (e) {
                this.fn = this.matchStr;
            }
        },
        getPatternString:function() {
            var t = this.get("pattern");
            return t instanceof RegExp ? t.toString().replace(/^\//, "").replace(/\/[gi]*$/, "") :t.toString();
        },
        matchRe:function(t, e, i) {
            var n = t.get(e);
            return n ? i.test(n) :!1;
        },
        matchStr:function(t, e, i) {
            var n = t.get(e);
            return n ? n.indexOf(i) >= 0 :!1;
        },
        matches:function(t) {
            if (!this.fn) return !1;
            for (var e = this.get("attrs"), i = this.get("pattern"), n = 0; n < e.length; n++) if (this.fn(t, e[n], i)) return !0;
            return !1;
        }
    }), Backbone.Items = Backbone.Collection.extend({
        FILTERABLE_ATTRIBUTES:[],
        model:Backbone.Item,
        toString:function() {
            return "Backbone.Items";
        },
        initialize:function(t, e) {
            this.options = e || {};
            var i = this.getSortAttribute();
            i && this.sortByAttribute(i, this.getSortDescending());
            for (var n = 0; n < this.models.length; n++) this.models[n].options = _.extend({}, this.models[n].options, e);
            this.bind("add", this._onAdd), this.bind("remove", this._onRemove), this.bind("refresh", this._doFilter), 
            this.bind("reset", this._doFilter);
        },
        parse:function(t) {
            return t && t.results ? t.results :t;
        },
        fetch:function(t) {
            function e(t, e) {
                return function() {
                    var n = [ "fetch:end", t ].concat(arguments);
                    i.trigger.apply(i, n), e && i.trigger(e, this);
                };
            }
            var i = this;
            return t = t || {}, t.error = e("error"), t.success = e("success"), i.trigger("fetch:start", this, t), 
            Backbone.Items.__super__.fetch.call(this, t);
        },
        createNew:function(t, e) {
            self = this;
            var i = new this.model(t, e);
            e = e || {};
            var n = e.success;
            return i.save({}, _.extend(_.clone(e), {
                success:function(t, e, i) {
                    self.onCreateSuccess(t, e, i), n && n(t, e, i);
                }
            })), i;
        },
        onCreateSuccess:function(t) {
            this.add(t);
        },
        getSortAttribute:function() {
            return this.options.sortAttribute || null;
        },
        getSortDescending:function() {
            var t = (this.options || {}).sortDescending;
            return void 0 == t ? null :t;
        },
        sortedIndex:function(t, e) {
            var i = this.models;
            if (this.getSortDescending()) {
                e = e || _.identity;
                for (var n = 0, o = i.length; o > n; ) {
                    var r = n + o >> 1;
                    e(i[r]) > e(t) ? n = r + 1 :o = r;
                }
                return n;
            }
            return _.sortedIndex(i, t, e);
        },
        sortByAttribute:function(t, e, i) {
            t ? (this.options.sortAttribute = t, this.options.sortDescending = 1 == e, this.models.sort(function(n, o) {
                if (e) {
                    var r = n;
                    n = o, o = r;
                }
                var s = n.get(t), a = o.get(t);
                return _.isFunction(i) && (s = i.call(self, s, n), a = i.call(self, a, o)), a > s ? -1 :s > a ? 1 :0;
            }), this.comparator = function(e) {
                var n = e.get(t);
                return _.isFunction(i) ? i.call(self, e.get(t), e) :n;
            }, this.trigger("sort", this, t, this.getSortDescending()), this.trigger("refresh", this)) :(this.options.sortAttribute = null, 
            this.options.sortDescending = null, this.comparator = null);
        },
        _onAdd:function(t, e, i) {
            i = i || {}, this._doFilter(!1), i.index = _.indexOf(this.getModels(), t);
        },
        _onRemove:function(t, e, i) {
            i = i || {}, this._filteredModels && (this._filteredModels = _.without(this._filteredModels, t));
        },
        getModels:function() {
            return this._filteredModels || this.models;
        },
        matchesFilter:function(t) {
            return this._filter ? this._filter.matches(t) :!0;
        },
        removeFilter:function() {
            this._filter = null, this._filteredModels = null, this.trigger("filter", this, this.getModels(), null, null);
        },
        _getFiltered:function(t) {
            if (!t) return null;
            for (var e = [], i = 0; i < this.models.length; i++) t.matches(this.models[i]) && e.push(this.models[i]);
            return e;
        },
        _doFilter:function(t) {
            var e = this._filter, i = null, n = null;
            e && (i = e.getPatternString(), n = e.get("attrs")), this._filteredModels = this._getFiltered(e), 
            0 != t && this.trigger("filter", this, this._filteredModels, i, n);
        },
        filter:function(t, e) {
            if (t && t.length) {
                var i = null;
                if (e) i = [ e ]; else {
                    var n = t.split(":");
                    n.length > 1 ? (i = [ n[0] ], t = n[1].split(" ")[0]) :i = this.FILTERABLE_ATTRIBUTES;
                }
                this._filter = new Backbone.Filter({
                    pattern:t,
                    attrs:i
                });
            } else this.removeFilter();
            return this._doFilter(), this._filteredModels;
        }
    }), Backbone.PagedItems = Backbone.Items.extend({
        defs:{
            id:1,
            page:1,
            page_size:4
        },
        model:Backbone.Item,
        toString:function() {
            return "Backbone.PagedItem";
        },
        initialize:function(t, e) {
            Backbone.PagedItems.__super__.initialize.call(this, t, e), _.bindAll(this, "_refresh", "_updatePageDataForFilter");
            var i = {
                url:"",
                cachePages:!0,
                pageData:{}
            };
            _.bindAll(this, "_handleSuccess"), this.options = $.extend({}, i, e), this.pageData = new Backbone.Model($.extend({}, this.defs, this.options.pageData)), 
            t && t.length && this.pageData.set({
                total:t.length
            }), this.beginOffset = 0, this.bind("reset", this._refresh), this.bind("refresh", this._refresh), 
            this.bind("filter", this._updatePageDataForFilter);
        },
        _computeBestPage:function(t) {
            var e = this.pageData.get("page"), i = this.pageData.get("page_size");
            return t ? i * e > t ? this.numPages(t) :e :1;
        },
        _updatePageDataForFilter:function() {
            var t = this.getModels();
            this.pageData.set({
                total:t.length,
                page:this._computeBestPage(t.length)
            }), this._triggerNewPage();
        },
        _triggerNewPage:function() {
            this.trigger("newpage", this);
        },
        _getBounds:function() {
            var t = this.pageData, e = t.get("page") - 1, i = t.get("page_size"), n = t.get("total"), o = e * i - this.beginOffset;
            return n ? [ o, o + i > n ? n - o :i ] :[ 0, 0 ];
        },
        _refresh:function() {
            this.pageData.get("total") || this.pageData.set({
                total:this.length
            });
        },
        _fetch:function(t) {
            if (this.options.cachePages && this.hasPageData()) this._triggerNewPage(); else {
                var e = t && t.error && _.bind(t.error, null, collection);
                Backbone.sync("read", this, this._handleSuccess, e);
            }
        },
        _handleSuccess:function(t) {
            for (var e = this._getBounds(), i = this.parse(t), n = 0; n < i.length; n++) this.models[e[0] + n] = i[n];
            this._triggerNewPage();
        },
        parse:function(t) {
            return t.results && (t = t.results), _.isArray(t) ? (this.pageData.set({
                page:1,
                total:t.length
            }), t) :t.page || t.pages || t.total || t.page_size ? (this.pageData.set(_.extract(t, [ "page", "pages", "total", "page_size" ])), 
            t.data) :t;
        },
        url:function() {
            return this.options.url;
        },
        toJSON:function() {
            return this.pageData.attributes;
        },
        hasPageData:function() {
            var t = this._getBounds(), e = this.getModels();
            if (!e || !e.length) return !1;
            for (var i = 0; i < t[1]; i++) if (!e[t[0] + i]) return !1;
            return !0;
        },
        getPageData:function() {
            for (var t = this._getBounds(), e = [], i = this.getModels(), n = 0; n < t[1]; n++) e.push(i[t[0] + n]);
            return e;
        },
        setPageSize:function(t) {
            return parseInt(t) == t && this.pageData.get("page_size") != t && (this.pageData.set({
                page_size:t
            }), this._fetch({})), !1;
        },
        numPages:function(t) {
            var e = this.pageData.get("pages");
            return t = t || this.pageData.get("total"), e ? e :t ? (e = t / this.pageData.get("page_size"), 
            parseInt(e) < e && (e += 1), parseInt(e)) :null;
        },
        nextPage:function(t) {
            var e = this.pageData.get("page"), i = e + 1, n = this.numPages();
            n && (i = Math.min(i, n)), i != e && (this.pageData.set({
                page:i
            }), this._fetch(t));
        },
        previousPage:function(t) {
            var e = this.pageData.get("page"), i = Math.max(e - 1, 1);
            i != e && (this.pageData.set({
                page:i
            }), this._fetch(t));
        },
        lastPage:function(t) {
            var e = this.numPages();
            e && (this.pageData.set({
                page:this.numPages()
            }), this._fetch(t));
        },
        firstPage:function(t) {
            this.pageData.set({
                page:1
            }), this._fetch(t);
        },
        goToPage:function(t, e) {
            this.pageData.set({
                page:t
            }), this._fetch(e);
        }
    }), Backbone.ItemView = Backbone.View.extend({
        tagName:"div",
        template:"#item-template",
        noDataBindClass:".no-bind",
        formats:{},
        _events:{
            "submit form":"submit",
            "click .delete":"delete"
        },
        toString:function() {
            return "Backbone.ItemView";
        },
        initialize:function(t) {
            _.bindAll(this, "_onSuccess", "_onError", "_onChange"), this.options = t, this.model.bind("change", this._onChange), 
            Backbone.ItemView.__super__.initialize.call(this, t);
        },
        delegateEvents:function() {
            Backbone.ItemView.__super__.delegateEvents.call(this, _.extend({}, this._events, this.events));
        },
        _setForms:function() {
            Forms.Form && this.$("form").length && (this.form = new Forms.Form({
                el:this.$("form")
            }));
        },
        _getModelDataFromForm:function() {
            return this.form ? this.form.val() :{};
        },
        _format:function(t, e) {
            return window.Util && Util.DataFormatters && this.formats && this.formats[t] && (e = Util.DataFormatters.get(this.formats[t], e)), 
            e;
        },
        updateBoundAttribute:function(t) {
            if (!this.el.is(this.noDataBindClass)) {
                var e = this, i = this.model.get(t), n = this._format(t, i);
                this.form && this.form.val(t, n);
                var o = this.$("." + t), r = this.el, s = this.noDataBindClass;
                o.each(function() {
                    var o = $(this).parentsUntil(r, s);
                    if (!o.length) {
                        var a = $(this), l = n, c = a.attr("data-attr");
                        c && (l = e._format(t, i[c])), a.is("img") ? a.attr("src", l) :a.is("input, textarea") ? a.val(l) :"html" == a.attr("data-type") ? a.html(l) :a.text(l);
                    }
                });
            }
        },
        _onChange:function() {
            var t, e = this.model;
            t = e.changedAttributes ? e.changedAttributes() :_.keys(e.attributes);
            for (var i = 0; i < t.length; i++) this.updateBoundAttribute(t[i]);
        },
        _onSuccess:function() {
            this.form._submittersEnable(!0);
        },
        _onError:function() {
            this.form._submittersEnable(!0);
        },
        setModel:function(t) {
            this.model = t;
        },
        remove:function() {
            this.model && this.model.unbind("change", this._onChange), this.model = null, this.el.remove();
        },
        submit:function() {
            return this.model.save(this._getModelDataFromForm(), {
                success:this._onSuccess,
                error:this._onError
            }), !1;
        },
        "delete":function() {
            return this.model.destroy(), this.remove(), !1;
        },
        focus:function() {
            this.$('input[type="text"],select,textarea').eq(0).focus();
        },
        render:function(t) {
            t = _.clone(t || this.model.attributes);
            for (var e in t) t[e] = this._format(e, t[e]);
            return Backbone.ItemView.__super__.render.call(this, t), this._setForms(), this;
        }
    }), Backbone.ItemViews = Backbone.View.extend({
        viewClass:Backbone.ItemView,
        collectionClass:Backbone.Items,
        defs:{
            itemsSelector:".items",
            noItemsSelector:".no-items"
        },
        events:{
            "click .add":"clickAddItem"
        },
        toString:function() {
            return "Backbone.ItemViews";
        },
        initialize:function(t) {
            _.bindAll(this, "addItem", "removeItem", "refresh"), this.options = $.extend({}, this.defs, t), 
            Backbone.ItemViews.__super__.initialize.call(this, this.options), this.template && this.render(), 
            this.items = this.$(this.options.itemsSelector), this.noItems = this.$(this.options.noItemsSelector), 
            this.views = {}, this.model.bind("refresh", this.refresh), this.model.bind("reset", this.refresh), 
            this.model.bind("filter", this.refresh), this.model.bind("add", this.addItem), this.model.bind("remove", this.removeItem), 
            this.refresh();
        },
        tellUserModelNotInFilter:function() {},
        addItem:function(t, e, i) {
            if (i = i || {}, this.model.matchesFilter(t)) {
                if (i.index >= 0) {
                    var n, o = this._createView(t).render().el;
                    0 == i.index ? this.items.prepend(o) :(n = this.items.find(">:eq(" + (i.index - 1) + ")")).length ? $(o).insertAfter(n) :this.items.append(o), 
                    this.trigger("add", o, i);
                }
            } else this.tellUserModelNotInFilter(t);
            this._updateForItems();
        },
        remove:function() {
            this.model.unbind("refresh", this.refresh), this.model.unbind("reset", this.refresh), 
            this.model.unbind("filter", this.refresh), this.model.unbind("add", this.addItem), 
            this.model.unbind("remove", this.removeItem), Backbone.ItemViews.__super__.remove.call(this);
        },
        removeItem:function(t) {
            var e = this.views[t.cid];
            if (e) {
                var i = e.el;
                delete this.views[t.cid], this.trigger("remove", i, {});
            }
            this._updateForItems();
        },
        clickAddItem:function(t, e) {
            var i = _.extend({}, this.options);
            return delete i.model, model = new this.model.model(_.extend({}, this.model.model.DEFAULT, e), i), 
            this.model.add(model), !1;
        },
        _createView:function(t) {
            var e = _.extend({}, this.options, {
                model:t
            });
            delete e.el;
            var i = new this.viewClass(e);
            return this.views[t.cid] = i, i;
        },
        _addItem:function(t) {
            var e = this._createView(t);
            this.items.append(e.render().el), this.trigger("add", e.el, {});
        },
        _updateForItems:function() {
            var t = this.model.getModels();
            t.length ? (this.noItems.hide(), this.items.show(), this.el.removeClass("empty")) :(this.noItems.show(), 
            this.items.hide(), this.el.addClass("empty"));
        },
        refresh:function() {
            _.invoke(_.values(this.views), "remove"), this.views = {};
            for (var t = this.model.getModels(), e = 0; e < t.length; e++) this._addItem(t[e]);
            this._updateForItems();
        }
    }), Backbone.PagedItemViews = Backbone.View.extend({
        viewClass:Backbone.ItemView,
        defs:{
            itemsSelector:".items",
            noItemsSelector:".no-items"
        },
        toString:function() {
            return "Backbone.PagedItemViews";
        },
        initialize:function(t) {
            _.bindAll(this, "newPage"), this.options = $.extend({}, this.defs, t), Backbone.PagedItemViews.__super__.initialize.call(this, this.options), 
            this.model.bind("newpage", this.newPage), this.model.bind("refresh", this.newPage), 
            this.model.bind("reset", this.newPage), this.views = [];
            var e = this;
            window.Debouncer && (this.heightDelay = new Debouncer(500, function() {
                e.items.css({
                    height:"auto"
                });
            }, {
                isInterval:!1
            }), this.heightDelay.stop()), this.render(), this.newPage(this.model);
        },
        render:function(t) {
            if (this.template && Backbone.ItemViews.__super__.render.call(this, t), this.items = this.$(this.options.itemsSelector), 
            this.noItems = this.$(this.options.noItemsSelector), window.Widget && Widget.Loader) {
                this.loader = new Widget.Loader({
                    location:{
                        position:"absolute",
                        right:5,
                        top:5
                    },
                    el:this.items
                });
                var e = this;
                this.model.bind("fetch:start", function() {
                    e.loader.startLoading();
                }), this.model.bind("fetch:end", function() {
                    e.loader.stopLoading();
                });
            }
        },
        newPage:function(t) {
            this.items.height(this.el.height());
            for (var e in this.views) this.views[e].remove();
            this.views = [];
            for (var i = t.getPageData(), n = 0; n < i.length; n++) {
                var o = new this.viewClass($.extend({}, this.options, {
                    model:i[n],
                    index:n
                }));
                this.views.push(o);
                var r = o.render().el;
                this.items.append(r);
            }
            i.length ? (this.noItems.hide(), this.items.show()) :(this.noItems.show(), this.items.hide()), 
            this.heightDelay && this.heightDelay.update();
        }
    });
}(), function() {
    $.File = {
        READ_FNS:{
            text:"readAsText",
            binary:"readAsBinaryString",
            url:"readAsDataURL"
        },
        read:function(t, e, i) {
            var n, o;
            return o = $.File.READ_FNS[e], window.FileReader && FileReader.prototype[o] ? (n = new FileReader(), 
            n.onload = function(t) {
                return i(t.target.result);
            }, n[o].call(n, t), n) :!1;
        }
    };
}.call(this), function() {
    var t, e = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    t = [ "included", "extended" ], window.mixin = function(i, n) {
        var o, r, s, a;
        if (!n) throw "mixin(obj) requires obj";
        s = n.prototype || n;
        for (r in s) a = s[r], e.call(t, r) < 0 && (i.prototype[r] = a);
        return o = n.included, o && o.apply(n, [ i ]), i;
    };
}.call(this), function() {
    window.Destructor = function() {
        function t() {}
        return t.mixin = function(t) {
            return t._cacheObject = function(e) {
                return t._cached || (t._cached = []), t._cached.push(e);
            }, t.destroy = function() {
                var e, i, n, o;
                if (t._cached) {
                    for (o = t._cached, i = 0, n = o.length; n > i; i++) e = o[i], e.destroy();
                    return t._cached = null;
                }
            };
        }, t;
    }();
}.call(this), window.Widget = {}, function(t) {
    Widget.DropdownBox = Backbone.View.extend({
        template:"#dropdown-template",
        events:{
            click:"onClick"
        },
        initialize:function(e) {
            var i = {
                classElement:"dropdown-box",
                classContent:"dropdown-current",
                classDropdown:null,
                selected:0,
                paneClass:Draw.DropdownEmbedPane
            };
            this._initializing = !0, this.el = t(this.el), this.options = t.extend({}, i, e), 
            this.paneClass = this.options.paneClass, this.render(), this._content = this.el.find("." + this.options.classContent), 
            this.delegateEvents(), this._initializing = !1;
        },
        getData:function() {
            if (this._data) return this._data;
            var t = (this.options, this.select || this.el);
            if (t && t.is("select")) {
                for (var e = [], i = t.find("option"), n = t.val(), o = 0, r = 0; r < i.length; r++) {
                    var s = i.eq(r), a = this._getValue(s);
                    n == a && (o = r), e.push([ a, s.text() ]);
                }
                return this._data = [ e, o ], this._data;
            }
            return null;
        },
        render:function() {
            var e = (this.options, this.getData());
            if (e) {
                var i = e[1];
                e = e[0];
                var n = t(t.parseHTML(this.renderTemplate(this.template, {})));
                this.el.is("select") ? (n.insertAfter(this.el), n.append(this.el), this.el.css({
                    position:"absolute",
                    top:"-999px",
                    right:"999px",
                    opacity:0
                }), this.select = this.el, this.el = n, this.select.change(_.bind(this.onSelectChanged, this))) :this.el.append(n), 
                this.pane = new this.paneClass({
                    data:e,
                    document:this.model
                }), this.pane.bind("selected", _.bind(this.onSelected, this)), this.pane.selectIndex(i), 
                this.flyout = new Draw.DropdownFlyout({
                    pane:this.pane,
                    target:this.el,
                    document:this.model,
                    classes:"ui-flyout " + this.options.classDropdown || ""
                });
            }
            return this.el[0] && !this.el[0].id && this.el.attr("id", _.uniqueId("dropdown-box-")), 
            this;
        },
        setSelected:function(t, e) {
            return _.isNumber(t) ? this.pane.selectIndex(t, e) :this.pane.selectItem(t, e);
        },
        _setSelected:function(t, e, i) {
            i = i || {}, this.$("." + this.options.classContent).html(t), i.silent || this.trigger("selected", this, e, t);
        },
        onSelectChanged:function() {
            var t = this.select.find('option[value="' + this.select.val + '"]').html();
            this._setSelected(t, this.select.val);
        },
        onSelected:function(t, e, i, n) {
            this._setSelected(i.html(), e, n), this.select && this.select.val(e);
        },
        onClick:function() {
            return this.isOpen() ? this.close() :this.open(), !1;
        },
        _getValue:function(t) {
            var e = t.attr("value");
            return _.isString(e) ? e :t.text();
        },
        isOpen:function() {
            return this.flyout.isVisible();
        },
        open:function() {
            this.flyout.show(), this.el.addClass("open");
        },
        close:function() {
            this.flyout.hide(), this.el.removeClass("open");
        }
    });
}(jQuery), function(t) {
    Widget.Loader = Backbone.View.extend({
        initialize:function(e) {
            var i = {
                image:Widget.Loader.BLACK,
                location:{
                    position:"absolute",
                    right:5,
                    top:5
                },
                opacity:.4,
                "class":null
            };
            this.options = _.extend(i, e), this.loadingCount = 0, this.loaderCreated = !1, this.el = t(this.el);
        },
        _createLoader:function() {
            this.loaderCreated = !0;
            var e = this, i = (this.options, t("<div/>")), n = t("<img/>");
            if (n[0].src = this.options.image, i.append(n), i.addClass("inline-loader"), i.hide(), 
            this.el.append(i), this.loader = i, "static" == this.el.css("position") && this.el.css("position", "relative"), 
            "center" == this.options.location) {
                var o = new Image();
                o.onload = function() {
                    var t = e.container.height(), i = e.container.width();
                    e.setLocation({
                        position:"absolute",
                        top:t / 2 - o.height / 2,
                        left:i / 2 - o.width / 2
                    }), o.onload = function() {};
                }, o.src = e.options.image;
            } else e.setLocation(e.options.location);
            e.options["class"] && e.loader.addClass(e.options["class"]);
        },
        _show:function() {
            this.loaderCreated || this._createLoader(), this.isLoading() || (this.oldOpacity = this.el.css("opacity"), 
            this.el.css("opacity", "" + this.options.opacity), this.loader.css("display", "block"));
        },
        _hide:function() {
            this.isLoading() && (this.oldOpacity && "1" != this.oldOpacity ? this.el.css("opacity", this.oldOpacity) :this.el.css("opacity", ""), 
            this.loader.css("display", "none"));
        },
        setLocation:function(t) {
            this.options.location = t, this.loader && this.loader.css(t);
        },
        isLoading:function() {
            return this.loader ? "block" == this.loader.css("display") :!1;
        },
        startLoading:function() {
            this.loadingCount++, this.trigger("loading", this, !0), this._show();
        },
        stopLoading:function() {
            this.loadingCount = Math.max(0, this.loadingCount - 1), 0 == this.loadingCount && (this._hide(), 
            this.trigger("loading", this, !1));
        }
    }), Widget.Loader.WHITE = "//127.0.0.1/easel/assets/core/loading_white-05244c9192f6709b1bf659403d771a34.gif", 
    Widget.Loader.BLACK = "//127.0.0.1/easel/assets/core/loading-0b26d5879d45a209d407155db8b9e512.gif";
}(jQuery), function(t) {
    jQuery.elastic = {}, jQuery.fn.extend({
        elastic:function(e) {
            var i = {
                minheight:20
            };
            e = t.extend(i, e);
            var n = e.isSingleton, o = [ "paddingTop", "paddingRight", "paddingBottom", "paddingLeft", "fontSize", "lineHeight", "fontFamily", "width", "fontWeight", "border-top-width", "border-right-width", "border-bottom-width", "border-left-width", "borderTopStyle", "borderTopColor", "borderRightStyle", "borderRightColor", "borderBottomStyle", "borderBottomColor", "borderLeftStyle", "borderLeftColor" ];
            return this.each(function() {
                function i() {
                    f = t.elastic.singletonTwin = jQuery("<div />").css({
                        position:"absolute",
                        display:"none",
                        "word-wrap":"break-word",
                        "white-space":"pre-wrap"
                    }), r();
                    for (var e = o.length; e--; ) f.css(o[e].toString(), g.css(o[e].toString()));
                }
                function r() {
                    f.appendTo(e.parent || g.parent());
                }
                function s() {
                    var t = Math.floor(parseInt(g.width(), 10));
                    f.width() !== t && (f.css({
                        width:t + "px"
                    }), l(!0));
                }
                function a(t, e) {
                    var i = Math.floor(parseInt(t, 10));
                    g.height() !== i && g.css({
                        height:i + "px",
                        overflow:e
                    });
                }
                function l(t) {
                    var e = g.val().replace(/&/g, "&amp;").replace(/ {2}/g, "&nbsp;").replace(/<|>/g, "&gt;").replace(/\n/g, "<br />"), i = f.html().replace(/<br>/gi, "<br />");
                    if ((t || e + "&nbsp;" !== i) && (f.html(e + "&nbsp;"), Math.abs(f.height() + m - g.height()) > 3)) {
                        var n = f.height() + m;
                        n >= v ? a(v, "auto") :_ >= n ? a(_, "hidden") :a(n, "hidden");
                    }
                }
                function c() {
                    setTimeout(l, 250);
                }
                function h() {
                    l();
                }
                function u() {
                    f.height() < v && (f.height() > _ ? g.height(f.height()) :g.height(_));
                }
                function d() {
                    g.bind("keyup change cut paste", h), g.bind("resize", s), g.bind("update", l), g.bind("focus", u), 
                    g.bind("input paste", c), g.destroyElastic = p, t(window).bind("resize", s);
                }
                function p() {
                    g.unbind("keyup change cut paste", h), g.unbind("resize", s), g.unbind("update", l), 
                    g.unbind("focus", u), g.unbind("input paste", c), t(window).unbind("resize", s);
                }
                if ("textarea" !== this.type) return !1;
                var f, g = jQuery(this), m = parseInt(g.css("line-height"), 10) || parseInt(g.css("font-size"), "10"), _ = e.minheight || parseInt(g.css("height"), 10) || 3 * m, v = parseInt(g.css("max-height"), 10) || Number.MAX_VALUE;
                0 > v && (v = Number.MAX_VALUE), n && t.elastic.singletonTextarea ? (t.elastic.singletonTextarea.destroyElastic(), 
                f = t.elastic.singletonTwin, r(), s()) :i(), t.elastic.singletonTextarea = g, d(), 
                g.css({
                    overflow:"hidden"
                }), l();
            });
        }
    });
}(jQuery), function() {
    window.Draw = window.Draw || {};
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    Draw.Growl = function() {
        function e(e) {
            this.show = t(this.show, this), this.hide = t(this.hide, this);
            var i;
            i = {
                el:".viewable-viewport",
                delay:2e3,
                content:{
                    text:"message",
                    title:!1
                },
                position:{
                    my:"top center",
                    at:"top center",
                    adjust:{
                        y:50
                    }
                },
                show:{
                    event:!1,
                    ready:!1,
                    effect:function() {
                        return $(this).stop(0, 1).fadeIn(100);
                    }
                },
                hide:{
                    event:!1,
                    effect:function() {
                        return $(this).stop(0, 1).fadeOut(200);
                    }
                },
                style:{
                    tip:!1,
                    classes:"qtip-dark qtip-rounded qtip-growl"
                }
            }, this.options = _.extend(i, e), this.el = $("<div/>"), $("body").append(this.el), 
            this.el.qtip(this.options), this.qtip = this.el.data("qtip"), this.options.delay && (this.hideDelay = new Debouncer(this.options.delay, this.hide));
        }
        return e.prototype.hide = function() {
            return this.qtip.hide();
        }, e.prototype.show = function(t) {
            return this.qtip.set("content.text", t), this.qtip.show(), this.hideDelay ? this.hideDelay.update() :void 0;
        }, e;
    }(), Draw.Growl._notifiers = {}, Draw.Growl.hide = function() {
        var t;
        return t = Draw.Growl._notifiers.nodel, t ? t.hide() :void 0;
    }, Draw.Growl.notify = function(t, e) {
        var i, n;
        return n = e || "nodel", i = e || null, Draw.Growl._notifiers[n] || (Draw.Growl._notifiers[n] = new Draw.Growl({
            delay:i
        })), Draw.Growl._notifiers[n].show(t), Draw.Growl._notifiers[n];
    };
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    Draw.EventedLoader = function() {
        function e(e) {
            this.onStopLoading = t(this.onStopLoading, this), this.onStartLoading = t(this.onStartLoading, this);
            var i;
            i = {
                location:{
                    position:"absolute",
                    top:5,
                    left:5
                }
            }, this.create(_.extend(i, e));
        }
        return e.prototype.isLoading = function() {
            return this.loader.isLoading();
        }, e.prototype.create = function() {
            return this.loader = new Widget.Loader(this.options), this.loader;
        }, e.prototype.unbindFrom = function(t) {
            return t && t.unbind ? (t.unbind("loading:start", this.onStartLoading), t.unbind("loading:stop", this.onStopLoading)) :void 0;
        }, e.prototype.bindTo = function(t) {
            return t && t.bind ? (t.bind("loading:start", this.onStartLoading), t.bind("loading:stop", this.onStopLoading)) :void 0;
        }, e.prototype.onStartLoading = function() {
            return this.loader ? this.loader.startLoading() :void 0;
        }, e.prototype.onStopLoading = function() {
            return this.loader ? this.loader.stopLoading() :void 0;
        }, e;
    }();
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.DialogBase = function(i) {
        function o() {
            return this.close = e(this.close, this), this.open = e(this.open, this), this.isVisible = e(this.isVisible, this), 
            this.setContent = e(this.setContent, this), this._setupButtons = e(this._setupButtons, this), 
            this._removeButtons = e(this._removeButtons, this), this.onChangeTool = e(this.onChangeTool, this), 
            this.onKeyFocusPrevious = e(this.onKeyFocusPrevious, this), this.onKeyFocusNext = e(this.onKeyFocusNext, this), 
            this.onKeyCancel = e(this.onKeyCancel, this), this.onKeyAccept = e(this.onKeyAccept, this), 
            this.clickTertiary = e(this.clickTertiary, this), this.clickSecondary = e(this.clickSecondary, this), 
            this.clickPrimary = e(this.clickPrimary, this), this.triggerButtonAction = e(this.triggerButtonAction, this), 
            this.defaultButtonBehavior = e(this.defaultButtonBehavior, this), this.resetFocus = e(this.resetFocus, this), 
            this.setFocus = e(this.setFocus, this), this.onKeyCombo = e(this.onKeyCombo, this), 
            this.getId = e(this.getId, this), this.initialize = e(this.initialize, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.idBase = "draw-dialog-", o.prototype.tagName = "div", 
        o.prototype.className = "draw-dialog", Destructor.mixin(o), o.prototype.contentSelector = ".content", 
        o.prototype.viewportSelector = ".viewable-viewport", o.prototype.inputSelector = 'input:not([type="submit"]), select, textarea', 
        o.prototype.focusedInputSelector = 'input:focus:not([type="submit"]), select:focus, textarea:focus, input.focus, select.focus, textarea.focus', 
        o.prototype.buttonTemplate = '<a href="#" class="pull-left btn btn-{{ order }}">{{ text }}</a>', 
        o.prototype.BUTTON_ORDERS = [ "primary", "secondary", "tertiary" ], o.prototype.focusType = "focus_dialog", 
        o.prototype.DEFAULTS = {}, o.prototype.initialize = function(t) {
            var e;
            return this.options = _.extend({}, this.DEFAULTS, t), this.el = $(this.el), this._uid = _.uniqueId(this.idBase), 
            this.el.attr("id", this._uid), this.body = $(this.viewportSelector), this.document = this.options.document || this.model, 
            e = this, this._enterPressed = !1, this.acceptDelay = new Debouncer(500, function() {
                return e._enterPressed = !1;
            }), this.options["class"] && this.el.addClass(this.options["class"]), Draw.DialogBase._cacheObject(this);
        }, o.prototype.destroy = function() {
            return this._unbindTool(this.getTool()), this._unbindPane(this.pane), this.el.remove();
        }, o.prototype.getId = function() {
            return this._uid;
        }, o.prototype.getTool = function() {
            return this.pane && this.pane.getTool ? this.pane.getTool() :null;
        }, o.prototype.onKeyCombo = function(t) {
            return this.pane && this.pane.onKeyCombo ? this.pane.onKeyCombo(t) :!1;
        }, o.prototype.setFocus = function() {
            return this.trigger("focus", this);
        }, o.prototype.resetFocus = function() {
            return this.trigger("unfocus", this);
        }, o.prototype.defaultButtonBehavior = function() {
            return this.hide();
        }, o.prototype.triggerButtonAction = function(t, e) {
            var i, n;
            return this.trigger("button:" + e, this), i = "do" + _.titlize(e) + "Action", this.pane[i] ? (n = this.pane[i](t, this), 
            n !== !1 && this.defaultButtonBehavior()) :this.defaultButtonBehavior(), !1;
        }, o.prototype.clickPrimary = function(t) {
            return this.triggerButtonAction(t, "primary");
        }, o.prototype.clickSecondary = function(t) {
            return this.triggerButtonAction(t, "secondary");
        }, o.prototype.clickTertiary = function(t) {
            return this.triggerButtonAction(t, "tertiary");
        }, o.prototype.onEnterPressed = function() {
            return this._enterPressed = !0, this.acceptDelay.update();
        }, o.prototype.onKeyAccept = function() {
            return this.options.supportsDoubleEnter !== !1 && this._enterPressed ? this.clickPrimary() :(this.pane && this.pane.doAccept && this.pane.doAccept(), 
            this.onEnterPressed());
        }, o.prototype.onKeyCancel = function() {
            return this.clickSecondary();
        }, o.prototype._shiftFocus = function(t) {
            var e, i, n, o, r, s, a;
            return s = this.$(this.inputSelector), a = s.filter(":visible:enabled"), o = this.$(this.focusedInputSelector).filter(":visible"), 
            a.length ? (n = function(t) {
                return o.length && o.eq(0).blur(), s.removeClass("focus"), t.addClass("focus"), 
                t.focus();
            }, o.length ? (i = function() {
                var t, i, n;
                for (n = [], t = 0, i = a.length; i > t; t++) e = a[t], n.push(e);
                return n;
            }(), r = _.indexOf(a, o[0]), r += t, r >= a.length && (r = 0), 0 > r && (r = a.length - 1), 
            n(a.eq(r))) :n(a.eq(0))) :void 0;
        }, o.prototype.onKeyFocusNext = function() {
            return this._shiftFocus(1);
        }, o.prototype.onKeyFocusPrevious = function() {
            return this._shiftFocus(-1);
        }, o.prototype.onChangeTool = function(t, e, i) {
            return this._unbindTool(e), this._bindTool(i);
        }, o.prototype._unbindTool = function(t) {
            return t ? (t.unbind("accept", this.onKeyAccept), t.unbind("cancel", this.onKeyCancel), 
            t.unbind("focus:next", this.onKeyFocusNext), t.unbind("focus:previous", this.onKeyFocusPrevious)) :void 0;
        }, o.prototype._bindTool = function(t) {
            return t ? (t.bind("accept", this.onKeyAccept), t.bind("cancel", this.onKeyCancel), 
            t.bind("focus:next", this.onKeyFocusNext), t.bind("focus:previous", this.onKeyFocusPrevious)) :void 0;
        }, o.prototype._unbindPane = function(t) {
            return t && t.unbind ? (t.unbind("hide", this.hide), t.unbind("show", this.show), 
            t.unbind("focus", this.setFocus), t.unbind("unfocus", this.resetFocus), t.unbind("submit", this.clickPrimary), 
            t.unbind("change:tool", this.onChangeTool)) :void 0;
        }, o.prototype._bindPane = function(t) {
            return t && t.bind ? (t.bind("hide", this.hide), t.bind("show", this.show), t.bind("focus", this.setFocus), 
            t.bind("unfocus", this.resetFocus), t.bind("submit", this.clickPrimary), t.bind("change:tool", this.onChangeTool)) :void 0;
        }, o.prototype._removeButtons = function() {
            var t, e, i, n, o;
            if (this.buttons) {
                for (n = this.buttons, o = [], e = 0, i = n.length; i > e; e++) t = n[e], o.push(t.remove());
                return o;
            }
        }, o.prototype._setupButtons = function() {
            var t, e, i, n, o, r, s, a;
            if (this.footer.html(""), this.buttons = [], i = this.pane && this.pane.buttons ? this.pane.buttons :this.options.buttons, 
            e = this.pane && this.pane.buttonTemplate ? this.pane.buttonTemplate :this.buttonTemplate, 
            !i) return this.footer.hide();
            for (a = this.BUTTON_ORDERS, r = 0, s = a.length; s > r; r++) o = a[r], o in i && (t = $(this.renderTemplate(e, {
                order:o,
                text:i[o]
            })), "primary" === o && t.removeClass("light"), this.footer.append(t), t.click(this["click" + _.titlize(o)]), 
            this.buttons.push(t));
            return n = $('<span class="loader"></span>'), this.footer.append(n), this.loader = new Widget.Loader({
                el:n,
                location:{
                    position:"relative"
                }
            }), this.footer.show();
        }, o.prototype._setContent = function() {}, o.prototype.setContent = function(t) {
            return this._unbindPane(this.pane), this._unbindTool(this.getTool()), this.pane = t, 
            this.pane && this._setContent($(this.pane.el || this.pane)), this._bindPane(this.pane), 
            this._bindTool(this.getTool());
        }, o.prototype.isVisible = function() {
            return this._visible;
        }, o.prototype.open = function() {
            return this.show();
        }, o.prototype.close = function() {
            return this.hide(), !1;
        }, o;
    }(Backbone.View);
}.call(this), function() {
    var t, e, i = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, n = {}.hasOwnProperty, o = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var o in e) n.call(e, o) && (t[o] = e[o]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.Dialog = function(e) {
        function n() {
            return this.hide = i(this.hide, this), this.show = i(this.show, this), this._show = i(this._show, this), 
            this.onDocClick = i(this.onDocClick, this), this.onStopLoading = i(this.onStopLoading, this), 
            this.onStartLoading = i(this.onStartLoading, this), this.render = i(this.render, this), 
            this._setup = i(this._setup, this), this._setContent = i(this._setContent, this), 
            this.setTitle = i(this.setTitle, this), this.getPosition = i(this.getPosition, this), 
            this.setPosition = i(this.setPosition, this), this.onDragging = i(this.onDragging, this), 
            this.onStopDragging = i(this.onStopDragging, this), this.onStartDragging = i(this.onStartDragging, this), 
            this.updateAnchors = i(this.updateAnchors, this), this.undoAnchors = i(this.undoAnchors, this), 
            this.initialize = i(this.initialize, this), t = n.__super__.constructor.apply(this, arguments);
        }
        return o(n, e), n.prototype.idBase = "draw-dialog-", n.prototype.className = "draw-dialog", 
        n.prototype.titleSelector = ".title>span", n.prototype.footerSelector = ".footer", 
        n.prototype.closeSelector = ".close", n.prototype.template = "#dialog-template", 
        n.prototype.events = {
            "click .close":"close"
        }, n.prototype.focusType = "focus_dialog", n.prototype.DEFAULTS = {
            show:!1,
            title:null,
            draggable:!0,
            resizable:!1,
            "class":null,
            delayShow:!0,
            loadingOpacity:.4,
            position:null,
            closeButton:!1,
            buttons:null,
            hideOn:null
        }, n.prototype.initialize = function(t) {
            return n.__super__.initialize.call(this, t), this.render();
        }, n.prototype.undoAnchors = function() {
            return this.position && "right" in this.position && this.el.css("right") && this.el.css({
                right:""
            }), this.position && "bottom" in this.position ? this.el.css({
                bottom:""
            }) :void 0;
        }, n.prototype.updateAnchors = function() {
            return this.position && "left" in this.position && (this.position.left = parseInt(this.el.css("left"))), 
            this.position && "top" in this.position && (this.position.top = parseInt(this.el.css("top"))), 
            this.position && "right" in this.position && (this.position.right = this.body.width() + parseInt(this.body.css("right")) - (parseInt(this.el.css("left")) + this.el.width()), 
            this.position.right += this.body.offset().left, this.el.css({
                left:"",
                right:this.position.right
            })), this.position && "bottom" in this.position ? (this.position.bottom = this.body.height() + parseInt(this.body.css("bottom")) - (parseInt(this.el.css("top")) + this.el.height()), 
            this.position.bottom += this.body.offset().top, this.el.css({
                top:"",
                bottom:this.position.bottom
            })) :void 0;
        }, n.prototype.onStartDragging = function(t) {
            return this.undoAnchors(), this.pane && this.pane.onStartDragging ? this.pane.onStartDragging(t) :void 0;
        }, n.prototype.onStopDragging = function(t) {
            return this.updateAnchors(), this.pane && this.pane.onStopDragging ? this.pane.onStopDragging(t) :void 0;
        }, n.prototype.onDragging = function(t) {
            return this.pane && this.pane.onDragging ? this.pane.onDragging(t) :void 0;
        }, n.prototype.setPosition = function(t) {
            return this.position = t, this.position ? this.el.css(_.extend({
                top:null,
                bottom:null,
                left:null,
                right:null
            }, t)) :void 0;
        }, n.prototype.getPosition = function() {
            return this.position;
        }, n.prototype.setTitle = function(t) {
            return this.title.html(t), t ? this.title.parent().css("display", "") :this.title.parent().css("display", "none");
        }, n.prototype._setContent = function(t) {
            return this.content.html(""), this.content.append(t);
        }, n.prototype._unbindPane = function(t) {
            return n.__super__._unbindPane.call(this, t), t && t.unbind ? (t.unbind("change:title", this.setTitle), 
            t.unbind("loading:start", this.onStartLoading), t.unbind("loading:stop", this.onStopLoading)) :void 0;
        }, n.prototype._bindPane = function(t) {
            return n.__super__._bindPane.call(this, t), t && t.bind ? (t.bind("change:title", this.setTitle), 
            t.bind("loading:start", this.onStartLoading), t.bind("loading:stop", this.onStopLoading)) :void 0;
        }, n.prototype._setup = function() {
            return this.footer = this.$(this.footerSelector), this.content = this.$(this.contentSelector), 
            this.setContent(this.options.pane), this.title = this.$(this.titleSelector), this.setTitle(this.options.title), 
            this.setPosition(this.options.position), this._visible = !0, this.options.show || this.hide(), 
            this.options.closeButton || this.$(this.closeSelector).hide(), this.options.draggable && (this.el.click(function(t) {
                return $(t.target).is(":input, option") || $("input:focus").blur(), !0;
            }), this.el.draggable({
                stop:this.onStopDragging,
                start:this.onStartDragging,
                drag:this.onDragging,
                containment:this.viewportSelector,
                cancel:"input, option, select, .no-move"
            })), this.options.resizable && this.el.resizable({
                stop:this.updateAnchors,
                start:this.undoAnchors,
                handles:""
            }), this._setupButtons();
        }, n.prototype.render = function() {
            return n.__super__.render.call(this, {
                title:""
            }), $("body").append(this.el), this._setup(), this;
        }, n.prototype.onStartLoading = function() {
            return this.loader ? (this.loader.startLoading(), this.pane ? (this._oldOpacity = this.pane.el.css("opacity"), 
            this.pane.el.css("opacity", "" + this.options.loadingOpacity)) :void 0) :void 0;
        }, n.prototype.onStopLoading = function() {
            return this.loader ? (this.loader.stopLoading(), this.pane ? this.pane.el.css("opacity", this._oldOpacity || "") :void 0) :void 0;
        }, n.prototype.onDocClick = function(t) {
            var e;
            return "unfocus" !== this.options.hideOn ? !0 :$(t.target).parents(".no-hide, #" + this.el.attr("id")).length || (e = !0, 
            this.pane && this.pane.onDocClick && (e = this.pane.onDocClick(t)), e === !1) ? void 0 :this.hide();
        }, n.prototype._show = function() {
            return this.el.show(), this._visible = !0, this.trigger("show", this), this.pane && this.pane.onShow ? this.pane.onShow() :void 0;
        }, n.prototype.show = function() {
            return this.options.delayShow || this._show(), this.options.delayShow ? setTimeout(this._show, 1) :void 0;
        }, n.prototype.hide = function() {
            return this.el.hide(), this._visible = !1, this.pane && this.pane.onHide && this.pane.onHide(), 
            this.trigger("hide", this);
        }, n;
    }(Draw.DialogBase), Draw.PersistentDialog = function(t) {
        function n() {
            return this.show = i(this.show, this), e = n.__super__.constructor.apply(this, arguments);
        }
        return o(n, t), n.prototype.show = function() {
            return this._show();
        }, n;
    }(Draw.Dialog);
}.call(this), function() {
    var t, e, i = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, n = {}.hasOwnProperty, o = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var o in e) n.call(e, o) && (t[o] = e[o]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.Flyout = function(e) {
        function n() {
            return this.onShow = i(this.onShow, this), this.onHide = i(this.onHide, this), this.onDocClick = i(this.onDocClick, this), 
            this.unbindDocClick = i(this.unbindDocClick, this), this.bindDocClick = i(this.bindDocClick, this), 
            this.render = i(this.render, this), this.hide = i(this.hide, this), this.show = i(this.show, this), 
            this.setTarget = i(this.setTarget, this), this.setViewport = i(this.setViewport, this), 
            this.setContainer = i(this.setContainer, this), this.setRepositionMethod = i(this.setRepositionMethod, this), 
            this.setContent = i(this.setContent, this), this.initialize = i(this.initialize, this), 
            t = n.__super__.constructor.apply(this, arguments);
        }
        var r;
        return o(n, e), n.prototype.idBase = "flyout", n.prototype.wrapper = '  <div>    <div class="top"></div>    <div class="content"></div>    <div class="footer"></div>  </div>  ', 
        n.prototype.tagName = "div", n.prototype.footerSelector = ".footer", n.prototype.noHideSelector = ".dont-hide-flyout", 
        n.prototype.focusType = "focus_dialog", r = 10, n.prototype.DEFAULTS = {
            pane:null,
            my:"left center",
            at:"right center",
            hideOnUnfocus:!0,
            target:null,
            classes:"ui-flyout"
        }, n.prototype.QTIP_DEFAULTS = {
            content:{
                text:".."
            },
            show:{
                ready:!1,
                delay:0,
                effect:!1,
                autofocus:!1
            },
            hide:{
                event:null,
                delay:0,
                effect:!1
            },
            position:{
                adjust:{
                    method:"shift shift",
                    scroll:!1,
                    x:5
                }
            },
            style:{
                classes:"ui-flyout",
                tip:{
                    width:25,
                    height:10
                }
            },
            events:{},
            zindex:3e3
        }, n.prototype.initialize = function(t) {
            var e;
            return n.__super__.initialize.call(this, t), e = this.getQtipOptions(), this.el.qtip(e), 
            this.qtip = this.el.qtip("api"), this.setContent(this.options.pane), this.setContainer($("body"));
        }, n.prototype.destroy = function() {
            return this.qtip && this.qtip.destroy(), this.el.remove();
        }, n.prototype.$ = function() {
            return this.pane ? this.pane.$.apply(this.pane, arguments) :$(null);
        }, n.prototype.getQtipOptions = function() {
            var t;
            return this._defaults || (t = $.extend(!0, {}, this.QTIP_DEFAULTS), t.position.my = this.options.my, 
            t.position.at = this.options.at, t.position.viewport = $(window), this.options.target && (t.position.target = this.options.target), 
            t.events.hide = this.onHide, t.events.show = this.onShow, this.options.classes && (t.style.classes = this.options.classes), 
            this._defaults = t), this._defaults;
        }, n.prototype.setContent = function(t) {
            return this.pane && t && this.pane.cid && this.pane.cid === t.cid ? void 0 :(this.pane && this.pane.el && this.pane.el.detach(), 
            n.__super__.setContent.call(this, t));
        }, n.prototype.setRepositionMethod = function(t) {
            return this.qtip ? this.qtip.set("position.adjust.method", t) :void 0;
        }, n.prototype.setContainer = function(t) {
            return this.qtip && t ? (this.qtip.set("position.container", t.el || t), this.qtip.set("position.viewport", t.el || t)) :void 0;
        }, n.prototype.setViewport = function(t) {
            return this.qtip && t ? this.qtip.set("position.viewport", t.el || t) :void 0;
        }, n.prototype.setTarget = function(t, e, i) {
            return this.qtip && (t && this.qtip.set("position.target", t.el || t), e && this.qtip.set("position.my", e), 
            i && this.qtip.set("position.at", i), e && i) ? this._adjustPlacement(e, i) :void 0;
        }, n.prototype.show = function(t) {
            return this.qtip ? (t && this.setTarget(t), this.qtip.show()) :void 0;
        }, n.prototype.hide = function() {
            return this.qtip ? this.qtip.hide() :void 0;
        }, n.prototype.render = function(t) {
            return this.qtip ? this.qtip.render(t) :void 0;
        }, n.prototype.bindDocClick = function() {
            return $("body").bind("click", this.onDocClick);
        }, n.prototype.unbindDocClick = function() {
            return $("body").unbind("click", this.onDocClick);
        }, n.prototype.resetFocusOnHide = function() {
            return this.resetFocus();
        }, n.prototype.setFocusOnShow = function() {
            return this.setFocus();
        }, n.prototype.onDocClick = function(t) {
            var e, i;
            if (this.qtip && this.isVisible()) {
                if (this.pane && this.pane.onDocClick && this.pane.onDocClick(t) === !1) return;
                if (i = $(t.target), e = "#" + this._getId() + "," + this.noHideSelector, !i.is(e) && !i.parents(e).length) return this.hide();
            }
        }, n.prototype.onHide = function(t) {
            return this._visible = !1, this.resetFocusOnHide(), this.unbindDocClick(), this.pane && this.pane.onHide && this.pane.onHide(t), 
            this.trigger("hide", this);
        }, n.prototype.onShow = function(t) {
            return this._visible = !0, this.setFocusOnShow(), this.options.hideOnUnfocus && setTimeout(this.bindDocClick, 10), 
            this.qtip && !this._boundEvents && (this.tooltip = this.qtip.elements.tooltip, this._boundEvents = !0), 
            this.pane && this.pane.onShow && this.pane.onShow(t), this.trigger("show", this);
        }, n.prototype._getId = function() {
            return this.qtip && this.qtip.elements && this.qtip.elements.tooltip ? this.qtip.elements.tooltip.attr("id") :"tooltip";
        }, n.prototype._setContent = function(t) {
            var e;
            return this._removeButtons(), e = $($.parseHTML(this.wrapper)), e.find(".content").append(t), 
            this.options["class"] && e.addClass(this.options["class"]), this.footer = e.find(this.footerSelector), 
            this._setupButtons(), this.qtip ? this.qtip.set("content.text", e) :void 0;
        }, n.prototype._adjustPlacement = function(t) {
            var e;
            return e = this.getQtipOptions(), 0 === t.indexOf("top") ? this._adjust(0, r) :0 === t.indexOf("bottom") ? this._adjust(0, -r) :0 === t.indexOf("right") ? this._adjust(-r, 0) :this._adjust(r, 0);
        }, n.prototype._adjust = function(t, e) {
            return this.qtip.set("position.adjust.x", t), this.qtip.set("position.adjust.y", e);
        }, n;
    }(Draw.DialogBase), Draw.DropdownFlyout = function(t) {
        function i() {
            return e = i.__super__.constructor.apply(this, arguments);
        }
        return o(i, t), i.prototype.idBase = "ddflyout", i.prototype.wrapper = '  <div>    <div class="top"></div>    <div class="top-shadow"></div>    <div class="bottom"></div>    <div class="content"></div>  </div>  ', 
        i.prototype.tagName = "div", i.prototype.noHideSelector = ".dont-hide-flyout", i.prototype.focusType = "focus_dialog", 
        i.prototype.DEFAULTS = {
            pane:null,
            my:"top left",
            at:"bottom left",
            hideOnUnfocus:!0
        }, i.prototype.QTIP_DEFAULTS = {
            content:{
                text:".."
            },
            show:{
                ready:!1,
                delay:0,
                effect:!1,
                event:"click"
            },
            hide:{
                event:null,
                delay:0,
                effect:!1
            },
            position:{
                adjust:{
                    method:"shift flip",
                    scroll:!1,
                    x:0
                }
            },
            style:{
                classes:"ui-flyout",
                tip:!1
            },
            events:{}
        }, i.prototype.resetFocusOnHide = function() {}, i.prototype.setFocusOnShow = function() {}, 
        i;
    }(Draw.Flyout);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.ModalDialog = function(i) {
        function o() {
            return this._size = e(this._size, this), this._setupMeasurement = e(this._setupMeasurement, this), 
            this.hide = e(this.hide, this), this.show = e(this.show, this), this.render = e(this.render, this), 
            this.initialize = e(this.initialize, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.tagName = "div", o.prototype.className = "draw-modal-dialog-wrapper", 
        o.prototype.dialogClassName = "modal", o.prototype.footerSelector = ".modal-footer", 
        o.prototype.titleSelector = ".modal-header>h3", o.prototype.template = '<div class="inner">\n  <div class="modal-header">\n    <button type="button" class="close" aria-hidden="true">&times;</button>\n    <h3>{{title}}</h3>\n  </div>\n  <div class="modal-body content"></div>\n  <div class="modal-footer"></div>\n</div>', 
        o.prototype.DEFAULTS = {
            show:!1,
            title:"",
            draggable:!1,
            resizable:!1,
            closeOnEscape:!0,
            maxWidth:1e3,
            minWidth:300,
            supportsDoubleEnter:!1
        }, o.prototype.initialize = function(t) {
            return t = _.extend({}, Draw.ModalDialog.__super__.DEFAULTS, this.DEFAULTS, t), 
            o.__super__.initialize.call(this, t), Draw.G && Draw.G.focus && Draw.G.focus.register(this), 
            Draw.DialogViewTool ? (this.tool = t.tool || new Draw.DialogViewTool(this.document), 
            this._bindTool(this.tool)) :void 0;
        }, o.prototype.getTool = function() {
            return this.tool;
        }, o.prototype.render = function() {
            var t, e;
            return t = this.renderTemplate(this.template, {
                title:""
            }), this.dialog = $("<div/>", {
                "class":this.options.dialogClassName || this.dialogClassName
            }), this.dialog.append(t), this.el.append(this.dialog), $("body").append(this.el), 
            this._setup(), this._setupMeasurement(), this.contentWrapper = $("<div/>", {
                "class":"content-wrapper"
            }), e = this.content.next(), this.content.detach(), this.contentWrapper.insertBefore(e), 
            this.contentWrapper.append(this.content), this;
        }, o.prototype.show = function() {
            return this._size(), Draw.ModalDialog._dialog ? (this._overlay = Draw.ModalDialog._dialog._overlay, 
            Draw.ModalDialog._dialog._overlay = null) :this._overlay = new $.ui.dialog.overlay(this), 
            Draw.ModalDialog._dialog = this, this._show(), this.setFocus();
        }, o.prototype.hide = function() {
            return this._overlay && (this._overlay.destroy(), this._overlay = null), Draw.ModalDialog._dialog && Draw.ModalDialog._dialog.getId() === this.getId() && (Draw.ModalDialog._dialog = null), 
            Draw.ModalDialog.__super__.hide.call(this), this.resetFocus();
        }, o.prototype._unbindPane = function(t) {
            return o.__super__._unbindPane.call(this, t), t && t.unbind ? t.unbind("resize", this._size) :void 0;
        }, o.prototype._bindPane = function(t) {
            return o.__super__._bindPane.call(this, t), t && t.bind ? t.bind("resize", this._size) :void 0;
        }, o.prototype._setupMeasurement = function() {
            var t;
            return this.measure = $('<div><table class="ui-dialog-measure"><tr><td></td></tr></table></div>'), 
            this.measure.css({
                position:"absolute",
                left:"-9999px",
                top:"0",
                width:this.options.maxWidth + "px",
                height:"10px"
            }), t = {
                borderCollapse:"collapse",
                border:"1px solid #000",
                padding:"0",
                margin:"0",
                height:"10px"
            }, this.measure.find("table").css(t), this.measure.find("table td").css(t), this.measure.appendTo(document.body);
        }, o.prototype._size = function() {
            var t, e, i, n;
            return i = this.content.parent(), e = this.measure.find("td"), t = this.measure.find("table"), 
            this.content.css({
                width:"auto",
                height:"auto"
            }), this.content.appendTo(e), n = Math.max(e.width(), this.options.minWidth), this.content.css({
                width:n,
                height:"auto"
            }), this.contentWrapper.append(this.content), this.dialog.css({
                width:n + parseInt(this.content.css("padding-left")) + parseInt(this.content.css("padding-right"))
            });
        }, o;
    }(Draw.Dialog);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.ModalOverlay = function(i) {
        function o() {
            return this.hide = e(this.hide, this), this.show = e(this.show, this), this.render = e(this.render, this), 
            t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.tagName = "div", o.prototype.className = "draw-modal-dialog-wrapper", 
        o.prototype.template = "#modal-overlay-template", o.prototype.footerSelector = ".DISABLE", 
        o.prototype.titleSelector = ".DISABLE", o.prototype.DEFAULTS = {
            show:!1,
            title:"",
            draggable:!1,
            resizable:!1,
            closeOnEscape:!0,
            maxWidth:1e3,
            minWidth:300,
            supportsDoubleEnter:!1
        }, o.prototype._size = function() {}, o.prototype.render = function() {
            var t;
            return t = this.renderTemplate(this.template, {}), this.options.pane.render(), this.el.append(t), 
            $("body").append(this.el), this._setup(), this;
        }, o.prototype.show = function() {
            return o.__super__.show.call(this), this._overlay.$el.addClass("modal-overlay");
        }, o.prototype.hide = function() {
            return o.__super__.hide.call(this);
        }, o;
    }(Draw.ModalDialog);
}.call(this), function() {
    var t, e, i = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, n = {}.hasOwnProperty, o = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var o in e) n.call(e, o) && (t[o] = e[o]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    }, r = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.EmbedPane = function(e) {
        function n() {
            return this.hide = i(this.hide, this), this.show = i(this.show, this), this._onPassThruEvent = i(this._onPassThruEvent, this), 
            this.hasFocus = i(this.hasFocus, this), this.resetFocus = i(this.resetFocus, this), 
            this.setFocus = i(this.setFocus, this), this.doAccept = i(this.doAccept, this), 
            this.doTertiaryAction = i(this.doTertiaryAction, this), this.doSecondaryAction = i(this.doSecondaryAction, this), 
            this.doPrimaryAction = i(this.doPrimaryAction, this), this.getId = i(this.getId, this), 
            this.initialize = i(this.initialize, this), t = n.__super__.constructor.apply(this, arguments);
        }
        return o(n, e), n.prototype.className = "embed-pane", n.prototype.PASS_THRU_EVENTS = !0, 
        n.prototype.initialize = function(t) {
            return this.options = t || {}, this.template = this.options.template || this.template, 
            this.document = this.options.document || this.options.model, this.model = this.options.model || this.document, 
            this.el = $(this.el), this._uid = _.uniqueId("embed-pane-"), this.el.attr("id", this._uid), 
            this._rendered = !1;
        }, n.prototype.getId = function() {
            return this._uid;
        }, n.prototype.setModel = function(t) {
            return this.model = t;
        }, n.prototype.setParent = function(t) {
            return this.parent = t;
        }, n.prototype.doPrimaryAction = function() {}, n.prototype.doSecondaryAction = function() {}, 
        n.prototype.doTertiaryAction = function() {}, n.prototype.doAccept = function() {}, 
        n.prototype.isRendered = function() {
            return this._rendered;
        }, n.prototype.render = function() {
            return this._rendered ? this :(Backbone.View.prototype.render.apply(this, arguments), 
            this._rendered = !0, this);
        }, n.prototype.setFocus = function() {
            return this._focus = !0, this.trigger("focus", this);
        }, n.prototype.resetFocus = function() {
            return this._focus = !1, this.trigger("unfocus", this);
        }, n.prototype.hasFocus = function() {
            return this._focus;
        }, n.prototype._onPassThruEvent = function(t) {
            var e;
            return e = _.toArray(arguments), e.push(this), this.PASS_THRU_EVENTS === !0 || r.call(this.PASS_THRU_EVENTS, t) >= 0 ? this.trigger.apply(this, e) :void 0;
        }, n.prototype.bindPassThruEvents = function(t) {
            return t.bind("all", this._onPassThruEvent);
        }, n.prototype.unbindPassThruEvents = function(t) {
            return t.unbind("all", this._onPassThruEvent);
        }, n.prototype.show = function() {
            return this.trigger("show", this);
        }, n.prototype.hide = function() {
            return this.trigger("hide", this);
        }, n;
    }(Backbone.View), Draw.RenderedEmbedPane = function(t) {
        function i() {
            return e = i.__super__.constructor.apply(this, arguments);
        }
        return o(i, t), i.prototype.initialize = function(t) {
            return i.__super__.initialize.call(this, t), this.render();
        }, i;
    }(Draw.EmbedPane);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.FormEmbedPane = function(i) {
        function o() {
            return this.doPrimaryAction = e(this.doPrimaryAction, this), this.submit = e(this.submit, this), 
            this._onSubmit = e(this._onSubmit, this), this.doAccept = e(this.doAccept, this), 
            this.handleFailure = e(this.handleFailure, this), this.handleForm = e(this.handleForm, this), 
            this.formOptions = e(this.formOptions, this), this.formData = e(this.formData, this), 
            this._setupForm = e(this._setupForm, this), this.initialize = e(this.initialize, this), 
            t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.initialize = function(t) {
            return Draw.FormEmbedPane.__super__.initialize.call(this, t), this.options.noTimeout ? (this.template && this.render(), 
            this._setupForm()) :setTimeout(this._setupForm, 4);
        }, o.prototype._setupForm = function() {
            return this.form = new Forms.Form(_.extend({
                onSubmit:this._onSubmit,
                disableSubmittersOnSubmit:!1
            }, this.formOptions(), this.options, {
                el:$(this.el)
            })), this.form.load(this.formData());
        }, o.prototype.formData = function() {
            return {};
        }, o.prototype.formOptions = function() {
            return {};
        }, o.prototype.handleForm = function() {
            return !0;
        }, o.prototype.handleFailure = function() {
            return !1;
        }, o.prototype.doAccept = function() {
            return this.form.submit();
        }, o.prototype._onSubmit = function() {
            return this.trigger("submit", this), !1;
        }, o.prototype.submit = function() {
            return this.form.submit();
        }, o.prototype.doPrimaryAction = function() {
            return this.form.valid() ? this.handleForm(this.form.val()) :(this.handleFailure(this.form), 
            !1);
        }, o.prototype.show = function() {
            return o.__super__.show.call(this), this.form ? this.form.focusFirst() :void 0;
        }, o;
    }(Draw.EmbedPane);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.TabberPane = function(i) {
        function o() {
            return this.initialize = e(this.initialize, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.tagName = "div", o.prototype.className = "tabber-pane", 
        o.prototype.tabTemplate = "#tab-template", o.prototype.template = "#tabber-pane-template", 
        o.prototype.tabs = ".tabs", o.prototype.panes = ".panes", o.prototype.events = {
            "click .tab":"onClickTab"
        }, o.prototype.initialize = function(t) {
            var e, i, n, r, s, a;
            for (e = n = [], o.__super__.initialize.call(this, _.extend(e, t)), this.render(), 
            this.panes = this.$(this.panes), this.tabs = this.$(this.tabs), this.paneObjects = [], 
            a = this.options.panes, r = 0, s = a.length; s > r; r++) i = a[r], this.addPane(i.name, i.pane);
            return this.options.panes.length ? this.selectPane(this.options.panes[0].pane) :void 0;
        }, o.prototype.onClickTab = function(t) {
            var e;
            return e = $(t.target).attr("rel"), this.selectPane(e), !1;
        }, o.prototype.scrollToTop = function() {
            return this.panes.scrollTop(1), this.panes.chromeScrollBug();
        }, o.prototype.getScrollable = function() {
            return this.$(".scrollable");
        }, o.prototype._bindEvents = function(t) {
            return t.bind("hide", this.hide), t.bind("show", this.show), t.bind("focus", this.setFocus), 
            t.bind("unfocus", this.resetFocus);
        }, o.prototype.addPane = function(t, e) {
            var i;
            return this._bindEvents(e), i = this.renderTemplate(this.tabTemplate, {
                name:t,
                pane:e.getId()
            }), this.tabs.append(i), this.paneObjects.push(e), e.isRendered() || e.render(), 
            this.panes.append(e.el), e.el.hide(), e.setParent ? e.setParent(this) :void 0;
        }, o.prototype.selectPane = function(t) {
            var e;
            return _.isNumber(t) && this.panes.children().eq(t)[0] && (t = this.panes.children().eq(t)[0].id), 
            e = t, t.getId && (e = t.getId()), this.tabs.children().removeClass("selected"), 
            this.tabs.find('[rel="' + e + '"]').addClass("selected"), this.panes.children().hide(), 
            this.panes.find("#" + e).show();
        }, o;
    }(Draw.EmbedPane);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.ContainerPane = function(i) {
        function o() {
            return this.onSubmit = e(this.onSubmit, this), this.initialize = e(this.initialize, this), 
            t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.className = "container-pane", o.prototype.initialize = function(t) {
            var e;
            return e = {
                child:null
            }, o.__super__.initialize.call(this, _.extend(e, t)), this.loader = new Draw.EventedLoader({
                el:this.el
            }), this.bindPane(this.options.child), this.render();
        }, o.prototype.remove = function() {
            return this.unbindPane(this.options.child), o.__super__.remove.call(this);
        }, o.prototype.unbindPane = function(t) {
            return t && t.unbind ? (t.unbind("submit", this.onSubmit), this.unbindPassThruEvents(t), 
            this.loader.unbindFrom(t)) :void 0;
        }, o.prototype.bindPane = function(t) {
            return t && t.bind ? (t.bind("submit", this.onSubmit), this.bindPassThruEvents(t), 
            this.loader.bindTo(t)) :void 0;
        }, o.prototype.onSubmit = function() {
            return this.options.child.doPrimaryAction(null, this);
        }, o.prototype.render = function() {
            return Draw.EmbedPane.prototype.render.apply(this, arguments), this.el.append(this.options.child.el), 
            this;
        }, o.prototype.hide = function() {
            return this.el.hide(), o.__super__.hide.call(this);
        }, o.prototype.show = function() {
            return this.el.show(), o.__super__.show.call(this);
        }, o;
    }(Draw.EmbedPane);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.CrudPane = function(i) {
        function o() {
            return this.onRemove = e(this.onRemove, this), this.onAdd = e(this.onAdd, this), 
            this.onChange = e(this.onChange, this), this.onChangeModelId = e(this.onChangeModelId, this), 
            this.initialize = e(this.initialize, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.tagName = "div", o.prototype.className = "crud-pane", 
        o.prototype.itemTemplate = "#item-template", o.prototype.template = "#items-template", 
        o.prototype.itemsSelector = ".items", o.prototype.noItemsSelector = ".no-items", 
        o.prototype.itemSelector = ".item", o.prototype.editableSelector = ".editable", 
        o.prototype.events = {
            "click .delete":"onClickDelete"
        }, o.prototype.initialize = function(t) {
            var e;
            return e = {
                document:null,
                editable:!0
            }, o.__super__.initialize.call(this, _.extend(e, t)), this._bindEvents(), this.render(), 
            this.views = {}, this.generateItemViews();
        }, o.prototype._bindEvents = function() {
            return this.model.bind("add", this.onAdd), this.model.bind("remove", this.onRemove), 
            this.model.bind("change", this.onChange);
        }, o.prototype._getModelId = function(t) {
            return t.getId ? t.getId() :t.id;
        }, o.prototype.updateItemView = function(t, e) {
            var i, n, o, r;
            n = this.getModelAttributes(t), r = [];
            for (i in n) o = n[i], r.push(e.find("." + i).text(o));
            return r;
        }, o.prototype.getModelAttributes = function(t) {
            return t.get();
        }, o.prototype.getElementId = function(t) {
            return "" + this.getId() + "-" + t;
        }, o.prototype.getModelIdFromElement = function(t) {
            return t.attr("data-id");
        }, o.prototype.getElementFromModelId = function(t) {
            return this.$("#" + this.getElementId(t));
        }, o.prototype.setModelId = function(t, e) {
            return t.attr("data-id", e), t[0] ? t[0].id = this.getElementId(e) :void 0;
        }, o.prototype.modifyForEditable = function(t) {
            return this.options.editable ? void 0 :t.find(this.editableSelector).remove();
        }, o.prototype.generateItemView = function(t) {
            var e, i;
            return e = this.getModelAttributes(t), i = $($.parseHTML(this.renderTemplate(this.itemTemplate, e))), 
            t = t.owner || t, this.setModelId(i, this._getModelId(t)), i.attr("data-cid", t.cid), 
            this.modifyForEditable(i), this.views[t.cid] = i, i || null;
        }, o.prototype.generateItemViews = function() {
            var t, e;
            return e = this, t = this.$(this.itemsSelector), this.model.length && this.$(this.noItemsSelector).hide(), 
            this.model.each(function(i) {
                var n;
                return n = e.generateItemView(i), n ? t.append(n) :void 0;
            });
        }, o.prototype.bindToModel = function(t) {
            return t.bind("change:id", this.onChangeModelId), t.bind("change:eid", this.onChangeModelId);
        }, o.prototype.unbindFromModel = function(t) {
            return t.unbind("change:id", this.onChangeModelId), t.unbind("change:eid", this.onChangeModelId), 
            delete this.views[t.cid];
        }, o.prototype.onChangeModelId = function(t) {
            return t = t.owner || t, this.setModelId(this.views[t.cid], this._getModelId(t));
        }, o.prototype.onChange = function(t) {
            return t = t.owner || t, this.updateItemView(t, this.getElementFromModelId(this._getModelId(t)));
        }, o.prototype.onAdd = function(t) {
            var e;
            return t = t.owner || t, e = this.generateItemView(t), this.bindToModel(t), this.$(this.itemsSelector).prepend(e), 
            this.$(this.noItemsSelector).hide();
        }, o.prototype.onRemove = function(t) {
            return t = t.owner || t, this.unbindFromModel(t), this.$("#" + this.getElementId(this._getModelId(t))).remove(), 
            0 === this.model.length ? this.$(this.noItemsSelector).show() :void 0;
        }, o.prototype.onClickDelete = function(t) {
            var e, i, n;
            return n = $(t.target), e = this.getModelIdFromElement(n.parents(this.itemSelector)), 
            i = this.model.get(e), confirm("Are you sure you want to delete '" + i.get("name") + "'") ? (i.destroy ? i.destroy() :this.model.remove(i), 
            !1) :void 0;
        }, o;
    }(Draw.EmbedPane);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.DropdownEmbedPane = function(i) {
        function o() {
            return this.onHide = e(this.onHide, this), this.onShow = e(this.onShow, this), this.showItem = e(this.showItem, this), 
            this.accept = e(this.accept, this), this.cancel = e(this.cancel, this), this.previous = e(this.previous, this), 
            this.next = e(this.next, this), this.highlightItem = e(this.highlightItem, this), 
            this.onDocClick = e(this.onDocClick, this), this.render = e(this.render, this), 
            this.remove = e(this.remove, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.template = '<div class="dropdown-options"></div>', o.prototype.tagName = "div", 
        o.prototype.className = "dialog-content dropdown", o.prototype.containerSelector = ".fonts-container", 
        o.prototype.events = {
            "click .dropdown-option":"onClickOption",
            "mousedown .dropdown-option":"onMousedownOption"
        }, o.prototype.initialize = function(t) {
            var e;
            return e = {
                classOption:"dropdown-option"
            }, o.__super__.initialize.call(this, _.extend(e, t)), this.document && (this.tool = new Draw.DialogViewTool(this.document), 
            this.tool.bind("down", this.next), this.tool.bind("up", this.previous), this.tool.bind("cancel", this.cancel), 
            this.tool.bind("accept", this.accept)), this.views = [], this.render();
        }, o.prototype.getTool = function() {
            return this.tool;
        }, o.prototype.remove = function() {
            return o.__super__.remove.call(this);
        }, o.prototype.render = function() {
            var t, e, i, n, r;
            for (o.__super__.render.call(this), e = this.$(".dropdown-options"), this.container = e, 
            r = this.options.data, i = 0, n = r.length; n > i; i++) t = r[i], this._appendOption(e, t[0], t[1]);
            return this;
        }, o.prototype._appendOption = function(t, e, i) {
            return t.append($("<div/>", {
                "class":this.options.classOption,
                value:e,
                html:i
            }));
        }, o.prototype.onClickOption = function(t) {
            var e;
            return e = $(t.target), this.selectItem(e.attr("value")), this.hide(), !1;
        }, o.prototype.onMousedownOption = function(t) {
            return t.stopPropagation(), t.preventDefault(), !1;
        }, o.prototype.onDocClick = function() {
            return !0;
        }, o.prototype._getElem = function(t) {
            return this.$("." + this.options.classOption + '[value="' + t + '"]');
        }, o.prototype.highlightItem = function(t, e) {
            return e = e || this._getElem(value), this.$("." + this.options.classOption).removeClass("selected"), 
            e.addClass("selected");
        }, o.prototype.selectIndex = function(t, e) {
            var i;
            return i = this.$("." + this.options.classOption + ":eq(" + t + ")").attr("value"), 
            this.selectItem(i, e);
        }, o.prototype.selectItem = function(t, e) {
            var i;
            return i = this._getElem(t), this.highlightItem(t, i), this._selected = t, this.trigger("selected", this, t, i, e), 
            this.showItem(i);
        }, o.prototype.inc = function(t) {
            var e, i, n, o, r;
            if (this._selected) {
                for (i = 0, n = this.$("." + this.options.classOption), e = o = 0, r = n.length; r >= 0 ? r > o :o > r; e = r >= 0 ? ++o :--o) if (n.eq(e).attr("value") === this._selected) {
                    i = e;
                    break;
                }
                return i = _.clamp(i + t, 0, n.length - 1), this.selectIndex(i);
            }
        }, o.prototype.next = function(t) {
            return t.modifiers.shift || this.inc(1), t.modifiers.shift ? this.inc(10) :void 0;
        }, o.prototype.previous = function(t) {
            return t.modifiers.shift || this.inc(-1), t.modifiers.shift ? this.inc(-10) :void 0;
        }, o.prototype.cancel = function() {
            return this.hide();
        }, o.prototype.accept = function() {
            return this.hide();
        }, o.prototype.showItem = function(t) {
            var e, i, n;
            return i = t.offset(), e = this.container.offset(), i && e ? (n = i.top - e.top, 
            n ? (n = n - this.container.height() / 2 + t.height() / 2 + this.container.scrollTop(), 
            this.container.scrollTop(n)) :void 0) :void 0;
        }, o.prototype.onShow = function() {}, o.prototype.onHide = function() {}, o;
    }(Draw.EmbedPane);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.DropdownTabberPane = function(i) {
        function o() {
            return this.onClickTab = e(this.onClickTab, this), this.initialize = e(this.initialize, this), 
            t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.tagName = "div", o.prototype.className = "tabber-pane", 
        o.prototype.tabTemplate = "#select-tab-template", o.prototype.template = "#select-tabber-pane-template", 
        o.prototype.tabs = ".tabs select", o.prototype.panes = ".panes", o.prototype.events = {}, 
        o.prototype.initialize = function(t) {
            var e;
            return o.__super__.initialize.call(this, t), e = new Widget.DropdownBox({
                el:this.tabs,
                classDropdown:"dropdown-tabber"
            }), e.bind("selected", this.onClickTab);
        }, o.prototype.onClickTab = function(t, e) {
            return this.selectPane(e);
        }, o;
    }(Draw.TabberPane);
}.call(this), function() {
    var t, e = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Backbone.Item.prototype.idAttribute = "eid", Backbone.Model.prototype.getPrevious = function(t) {
        return this._previousAttributes[t];
    }, Backbone.Model.prototype.changedAttributes = function() {
        var t, e, i, n, o, r, s;
        if (t = [], o = this._previousAttributes, n = this.attributes, i = [], n && o) for (i = _.union(_.keys(o), _.keys(n)), 
        r = 0, s = i.length; s > r; r++) e = i[r], e && !_.isEqual(o[e], n[e]) && t.push(e);
        return t;
    }, Backbone.View.prototype.$ = function(t) {
        return $(this.el).find(t);
    }, Backbone.View.prototype.renderTemplate = function(t, i) {
        return _.isFunction(t) ? t(i) :(t && e.call(t, "/") < 0 && (t = $(t).html()), t ? _.bind(_.template(t), this)(i) :"");
    }, Backbone.View.prototype.render = function(t) {
        return this.el = $(this.el), $(this.el).html(this.renderTemplate(this.template, t || this.options)), 
        this;
    }, t = Backbone.sync, Backbone.sync = function(e, i, n) {
        return i instanceof Backbone.Model && (n = _.extend(n, {
            contentType:"application/json"
        }), "read" !== e && (n.data = JSON.stringify(i.toJSON()))), t.call(Backbone, e, i, n);
    }, Backbone.Collection.prototype.refresh || (Backbone.Collection.prototype.refresh = Backbone.Collection.prototype.reset);
}.call(this), function() {
    Draw.Dialog.prototype.buttonTemplate = '<a href="#" class="pull-left btn btn-{{ order }}">{{ text }}</a>';
}.call(this), function() {
    var t = {}.hasOwnProperty, e = function(e, i) {
        function n() {
            this.constructor = e;
        }
        for (var o in i) t.call(i, o) && (e[o] = i[o]);
        return n.prototype = i.prototype, e.prototype = new n(), e.__super__ = i.prototype, 
        e;
    };
    !function() {
        var t, i, n, o, r, s;
        return Forms.IntSuffixBox = function(i) {
            function n() {
                return t = n.__super__.constructor.apply(this, arguments);
            }
            return e(n, i), n.prototype.className = "IntSuffixBox", n.prototype.SUFFIX = "??", 
            n.prototype.PREFIX = "-?[0-9]*", n.prototype.ACCEPT = null, n.prototype.initialize = function(t) {
                return this.ACCEPT = new RegExp("^" + this.PREFIX + "(" + this.SUFFIX + ")?$", "i"), 
                n.__super__.initialize.call(this, t);
            }, n.prototype.val = function(t) {
                return void 0 !== t ? this.el.val(t + this.SUFFIX) :n.__super__.val.call(this);
            }, n;
        }(Forms.IntBox), Forms.PercentBox = function(t) {
            function n() {
                return i = n.__super__.constructor.apply(this, arguments);
            }
            return e(n, t), n.prototype.className = "PercentBox", n.prototype.SUFFIX = "%", 
            n.prototype.defaults = {
                maxDigits:4,
                min:0,
                max:100,
                increment:1,
                largeIncrement:10
            }, n;
        }(Forms.IntSuffixBox), Forms.DegreeBox = function(t) {
            function i() {
                return n = i.__super__.constructor.apply(this, arguments);
            }
            return e(i, t), i.prototype.className = "DegreeBox", i.prototype.initialize = function(t) {
                return this.SUFFIX = String.fromCharCode(186), i.__super__.initialize.call(this, t);
            }, i.prototype.defaults = {
                maxDigits:4,
                min:-360,
                max:360,
                increment:1,
                largeIncrement:10
            }, i;
        }(Forms.IntSuffixBox), Forms.HexColorBox = function(t) {
            function i() {
                return o = i.__super__.constructor.apply(this, arguments);
            }
            return e(i, t), i.prototype.className = "HexColorBox", i.prototype.ACCEPT = /^((#)?[0-9a-f]{0,6}|n|no|non|none)$/i, 
            i.prototype.val = function(t) {
                var e;
                return void 0 === t ? (e = this.el.val().toLowerCase().replace("#", ""), e.length && "n" !== e[0] && this.ACCEPT.test(e) ? e :null) :this.ACCEPT.test(t + "") ? this.el.val(t) :void 0;
            }, i.prototype.increment = function() {}, i;
        }(Forms.LimitedTextBox), Forms.IncrementingTextBox = function(t) {
            function i() {
                return r = i.__super__.constructor.apply(this, arguments);
            }
            return e(i, t), i.prototype.className = "IncrementingTextBox", i.prototype.RE = /(-?[0-9]+)/, 
            i.prototype.increment = function(t) {
                var e, i, n, o;
                return o = this.val(), e = this.RE.exec(o), e && (n = e[1], i = parseInt(n) + t, 
                o = o.replace(n, i), this.val(o)), this.el.change(), this.select();
            }, i;
        }(Forms.LimitedTextBox), Forms.NumberSuffixBox = function(t) {
            function i() {
                return s = i.__super__.constructor.apply(this, arguments);
            }
            return e(i, t), i.prototype.className = "NumberSuffixBox", i.prototype.PREFIX = "(-?[0-9]*(?:\\.[0-9]*)?)", 
            i.prototype.SUFFIX = "[px]*", i.prototype.ACCEPT = null, i.prototype.defaults = {
                maxDigits:7,
                min:0,
                max:5e5,
                format:"decimal(1)",
                suffixOptions:{
                    px:{
                        format:"integer",
                        increment:1,
                        largeIncrement:10
                    },
                    "":{
                        format:"decimal(1)",
                        increment:.1,
                        largeIncrement:1
                    }
                }
            }, i.prototype.initialize = function(t) {
                return this.ACCEPT = new RegExp("^" + this.PREFIX + "(" + this.SUFFIX + ")$", "i"), 
                i.__super__.initialize.call(this, t);
            }, i.prototype.getSuffix = function() {
                var t, e;
                return e = this.val(), t = this.ACCEPT.exec(e), t ? t[2] :"";
            }, i.prototype.getIncrementValue = function(t) {
                var e;
                return e = this.options.suffixOptions[this.getSuffix()], t.shiftKey ? e.largeIncrement :e.increment;
            }, i.prototype.increment = function(t) {
                var e, i, n, o, r;
                return n = this.getSuffix(), o = this.options.suffixOptions[n], r = this.val(), 
                i = r.replace(n, ""), e = parseFloat(r) + t, o.format && (e = Util.DataFormatters.get(o.format, e)), 
                r = r.replace(i, e), this.val(r), this.el.change(), this.select();
            }, i;
        }(Forms.LimitedTextBox);
    }();
}.call(this), function() {
    var t, e = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    $.textNode = function(t) {
        return $(document.createTextNode(t));
    }, t = $.parseHTML, $.parseHTML = function(e) {
        return t.call(this, e.trim());
    }, $.fn.serializeObject = function() {
        var t, e;
        return e = {}, t = this.serializeArray(), $.each(t, function() {
            return void 0 !== e[this.name] ? (e[this.name].push || (e[this.name] = [ e[this.name] ]), 
            e[this.name].push(this.value || "")) :e[this.name] = this.value || "";
        }), e;
    }, $.fn.chromeScrollBug = function() {
        var t, e;
        return t = $(this).css({
            opacity:.9
        }), e = function() {
            return t.css({
                opacity:1
            });
        }, setTimeout(e, 20);
    }, $.fn.outerHtml = function() {
        var t, e, i;
        return i = $(this), t = i.wrap("<p/>"), e = t.parent().html(), t.unwrap(), e;
    }, $.fn.hasAttr = function(t) {
        var e, i, n;
        for (e = i = 0, n = this.length; n >= 0 ? n > i :i > n; e = n >= 0 ? ++i :--i) if (void 0 !== $.attr(this[e], t)) return !0;
        return !1;
    }, $.fn.findAndSelf = function(t, e) {
        var i, n, o, r, s, a, l, c, h, u;
        if (c = $(this), c.length > 1 && (n = function() {
            var t, e, i;
            for (i = [], t = 0, e = c.length; e > t; t++) s = c[t], 3 !== s.nodeType && i.push(s);
            return i;
        }(), n.length !== c.length && (c = $(n))), l = t.split(" "), l.length > 0) {
            if (r = c.is(l[0]), 1 === l.length && r) return c;
            if (r && (t = l.slice(1).join(" ")), o = c.find(t), e) {
                for (a = [], h = 0, u = o.length; u > h; h++) s = o[h], i = $(s), i.is(e) || i.parents(e).length || a.push(s);
                o = $(a);
            }
            return o;
        }
        return c;
    }, $.fn.parentsAndSelf = function(t) {
        var e;
        return e = $(this), e.is(t) ? e :e.parents(t);
    }, $.fn.unwrapSelector = function(t, i) {
        var n, o, r;
        for (o = $(this), n = [], r = function() {
            var r, s, a, l, c, h, u;
            if (l = o.find(t), !l.length) return !1;
            for (a = null, h = 0, u = l.length; u > h; h++) if (s = l[h], e.call(n, s) < 0) {
                a = $(s);
                break;
            }
            return a ? (i && (a.is(i) || a.parents(i).length) ? n.push(a[0]) :(c = a.parent(), 
            r = c.html().replace(a.outerHtml(), a.html()), c.html(r)), !0) :!1;
        }; r(); ) ;
        return o;
    }, $.fn.getCanvasOffset = function() {
        var t, e, i;
        for (t = this, t instanceof jQuery && (t = this[0]), e = 0, i = 0; t && "background" !== t.className; ) e += t.offsetLeft, 
        i += t.offsetTop, t = t.offsetParent;
        return {
            x:e,
            y:i
        };
    }, $.fn.slidingCheckbox = function(t) {
        var e;
        return null == t && (t = {}), e = $.extend({}, t, {
            resizeHandle:!1,
            resizeContainer:!1,
            disabledClass:"sliding-bool-disabled",
            containerClass:"sliding-bool-container",
            labelOnClass:"sliding-bool-on",
            labelOffClass:"sliding-bool-off",
            handleClass:"sliding-bool-handle",
            handleCenterClass:"sliding-bool-center",
            handleRightClass:"sliding-bool-right",
            dataName:"sliding-bool"
        }), this.iphoneStyle(e);
    }, $.fn.isVisible = function() {
        return "none" !== $(this).css("display");
    }, $.fn.isVisibleToUser = function() {
        var t, e;
        return t = $(window).height(), e = $(this).offset().top, e > 0 && t > e;
    }, $.fn.toggler = function(t) {
        var e, i, n;
        return null == t && (t = {}), i = {
            className:"toggler",
            openClass:"toggler-open",
            closedClass:"toggler-closed",
            target:function(t) {
                return t.next();
            }
        }, t = $.extend(i, t), n = function(e) {
            var i;
            return i = _.isFunction(t.target) ? t.target(e) :_.isString(t.target) ? $(t.target) :t.target;
        }, e = function(e, i) {
            var n;
            return n = i.isVisible() && t.openClass || t.closedClass, e.removeClass(t.openClass + " " + t.closedClass), 
            e.addClass(n);
        }, $(this).each(function() {
            var i, o;
            return i = $(this).addClass(t.className), o = n(i), e(i, o);
        }), $(this).click(function() {
            var t, i;
            return t = $(this), i = n(t).toggle(), e(t, i), !1;
        });
    }, $.fn.scrollTo = function(t, e, i) {
        var n;
        return "function" == typeof e && 2 === arguments.length && (i = e, e = t), n = $.extend({
            scrollTarget:t,
            offsetTop:50,
            duration:500,
            easing:"swing"
        }, e), this.each(function() {
            var t, e, o;
            return t = $(this), e = "number" == typeof n.scrollTarget ? n.scrollTarget :$(n.scrollTarget), 
            o = "number" == typeof e ? e :e.offset().top + t.scrollTop() - parseInt(n.offsetTop), 
            t.animate({
                scrollTop:o
            }, parseInt(n.duration), n.easing, function() {
                return "function" == typeof i ? i.call(this) :void 0;
            });
        });
    };
}.call(this), function() {
    window.Selection && (Selection.selectAll = function(t, e) {
        var i, n;
        return t.getSelection ? (i = t.document.createRange(), i.selectNodeContents(e), 
        n = t.getSelection(), n.removeAllRanges(), n.addRange(i)) :(i = t.document.body.createTextRange(), 
        i.moveToElementText(e), i.select());
    });
}.call(this), function() {
    var t, e = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    t = function(t) {
        var e, i;
        return e = {}, i = Array.prototype.slice, function() {
            var n;
            return n = i.call(arguments), n in e ? e[n] :e[n] = t.apply(this, n);
        };
    }, _.mixin({
        extract:function(t, i, n) {
            var o, r, s;
            r = {};
            for (o in t) s = t[o], (!n && e.call(i, o) >= 0 || n && !(e.call(i, o) >= 0)) && (r[o] = s);
            return r;
        },
        omit:function(t) {
            var e, i, n, o;
            e = {}, n = Array.prototype.concat.apply(Array.prototype, Array.prototype.slice.call(arguments, 1));
            for (i in t) o = t[i], _.contains(n, i) || (e[i] = t[i]);
            return e;
        },
        withoutkeys:function(t, e) {
            return _.extract(t, e, !0);
        },
        camelize:t(function(t, e) {
            var i;
            return i = t.replace(/([_-][a-z0-9])/g, function(t) {
                return t.toUpperCase().replace("_", "").replace("-", "");
            }), e && (i = [ i[0].toUpperCase(), i.slice(1) ].join("")), i;
        }),
        variablize:function(t, e, i) {
            var n;
            return null == e && (e = "_"), n = t.replace(/([A-Z])/g, function(t) {
                return e + t.toLowerCase();
            }), i && (n = _.compact(n.split(e)).join(e)), n;
        },
        variablizeTitle:function(t, e) {
            return null == e && (e = "_"), t.replace(/\s+/g, e).toLowerCase();
        },
        titlize:t(function(t) {
            return t = t.replace("_", " "), t.replace(/(\w\S*)/g, function(t) {
                return t.charAt(0).toUpperCase() + t.substr(1);
            });
        }),
        dasherize:function(t, e) {
            var i, n;
            return null == e && (e = "-"), t ? (n = t.trim().toLowerCase().split(/[\s`!@#$%^&*()\[\]{};':"<>,\.\\\/|=_-]+/g), 
            n ? function() {
                var t, e, o;
                for (o = [], t = 0, e = n.length; e > t; t++) i = n[t], i && o.push(i);
                return o;
            }().join(e) :"") :"";
        },
        clamp:t(function(t, e, i) {
            return e > t ? e :t > i ? i :t;
        }),
        uuid:function() {
            return "xxxxxxxxxxxx".replace(/[xy]/g, function() {
                var t;
                return t = 16 * Math.random() | 0, t.toString(16);
            });
        }
    }), _.templateSettings = {
        interpolate:/\{\{(.+?)\}\}/g,
        evaluate:/<-(.+?)->/g
    };
}.call(this), function() {
    _.extend(Util, {
        dataUrlToBase64:function(t) {
            return t.replace("data:image/png;base64,", "");
        },
        base64ToDataUrl:function(t, e) {
            return t.indexOf("data:") >= 0 ? t :(null == e && (e = "image/png"), "data:" + e + ";base64," + t);
        },
        isDataUrl:function(t) {
            return t ? 0 === t.indexOf("data:") :!1;
        },
        split:function(t, e, i) {
            var n, o, r;
            for (r = [], n = 0; (!i || r.length < i - 1) && (o = t.indexOf(e, n), -1 !== o); ) r.push(t.substring(n, o)), 
            n = o + e.length;
            return r.push(t.substring(n)), r;
        },
        getExtension:function(t) {
            var e, i;
            return i = t.match(/\.([^\.]+)$/), e = "", i && (e = i[1]), e;
        },
        replaceAll:function(t, e, i) {
            var n;
            for (n = t.indexOf(e); -1 !== n; ) t = t.replace(e, i), n = t.indexOf(e);
            return t;
        },
        firstDifference:function(t, e) {
            var i, n, o;
            if (t.length !== e.length) return "length";
            for (i = n = 0, o = t.length; o >= 0 ? o > n :n > o; i = o >= 0 ? ++n :--n) if (t[i] !== e[i]) return "" + i + ": " + t[i] + " != " + e[i];
            return null;
        }
    }), Util.DataFormatters.markdown = function(t) {
        return markdown.toHTML(t);
    };
}.call(this);

/*!
 * Paper.js v0.21
 *
 * This file is part of Paper.js, a JavaScript Vector Graphics Library,
 * based on Scriptographer.org and designed to be largely API compatible.
 * http:
 * http:
 *
 * Copyright (c) 2011, Juerg Lehni & Jonathan Puckey
 * http:
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Sun Sep 18 12:51:03 2011 +0200
 *
 ***
 *
 * Bootstrap.js JavaScript Framework.
 * http:
 *
 * Copyright (c) 2006 - 2011 Juerg Lehni
 * http:
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Parse-js
 *
 * A JavaScript tokenizer / parser / generator, originally written in Lisp.
 * Copyright (c) Marijn Haverbeke <marijnh@gmail.com>
 * http:
 *
 * Ported by to JavaScript by Mihai Bazon
 * Copyright (c) 2010, Mihai Bazon <mihai.bazon@gmail.com>
 * http:
 *
 * Modifications and adaptions to browser (c) 2011, Juerg Lehni
 * http:
 *
 * Distributed under the BSD license.
 */
var paper = new function() {
    var Base = new function() {
        function t(t, e, i) {
            if (m) try {
                return delete t[e], m(t, e, i);
            } catch (n) {}
            return (i.get || i.set) && t.__defineGetter__ ? (i.get && t.__defineGetter__(e, i.get), 
            i.set && t.__defineSetter__(e, i.set)) :t[e] = i.value, t;
        }
        function e(t, e) {
            if (_) try {
                return _(t, e);
            } catch (i) {}
            var n = t.__lookupGetter__ && t.__lookupGetter__(e);
            return n ? {
                get:n,
                set:t.__lookupSetter__(e),
                enumerable:!0,
                configurable:!0
            } :h.call(t, e) ? {
                value:t[e],
                enumerable:!0,
                configurable:!0,
                writable:!0
            } :null;
        }
        function i(i, n, o, r, s, a) {
            function c(a, l, c, f) {
                var l = l || (l = e(n, a)) && (l.get ? l :l.value), g = "function" == typeof l, m = l, _ = s || g ? l && l.get ? a in i :i[a] :null;
                if (!f || !g || s && f[a] || (f[a] = function(t) {
                    return t && i[a].apply(t, p.call(arguments, 1));
                }), (c || void 0 !== l && h.call(n, a)) && (!s || !_)) {
                    if (g) {
                        if (_ && /\bthis\.base\b/.test(l)) {
                            var v = r && r[a] == _;
                            m = function() {
                                var i = e(this, "base");
                                t(this, "base", {
                                    value:v ? r[a] :_,
                                    configurable:!0
                                });
                                try {
                                    return l.apply(this, arguments);
                                } finally {
                                    i ? t(this, "base", i) :delete this.base;
                                }
                            }, m.toString = function() {
                                return l.toString();
                            }, m.valueOf = function() {
                                return l.valueOf();
                            };
                        }
                        u && 0 == l.length && (d = a.match(/^(get|is)(([A-Z])(.*))$/)) && u.push([ d[3].toLowerCase() + d[4], d[2] ]);
                    }
                    (!m || g || !m.get && !m.set) && (m = {
                        value:m,
                        writable:!0
                    }), (e(i, a) || {
                        configurable:!0
                    }).configurable && (m.configurable = !0, m.enumerable = o), t(i, a, m);
                }
            }
            var u, d;
            if (n) {
                u = [];
                for (var f in n) h.call(n, f) && !l.test(f) && c(f, null, !0, a);
                c("toString"), c("valueOf");
                for (var g = 0, m = u && u.length; m > g; g++) try {
                    var d = u[g], _ = d[1];
                    c(d[0], {
                        get:i["get" + _] || i["is" + _],
                        set:i["set" + _]
                    }, !0);
                } catch (v) {}
            }
            return i;
        }
        function n(e) {
            var i = function(n) {
                if (a && t(this, "__proto__", {
                    value:e
                }), this.initialize && n !== i.dont) this.initialize.apply(this, arguments); else if (this.initializeAndReturn && n !== i.dont) return this.initializeAndReturn.apply(this, arguments);
            };
            return i.prototype = e, i.toString = function() {
                return (this.prototype.initialize || function() {}).toString();
            }, i;
        }
        function o(t) {
            return t ? "function" != typeof t ? function(e) {
                return e == t;
            } :t :function(t) {
                return t;
            };
        }
        function r(t, e, i, n) {
            try {
                t && (n || void 0 === n && d(t) ? f :g).call(t, o(e), i = i || t);
            } catch (r) {
                if (r !== Base.stop) throw r;
            }
            return i;
        }
        function s(t) {
            return r(t, function(t, e) {
                this[e] = t;
            }, new t.constructor());
        }
        var a = !this.__proto__, l = /^(statics|generics|preserve|enumerable|prototype|__proto__|toString|valueOf)$/, c = Object.prototype, h = a ? function(t) {
            return "__proto__" !== t && this.hasOwnProperty(t);
        } :c.hasOwnProperty, u = c.toString, c = Array.prototype, d = Array.isArray = Array.isArray || function(t) {
            return "[object Array]" === u.call(t);
        }, p = c.slice, f = c.forEach = c.forEach || function(t, e) {
            for (var i = 0, n = this.length; n > i; i++) t.call(e, this[i], i, this);
        }, g = function(t, e) {
            for (var i in this) this.hasOwnProperty(i) && t.call(e, this[i], i, this);
        }, m = Object.defineProperty, _ = Object.getOwnPropertyDescriptor;
        return i(function() {}, {
            inject:function(t) {
                if (t) {
                    var e = this.prototype, n = e.__proto__ && e.__proto__.constructor, o = 1 == t.statics ? t :t.statics;
                    o != t && i(e, t, t.enumerable, n && n.prototype, t.preserve, t.generics && this), 
                    i(this, o, !0, n, t.preserve);
                }
                for (var r = 1, s = arguments.length; s > r; r++) this.inject(arguments[r]);
                return this;
            },
            extend:function() {
                var e = new this(this.dont), o = n(e);
                return t(e, "constructor", {
                    value:o,
                    writable:!0,
                    configurable:!0
                }), o.dont = {}, i(o, this, !0), arguments.length ? this.inject.apply(o, arguments) :o;
            }
        }, !0).inject({
            has:h,
            each:r,
            inject:function() {
                for (var t = 0, e = arguments.length; e > t; t++) i(this, arguments[t]);
                return this;
            },
            extend:function() {
                var t = new (n(this))();
                return t.inject.apply(t, arguments);
            },
            each:function(t, e) {
                return r(this, t, e);
            },
            clone:function() {
                return s(this);
            },
            statics:{
                each:r,
                clone:s,
                define:t,
                describe:e,
                iterator:o,
                has:function(t, e) {
                    return h.call(t, e);
                },
                type:function(t) {
                    return (t || 0 === t) && (t._type || typeof t) || null;
                },
                check:function(t) {
                    return !(!t && 0 !== t);
                },
                pick:function() {
                    for (var t = 0, e = arguments.length; e > t; t++) if (void 0 !== arguments[t]) return arguments[t];
                    return null;
                },
                stop:{}
            }
        });
    }();
    this.Base = Base.inject({
        generics:!0,
        clone:function() {
            return new this.constructor(this);
        },
        toString:function() {
            return "{ " + Base.each(this, function(t, e) {
                if ("_" != e.charAt(0)) {
                    var i = typeof t;
                    this.push(e + ": " + ("number" === i ? Base.formatNumber(t) :"string" === i ? "'" + t + "'" :t));
                }
            }, []).join(", ") + " }";
        },
        statics:{
            read:function(t, e, i) {
                var e = e || 0, i = i || t.length - e, n = t[e];
                return n instanceof this || this.prototype._readNull && null == n && 1 >= i ? n :(n = new this(this.dont), 
                init = n.initialize || n.initializeAndReturn, init.apply(n, e > 0 || i < t.length ? Array.prototype.slice.call(t, e, e + i) :t) || n);
            },
            readAll:function(t, e) {
                for (var i, n = [], o = e || 0, r = t.length; r > o; o++) n.push(Array.isArray(i = t[o]) ? this.read(i, 0) :this.read(t, o, 1));
                return n;
            },
            splice:function(t, e, i, n) {
                var o = e && e.length, r = void 0 === i;
                i = r ? t.length :i;
                for (var s = 0; o > s; s++) e[s]._index = i + s;
                if (r) return t.push.apply(t, e), [];
                var a = [ i, n ];
                e && a.push.apply(a, e);
                for (var l = t.splice.apply(t, a), s = 0, c = l.length; c > s; s++) delete l[s]._index;
                for (var s = i + o, c = t.length; c > s; s++) t[s]._index = s;
                return l;
            },
            merge:function() {
                return Base.each(arguments, function(t) {
                    Base.each(t, function(t, e) {
                        this[e] = t;
                    }, this);
                }, new Base(), !0);
            },
            capitalize:function(t) {
                return t.replace(/\b[a-z]/g, function(t) {
                    return t.toUpperCase();
                });
            },
            camelize:function(t) {
                return t.replace(/-(\w)/g, function(t, e) {
                    return e.toUpperCase();
                });
            },
            hyphenate:function(t) {
                return t.replace(/[a-z][A-Z0-9]|[0-9][a-zA-Z]|[A-Z]{2}[a-z]/g, function(t) {
                    return t.charAt(0) + "-" + t.substring(1);
                }).toLowerCase();
            },
            formatNumber:function(t) {
                return (Math.round(1e5 * t) / 1e5).toString();
            }
        }
    });
    var PaperScope = this.PaperScope = Base.extend({
        initialize:function(t) {
            paper = this, this.view = null, this.views = [], this.project = null, this.projects = [], 
            this.tool = null, this.tools = [], this._id = t && (t.getAttribute("id") || t.src) || "paperscope-" + PaperScope._id++, 
            t && t.setAttribute("id", this._id), PaperScope._scopes[this._id] = this;
        },
        version:.21,
        evaluate:function(t) {
            var e = PaperScript.evaluate(t, this);
            return View.updateFocus(), e;
        },
        install:function(t) {
            var e = this;
            Base.each([ "project", "view", "tool" ], function(i) {
                Base.define(t, i, {
                    configurable:!0,
                    writable:!0,
                    get:function() {
                        return e[i];
                    }
                });
            });
            for (var i in this) /^(version|_id|load)/.test(i) || i in t || (t[i] = this[i]);
        },
        setup:function(t) {
            paper = this, this.project = new Project(), t && (this.view = new View(t));
        },
        clear:function() {
            for (var t = this.projects.length - 1; t >= 0; t--) this.projects[t].remove();
            for (var t = this.views.length - 1; t >= 0; t--) this.views[t].remove();
            for (var t = this.tools.length - 1; t >= 0; t--) this.tools[t].remove();
        },
        remove:function() {
            this.clear(), delete PaperScope._scopes[this._id];
        },
        _needsRedraw:function() {
            if (!this._redrawNotified) {
                for (var t = this.views.length - 1; t >= 0; t--) this.views[t]._redrawNeeded = !0;
                this._redrawNotified = !0;
            }
        },
        statics:{
            _scopes:{},
            _id:0,
            get:function(t) {
                return "object" == typeof t && (t = t.getAttribute("id")), this._scopes[t] || null;
            },
            each:function(t) {
                Base.each(this._scopes, t);
            }
        }
    }), PaperScopeItem = Base.extend({
        initialize:function(t) {
            this._scope = paper, this._index = this._scope[this._list].push(this) - 1, (t || !this._scope[this._reference]) && this.activate();
        },
        activate:function() {
            return this._scope ? (this._scope[this._reference] = this, !0) :!1;
        },
        remove:function() {
            return null == this._index ? !1 :(Base.splice(this._scope[this._list], null, this._index, 1), 
            this._scope[this._reference] == this && (this._scope[this._reference] = null), this._scope = null, 
            !0);
        }
    }), Point = this.Point = Base.extend({
        initialize:function(t, e) {
            void 0 !== e ? (this.x = t, this.y = e) :void 0 !== t ? null == t ? this.x = this.y = 0 :void 0 !== t.x ? (this.x = t.x, 
            this.y = t.y) :void 0 !== t.width ? (this.x = t.width, this.y = t.height) :Array.isArray(t) ? (this.x = t[0], 
            this.y = t.length > 1 ? t[1] :t[0]) :void 0 !== t.angle ? (this.x = t.length, this.y = 0, 
            this.setAngle(t.angle)) :this.x = this.y = "number" == typeof t ? t :0 :this.x = this.y = 0;
        },
        set:function(t, e) {
            return this.x = t, this.y = e, this;
        },
        clone:function() {
            return Point.create(this.x, this.y);
        },
        toString:function() {
            var t = Base.formatNumber;
            return "{ x: " + t(this.x) + ", y: " + t(this.y) + " }";
        },
        add:function(t) {
            return t = Point.read(arguments), Point.create(this.x + t.x, this.y + t.y);
        },
        subtract:function(t) {
            return t = Point.read(arguments), Point.create(this.x - t.x, this.y - t.y);
        },
        multiply:function(t) {
            return t = Point.read(arguments), Point.create(this.x * t.x, this.y * t.y);
        },
        divide:function(t) {
            return t = Point.read(arguments), Point.create(this.x / t.x, this.y / t.y);
        },
        modulo:function(t) {
            return t = Point.read(arguments), Point.create(this.x % t.x, this.y % t.y);
        },
        negate:function() {
            return Point.create(-this.x, -this.y);
        },
        transform:function(t) {
            return t ? t._transformPoint(this) :this;
        },
        getDistance:function(t, e) {
            t = Point.read(arguments);
            var i = t.x - this.x, n = t.y - this.y, o = i * i + n * n;
            return e ? o :Math.sqrt(o);
        },
        getLength:function() {
            var t = this.x * this.x + this.y * this.y;
            return arguments[0] ? t :Math.sqrt(t);
        },
        setLength:function(t) {
            if (this.isZero()) {
                var e = this._angle || 0;
                this.set(Math.cos(e) * t, Math.sin(e) * t);
            } else {
                var i = t / this.getLength();
                0 == i && this.getAngle(), this.set(this.x * i, this.y * i);
            }
            return this;
        },
        normalize:function(t) {
            void 0 === t && (t = 1);
            var e = this.getLength(), i = 0 != e ? t / e :0, n = Point.create(this.x * i, this.y * i);
            return n._angle = this._angle, n;
        },
        getAngle:function() {
            return 180 * this.getAngleInRadians(arguments[0]) / Math.PI;
        },
        setAngle:function(t) {
            if (t = this._angle = t * Math.PI / 180, !this.isZero()) {
                var e = this.getLength();
                this.set(Math.cos(t) * e, Math.sin(t) * e);
            }
            return this;
        },
        getAngleInRadians:function() {
            if (void 0 === arguments[0]) return null == this._angle && (this._angle = Math.atan2(this.y, this.x)), 
            this._angle;
            var t = Point.read(arguments), e = this.getLength() * t.getLength();
            return 0 == e ? 0/0 :Math.acos(this.dot(t) / e);
        },
        getAngleInDegrees:function() {
            return this.getAngle(arguments[0]);
        },
        getQuadrant:function() {
            return this.x >= 0 ? this.y >= 0 ? 1 :4 :this.y >= 0 ? 2 :3;
        },
        getDirectedAngle:function(t) {
            return t = Point.read(arguments), 180 * Math.atan2(this.cross(t), this.dot(t)) / Math.PI;
        },
        rotate:function(t, e) {
            t = t * Math.PI / 180;
            var i = e ? this.subtract(e) :this, n = Math.sin(t), o = Math.cos(t);
            return i = Point.create(i.x * o - i.y * n, i.y * o + i.x * n), e ? i.add(e) :i;
        },
        equals:function(t) {
            return t = Point.read(arguments), this.x == t.x && this.y == t.y;
        },
        isInside:function(t) {
            return t.contains(this);
        },
        isClose:function(t, e) {
            return this.getDistance(t) < e;
        },
        isColinear:function(t) {
            return this.cross(t) < Numerical.TOLERANCE;
        },
        isOrthogonal:function(t) {
            return this.dot(t) < Numerical.TOLERANCE;
        },
        isZero:function() {
            return 0 == this.x && 0 == this.y;
        },
        isNaN:function() {
            return isNaN(this.x) || isNaN(this.y);
        },
        dot:function(t) {
            return t = Point.read(arguments), this.x * t.x + this.y * t.y;
        },
        cross:function(t) {
            return t = Point.read(arguments), this.x * t.y - this.y * t.x;
        },
        project:function(t) {
            if (t = Point.read(arguments), t.isZero()) return Point.create(0, 0);
            var e = this.dot(t) / t.dot(t);
            return Point.create(t.x * e, t.y * e);
        },
        statics:{
            create:function(t, e) {
                var i = new Point(Point.dont);
                return i.x = t, i.y = e, i;
            },
            min:function(t, e) {
                return t = Point.read(arguments, 0, 1), e = Point.read(arguments, 1, 1), Point.create(Math.min(t.x, e.x), Math.min(t.y, e.y));
            },
            max:function(t, e) {
                return t = Point.read(arguments, 0, 1), e = Point.read(arguments, 1, 1), Point.create(Math.max(t.x, e.x), Math.max(t.y, e.y));
            },
            random:function() {
                return Point.create(Math.random(), Math.random());
            }
        }
    }, new function() {
        return Base.each([ "round", "ceil", "floor", "abs" ], function(t) {
            var e = Math[t];
            this[t] = function() {
                return Point.create(e(this.x), e(this.y));
            };
        }, {});
    }()), LinkedPoint = Point.extend({
        set:function(t, e, i) {
            return this._x = t, this._y = e, i || this._owner[this._setter](this), this;
        },
        getX:function() {
            return this._x;
        },
        setX:function(t) {
            this._x = t, this._owner[this._setter](this);
        },
        getY:function() {
            return this._y;
        },
        setY:function(t) {
            this._y = t, this._owner[this._setter](this);
        },
        statics:{
            create:function(t, e, i, n, o) {
                if (o) return Point.create(i, n);
                var r = new LinkedPoint(LinkedPoint.dont);
                return r._x = i, r._y = n, r._owner = t, r._setter = e, r;
            }
        }
    }), Size = this.Size = Base.extend({
        initialize:function(t, e) {
            void 0 !== e ? (this.width = t, this.height = e) :void 0 !== t ? null == t ? this.width = this.height = 0 :void 0 !== t.width ? (this.width = t.width, 
            this.height = t.height) :void 0 !== t.x ? (this.width = t.x, this.height = t.y) :Array.isArray(t) ? (this.width = t[0], 
            this.height = t.length > 1 ? t[1] :t[0]) :this.width = this.height = "number" == typeof t ? t :0 :this.width = this.height = 0;
        },
        toString:function() {
            var t = Base.formatNumber;
            return "{ width: " + t(this.width) + ", height: " + t(this.height) + " }";
        },
        set:function(t, e) {
            return this.width = t, this.height = e, this;
        },
        clone:function() {
            return Size.create(this.width, this.height);
        },
        add:function(t) {
            return t = Size.read(arguments), Size.create(this.width + t.width, this.height + t.height);
        },
        subtract:function(t) {
            return t = Size.read(arguments), Size.create(this.width - t.width, this.height - t.height);
        },
        multiply:function(t) {
            return t = Size.read(arguments), Size.create(this.width * t.width, this.height * t.height);
        },
        divide:function(t) {
            return t = Size.read(arguments), Size.create(this.width / t.width, this.height / t.height);
        },
        modulo:function(t) {
            return t = Size.read(arguments), Size.create(this.width % t.width, this.height % t.height);
        },
        negate:function() {
            return Size.create(-this.width, -this.height);
        },
        equals:function(t) {
            return t = Size.read(arguments), this.width == t.width && this.height == t.height;
        },
        isZero:function() {
            return 0 == this.width && 0 == this.height;
        },
        isNaN:function() {
            return isNaN(this.width) || isNaN(this.height);
        },
        statics:{
            create:function(t, e) {
                return new Size(Size.dont).set(t, e);
            },
            min:function(t, e) {
                return Size.create(Math.min(t.width, e.width), Math.min(t.height, e.height));
            },
            max:function(t, e) {
                return Size.create(Math.max(t.width, e.width), Math.max(t.height, e.height));
            },
            random:function() {
                return Size.create(Math.random(), Math.random());
            }
        }
    }, new function() {
        return Base.each([ "round", "ceil", "floor", "abs" ], function(t) {
            var e = Math[t];
            this[t] = function() {
                return Size.create(e(this.width), e(this.height));
            };
        }, {});
    }()), LinkedSize = Size.extend({
        set:function(t, e, i) {
            return this._width = t, this._height = e, i || this._owner[this._setter](this), 
            this;
        },
        getWidth:function() {
            return this._width;
        },
        setWidth:function(t) {
            this._width = t, this._owner[this._setter](this);
        },
        getHeight:function() {
            return this._height;
        },
        setHeight:function(t) {
            this._height = t, this._owner[this._setter](this);
        },
        statics:{
            create:function(t, e, i, n, o) {
                if (o) return Size.create(i, n);
                var r = new LinkedSize(LinkedSize.dont);
                return r._width = i, r._height = n, r._owner = t, r._setter = e, r;
            }
        }
    }), Rectangle = this.Rectangle = Base.extend({
        initialize:function(t, e, i, n) {
            if (4 == arguments.length) this.x = t, this.y = e, this.width = i, this.height = n; else if (2 == arguments.length) if (e && void 0 !== e.x) {
                var o = Point.read(arguments, 0, 1), r = Point.read(arguments, 1, 1);
                this.x = o.x, this.y = o.y, this.width = r.x - o.x, this.height = r.y - o.y, this.width < 0 && (this.x = r.x, 
                this.width = -this.width), this.height < 0 && (this.y = r.y, this.height = -this.height);
            } else {
                var s = Point.read(arguments, 0, 1), a = Size.read(arguments, 1, 1);
                this.x = s.x, this.y = s.y, this.width = a.width, this.height = a.height;
            } else t ? (this.x = t.x || 0, this.y = t.y || 0, this.width = t.width || 0, this.height = t.height || 0) :this.x = this.y = this.width = this.height = 0;
        },
        set:function(t, e, i, n) {
            return this.x = t, this.y = e, this.width = i, this.height = n, this;
        },
        getPoint:function() {
            return LinkedPoint.create(this, "setPoint", this.x, this.y, arguments[0]);
        },
        setPoint:function(t) {
            return t = Point.read(arguments), this.x = t.x, this.y = t.y, this;
        },
        getSize:function() {
            return LinkedSize.create(this, "setSize", this.width, this.height, arguments[0]);
        },
        setSize:function(t) {
            return t = Size.read(arguments), this.width = t.width, this.height = t.height, this;
        },
        getLeft:function() {
            return this.x;
        },
        setLeft:function(t) {
            return this.width -= t - this.x, this.x = t, this;
        },
        getTop:function() {
            return this.y;
        },
        setTop:function(t) {
            return this.height -= t - this.y, this.y = t, this;
        },
        getRight:function() {
            return this.x + this.width;
        },
        setRight:function(t) {
            return this.width = t - this.x, this;
        },
        getBottom:function() {
            return this.y + this.height;
        },
        setBottom:function(t) {
            return this.height = t - this.y, this;
        },
        getCenterX:function() {
            return this.x + .5 * this.width;
        },
        setCenterX:function(t) {
            return this.x = t - .5 * this.width, this;
        },
        getCenterY:function() {
            return this.y + .5 * this.height;
        },
        setCenterY:function(t) {
            return this.y = t - .5 * this.height, this;
        },
        getCenter:function() {
            return LinkedPoint.create(this, "setCenter", this.getCenterX(), this.getCenterY(), arguments[0]);
        },
        setCenter:function(t) {
            return t = Point.read(arguments), this.setCenterX(t.x).setCenterY(t.y);
        },
        equals:function(t) {
            return t = Rectangle.read(arguments), this.x == t.x && this.y == t.y && this.width == t.width && this.height == t.height;
        },
        isEmpty:function() {
            return 0 == this.width || 0 == this.height;
        },
        toString:function() {
            var t = Base.formatNumber;
            return "{ x: " + t(this.x) + ", y: " + t(this.y) + ", width: " + t(this.width) + ", height: " + t(this.height) + " }";
        },
        contains:function(t) {
            return t && void 0 !== t.width || 4 == (Array.isArray(t) ? t :arguments).length ? this._containsRectangle(Rectangle.read(arguments)) :this._containsPoint(Point.read(arguments));
        },
        _containsPoint:function(t) {
            var e = t.x, i = t.y;
            return e >= this.x && i >= this.y && e <= this.x + this.width && i <= this.y + this.height;
        },
        _containsRectangle:function(t) {
            var e = t.x, i = t.y;
            return e >= this.x && i >= this.y && e + t.width <= this.x + this.width && i + t.height <= this.y + this.height;
        },
        intersects:function(t) {
            return t = Rectangle.read(arguments), t.x + t.width > this.x && t.y + t.height > this.y && t.x < this.x + this.width && t.y < this.y + this.height;
        },
        intersect:function(t) {
            t = Rectangle.read(arguments);
            var e = Math.max(this.x, t.x), i = Math.max(this.y, t.y), n = Math.min(this.x + this.width, t.x + t.width), o = Math.min(this.y + this.height, t.y + t.height);
            return Rectangle.create(e, i, n - e, o - i);
        },
        unite:function(t) {
            t = Rectangle.read(arguments);
            var e = Math.min(this.x, t.x), i = Math.min(this.y, t.y), n = Math.max(this.x + this.width, t.x + t.width), o = Math.max(this.y + this.height, t.y + t.height);
            return Rectangle.create(e, i, n - e, o - i);
        },
        include:function(t) {
            t = Point.read(arguments);
            var e = Math.min(this.x, t.x), i = Math.min(this.y, t.y), n = Math.max(this.x + this.width, t.x), o = Math.max(this.y + this.height, t.y);
            return Rectangle.create(e, i, n - e, o - i);
        },
        expand:function(t, e) {
            return void 0 === e && (e = t), Rectangle.create(this.x - t / 2, this.y - e / 2, this.width + t, this.height + e);
        },
        scale:function(t, e) {
            return this.expand(this.width * t - this.width, this.height * (void 0 === e ? t :e) - this.height);
        },
        statics:{
            create:function(t, e, i, n) {
                return new Rectangle(Rectangle.dont).set(t, e, i, n);
            }
        }
    }, new function() {
        return Base.each([ [ "Top", "Left" ], [ "Top", "Right" ], [ "Bottom", "Left" ], [ "Bottom", "Right" ], [ "Left", "Center" ], [ "Top", "Center" ], [ "Right", "Center" ], [ "Bottom", "Center" ] ], function(t, e) {
            var i = t.join(""), n = /^[RL]/.test(i);
            e >= 4 && (t[1] += n ? "Y" :"X");
            var o = t[n ? 0 :1], r = t[n ? 1 :0], s = "get" + o, a = "get" + r, l = "set" + o, c = "set" + r, h = "get" + i, u = "set" + i;
            this[h] = function() {
                return LinkedPoint.create(this, u, this[s](), this[a](), arguments[0]);
            }, this[u] = function(t) {
                return t = Point.read(arguments), this[l](t.x)[c](t.y);
            };
        }, {});
    }()), LinkedRectangle = Rectangle.extend({
        set:function(t, e, i, n, o) {
            return this._x = t, this._y = e, this._width = i, this._height = n, o || this._owner[this._setter](this), 
            this;
        },
        statics:{
            create:function(t, e, i, n, o, r) {
                var s = new LinkedRectangle(LinkedRectangle.dont).set(i, n, o, r, !0);
                return s._owner = t, s._setter = e, s;
            }
        }
    }, new function() {
        var t = Rectangle.prototype;
        return Base.each([ "x", "y", "width", "height" ], function(t) {
            var e = Base.capitalize(t), i = "_" + t;
            this["get" + e] = function() {
                return this[i];
            }, this["set" + e] = function(t) {
                this[i] = t, !this._dontNotify && this._owner && this._owner[this._setter](this);
            };
        }, Base.each([ "Point", "Size", "Center", "Left", "Top", "Right", "Bottom", "CenterX", "CenterY", "TopLeft", "TopRight", "BottomLeft", "BottomRight", "LeftCenter", "TopCenter", "RightCenter", "BottomCenter" ], function(e) {
            var i = "set" + e;
            this[i] = function() {
                return this._dontNotify = !0, t[i].apply(this, arguments), delete this._dontNotify, 
                this._owner[this._setter](this), this;
            };
        }, {}));
    }()), Matrix = this.Matrix = Base.extend({
        initialize:function(t) {
            var e = arguments.length, i = !0;
            if (6 == e ? this.set.apply(this, arguments) :1 == e ? t instanceof Matrix ? this.set(t._a, t._c, t._b, t._d, t._tx, t._ty) :Array.isArray(t) ? this.set.apply(this, t) :i = !1 :0 == e ? (this._a = this._d = 1, 
            this._c = this._b = this._tx = this._ty = 0) :i = !1, !i) throw new Error("Unsupported matrix parameters");
        },
        clone:function() {
            return Matrix.create(this._a, this._c, this._b, this._d, this._tx, this._ty);
        },
        set:function(t, e, i, n, o, r) {
            return this._a = t, this._c = e, this._b = i, this._d = n, this._tx = o, this._ty = r, 
            this;
        },
        scale:function(t, e, i) {
            return arguments.length < 2 || "object" == typeof e ? (i = Point.read(arguments, 1), 
            e = t) :i = Point.read(arguments, 2), i && this.translate(i), this._a *= t, this._c *= t, 
            this._b *= e, this._d *= e, i && this.translate(i.negate()), this;
        },
        translate:function(t) {
            t = Point.read(arguments);
            var e = t.x, i = t.y;
            return this._tx += e * this._a + i * this._b, this._ty += e * this._c + i * this._d, 
            this;
        },
        rotate:function() {
            return this.concatenate(Matrix.getRotateInstance.apply(Matrix, arguments));
        },
        shear:function(t, e, i) {
            arguments.length < 2 || "object" == typeof e ? (i = Point.read(arguments, 1), e = t) :i = Point.read(arguments, 2), 
            i && this.translate(i);
            var n = this._a, o = this._c;
            return this._a += e * this._b, this._c += e * this._d, this._b += t * n, this._d += t * o, 
            i && this.translate(i.negate()), this;
        },
        toString:function() {
            var t = Base.formatNumber;
            return "[[" + [ t(this._a), t(this._b), t(this._tx) ].join(", ") + "], [" + [ t(this._c), t(this._d), t(this._ty) ].join(", ") + "]]";
        },
        getValues:function() {
            return [ this._a, this._c, this._b, this._d, this._tx, this._ty ];
        },
        concatenate:function(t) {
            var e = this._a, i = this._b, n = this._c, o = this._d;
            return this._a = t._a * e + t._c * i, this._b = t._b * e + t._d * i, this._tx += t._tx * e + t._ty * i, 
            this._c = t._a * n + t._c * o, this._d = t._b * n + t._d * o, this._ty += t._tx * n + t._ty * o, 
            this;
        },
        preConcatenate:function(t) {
            var e = this._a, i = this._b, n = this._c, o = this._d, r = this._tx, s = this._ty;
            return this._a = t._a * e + t._b * n, this._c = t._c * e + t._d * n, this._b = t._a * i + t._b * o, 
            this._d = t._c * i + t._d * o, this._tx = t._a * r + t._b * s + t._tx, this._ty = t._c * r + t._d * s + t._ty, 
            this;
        },
        transform:function(t, e, i, n, o) {
            return arguments.length < 5 ? this._transformPoint(Point.read(arguments)) :this._transformCoordinates(t, e, i, n, o);
        },
        _transformPoint:function(t, e, i) {
            var n = t.x, o = t.y;
            return e || (e = new Point(Point.dont)), e.set(n * this._a + o * this._b + this._tx, n * this._c + o * this._d + this._ty, i);
        },
        _transformCoordinates:function(t, e, i, n, o) {
            for (var r = e, s = n, a = e + 2 * o; a > r; ) {
                var l = t[r++], c = t[r++];
                i[s++] = l * this._a + c * this._b + this._tx, i[s++] = l * this._c + c * this._d + this._ty;
            }
            return i;
        },
        _transformCorners:function(t) {
            var e = t.x, i = t.y, n = e + t.width, o = i + t.height, r = [ e, i, n, i, n, o, e, o ];
            return this._transformCoordinates(r, 0, r, 0, 4);
        },
        _transformBounds:function(t) {
            for (var e = this._transformCorners(t), i = e.slice(0, 2), n = e.slice(0), o = 2; 8 > o; o++) {
                var r = e[o], s = 1 & o;
                r < i[s] ? i[s] = r :r > n[s] && (n[s] = r);
            }
            return Rectangle.create(i[0], i[1], n[0] - i[0], n[1] - i[1]);
        },
        getDeterminant:function() {
            return this._a * this._d - this._b * this._c;
        },
        getTranslation:function() {
            return new Point(this._tx, this._ty);
        },
        getScaling:function() {
            var t = Math.sqrt(this._a * this._a + this._c * this._c), e = Math.sqrt(this._b * this._b + this._d * this._d);
            return new Point(this._a < 0 ? -t :t, this._b < 0 ? -e :e);
        },
        getRotation:function() {
            var t = -Math.atan2(this._b, this._d), e = Math.atan2(this._c, this._a);
            return Math.abs(t - e) < Numerical.TOLERANCE ? 180 * t / Math.PI :void 0;
        },
        isIdentity:function() {
            return 1 == this._a && 0 == this._c && 0 == this._b && 1 == this._d && 0 == this._tx && 0 == this._ty;
        },
        isInvertible:function() {
            var t = this.getDeterminant();
            return isFinite(t) && 0 != t && isFinite(this._tx) && isFinite(this._ty);
        },
        isSingular:function() {
            return !this.isInvertible();
        },
        createInverse:function() {
            var t = this.getDeterminant();
            return isFinite(t) && 0 != t && isFinite(this._tx) && isFinite(this._ty) ? Matrix.create(this._d / t, -this._c / t, -this._b / t, this._a / t, (this._b * this._ty - this._d * this._tx) / t, (this._c * this._tx - this._a * this._ty) / t) :null;
        },
        createShiftless:function() {
            return Matrix.create(this._a, this._c, this._b, this._d, 0, 0);
        },
        setToScale:function(t, e) {
            return this.set(t, 0, 0, e, 0, 0);
        },
        setToTranslation:function(t) {
            return t = Point.read(arguments), this.set(1, 0, 0, 1, t.x, t.y);
        },
        setToShear:function(t, e) {
            return this.set(1, e, t, 1, 0, 0);
        },
        setToRotation:function(t, e) {
            e = Point.read(arguments, 1), t = t * Math.PI / 180;
            var i = e.x, n = e.y, o = Math.cos(t), r = Math.sin(t);
            return this.set(o, r, -r, o, i - i * o + n * r, n - i * r - n * o);
        },
        applyToContext:function(t, e) {
            return t[e ? "setTransform" :"transform"](this._a, this._c, this._b, this._d, this._tx, this._ty), 
            this;
        },
        statics:{
            create:function(t, e, i, n, o, r) {
                return new Matrix(Matrix.dont).set(t, e, i, n, o, r);
            },
            getScaleInstance:function() {
                var t = new Matrix();
                return t.setToScale.apply(t, arguments);
            },
            getTranslateInstance:function() {
                var t = new Matrix();
                return t.setToTranslation.apply(t, arguments);
            },
            getShearInstance:function() {
                var t = new Matrix();
                return t.setToShear.apply(t, arguments);
            },
            getRotateInstance:function() {
                var t = new Matrix();
                return t.setToRotation.apply(t, arguments);
            }
        }
    }, new function() {
        return Base.each({
            scaleX:"_a",
            scaleY:"_d",
            translateX:"_tx",
            translateY:"_ty",
            shearX:"_b",
            shearY:"_c"
        }, function(t, e) {
            e = Base.capitalize(e), this["get" + e] = function() {
                return this[t];
            }, this["set" + e] = function(e) {
                this[t] = e;
            };
        }, {});
    }()), Line = this.Line = Base.extend({
        initialize:function(t, e, i) {
            t = Point.read(arguments, 0, 1), e = Point.read(arguments, 1, 1), 3 == arguments.length ? (this.point = t, 
            this.vector = e.subtract(t), this.infinite = i) :(this.point = t, this.vector = e, 
            this.infinite = !0);
        },
        intersect:function(t) {
            var e = this.vector.cross(t.vector);
            if (Math.abs(e) <= Numerical.EPSILON) return null;
            var i = t.point.subtract(this.point), n = i.cross(t.vector) / e, o = i.cross(this.vector) / e;
            return (this.infinite || n >= 0 && 1 >= n) && (t.infinite || o >= 0 && 1 >= o) ? this.point.add(this.vector.multiply(n)) :null;
        },
        getSide:function(t) {
            var e = this.vector, i = t.subtract(this.point), n = i.cross(e);
            return 0 == n && (n = i.dot(e), n > 0 && (n = i.subtract(e).dot(e), 0 > n && (n = 0))), 
            0 > n ? -1 :n > 0 ? 1 :0;
        },
        getDistance:function(t) {
            var e = this.vector.y / this.vector.x, i = this.point.y - e * this.point.x, n = Math.abs(t.y - e * t.x - i) / Math.sqrt(e * e + 1);
            return this.infinite ? n :Math.min(n, t.getDistance(this.point), t.getDistance(this.point.add(this.vector)));
        }
    }), Project = this.Project = PaperScopeItem.extend({
        _list:"projects",
        _reference:"project",
        initialize:function() {
            this.base(!0), this._currentStyle = new PathStyle(), this._selectedItems = {}, this._selectedItemCount = 0, 
            this.layers = [], this.symbols = [], this.activeLayer = new Layer();
        },
        _needsRedraw:function() {
            this._scope && this._scope._needsRedraw();
        },
        getCurrentStyle:function() {
            return this._currentStyle;
        },
        setCurrentStyle:function(t) {
            this._currentStyle.initialize(t);
        },
        getIndex:function() {
            return this._index;
        },
        getSelectedItems:function() {
            var t = [];
            return Base.each(this._selectedItems, function(e) {
                t.push(e);
            }), t;
        },
        _updateSelection:function(t) {
            t._selected ? (this._selectedItemCount++, this._selectedItems[t.getId()] = t) :(this._selectedItemCount--, 
            delete this._selectedItems[t.getId()]);
        },
        selectAll:function() {
            for (var t = 0, e = this.layers.length; e > t; t++) this.layers[t].setSelected(!0);
        },
        deselectAll:function() {
            for (var t in this._selectedItems) this._selectedItems[t].setSelected(!1);
        },
        hitTest:function(t, e) {
            e = HitResult.getOptions(t, e), t = e.point;
            for (var i = this.layers.length - 1; i >= 0; i--) {
                var n = this.layers[i].hitTest(t, e);
                if (n) return n;
            }
            return null;
        },
        draw:function(t) {
            t.save();
            for (var e = {
                offset:new Point(0, 0)
            }, i = 0, n = this.layers.length; n > i; i++) Item.draw(this.layers[i], t, e);
            t.restore(), this._selectedItemCount > 0 && (t.save(), t.strokeWidth = 1, t.strokeStyle = t.fillStyle = "#009dec", 
            e = {
                selection:!0
            }, Base.each(this._selectedItems, function(i) {
                i.draw(t, e);
            }), t.restore());
        }
    }), Symbol = this.Symbol = Base.extend({
        initialize:function(t) {
            this.project = paper.project, this.project.symbols.push(this), this.setDefinition(t), 
            this._instances = {};
        },
        _changed:function(t) {
            Base.each(this._instances, function(e) {
                e._changed(t);
            });
        },
        getDefinition:function() {
            return this._definition;
        },
        setDefinition:function(t) {
            t._parentSymbol && (t = t.clone()), this._definition && delete this._definition._parentSymbol, 
            this._definition = t, t.remove(), t.setPosition(new Point()), t._parentSymbol = this, 
            this._changed(Change.GEOMETRY);
        },
        place:function(t) {
            return new PlacedSymbol(this, t);
        },
        clone:function() {
            return new Symbol(this._definition.clone());
        }
    }), ChangeFlag = {
        APPEARANCE:1,
        HIERARCHY:2,
        GEOMETRY:4,
        STROKE:8,
        STYLE:16,
        ATTRIBUTE:32,
        CONTENT:64,
        PIXELS:128,
        CLIPPING:256,
        SEGMENT:512
    }, Change = this.Change = {
        HIERARCHY:ChangeFlag.HIERARCHY | ChangeFlag.APPEARANCE,
        GEOMETRY:ChangeFlag.GEOMETRY | ChangeFlag.APPEARANCE,
        SEGMENT:ChangeFlag.GEOMETRY | ChangeFlag.SEGMENT | ChangeFlag.APPEARANCE,
        STROKE:ChangeFlag.STROKE | ChangeFlag.STYLE | ChangeFlag.APPEARANCE,
        STYLE:ChangeFlag.STYLE | ChangeFlag.APPEARANCE,
        ATTRIBUTE:ChangeFlag.ATTRIBUTE | ChangeFlag.APPEARANCE,
        CONTENT:ChangeFlag.CONTENT | ChangeFlag.APPEARANCE,
        PIXELS:ChangeFlag.PIXELS | ChangeFlag.APPEARANCE
    }, Item = this.Item = Base.extend({
        initialize:function() {
            this._id = ++Item._id, this._project || paper.project.activeLayer.addChild(this), 
            this._style = PathStyle.create(this), this.setStyle(this._project.getCurrentStyle());
        },
        _changed:function(t) {
            t & ChangeFlag.GEOMETRY && (delete this._bounds, delete this._position), t & ChangeFlag.APPEARANCE && this._project._needsRedraw(), 
            this._parentSymbol && this._parentSymbol._changed(t);
        },
        getId:function() {
            return this._id;
        },
        getName:function() {
            return this._name;
        },
        setName:function(t) {
            if (this._name && this._removeFromNamed(), this._name = t || void 0, t) {
                var e = this._parent._children, i = this._parent._namedChildren;
                (i[t] = i[t] || []).push(this), e[t] = this;
            }
            this._changed(ChangeFlag.ATTRIBUTE);
        },
        getPosition:function() {
            var t = this._position || (this._position = this.getBounds().getCenter());
            return LinkedPoint.create(this, "setPosition", t._x, t._y);
        },
        setPosition:function() {
            this.translate(Point.read(arguments).subtract(this.getPosition()));
        },
        getStyle:function() {
            return this._style;
        },
        setStyle:function(t) {
            this._style.initialize(t);
        },
        statics:{
            _id:0
        }
    }, new function() {
        return Base.each([ "locked", "visible", "blendMode", "opacity", "guide" ], function(t) {
            var e = Base.capitalize(t), t = "_" + t;
            this["get" + e] = function() {
                return this[t];
            }, this["set" + e] = function(e) {
                e != this[t] && (this[t] = e, this._changed("_locked" === t ? ChangeFlag.ATTRIBUTE :Change.ATTRIBUTE));
            };
        }, {});
    }(), {
        _locked:!1,
        _visible:!0,
        _blendMode:"normal",
        _opacity:1,
        _guide:!1,
        isSelected:function() {
            if (this._children) for (var t = 0, e = this._children.length; e > t; t++) if (this._children[t].isSelected()) return !0;
            return this._selected;
        },
        setSelected:function(t) {
            if (this._children) for (var e = 0, i = this._children.length; i > e; e++) this._children[e].setSelected(t); else (t = !!t) != this._selected && (this._selected = t, 
            this._project._updateSelection(this), this._changed(Change.ATTRIBUTE));
        },
        _selected:!1,
        isFullySelected:function() {
            if (this._children && this._selected) {
                for (var t = 0, e = this._children.length; e > t; t++) if (!this._children[t].isFullySelected()) return !1;
                return !0;
            }
            return this._selected;
        },
        setFullySelected:function(t) {
            if (this._children) for (var e = 0, i = this._children.length; i > e; e++) this._children[e].setFullySelected(t);
            this.setSelected(t);
        },
        isClipMask:function() {
            return this._clipMask;
        },
        setClipMask:function(t) {
            this._clipMask != (t = !!t) && (this._clipMask = t, t && (this.setFillColor(null), 
            this.setStrokeColor(null)), this._changed(Change.ATTRIBUTE), this._parent && this._parent._changed(ChangeFlag.CLIPPING));
        },
        _clipMask:!1,
        getProject:function() {
            return this._project;
        },
        _setProject:function(t) {
            if (this._project != t && (this._project = t, this._children)) for (var e = 0, i = this._children.length; i > e; e++) this._children[e]._setProject(t);
        },
        getLayer:function() {
            for (var t = this; t = t._parent; ) if (t instanceof Layer) return t;
            return null;
        },
        getParent:function() {
            return this._parent;
        },
        getChildren:function() {
            return this._children;
        },
        setChildren:function(t) {
            this.removeChildren(), this.addChildren(t);
        },
        getFirstChild:function() {
            return this._children && this._children[0] || null;
        },
        getLastChild:function() {
            return this._children && this._children[this._children.length - 1] || null;
        },
        getNextSibling:function() {
            return this._parent && this._parent._children[this._index + 1] || null;
        },
        getPreviousSibling:function() {
            return this._parent && this._parent._children[this._index - 1] || null;
        },
        getIndex:function() {
            return this._index;
        },
        clone:function() {
            return this._clone(new this.constructor());
        },
        _clone:function(t) {
            if (t.setStyle(this._style), this._children) for (var e = 0, i = this._children.length; i > e; e++) t.addChild(this._children[e].clone());
            for (var n = [ "_locked", "_visible", "_blendMode", "_opacity", "_clipMask", "_guide" ], e = 0, i = n.length; i > e; e++) {
                var o = n[e];
                this.hasOwnProperty(o) && (t[o] = this[o]);
            }
            return t.setSelected(this._selected), this._name && t.setName(this._name), t;
        },
        copyTo:function(t) {
            var e = this.clone();
            return t.layers ? t.activeLayer.addChild(e) :t.addChild(e), e;
        },
        rasterize:function(t) {
            var e = this.getStrokeBounds(), i = (t || 72) / 72, n = CanvasProvider.getCanvas(e.getSize().multiply(i)), o = n.getContext("2d"), r = new Matrix().scale(i).translate(-e.x, -e.y);
            r.applyToContext(o), this.draw(o, {});
            var s = new Raster(n);
            return s.setBounds(e), s;
        },
        hitTest:function(t, e, i) {
            function n(n, o) {
                var a = r["get" + o]().transform(i);
                return t.getDistance(a) < e.tolerance ? new HitResult(n, s, {
                    name:Base.hyphenate(o),
                    point:a
                }) :void 0;
            }
            if (e = HitResult.getOptions(t, e), t = e.point, !this._children && !this.getRoughBounds(i).expand(e.tolerance)._containsPoint(t)) return null;
            if (!(!e.center && !e.bounds || this instanceof Layer && !this._parent)) {
                var o, r = this.getBounds(), s = this, a = [ "TopLeft", "TopRight", "BottomLeft", "BottomRight", "LeftCenter", "TopCenter", "RightCenter", "BottomCenter" ];
                if (e.center && (o = n("center", "Center"))) return o;
                if (e.bounds) for (var l = 0; 8 > l; l++) if (o = n("bounds", a[l])) return o;
            }
            return this._children || !(e.guides && !this._guide || e.selected && !this._selected) ? this._hitTest(t, e, i) :null;
        },
        _hitTest:function(t, e, i) {
            if (this._children) for (var n = this._children.length - 1; n >= 0; n--) {
                var o = this._children[n].hitTest(t, e, i);
                if (o) return o;
            }
        },
        addChild:function(t) {
            return this.insertChild(void 0, t);
        },
        insertChild:function(t, e) {
            return this._children && e && e._remove ? (e._remove(!1, !0), Base.splice(this._children, [ e ], t, 0), 
            e._parent = this, e._setProject(this._project), e._name && e.setName(e._name), this._changed(Change.HIERARCHY), 
            !0) :!1;
        },
        addChildren:function(t) {
            for (var e = 0, i = t && t.length; i > e; e++) this.insertChild(void 0, t[e]);
        },
        insertChildren:function(t, e) {
            for (var i = 0, n = e && e.length; n > i; i++) this.insertChild(t, e[i]) && t++;
        },
        insertAbove:function(t) {
            return t._parent && t._parent.insertChild(t._index + 1, this);
        },
        insertBelow:function(t) {
            return t._parent && t._parent.insertChild(t._index - 1, this);
        },
        appendTop:function(t) {
            return this.addChild(t);
        },
        appendBottom:function(t) {
            return this.insertChild(0, t);
        },
        moveAbove:function(t) {
            return this.insertAbove(t);
        },
        moveBelow:function(t) {
            return this.insertBelow(t);
        },
        _removeFromNamed:function() {
            var t = this._parent._children, e = this._parent._namedChildren, i = this._name, n = e[i], o = n ? n.indexOf(this) :-1;
            -1 != o && (t[i] == this && delete t[i], n.splice(o, 1), n.length ? t[i] = n[n.length - 1] :delete e[i]);
        },
        _remove:function(t, e) {
            return this._parent ? (t && this.setSelected(!1), this._name && this._removeFromNamed(), 
            Base.splice(this._parent._children, null, this._index, 1), e && this._parent._changed(Change.HIERARCHY), 
            this._parent = null, !0) :!1;
        },
        remove:function() {
            return this._remove(!0, !0);
        },
        removeChildren:function(t, e) {
            if (!this._children) return null;
            t = t || 0, e = Base.pick(e, this._children.length);
            for (var i = this._children.splice(t, e - t), n = i.length - 1; n >= 0; n--) i[n]._remove(!0, !1);
            return i.length > 0 && this._changed(Change.HIERARCHY), i;
        },
        reverseChildren:function() {
            if (this._children) {
                this._children.reverse();
                for (var t = 0, e = this._children.length; e > t; t++) this._children[t]._index = t;
                this._changed(Change.HIERARCHY);
            }
        },
        isEditable:function() {
            for (var t = this; t; ) {
                if (!t._visible || t._locked) return !1;
                t = t._parent;
            }
            return !0;
        },
        _getOrder:function(t) {
            function e(t) {
                var e = [];
                do e.unshift(t); while (t = t._parent);
                return e;
            }
            for (var i = e(this), n = e(t), o = 0, r = Math.min(i.length, n.length); r > o; o++) if (i[o] != n[o]) return i[o]._index < n[o]._index ? 1 :-1;
            return 0;
        },
        hasChildren:function() {
            return this._children && this._children.length > 0;
        },
        isAbove:function(t) {
            return -1 == this._getOrder(t);
        },
        isBelow:function(t) {
            return 1 == this._getOrder(t);
        },
        isParent:function(t) {
            return this._parent == t;
        },
        isChild:function(t) {
            return t && t._parent == this;
        },
        isDescendant:function(t) {
            for (var e = this; e = e._parent; ) if (e == t) return !0;
            return !1;
        },
        isAncestor:function(t) {
            return t ? t.isDescendant(this) :!1;
        },
        isGroupedWith:function(t) {
            for (var e = this._parent; e; ) {
                if (e._parent && (e instanceof Group || e instanceof CompoundPath) && t.isDescendant(e)) return !0;
                e = e._parent;
            }
            return !1;
        },
        _getBounds:function(t, e, i) {
            var n = this._children;
            if (!n || 0 == n.length) return new Rectangle();
            for (var o = 1/0, r = -o, s = o, a = r, l = 0, c = n.length; c > l; l++) {
                var h = n[l];
                if (h._visible) {
                    var u = h[t](i[0]);
                    o = Math.min(u.x, o), s = Math.min(u.y, s), r = Math.max(u.x + u.width, r), a = Math.max(u.y + u.height, a);
                }
            }
            var d = Rectangle.create(o, s, r - o, a - s);
            return "getBounds" == t ? this._createBounds(d) :d;
        },
        _createBounds:function(t) {
            return t ? LinkedRectangle.create(this, "setBounds", t.x, t.y, t.width, t.height) :new Rectangle(0, 0, 0, 0);
        },
        getBounds:function() {
            return this._getBounds("getBounds", "_bounds", arguments);
        },
        setBounds:function(t) {
            t = Rectangle.read(arguments);
            var e = this.getBounds(), i = new Matrix(), n = t.getCenter();
            i.translate(n), (t.width != e.width || t.height != e.height) && i.scale(0 != e.width ? t.width / e.width :1, 0 != e.height ? t.height / e.height :1), 
            n = e.getCenter(), i.translate(-n.x, -n.y), this.transform(i);
        },
        getStrokeBounds:function() {
            return this._getBounds("getStrokeBounds", "_strokeBounds", arguments);
        },
        getHandleBounds:function() {
            return this._getBounds("getHandleBounds", "_handleBounds", arguments);
        },
        getRoughBounds:function() {
            return this._getBounds("getRoughBounds", "_roughBounds", arguments);
        },
        scale:function(t, e, i) {
            return (arguments.length < 2 || "object" == typeof e) && (i = e, e = t), this.transform(new Matrix().scale(t, e, i || this.getPosition()));
        },
        translate:function() {
            var t = new Matrix();
            return this.transform(t.translate.apply(t, arguments));
        },
        rotate:function(t, e) {
            return this.transform(new Matrix().rotate(t, e || this.getPosition()));
        },
        shear:function(t, e, i) {
            return (arguments.length < 2 || "object" == typeof e) && (i = e, e = t), this.transform(new Matrix().shear(t, e, i || this.getPosition()));
        },
        transform:function(t, e) {
            var i = this._bounds, n = this._position, o = this._children;
            this._transform && (this._transform(t, e), this._changed(Change.GEOMETRY)), i && t.getRotation() % 90 === 0 ? (this._bounds = this._createBounds(t._transformBounds(i)), 
            this._position = this._bounds.getCenter()) :n && (this._position = t._transformPoint(n, n, !0));
            for (var r = 0, s = o && o.length; s > r; r++) o[r].transform(t, e);
            return this;
        },
        fitBounds:function(t, e) {
            t = Rectangle.read(arguments);
            var i = this.getBounds(), n = i.height / i.width, o = t.height / t.width, r = (e ? n > o :o > n) ? t.width / i.width :t.height / i.height, s = (t.getCenter().subtract(i.getCenter()), 
            new Rectangle(new Point(), new Size(i.width * r, i.height * r)));
            s.setCenter(t.getCenter()), this.setBounds(s);
        },
        toString:function() {
            return (this.constructor._name || "Item") + (this._name ? " '" + this._name + "'" :" @" + this._id);
        },
        statics:{
            drawSelectedBounds:function(t, e, i) {
                var n = i._transformCorners(t);
                e.beginPath();
                for (var o = 0; 8 > o; o++) e[0 == o ? "moveTo" :"lineTo"](n[o], n[++o]);
                e.closePath(), e.stroke();
                for (var o = 0; 8 > o; o++) e.beginPath(), e.rect(n[o] - 2, n[++o] - 2, 4, 4), e.fill();
            },
            draw:function(t, e, i) {
                if (t._visible && 0 != t._opacity) {
                    var n, o;
                    if ("normal" !== t._blendMode || t._opacity < 1 && (!t._segments || t.getFillColor() && t.getStrokeColor())) {
                        var r = t.getStrokeBounds() || t.getBounds();
                        if (!r.width || !r.height) return;
                        var s = r.getTopLeft().floor(), a = r.getSize().ceil().add(new Size(1, 1));
                        n = CanvasProvider.getCanvas(a), o = e, e = n.getContext("2d"), e.save(), e.translate(-s.x, -s.y);
                    }
                    var l;
                    if (s && (l = i.offset, i.offset = s), t.draw(e, i), s && (i.offset = l), n) {
                        if (e.restore(), "normal" !== t._blendMode) {
                            var c = s.subtract(i.offset);
                            BlendMode.process(t._blendMode, e, o, t._opacity, c);
                        } else o.save(), o.globalAlpha = t._opacity, o.drawImage(n, s.x, s.y), o.restore();
                        CanvasProvider.returnCanvas(n);
                    }
                }
            }
        }
    }, new function() {
        function t(t) {
            for (var e in t) {
                var n = t[e];
                n.remove();
                for (var o in i) {
                    var r = i[o];
                    r != t && r[n.getId()] && delete r[n.getId()];
                }
            }
        }
        function e(e) {
            var n = "onMouse" + Base.capitalize(e), o = paper.tool[n];
            if (!o || !o._installed) {
                var r = {};
                r[n] = function(n) {
                    "up" === e && (i.drag = {}), t(i[e]), i[e] = {}, this.base && this.base(n);
                }, paper.tool.inject(r), paper.tool[n]._installed = !0;
            }
        }
        var i = {
            down:{},
            drag:{},
            up:{},
            move:{}
        };
        return Base.each([ "down", "drag", "up", "move" ], function(t) {
            this["removeOn" + Base.capitalize(t)] = function() {
                var e = {};
                return e[t] = !0, this.removeOn(e);
            };
        }, {
            removeOn:function(t) {
                for (var n in t) t[n] && (i[n][this.getId()] = this, "drag" === n && e("up"), e(n));
                return this;
            }
        });
    }()), Group = this.Group = Item.extend({
        initialize:function(t) {
            this.base(), this._children = [], this._namedChildren = {}, this.addChildren(t && Array.isArray(t) && "object" == typeof t[0] ? t :arguments);
        },
        _changed:function(t) {
            Item.prototype._changed.call(this, t), t & (ChangeFlag.HIERARCHY | ChangeFlag.CLIPPING) && delete this._clipItem;
        },
        _getClipItem:function() {
            if (void 0 !== this._clipItem) return this._clipItem;
            for (var t = 0, e = this._children.length; e > t; t++) {
                var i = this._children[t];
                if (i._clipMask) return this._clipItem = i;
            }
            return this._clipItem = null;
        },
        isClipped:function() {
            return !!this._getClipItem();
        },
        setClipped:function(t) {
            var e = this.getFirstChild();
            return e && e.setClipMask(t), this;
        },
        draw:function(t, e) {
            var i = this._getClipItem();
            i && Item.draw(i, t, e);
            for (var n = 0, o = this._children.length; o > n; n++) {
                var r = this._children[n];
                r != i && Item.draw(r, t, e);
            }
        }
    }), Layer = this.Layer = Group.extend({
        initialize:function() {
            this._project = paper.project, this._index = this._project.layers.push(this) - 1, 
            this.base.apply(this, arguments), this.activate();
        },
        _remove:function(t, e) {
            return this._parent ? this.base(t, e) :null != this._index ? (t && this.setSelected(!1), 
            Base.splice(this._project.layers, null, this._index, 1), this._project._needsRedraw(), 
            !0) :!1;
        },
        getNextSibling:function() {
            return this._parent ? this.base() :this._project.layers[this._index + 1] || null;
        },
        getPreviousSibling:function() {
            return this._parent ? this.base() :this._project.layers[this._index - 1] || null;
        },
        activate:function() {
            this._project.activeLayer = this;
        }
    }, new function() {
        function t(t) {
            return function(e) {
                return e instanceof Layer && !e._parent && this._remove(!1, !0) ? (Base.splice(e._project.layers, [ this ], e._index + (t ? 1 :-1), 0), 
                this._setProject(e._project), !0) :this.base(e);
            };
        }
        return {
            insertAbove:t(!0),
            insertBelow:t(!1)
        };
    }()), PlacedItem = this.PlacedItem = Item.extend({
        _transform:function(t) {
            this._matrix.preConcatenate(t);
        },
        _changed:function(t) {
            Item.prototype._changed.call(this, t), t & ChangeFlag.GEOMETRY && (delete this._strokeBounds, 
            delete this._handleBounds, delete this._roughBounds);
        },
        getMatrix:function() {
            return this._matrix;
        },
        setMatrix:function(t) {
            this._matrix = t.clone(), this._changed(Change.GEOMETRY);
        },
        getBounds:function() {
            var t = void 0 === arguments[0];
            if (t && this._bounds) return this._bounds;
            var e = this.getStrokeBounds(arguments[0]);
            return t && (e = this._bounds = this._createBounds(e)), e;
        },
        _getBounds:function(t, e, i) {
            var n = i[0], o = void 0 === n;
            if (o && this[e]) return this[e];
            n = n ? n.clone().concatenate(this._matrix) :this._matrix;
            var r = this._calculateBounds(t, n);
            return o && (this[e] = r), r;
        }
    }), Raster = this.Raster = PlacedItem.extend({
        initialize:function(t) {
            this.base(), t.getContext ? this.setCanvas(t) :("string" == typeof t && (t = document.getElementById(t)), 
            this.setImage(t)), this._matrix = new Matrix();
        },
        clone:function() {
            var t = this._image;
            t || (t = CanvasProvider.getCanvas(this._size), t.getContext("2d").drawImage(this._canvas, 0, 0));
            var e = new Raster(t);
            return e._matrix = this._matrix.clone(), this._clone(e);
        },
        getSize:function() {
            return this._size;
        },
        setSize:function() {
            var t = Size.read(arguments), e = this.getImage();
            this.setCanvas(CanvasProvider.getCanvas(t)), this.getContext(!0).drawImage(e, 0, 0, t.width, t.height);
        },
        getWidth:function() {
            return this._size.width;
        },
        getHeight:function() {
            return this._size.height;
        },
        getPpi:function() {
            var t = this._matrix, e = new Point(0, 0).transform(t), i = new Point(1, 0).transform(t).subtract(e), n = new Point(0, 1).transform(t).subtract(e);
            return new Size(72 / i.getLength(), 72 / n.getLength());
        },
        getContext:function() {
            return this._context || (this._context = this.getCanvas().getContext("2d")), arguments[0] && this._changed(Change.PIXELS), 
            this._context;
        },
        setContext:function(t) {
            this._context = t;
        },
        getCanvas:function() {
            return this._canvas || (this._canvas = CanvasProvider.getCanvas(this._size), this._image && this.getContext(!0).drawImage(this._image, 0, 0)), 
            this._canvas;
        },
        setCanvas:function(t) {
            this._canvas && CanvasProvider.returnCanvas(this._canvas), this._canvas = t, this._size = new Size(t.width, t.height), 
            this._image = null, this._context = null, this._changed(Change.GEOMETRY);
        },
        getImage:function() {
            return this._image || this.getCanvas();
        },
        setImage:function(t) {
            this._canvas && CanvasProvider.returnCanvas(this._canvas), this._image = t, this._size = new Size(t.naturalWidth, t.naturalHeight), 
            this._canvas = null, this._context = null, this._changed(Change.GEOMETRY);
        },
        getSubImage:function(t) {
            t = Rectangle.read(arguments);
            var e = CanvasProvider.getCanvas(t.getSize());
            return e.getContext("2d").drawImage(this.getCanvas(), t.x, t.y, e.width, e.height, 0, 0, e.width, e.height), 
            e;
        },
        drawImage:function(t, e) {
            e = Point.read(arguments, 1), this.getContext(!0).drawImage(t, e.x, e.y);
        },
        getAverageColor:function(t) {
            t || (t = this.getBounds());
            var e, i;
            t instanceof PathItem ? (i = t, e = t.getBounds()) :t.width ? e = new Rectangle(t) :t.x && (e = Rectangle.create(t.x - .5, t.y - .5, 1, 1));
            var n = 32, o = Math.min(e.width, n), r = Math.min(e.height, n), s = Raster._sampleContext;
            s ? s.clearRect(0, 0, n, n) :s = Raster._sampleContext = CanvasProvider.getCanvas(new Size(n)).getContext("2d"), 
            s.save(), s.scale(o / e.width, r / e.height), s.translate(-e.x, -e.y), i && i.draw(s, {
                clip:!0
            }), this._matrix.applyToContext(s), s.drawImage(this._canvas || this._image, -this._size.width / 2, -this._size.height / 2), 
            s.restore();
            for (var a = s.getImageData(.5, .5, Math.ceil(o), Math.ceil(r)).data, l = [ 0, 0, 0 ], c = 0, h = 0, u = a.length; u > h; h += 4) {
                var d = a[h + 3];
                c += d, d /= 255, l[0] += a[h] * d, l[1] += a[h + 1] * d, l[2] += a[h + 2] * d;
            }
            for (var h = 0; 3 > h; h++) l[h] /= c;
            return c ? Color.read(l) :null;
        },
        getPixel:function(t) {
            t = Point.read(arguments);
            for (var e = this.getContext().getImageData(t.x, t.y, 1, 1).data, i = new Array(4), n = 0; 4 > n; n++) i[n] = e[n] / 255;
            return RGBColor.read(i);
        },
        setPixel:function(t, e) {
            var i = 2 == arguments.length;
            t = Point.read(arguments, 0, i ? 1 :2), e = Color.read(arguments, i ? 1 :2);
            var n = this.getContext(!0), o = n.createImageData(1, 1), r = e.getAlpha();
            o.data[0] = 255 * e.getRed(), o.data[1] = 255 * e.getGreen(), o.data[2] = 255 * e.getBlue(), 
            o.data[3] = null != r ? 255 * r :255, n.putImageData(o, t.x, t.y);
        },
        createData:function(t) {
            return t = Size.read(arguments), this.getContext().createImageData(t.width, t.height);
        },
        getData:function(t) {
            return t = Rectangle.read(arguments), t.isEmpty() && (t = new Rectangle(this.getSize())), 
            this.getContext().getImageData(t.x, t.y, t.width, t.height);
        },
        setData:function(t, e) {
            e = Point.read(arguments, 1), this.getContext(!0).putImageData(t, e.x, e.y);
        },
        _calculateBounds:function(t, e) {
            return e._transformBounds(new Rectangle(this._size).setCenter(0, 0));
        },
        getHandleBounds:function() {
            return this.getStrokeBounds(arguments[0]);
        },
        getRoughBounds:function() {
            return this.getStrokeBounds(arguments[0]);
        },
        draw:function(t, e) {
            if (e.selection) {
                var i = new Rectangle(this._size).setCenter(0, 0);
                Item.drawSelectedBounds(i, t, this._matrix);
            } else t.save(), this._matrix.applyToContext(t), t.drawImage(this._canvas || this._image, -this._size.width / 2, -this._size.height / 2), 
            t.restore();
        }
    }), PlacedSymbol = this.PlacedSymbol = PlacedItem.extend({
        initialize:function(t, e) {
            this.base(), this.setSymbol(t instanceof Symbol ? t :new Symbol(t)), this._matrix = void 0 !== e ? e instanceof Matrix ? e :new Matrix().translate(Point.read(arguments, 1)) :new Matrix();
        },
        getSymbol:function() {
            return this._symbol;
        },
        setSymbol:function(t) {
            this._symbol && delete this._symbol._instances[this._id], this._symbol = t, t._instances[this._id] = this;
        },
        clone:function() {
            return this._clone(new PlacedSymbol(this.symbol, this._matrix.clone()));
        },
        _calculateBounds:function(t, e) {
            return this.symbol._definition[t](e);
        },
        draw:function(t, e) {
            e.selection ? Item.drawSelectedBounds(this.symbol._definition.getStrokeBounds(), t, this._matrix) :(t.save(), 
            this._matrix.applyToContext(t), Item.draw(this.symbol.getDefinition(), t, e), t.restore());
        }
    });
    this.HitResult = HitResult = Base.extend({
        initialize:function(t, e, i) {
            this.type = t, this.item = e, i && Base.each(i, function(t, e) {
                this[e] = t;
            }, this);
        },
        statics:{
            getOptions:function(t, e) {
                return e && e._merged ? e :Base.merge({
                    point:Point.read(arguments, 0, 1),
                    type:null,
                    tolerance:2,
                    fill:!e,
                    stroke:!e,
                    segments:!e,
                    handles:!1,
                    ends:!1,
                    center:!1,
                    bounds:!1,
                    guides:!1,
                    selected:!1,
                    _merged:!0
                }, e);
            }
        }
    });
    var Segment = this.Segment = Base.extend({
        initialize:function(t, e, i, n, o, r) {
            var s, a, l, c = arguments.length, h = SegmentPoint.create;
            0 == c || (1 == c ? t.point ? (s = t.point, a = t.handleIn, l = t.handleOut) :s = t :6 > c ? 2 == c && void 0 === e.x ? s = [ t, e ] :(s = t, 
            a = e, l = i) :6 == c && (s = [ t, e ], a = [ i, n ], l = [ o, r ])), h(this, "_point", s), 
            h(this, "_handleIn", a), h(this, "_handleOut", l);
        },
        _changed:function(t) {
            if (this._path) {
                var e, i = this._path._curves && this.getCurve();
                i && (i._changed(), (e = i[t == this._point || t == this._handleIn && i._segment1 == this ? "getPrevious" :"getNext"]()) && e._changed()), 
                this._path._changed(Change.SEGMENT);
            }
        },
        getPoint:function() {
            return this._point;
        },
        setPoint:function(t) {
            t = Point.read(arguments), this._point.set(t.x, t.y);
        },
        getHandleIn:function() {
            return this._handleIn;
        },
        setHandleIn:function(t) {
            t = Point.read(arguments), this._handleIn.set(t.x, t.y);
        },
        getHandleOut:function() {
            return this._handleOut;
        },
        setHandleOut:function(t) {
            t = Point.read(arguments), this._handleOut.set(t.x, t.y);
        },
        _isSelected:function(t) {
            var e = this._selectionState;
            return t == this._point ? !!(e & SelectionState.POINT) :t == this._handleIn ? !!(e & SelectionState.HANDLE_IN) :t == this._handleOut ? !!(e & SelectionState.HANDLE_OUT) :!1;
        },
        _setSelected:function(t, e) {
            var i = this._path, e = !!e, n = this._selectionState || 0, o = [ !!(n & SelectionState.POINT), !!(n & SelectionState.HANDLE_IN), !!(n & SelectionState.HANDLE_OUT) ];
            if (t == this._point) {
                if (e) o[1] = o[2] = !1; else {
                    var r = this.getPrevious(), s = this.getNext();
                    o[1] = r && (r._point.isSelected() || r._handleOut.isSelected()), o[2] = s && (s._point.isSelected() || s._handleIn.isSelected());
                }
                o[0] = e;
            } else {
                var a = t == this._handleIn ? 1 :2;
                o[a] != e && (e && (o[0] = !1), o[a] = e, i._changed(Change.ATTRIBUTE));
            }
            this._selectionState = (o[0] ? SelectionState.POINT :0) | (o[1] ? SelectionState.HANDLE_IN :0) | (o[2] ? SelectionState.HANDLE_OUT :0), 
            i && n != this._selectionState && i._updateSelection(this, n, this._selectionState);
        },
        isSelected:function() {
            return this._isSelected(this._point);
        },
        setSelected:function(t) {
            this._setSelected(this._point, t);
        },
        getIndex:function() {
            return void 0 !== this._index ? this._index :null;
        },
        getPath:function() {
            return this._path || null;
        },
        getCurve:function() {
            if (this._path) {
                var t = this._index;
                return this._path._closed || t != this._path._segments.length - 1 || t--, this._path.getCurves()[t] || null;
            }
            return null;
        },
        getNext:function() {
            var t = this._path && this._path._segments;
            return t && (t[this._index + 1] || this._path._closed && t[0]) || null;
        },
        getPrevious:function() {
            var t = this._path && this._path._segments;
            return t && (t[this._index - 1] || this._path._closed && t[t.length - 1]) || null;
        },
        reverse:function() {
            return new Segment(this._point, this._handleOut, this._handleIn);
        },
        remove:function() {
            return this._path ? !!this._path.removeSegment(this._index) :!1;
        },
        toString:function() {
            var t = [ "point: " + this._point ];
            return this._handleIn.isZero() || t.push("handleIn: " + this._handleIn), this._handleOut.isZero() || t.push("handleOut: " + this._handleOut), 
            "{ " + t.join(", ") + " }";
        },
        _transformCoordinates:function(t, e, i) {
            var n = this._point, o = i && this._handleIn.isZero() ? null :this._handleIn, r = i && this._handleOut.isZero() ? null :this._handleOut, s = n._x, a = n._y, l = 2;
            e[0] = s, e[1] = a, o && (e[l++] = o._x + s, e[l++] = o._y + a), r && (e[l++] = r._x + s, 
            e[l++] = r._y + a), t && (t._transformCoordinates(e, 0, e, 0, l / 2), s = e[0], 
            a = e[1], i ? (n._x = s, n._y = a, l = 2, o && (o._x = e[l++] - s, o._y = e[l++] - a), 
            r && (r._x = e[l++] - s, r._y = e[l++] - a)) :(o || (e[l++] = s, e[l++] = a), r || (e[l++] = s, 
            e[l++] = a)));
        }
    }), SegmentPoint = Point.extend({
        set:function(t, e) {
            return this._x = t, this._y = e, this._owner._changed(this), this;
        },
        getX:function() {
            return this._x;
        },
        setX:function(t) {
            this._x = t, this._owner._changed(this);
        },
        getY:function() {
            return this._y;
        },
        setY:function(t) {
            this._y = t, this._owner._changed(this);
        },
        isZero:function() {
            return 0 == this._x && 0 == this._y;
        },
        setSelected:function(t) {
            this._owner._setSelected(this, t);
        },
        isSelected:function() {
            return this._owner._isSelected(this);
        },
        statics:{
            create:function(t, e, i) {
                var n, o, r, s = new SegmentPoint(SegmentPoint.dont);
                return i ? void 0 !== (n = i[0]) ? o = i[1] :(void 0 === (n = i.x) && (i = Point.read(arguments, 2, 1), 
                n = i.x), o = i.y, r = i.selected) :n = o = 0, s._x = n, s._y = o, s._owner = t, 
                t[e] = s, s;
            }
        }
    }), SelectionState = {
        HANDLE_IN:1,
        HANDLE_OUT:2,
        POINT:4
    }, Curve = this.Curve = Base.extend({
        initialize:function(t, e, i, n, o, r, s, a) {
            var l = arguments.length;
            if (0 == l) this._segment1 = new Segment(), this._segment2 = new Segment(); else if (1 == l) this._segment1 = new Segment(t.segment1), 
            this._segment2 = new Segment(t.segment2); else if (2 == l) this._segment1 = new Segment(t), 
            this._segment2 = new Segment(e); else if (4 == l) this._segment1 = new Segment(t, null, e), 
            this._segment2 = new Segment(n, i, null); else if (8 == l) {
                var c = Point.create(t, e), h = Point.create(s, a);
                this._segment1 = new Segment(c, null, Point.create(i, n).subtract(c)), this._segment2 = new Segment(h, Point.create(o, r).subtract(h), null);
            }
        },
        _changed:function() {
            delete this._length;
        },
        getPoint1:function() {
            return this._segment1._point;
        },
        setPoint1:function(t) {
            t = Point.read(arguments), this._segment1._point.set(t.x, t.y);
        },
        getPoint2:function() {
            return this._segment2._point;
        },
        setPoint2:function(t) {
            t = Point.read(arguments), this._segment2._point.set(t.x, t.y);
        },
        getHandle1:function() {
            return this._segment1._handleOut;
        },
        setHandle1:function(t) {
            t = Point.read(arguments), this._segment1._handleOut.set(t.x, t.y);
        },
        getHandle2:function() {
            return this._segment2._handleIn;
        },
        setHandle2:function(t) {
            t = Point.read(arguments), this._segment2._handleIn.set(t.x, t.y);
        },
        getSegment1:function() {
            return this._segment1;
        },
        getSegment2:function() {
            return this._segment2;
        },
        getPath:function() {
            return this._path;
        },
        getIndex:function() {
            return this._segment1._index;
        },
        getNext:function() {
            var t = this._path && this._path._curves;
            return t && (t[this._segment1._index + 1] || this._path._closed && t[0]) || null;
        },
        getPrevious:function() {
            var t = this._path && this._path._curves;
            return t && (t[this._segment1._index - 1] || this._path._closed && t[t.length - 1]) || null;
        },
        isSelected:function() {
            return this.getHandle1().isSelected() && this.getHandle2().isSelected();
        },
        setSelected:function(t) {
            this.getHandle1().setSelected(t), this.getHandle2().setSelected(t);
        },
        getValues:function(t) {
            return Curve.getValues(this._segment1, this._segment2, t);
        },
        getPoints:function(t) {
            for (var e = this.getValues(t), i = [], n = 0; 8 > n; n += 2) i.push(Point.create(e[n], e[n + 1]));
            return i;
        },
        getLength:function() {
            var t = arguments[0], e = arguments[1];
            if (fullLength = 0 == arguments.length || 0 == t && 1 == e, fullLength && null != this._length) return this._length;
            var i = Curve.getLength(this.getValues(), t, e);
            return fullLength && (this._length = i), i;
        },
        getPart:function(t, e) {
            return new Curve(Curve.getPart(this.getValues(), t, e));
        },
        isLinear:function() {
            return this._segment1._handleOut.isZero() && this._segment2._handleIn.isZero();
        },
        getParameterAt:function(t, e) {
            return Curve.getParameterAt(this.getValues(), t, void 0 !== e ? e :0 > t ? 1 :0);
        },
        getPoint:function(t) {
            return Curve.evaluate(this.getValues(), t, 0);
        },
        getTangent:function(t) {
            return Curve.evaluate(this.getValues(), t, 1);
        },
        getNormal:function(t) {
            return Curve.evaluate(this.getValues(), t, 2);
        },
        getParameter:function(t) {
            return t = Point.read(t), Curve.getParameter(this.getValues(), t.x, t.y);
        },
        getCrossings:function(t, e, i) {
            for (var n = this.getValues(e), o = Curve.solveCubic(n, 1, t.y, i), r = 0, s = 0; o > s; s++) {
                var a = i[s];
                if (a >= 0 && 1 > a && Curve.evaluate(n, a, 0).x > t.x) {
                    if (a < Numerical.TOLERANCE && Curve.evaluate(this.getPrevious().getValues(e), 1, 1).y * Curve.evaluate(n, a, 1).y >= 0) continue;
                    r++;
                }
            }
            return r;
        },
        reverse:function() {
            return new Curve(this._segment2.reverse(), this._segment1.reverse());
        },
        clone:function() {
            return new Curve(this._segment1, this._segment2);
        },
        toString:function() {
            var t = [ "point1: " + this._segment1._point ];
            return this._segment1._handleOut.isZero() || t.push("handle1: " + this._segment1._handleOut), 
            this._segment2._handleIn.isZero() || t.push("handle2: " + this._segment2._handleIn), 
            t.push("point2: " + this._segment2._point), "{ " + t.join(", ") + " }";
        },
        statics:{
            create:function(t, e, i) {
                var n = new Curve(Curve.dont);
                return n._path = t, n._segment1 = e, n._segment2 = i, n;
            },
            getValues:function(t, e, i) {
                var n = t._point, o = t._handleOut, r = e._handleIn, s = e._point, a = [ n._x, n._y, n._x + o._x, n._y + o._y, s._x + r._x, s._y + r._y, s._x, s._y ];
                return i ? i._transformCoordinates(a, 0, a, 0, 4) :a;
            },
            evaluate:function(t, e, i) {
                var n, o, r = t[0], s = t[1], a = t[2], l = t[3], c = t[4], h = t[5], u = t[6], d = t[7];
                if (0 != i || 0 != e && 1 != e) {
                    var p = Numerical.TOLERANCE;
                    p > e && a == r && l == s ? e = p :e > 1 - p && c == u && h == d && (e = 1 - p);
                    var f = 3 * (a - r), g = 3 * (c - a) - f, m = u - r - f - g, _ = 3 * (l - s), v = 3 * (h - l) - _, y = d - s - _ - v;
                    switch (i) {
                      case 0:
                        n = ((m * e + g) * e + f) * e + r, o = ((y * e + v) * e + _) * e + s;
                        break;

                      case 1:
                      case 2:
                        n = (3 * m * e + 2 * g) * e + f, o = (3 * y * e + 2 * v) * e + _;
                    }
                } else n = 0 == e ? r :u, o = 0 == e ? s :d;
                return 2 == i ? new Point(o, -n) :new Point(n, o);
            },
            subdivide:function(t, e) {
                var i = t[0], n = t[1], o = t[2], r = t[3], s = t[4], a = t[5], l = t[6], c = t[7];
                void 0 === e && (e = .5);
                var h = 1 - e, u = h * i + e * o, d = h * n + e * r, p = h * o + e * s, f = h * r + e * a, g = h * s + e * l, m = h * a + e * c, _ = h * u + e * p, v = h * d + e * f, y = h * p + e * g, b = h * f + e * m, w = h * _ + e * y, C = h * v + e * b;
                return [ [ i, n, u, d, _, v, w, C ], [ w, C, y, b, g, m, l, c ] ];
            },
            solveCubic:function(t, e, i, n) {
                var o = t[e], r = t[e + 2], s = t[e + 4], a = t[e + 6], l = 3 * (r - o), c = 3 * (s - r) - l, h = a - o - l - c;
                return Numerical.solveCubic(h, c, l, o - i, n, Numerical.TOLERANCE);
            },
            getParameter:function(t, e, i) {
                for (var n, o, r = [], s = [], a = Curve.solveCubic(t, 0, e, r), l = Curve.solveCubic(t, 1, i, s), c = 0; -1 == a || a > c; ) if (-1 == a || (n = r[c++]) >= 0 && 1 >= n) {
                    for (var h = 0; -1 == l || l > h; ) if ((-1 == l || (o = s[h++]) >= 0 && 1 >= o) && (-1 == a ? n = o :-1 == l && (o = n), 
                    Math.abs(n - o) < Numerical.TOLERANCE)) return .5 * (n + o);
                    if (-1 == a) break;
                }
                return null;
            },
            getPart:function(t, e, i) {
                return e > 0 && (t = Curve.subdivide(t, e)[1]), 1 > i && (t = Curve.subdivide(t, (i - e) / (1 - e))[0]), 
                t;
            },
            isFlatEnough:function(t) {
                var e = t[0], i = t[1], n = t[2], o = t[3], r = t[4], s = t[5], a = t[6], l = t[7], c = i - l, h = a - e, u = e * l - a * i, d = c * n + h * o + u, p = c * r + h * s + u;
                return Math.abs((d * d + p * p) / (c * (c * c + h * h))) < .005;
            }
        }
    }, new function() {
        function t(t) {
            var e = t[0], i = t[1], n = t[2], o = t[3], r = t[4], s = t[5], a = t[6], l = t[7], c = 9 * (n - r) + 3 * (a - e), h = 6 * (e + r) - 12 * n, u = 3 * (n - e), d = 9 * (o - s) + 3 * (l - i), p = 6 * (i + s) - 12 * o, f = 3 * (o - i);
            return function(t) {
                var e = (c * t + h) * t + u, i = (d * t + p) * t + f;
                return Math.sqrt(e * e + i * i);
            };
        }
        function e(t, e) {
            return Math.max(2, Math.min(16, Math.ceil(32 * Math.abs(e - t))));
        }
        return {
            statics:!0,
            getLength:function(i, n, o) {
                if (void 0 === n && (n = 0), void 0 === o && (o = 1), i[0] == i[2] && i[1] == i[3] && i[6] == i[4] && i[7] == i[5]) {
                    var r = i[6] - i[0], s = i[7] - i[1];
                    return (o - n) * Math.sqrt(r * r + s * s);
                }
                var a = t(i);
                return Numerical.integrate(a, n, o, e(n, o));
            },
            getParameterAt:function(i, n, o) {
                function r(t) {
                    var i = e(o, t);
                    return d += t > o ? Numerical.integrate(c, o, t, i) :-Numerical.integrate(c, t, o, i), 
                    o = t, d - n;
                }
                if (0 == n) return o;
                var s = n > 0, a = s ? o :0, l = s ? 1 :o, n = Math.abs(n), c = t(i), h = Numerical.integrate(c, a, l, e(a, l));
                if (n >= h) return s ? l :a;
                var u = n / h, d = 0;
                return Numerical.findRoot(r, c, s ? a + u :l - u, a, l, 16, Numerical.TOLERANCE);
            }
        };
    }(), new function() {
        function t(t, e) {
            for (var i = 3, n = 5, o = [], r = [], a = [], l = [], c = 0; i >= c; c++) o[c] = t[c].subtract(e), 
            i > c && (r[c] = t[c + 1].subtract(t[c]).multiply(i));
            for (var h = 0; i > h; h++) {
                a[h] = [];
                for (var u = 0; i >= u; u++) a[h][u] = r[h].dot(o[u]);
            }
            for (var c = 0; n >= c; c++) l[c] = new Point(c / n, 0);
            for (k = 0; n >= k; k++) for (var d = Math.max(0, k - i + 1), p = Math.min(k, i), c = d; p >= c; c++) {
                var f = k - c;
                l[k].y += a[f][c] * s[f][c];
            }
            return l;
        }
        function e(t, r) {
            switch (i(t)) {
              case 0:
                return [];

              case 1:
                if (r >= o) return [ .5 * (t[0].x + t[5].x) ];
                if (n(t)) {
                    var s = new Line(t[0], t[5], !0);
                    return [ s.vector.getLength(!0) <= Numerical.EPSILON ? s.point.x :a.intersect(s).x ];
                }
            }
            for (var l = [ [] ], c = [], h = [], u = 0; 5 >= u; u++) l[0][u] = new Point(t[u]);
            for (var d = 1; 5 >= d; d++) {
                l[d] = [];
                for (var u = 0; 5 - d >= u; u++) l[d][u] = l[d - 1][u].add(l[d - 1][u + 1]).multiply(.5);
            }
            for (var u = 0; 5 >= u; u++) c[u] = l[u][0], h[u] = l[5 - u][u];
            return e(c, r + 1).concat(e(h, r + 1));
        }
        function i(t) {
            for (var e = 0, i = null, n = 0, o = t.length; o > n; n++) {
                var r = t[n].y < 0 ? -1 :1;
                null != i && r != i && e++, i = r;
            }
            return e;
        }
        function n(t) {
            for (var e = t.length - 1, i = t[0].y - t[e].y, n = t[e].x - t[0].x, o = t[0].x * t[e].y - t[e].x * t[0].y, s = 0, a = 0, l = 1; e > l; l++) {
                var c = i * t[l].x + n * t[l].y + o, h = c * c;
                0 > c && h > a ? a = h :h > s && (s = h);
            }
            return Math.abs((s + a) / (2 * i * (i * i + n * n))) < r;
        }
        var o = 32, r = Math.pow(2, -o - 1), s = [ [ 1, .6, .3, .1 ], [ .4, .6, .6, .4 ], [ .1, .3, .6, 1 ] ], a = new Line(new Point(0, 0), new Point(1, 0));
        return {
            getNearestLocation:function(i, n) {
                for (var o, r, s = t(this.getPoints(n), i), a = e(s, 0).concat([ 0, 1 ]), l = 1/0, c = 0; c < a.length; c++) {
                    var h = this.getPoint(a[c]), u = i.getDistance(h, !0);
                    l > u && (l = u, o = a[c], r = h);
                }
                return new CurveLocation(this, o, r, Math.sqrt(l));
            },
            getNearestPoint:function(t, e) {
                return this.getNearestLocation(t, e).getPoint();
            }
        };
    }());
    CurveLocation = Base.extend({
        initialize:function(t, e, i, n) {
            this._curve = t, this._parameter = e, this._point = i, this._distance = n;
        },
        getSegment:function() {
            if (!this._segment) {
                var t = this._curve, e = this.getParameter();
                if (0 == e) this._segment = t._segment1; else if (1 == e) this._segment = t._segment2; else {
                    if (null == e) return null;
                    this._segment = t.getLength(0, e) < t.getLength(e, 1) ? t._segment1 :t._segment2;
                }
            }
            return this._segment;
        },
        getCurve:function() {
            return this._curve;
        },
        getPath:function() {
            return this._curve && this._curve._path;
        },
        getIndex:function() {
            return this._curve && this._curve.getIndex();
        },
        getOffset:function() {
            var t = this._curve && this._curve._path;
            return t && t._getOffset(this);
        },
        getCurveOffset:function() {
            var t = this.getParameter();
            return null != t && this._curve && this._curve.getLength(0, t);
        },
        getParameter:function() {
            return null == this._parameter && this._curve && this._point && (this._parameter = this._curve.getParameterAt(this._point)), 
            this._parameter;
        },
        getPoint:function() {
            return !this._point && this._curve && null != this._parameter && (this._point = this._curve.getPoint(this._parameter)), 
            this._point;
        },
        getTangent:function() {
            var t = this.getParameter();
            return null != t && this._curve && this._curve.getTangent(t);
        },
        getNormal:function() {
            var t = this.getParameter();
            return null != t && this._curve && this._curve.getNormal(t);
        },
        getDistance:function() {
            return this._distance;
        },
        toString:function() {
            var t = [], e = this.getPoint();
            e && t.push("point: " + e);
            var i = this.getIndex();
            null != i && t.push("index: " + i);
            var n = this.getParameter();
            return null != n && t.push("parameter: " + Base.formatNumber(n)), null != this._distance && t.push("distance: " + Base.formatNumber(this._distance)), 
            "{ " + t.join(", ") + " }";
        }
    });
    var PathItem = this.PathItem = Item.extend({}), Path = this.Path = PathItem.extend({
        initialize:function(t) {
            this.base(), this._closed = !1, this._selectedSegmentState = 0, this.setSegments(t && Array.isArray(t) && "object" == typeof t[0] ? t :arguments);
        },
        clone:function() {
            var t = this._clone(new Path(this._segments));
            return t._closed = this._closed, void 0 !== this._clockwise && (t._clockwise = this._clockwise), 
            t;
        },
        _changed:function(t) {
            Item.prototype._changed.call(this, t), t & ChangeFlag.GEOMETRY ? (delete this._strokeBounds, 
            delete this._handleBounds, delete this._roughBounds, delete this._length, delete this._clockwise) :t & ChangeFlag.STROKE && delete this._strokeBounds;
        },
        getSegments:function() {
            return this._segments;
        },
        setSegments:function(t) {
            this._segments ? (this._selectedSegmentState = 0, this._segments.length = 0, this._curves && delete this._curves) :this._segments = [], 
            this._add(Segment.readAll(t));
        },
        getFirstSegment:function() {
            return this._segments[0];
        },
        getLastSegment:function() {
            return this._segments[this._segments.length - 1];
        },
        getCurves:function() {
            if (!this._curves) {
                var t = this._segments, e = t.length;
                !this._closed && e > 0 && e--, this._curves = new Array(e);
                for (var i = 0; e > i; i++) this._curves[i] = Curve.create(this, t[i], t[i + 1] || t[0]);
            }
            return this._curves;
        },
        getFirstCurve:function() {
            return this.getCurves()[0];
        },
        getLastCurve:function() {
            var t = this.getCurves();
            return t[t.length - 1];
        },
        getClosed:function() {
            return this._closed;
        },
        setClosed:function(t) {
            if (this._closed != (t = !!t)) {
                if (this._closed = t, this._curves) {
                    var e, i = this._segments.length;
                    !t && i > 0 && i--, this._curves.length = i, t && (this._curves[e = i - 1] = Curve.create(this, this._segments[e], this._segments[0]));
                }
                this._changed(Change.GEOMETRY);
            }
        },
        _transform:function(t) {
            if (!t.isIdentity()) {
                for (var e = new Array(6), i = 0, n = this._segments.length; n > i; i++) this._segments[i]._transformCoordinates(t, e, !0);
                var o = this.getFillColor(), r = this.getStrokeColor();
                o && o.transform && o.transform(t), r && r.transform && r.transform(t);
            }
        },
        _add:function(t, e) {
            for (var i = this._segments, n = this._curves, o = t.length, r = null == e, e = r ? i.length :e, s = this.isFullySelected(), a = 0; o > a; a++) {
                var l = t[a];
                l._path && (l = t[a] = new Segment(l)), l._path = this, l._index = e + a, s && (l._selectionState = SelectionState.POINT), 
                l._selectionState && this._updateSelection(l, 0, l._selectionState);
            }
            if (r) i.push.apply(i, t); else {
                i.splice.apply(i, [ e, 0 ].concat(t));
                for (var a = e + o, c = i.length; c > a; a++) i[a]._index = a;
            }
            if (n && --e >= 0) {
                n.splice(e, 0, Curve.create(this, i[e], i[e + 1]));
                var h = n[e + o];
                h && (h._segment1 = i[e + o]);
            }
            return this._changed(Change.GEOMETRY), t;
        },
        add:function(t) {
            return arguments.length > 1 && "number" != typeof t ? this._add(Segment.readAll(arguments)) :this._add([ Segment.read(arguments) ])[0];
        },
        insert:function(t, e) {
            return arguments.length > 2 && "number" != typeof e ? this._add(Segment.readAll(arguments, 1), t) :this._add([ Segment.read(arguments, 1) ], t)[0];
        },
        addSegment:function() {
            return this._add([ Segment.read(arguments) ])[0];
        },
        insertSegment:function(t) {
            return this._add([ Segment.read(arguments, 1) ], t)[0];
        },
        addSegments:function(t) {
            return this._add(Segment.readAll(t));
        },
        insertSegments:function(t, e) {
            return this._add(Segment.readAll(e), t);
        },
        removeSegment:function(t) {
            var e = this.removeSegments(t, t + 1);
            return e[0] || null;
        },
        removeSegments:function(t, e) {
            t = t || 0, e = Base.pick(e, this._segments.length);
            var i = this._segments, n = this._curves, o = e >= i.length, r = i.splice(t, e - t), s = r.length;
            if (!s) return r;
            for (var a = 0; s > a; a++) {
                var l = r[a];
                l._selectionState && this._updateSelection(l, l._selectionState, 0), r._index = r._path = void 0;
            }
            for (var a = t, c = i.length; c > a; a++) i[a]._index = a;
            if (n) {
                n.splice(t, s);
                var h;
                (h = n[t - 1]) && (h._segment2 = i[t]), (h = n[t]) && (h._segment1 = i[t]), o && this._closed && (h = n[n.length - 1]) && (h._segment2 = i[0]), 
                o && !this._closed && (h = n[n.length - 1]) && (h._segment2 && h._segment1 || n.splice(n.length - 1, 1));
            }
            return this._changed(Change.GEOMETRY), r;
        },
        isFullySelected:function() {
            return this._selected && this._selectedSegmentState == this._segments.length * SelectionState.POINT;
        },
        setFullySelected:function(t) {
            var e = this._segments.length;
            this._selectedSegmentState = t ? e * SelectionState.POINT :0;
            for (var i = 0; e > i; i++) this._segments[i]._selectionState = t ? SelectionState.POINT :0;
            this.setSelected(t);
        },
        _updateSelection:function(t, e, i) {
            t._selectionState = i;
            var n = this._selectedSegmentState += i - e;
            n > 0 && this.setSelected(!0);
        },
        flatten:function(t) {
            for (var e = new PathFlattener(this), i = 0, n = e.length / Math.ceil(e.length / t), o = e.length + (this._closed ? -n :n) / 2, r = []; o >= i; ) r.push(new Segment(e.evaluate(i, 0))), 
            i += n;
            this.setSegments(r);
        },
        simplify:function(t) {
            if (this._segments.length > 2) {
                var e = new PathFitter(this, t || 2.5);
                this.setSegments(e.fit());
            }
        },
        isClockwise:function() {
            function t(t, o) {
                void 0 !== e && (n += (e - t) * (o + i)), e = t, i = o;
            }
            if (void 0 !== this._clockwise) return this._clockwise;
            for (var e, i, n = 0, o = 0, r = this._segments.length; r > o; o++) {
                var s = this._segments[o], a = this._segments[r > o + 1 ? o + 1 :0], l = s._point, c = s._handleOut, h = a._handleIn, u = a._point;
                t(l._x, l._y), t(l._x + c._x, l._y + c._y), t(u._x + h._x, u._y + h._y), t(u._x, u._y);
            }
            return n > 0;
        },
        setClockwise:function(t) {
            this.isClockwise() != (t = !!t) && (this.reverse(), this._clockwise = t);
        },
        reverse:function() {
            this._segments.reverse();
            for (var t = 0, e = this._segments.length; e > t; t++) {
                var i = this._segments[t], n = i._handleIn;
                i._handleIn = i._handleOut, i._handleOut = n;
            }
            void 0 !== this._clockwise && (this._clockwise = !this._clockwise);
        },
        join:function(t) {
            if (t) {
                var e = t._segments, i = this.getLastSegment(), n = t.getLastSegment();
                i._point.equals(n._point) && t.reverse();
                var o = t.getFirstSegment();
                if (i._point.equals(o._point)) i.setHandleOut(o._handleOut), this._add(e.slice(1)); else {
                    var r = this.getFirstSegment();
                    r._point.equals(o._point) && t.reverse(), n = t.getLastSegment(), r._point.equals(n._point) ? (r.setHandleIn(n._handleIn), 
                    this._add(e.slice(0, e.length - 1), 0)) :this._add(e.slice(0));
                }
                t.remove();
                var r = this.getFirstSegment();
                return i = this.getLastSegment(), i._point.equals(r._point) && (r.setHandleIn(i._handleIn), 
                i.remove(), this.setClosed(!0)), this._changed(Change.GEOMETRY), !0;
            }
            return !1;
        },
        getLength:function() {
            if (null == this._length) {
                var t = this.getCurves();
                this._length = 0;
                for (var e = 0, i = t.length; i > e; e++) this._length += t[e].getLength();
            }
            return this._length;
        },
        _getOffset:function(t) {
            var e = t && t.getIndex();
            if (null != e) {
                for (var i = this.getCurves(), n = 0, o = 0; e > o; o++) n += i[o].getLength();
                var r = i[e];
                return n + r.getLength(0, t.getParameter());
            }
            return null;
        },
        getLocation:function(t) {
            for (var e = this.getCurves(), i = 0, n = e.length; n > i; i++) {
                var o = e[i], r = o.getParameter(t);
                if (null != r) return new CurveLocation(o, r);
            }
            return null;
        },
        getLocationAt:function(t, e) {
            var i = this.getCurves(), n = 0;
            if (e) {
                var o = ~~t;
                return new CurveLocation(i[o], t - o);
            }
            for (var r = 0, s = i.length; s > r; r++) {
                var a = n, l = i[r];
                if (n += l.getLength(), n >= t) return new CurveLocation(l, l.getParameterAt(t - a));
            }
            return t <= this.getLength() ? new CurveLocation(i[i.length - 1], 1) :null;
        },
        getPointAt:function(t, e) {
            var i = this.getLocationAt(t, e);
            return i && i.getPoint();
        },
        getTangentAt:function(t, e) {
            var i = this.getLocationAt(t, e);
            return i && i.getTangent();
        },
        getNormalAt:function(t, e) {
            var i = this.getLocationAt(t, e);
            return i && i.getNormal();
        },
        getNearestLocation:function(t, e) {
            for (var i = this.getCurves(), n = 1/0, o = null, r = 0, s = i.length; s > r; r++) {
                var a = i[r].getNearestLocation(t, e);
                a._distance < n && (n = a._distance, o = a);
            }
            return o;
        },
        getNearestPoint:function(t, e) {
            return this.getNearestLocation(t, e).getPoint();
        },
        contains:function(t, e) {
            if (t = Point.read(arguments), !this._closed || !this.getRoughBounds(e)._containsPoint(t)) return !1;
            for (var i = this.getCurves(), n = 0, o = [], r = 0, s = i.length; s > r; r++) n += i[r].getCrossings(t, e, o);
            return 1 == (1 & n);
        },
        _hitTest:function(t, e, i) {
            function n(n, o) {
                n._transformCoordinates(i, l);
                for (var r = o || e.segments ? 0 :2, a = !o && e.handles ? 6 :2; a > r; r += 2) if (t.getDistance(l[r], l[r + 1]) < s) return new HitResult(0 == r ? "segment" :"handle-" + (2 == r ? "in" :"out"), c, {
                    segment:n
                });
            }
            var o, r, s = e.tolerance || 0, a = (e.stroke ? this.getStrokeWidth() / 2 :0) + s, l = [], c = this;
            if (!e.ends || e.segments || this._closed) {
                if (e.segments || e.handles) for (var h = 0, u = this._segments.length; u > h; h++) if (r = n(this._segments[h])) return r;
            } else if (r = n(this.getFirstSegment(), !0) || n(this.getLastSegment(), !0)) return r;
            return e.stroke && a > 0 && (o = this.getNearestLocation(t, i)), !(o && o._distance <= a) && e.fill && this.getFillColor() && this.contains(t, i) ? new HitResult("fill", this) :(!o && e.stroke && a > 0 && (o = this.getNearestLocation(t, i)), 
            o && o._distance <= a ? e.stroke ? new HitResult("stroke", this, {
                location:o
            }) :new HitResult("fill", this) :void 0);
        }
    }, new function() {
        function t(t, i) {
            for (var n = 0, o = i.length; o > n; n++) {
                var r = i[n], s = r._point, a = r._selectionState, l = a & SelectionState.POINT;
                (l || a & SelectionState.HANDLE_IN) && e(t, s, r._handleIn), (l || a & SelectionState.HANDLE_OUT) && e(t, s, r._handleOut), 
                t.save(), t.beginPath(), t.rect(s._x - 2, s._y - 2, 4, 4), t.fill(), l || (t.beginPath(), 
                t.rect(s._x - 1, s._y - 1, 2, 2), t.fillStyle = "#ffffff", t.fill()), t.restore();
            }
        }
        function e(t, e, i) {
            if (!i.isZero()) {
                var n = e._x + i._x, o = e._y + i._y;
                t.beginPath(), t.moveTo(e._x, e._y), t.lineTo(n, o), t.stroke(), t.beginPath(), 
                t.arc(n, o, 1.75, 0, 2 * Math.PI, !0), t.fill();
            }
        }
        function i(t, e) {
            function i(e) {
                var i = s[e], a = i._point, l = a._x, c = a._y, h = i._handleIn;
                n ? h.isZero() && n.isZero() ? t.lineTo(l, c) :t.bezierCurveTo(o, r, h._x + l, h._y + c, l, c) :t.moveTo(l, c), 
                n = i._handleOut, o = n._x + l, r = n._y + c;
            }
            for (var n, o, r, s = e._segments, a = s.length, l = 0; a > l; l++) i(l);
            e._closed && a > 1 && i(0);
        }
        function n(t, e, i, n) {
            for (var o, r = new PathFlattener(e), s = n, a = 0; s < r.length; ) o = s + i[a++ % i.length], 
            r.drawPart(t, s, o), s = o + i[a++ % i.length];
        }
        return {
            draw:function(e, o) {
                o.compound || e.beginPath();
                var r = this.getFillColor(), s = this.getStrokeColor(), a = this.getDashArray() || [], l = !!a.length;
                (o.compound || o.selection || this._clipMask || r || s && !l) && i(e, this), o.selection ? (e.stroke(), 
                t(e, this._segments)) :this._clipMask ? e.clip() :o.compound || !r && !s || (e.save(), 
                this._setStyles(e), r && s || (e.globalAlpha = this._opacity), r && (e.fillStyle = r.getCanvasStyle(e), 
                e.fill()), s && (e.strokeStyle = s.getCanvasStyle(e), l && (e.beginPath(), n(e, this, a, this.getDashOffset())), 
                e.stroke()), e.restore());
            }
        };
    }(), new function() {
        function t(t) {
            var e = t.length, i = [], n = [], o = 2;
            i[0] = t[0] / o;
            for (var r = 1; e > r; r++) n[r] = 1 / o, o = (e - 1 > r ? 4 :2) - n[r], i[r] = (t[r] - i[r - 1]) / o;
            for (var r = 1; e > r; r++) i[e - r - 1] -= n[e - r] * i[e - r];
            return i;
        }
        var e = {
            getStrokeWidth:"lineWidth",
            getStrokeJoin:"lineJoin",
            getStrokeCap:"lineCap",
            getMiterLimit:"miterLimit"
        };
        return {
            _setStyles:function(t) {
                for (var i in e) {
                    var n = this._style[i]();
                    n && (t[e[i]] = n);
                }
            },
            smooth:function() {
                var e, i = this._segments, n = i.length, o = n;
                if (!(2 >= n)) {
                    this._closed ? (e = Math.min(n, 4), o += 2 * Math.min(n, e)) :e = 0;
                    for (var r = [], s = 0; n > s; s++) r[s + e] = i[s]._point;
                    if (this._closed) for (var s = 0; e > s; s++) r[s] = i[s + n - e]._point, r[s + n + e] = i[s]._point; else o--;
                    for (var a = [], s = 1; o - 1 > s; s++) a[s] = 4 * r[s]._x + 2 * r[s + 1]._x;
                    a[0] = r[0]._x + 2 * r[1]._x, a[o - 1] = 3 * r[o - 1]._x;
                    for (var l = t(a), s = 1; o - 1 > s; s++) a[s] = 4 * r[s]._y + 2 * r[s + 1]._y;
                    a[0] = r[0]._y + 2 * r[1]._y, a[o - 1] = 3 * r[o - 1]._y;
                    var c = t(a);
                    if (this._closed) {
                        for (var s = 0, h = n; e > s; s++, h++) {
                            var u = s / e, d = 1 - u;
                            l[h] = l[s] * u + l[h] * d, c[h] = c[s] * u + c[h] * d;
                            var p = s + e, f = h + e;
                            l[f] = l[p] * d + l[f] * u, c[f] = c[p] * d + c[f] * u;
                        }
                        o--;
                    }
                    for (var g = null, s = e; o - e >= s; s++) {
                        var m = i[s - e];
                        g && m.setHandleIn(g.subtract(m._point)), o > s && (m.setHandleOut(new Point(l[s], c[s]).subtract(m._point)), 
                        g = o - 1 > s ? new Point(2 * r[s + 1]._x - l[s + 1], 2 * r[s + 1]._y - c[s + 1]) :new Point((r[o]._x + l[o - 1]) / 2, (r[o]._y + c[o - 1]) / 2));
                    }
                    if (this._closed && g) {
                        var m = this._segments[0];
                        m.setHandleIn(g.subtract(m._point));
                    }
                }
            }
        };
    }(), new function() {
        function t(t) {
            var e = t._segments;
            if (0 == e.length) throw new Error("Use a moveTo() command first");
            return e[e.length - 1];
        }
        return {
            moveTo:function() {
                this._segments.length || this._add([ new Segment(Point.read(arguments)) ]);
            },
            moveBy:function() {
                throw new Error("moveBy() is unsupported on Path items.");
            },
            lineTo:function() {
                this._add([ new Segment(Point.read(arguments)) ]);
            },
            cubicCurveTo:function(e, i, n) {
                e = Point.read(arguments, 0, 1), i = Point.read(arguments, 1, 1), n = Point.read(arguments, 2, 1);
                var o = t(this);
                o.setHandleOut(e.subtract(o._point)), this._add([ new Segment(n, i.subtract(n)) ]);
            },
            quadraticCurveTo:function(e, i) {
                e = Point.read(arguments, 0, 1), i = Point.read(arguments, 1, 1);
                var n = t(this)._point;
                this.cubicCurveTo(e.add(n.subtract(e).multiply(1 / 3)), e.add(i.subtract(e).multiply(1 / 3)), i);
            },
            curveTo:function(e, i, n) {
                e = Point.read(arguments, 0, 1), i = Point.read(arguments, 1, 1);
                var o = Base.pick(n, .5), r = 1 - o, s = t(this)._point, a = e.subtract(s.multiply(r * r)).subtract(i.multiply(o * o)).divide(2 * o * r);
                if (a.isNaN()) throw new Error("Cannot put a curve through points with parameter = " + o);
                this.quadraticCurveTo(a, i);
            },
            arcTo:function(e, i) {
                var n, o = t(this), r = o._point;
                if (void 0 === i && (i = !0), "boolean" == typeof i) {
                    e = Point.read(arguments, 0, 1);
                    var s = r.add(e).divide(2), n = s.add(s.subtract(r).rotate(i ? -90 :90));
                } else n = Point.read(arguments, 0, 1), e = Point.read(arguments, 1, 1);
                var a = new Line(r.add(n).divide(2), n.subtract(r).rotate(90)), l = new Line(n.add(e).divide(2), e.subtract(n).rotate(90)), c = a.intersect(l), h = new Line(r, e, !0), u = h.getSide(n);
                if (!c) {
                    if (!u) return this.lineTo(e);
                    throw new Error("Cannot put an arc through the given points: " + [ r, n, e ]);
                }
                var d = r.subtract(c), p = (d.getLength(), d.getDirectedAngle(e.subtract(c))), f = h.getSide(c);
                0 == f ? p = u * Math.abs(p) :u == f && (p -= 360 * (0 > p ? -1 :1));
                for (var g = Math.abs(p), m = g >= 360 ? 4 :Math.ceil(g / 90), _ = p / m, v = _ * Math.PI / 360, y = 4 / 3 * Math.sin(v) / (1 + Math.cos(v)), b = [], w = 0; m >= w; w++) {
                    var C = m > w ? c.add(d) :e, T = m > w ? d.rotate(90).multiply(y) :null;
                    0 == w ? o.setHandleOut(T) :b.push(new Segment(C, d.rotate(-90).multiply(y), T)), 
                    d = d.rotate(_);
                }
                this._add(b);
            },
            lineBy:function(e) {
                e = Point.read(arguments);
                var i = t(this);
                this.lineTo(i._point.add(e));
            },
            curveBy:function(e, i, n) {
                e = Point.read(e), i = Point.read(i);
                var o = t(this)._point;
                this.curveTo(o.add(e), o.add(i), n);
            },
            arcBy:function(e, i) {
                e = Point.read(e), i = Point.read(i);
                var n = t(this)._point;
                this.arcBy(n.add(e), n.add(i));
            },
            closePath:function() {
                this.setClosed(!0);
            }
        };
    }(), new function() {
        function t(t, e, i) {
            function n(t) {
                function n(t, e) {
                    var n = 0;
                    if (null == t) {
                        var s = 1 - e;
                        t = s * s * s * r + 3 * s * s * e * d + 3 * s * e * e * p + e * e * e * f, n = i ? i[o] :0;
                    }
                    var a = t - n, h = t + n;
                    a < l[o] && (l[o] = a), h > c[o] && (c[o] = h);
                }
                t._transformCoordinates(e, s, !1);
                for (var o = 0; 2 > o; o++) {
                    var r = a[o], d = a[o + 4], p = s[o + 2], f = s[o];
                    n(f, null);
                    var g = 3 * (d - p) - r + f, m = 2 * (r + p) - 4 * d, _ = d - r;
                    if (0 != g) {
                        var v = m * m - 4 * g * _;
                        if (!(0 > v)) {
                            var y = Math.sqrt(v), b = -.5 / g, w = (m - y) * b, C = (m + y) * b;
                            w > h && u > w && n(null, w), C > h && u > C && n(null, C);
                        }
                    } else {
                        if (0 == m) continue;
                        var T = -_ / m;
                        T > h && u > T && n(null, T);
                    }
                }
                var D = a;
                a = s, s = D;
            }
            var o = t._segments, r = o[0];
            if (!r) return null;
            var s = new Array(6), a = new Array(6);
            e && e.isIdentity() && (e = null), r._transformCoordinates(e, a, !1);
            for (var l = a.slice(0, 2), c = l.slice(0), h = Numerical.TOLERANCE, u = 1 - h, d = 1, p = o.length; p > d; d++) n(o[d]);
            return t._closed && n(r), Rectangle.create(l[0], l[1], c[0] - l[0], c[1] - l[1]);
        }
        function e(t, e) {
            if (!e) return [ t, t ];
            var i = e.createShiftless(), n = i.transform(new Point(t, 0)), o = i.transform(new Point(0, t)), r = n.getAngleInRadians(), s = n.getLength(), a = o.getLength(), l = -Math.atan(a * Math.tan(r)), c = +Math.atan(a / Math.tan(r)), h = s * Math.cos(l) * Math.cos(r) - a * Math.sin(l) * Math.sin(r), u = a * Math.sin(c) * Math.cos(r) + s * Math.cos(c) * Math.sin(r);
            return [ Math.abs(h), Math.abs(u) ];
        }
        return {
            getBounds:function() {
                var e = void 0 === arguments[0];
                if (e && this._bounds) return this._bounds;
                var i = this._createBounds(t(this, arguments[0]));
                return e && (this._bounds = i), i;
            },
            getStrokeBounds:function() {
                function i(t) {
                    m = m.include(a ? a.transform(t) :t);
                }
                function n(t, e) {
                    var n = t.getPoint(e), o = t.getNormal(e).normalize(c);
                    i(n.add(o)), i(n.subtract(o));
                }
                function o(t, e) {
                    if ("round" === e || !t._handleIn.isZero() && !t._handleOut.isZero()) m = m.unite(_.setCenter(a ? a.transform(t._point) :t._point)); else if ("bevel" == e) {
                        var r = t.getCurve();
                        n(r, 0), n(r.getPrevious(), 1);
                    } else if ("miter" == e) {
                        var s = t.getCurve(), l = s.getPrevious(), h = s.getPoint(0), u = l.getNormal(1).normalize(c), d = s.getNormal(0).normalize(c), f = new Line(h.subtract(u), new Point(-u.y, u.x)), g = new Line(h.subtract(d), new Point(-d.y, d.x)), v = f.intersect(g);
                        !v || h.getDistance(v) > p ? o(t, "bevel") :i(v);
                    }
                }
                function r(t, e, n) {
                    switch (e) {
                      case "round":
                        return o(t, e);

                      case "butt":
                      case "square":
                        var r = t.getCurve(), s = r.getPoint(n), a = r.getNormal(n).normalize(c);
                        "square" === e && (s = s.add(a.y, -a.x)), i(s.add(a)), i(s.subtract(a));
                    }
                }
                if (!this._style._strokeColor || !this._style._strokeWidth) return this.getBounds.apply(this, arguments);
                var s = void 0 === arguments[0];
                if (s && this._strokeBounds) return this._strokeBounds;
                for (var a = arguments[0], l = this.getStrokeWidth(), c = l / 2, h = e(c, a), u = this.getStrokeJoin(), d = this.getStrokeCap(), p = this.getMiterLimit() * l / 2, f = this._segments, g = f.length, m = t(this, a, e(c)), _ = new Rectangle(new Size(h).multiply(2)), v = 1, y = g - (this._closed ? 0 :1); y > v; v++) o(f[v], u);
                return this._closed ? o(f[0], u) :(r(f[0], d, 0), r(f[g - 1], d, 1)), s && (this._strokeBounds = m), 
                m;
            },
            getHandleBounds:function() {
                var t = arguments[0], e = void 0 === t;
                if (e && this._handleBounds) return this._handleBounds;
                for (var i = new Array(6), n = arguments[1] / 2 || 0, o = arguments[2] / 2 || 0, r = (!this._closed, 
                1/0), s = -r, a = r, l = s, c = 0, h = this._segments.length; h > c; c++) {
                    var u = this._segments[c];
                    u._transformCoordinates(t, i, !1);
                    for (var d = 0; 6 > d; d += 2) {
                        var p = 0 == d ? o :n, f = i[d], g = i[d + 1], m = f - p, _ = f + p, v = g - p, y = g + p;
                        r > m && (r = m), _ > s && (s = _), a > v && (a = v), y > l && (l = y);
                    }
                }
                var b = Rectangle.create(r, a, s - r, l - a);
                return e && (this._handleBounds = b), b;
            },
            getRoughBounds:function() {
                var t = void 0 === arguments[0];
                if (t && this._roughBounds) return this._roughBounds;
                var e = this.getHandleBounds(arguments[0], this.strokeWidth, "miter" == this.getStrokeJoin() ? this.strokeWidth * this.getMiterLimit() :this.strokeWidth);
                return t && (this._roughBounds = e), e;
            }
        };
    }());
    Path.inject({
        statics:new function() {
            var t = 2 / 3 * (Math.sqrt(2) - 1), e = [ new Segment([ 0, .5 ], [ 0, t ], [ 0, -t ]), new Segment([ .5, 0 ], [ -t, 0 ], [ t, 0 ]), new Segment([ 1, .5 ], [ 0, -t ], [ 0, t ]), new Segment([ .5, 1 ], [ t, 0 ], [ -t, 0 ]) ];
            return {
                Line:function() {
                    var t = Math.floor(arguments.length / 2);
                    return new Path(Segment.read(arguments, 0, t), Segment.read(arguments, t, t));
                },
                Rectangle:function(t) {
                    t = Rectangle.read(arguments);
                    var e = t.x, i = t.y;
                    return right = e + t.width, bottom = i + t.height, path = new Path(), path._add([ new Segment(Point.create(e, bottom)), new Segment(Point.create(e, i)), new Segment(Point.create(right, i)), new Segment(Point.create(right, bottom)) ]), 
                    path._closed = !0, path;
                },
                RoundRectangle:function(e, i) {
                    2 == arguments.length ? (e = Rectangle.read(arguments, 0, 1), i = Size.read(arguments, 1, 1)) :6 == arguments.length && (e = Rectangle.read(arguments, 0, 4), 
                    i = Size.read(arguments, 4, 2)), i = Size.min(i, e.getSize(!0).divide(2));
                    var n = new Path(), o = i.multiply(2 * t), r = e.getBottomLeft(!0), s = e.getTopLeft(!0), a = e.getTopRight(!0), l = e.getBottomRight(!0);
                    return n._add([ new Segment(r.add(i.width, 0), null, [ -o.width, 0 ]), new Segment(r.subtract(0, i.height), [ 0, o.height ], null), new Segment(s.add(0, i.height), null, [ 0, -o.height ]), new Segment(s.add(i.width, 0), [ -o.width, 0 ], null), new Segment(a.subtract(i.width, 0), null, [ o.width, 0 ]), new Segment(a.add(0, i.height), [ 0, -o.height ], null), new Segment(l.subtract(0, i.height), null, [ 0, o.height ]), new Segment(l.subtract(i.width, 0), [ o.width, 0 ], null) ]), 
                    n._closed = !0, n;
                },
                Oval:function(t) {
                    t = Rectangle.read(arguments);
                    for (var i = new Path(), n = t.getPoint(!0), o = t.getSize(!0), r = new Array(4), s = 0; 4 > s; s++) {
                        var a = e[s];
                        r[s] = new Segment(a._point.multiply(o).add(n), a._handleIn.multiply(o), a._handleOut.multiply(o));
                    }
                    return i._add(r), i._closed = !0, i;
                },
                Circle:function(t, e) {
                    return 3 == arguments.length ? (t = Point.read(arguments, 0, 2), e = arguments[2]) :t = Point.read(arguments, 0, 1), 
                    Path.Oval(new Rectangle(t.subtract(e), Size.create(2 * e, 2 * e)));
                },
                Arc:function(t, e, i) {
                    var n = new Path();
                    return n.moveTo(t), n.arcTo(e, i), n;
                },
                RegularPolygon:function(t, e, i) {
                    t = Point.read(arguments, 0, 1);
                    for (var n = new Path(), o = 360 / e, r = !(e % 3), s = new Point(0, r ? -i :i), a = r ? -1 :.5, l = new Array(e), c = 0; e > c; c++) l[c] = new Segment(t.add(s.rotate((c + a) * o)));
                    return n._add(l), n._closed = !0, n;
                },
                Star:function(t, e, i, n) {
                    t = Point.read(arguments, 0, 1), e *= 2;
                    for (var o = new Path(), r = 360 / e, s = new Point(0, -1), a = new Array(e), l = 0; e > l; l++) a[l] = new Segment(t.add(s.rotate(r * l).multiply(l % 2 ? n :i)));
                    return o._add(a), o._closed = !0, o;
                }
            };
        }()
    });
    var CompoundPath = this.CompoundPath = PathItem.extend({
        initialize:function(t) {
            this.base(), this._children = [], this._namedChildren = {};
            var e = t && Array.isArray(t) && "object" == typeof t[0] ? t :arguments;
            this.addChildren(e);
        },
        insertChild:function(t, e) {
            this.base(t, e), void 0 === e._clockwise && e.setClockwise(0 == e._index);
        },
        simplify:function() {
            if (1 == this._children.length) {
                var t = this._children[0];
                return t.insertAbove(this), this.remove(), t;
            }
            return this;
        },
        smooth:function() {
            for (var t = 0, e = this._children.length; e > t; t++) this._children[t].smooth();
        },
        draw:function(t, e) {
            var i = this._children.length;
            if (0 != i) {
                var n = this._children[0];
                t.beginPath(), e.compound = !0;
                for (var o = 0; i > o; o++) Item.draw(this._children[o], t, e);
                n._setStyles(t);
                var r = n.getFillColor(), s = n.getStrokeColor();
                r && (t.fillStyle = r.getCanvasStyle(t), t.fill()), s && (t.strokeStyle = s.getCanvasStyle(t), 
                t.stroke()), e.compound = !1;
            }
        }
    }, new function() {
        function t(t) {
            if (!t._children.length) throw new Error("Use a moveTo() command first");
            return t._children[t._children.length - 1];
        }
        var e = {
            moveTo:function() {
                var t = new Path();
                this.addChild(t), t.moveTo.apply(t, arguments);
            },
            moveBy:function() {
                this.moveTo(t(this).getLastSegment()._point.add(Point.read(arguments)));
            },
            closePath:function() {
                t(this).setClosed(!0);
            }
        };
        return Base.each([ "lineTo", "cubicCurveTo", "quadraticCurveTo", "curveTo", "arcTo", "lineBy", "curveBy", "arcBy" ], function(i) {
            e[i] = function() {
                var e = t(this);
                e[i].apply(e, arguments);
            };
        }), e;
    }()), PathFlattener = this.PathFlattener = Base.extend({
        initialize:function(t) {
            function e(t, e) {
                var i = Curve.getValues(t, e);
                r.curves.push(i), r._computeParts(i, t._index, 0, 1);
            }
            this.curves = [], this.parts = [], this.length = 0, this.index = 0;
            for (var i, n = t._segments, o = n[0], r = this, s = 1, a = n.length; a > s; s++) i = n[s], 
            e(o, i), o = i;
            t._closed && e(i, n[0]);
        },
        _computeParts:function(t, e, i, n) {
            if (n - i > 1 / 32 && !Curve.isFlatEnough(t)) {
                var o = Curve.subdivide(t), r = (i + n) / 2;
                this._computeParts(o[0], e, i, r), this._computeParts(o[1], e, r, n);
            } else {
                var s = t[6] - t[0], a = t[7] - t[1], l = Math.sqrt(s * s + a * a);
                l > Numerical.TOLERANCE && (this.length += l, this.parts.push({
                    offset:this.length,
                    value:n,
                    index:e
                }));
            }
        },
        getParameterAt:function(t) {
            for (var e, i = this.index; e = i, !(0 == i || this.parts[--i].offset < t); ) ;
            for (var n = this.parts.length; n > e; e++) {
                var o = this.parts[e];
                if (o.offset >= t) {
                    this.index = e;
                    var r = this.parts[e - 1], s = r && r.index == o.index ? r.value :0, a = r ? r.offset :0;
                    return {
                        value:s + (o.value - s) * (t - a) / (o.offset - a),
                        index:o.index
                    };
                }
            }
            var o = this.parts[this.parts.length - 1];
            return {
                value:1,
                index:o.index
            };
        },
        evaluate:function(t, e) {
            var i = this.getParameterAt(t);
            return Curve.evaluate(this.curves[i.index], i.value, e);
        },
        drawPart:function(t, e, i) {
            e = this.getParameterAt(e), i = this.getParameterAt(i);
            for (var n = e.index; n <= i.index; n++) {
                var o = Curve.getPart(this.curves[n], n == e.index ? e.value :0, n == i.index ? i.value :1);
                n == e.index && t.moveTo(o[0], o[1]), t.bezierCurveTo.apply(t, o.slice(2));
            }
        }
    }), PathFitter = Base.extend({
        initialize:function(t, e) {
            this.points = [];
            for (var i, n = t._segments, o = 0, r = n.length; r > o; o++) {
                var s = n[o].point.clone();
                i && i.equals(s) || (this.points.push(s), i = s);
            }
            this.error = e;
        },
        fit:function() {
            return this.segments = [ new Segment(this.points[0]) ], this.fitCubic(0, this.points.length - 1, this.points[1].subtract(this.points[0]).normalize(), this.points[this.points.length - 2].subtract(this.points[this.points.length - 1]).normalize()), 
            this.segments;
        },
        fitCubic:function(t, e, i, n) {
            if (e - t == 1) {
                var o = this.points[t], r = this.points[e], s = o.getDistance(r) / 3;
                return this.addCurve([ o, o.add(i.normalize(s)), r.add(n.normalize(s)), r ]), void 0;
            }
            for (var a, l = this.chordLengthParameterize(t, e), c = Math.max(this.error, this.error * this.error), h = 0; 4 >= h; h++) {
                var u = this.generateBezier(t, e, l, i, n), d = this.findMaxError(t, e, u, l);
                if (d.error < this.error) return this.addCurve(u), void 0;
                if (a = d.index, d.error >= c) break;
                this.reparameterize(t, e, l, u), c = d.error;
            }
            var p = this.points[a - 1].subtract(this.points[a]), f = this.points[a].subtract(this.points[a + 1]), g = p.add(f).divide(2).normalize();
            this.fitCubic(t, a, i, g), this.fitCubic(a, e, g.negate(), n);
        },
        addCurve:function(t) {
            var e = this.segments[this.segments.length - 1];
            e.setHandleOut(t[1].subtract(t[0])), this.segments.push(new Segment(t[3], t[2].subtract(t[3])));
        },
        generateBezier:function(t, e, i, n, o) {
            for (var r = Numerical.EPSILON, s = this.points[t], a = this.points[e], l = [ [ 0, 0 ], [ 0, 0 ] ], c = [ 0, 0 ], h = 0, u = e - t + 1; u > h; h++) {
                var d = i[h], p = 1 - d, f = 3 * d * p, g = p * p * p, m = f * p, _ = f * d, v = d * d * d, y = n.normalize(m), b = o.normalize(_), w = this.points[t + h].subtract(s.multiply(g + m)).subtract(a.multiply(_ + v));
                l[0][0] += y.dot(y), l[0][1] += y.dot(b), l[1][0] = l[0][1], l[1][1] += b.dot(b), 
                c[0] += y.dot(w), c[1] += b.dot(w);
            }
            var C, T, D = l[0][0] * l[1][1] - l[1][0] * l[0][1];
            if (Math.abs(D) > r) {
                var E = l[0][0] * c[1] - l[1][0] * c[0], x = c[0] * l[1][1] - c[1] * l[0][1];
                C = x / D, T = E / D;
            } else {
                var S = l[0][0] + l[0][1], O = l[1][0] + l[1][1];
                C = T = Math.abs(S) > r ? c[0] / S :Math.abs(S) > r ? c[1] / O :0;
            }
            var k = a.getDistance(s);
            return r *= k, (r > C || r > T) && (C = T = k / 3), [ s, s.add(n.normalize(C)), a.add(o.normalize(T)), a ];
        },
        reparameterize:function(t, e, i, n) {
            for (var o = t; e >= o; o++) i[o - t] = this.findRoot(n, this.points[o], i[o - t]);
        },
        findRoot:function(t, e, i) {
            for (var n = [], o = [], r = 0; 2 >= r; r++) n[r] = t[r + 1].subtract(t[r]).multiply(3);
            for (var r = 0; 1 >= r; r++) o[r] = n[r + 1].subtract(n[r]).multiply(2);
            var s = this.evaluate(3, t, i), a = this.evaluate(2, n, i), l = this.evaluate(1, o, i), c = s.subtract(e), h = a.dot(a) + c.dot(l);
            return Math.abs(h) < Numerical.TOLERANCE ? i :i - c.dot(a) / h;
        },
        evaluate:function(t, e, i) {
            for (var n = e.slice(), o = 1; t >= o; o++) for (var r = 0; t - o >= r; r++) n[r] = n[r].multiply(1 - i).add(n[r + 1].multiply(i));
            return n[0];
        },
        chordLengthParameterize:function(t, e) {
            for (var i = [ 0 ], n = t + 1; e >= n; n++) i[n - t] = i[n - t - 1] + this.points[n].getDistance(this.points[n - 1]);
            for (var n = 1, o = e - t; o >= n; n++) i[n] /= i[o];
            return i;
        },
        findMaxError:function(t, e, i, n) {
            for (var o = Math.floor((e - t + 1) / 2), r = 0, s = t + 1; e > s; s++) {
                var a = this.evaluate(3, i, n[s - t]), l = a.subtract(this.points[s]), c = l.x * l.x + l.y * l.y;
                c >= r && (r = c, o = s);
            }
            return {
                error:r,
                index:o
            };
        }
    }), TextItem = this.TextItem = Item.extend({
        initialize:function() {
            this.base(), this._content = "", this._characterStyle = CharacterStyle.create(this), 
            this.setCharacterStyle(this._project.getCurrentStyle()), this._paragraphStyle = ParagraphStyle.create(this), 
            this.setParagraphStyle();
        },
        _clone:function(t) {
            return t._content = this._content, t.setCharacterStyle(this._characterStyle), t.setParagraphStyle(this._paragraphStyle), 
            this.base(t);
        },
        getContent:function() {
            return this._content;
        },
        setContent:function(t) {
            this._changed(Change.CONTENT), this._content = "" + t;
        },
        getCharacterStyle:function() {
            return this._characterStyle;
        },
        setCharacterStyle:function(t) {
            this._characterStyle.initialize(t);
        },
        getParagraphStyle:function() {
            return this._paragraphStyle;
        },
        setParagraphStyle:function(t) {
            this._paragraphStyle.initialize(t);
        }
    }), PointText = this.PointText = TextItem.extend({
        initialize:function() {
            this.base(), this._point = Point.read(arguments).clone(), this._matrix = new Matrix().translate(this._point);
        },
        clone:function() {
            var t = this._clone(new PointText(this._point));
            return t._matrix.initialize(this._matrix), t;
        },
        getPoint:function() {
            return LinkedPoint.create(this, "setPoint", this._point.x, this._point.y);
        },
        setPoint:function() {
            this.translate(Point.read(arguments).subtract(this._point));
        },
        getPosition:function() {
            return this.getPoint();
        },
        setPosition:function() {
            this.setPoint.apply(this, arguments);
        },
        _transform:function(t) {
            this._matrix.preConcatenate(t), t._transformPoint(this._point, this._point);
        },
        draw:function(t) {
            if (this._content) {
                t.save(), t.font = this.getFontSize() + "pt " + this.getFont(), t.textAlign = this.getJustification(), 
                this._matrix.applyToContext(t);
                var e = this.getFillColor(), i = this.getStrokeColor();
                e && i || (t.globalAlpha = this._opacity), e && (t.fillStyle = e.getCanvasStyle(t), 
                t.fillText(this._content, 0, 0)), i && (t.strokeStyle = i.getCanvasStyle(t), t.strokeText(this._content, 0, 0)), 
                t.restore();
            }
        }
    }), Style = Item.extend({
        initialize:function(t) {
            var e = t instanceof Style;
            return Base.each(this._defaults, function(i, n) {
                i = t && t[n] || i, this[n] = i && e && i.clone ? i.clone() :i;
            }, this);
        },
        statics:{
            create:function(t) {
                var e = new this(this.dont);
                return e._item = t, e;
            },
            extend:function(t) {
                var e = t._style, i = t._flags || {};
                return t._owner.inject(Base.each(t._defaults, function(n, o) {
                    var r = !!o.match(/Color$/), s = Base.capitalize(o), a = "set" + s, l = "get" + s;
                    t[a] = function(t) {
                        this._item && this._item._children;
                        t = r ? Color.read(arguments) :t;
                        var e = this["_" + o];
                        return e == t || e && e.equals && e.equals(t) || (this["_" + o] = t, r && (e && e._removeOwner(this._item), 
                        t && t._addOwner(this._item)), this._item && this._item._changed(i[o] || Change.STYLE)), 
                        this;
                    }, t[l] = function() {
                        this._item && this._item._children;
                        return this["_" + o];
                    }, this[a] = function(t) {
                        return this[e][a](t), this;
                    }, this[l] = function() {
                        return this[e][l]();
                    };
                }, {})), this.base(t);
            }
        }
    }), PathStyle = this.PathStyle = Style.extend({
        _defaults:{
            fillColor:void 0,
            strokeColor:void 0,
            strokeWidth:1,
            strokeCap:"butt",
            strokeJoin:"miter",
            miterLimit:10,
            dashOffset:0,
            dashArray:[]
        },
        _flags:{
            strokeWidth:Change.STROKE,
            strokeCap:Change.STROKE,
            strokeJoin:Change.STROKE,
            miterLimit:Change.STROKE
        },
        _owner:Item,
        _style:"_style"
    }), ParagraphStyle = this.ParagraphStyle = Style.extend({
        _defaults:{
            justification:"left"
        },
        _owner:TextItem,
        _style:"_paragraphStyle"
    }), CharacterStyle = this.CharacterStyle = PathStyle.extend({
        _defaults:Base.merge(PathStyle.prototype._defaults, {
            fillColor:"black",
            fontSize:10,
            font:"sans-serif"
        }),
        _owner:TextItem,
        _style:"_characterStyle"
    }), Color = this.Color = Base.extend(new function() {
        function t(t) {
            var e = o[t];
            if (e) return e.clone();
            if (!i) {
                var n = CanvasProvider.getCanvas(Size.create(1, 1));
                i = n.getContext("2d"), i.globalCompositeOperation = "copy";
            }
            i.fillStyle = "rgba(0,0,0,0)", i.fillStyle = t, i.fillRect(0, 0, 1, 1);
            var r = i.getImageData(0, 0, 1, 1).data, s = [ r[0] / 255, r[1] / 255, r[2] / 255 ];
            return (o[t] = RGBColor.read(s)).clone();
        }
        function e(t) {
            var e = t.match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);
            if (e.length >= 4) {
                for (var i = new Array(3), n = 0; 3 > n; n++) {
                    var o = e[n + 1];
                    i[n] = parseInt(1 == o.length ? o + o :o, 16) / 255;
                }
                return RGBColor.read(i);
            }
        }
        var i, n = {
            gray:[ "gray" ],
            rgb:[ "red", "green", "blue" ],
            hsb:[ "hue", "saturation", "brightness" ],
            hsl:[ "hue", "saturation", "lightness" ]
        }, o = {}, r = [ [ 0, 3, 1 ], [ 2, 0, 1 ], [ 1, 0, 3 ], [ 1, 2, 0 ], [ 3, 1, 0 ], [ 0, 1, 2 ] ], s = {
            "rgb-hsb":function(t) {
                var e = t._red, i = t._green, n = t._blue, o = Math.max(e, i, n), r = Math.min(e, i, n), s = o - r, a = 0 == s ? 0 :60 * (o == e ? (i - n) / s + (n > i ? 6 :0) :o == i ? (n - e) / s + 2 :(e - i) / s + 4), l = 0 == o ? 0 :s / o, c = o;
                return new HSBColor(a, l, c, t._alpha);
            },
            "hsb-rgb":function(t) {
                var e = t._hue / 60 % 6, i = t._saturation, n = t._brightness, o = Math.floor(e), s = e - o, o = r[o], a = [ n, n * (1 - i), n * (1 - i * s), n * (1 - i * (1 - s)) ];
                return new RGBColor(a[o[0]], a[o[1]], a[o[2]], t._alpha);
            },
            "rgb-hsl":function(t) {
                var e = t._red, i = t._green, n = t._blue, o = Math.max(e, i, n), r = Math.min(e, i, n), s = o - r, a = 0 == s, l = a ? 0 :60 * (o == e ? (i - n) / s + (n > i ? 6 :0) :o == i ? (n - e) / s + 2 :(e - i) / s + 4), c = (o + r) / 2, h = a ? 0 :.5 > c ? s / (o + r) :s / (2 - o - r);
                return new HSLColor(l, h, c, t._alpha);
            },
            "hsl-rgb":function(t) {
                var e, i, n, o = t._saturation, r = t._hue / 360, s = t._lightness;
                if (0 == o) return new RGBColor(s, s, s, t._alpha);
                for (var a = [ r + 1 / 3, r, r - 1 / 3 ], i = .5 > s ? s * (1 + o) :s + o - s * o, e = 2 * s - i, n = [], l = 0; 3 > l; l++) {
                    var c = a[l];
                    0 > c && (c += 1), c > 1 && (c -= 1), n[l] = 1 > 6 * c ? e + 6 * (i - e) * c :1 > 2 * c ? i :2 > 3 * c ? e + (i - e) * (2 / 3 - c) * 6 :e;
                }
                return new RGBColor(n[0], n[1], n[2], t._alpha);
            },
            "rgb-gray":function(t) {
                return new GrayColor(1 - (.2989 * t._red + .587 * t._green + .114 * t._blue), t._alpha);
            },
            "gray-rgb":function(t) {
                var e = 1 - t._gray;
                return new RGBColor(e, e, e, t._alpha);
            },
            "gray-hsb":function(t) {
                return new HSBColor(0, 0, 1 - t._gray, t._alpha);
            },
            "gray-hsl":function(t) {
                return new HSLColor(0, 0, 1 - t._gray, t._alpha);
            }
        }, a = {
            _readNull:!0,
            initializeAndReturn:function(i) {
                var n = Array.isArray(i), o = this._colorType;
                if ("object" == typeof i && !n) return o ? Color.read(arguments).convert(o) :void 0 !== i.red ? new RGBColor(i.red, i.green, i.blue, i.alpha) :void 0 !== i.gray ? new GrayColor(i.gray, i.alpha) :void 0 !== i.lightness ? new HSLColor(i.hue, i.saturation, i.lightness, i.alpha) :void 0 !== i.hue ? new HSBColor(i.hue, i.saturation, i.brightness, i.alpha) :new RGBColor();
                if ("string" == typeof i) {
                    var r = i.match(/^#[0-9a-f]{3,6}$/i) ? e(i) :t(i);
                    return o ? r.convert(o) :r;
                }
                var s = n ? i :Array.prototype.slice.call(arguments);
                return o ? (Base.each(this._components, function(t, e) {
                    var i = s[e];
                    this["_" + t] = void 0 !== i ? i :null;
                }, this), void 0) :s.length >= 3 ? new RGBColor(s) :new GrayColor(s);
            },
            clone:function() {
                for (var t = this.constructor, e = new t(t.dont), i = this._components, n = 0, o = i.length; o > n; n++) {
                    var r = "_" + i[n];
                    e[r] = this[r];
                }
                return e;
            },
            convert:function(t) {
                var e;
                return this._colorType == t ? this.clone() :(e = s[this._colorType + "-" + t]) ? e(this) :s["rgb-" + t](s[this._colorType + "-rgb"](this));
            },
            statics:{
                extend:function(t) {
                    if (t.beans = !0, t._colorType) {
                        var e = n[t._colorType];
                        t._components = e.concat([ "alpha" ]), Base.each(e, function(t) {
                            var e = "hue" === t, i = Base.capitalize(t), t = "_" + t;
                            this["get" + i] = function() {
                                return this[t];
                            }, this["set" + i] = function(i) {
                                return this[t] = e ? (i % 360 + 360) % 360 :Math.min(Math.max(i, 0), 1), this._changed(), 
                                this;
                            };
                        }, t);
                    }
                    return this.base(t);
                }
            }
        };
        return Base.each(n, function(t, e) {
            Base.each(t, function(t) {
                var i = Base.capitalize(t);
                a["get" + i] = function() {
                    return this.convert(e)[t];
                }, a["set" + i] = function(i) {
                    var n = this.convert(e);
                    n[t] = i, n = n.convert(this._colorType);
                    for (var o = 0, r = this._components.length; r > o; o++) {
                        var s = this._components[o];
                        this[s] = n[s];
                    }
                };
            });
        }), a;
    }(), {
        _changed:function() {
            this._cssString = null;
            for (var t = 0, e = this._owners && this._owners.length; e > t; t++) this._owners[t]._changed(Change.STYLE);
        },
        _addOwner:function(t) {
            this._owners || (this._owners = []), this._owners.push(t);
        },
        _removeOwner:function(t) {
            var e = this._owners ? this._owners.indexOf(t) :-1;
            -1 != e && (this._owners.splice(e, 1), 0 == this._owners.length && delete this._owners);
        },
        getType:function() {
            return this._colorType;
        },
        getComponents:function() {
            for (var t = this._components.length, e = new Array(t), i = 0; t > i; i++) e[i] = this["_" + this._components[i]];
            return e;
        },
        getAlpha:function() {
            return null != this._alpha ? this._alpha :1;
        },
        setAlpha:function(t) {
            return this._alpha = null == t ? null :Math.min(Math.max(t, 0), 1), this._changed(), 
            this;
        },
        hasAlpha:function() {
            return null != this._alpha;
        },
        equals:function(t) {
            if (!t) return !1;
            if (t && t._colorType === this._colorType) {
                for (var e = 0, i = this._components.length; i > e; e++) {
                    var n = "_" + this._components[e];
                    if (this[n] !== t[n]) return !1;
                }
                return !0;
            }
            return !1;
        },
        toString:function() {
            for (var t = [], e = Base.formatNumber, i = 0, n = this._components.length; n > i; i++) {
                var o = this._components[i], r = this["_" + o];
                "alpha" === o && null == r && (r = 1), t.push(o + ": " + e(r));
            }
            return "{ " + t.join(", ") + " }";
        },
        toCssString:function() {
            if (!this._cssString) {
                var t = this.convert("rgb"), e = t.getAlpha(), i = [ Math.round(255 * t._red), Math.round(255 * t._green), Math.round(255 * t._blue), null != e ? e :1 ];
                this._cssString = "rgba(" + i.join(", ") + ")";
            }
            return this._cssString;
        },
        getCanvasStyle:function() {
            return this.toCssString();
        }
    }), GrayColor = this.GrayColor = Color.extend({
        _colorType:"gray"
    }), RGBColor = this.RGBColor = Color.extend({
        _colorType:"rgb"
    }), HSBColor = this.HSBColor = Color.extend({
        _colorType:"hsb"
    }), HSLColor = this.HSLColor = Color.extend({
        _colorType:"hsl"
    }), GradientColor = this.GradientColor = Color.extend({
        initialize:function(t, e, i, n) {
            this.gradient = t || new Gradient(), this.setOrigin(e), this.setDestination(i), 
            n && this.setHilite(n);
        },
        clone:function() {
            return new GradientColor(this.gradient, this._origin, this._destination, this._hilite);
        },
        getOrigin:function() {
            return this._origin;
        },
        setOrigin:function(t) {
            return t = Point.read(arguments).clone(), this._origin = t, this._destination && (this._radius = this._destination.getDistance(this._origin)), 
            this._changed(), this;
        },
        getDestination:function() {
            return this._destination;
        },
        setDestination:function(t) {
            return t = Point.read(arguments).clone(), this._destination = t, this._radius = this._destination.getDistance(this._origin), 
            this._changed(), this;
        },
        getHilite:function() {
            return this._hilite;
        },
        setHilite:function(t) {
            t = Point.read(arguments).clone();
            var e = t.subtract(this._origin);
            return this._hilite = e.getLength() > this._radius ? this._origin.add(e.normalize(this._radius - .1)) :t, 
            this._changed(), this;
        },
        getCanvasStyle:function(t) {
            var e;
            if ("linear" === this.gradient.type) e = t.createLinearGradient(this._origin.x, this._origin.y, this._destination.x, this._destination.y); else {
                var i = this._hilite || this._origin;
                e = t.createRadialGradient(i.x, i.y, 0, this._origin.x, this._origin.y, this._radius);
            }
            for (var n = 0, o = this.gradient._stops.length; o > n; n++) {
                var r = this.gradient._stops[n];
                e.addColorStop(r._rampPoint, r._color.toCssString());
            }
            return e;
        },
        equals:function(t) {
            return t == this || t && t._colorType === this._colorType && this.gradient.equals(t.gradient) && this._origin.equals(t._origin) && this._destination.equals(t._destination);
        },
        transform:function(t) {
            t._transformPoint(this._origin, this._origin, !0), t._transformPoint(this._destination, this._destination, !0), 
            this._hilite && t._transformPoint(this._hilite, this._hilite, !0), this._radius = this._destination.getDistance(this._origin);
        }
    }), Gradient = this.Gradient = Base.extend({
        initialize:function(t, e) {
            this.setStops(t || [ "white", "black" ]), this.type = e || "linear";
        },
        clone:function() {
            for (var t = [], e = 0, i = this._stops.length; i > e; e++) t[e] = this._stops[e].clone();
            return new Gradient(t, this.type);
        },
        getStops:function() {
            return this._stops;
        },
        setStops:function(t) {
            if (t.length < 2) throw new Error("Gradient stop list needs to contain at least two stops.");
            this._stops = GradientStop.readAll(t);
            for (var e = 0, i = this._stops.length; i > e; e++) {
                var n = this._stops[e];
                n._defaultRamp && n.setRampPoint(e / (i - 1));
            }
        },
        equals:function(t) {
            if (!t) return !1;
            if (t.type != this.type) return !1;
            if (this._stops.length == t._stops.length) {
                for (var e = 0, i = this._stops.length; i > e; e++) if (!this._stops[e].equals(t._stops[e])) return !1;
                return !0;
            }
            return !1;
        }
    }), GradientStop = this.GradientStop = Base.extend({
        initialize:function(t, e) {
            void 0 === e && Array.isArray(t) ? (this.setColor(t[0]), this.setRampPoint(t[1])) :t.color ? (this.setColor(t.color), 
            this.setRampPoint(t.rampPoint)) :(this.setColor(t), this.setRampPoint(e));
        },
        clone:function() {
            return new GradientStop(this._color.clone(), this._rampPoint);
        },
        getRampPoint:function() {
            return this._rampPoint;
        },
        setRampPoint:function(t) {
            this._defaultRamp = null == t, this._rampPoint = t || 0;
        },
        getColor:function() {
            return this._color;
        },
        setColor:function() {
            this._color = Color.read(arguments);
        },
        equals:function(t) {
            return t ? t == this || t instanceof GradientStop && this._color.equals(t._color) && this._rampPoint == t._rampPoint :!1;
        }
    }), DomElement = {
        getBounds:function(t, e) {
            var i = t.getBoundingClientRect(), n = t.ownerDocument, o = n.body, r = n.documentElement, s = i.left - (r.clientLeft || o.clientLeft || 0), a = i.top - (r.clientTop || o.clientTop || 0);
            if (!e) {
                var l = DomElement.getViewport(n);
                s += l.pageXOffset || r.scrollLeft || o.scrollLeft, a += l.pageYOffset || r.scrollTop || o.scrollTop;
            }
            return new Rectangle(s, a, i.width, i.height);
        },
        getOffset:function(t, e) {
            return this.getBounds(t, e).getPoint();
        },
        getSize:function(t) {
            return this.getBounds(t, !0).getSize();
        },
        isInvisible:function(t) {
            return this.getSize(t).equals([ 0, 0 ]);
        },
        isVisible:function(t) {
            return !this.isInvisible(t) && this.getViewportBounds(t).intersects(this.getBounds(t, !0));
        },
        getViewport:function(t) {
            return t.defaultView || t.parentWindow;
        },
        getViewportBounds:function(t) {
            var e = t.ownerDocument, i = this.getViewport(e), n = e.getElementsByTagName("CSS1Compat" === e.compatMode ? "html" :"body")[0];
            return Rectangle.create(0, 0, i.innerWidth || n.clientWidth, i.innerHeight || n.clientHeight);
        },
        getComputedStyle:function(t, e) {
            if (t.currentStyle) return t.currentStyle[Base.camelize(e)];
            var i = this.getViewport(t.ownerDocument).getComputedStyle(t, null);
            return i ? i.getPropertyValue(Base.hyphenate(e)) :null;
        }
    }, DomEvent = this.DomEvent = {
        add:function(t, e) {
            for (var i in e) {
                var n = e[i];
                t.addEventListener ? t.addEventListener(i, n, !1) :t.attachEvent && t.attachEvent("on" + i, n.bound = function() {
                    n.call(t, window.event);
                });
            }
        },
        remove:function(t, e) {
            for (var i in e) {
                var n = e[i];
                t.removeEventListener ? t.removeEventListener(i, n, !1) :t.detachEvent && t.detachEvent("on" + i, n.bound);
            }
        },
        getPoint:function(t) {
            var e = t.targetTouches ? t.targetTouches.length ? t.targetTouches[0] :t.changedTouches[0] :t;
            return Point.create(e.pageX || e.clientX + document.documentElement.scrollLeft, e.pageY || e.clientY + document.documentElement.scrollTop);
        },
        getTarget:function(t) {
            return t.target || t.srcElement;
        },
        getOffset:function(t, e) {
            return DomEvent.getPoint(t).subtract(DomElement.getOffset(e || DomEvent.getTarget(t)));
        },
        preventDefault:function(t) {
            t.preventDefault ? t.preventDefault() :t.returnValue = !1;
        },
        stopPropagation:function(t) {
            t.stopPropagation ? t.stopPropagation() :t.cancelBubble = !0;
        },
        stop:function(t) {
            DomEvent.stopPropagation(t), DomEvent.preventDefault(t);
        }
    };
    DomEvent.requestAnimationFrame = new function() {
        var t = "equestAnimationFrame", e = window["r" + t] || window["webkitR" + t] || window["mozR" + t] || window["oR" + t] || window["msR" + t];
        e && e(function(t) {
            void 0 == t && (e = null);
        });
        var i, n = [], o = !0;
        return DomEvent.add(window, {
            focus:function() {
                o = !0;
            },
            blur:function() {
                o = !1;
            }
        }), function(t, r) {
            return e ? e(t, r) :(n.push([ t, r ]), i || (i = window.setInterval(function() {
                for (var t = n.length - 1; t >= 0; t--) {
                    var e = n[t], i = e[0], r = e[1];
                    (!r || ("true" == PaperScript.getAttribute(r, "keepalive") || o) && DomElement.isVisible(r)) && (n.splice(t, 1), 
                    i(Date.now()));
                }
            }, 1e3 / 60)), void 0);
        };
    }();
    var View = this.View = PaperScopeItem.extend({
        _list:"views",
        _reference:"view",
        initialize:function(t) {
            this.base();
            var e;
            if ("string" == typeof t && (t = document.getElementById(t)), t instanceof HTMLCanvasElement) {
                if (this._canvas = t, PaperScript.hasAttribute(t, "resize")) {
                    var i = DomElement.getOffset(t, !0), n = this;
                    e = DomElement.getViewportBounds(t).getSize().subtract(i), t.width = e.width, t.height = e.height, 
                    DomEvent.add(window, {
                        resize:function() {
                            DomElement.isInvisible(t) || (i = DomElement.getOffset(t, !0)), n.setViewSize(DomElement.getViewportBounds(t).getSize().subtract(i));
                        }
                    });
                } else e = DomElement.isInvisible(t) ? Size.create(parseInt(t.getAttribute("width")), parseInt(t.getAttribute("height"))) :DomElement.getSize(t);
                if (PaperScript.hasAttribute(t, "stats")) {
                    this._stats = new Stats();
                    var o = this._stats.domElement, r = o.style, i = DomElement.getOffset(t);
                    r.position = "absolute", r.left = i.x + "px", r.top = i.y + "px", document.body.appendChild(o);
                }
            } else e = Size.read(arguments, 1), e.isZero() && (e = new Size(1024, 768)), this._canvas = CanvasProvider.getCanvas(e);
            this._id = this._canvas.getAttribute("id"), null == this._id && this._canvas.setAttribute("id", this._id = "canvas-" + View._id++), 
            View._views[this._id] = this, this._viewSize = LinkedSize.create(this, "setViewSize", e.width, e.height), 
            this._context = this._canvas.getContext("2d"), this._matrix = new Matrix(), this._zoom = 1, 
            this._events = this._createEvents(), DomEvent.add(this._canvas, this._events), View._focused || (View._focused = this), 
            this._scope._redrawNotified = !1;
        },
        remove:function() {
            return this.base() ? (View._focused == this && (View._focused = null), delete View._views[this._id], 
            DomEvent.remove(this._canvas, this._events), this._canvas = this._events = this._onFrame = null, 
            !0) :!1;
        },
        _redraw:function() {
            this._redrawNeeded = !0, this._onFrameCallback ? this._onFrameCallback(0, !0) :this.draw();
        },
        _transform:function(t) {
            this._matrix.preConcatenate(t), this._bounds = null, this._inverse = null, this._redraw();
        },
        getCanvas:function() {
            return this._canvas;
        },
        getViewSize:function() {
            return this._viewSize;
        },
        setViewSize:function(t) {
            t = Size.read(arguments);
            var e = t.subtract(this._viewSize);
            e.isZero() || (this._canvas.width = t.width, this._canvas.height = t.height, this._viewSize.set(t.width, t.height, !0), 
            this._bounds = null, this._redrawNeeded = !0, this.onResize && this.onResize({
                size:t,
                delta:e
            }), this._redraw());
        },
        getBounds:function() {
            return this._bounds || (this._bounds = this._getInverse()._transformBounds(new Rectangle(new Point(), this._viewSize))), 
            this._bounds;
        },
        getSize:function() {
            return this.getBounds().getSize();
        },
        getCenter:function() {
            return this.getBounds().getCenter();
        },
        setCenter:function() {
            this.scrollBy(Point.read(arguments).subtract(this.getCenter()));
        },
        getZoom:function() {
            return this._zoom;
        },
        setZoom:function(t) {
            this._transform(new Matrix().scale(t / this._zoom, this.getCenter())), this._zoom = t;
        },
        isVisible:function() {
            return DomElement.isVisible(this._canvas);
        },
        scrollBy:function() {
            this._transform(new Matrix().translate(Point.read(arguments).negate()));
        },
        draw:function(t) {
            if (t && !this._redrawNeeded) return !1;
            this._stats && this._stats.update();
            var e = this._context, i = this._viewSize;
            return e.clearRect(0, 0, i._width + 1, i._height + 1), e.save(), this._matrix.applyToContext(e), 
            this._scope.project.draw(e), e.restore(), this._redrawNeeded && (this._redrawNeeded = !1, 
            this._scope._redrawNotified = !1), !0;
        },
        projectToView:function() {
            return this._matrix._transformPoint(Point.read(arguments));
        },
        viewToProject:function() {
            return this._getInverse()._transformPoint(Point.read(arguments));
        },
        _getInverse:function() {
            return this._inverse || (this._inverse = this._matrix.createInverse()), this._inverse;
        },
        getOnFrame:function() {
            return this._onFrame;
        },
        setOnFrame:function(t) {
            if (this._onFrame = t, !t) return delete this._onFrameCallback, void 0;
            var e, i = this, n = !1, o = 0, r = 0;
            this._onFrameCallback = function(t, s) {
                if (n = !1, i._onFrame) {
                    paper = i._scope, n = !0, s || DomEvent.requestAnimationFrame(i._onFrameCallback, i._canvas);
                    var a = Date.now() / 1e3, l = e ? a - e :0;
                    i._onFrame(Base.merge({
                        delta:l,
                        time:o += l,
                        count:r++
                    })), e = a, i.draw(!0);
                }
            }, n || this._onFrameCallback();
        },
        onResize:null
    }, {
        statics:{
            _views:{},
            _id:0
        }
    }, new function() {
        function t(t, e) {
            return t.viewToProject(DomEvent.getOffset(e, t._canvas));
        }
        function e() {
            View._focused && View._focused.isVisible() || PaperScope.each(function(t) {
                for (var e = 0, i = t.views.length; i > e; e++) {
                    var n = t.views[e];
                    if (n.isVisible()) throw View._focused = l = n, Base.stop;
                }
            });
        }
        function i(i) {
            var n;
            if (!c) {
                var o = DomEvent.getTarget(i);
                o && o.getAttribute && (n = View._views[o.getAttribute("id")]), n ? View._focused = l = n :l && l == View._focused && (View._focused = null, 
                e());
            }
            if ((n = n || View._focused) && (r = n._scope.tool)) {
                var s = i && t(n, i), h = !(r.onMouseDrag || !r.onMouseMove);
                c && !h ? (a = s || a, a && r.onHandleEvent("mousedrag", a, i) && (n.draw(!0), DomEvent.stop(i))) :c && !h || !r.onHandleEvent("mousemove", s, i) || (n.draw(!0), 
                DomEvent.stop(i));
            }
        }
        function n(e) {
            var i = View._focused;
            i && c && (c = !1, a = null, r && (null != s && (s = clearInterval(s)), r.onHandleEvent("mouseup", t(i, e), e) && (i.draw(!0), 
            DomEvent.stop(e))));
        }
        function o(t) {
            c && DomEvent.stop(t);
        }
        var r, s, a, l, c = !1;
        return DomEvent.add(document, {
            mousemove:i,
            mouseup:n,
            touchmove:i,
            touchend:n,
            selectstart:o,
            scroll:e
        }), DomEvent.add(window, {
            load:e
        }), {
            _createEvents:function() {
                function e(e) {
                    1 == e.which && (View._focused = n, (r = n._scope.tool) && (a = t(n, e), r.onHandleEvent("mousedown", a, e) && n.draw(!0), 
                    null != r.eventInterval && (s = setInterval(i, r.eventInterval)), c = !0));
                }
                var n = this;
                return {
                    mousedown:e,
                    touchstart:e,
                    selectstart:o
                };
            },
            statics:{
                mousemove:i,
                mouseup:n,
                touchmove:i,
                touchend:n,
                selectstart:o,
                scroll:e,
                updateFocus:e
            }
        };
    }()), Event = this.Event = Base.extend({
        initialize:function(t) {
            this.event = t;
        },
        preventDefault:function() {
            DomEvent.preventDefault(this.event);
        },
        stopPropagation:function() {
            DomEvent.stopPropagation(this.event);
        },
        stop:function() {
            DomEvent.stop(this.event);
        },
        getModifiers:function() {
            return Key.modifiers;
        }
    }), KeyEvent = this.KeyEvent = Event.extend(new function() {
        return {
            initialize:function(t, e, i, n) {
                this.base(n), this.type = t ? "keydown" :"keyup", this.key = e, this.character = i;
            },
            toString:function() {
                return "{ type: " + this.type + ", key: " + this.key + ", character: " + this.character + ", modifiers: " + this.getModifiers() + " }";
            }
        };
    }()), $this = this, Key = this.Key = new function() {
        function t(t) {
            return t.which || t.keyCode;
        }
        function e(t, e, i, o, r) {
            var a = String.fromCharCode(i), l = n[e] || a.toLowerCase(), c = r || (t ? "onKeyDown" :"onKeyUp"), h = View._focused, u = h && h.isVisible() && h._scope, d = u && u.tool;
            if (s[l] = t, d && d[c]) {
                Key.checkModifiers(o);
                var p = new KeyEvent(t, l, a, o);
                d[c](p) === !1 && p.preventDefault(), h && h.draw(!0);
            }
        }
        var i, n = {
            8:"backspace",
            13:"enter",
            16:"shift",
            17:"control",
            18:"option",
            19:"pause",
            20:"caps-lock",
            27:"escape",
            32:"space",
            35:"end",
            36:"home",
            37:"left",
            38:"up",
            39:"right",
            40:"down",
            46:"delete",
            91:"command",
            93:"command",
            224:"command"
        }, o = Base.merge({
            shift:!1,
            control:!1,
            option:!1,
            command:!1,
            capsLock:!1
        }), r = {}, s = {}, a = {
            altKey:"option",
            ctrlKey:"control",
            metaKey:"command",
            shiftKey:"shift"
        };
        return $this.handleKey = e, fns = {
            keydown:function(e) {
                var s, a = t(e), l = n[a];
                l ? ((s = Base.camelize(l)) in o && (o[s] = !0), r[a] = 0, paper.handleKey(!0, a, null, e)) :(i = a, 
                paper.handleKey(!0, i, a, e));
            },
            keypress:function(e) {
                if (null != i) {
                    var n = t(e);
                    r[i] = n, paper.handleKey(!0, i, n, e, "onKeyPress"), i = null;
                }
            },
            keyup:function(e) {
                var i, s = t(e), a = n[s];
                a && (i = Base.camelize(a)) in o && (o[i] = !1), null != r[s] ? (paper.handleKey(!1, s, r[s], e), 
                delete r[s]) :paper.handleKey(!1, s, null, e);
            }
        }, DomEvent.add(document, fns), {
            modifiers:o,
            checkModifiers:function(t) {
                for (var e in a) e in t && t[e] != o[a[e]] && (o[a[e]] = t[e]);
            },
            isDown:function(t) {
                return !!s[t];
            },
            events:fns
        };
    }(), ToolEvent = this.ToolEvent = Event.extend({
        initialize:function(t, e, i) {
            this.tool = t, this.type = e, this.event = i, Key.checkModifiers(i);
        },
        _choosePoint:function(t, e) {
            return t ? t :e ? e.clone() :null;
        },
        getPoint:function() {
            return this._choosePoint(this._point, this.tool._point);
        },
        setPoint:function(t) {
            this._point = t;
        },
        getLastPoint:function() {
            return this._choosePoint(this._lastPoint, this.tool._lastPoint);
        },
        setLastPoint:function(t) {
            this._lastPoint = t;
        },
        getDownPoint:function() {
            return this._choosePoint(this._downPoint, this.tool._downPoint);
        },
        setDownPoint:function(t) {
            this._downPoint = t;
        },
        getMiddlePoint:function() {
            return !this._middlePoint && this.tool._lastPoint ? this.tool._point.add(this.tool._lastPoint).divide(2) :this.middlePoint;
        },
        setMiddlePoint:function(t) {
            this._middlePoint = t;
        },
        getDelta:function() {
            return !this._delta && this.tool._lastPoint ? this.tool._point.subtract(this.tool._lastPoint) :this._delta;
        },
        setDelta:function(t) {
            this._delta = t;
        },
        getCount:function() {
            return /^mouse(down|up)$/.test(this.type) ? this.tool._downCount :this.tool._count;
        },
        setCount:function(t) {
            this.tool[/^mouse(down|up)$/.test(this.type) ? "downCount" :"count"] = t;
        },
        getItem:function() {
            if (!this._item) {
                var t = this.tool._scope.project.hitTest(this.getPoint());
                if (t) {
                    for (var e = t.item, i = e._parent; i instanceof Group && !(i instanceof Layer) || i instanceof CompoundPath; ) e = i, 
                    i = i._parent;
                    this._item = e;
                }
            }
            return this._item;
        },
        setItem:function(t) {
            this._item = t;
        },
        toString:function() {
            return "{ type: " + this.type + ", point: " + this.getPoint() + ", count: " + this.getCount() + ", modifiers: " + this.getModifiers() + " }";
        }
    }), Tool = this.Tool = PaperScopeItem.extend({
        _list:"tools",
        _reference:"tool",
        initialize:function() {
            this.base(), this._firstMove = !0, this._count = 0, this._downCount = 0;
        },
        eventInterval:null,
        getMinDistance:function() {
            return this._minDistance;
        },
        setMinDistance:function(t) {
            this._minDistance = t, null != this._minDistance && null != this._maxDistance && this._minDistance > this._maxDistance && (this._maxDistance = this._minDistance);
        },
        getMaxDistance:function() {
            return this._maxDistance;
        },
        setMaxDistance:function(t) {
            this._maxDistance = t, null != this._minDistance && null != this._maxDistance && this._maxDistance < this._minDistance && (this._minDistance = t);
        },
        getFixedDistance:function() {
            return this._minDistance == this._maxDistance ? this._minDistance :null;
        },
        setFixedDistance:function(t) {
            this._minDistance = t, this._maxDistance = t;
        },
        updateEvent:function(t, e, i, n, o, r, s) {
            if (!o) {
                if (null != i || null != n) {
                    var a = null != i ? i :0, l = e.subtract(this._point), c = l.getLength();
                    if (a > c) return !1;
                    var h = null != n ? n :0;
                    if (0 != h) if (c > h) e = this._point.add(l.normalize(h)); else if (s) return !1;
                }
                if (r && e.equals(this._point)) return !1;
            }
            switch (this._lastPoint = o && "mousemove" == t ? e :this._point, this._point = e, 
            t) {
              case "mousedown":
                this._lastPoint = this._downPoint, this._downPoint = this._point, this._downCount++;
                break;

              case "mouseup":
                this._lastPoint = this._downPoint;
            }
            return this._count = o ? 0 :this._count + 1, !0;
        },
        onHandleEvent:function(t, e, i) {
            paper = this._scope;
            var n = !1;
            switch (t) {
              case "mousedown":
                this.updateEvent(t, e, null, null, !0, !1, !1), this.onMouseDown && (this.onMouseDown(new ToolEvent(this, t, i)), 
                n = !0);
                break;

              case "mousedrag":
                for (var o = !1, r = !1; this.updateEvent(t, e, this.minDistance, this.maxDistance, !1, o, r); ) this.onMouseDrag && (this.onMouseDrag(new ToolEvent(this, t, i)), 
                n = !0), o = !0, r = !0;
                break;

              case "mouseup":
                this._point.x == e.x && this._point.y == e.y || !this.updateEvent("mousedrag", e, this.minDistance, this.maxDistance, !1, !1, !1) || this.onMouseDrag && (this.onMouseDrag(new ToolEvent(this, t, i)), 
                n = !0), this.updateEvent(t, e, null, this.maxDistance, !1, !1, !1), this.onMouseUp && (this.onMouseUp(new ToolEvent(this, t, i)), 
                n = !0), this.updateEvent(t, e, null, null, !0, !1, !1), this._firstMove = !0;
                break;

              case "mousemove":
                for (;this.updateEvent(t, e, this.minDistance, this.maxDistance, this._firstMove, !0, !1); ) this.onMouseMove && (n = !this.onMouseMove(new ToolEvent(this, t, i))), 
                this._firstMove = !1;
            }
            return n;
        }
    }), CanvasProvider = {
        canvases:[],
        getCanvas:function(t) {
            if (this.canvases.length) {
                var e = this.canvases.pop();
                return e.width != t.width || e.height != t.height ? (e.width = t.width, e.height = t.height) :e.getContext("2d").clearRect(0, 0, t.width + 1, t.height + 1), 
                e;
            }
            var e = document.createElement("canvas");
            return e.width = t.width, e.height = t.height, e;
        },
        returnCanvas:function(t) {
            this.canvases.push(t);
        }
    }, Numerical = new function() {
        var t = [ [ .5773502691896257 ], [ 0, .7745966692414834 ], [ .33998104358485626, .8611363115940526 ], [ 0, .5384693101056831, .906179845938664 ], [ .2386191860831969, .6612093864662645, .932469514203152 ], [ 0, .4058451513773972, .7415311855993945, .9491079123427585 ], [ .1834346424956498, .525532409916329, .7966664774136267, .9602898564975363 ], [ 0, .3242534234038089, .6133714327005904, .8360311073266358, .9681602395076261 ], [ .14887433898163122, .4333953941292472, .6794095682990244, .8650633666889845, .9739065285171717 ], [ 0, .26954315595234496, .5190961292068118, .7301520055740494, .8870625997680953, .978228658146057 ], [ .1252334085114689, .3678314989981802, .5873179542866175, .7699026741943047, .9041172563704749, .9815606342467192 ], [ 0, .2304583159551348, .44849275103644687, .6423493394403402, .8015780907333099, .9175983992229779, .9841830547185881 ], [ .10805494870734367, .31911236892788974, .5152486363581541, .6872929048116855, .827201315069765, .9284348836635735, .9862838086968123 ], [ 0, .20119409399743451, .3941513470775634, .5709721726085388, .7244177313601701, .8482065834104272, .937273392400706, .9879925180204854 ], [ .09501250983763744, .2816035507792589, .45801677765722737, .6178762444026438, .755404408355003, .8656312023878318, .9445750230732326, .9894009349916499 ] ], e = [ [ 1 ], [ .8888888888888888, .5555555555555556 ], [ .6521451548625461, .34785484513745385 ], [ .5688888888888889, .47862867049936647, .23692688505618908 ], [ .46791393457269104, .3607615730481386, .17132449237917036 ], [ .4179591836734694, .3818300505051189, .27970539148927664, .1294849661688697 ], [ .362683783378362, .31370664587788727, .22238103445337448, .10122853629037626 ], [ .3302393550012598, .31234707704000286, .26061069640293544, .1806481606948574, .08127438836157441 ], [ .29552422471475287, .26926671930999635, .21908636251598204, .1494513491505806, .06667134430868814 ], [ .2729250867779006, .26280454451024665, .23319376459199048, .18629021092773426, .1255803694649046, .05566856711617366 ], [ .24914704581340277, .2334925365383548, .20316742672306592, .16007832854334622, .10693932599531843, .04717533638651183 ], [ .2325515532308739, .22628318026289723, .2078160475368885, .17814598076194574, .13887351021978725, .09212149983772845, .04048400476531588 ], [ .2152638534631578, .2051984637212956, .18553839747793782, .15720316715819355, .12151857068790319, .08015808715976021, .03511946033175186 ], [ .2025782419255613, .19843148532711158, .1861610000155622, .16626920581699392, .13957067792615432, .10715922046717194, .07036604748810812, .03075324199611727 ], [ .1894506104550685, .18260341504492358, .16915651939500254, .14959598881657674, .12462897125553388, .09515851168249279, .062253523938647894, .027152459411754096 ] ], i = Math.abs, n = Math.sqrt, o = Math.cos, r = Math.PI;
        return {
            TOLERANCE:1e-5,
            EPSILON:1e-11,
            integrate:function(i, n, o, r) {
                for (var s = t[r - 2], a = e[r - 2], l = .5 * (o - n), c = l + n, h = 0, u = r + 1 >> 1, d = 1 & r ? a[h++] * i(c) :0; u > h; ) {
                    var p = l * s[h];
                    d += a[h++] * (i(c + p) + i(c - p));
                }
                return l * d;
            },
            findRoot:function(t, e, n, o, r, s, a) {
                for (var l = 0; s > l; l++) {
                    var c = t(n), h = c / e(n);
                    if (i(h) < a) return n;
                    var u = n - h;
                    c > 0 ? (r = n, n = o >= u ? .5 * (o + r) :u) :(o = n, n = u >= r ? .5 * (o + r) :u);
                }
            },
            solveQuadratic:function(t, e, o, r, s) {
                if (i(t) < s) return i(e) >= s ? (r[0] = -o / e, 1) :i(o) < s ? -1 :0;
                var a = e * e - 4 * t * o;
                if (0 > a) return 0;
                a = n(a), 0 > e && (a = -a), a = (e + a) * -.5;
                var l = 0;
                return i(a) >= s && (r[l++] = o / a), i(t) >= s && (r[l++] = a / t), l;
            },
            solveCubic:function(t, e, s, a, l, c) {
                if (i(t) < c) return Numerical.solveQuadratic(e, s, a, l, c);
                e /= t, s /= t, a /= t;
                var h = (e * e - 3 * s) / 9, u = (2 * e * e * e - 9 * e * s + 27 * a) / 54, d = h * h * h, p = u * u;
                if (e /= 3, d > p) {
                    var f = Math.acos(u / n(d)), g = -2 * n(h);
                    return l[0] = g * o(f / 3) - e, l[1] = g * o((f + 2 * r) / 3) - e, l[2] = g * o((f - 2 * r) / 3) - e, 
                    3;
                }
                var m = -Math.pow(i(u) + n(p - d), 1 / 3);
                0 > u && (m = -m);
                var _ = i(m) < c ? 0 :h / m;
                return l[0] = m + _ - e, 1;
            }
        };
    }(), BlendMode = {
        process:function(t, e, i, n, o) {
            function r(t, e, i) {
                return .2989 * t + .587 * e + .114 * i;
            }
            function s(t, e, i, n) {
                var o = n - r(t, e, i);
                _ = t + o, v = e + o, y = i + o;
                var n = r(_, v, y), s = D(_, v, y), a = E(_, v, y);
                if (0 > s) {
                    var l = n - s;
                    _ = n + (_ - n) * n / l, v = n + (v - n) * n / l, y = n + (y - n) * n / l;
                }
                if (a > 255) {
                    var c = 255 - n, h = a - n;
                    _ = n + (_ - n) * c / h, v = n + (v - n) * c / h, y = n + (y - n) * c / h;
                }
            }
            function a(t, e, i) {
                return E(t, e, i) - D(t, e, i);
            }
            function l(t, e, i, n) {
                var o, r = [ t, e, i ], s = E(t, e, i), a = D(t, e, i);
                a = a == t ? 0 :a == e ? 1 :2, s = s == t ? 0 :s == e ? 1 :2, o = 0 == D(a, s) ? 1 == E(a, s) ? 2 :1 :0, 
                r[s] > r[a] ? (r[o] = (r[o] - r[a]) * n / (r[s] - r[a]), r[s] = n) :r[o] = r[s] = 0, 
                r[a] = 0, _ = r[0], v = r[1], y = r[2];
            }
            var c, h, u, d, p, f, g, m, _, v, y, b = e.canvas, w = i.getImageData(o.x, o.y, b.width, b.height), C = w.data, T = e.getImageData(0, 0, b.width, b.height).data, D = Math.min, E = Math.max, x = Math.abs, S = {
                multiply:function() {
                    _ = p * c / 255, v = f * h / 255, y = g * u / 255;
                },
                screen:function() {
                    _ = 255 - (255 - p) * (255 - c) / 255, v = 255 - (255 - f) * (255 - h) / 255, y = 255 - (255 - g) * (255 - u) / 255;
                },
                overlay:function() {
                    _ = 128 > p ? 2 * p * c / 255 :255 - 2 * (255 - p) * (255 - c) / 255, v = 128 > f ? 2 * f * h / 255 :255 - 2 * (255 - f) * (255 - h) / 255, 
                    y = 128 > g ? 2 * g * u / 255 :255 - 2 * (255 - g) * (255 - u) / 255;
                },
                "soft-light":function() {
                    var t = c * p / 255;
                    _ = t + p * (255 - (255 - p) * (255 - c) / 255 - t) / 255, t = h * f / 255, v = t + f * (255 - (255 - f) * (255 - h) / 255 - t) / 255, 
                    t = u * g / 255, y = t + g * (255 - (255 - g) * (255 - u) / 255 - t) / 255;
                },
                "hard-light":function() {
                    _ = 128 > c ? 2 * c * p / 255 :255 - 2 * (255 - c) * (255 - p) / 255, v = 128 > h ? 2 * h * f / 255 :255 - 2 * (255 - h) * (255 - f) / 255, 
                    y = 128 > u ? 2 * u * g / 255 :255 - 2 * (255 - u) * (255 - g) / 255;
                },
                "color-dodge":function() {
                    _ = 255 == c ? c :D(255, 255 * p / (255 - c)), v = 255 == h ? h :D(255, 255 * f / (255 - h)), 
                    y = 255 == u ? u :D(255, 255 * g / (255 - u));
                },
                "color-burn":function() {
                    _ = 0 == c ? 0 :E(255 - 255 * (255 - p) / c, 0), v = 0 == h ? 0 :E(255 - 255 * (255 - f) / h, 0), 
                    y = 0 == u ? 0 :E(255 - 255 * (255 - g) / u, 0);
                },
                darken:function() {
                    _ = c > p ? p :c, v = h > f ? f :h, y = u > g ? g :u;
                },
                lighten:function() {
                    _ = p > c ? p :c, v = f > h ? f :h, y = g > u ? g :u;
                },
                difference:function() {
                    _ = p - c, 0 > _ && (_ = -_), v = f - h, 0 > v && (v = -v), y = g - u, 0 > y && (y = -y);
                },
                exclusion:function() {
                    _ = p + c * (255 - p - p) / 255, v = f + h * (255 - f - f) / 255, y = g + u * (255 - g - g) / 255;
                },
                hue:function() {
                    l(c, h, u, a(p, f, g)), s(_, v, y, r(p, f, g));
                },
                saturation:function() {
                    l(p, f, g, a(c, h, u)), s(_, v, y, r(p, f, g));
                },
                luminosity:function() {
                    s(p, f, g, r(c, h, u));
                },
                color:function() {
                    s(c, h, u, r(p, f, g));
                },
                add:function() {
                    _ = D(p + c, 255), v = D(f + h, 255), y = D(g + u, 255);
                },
                subtract:function() {
                    _ = E(p - c, 0), v = E(f - h, 0), y = E(g - u, 0);
                },
                average:function() {
                    _ = (p + c) / 2, v = (f + h) / 2, y = (g + u) / 2;
                },
                negation:function() {
                    _ = 255 - x(255 - c - p), v = 255 - x(255 - h - f), y = 255 - x(255 - u - g);
                }
            }, O = S[t];
            if (O) {
                for (var k = 0, I = C.length; I > k; k += 4) {
                    c = T[k], p = C[k], h = T[k + 1], f = C[k + 1], u = T[k + 2], g = C[k + 2], d = T[k + 3], 
                    m = C[k + 3], O();
                    var R = d * n / 255, P = 1 - R;
                    C[k] = R * _ + P * p, C[k + 1] = R * v + P * f, C[k + 2] = R * y + P * g, C[k + 3] = d * n + P * m;
                }
                i.putImageData(w, o.x, o.y);
            }
        }
    }, PaperScript = this.PaperScript = new function() {
        function $eval(t, e, i) {
            var n = operators[e];
            if (t && t[n]) {
                var o = t[n](i);
                return "!=" == e ? !o :o;
            }
            switch (e) {
              case "+":
                return t + i;

              case "-":
                return t - i;

              case "*":
                return t * i;

              case "/":
                return t / i;

              case "%":
                return t % i;

              case "==":
                return t == i;

              case "!=":
                return t != i;

              default:
                throw new Error("Implement Operator: " + e);
            }
        }
        function $sign(t, e) {
            var i = signOperators[t];
            if (e && e[i]) return e[i]();
            switch (t) {
              case "+":
                return +e;

              case "-":
                return -e;

              default:
                throw new Error("Implement Sign Operator: " + t);
            }
        }
        function isDynamic(t) {
            var e = t[0];
            return "num" != e && "string" != e;
        }
        function handleOperator(t, e, i) {
            return operators[t] && isDynamic(e) ? [ "call", [ "name", "$eval" ], [ e, [ "string", t ], i ] ] :void 0;
        }
        function compile(t) {
            var e = parse_js.parse(t), i = parse_js.ast_walker(), n = i.walk;
            return e = i.with_walkers({
                binary:function(t, e, i) {
                    return handleOperator(t, e = n(e), i = n(i)) || [ this[0], t, e, i ];
                },
                assign:function(t, e, i) {
                    var o = handleOperator(t, e = n(e), i = n(i));
                    return o ? [ this[0], !0, e, o ] :[ this[0], t, e, i ];
                },
                "unary-prefix":function(t, e) {
                    return signOperators[t] && isDynamic(e) ? [ "call", [ "name", "$sign" ], [ [ "string", t ], n(e) ] ] :void 0;
                }
            }, function() {
                return n(e);
            }), parse_js.gen_code(e, {
                beautify:!0
            });
        }
        function evaluate(code, scope) {
            paper = scope;
            var view = scope.view, tool = /on(?:Key|Mouse)(?:Up|Down|Move|Drag)/.test(code) && new Tool(), res;
            with (scope) (function() {
                var onEditOptions, onSelect, onDeselect, onReselect, onMouseDown, onMouseUp, onMouseDrag, onMouseMove, onKeyDown, onKeyUp, onFrame, onResize, handlers = [ "onEditOptions", "onSelect", "onDeselect", "onReselect", "onMouseDown", "onMouseUp", "onMouseDrag", "onMouseMove", "onKeyDown", "onKeyUp" ];
                res = eval(compile(code)), tool && Base.each(handlers, function(key) {
                    tool[key] = eval(key);
                }), view && (view.onResize = onResize, view.setOnFrame(onFrame), view.draw());
            }).call(scope);
            return res;
        }
        function request(t, e) {
            var i = new (window.ActiveXObject || XMLHttpRequest)("Microsoft.XMLHTTP");
            return i.open("GET", t, !0), i.overrideMimeType && i.overrideMimeType("text/plain"), 
            i.onreadystatechange = function() {
                return 4 === i.readyState ? evaluate(i.responseText, e) :void 0;
            }, i.send(null);
        }
        function load() {
            for (var t = document.getElementsByTagName("script"), e = 0, i = t.length; i > e; e++) {
                var n = t[e];
                if (/^text\/(?:x-|)paperscript$/.test(n.type) && !n.getAttribute("data-paper-loaded")) {
                    var o = new PaperScope(n);
                    o.setup(PaperScript.getAttribute(n, "canvas")), n.src ? request(n.src, o) :evaluate(n.innerHTML, o), 
                    n.setAttribute("data-paper-loaded", !0);
                }
            }
        }
        function handleAttribute(t) {
            return t += "Attribute", function(e, i) {
                return e[t](i) || e[t]("data-paper-" + i);
            };
        }
        var operators = {
            "+":"add",
            "-":"subtract",
            "*":"multiply",
            "/":"divide",
            "%":"modulo",
            "==":"equals",
            "!=":"equals"
        }, signOperators = {
            "-":"negate"
        };
        return DomEvent.add(window, {
            load:load
        }), {
            compile:compile,
            evaluate:evaluate,
            load:load,
            getAttribute:handleAttribute("get"),
            hasAttribute:handleAttribute("has")
        };
    }();
    return this.load = PaperScript.load, Base.each(this, function(t, e) {
        t && t.prototype instanceof Base && (t._name = e);
    }), this.enumerable = !0, new (PaperScope.inject(this))();
}();

// Copyright (c) 2009-2010 Dominic Baggott
// Copyright (c) 2009-2010 Ash Berlin
// Copyright (c) 2011 Christoph Dorn <christoph@christophdorn.com> (http://www.christophdorn.com)
!function(t) {
    function e() {
        return "Markdown.mk_block( " + uneval(this.toString()) + ", " + uneval(this.trailing) + ", " + uneval(this.lineNumber) + " )";
    }
    function i() {
        var t = require("util");
        return "Markdown.mk_block( " + t.inspect(this.toString()) + ", " + t.inspect(this.trailing) + ", " + t.inspect(this.lineNumber) + " )";
    }
    function n(t) {
        for (var e = 0, i = -1; -1 !== (i = t.indexOf("\n", i + 1)); ) e++;
        return e;
    }
    function o(t, e) {
        function i(t) {
            this.len_after = t, this.name = "close_" + e;
        }
        var n = t + "_state", o = "strong" == t ? "em_state" :"strong_state";
        return function(r) {
            if (this[n][0] == e) return this[n].shift(), [ r.length, new i(r.length - e.length) ];
            var s = this[o].slice(), a = this[n].slice();
            this[n].unshift(e);
            {
                var l = this.processInline(r.substr(e.length)), c = l[l.length - 1];
                this[n].shift();
            }
            if (c instanceof i) {
                l.pop();
                var h = r.length - c.len_after;
                return [ h, [ t ].concat(l) ];
            }
            return this[o] = s, this[n] = a, [ e.length, e ];
        };
    }
    function r(t) {
        for (var e = t.split(""), i = [ "" ], n = !1; e.length; ) {
            var o = e.shift();
            switch (o) {
              case " ":
                n ? i[i.length - 1] += o :i.push("");
                break;

              case "'":
              case '"':
                n = !n;
                break;

              case "\\":
                o = e.shift();

              default:
                i[i.length - 1] += o;
            }
        }
        return i;
    }
    function s(t) {
        return m(t) && t.length > 1 && "object" == typeof t[1] && !m(t[1]) ? t[1] :void 0;
    }
    function l(t) {
        return t.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#39;");
    }
    function c(t) {
        if ("string" == typeof t) return l(t);
        var e = t.shift(), i = {}, n = [];
        for (!t.length || "object" != typeof t[0] || t[0] instanceof Array || (i = t.shift()); t.length; ) n.push(arguments.callee(t.shift()));
        var o = "";
        for (var r in i) o += " " + r + '="' + l(i[r]) + '"';
        return "img" == e || "br" == e || "hr" == e ? "<" + e + o + "/>" :"<" + e + o + ">" + n.join("") + "</" + e + ">";
    }
    function h(t, e, i) {
        var n;
        i = i || {};
        var o = t.slice(0);
        "function" == typeof i.preprocessTreeNode && (o = i.preprocessTreeNode(o, e));
        var r = s(o);
        if (r) {
            o[1] = {};
            for (n in r) o[1][n] = r[n];
            r = o[1];
        }
        if ("string" == typeof o) return o;
        switch (o[0]) {
          case "header":
            o[0] = "h" + o[1].level, delete o[1].level;
            break;

          case "bulletlist":
            o[0] = "ul";
            break;

          case "numberlist":
            o[0] = "ol";
            break;

          case "listitem":
            o[0] = "li";
            break;

          case "para":
            o[0] = "p";
            break;

          case "markdown":
            o[0] = "html", r && delete r.references;
            break;

          case "code_block":
            o[0] = "pre", n = r ? 2 :1;
            var a = [ "code" ];
            a.push.apply(a, o.splice(n)), o[n] = a;
            break;

          case "inlinecode":
            o[0] = "code";
            break;

          case "img":
            o[1].src = o[1].href, delete o[1].href;
            break;

          case "linebreak":
            o[0] = "br";
            break;

          case "link":
            o[0] = "a";
            break;

          case "link_ref":
            o[0] = "a";
            var l = e[r.ref];
            if (!l) return r.original;
            delete r.ref, r.href = l.href, l.title && (r.title = l.title), delete r.original;
            break;

          case "img_ref":
            o[0] = "img";
            var l = e[r.ref];
            if (!l) return r.original;
            delete r.ref, r.src = l.href, l.title && (r.title = l.title), delete r.original;
        }
        if (n = 1, r) {
            for (var c in o[1]) n = 2;
            1 === n && o.splice(n, 1);
        }
        for (;n < o.length; ++n) o[n] = arguments.callee(o[n], e, i);
        return o;
    }
    function u(t) {
        for (var e = s(t) ? 2 :1; e < t.length; ) "string" == typeof t[e] ? e + 1 < t.length && "string" == typeof t[e + 1] ? t[e] += t.splice(e + 1, 1)[0] :++e :(arguments.callee(t[e]), 
        ++e);
    }
    var d = t.Markdown = function _(t) {
        switch (typeof t) {
          case "undefined":
            this.dialect = _.dialects.Gruber;
            break;

          case "object":
            this.dialect = t;
            break;

          default:
            if (!(t in _.dialects)) throw new Error("Unknown Markdown dialect '" + String(t) + "'");
            this.dialect = _.dialects[t];
        }
        this.em_state = [], this.strong_state = [], this.debug_indent = "";
    };
    t.parse = function(t, e) {
        var i = new d(e);
        return i.toTree(t);
    }, t.toHTML = function(e, i, n) {
        var o = t.toHTMLTree(e, i, n);
        return t.renderJsonML(o);
    }, t.toHTMLTree = function(t, e, i) {
        "string" == typeof t && (t = this.parse(t, e));
        var n = s(t), o = {};
        n && n.references && (o = n.references);
        var r = h(t, o, i);
        return u(r), r;
    };
    var f = d.mk_block = function(t, n, o) {
        1 == arguments.length && (n = "\n\n");
        var r = new String(t);
        return r.trailing = n, r.inspect = i, r.toSource = e, void 0 != o && (r.lineNumber = o), 
        r;
    };
    d.prototype.split_blocks = function(t) {
        var e, i = /([\s\S]+?)($|\n(?:\s*\n|$)+)/g, o = [], r = 1;
        for (null != (e = /^(\s*\n)/.exec(t)) && (r += n(e[0]), i.lastIndex = e[0].length); null !== (e = i.exec(t)); ) o.push(f(e[1], e[2], r)), 
        r += n(e[0]);
        return o;
    }, d.prototype.processBlock = function(t, e) {
        var i = this.dialect.block, n = i.__order__;
        if ("__call__" in i) return i.__call__.call(this, t, e);
        for (var o = 0; o < n.length; o++) {
            var r = i[n[o]].call(this, t, e);
            if (r) return (!m(r) || r.length > 0 && !m(r[0])) && this.debug(n[o], "didn't return a proper array"), 
            r;
        }
        return [];
    }, d.prototype.processInline = function(t) {
        return this.dialect.inline.__call__.call(this, String(t));
    }, d.prototype.toTree = function(t, e) {
        var i = t instanceof Array ? t :this.split_blocks(t), n = this.tree;
        try {
            for (this.tree = e || this.tree || [ "markdown" ]; i.length; ) {
                var o = this.processBlock(i.shift(), i);
                o.length && this.tree.push.apply(this.tree, o);
            }
            return this.tree;
        } finally {
            e && (this.tree = n);
        }
    }, d.prototype.debug = function() {
        var t = Array.prototype.slice.call(arguments);
        t.unshift(this.debug_indent), "undefined" != typeof print && print.apply(print, t), 
        "undefined" != typeof console && "undefined" != typeof console.log && console.log.apply(null, t);
    }, d.prototype.loop_re_over_block = function(t, e, i) {
        for (var n, o = e.valueOf(); o.length && null != (n = t.exec(o)); ) o = o.substr(n[0].length), 
        i.call(this, n);
        return o;
    }, d.dialects = {}, d.dialects.Gruber = {
        block:{
            atxHeader:function(t, e) {
                var i = t.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);
                if (!i) return void 0;
                var n = [ "header", {
                    level:i[1].length
                } ];
                return Array.prototype.push.apply(n, this.processInline(i[2])), i[0].length < t.length && e.unshift(f(t.substr(i[0].length), t.trailing, t.lineNumber + 2)), 
                [ n ];
            },
            setextHeader:function(t, e) {
                var i = t.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);
                if (!i) return void 0;
                var n = "=" === i[2] ? 1 :2, o = [ "header", {
                    level:n
                }, i[1] ];
                return i[0].length < t.length && e.unshift(f(t.substr(i[0].length), t.trailing, t.lineNumber + 2)), 
                [ o ];
            },
            code:function(t, e) {
                var i = [], n = /^(?: {0,3}\t| {4})(.*)\n?/;
                if (!t.match(n)) return void 0;
                t:for (;;) {
                    var o = this.loop_re_over_block(n, t.valueOf(), function(t) {
                        i.push(t[1]);
                    });
                    if (o.length) {
                        e.unshift(f(o, t.trailing));
                        break t;
                    }
                    if (!e.length) break t;
                    if (!e[0].match(n)) break t;
                    i.push(t.trailing.replace(/[^\n]/g, "").substring(2)), t = e.shift();
                }
                return [ [ "code_block", i.join("\n") ] ];
            },
            horizRule:function(t, e) {
                var i = t.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);
                if (!i) return void 0;
                var n = [ [ "hr" ] ];
                return i[1] && n.unshift.apply(n, this.processBlock(i[1], [])), i[3] && e.unshift(f(i[3])), 
                n;
            },
            lists:function() {
                function t(t) {
                    return new RegExp("(?:^(" + l + "{0," + t + "} {0,3})(" + r + ")\\s+)|(^" + l + "{0," + (t - 1) + "}[ ]{0,4})");
                }
                function e(t) {
                    return t.replace(/ {0,3}\t/g, "    ");
                }
                function i(t, e, i, n) {
                    if (e) return t.push([ "para" ].concat(i)), void 0;
                    var o = t[t.length - 1] instanceof Array && "para" == t[t.length - 1][0] ? t[t.length - 1] :t;
                    n && t.length > 1 && i.unshift(n);
                    for (var r = 0; r < i.length; r++) {
                        var s = i[r], a = "string" == typeof s;
                        a && o.length > 1 && "string" == typeof o[o.length - 1] ? o[o.length - 1] += s :o.push(s);
                    }
                }
                function n(t, e) {
                    for (var i = new RegExp("^(" + l + "{" + t + "}.*?\\n?)*$"), n = new RegExp("^" + l + "{" + t + "}", "gm"), o = []; e.length > 0; ) {
                        if (i.exec(e[0])) {
                            var r = e.shift(), s = r.replace(n, "");
                            o.push(f(s, r.trailing, r.lineNumber));
                        }
                        break;
                    }
                    return o;
                }
                function o(t, e, i) {
                    var n = t.list, o = n[n.length - 1];
                    if (!(o[1] instanceof Array && "para" == o[1][0])) if (e + 1 == i.length) o.push([ "para" ].concat(o.splice(1))); else {
                        var r = o.pop();
                        o.push([ "para" ].concat(o.splice(1)), r);
                    }
                }
                var r = "[*+-]|\\d+\\.", s = /[*+-]/, a = new RegExp("^( {0,3})(" + r + ")[ 	]+"), l = "(?: {0,3}\\t| {4})";
                return function(r, l) {
                    function c(t) {
                        var e = s.exec(t[2]) ? [ "bulletlist" ] :[ "numberlist" ];
                        return p.push({
                            list:e,
                            indent:t[1]
                        }), e;
                    }
                    var h = r.match(a);
                    if (!h) return void 0;
                    for (var u, d, p = [], f = c(h), m = !1, _ = [ p[0].list ]; ;) {
                        for (var v = r.split(/(?=\n)/), y = "", b = 0; b < v.length; b++) {
                            var w = "", C = v[b].replace(/^\n/, function(t) {
                                return w = t, "";
                            }), T = t(p.length);
                            if (h = C.match(T), void 0 !== h[1]) {
                                y.length && (i(u, m, this.processInline(y), w), m = !1, y = ""), h[1] = e(h[1]);
                                var D = Math.floor(h[1].length / 4) + 1;
                                if (D > p.length) f = c(h), u.push(f), u = f[1] = [ "listitem" ]; else {
                                    var E = !1;
                                    for (d = 0; d < p.length; d++) if (p[d].indent == h[1]) {
                                        f = p[d].list, p.splice(d + 1), E = !0;
                                        break;
                                    }
                                    E || (D++, D <= p.length ? (p.splice(D), f = p[D - 1].list) :(f = c(h), u.push(f))), 
                                    u = [ "listitem" ], f.push(u);
                                }
                                w = "";
                            }
                            C.length > h[0].length && (y += w + C.substr(h[0].length));
                        }
                        y.length && (i(u, m, this.processInline(y), w), m = !1, y = "");
                        var x = n(p.length, l);
                        x.length > 0 && (g(p, o, this), u.push.apply(u, this.toTree(x, [])));
                        var S = l[0] && l[0].valueOf() || "";
                        if (!S.match(a) && !S.match(/^ /)) break;
                        r = l.shift();
                        var O = this.dialect.block.horizRule(r, l);
                        if (O) {
                            _.push.apply(_, O);
                            break;
                        }
                        g(p, o, this), m = !0;
                    }
                    return _;
                };
            }(),
            blockquote:function(t, e) {
                if (!t.match(/^>/m)) return void 0;
                var i = [];
                if (">" != t[0]) {
                    for (var n = t.split(/\n/), o = []; n.length && ">" != n[0][0]; ) o.push(n.shift());
                    t = n.join("\n"), i.push.apply(i, this.processBlock(o.join("\n"), []));
                }
                for (;e.length && ">" == e[0][0]; ) {
                    var r = e.shift();
                    t = new String(t + t.trailing + r), t.trailing = r.trailing;
                }
                {
                    var s = t.replace(/^> ?/gm, "");
                    this.tree;
                }
                return i.push(this.toTree(s, [ "blockquote" ])), i;
            },
            referenceDefn:function(t, e) {
                var i = /^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;
                if (!t.match(i)) return void 0;
                s(this.tree) || this.tree.splice(1, 0, {});
                var n = s(this.tree);
                void 0 === n.references && (n.references = {});
                var o = this.loop_re_over_block(i, t, function(t) {
                    t[2] && "<" == t[2][0] && ">" == t[2][t[2].length - 1] && (t[2] = t[2].substring(1, t[2].length - 1));
                    var e = n.references[t[1].toLowerCase()] = {
                        href:t[2]
                    };
                    void 0 !== t[4] ? e.title = t[4] :void 0 !== t[5] && (e.title = t[5]);
                });
                return o.length && e.unshift(f(o, t.trailing)), [];
            },
            para:function(t) {
                return [ [ "para" ].concat(this.processInline(t)) ];
            }
        }
    }, d.dialects.Gruber.inline = {
        __oneElement__:function(t, e, i) {
            var n, o;
            e = e || this.dialect.inline.__patterns__;
            var r = new RegExp("([\\s\\S]*?)(" + (e.source || e) + ")");
            if (n = r.exec(t), !n) return [ t.length, t ];
            if (n[1]) return [ n[1].length, n[1] ];
            var o;
            return n[2] in this.dialect.inline && (o = this.dialect.inline[n[2]].call(this, t.substr(n.index), n, i || [])), 
            o = o || [ n[2].length, n[2] ];
        },
        __call__:function(t, e) {
            function i(t) {
                "string" == typeof t && "string" == typeof o[o.length - 1] ? o[o.length - 1] += t :o.push(t);
            }
            for (var n, o = []; t.length > 0; ) n = this.dialect.inline.__oneElement__.call(this, t, e, o), 
            t = t.substr(n.shift()), g(n, i);
            return o;
        },
        "]":function() {},
        "}":function() {},
        "\\":function(t) {
            return t.match(/^\\[\\`\*_{}\[\]()#\+.!\-]/) ? [ 2, t[1] ] :[ 1, "\\" ];
        },
        "![":function(t) {
            var e = t.match(/^!\[(.*?)\][ \t]*\([ \t]*(\S*)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);
            if (e) {
                e[2] && "<" == e[2][0] && ">" == e[2][e[2].length - 1] && (e[2] = e[2].substring(1, e[2].length - 1)), 
                e[2] = this.dialect.inline.__call__.call(this, e[2], /\\/)[0];
                var i = {
                    alt:e[1],
                    href:e[2] || ""
                };
                return void 0 !== e[4] && (i.title = e[4]), [ e[0].length, [ "img", i ] ];
            }
            return e = t.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/), e ? [ e[0].length, [ "img_ref", {
                alt:e[1],
                ref:e[2].toLowerCase(),
                original:e[0]
            } ] ] :[ 2, "![" ];
        },
        "[":function v(t) {
            var e = String(t), i = d.DialectHelpers.inline_until_char.call(this, t.substr(1), "]");
            if (!i) return [ 1, "[" ];
            var v, n, o = 1 + i[0], r = i[1];
            t = t.substr(o);
            var s = t.match(/^\s*\([ \t]*(\S+)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);
            if (s) {
                var a = s[1];
                if (o += s[0].length, a && "<" == a[0] && ">" == a[a.length - 1] && (a = a.substring(1, a.length - 1)), 
                !s[3]) for (var l = 1, c = 0; c < a.length; c++) switch (a[c]) {
                  case "(":
                    l++;
                    break;

                  case ")":
                    0 == --l && (o -= a.length - c, a = a.substring(0, c));
                }
                return a = this.dialect.inline.__call__.call(this, a, /\\/)[0], n = {
                    href:a || ""
                }, void 0 !== s[3] && (n.title = s[3]), v = [ "link", n ].concat(r), [ o, v ];
            }
            return s = t.match(/^\s*\[(.*?)\]/), s ? (o += s[0].length, n = {
                ref:(s[1] || String(r)).toLowerCase(),
                original:e.substr(0, o)
            }, v = [ "link_ref", n ].concat(r), [ o, v ]) :1 == r.length && "string" == typeof r[0] ? (n = {
                ref:r[0].toLowerCase(),
                original:e.substr(0, o)
            }, v = [ "link_ref", n, r[0] ], [ o, v ]) :[ 1, "[" ];
        },
        "<":function(t) {
            var e;
            return null != (e = t.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/)) ? e[3] ? [ e[0].length, [ "link", {
                href:"mailto:" + e[3]
            }, e[3] ] ] :"mailto" == e[2] ? [ e[0].length, [ "link", {
                href:e[1]
            }, e[1].substr("mailto:".length) ] ] :[ e[0].length, [ "link", {
                href:e[1]
            }, e[1] ] ] :[ 1, "<" ];
        },
        "`":function(t) {
            var e = t.match(/(`+)(([\s\S]*?)\1)/);
            return e && e[2] ? [ e[1].length + e[2].length, [ "inlinecode", e[3] ] ] :[ 1, "`" ];
        },
        "  \n":function() {
            return [ 3, [ "linebreak" ] ];
        }
    }, d.dialects.Gruber.inline["**"] = o("strong", "**"), d.dialects.Gruber.inline.__ = o("strong", "__"), 
    d.dialects.Gruber.inline["*"] = o("em", "*"), d.dialects.Gruber.inline._ = o("em", "_"), 
    d.buildBlockOrder = function(t) {
        var e = [];
        for (var i in t) "__order__" != i && "__call__" != i && e.push(i);
        t.__order__ = e;
    }, d.buildInlinePatterns = function(t) {
        var e = [];
        for (var i in t) if (!i.match(/^__.*__$/)) {
            var n = i.replace(/([\\.*+?|()\[\]{}])/g, "\\$1").replace(/\n/, "\\n");
            e.push(1 == i.length ? n :"(?:" + n + ")");
        }
        e = e.join("|"), t.__patterns__ = e;
        var o = t.__call__;
        t.__call__ = function(t, i) {
            return void 0 != i ? o.call(this, t, i) :o.call(this, t, e);
        };
    }, d.DialectHelpers = {}, d.DialectHelpers.inline_until_char = function(t, e) {
        for (var i = 0, n = []; ;) {
            if (t[i] == e) return i++, [ i, n ];
            if (i >= t.length) return null;
            var o = this.dialect.inline.__oneElement__.call(this, t.substr(i));
            i += o[0], n.push.apply(n, o.slice(1));
        }
    }, d.subclassDialect = function(t) {
        function e() {}
        function i() {}
        return e.prototype = t.block, i.prototype = t.inline, {
            block:new e(),
            inline:new i()
        };
    }, d.buildBlockOrder(d.dialects.Gruber.block), d.buildInlinePatterns(d.dialects.Gruber.inline), 
    d.dialects.Maruku = d.subclassDialect(d.dialects.Gruber), d.dialects.Maruku.processMetaHash = function(t) {
        for (var e = r(t), i = {}, n = 0; n < e.length; ++n) if (/^#/.test(e[n])) i.id = e[n].substring(1); else if (/^\./.test(e[n])) i["class"] = i["class"] ? i["class"] + e[n].replace(/./, " ") :e[n].substring(1); else if (/\=/.test(e[n])) {
            var o = e[n].split(/\=/);
            i[o[0]] = o[1];
        }
        return i;
    }, d.dialects.Maruku.block.document_meta = function(t) {
        if (t.lineNumber > 1) return void 0;
        if (!t.match(/^(?:\w+:.*\n)*\w+:.*$/)) return void 0;
        s(this.tree) || this.tree.splice(1, 0, {});
        var e = t.split(/\n/);
        for (p in e) {
            var i = e[p].match(/(\w+):\s*(.*)$/), n = i[1].toLowerCase(), o = i[2];
            this.tree[1][n] = o;
        }
        return [];
    }, d.dialects.Maruku.block.block_meta = function(t) {
        var e = t.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);
        if (!e) return void 0;
        var i, n = this.dialect.processMetaHash(e[2]);
        if ("" === e[1]) {
            var o = this.tree[this.tree.length - 1];
            if (i = s(o), "string" == typeof o) return void 0;
            i || (i = {}, o.splice(1, 0, i));
            for (a in n) i[a] = n[a];
            return [];
        }
        var r = t.replace(/\n.*$/, ""), l = this.processBlock(r, []);
        i = s(l[0]), i || (i = {}, l[0].splice(1, 0, i));
        for (a in n) i[a] = n[a];
        return l;
    }, d.dialects.Maruku.block.definition_list = function(t, e) {
        var i, n = /^((?:[^\s:].*\n)+):\s+([\s\S]+)$/, o = [ "dl" ];
        if (!(a = t.match(n))) return void 0;
        for (var r = [ t ]; e.length && n.exec(e[0]); ) r.push(e.shift());
        for (var s = 0; s < r.length; ++s) {
            var a = r[s].match(n), l = a[1].replace(/\n$/, "").split(/\n/), c = a[2].split(/\n:\s+/);
            for (i = 0; i < l.length; ++i) o.push([ "dt", l[i] ]);
            for (i = 0; i < c.length; ++i) o.push([ "dd" ].concat(this.processInline(c[i].replace(/(\n)\s+/, "$1"))));
        }
        return [ o ];
    }, d.dialects.Maruku.inline["{:"] = function(t, e, i) {
        if (!i.length) return [ 2, "{:" ];
        var n = i[i.length - 1];
        if ("string" == typeof n) return [ 2, "{:" ];
        var o = t.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);
        if (!o) return [ 2, "{:" ];
        var r = this.dialect.processMetaHash(o[1]), a = s(n);
        a || (a = {}, n.splice(1, 0, a));
        for (var l in r) a[l] = r[l];
        return [ o[0].length, "" ];
    }, d.buildBlockOrder(d.dialects.Maruku.block), d.buildInlinePatterns(d.dialects.Maruku.inline);
    var g, m = Array.isArray || function(t) {
        return "[object Array]" == Object.prototype.toString.call(t);
    };
    g = Array.prototype.forEach ? function(t, e, i) {
        return t.forEach(e, i);
    } :function(t, e, i) {
        for (var n = 0; n < t.length; n++) e.call(i || t, t[n], n, t);
    }, t.renderJsonML = function(t, e) {
        e = e || {}, e.root = e.root || !1;
        var i = [];
        if (e.root) i.push(c(t)); else for (t.shift(), !t.length || "object" != typeof t[0] || t[0] instanceof Array || t.shift(); t.length; ) i.push(c(t.shift()));
        return i.join("\n\n");
    };
}(function() {
    return "undefined" == typeof exports ? (window.markdown = {}, window.markdown) :exports;
}()), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    window.Draw = window.Draw || {}, _.extend(window.Draw, {
        SELECTION_COLOR:new paper.RGBColor(0, .4, .8, .5).toCssString(),
        HANDLE_SELECTION_COLOR:"#7eebf8",
        PRESELECTION_COLOR:new paper.RGBColor(.8, 0, 0, .5).toCssString(),
        HANDLE_SIZE:8,
        HANDLE_SIZE_SMALL:4,
        FOCUS_CANVAS:"focus_canvas",
        FOCUS_PROPERTIES:"focus_properties",
        FOCUS_TEXT:"focus_text",
        FOCUS_DIALOG:"focus_dialog",
        FOCUS_PREVIEW:"focus_preview",
        FOCUS_TEXTBOX:"focus_textbox",
        FOCUS_COMMENTS:"focus_comments",
        FOCUS_DOCUMENT:"focus_document",
        SELECTION_MODE_SEGMENTS:"segments",
        SELECTION_MODE_BOUNDS:"bounds",
        SELECTION_MODE_TEXT:"text",
        MODE_EDIT:"edit",
        MODE_READ:"read",
        ALIGN_LEFT:"left",
        ALIGN_CENTER:"center",
        ALIGN_RIGHT:"right",
        ALIGN_INNER:"inner",
        LAYER_TOOL:"tool",
        LAYER_TOOL_BOTTOM:"tool_bottom",
        LAYER_USER:"user",
        LAYER_ALL:"all",
        STYLE_PATH:"path",
        STYLE_TEXT:"text",
        STYLE_HEADING:"heading",
        ANCHOR_TOP_LEFT:"topLeft",
        ANCHOR_TOP_RIGHT:"topRight",
        ANCHOR_BOTTOM_LEFT:"bottomLeft",
        ANCHOR_BOTTOM_RIGHT:"bottomRight",
        KAPPA:2 / 3 * (Math.sqrt(2) - 1),
        DEFAULT_GRID:20,
        GUIDE_TOLERANCE:8,
        OK_CANCEL:{
            primary:"Ok",
            secondary:"Cancel"
        },
        G:{}
    }), window.Cur = {
        DROPPER:"url(//127.0.0.1/easel/assets/editor/cursors/eyedropper-1fd2eaa05869ccab9729d8ccbea46f19.png) 4 19, pointer",
        NODE_POINTER:"url(//127.0.0.1/easel/assets/editor/cursors/white_pointer_node-49c2e18ab2f25c5dbc0246d484092882.png) 0 0, auto",
        WHITE_POINTER:"url(//127.0.0.1/easel/assets/editor/cursors/white_pointer-854531f4bfbd9d93b480f8bbc4aefe78.png) 0 0, auto",
        BLACK_NO_HANDLE:"url(//127.0.0.1/easel/assets/editor/cursors/black_pointer-022ad3f1591a5592289d175cd692c068.png) 0 0, auto",
        ZOOMIN:"url(//127.0.0.1/easel/assets/editor/cursors/zoom_in-025cb43328184aaa488003a9a65e11f4.png), pointer",
        ZOOMOUT:"url(//127.0.0.1/easel/assets/editor/cursors/zoom_out-1e10a279e1254c03dda68f3e8771c99a.png), pointer",
        PEN:"url(//127.0.0.1/easel/assets/editor/cursors/pen-f3878aaaca13d66dd41627348a0c4988.png) 5 0, pointer",
        PEN_X:"url(//127.0.0.1/easel/assets/editor/cursors/pen_w_x-2480ef178854b70a6fbae94d554e47d8.png) 5 0, pointer",
        PEN_MINUS:"url(//127.0.0.1/easel/assets/editor/cursors/remove_node-746685618dfcf722f087b5d7dbcfca50.png) 5 0, pointer",
        PEN_CLOSE:"url(//127.0.0.1/easel/assets/editor/cursors/close_node-7ea89d1f7ec8739ef1fc0f84da2fe382.png) 5 0, pointer",
        ADD:"url(//127.0.0.1/easel/assets/editor/cursors/add-4835dd72bb3f0c159a5097ec29eee814.png) 0 0, copy",
        HAND_OPEN:"url(//127.0.0.1/easel/assets/editor/cursors/openhand-0f8679a8c9837e7e7bf6a50010081248.png) 8 8, hand",
        HAND_CLOSED:"url(//127.0.0.1/easel/assets/editor/cursors/closedhand-1532ef40569d4452c04bfad090844ad4.png) 8 8, hand",
        HAND:"url(//127.0.0.1/easel/assets/editor/cursors/move_bar-f8543fb9238378595f176f207e1ed70e.png) 12 5, hand",
        HAND_ROTATE:"url//127.0.0.1/easel/assets/editor/cursors/over_stop-11ed6b99d05708b30a5cc2bfd6901e9d.png) 12 5, hand",
        FINGER:"pointer"
    }, Draw.Collection = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        return i(n, e), n.prototype._prepareModel = function(t) {
            return t.collection || (t.collection = this), t;
        }, n;
    }(Backbone.Collection), Draw.isDrawable = function(t) {
        return t instanceof Draw.Path || t instanceof Draw.Text || t instanceof Draw.DomImage;
    }, Draw.isProduction = function() {
        return 0 === window.__env;
    }, Draw.isStaging = function() {
        return 1 === window.__env;
    }, Draw.isDevelopment = function() {
        return window.__env > 1;
    }, Draw.Icon = {
        glass:"",
        music:"",
        search:"",
        envelope:"",
        heart:"",
        star:"",
        "star-empty":"",
        user:"",
        film:"",
        "th-large":"",
        th:"",
        "th-list":"",
        ok:"",
        remove:"",
        "zoom-in":"",
        "zoom-out":"",
        off:"",
        signal:"",
        cog:"",
        trash:"",
        home:"",
        file:"",
        time:"",
        road:"",
        "download-alt":"",
        download:"",
        upload:"",
        inbox:"",
        "play-circle":"",
        repeat:"",
        refresh:"",
        "list-alt":"",
        lock:"",
        flag:"",
        headphones:"",
        "volume-off":"",
        "volume-down":"",
        "volume-up":"",
        qrcode:"",
        barcode:"",
        tag:"",
        tags:"",
        book:"",
        bookmark:"",
        print:"",
        camera:"",
        font:"",
        bold:"",
        italic:"",
        "text-height":"",
        "text-width":"",
        "align-left":"",
        "align-center":"",
        "align-right":"",
        "align-justify":"",
        list:"",
        "indent-left":"",
        "indent-right":"",
        "facetime-video":"",
        picture:"",
        pencil:"",
        "map-marker":"",
        adjust:"",
        tint:"",
        edit:"",
        share:"",
        check:"",
        move:"",
        "step-backward":"",
        "fast-backward":"",
        backward:"",
        play:"",
        pause:"",
        stop:"",
        forward:"",
        "fast-forward":"",
        "step-forward":"",
        eject:"",
        "chevron-left":"",
        "chevron-right":"",
        "plus-sign":"",
        "minus-sign":"",
        "remove-sign":"",
        "ok-sign":"",
        "question-sign":"",
        "info-sign":"",
        screenshot:"",
        "remove-circle":"",
        "ok-circle":"",
        "ban-circle":"",
        "arrow-left":"",
        "arrow-right":"",
        "arrow-up":"",
        "arrow-down":"",
        "share-alt":"",
        "resize-full":"",
        "resize-small":"",
        plus:"",
        minus:"",
        asterisk:"",
        "exclamation-sign":"",
        gift:"",
        leaf:"",
        fire:"",
        "eye-open":"",
        "eye-close":"",
        "warning-sign":"",
        plane:"",
        calendar:"",
        random:"",
        comment:"",
        magnet:"",
        "chevron-up":"",
        "chevron-down":"",
        retweet:"",
        "shopping-cart":"",
        "folder-close":"",
        "folder-open":"",
        "resize-vertical":"",
        "resize-horizontal":"",
        "bar-chart":"",
        "twitter-sign":"",
        "facebook-sign":"",
        "camera-retro":"",
        key:"",
        cogs:"",
        comments:"",
        "thumbs-up":"",
        "thumbs-down":"",
        "star-half":"",
        "heart-empty":"",
        signout:"",
        "linkedin-sign":"",
        pushpin:"",
        "external-link":"",
        signin:"",
        trophy:"",
        "github-sign":"",
        "upload-alt":"",
        lemon:"",
        phone:"",
        "check-empty":"",
        "bookmark-empty":"",
        "phone-sign":"",
        twitter:"",
        facebook:"",
        github:"",
        unlock:"",
        "credit-card":"",
        rss:"",
        hdd:"",
        bullhorn:"",
        bell:"",
        certificate:"",
        "hand-right":"",
        "hand-left":"",
        "hand-up":"",
        "hand-down":"",
        "circle-arrow-left":"",
        "circle-arrow-right":"",
        "circle-arrow-up":"",
        "circle-arrow-down":"",
        globe:"",
        wrench:"",
        tasks:"",
        filter:"",
        briefcase:"",
        fullscreen:"",
        group:"",
        link:"",
        cloud:"",
        beaker:"",
        cut:"",
        copy:"",
        "paper-clip":"",
        save:"",
        "sign-blank":"",
        reorder:"",
        "list-ul":"",
        "list-ol":"",
        strikethrough:"",
        underline:"",
        table:"",
        magic:"",
        truck:"",
        pinterest:"",
        "pinterest-sign":"",
        "google-plus-sign":"",
        "google-plus":"",
        money:"",
        "caret-down":"",
        "caret-up":"",
        "caret-left":"",
        "caret-right":"",
        columns:"",
        sort:"",
        "sort-down":"",
        "sort-up":"",
        "envelope-alt":"",
        linkedin:"",
        undo:"",
        legal:"",
        dashboard:"",
        "comment-alt":"",
        "comments-alt":"",
        bolt:"",
        sitemap:"",
        umbrella:"",
        paste:"",
        "user-md":""
    };
}.call(this), function() {
    window.Lib || (window.Lib = {});
}.call(this), window.Color = {
    normalize:function(t) {
        if (_.isString(t) && (t = t.toLowerCase(), ("null" == t || "none" == t || "transparent" == t) && (t = null)), 
        _.isString(t) && t.indexOf("rgba") > -1) {
            var e = /\((.*)\)/gi.exec(t);
            if (e) {
                var i = e[1].split(",");
                t = "rgb(" + i.slice(0, 3).join(",") + ")", t = new paper.RGBColor(t), t.setAlpha(i[3]);
            } else {
                var n = {
                    message:"re exec null!"
                };
                Err.notify(n, "Color", "normalize:rgba", {
                    color:t
                }), t = new paper.RGBColor("rgb(0,0,0)");
            }
        } else if (t && void 0 != t.R) {
            var o = 1;
            _.isNumber(t.A) && (o = _.clamp(t.A, 0, 1)), c2 = t, t = "rgb(" + [ t.R, t.G, t.B ].join(",") + ")", 
            t = new paper.RGBColor(t), t.setAlpha(o);
        }
        return t && t instanceof paper.RGBColor ? t :t && t instanceof paper.GradientColor ? t.gradient :t && t instanceof paper.Gradient ? t :t = t ? new paper.RGBColor(t) :null;
    },
    solid:function(t) {
        return t = Color.normalize(t), t && t.stops && (t = t.stops[0].color), t;
    },
    rgbStringToHexString:function(t) {
        return re = /[0-9]+/g, pairs = t.match(re), 3 == pairs.length ? (rgb = {
            R:parseInt(pairs[0]),
            G:parseInt(pairs[1]),
            B:parseInt(pairs[2])
        }, "#" + Color.HEX_STRING(Color.RGB_HEX(rgb))) :null;
    },
    NORMALIZE_FILL:function(t) {
        return t = window.Color.normalize(t), t instanceof paper.Gradient && (t = t.stops[0].color), 
        t;
    },
    NORMALIZE_JSON:function(t) {
        return t instanceof paper.GradientColor || (t = Color.normalize(t)), t ? t.toJSON() :null;
    },
    NORMALIZE_FROM_JSON:function(t) {
        if (!t) return null;
        if (t instanceof paper.Color || t instanceof paper.Gradient || t instanceof paper.GradientColor) return t;
        if (_.isString(t)) return Color.normalize(t);
        var e = paper.Color;
        return t.g ? e = paper.GradientColor :t.stops && (e = paper.Gradient), e.fromJSON(t);
    },
    NORMALIZED_BRIGHTNESS:function(t) {
        return (255 * t.red * 299 + 255 * t.green * 587 + 255 * t.blue * 114) / 1e3;
    },
    NORMALIZED_RGB:function(t) {
        if (t) {
            var e = {
                R:Math.round(255 * t.red),
                G:Math.round(255 * t.green),
                B:Math.round(255 * t.blue),
                A:t.alpha
            };
            return (isNaN(t.alpha) || !t.alpha && 0 != t.alpha) && (e.A = 1), e;
        }
        return null;
    },
    NORMALIZED_HEX_STRING:function(t) {
        return "#" + Color.HEX_STRING(Color.RGB_HEX(Color.NORMALIZED_RGB(t)));
    },
    HEX_STRING:function(t) {
        for (var e = t.toString(16), i = e.length; 6 > i; ) e = "0" + e, i++;
        return e;
    },
    RGB_HEX:function(t) {
        return t.R << 16 | t.G << 8 | t.B;
    },
    RGB_HSV:function(t) {
        var e, i, n = t.R / 255, o = t.G / 255, r = t.B / 255, s = Math.max(n, o, r), a = Math.min(n, o, r), l = s, c = s - a;
        if (i = 0 == s ? 0 :c / s, s == a) e = 0; else {
            switch (s) {
              case n:
                e = (o - r) / c + (r > o ? 6 :0);
                break;

              case o:
                e = (r - n) / c + 2;
                break;

              case r:
                e = (n - o) / c + 4;
            }
            e /= 6;
        }
        return {
            H:Math.round(360 * e),
            S:Math.round(100 * i),
            V:Math.round(100 * l),
            A:t.A
        };
    },
    HSV_RGB:function(t) {
        var e, i, n, o, n, r, s, a = t.H / 360, l = t.S / 100, c = t.V / 100;
        if (0 == l) e = i = n = Math.round(255 * c); else switch (a >= 1 && (a = 0), a = 6 * a, 
        s = a - Math.floor(a), o = Math.round(255 * c * (1 - l)), n = Math.round(255 * c * (1 - l * s)), 
        r = Math.round(255 * c * (1 - l * (1 - s))), c = Math.round(255 * c), Math.floor(a)) {
          case 0:
            e = c, i = r, n = o;
            break;

          case 1:
            e = n, i = c, n = o;
            break;

          case 2:
            e = o, i = c, n = r;
            break;

          case 3:
            e = o, i = n, n = c;
            break;

          case 4:
            e = r, i = o, n = c;
            break;

          case 5:
            e = c, i = o, n = n;
        }
        return {
            R:e,
            G:i,
            B:n,
            A:t.A
        };
    },
    HSV_HEX:function(t) {
        return Color.HEX_STRING(Color.RGB_HEX(Color.HSV_RGB(t)));
    }
}, window.Angle = {
    topCW:function(t) {
        return (450 + t) % 360;
    },
    topCCW:function(t) {
        return (360 - t + 270) % 360;
    },
    rightCCW:function(t) {
        return (360 - t) % 360;
    }
}, function() {
    Lib.EventedObject = function() {
        function t(t) {
            this.object = t || {};
        }
        return mixin(t, Backbone.Events), t.prototype.set = function(t, e, i) {
            var n, o, r, s, a, l, c;
            if (t && t.length) {
                for (r = this.object, o = t[t.length - 1], a = t.slice(0, -1), l = 0, c = a.length; c > l; l++) n = a[l], 
                null == r[n] && (r[n] = {}), r = r[n];
                return s = r[o], _.isEqual(s, e) ? void 0 :(null != e ? r[o] = e :delete r[o], this.trigger("change", t, _.extend({}, i, {
                    old:s,
                    "new":e,
                    object:this.object
                })));
            }
        }, t.prototype.get = function(t) {
            var e, i, n, o;
            for (t = t || [], i = this.object, n = 0, o = t.length; o > n; n++) e = t[n], i = i[e];
            return i;
        }, t.prototype.keys = function(t, e) {
            var i, n, o;
            if (n = this.get(t), n && _.isArray(n._order) && !e) return o = n._order;
            if (_.isArray(n)) return null;
            try {
                return _.keys(n);
            } catch (r) {
                return i = r, null;
            }
        }, t.prototype.hasChildren = function(t) {
            return !!this.keys(t);
        }, t.prototype.update = function(t, e) {
            return this._updateAdditions(t, [], e), this._updateRemovals(t, [], e);
        }, t.prototype._updateAdditions = function(t, e, i) {
            var n, o, r, s, a;
            if (i = _.extend({
                originator:"update"
            }, i), null == this.get(e)) return this.set(e, t.get(e), i);
            if (o = t.keys(e, !0)) {
                for (a = [], r = 0, s = o.length; s > r; r++) n = o[r], a.push(this._updateAdditions(t, e.concat([ n ]), i));
                return a;
            }
            return this.set(e, t.get(e), i);
        }, t.prototype._updateRemovals = function(t, e, i) {
            var n, o, r, s, a;
            if (i = _.extend({
                originator:"update"
            }, i), null == t.get(e)) return this.set(e, void 0, i);
            if (o = this.keys(e, !0)) {
                for (a = [], r = 0, s = o.length; s > r; r++) n = o[r], a.push(this._updateRemovals(t, e.concat([ n ]), i));
                return a;
            }
        }, t;
    }();
}.call(this), function() {
    Lib.Version = function() {
        function t(t) {
            this.major = 0, this.minor = 0, this.patch = 0, this._parse(t);
        }
        return t.prototype.toString = function() {
            var t;
            return t = [ this.major, this.minor ], this.patch && t.push(this.patch), t.join(".");
        }, t.prototype.toJSON = function() {
            return this.toString();
        }, t.prototype.clone = function() {
            return new Lib.Version(this.toString());
        }, t.prototype.isEqual = function(t) {
            return this.major === t.major && this.minor === t.minor && this.patch === t.patch;
        }, t.prototype.isMajorDifferentThan = function(t) {
            return this.major !== t.major;
        }, t.prototype._parse = function(t) {
            var e, i, n;
            if (t) return _.isNumber(t) ? (this.major = t, this.minor = this.patch = 0) :(i = t.split("."), 
            2 === i.length && i.push(0), n = function() {
                var t, n, o;
                for (o = [], t = 0, n = i.length; n > t; t++) e = i[t], o.push(parseInt(e));
                return o;
            }(), this.major = n[0], this.minor = n[1], this.patch = n[2], n);
        }, t;
    }();
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    Lib.StyleSheet = function() {
        function e(e, i) {
            this._syncCssToSheets = t(this._syncCssToSheets, this), this.onChangeObject = t(this.onChangeObject, this);
            var n;
            n = {
                insertMethod:"append",
                attachTo:null,
                delay:this.UPDATE_DELAY
            }, this.options = _.extend(n, i), this._object = e, this.object = new Lib.EventedObject(this._object), 
            this.object.bind("change", this.onChangeObject), this.id = _.uniqueId("custom-"), 
            this._styleEls = [], this._syncDelay = new Debouncer(this.options.delay, this._syncCssToSheets), 
            this.options.attachTo && this.attachToDocument(this.options.attachTo);
        }
        return mixin(e, Backbone.Events), e.prototype.UPDATE_DELAY = 50, e.prototype.getCssText = function() {
            return Draw.Export.CSS.dump(this.object);
        }, e.prototype.set = function(t, e, i) {
            return this.object.set(t, e, i);
        }, e.prototype.get = function(t) {
            return this.object.get(t);
        }, e.prototype.update = function(t, e) {
            var i, n;
            try {
                return n = Import.CSS.parse(t), this.object.update(n, e), n;
            } catch (o) {
                i = o, this.trigger("parseerror", this, t, i);
            }
            return null;
        }, e.prototype.remove = function() {
            var t, e, i, n;
            for (n = this._styleEls, e = 0, i = n.length; i > e; e++) t = n[e], t.remove();
            return this._styleEls = [];
        }, e.prototype.attachToDocument = function(t) {
            return this._loadSheet(t);
        }, e.prototype.isStyleRule = function(t) {
            var e, i, n, o;
            if (i = this.object.keys(t)) for (n = 0, o = i.length; o > n; n++) return e = i[n], 
            !this.object.hasChildren(t.concat([ e ]));
            return !1;
        }, e.prototype.onChangeObject = function(t, e) {
            return this.trigger("change", t, e), this._syncChangeToSheets(t, e);
        }, e.prototype._fireUpdateEvent = function() {
            return this.trigger("update", this);
        }, e.prototype._syncCssToSheets = function() {
            return this._updateSheets(this.getCssText(this.object)), this._fireUpdateEvent();
        }, e.prototype._syncChangeToSheets = function(t, e) {
            var i, n, o, r, s, a, l, c;
            if (n = t.slice(0, t.length - 1), !this.isStyleRule(n) || this._isImportant(e.old) || this._isImportant(e["new"])) return this._syncDelay.update();
            for (i = t[t.length - 1], s = !0, c = this._styleEls, a = 0, l = c.length; l > a; a++) r = c[a], 
            o = this._getSheet(r), s = s && this._updateRule(o, n, i, e["new"]);
            return s ? this._fireUpdateEvent() :this._syncDelay.update();
        }, e.prototype._isImportant = function(t) {
            return t ? t.indexOf("!important") > -1 :!1;
        }, e.prototype._updateRule = function(t, e, i, n) {
            var o;
            return o = this._getRule(t, e), o ? (null == n && (n = null), o.style[_.camelize(i)] = n, 
            !0) :!1;
        }, e.prototype._getSheet = function(t) {
            var e, i, n, o;
            for (i = t[0].ownerDocument.styleSheets, n = 0, o = i.length; o > n; n++) if (e = i[n], 
            e.ownerNode === t[0]) return e;
            return null;
        }, e.prototype._getRules = function(t) {
            return "cssRules" in t ? t.cssRules :t.rules;
        }, e.prototype._getRule = function(t, e, i) {
            var n, o, r, s;
            for (i = i || 0, o = this._getRules(t), r = 0, s = o.length; s > r; r++) {
                if (n = o[r], n.media && n.media.mediaText.indexOf(e[i].replace("@media ", "")) > -1) return this._getRule(n, e, i + 1);
                if (n.selectorText && n.selectorText === e[i]) return n;
            }
            return null;
        }, e.prototype._updateSheets = function(t) {
            var e, i, n, o, r;
            for (o = this._styleEls, r = [], i = 0, n = o.length; n > i; i++) e = o[i], r.push(this._updateSheet(e, t));
            return r;
        }, e.prototype._updateSheet = function(t, e) {
            return t.text(e);
        }, e.prototype._loadSheet = function(t) {
            var e, i, n;
            return i = $("<style/>", {
                id:this.id,
                type:"text/css"
            }), e = this.getCssText(this.object), this._updateSheet(i, e), n = $(t).find("head"), 
            n[this.options.insertMethod](i), this._styleEls.push(i);
        }, e;
    }();
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    }, n = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Lib.GeneratedStyleSheet = function(e) {
        function o() {
            return t = o.__super__.constructor.apply(this, arguments);
        }
        var r, s, a;
        return i(o, e), s = "root-element", a = [ "input" ], r = [ "btn-primary", "btn-info", "btn-success", "btn-warning", "btn-danger", "btn-inverse", "btn-link", "btn", "label-success", "label-important", "label-info", "label-warning", "label-invert", "label", "badge-success", "badge-important", "badge-info", "badge-warning", "badge-invert", "badge", "navbar-fixed-top", "navbar-static-top", "navbar-fixed-bottom", "navbar-inner", "nav-tabs", "nav-pills", "nav-list", "nav-stacked", "alert-block", "alert-error", "alert-info", "alert-success", "alert", "form-actions", "form-inline", "form-horizontal", "navbar-form", "navbar-search", "control-group", "controls", "textinput", "container", "container-fluid", "row", "row-fluid", "heading", "btn-large", "btn-small", "btn-mini", "input-mini", "input-small", "input-medium", "input-large", "input-xlarge", "input-xxlarge", "span1", "span2", "span3", "span4", "span5", "span6", "span7", "span8", "span9", "span10", "span11", "span12", "offset1", "offset2", "offset3", "offset4", "offset5", "offset6", "offset7", "offset8", "offset9", "offset10", "offset11", "offset12", "pull-left", "pull-right", "pull-center", "input-block-level" ], 
        o.prototype.parse = function(t) {
            var e, i, n, o;
            for (t.is("." + s) ? i = t.clone() :(i = $("<div/>").addClass(s), i.append(t.clone())), 
            n = 0, o = i.length; o > n; n++) e = i[n], this._parseNode($(e), i);
            return i;
        }, o.prototype._parseNode = function(t, e) {
            var i, n, o, r, s, a, l, c;
            if (t.length) {
                for (o = this._getPath(t), n = this._getCss(t), t.removeAttr("style"), _.size(n) && (r = e.find(o), 
                this._resolveCollisions(r, o), n = this._getCss(t), _.size(n) && (r.length > 1 && (o = this._addUniqueClass(t, o)), 
                this.set([ o ], n))), l = t.children(), c = [], s = 0, a = l.length; a > s; s++) i = l[s], 
                c.push(this._parseNode($(i), e));
                return c;
            }
        }, o.prototype._resolveCollisions = function(t, e) {
            var i, n, o, r, s, a;
            for (i = this._findCommonStyle(t), a = [], r = 0, s = i.length; s > r; r++) n = i[r], 
            n.nodes.length === t.length ? (this.set([ e ], n.css), a.push(this._removeCss(n.nodes, n.css))) :(o = this._addUniqueClass(n.nodes, e), 
            this.set([ o ], n.css), a.push(this._removeCss(n.nodes, n.css)));
            return a;
        }, o.prototype._addUniqueClass = function(t, e) {
            var i;
            return i = this._generateUniqueClass(e), $(t).addClass(i), "" + e + "." + i;
        }, o.prototype._nodeListsEqual = function(t, e) {
            var i, n, o;
            if (!t || !e) return !1;
            if (t.length !== e.length) return !1;
            for (i = n = 0, o = t.length; o >= 0 ? o > n :n > o; i = o >= 0 ? ++n :--n) if (t[i] !== e[i]) return !1;
            return !0;
        }, o.prototype._findCommonStyle = function(t) {
            var e, i, n, o, r, s, a, l, c, h, u, d, p, f = this;
            for (l = [], a = {}, d = 0, p = t.length; p > d; d++) {
                r = t[d], e = this._getCss($(r));
                for (s in e) h = e[s], o = "" + s + ":" + h, a[o] || (a[o] = {
                    property:s,
                    value:h,
                    nodes:[]
                }), a[o].nodes.push(r);
            }
            n = function(t) {
                var e, i, n;
                for (i = 0, n = l.length; n > i; i++) if (e = l[i], f._nodeListsEqual(e.nodes, t)) return e;
                return null;
            };
            for (u in a) i = a[u], c = n(i.nodes), c || (c = {
                css:{},
                nodes:i.nodes
            }, l.push(c)), c.css[i.property] = i.value;
            return l = function() {
                var t, e, n;
                for (n = [], t = 0, e = l.length; e > t; t++) i = l[t], i.nodes.length > 1 && n.push(i);
                return n;
            }();
        }, o.prototype._getCss = function(t) {
            var e;
            return t instanceof jQuery && (t = t[0]), e = t.__css__, e || (e = t.__css__ = Import.CSS.cssToDict($(t).attr("style"))), 
            e;
        }, o.prototype._setCss = function(t, e) {
            return t instanceof jQuery && (t = t[0]), t.__css__ = e;
        }, o.prototype._removeCss = function(t, e) {
            var i, n, o, r, s, a, l, c;
            for (c = [], a = 0, l = t.length; l > a; a++) {
                r = t[a], i = this._getCss(r), o = {};
                for (n in i) s = i[n], e[n] !== s && (o[n] = s);
                c.push(this._setCss(r, o));
            }
            return c;
        }, o.prototype._getPath = function(t) {
            var e;
            return e = this._extractFullPath(t), this._filterPath(e);
        }, o.prototype._generateUniqueClass = function(t) {
            var e, i, n;
            return n = t.split(" "), n = n[n.length - 1], i = n.split("."), e = i[i.length - 1].trim(), 
            e = this._uniqueId(e).replace(/\./gi, "");
        }, o.prototype._filterPath = function(t) {
            var e, i, n, o, r, s, a, l, c, h;
            for (o = t.split(" "), e = r = l = o.length - 1; r >= 0; e = r += -1) if (n = o[e], 
            this._hasId(n)) {
                o = o.slice(e);
                break;
            }
            for (i = [], e = s = c = o.length - 1; s >= 0; e = s += -1) n = this._filterSelector(o[e]), 
            n && i.push(n);
            if (i.reverse(), o = i, this._hasId(o[0]) && o.length > 2) {
                for (i = [ o[0] ], e = a = 1, h = o.length - 1; h >= 1 ? h > a :a > h; e = h >= 1 ? ++a :--a) this._hasNonEditorClasses(o[e]) && i.push(o[e]);
                i.push(o[o.length - 1]), o = i;
            }
            return o.join(" ");
        }, o.prototype._filterSelector = function(t) {
            return this._hasId(t) ? this._extractId(t) :this._hasClasses(t) ? this._extractClasses(t) :t;
        }, o.prototype._hasId = function(t) {
            return t.indexOf("#") > -1;
        }, o.prototype._hasClasses = function(t) {
            return t.indexOf(".") > -1;
        }, o.prototype._isTag = function(t) {
            return !(this._hasId(t) || this._hasClasses(t));
        }, o.prototype._hasNonEditorClasses = function(t) {
            var e, i, n, o;
            if (this._isTag(t) || this._hasId(t)) return !0;
            if (this._hasClasses(t)) for (o = t.split("."), i = 0, n = o.length; n > i; i++) if (e = o[i], 
            e && r.indexOf(e) < 0) return !0;
            return !1;
        }, o.prototype._extractId = function(t) {
            var e, i;
            return i = t.indexOf("#"), e = t.indexOf("."), i > -1 ? (0 > e && (e = t.length), 
            t.slice(i, e)) :"";
        }, o.prototype._extractClasses = function(t) {
            var e, i, n, o, s, a;
            return n = t.split("."), s = "", 0 !== t.indexOf(".") && (s = n[0], n = n.slice(1)), 
            0 === n.length ? s :(a = function() {
                var t, e, o;
                for (o = [], t = 0, e = n.length; e > t; t++) i = n[t], i && r.indexOf(i) < 0 && o.push(i);
                return o;
            }(), a.length ? s + "." + a.join(".") :(e = function(t) {
                var e;
                return t ? (e = r.indexOf(t), [ 100 - e, t ]) :[ 0, t ];
            }, o = function() {
                var t, o, r;
                for (r = [], t = 0, o = n.length; o > t; t++) i = n[t], r.push(e(i));
                return r;
            }(), i = _.reduce(o, function(t, e) {
                return e[0] > t[0] ? e :t;
            }), s + "." + i[1]));
        }, o.prototype._extractSelector = function(t) {
            var e, i, o, r;
            return t = t[0], i = "", t.id && (i = "#" + t.id.trim()), e = "", t.className && (e = "." + t.className.trim().replace(/\s+/g, ".")), 
            o = "" + i + e, r = t.tagName.toLowerCase(), n.call(a, r) >= 0 ? o = "" + r + o :o || (o = r), 
            o;
        }, o.prototype._extractFullPath = function(t) {
            var e, i, n;
            for (i = "", e = t; e && e.length; ) n = this._extractSelector(e), i = "" + n + " " + i, 
            e = e.parent(), (!e || 0 === e.length || e.is("body, ." + s)) && (e = null);
            return i.trim();
        }, o.prototype._uniqueId = function(t) {
            var e, i, n, o, r;
            return this._idCounters || (this._idCounters = {}), t = t.toLowerCase(), n = 1, 
            r = t.split("-"), o = parseInt(r[r.length - 1]), r.length > 1 && _.isNumber(o) && (t = r.slice(0, r.length - 1).join("-"), 
            n = o + 1), i = this._idCounters[t] || n, e = t + "-" + i, this._idCounters[t] = i + 1, 
            e;
        }, o;
    }(Lib.StyleSheet);
}.call(this), function() {
    window.Typo = {
        _METRICS_CACHE:{}
    }, Typo._MEASURE_STRING = "Mmgfj", Typo._DEFS = {
        font:"Helvetica, Arial, san-serif",
        italic:!1,
        fontSize:12,
        fontWeight:"normal"
    }, Typo._getContext = function() {
        return Typo._ctx ? Typo._ctx :(Typo._canvas = document.createElement("canvas"), 
        Typo._ctx = Typo._canvas.getContext("2d"), Typo._ctx);
    }, Typo._clearContext = function() {
        var t = Typo._getContext();
        t.setTransform(1, 0, 0, 1, 0, 0), t.clearRect(0, 0, Typo._canvas.width, Typo._canvas.height);
    }, Typo._getFontStyle = function(t, e, i, n) {
        var o = [];
        return n && o.push("italic"), i && o.push(i), o.push(e + "pt"), o.push(t), o.join(" ").toLowerCase();
    }, Typo.extend = function() {
        return obj = null, window._ && (obj = _), window.$ && (obj = $), obj ? obj.extend.apply(obj, arguments) :arguments[0];
    }, Typo.splitIntoLines = function(t) {
        var e = {
            width:200,
            text:""
        };
        t = Typo.extend({}, Typo._DEFS, e, t);
        var i = Typo._getContext();
        i.save(), i.font = Typo._getFontStyle(t.font, t.fontSize, t.fontWeight, t.italic);
        for (var n = [], o = t.text.split("\n"), r = 0; r < o.length; r++) {
            var s = o[r], a = s.split(/[ \t]/g);
            a.length && r < o.length - 1 && (a[a.length - 1] = a[a.length - 1] + "\n");
            for (var l = [], c = 0; c < a.length; c++) {
                var h = a[c], u = l.join(" "), d = h;
                l.length && (d = u + " " + h), i.measureText(d).width > t.width ? l.length ? (n.push(u), 
                l = [ h ]) :(n.push(d), l = []) :l.push(h);
            }
            l.length && n.push(l.join(" "));
        }
        for (var r = 0; r < n.length - 1; r++) {
            var l = n[r];
            "\n" != l[l.length - 1] && (n[r] += " ");
        }
        return i.restore(), n;
    }, Typo.getLineHeight = function(t) {
        t = Typo.extend({}, Typo._DEFS, t);
        var e = Typo._span;
        return e || (e = Typo._span = document.createElement("p"), e.style.position = "absolute", 
        e.style.top = "-2000px", e.style.left = "5000px", document.getElementsByTagName("body")[0].appendChild(e)), 
        e.style.fontFamily = t.font, e.style.fontSize = t.fontSize + "pt", e.style.fontStyle = t.italic ? "italic" :"normal", 
        e.style.fontWeight = t.fontWeight || "normal", e.style.lineHeight = "1.0", e.style.padding = "0", 
        e.style.margin = "0", e.innerHTML = "ABCDEFGHIKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz<br/>ABCDEFGHIKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz", 
        parseInt($(e).height() / 2);
    }, Typo.getBestFontSize = function(t, e) {
        var i = {
            text:""
        };
        t = Typo.extend({}, Typo._DEFS, i, t), t.fontSize = parseInt(t.fontSize);
        var n = t.fontSize, o = Typo.getFontMetrics(t);
        if (o.width < e) {
            for (;o.width < e; ) t.fontSize++, o = Typo.getFontMetrics(t);
            n = t.fontSize - 1;
        } else if (o.width > e) {
            for (;o.width > e; ) t.fontSize--, o = Typo.getFontMetrics(t);
            n = t.fontSize + 1;
        }
        return n;
    }, Typo.resetFontCache = function(t) {
        var e = [];
        for (var i in Typo._METRICS_CACHE) e.push(i);
        t = t.toLowerCase();
        for (var n = 0; n < e.length; n++) {
            var i = e[n];
            i in Typo._METRICS_CACHE && (i = i.toLowerCase(), i.indexOf(t) > -1 && delete Typo._METRICS_CACHE[e[n]]);
        }
    }, Typo.getFontMetrics = function(t) {
        var e = {
            bboxHeight:null,
            canvasHeight:null,
            text:Typo._MEASURE_STRING
        }, i = Typo._getContext();
        Typo._clearContext(), t = Typo.extend({}, Typo._DEFS, e, t);
        var n = Typo._getFontStyle(t.font, t.fontSize, t.fontWeight, t.italic);
        i.font = n;
        var o = i.measureText(t.text).width, r = Typo._METRICS_CACHE[n];
        if (r) {
            var s = _.clone(r);
            return s.width = o, s;
        }
        var a = i.measureText(Typo._MEASURE_STRING).width, l = 2 * t.fontSize, c = 3 * t.fontSize, h = i.canvas.width = Math.round(a + 2 * l), u = i.canvas.height = t.canvasHeight ? t.canvasHeight :Math.round(2 * c), d = "number" == typeof t.bboxHeight ? t.bboxHeight :c;
        "string" == typeof t.baseline && (c = 0, i.textBaseline = t.baseline), i.font = n, 
        i.fillText(Typo._MEASURE_STRING, l, d);
        for (var p = i.getImageData(0, 0, h, u), f = p.data, g = 0, m = 0; m < f.length; ) f[m + 3] && (m -= m % (4 * h), 
        g = m / 4 / h, m = f.length), m += 4;
        for (var v = 0, m = f.length; m > 0; ) f[m + 3] && (m -= m % (4 * h), v = m / 4 / h, 
        m = 0), m -= 4;
        return lineHeight = Typo.getLineHeight(t), d -= g, height = v - g, Typo._METRICS_CACHE[n] = {
            lineHeight:lineHeight,
            width:o,
            height:height,
            baseline:d,
            top:d - lineHeight,
            bottom:height - d
        }, Typo._METRICS_CACHE[n];
    };
}(), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    }, n = {}.hasOwnProperty, o = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var o in e) n.call(e, o) && (t[o] = e[o]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.PropertyMixin = function() {
        function t() {
            this.restoreProperties = e(this.restoreProperties, this), this.saveProperties = e(this.saveProperties, this), 
            this._cloneProperties = e(this._cloneProperties, this), this.setProperty = e(this.setProperty, this), 
            this.set = e(this.set, this), this.get = e(this.get, this), this.getAll = e(this.getAll, this), 
            this.change = e(this.change, this), this.trigger = e(this.trigger, this), this.unbind = e(this.unbind, this), 
            this.bind = e(this.bind, this), this.initializeProperties = e(this.initializeProperties, this);
        }
        return t.prototype.initializeProperties = function(t) {
            return this._model = new Backbone.Model({}), this._model.owner = this, t && (this.set(t, {
                quiet:!0,
                init:!0
            }), this._model._previousAttributes = _.clone(this._model.attributes)), this.bindPendingEvents();
        }, t.prototype.bind = function() {
            return this._model ? this._model.bind.apply(this._model, arguments) :(this._events = this._events || [], 
            this._events.push(_.toArray(arguments)));
        }, t.prototype.bindPendingEvents = function() {
            var t, e, i, n, o;
            if (this._events) {
                for (n = this._events, o = [], e = 0, i = n.length; i > e; e++) t = n[e], o.push(this._model.bind.apply(this._model, t));
                return o;
            }
        }, t.prototype.unbind = function() {
            return this._model ? this._model.unbind.apply(this._model, arguments) :void 0;
        }, t.prototype.trigger = function() {
            return this._model ? this._model.trigger.apply(this._model, arguments) :void 0;
        }, t.prototype.change = function(t) {
            return this.trigger("change", this._model, t || {});
        }, t.prototype.changedAttributes = function() {
            return this._model.changedAttributes();
        }, t.prototype.getPrevious = function(t) {
            return this._previousModelAttributes[t];
        }, t.prototype.getAll = function() {
            return this._model.attributes;
        }, t.prototype.get = function(t) {
            var e, i, n, o, r;
            if (_.isString(t)) return this._model.get(t);
            for (i = this.supportedProperties(), n = {}, o = 0, r = i.length; r > o; o++) e = i[o], 
            n[e] = void 0;
            return _.extend(n, _.extract(this._model.attributes, this.supportedProperties()));
        }, t.prototype.APPLY_AFTER_REGEX = /color/g, t.prototype.set = function(t, e, i) {
            var n, o, r, s, a, l, c = this;
            _.isString(t) ? (r = {}, r[t] = e, t = r) :i = e, this._previousModelAttributes || (this._previousModelAttributes = _.clone(this._model.attributes)), 
            s = function(t, e) {
                var n;
                return n = c._model.attributes[t], _.isEqual(n, e) || (c._previousModelAttributes[t] = n), 
                c.setProperty(t, e, i);
            }, n = {};
            for (o in t) a = t[o], this.APPLY_AFTER_REGEX.test(o) ? n[o] = a :s(o, a);
            l = [];
            for (o in n) a = n[o], l.push(s(o, a));
            return l;
        }, t.prototype.setProperty = function(t, e, i) {
            var n, o;
            if (_.contains(this.supportedProperties(), t)) return o = {}, _.isObject(i) ? (o = i, 
            i = o.silent) :o.silent = i, i || this.trigger("prechange", this, t, e), e = this._callPropertySetter(t, e, o), 
            n = {}, n[t] = e, this._model.set(n, o);
        }, t.prototype._callPropertySetter = function(t, e, i) {
            var n;
            return n = "_" + _.camelize("set_" + t), _.isFunction(this[n]) && (e = this[n](e, i)), 
            e;
        }, t.prototype._cloneProperties = function(t) {
            var e, i, n, o;
            n = {}, e = this._model.attributes;
            for (i in e) o = e[i], o && _.isFunction(o.clone) && (o = o.clone()), n[i] = o;
            return t.set(n, {
                silent:!0
            }), t._model._previousAttributes = t._model.attributes;
        }, t.prototype.saveProperties = function() {
            var t, e, n, o, r, s;
            for (n = this.supportedProperties(), e = arguments, this._cachedProperties = {}, 
            s = [], o = 0, r = e.length; r > o; o++) t = e[o], i.call(n, t) >= 0 ? s.push(this._cachedProperties[t] = this.get(t)) :s.push(void 0);
            return s;
        }, t.prototype.restoreProperties = function() {
            return this._cachedProperties ? this.set(this._cachedProperties) :void 0;
        }, t.prototype.diff = function(t, e) {
            var i, n, o, r, s, a;
            for (null == e && (e = this.supportedProperties()), r = {}, o = _.extract(this.get(), e), 
            i = _.extract(t.get(), e), s = 0, a = e.length; a > s; s++) n = e[s], _.isEqual(o[n], i[n]) || (r[n] = i[n]);
            return r;
        }, t.included = function(t) {
            return this.generateGettersSetters(t);
        }, t.generateGettersSetters = function(t) {
            var e, i, n, o, r;
            if (_.isFunction(t.supportedProperties)) {
                for (t.prototype.supportedProperties = t.supportedProperties, e = t.supportedProperties(), 
                r = [], n = 0, o = e.length; o > n; n++) i = e[n], Draw.PropertyMixin._addPropertyFunction(t, "set", i), 
                r.push(Draw.PropertyMixin._addPropertyFunction(t, "get", i));
                return r;
            }
        }, t._addPropertyFunction = function(t, e, i) {
            var n;
            return n = e + "_" + i, n = _.camelize(n), t.prototype[n] ? void 0 :t.prototype[n] = function(t, n) {
                var o;
                return o = [ i, t, n ], this[e].apply(this, o);
            };
        }, t.mixinTo = function(t) {
            return _.extend(t.prototype, Draw.PropertyMixin.prototype), Draw.PropertyMixin.generateGettersSetters(t);
        }, t;
    }(), Draw.PropertyAttributeMixin = function(e) {
        function i() {
            return t = i.__super__.constructor.apply(this, arguments);
        }
        return o(i, e), i.prototype.setProperty = function(t, e, n) {
            return _.contains(this.supportedProperties(), t) ? (this["_" + t] = e, i.__super__.setProperty.call(this, t, e, n)) :void 0;
        }, i;
    }(Draw.PropertyMixin), Draw.PropertyAttributeMixin.mixinTo = function(t) {
        return _.extend(t.prototype, Draw.PropertyAttributeMixin.prototype), Draw.PropertyMixin.generateGettersSetters(t);
    };
}.call(this), function() {
    var t, e, i;
    Draw.JSON_KEYS = {
        stroke_width:"stroke_width",
        stroke_color:"stroke",
        fill_color:"fill",
        font_face:"font",
        font_face_size:"fs",
        font_weight:"fw",
        is_italic:"ital",
        alignment:"a",
        content:"text",
        position:"pos",
        closed:"close",
        size:"sz",
        roundness:"r",
        line_height:"h",
        width:"w",
        visible:"v",
        color:"c",
        blur:"b",
        offset:"off",
        "handle-in":"i",
        "handle-out":"o",
        point:"p",
        mode:"mode",
        grid:"grid",
        guides:"guides",
        grid_system:"gs",
        background_color:"background_color",
        column_color:"column_color",
        url:"url",
        symbol_id:"sym"
    }, Draw.JSON_FNS = {
        column_color:Color.NORMALIZE_FROM_JSON,
        background_color:Color.NORMALIZE_FROM_JSON,
        border_top_color:Color.NORMALIZE_FROM_JSON,
        border_bottom_color:Color.NORMALIZE_FROM_JSON,
        border_left_color:Color.NORMALIZE_FROM_JSON,
        border_right_color:Color.NORMALIZE_FROM_JSON,
        stroke:Color.NORMALIZE_FROM_JSON,
        fill:Color.NORMALIZE_FROM_JSON,
        c:Color.NORMALIZE_FROM_JSON,
        pos:paper.Point,
        o:paper.Point,
        i:paper.Point,
        off:paper.Point,
        p:paper.Point,
        sz:paper.Size
    }, Draw.JSON_KEYS_INV = {}, i = Draw.JSON_KEYS;
    for (e in i) t = i[e], Draw.JSON_KEYS_INV[t] = e;
    Draw.stringify = function(t) {
        return JSON.stringify(Draw.jsonify(t));
    }, Draw.jsonify = function(t) {
        return t && t.toJSON && (t = t.toJSON()), t;
    }, Draw.unjsonify = function(t, e) {
        var i;
        return i = Draw.JSON_FNS[t], i && i.fromJSON ? e = i.fromJSON(e) :_.isFunction(i) && (e = i(e)), 
        e;
    }, Draw.toJSON = function(t) {
        var e, i, n;
        e = {};
        for (i in t) n = t[i], e[Draw.JSON_KEYS[i] || i] = Draw.jsonify(n);
        return e;
    }, Draw.fromJSON = function(t) {
        var e, i, n;
        i = {};
        for (e in t) n = t[e], i[Draw.JSON_KEYS_INV[e] || e] = Draw.unjsonify(e, n);
        return i;
    };
}.call(this), function() {
    window.Align = {
        _getList:function(t) {
            return t ? Draw.Item.sortAsc(t, !1) :[];
        },
        _anchorAndList:function(t) {
            var e;
            return t = this._getList(t), e = t[0], [ e, t.slice(1) ];
        },
        _align:function(t, e) {
            var i, n, o, r, s, a, l, c, h, u;
            for (h = this._anchorAndList(t), i = h[0], t = h[1], n = i.getBounds(), l = 0, c = t.length; c > l; l++) o = t[l], 
            r = o.getBounds(), u = e(n, r), s = u[0], a = u[1], (s || a) && o.translate(new paper.Point(s, a));
            return null;
        },
        _distributeCenter:function(t, e, i) {
            var n, o, r, s, a, l, c, h, u, d, p;
            if (t = this._getList(t), t.sort(function(t, i) {
                return e(t) - e(i);
            }), t.length > 2) {
                for (a = e(t[0]), s = e(t[t.length - 1]), t = t.slice(1, t.length - 1), o = (s - a) / (t.length + 1), 
                r = u = 0, d = t.length; d >= 0 ? d > u :u > d; r = d >= 0 ? ++u :--u) l = t[r], 
                n = l.getBounds(), p = i(a, o, r, n), c = p[0], h = p[1], l.setPosition(new paper.Point(c, h));
                return null;
            }
        },
        _distributeEdge:function(t, e, i, n) {
            var o, r, s, a, l, c, h, u, d, p, f, g;
            if (t = this._getList(t), t.sort(function(t, i) {
                return t.getBounds().getCenter()[e] - i.getBounds().getCenter()[e];
            }), t.length > 2) {
                for (a = t[0].getBounds()[e] + t[0].getBounds()[i], s = t[t.length - 1].getBounds()[e], 
                t = t.slice(1, t.length - 1), r = s - a, u = 0, p = t.length; p > u; u++) l = t[u], 
                r -= l.getBounds()[i];
                for (r /= t.length + 1, d = 0, f = t.length; f > d; d++) l = t[d], o = l.getBounds(), 
                a += r, g = n(a, o), c = g[0], h = g[1], l.setPosition(new paper.Point(c, h)), a += o[i];
                return null;
            }
        },
        alignLeft:function(t) {
            return this._align(t, function(t, e) {
                return [ t.getTopLeft().x - e.getTopLeft().x, 0 ];
            });
        },
        alignRight:function(t) {
            return this._align(t, function(t, e) {
                return [ t.getTopRight().x - e.getTopRight().x, 0 ];
            });
        },
        alignHorizCenter:function(t) {
            return this._align(t, function(t, e) {
                return [ t.getCenter().x - e.getCenter().x, 0 ];
            });
        },
        alignVertCenter:function(t) {
            return this._align(t, function(t, e) {
                return [ 0, t.getCenter().y - e.getCenter().y ];
            });
        },
        alignTop:function(t) {
            return this._align(t, function(t, e) {
                return [ 0, t.getTopLeft().y - e.getTopLeft().y ];
            });
        },
        alignBottom:function(t) {
            return this._align(t, function(t, e) {
                return [ 0, t.getBottomLeft().y - e.getBottomLeft().y ];
            });
        },
        distributeHorizCenter:function(t) {
            var e, i;
            return e = function(t) {
                return t.getBounds().getCenter().x;
            }, i = function(t, e, i, n) {
                return [ t + (i + 1) * e - n.width / 2, n.y ];
            }, this._distributeCenter(t, e, i);
        },
        distributeVertCenter:function(t) {
            var e, i;
            return e = function(t) {
                return t.getBounds().getCenter().y;
            }, i = function(t, e, i, n) {
                return [ n.x, t + (i + 1) * e - n.height / 2 ];
            }, this._distributeCenter(t, e, i);
        },
        distributeHorizEdge:function(t) {
            return this._distributeEdge(t, "x", "width", function(t, e) {
                return [ t, e.y ];
            });
        },
        distributeVertEdge:function(t) {
            return this._distributeEdge(t, "y", "height", function(t, e) {
                return [ e.x, t ];
            });
        }
    };
}.call(this), function() {
    Draw.Export = {};
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.Export.Object = function() {
        function t(t, e, i) {
            this.object = t, this.root = e, this.options = null != i ? i :{}, this.children = [], 
            this.parent = this.next = this.previous = null;
        }
        return t.prototype.toString = function() {
            var t, e;
            return e = "[" + function() {
                var e, i, n, o;
                for (n = this.children, o = [], e = 0, i = n.length; i > e; e++) t = n[e], o.push(t.toString());
                return o;
            }.call(this) + "]", "" + this.object.toString() + (this.object.getBounds && this.object.getBounds() || "") + ":" + e;
        }, t.prototype.acceptsChildren = function() {
            return !0;
        }, t.prototype.toHtmlString = function(t) {
            var e, i, n, o, r;
            return null == t && (t = {}), n = "", this.object ? n = function() {
                var e, n, o, r;
                for (o = this.children, r = [], e = 0, n = o.length; n > e; e++) i = o[e], r.push(i.toHtmlString(t));
                return r;
            }.call(this).join("\n") :(o = function() {
                var e, n, o, r;
                for (o = this.children, r = [], e = 0, n = o.length; n > e; e++) i = o[e], i.isSnapped() && r.push(i.toHtmlString(t));
                return r;
            }.call(this), e = function() {
                var e, n, o, r;
                for (o = this.children, r = [], e = 0, n = o.length; n > e; e++) i = o[e], i.isSnapped() || r.push(i.toHtmlString(t));
                return r;
            }.call(this), e.length && (e = e.join("\n"), t.wrap ? (r = "position: relative; width: " + t.document.getSize().width + "px; margin: 0 auto; height: 1px;", 
            n += '<div id="absolute-wrapper" style="' + r + '">' + e + "</div>") :n += e), n += o.join("\n")), 
            n;
        }, t.prototype.getImages = function(t) {
            var e, i, n, o, r;
            if (null == t && (t = {}), !this._cssImages) {
                for (this._cssImages = this.object ? this.object.getImages() :[], this._cssImages = function() {
                    var e, n, o, r;
                    for (o = this._cssImages, r = [], e = 0, n = o.length; n > e; e++) i = o[e], r.push(new Draw.Export.Image(i, this.root, t));
                    return r;
                }.call(this), r = this.children, n = 0, o = r.length; o > n; n++) e = r[n], this._cssImages = this._cssImages.concat(e.getImages(t));
                this._cssImages = this._filterUniqueImages(this._cssImages);
            }
            return this._cssImages;
        }, t.prototype.isSnapped = function() {
            return this.object && this.object.get("snapped");
        }, t.prototype.hasSnapped = function() {
            var t, e, i, n;
            for (n = this.children, e = 0, i = n.length; i > e; e++) if (t = n[e], t.isSnapped()) return !0;
            return !1;
        }, t.prototype.isAbove = function(t) {
            return this.object.isAbove(t.object);
        }, t.prototype.addChild = function(t, e) {
            return t.parent = this, this.children.push(t), e ? e ? this.sortChildren() :void 0 :this._resetSiblingState();
        }, t.prototype.sortChildren = function() {
            return this.children.sort(function(t, e) {
                var i, n;
                return t.object.getPosition && e.object.getPosition ? (i = t.object.getBounds(), 
                n = e.object.getBounds(), t.object.get("snapped") && e.object.get("snapped") || i.intersects(n) ? t.isAbove(e) ? 1 :-1 :t.object.getPosition().y - e.object.getPosition().y) :0;
            }), this._resetSiblingState();
        }, t.prototype._resetSiblingState = function() {
            var t, e, i, n, o, r;
            for (r = [], t = n = 0, o = this.children.length; o >= 0 ? o > n :n > o; t = o >= 0 ? ++n :--n) i = this.children[t], 
            i.previous = null, e = t - 1, e > -1 ? (this.children[e].next = i, r.push(i.previous = this.children[e])) :r.push(void 0);
            return r;
        }, t.prototype._filterUniqueImages = function(t) {
            var e, i, n, o, r, s;
            for (i = {}, o = [], r = 0, s = t.length; s > r; r++) n = t[r], e = n.getEid(), 
            e && e in i || o.push(n), i[e] = !0;
            return o;
        }, t;
    }(), Draw.Export.NoopObject = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        return i(n, e), n.prototype.toHtmlString = function(t) {
            var e;
            return null == t && (t = {}), function() {
                var i, n, o, r;
                for (o = this.children, r = [], i = 0, n = o.length; n > i; i++) e = o[i], r.push(e.toHtmlString(t));
                return r;
            }.call(this).join("\n");
        }, n;
    }(Draw.Export.Object);
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    }, n = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.Export.DomElement = function(e) {
        function o() {
            return t = o.__super__.constructor.apply(this, arguments);
        }
        return i(o, e), o.prototype.CLASSES_TO_REMOVE = [ "container-highlight", "container-empty", "editable-element", "easel-linkable", "cke_focus" ], 
        o.prototype.acceptsChildren = function() {
            return !1;
        }, o.prototype.toHtmlString = function(t) {
            var e, i;
            return this.object && this.object.el ? (this._node = this._fetchNodeFromObject(t), 
            e = this._node.parent().clone().children(), i = e.parent(), this._scrub(e, t), i.html()) :"";
        }, o.prototype._scrub = function(t, e) {
            var i, n, o, r, s, a, l, c;
            for (e = _.extend({}, e, {
                root:!0
            }), e.imageMap = {}, e.images = this.getImages(e), c = e.images, r = 0, a = c.length; a > r; r++) n = c[r], 
            i = n.getEid(), i && (e.imageMap[i] = n);
            for (s = 0, l = t.length; l > s; s++) o = t[s], o = $(o), this._scrubNodeStyle(o, e), 
            this._scrubHtml(o, e);
            return null;
        }, o.prototype._scrubNodeStyle = function(t, e) {
            var i, n, o, r, s;
            if (null == e && (e = {}), t && t.length) {
                for (e = _.clone(e), n = Import.CSS.cssToDict(t.attr("style")), n = this._scrubCss(n, t, e), 
                t.attr("style", this._replaceRgbWithHex(Draw.Export.CSS.stringifyCss(n, !0))), e.root = !1, 
                s = t.children(), o = 0, r = s.length; r > o; o++) i = s[o], this._scrubNodeStyle($(i), e);
                return null;
            }
        }, o.prototype._scrubCss = function(t, e, i) {
            return null == i && (i = {}), t = this._replaceImages(t, i), i.root && (t = this._modifyPositionCss(t, i)), 
            t;
        }, o.prototype._scrubHtml = function(t, e) {
            var i, n, o, r, s, a, l, c, h;
            for (null == e && (e = {}), this._setLinkAttribute(t, t.attr("data-link"), e), e = _.clone(e), 
            l = this.CLASSES_TO_REMOVE, o = 0, s = l.length; s > o; o++) n = l[o], t.removeClass(n);
            for (t[0].className && t[0].className.trim() || t.removeAttr("class"), this._replaceSrcForImageNode(t, e), 
            e.root = !1, c = t.children(), h = [], r = 0, a = c.length; a > r; r++) i = c[r], 
            h.push(this._scrubHtml($(i), e));
            return h;
        }, o.prototype._fetchNodeFromObject = function(t) {
            var e;
            return this._node || (e = $($.parseHTML(this.object.toHtmlString(this.children, "", t))), 
            this._node = $("<div/>").append(e).children()), this._node;
        }, o.prototype._setLinkAttribute = function(t, e, i) {
            var n, o, r, s, a;
            return s = this._getLinkedDocumentName(e, i), t.removeAttr("data-link"), s && i.wrap ? (o = s + ".html", 
            n = t.findAndSelf("a"), n.length ? n.attr("href", o) :(a = $("<a/>", {
                "class":"easel-inserted-link",
                rel:"inserted because no link were available to attach an href to",
                href:o
            }), r = t.html(), r && r.trim() ? (a.html(r), t.html(a)) :(a.insertAfter(t), a.append(t)))) :void 0;
        }, o.prototype._getLinkedDocumentName = function(t, e) {
            var i;
            return t && e && e.documents && (i = e.documents.get(t)) ? e.nameGenerator.generateName(i.get("name"), "document", i.id) :null;
        }, o.prototype._replaceImages = function(t, e) {
            var i;
            return i = function(i) {
                var n, o, r, s, a, l, c;
                if (r = t[i]) {
                    for (l = e.images, c = [], s = 0, a = l.length; a > s; s++) n = l[s], n.getServerUrl() !== n.getUrl() && r.indexOf(n.getServerUrl()) > -1 ? (o = Draw.Export.PathResolver.getPath(n.getUrl(), "images", "css", e), 
                    c.push(t[i] = Util.replaceAll(r, n.getServerUrl(), o))) :c.push(void 0);
                    return c;
                }
            }, i("background"), i("background-image"), t;
        }, o.prototype._replaceSrcForImageNode = function(t, e) {
            var i, n;
            return e.imageMap && t.is("img") && (i = Draw.Export.Image.parseEid(t[0].src), i && e.imageMap[i]) ? (n = e.imageMap[i].getUrl(), 
            n = Draw.Export.PathResolver.getPath(n, "images", "html", e), t[0].src = n) :void 0;
        }, o.prototype._replaceRgbWithHex = function(t) {
            var e, i, n, o, r;
            if (n = t.match(/rgb\([0-9, ]+\)/gi)) for (o = 0, r = n.length; r > o; o++) i = n[o], 
            e = Color.rgbStringToHexString(i), t = Util.replaceAll(t, i, e);
            return t;
        }, o.prototype._modifyPositionCss = function(t, e) {
            var i, n, o, r, s;
            return null == e && (e = {}), this.object && this.object.get("snapped") ? t :(this.parent ? this.next || this.previous || e.wrap ? (r = this.object.getBounds().topLeft, 
            this.parent.object && (r = r.subtract(this.parent.object.getBounds())), t.position = "absolute", 
            t.top = "" + r.y + "px", t.left = "" + r.x + "px") :this.parent.object && (r = this.object.getBounds().topLeft, 
            o = this.parent.object.getBounds().topLeft, n = this.parent.object, s = 0, i = 0, 
            n.get("border_left_width") && n.get("border_left_color") && (s += n.get("border_left_width")), 
            n.get("border_top_width") && n.get("border_top_color") && (i += n.get("border_top_width")), 
            o.set(o.x + s, o.y + i), r = r.subtract(o), t.margin = "" + r.y + "px 0 0 " + r.x + "px", 
            this.children.length && (t.position = "relative")) :this.children.length && (t.position = "relative"), 
            t);
        }, o.prototype._tagWrapsAll = function(t, e, i) {
            var o, r, s, a, l, c;
            if (t = t.find(e), s = t.parent(), r = s.find(e), 1 !== t.length) return !1;
            for (c = s[0].childNodes, a = 0, l = c.length; l > a; a++) if (o = c[a], 3 === o.nodeType) {
                if (o.data.trim()) return !1;
            } else if (i !== !1 && n.call(r, o) < 0) return !1;
            return !0;
        }, o.prototype._unwrap = function(t, e, i) {
            var n, o;
            return this._tagWrapsAll(t, e, i) ? (t = t.find(e), o = t.parent(), n = o.html().replace(t.outerHtml(), t.html()), 
            o.html(n)) :void 0;
        }, o;
    }(Draw.Export.Object);
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.Export.DomBodyText = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        return i(n, e), n.prototype._scrubCss = function(t, e, i) {
            var o;
            return o = n.__super__._scrubCss.call(this, t, e, i), e.is("p") && (this._tagWrapsAll(e, "i, em") && (o["font-style"] = "italic"), 
            this._tagWrapsAll(e, "b, strong") && (o["font-weight"] = "bold")), o;
        }, n.prototype._scrubHtml = function(t) {
            return n.__super__._scrubHtml.call(this, t), t.is("p") ? (this._unwrap(t, "b, strong"), 
            this._unwrap(t, "i, em")) :void 0;
        }, n;
    }(Draw.Export.DomElement);
}.call(this), function() {
    Draw.Export.CSS = {
        GRADIENT_RE:new RegExp(" linear-gradient\\(([0-9]+)deg", "i"),
        PROPERTY_MAP:{
            "text-align":[ "alignment" ],
            "font-style":[ "is_italic" ],
            "text-decoration":[ "is_underlined" ],
            "font-family":[ "font_face" ],
            width:[ "size" ],
            height:[ "size" ],
            border:[ "stroke_width", "stroke_color" ],
            color:[ "text_color" ],
            "background-image":[ "fill_color" ],
            background:[ "fill_color" ],
            "text-shadow":[ "text_shadow" ],
            "box-shadow":[ "box_shadow" ],
            margin:[ "margin_top", "margin_right", "margin_bottom", "margin_left" ],
            padding:[ "padding_top", "padding_right", "padding_bottom", "padding_left" ],
            "border-radius":[ "border_top_left_radius", "border_top_right_radius", "border_bottom_right_radius", "border_bottom_left_radius" ],
            "border-top":[ "border_top_width", "border_top_color", "border_top_style" ],
            "border-bottom":[ "border_bottom_width", "border_bottom_color", "border_bottom_style" ],
            "border-left":[ "border_left_width", "border_left_color", "border_left_style" ],
            "border-right":[ "border_right_width", "border_right_color", "border_right_style" ],
            border:[ "border_top_width", "border_top_color", "border_top_style", "border_bottom_width", "border_bottom_color", "border_bottom_style", "border_left_width", "border_left_color", "border_left_style", "border_right_width", "border_right_color", "border_right_style" ]
        },
        PREFIX_RE:new RegExp("^(_webkit|_moz)", "i"),
        propertyNameFromCssProperty:function(t) {
            var e, i, n, o, r;
            for (i = Draw.Export.CSS.PROPERTY_MAP[t] || [ t.replace(/-/g, "_") ], r = [], n = 0, 
            o = i.length; o > n; n++) e = i[n], this.PREFIX_RE.test(e) || r.push(e);
            return r;
        },
        propertyNamesFromCssProperty:function(t) {
            var e, i, n, o;
            for (i = [], n = 0, o = t.length; o > n; n++) e = t[n], i = i.concat(Draw.Export.CSS.propertyNameFromCssProperty(e));
            return i;
        },
        propertyNameToCssProperty:function(t) {
            return t.replace(new RegExp("_", "g"), "-");
        },
        dump:function(t) {
            return Draw.Export.CSS._dump(t, []);
        },
        toCssString:function(t) {
            return t ? t.toCss ? Draw.Export.CSS.stringifyCss(t.toCss()) :t.toCssString() :"";
        },
        stringifyProperty:function(t, e, i, n) {
            var o, r;
            return e ? (e = e || [ "" ], r = function() {
                var n, r, s;
                for (s = [], n = 0, r = e.length; r > n; n++) o = e[n], s.push("" + o + t + ": " + i);
                return s;
            }()) :(n = n || [ "" ], r = function() {
                var e, r, s;
                for (s = [], e = 0, r = n.length; r > e; e++) o = n[e], s.push("" + t + ": " + o + i);
                return s;
            }()), r.join(";");
        },
        stringifyBackgroundImage:function(t) {
            var e, i, n, o;
            return o = null, t.indexOf("gradient") > -1 && (t = this._normalizeGradientSyntax(t), 
            o = [ "-moz-", "-webkit-", "-o-", "" ]), i = this.stringifyProperty("background-image", null, t, o), 
            e = this.GRADIENT_RE.exec(i), e && (n = this._convertGradientRotation(e[1]), i = i.replace(" linear-gradient(" + e[1] + "deg", " linear-gradient(" + n + "deg")), 
            i;
        },
        getVendorPrefix:function() {
            var t, e, i;
            if (!$.__vendorPrefix) {
                $.__vendorPrefix = "", e = /^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/, i = document.getElementsByTagName("script")[0];
                for (t in i.style) if (e.test(t)) {
                    $.__vendorPrefix = t.match(e)[0].toLowerCase();
                    break;
                }
                "WebkitOpacity" in i.style ? $.__vendorPrefix = "webkit" :"KhtmlOpacity" in i.style && ($.__vendorPrefix = "khtml");
            }
            return $.__vendorPrefix;
        },
        normalizeBackgroundImageForBrowser:function(t) {
            var e;
            return t.indexOf("gradient") > -1 && (t = this._normalizeGradientSyntax(t), e = "-" + this.getVendorPrefix() + "-", 
            t = t.replace("linear-gradient", e + "linear-gradient")), t;
        },
        normalizeForBrowser:function(t) {
            return null != t["box-shadow"] && (t["-moz-box-shadow"] = t["-webkit-box-shadow"] = t["box-shadow"]), 
            t["background-image"] && (t["background-image"] = Draw.Export.CSS.normalizeBackgroundImageForBrowser(t["background-image"])), 
            t;
        },
        stringifyBoxShadow:function(t) {
            return this.stringifyProperty("box-shadow", [ "-moz-", "-webkit-", "-o-", "" ], t, null);
        },
        stringifyCss:function(t, e) {
            var i, n, o, r;
            n = [], delete t.bright, delete t.foreground;
            for (i in t) r = t[i], o = null, e || "box-shadow" !== i ? !e && "background-image" === i && r.indexOf("gradient") > -1 ? o = this.stringifyBackgroundImage(r) :t.hasOwnProperty(i) && (o = this.stringifyProperty(i, null, r, null)) :o = this.stringifyBoxShadow(r), 
            o && n.push(o);
            return n.length ? n.join("; ") + ";" :"";
        },
        propertyToCss:function(t, e) {
            var i;
            return i = _.camelize(t + "_to_css"), i = Draw.Export.CSS[i], i ? i.call(Draw.Export.CSS, e) :{};
        },
        propertiesToCss:function(t) {
            var e, i, n;
            i = {};
            for (e in t) n = t[e], _.extend(i, this.propertyToCss(e, t));
            return i;
        },
        fillColorToCss:function(t) {
            var e, i, n, o, r;
            return e = t.fill_color, e instanceof paper.GradientColor || (e = Color.normalize(t.fill_color)), 
            i = {}, e && e.toCss ? i = e.toCss() :i.background = e ? e.toCssString() :"transparent", 
            n = t.background_image, r = t.background_repeat, o = t.background_position, i["background-image"] && n ? (i["background-image"] += ", url(" + n + ")", 
            r && (i["background-repeat"] = r), o && (i["background-position"] = o), t.background_size && (i["background-size"] = t.background_size)) :i.background && n && (i.background = "" + i.background + " url(" + n + ")", 
            r && (i.background += " " + r), o && (i.background += " " + o), t.background_size && (i["background-size"] = t.background_size)), 
            i;
        },
        backgroundImageToCss:function(t) {
            return this.fillColorToCss(t);
        },
        backgroundRepeatToCss:function(t) {
            return this.fillColorToCss(t);
        },
        backgroundPositionToCss:function(t) {
            return this.fillColorToCss(t);
        },
        backgroundSizeToCss:function(t) {
            return this.fillColorToCss(t);
        },
        textColorToCss:function(t) {
            var e, i;
            return i = {}, e = t.text_color, e && (e = Color.solid(e).toCssString(), i = {
                color:e
            }), i;
        },
        sizeToCss:function(t) {
            var e, i, n, o;
            return i = t.size, e = function(e) {
                var i;
                return i = 0, t["border_" + e + "_color"] && (i = t["border_" + e + "_width"]), 
                i || 0;
            }, n = e("left") + e("right"), o = e("top") + e("bottom"), {
                width:i.width - n + "px",
                height:i.height - o + "px"
            };
        },
        roundnessToCss:function(t) {
            return {
                "border-radius":t.roundness + "px"
            };
        },
        opacityToCss:function(t) {
            return {
                opacity:t.opacity
            };
        },
        textShadowToCss:function(t) {
            return {
                "text-shadow":t.text_shadow
            };
        },
        boxShadowToCss:function(t) {
            return {
                "box-shadow":t.box_shadow
            };
        },
        fontFaceToCss:function(t) {
            return {
                "font-family":'"' + t.font_face + '"'
            };
        },
        fontSizeToCss:function(t) {
            return {
                "font-size":t.font_size
            };
        },
        fontWeightToCss:function(t) {
            return {
                "font-weight":t.font_weight
            };
        },
        isItalicToCss:function(t) {
            return t.is_italic ? {
                "font-style":"italic"
            } :{
                "font-style":"normal"
            };
        },
        isUnderlinedToCss:function(t) {
            return t.is_underlined ? {
                "text-decoration":"underline"
            } :{
                "text-decoration":"none"
            };
        },
        alignmentToCss:function(t) {
            return {
                "text-align":t.alignment
            };
        },
        lineHeightToCss:function(t) {
            return {
                "line-height":t.line_height
            };
        },
        marginLeftToCss:function(t) {
            return this._quadToCss("margin", "margin_left", t);
        },
        marginTopToCss:function(t) {
            return this._quadToCss("margin", "margin_top", t);
        },
        marginBottomToCss:function(t) {
            return this._quadToCss("margin", "margin_bottom", t);
        },
        marginRightToCss:function(t) {
            return this._quadToCss("margin", "margin_right", t);
        },
        paddingLeftToCss:function(t) {
            return this._quadToCss("padding", "padding_left", t);
        },
        paddingTopToCss:function(t) {
            return this._quadToCss("padding", "padding_top", t);
        },
        paddingBottomToCss:function(t) {
            return this._quadToCss("padding", "padding_bottom", t);
        },
        paddingRightToCss:function(t) {
            return this._quadToCss("padding", "padding_right", t);
        },
        borderTopLeftRadiusToCss:function(t) {
            return this._quadToCss("border-radius", "border_top_left_radius", t);
        },
        borderTopRightRadiusToCss:function(t) {
            return this._quadToCss("border-radius", "border_top_right_radius", t);
        },
        borderBottomLeftRadiusToCss:function(t) {
            return this._quadToCss("border-radius", "border_bottom_left_radius", t);
        },
        borderBottomRightRadiusToCss:function(t) {
            return this._quadToCss("border-radius", "border_bottom_right_radius", t);
        },
        borderTopWidthToCss:function(t) {
            return this._borderToCss("top", t, !0);
        },
        borderTopStyleToCss:function(t) {
            return this._borderToCss("top", t, !0);
        },
        borderTopColorToCss:function(t) {
            return this._borderToCss("top", t, !0);
        },
        borderLeftWidthToCss:function(t) {
            return this._borderToCss("left", t, !0);
        },
        borderLeftStyleToCss:function(t) {
            return this._borderToCss("left", t, !0);
        },
        borderLeftColorToCss:function(t) {
            return this._borderToCss("left", t, !0);
        },
        borderBottomWidthToCss:function(t) {
            return this._borderToCss("bottom", t, !0);
        },
        borderBottomStyleToCss:function(t) {
            return this._borderToCss("bottom", t, !0);
        },
        borderBottomColorToCss:function(t) {
            return this._borderToCss("bottom", t, !0);
        },
        borderRightWidthToCss:function(t) {
            return this._borderToCss("right", t, !0);
        },
        borderRightStyleToCss:function(t) {
            return this._borderToCss("right", t, !0);
        },
        borderRightColorToCss:function(t) {
            return this._borderToCss("right", t, !0);
        },
        _ALL_BORDERS:[ "top", "left", "right", "bottom" ],
        _borderToCss:function(t, e, i) {
            var n, o, r, s, a, l, c, h, u, d, p, f;
            if (d = e["border_" + t + "_width"], u = e["border_" + t + "_style"] || "solid", 
            n = e["border_" + t + "_color"], h = {}, n && (n = Color.normalize(n), n.stops && (n = n.stops[0].color)), 
            r = "border-" + t, o = d && u && n && "none" !== u ? "" + d + "px " + u + " " + n.toCssString() :"none", 
            i) {
                for (l = _.without(this._ALL_BORDERS, t), l = function() {
                    var t, i, n;
                    for (n = [], t = 0, i = l.length; i > t; t++) c = l[t], n.push(this._borderToCss(c, e, !1)["border-" + c]);
                    return n;
                }.call(this), s = "border", p = 0, f = l.length; f > p; p++) a = l[p], a !== o && (s = r);
                r = s;
            }
            return h[r] = o, h;
        },
        _quadToCss:function(t, e, i) {
            var n, o, r, s, a, l, c, h, u;
            return l = Draw.Export.CSS, r = l.propertyNameToCssProperty(e), o = {}, u = function() {
                var e, n, o, r;
                for (o = l.PROPERTY_MAP[t], r = [], e = 0, n = o.length; n > e; e++) c = o[e], r.push(i[c]);
                return r;
            }(), h = u[0], a = u[1], n = u[2], s = u[3], h && a && n && s ? o[t] = h === a && a === n && n === s ? h :"" + h + " " + a + " " + n + " " + s :o[r] = i[e], 
            o;
        },
        _getShadow:function(t, e) {
            var i, n, o, r, s;
            return o = t.replace("-", "_"), s = o in e ? e[o] :e.effects, n = {}, s && (i = s, 
            _.isArray(s) && (i = new Draw.EffectCollection(function() {
                var t, e, i;
                for (i = [], t = 0, e = s.length; e > t; t++) r = s[t], i.push(r.clone());
                return i;
            }())), n = i.toCss()), t in n || (n[t] = "none"), n = _.extract(n, [ t ]);
        },
        _convertGradientRotation:function(t) {
            var e;
            return e = 90 - parseInt(t), 0 > e && e > -360 && (e = 360 + e), e;
        },
        _normalizeGradientSyntax:function(t) {
            var e, i;
            return /-moz-|-webkit-|-o-/gi.test(t) ? t.replace(/-moz-|-webkit-|o-/gi, "") :(i = new RegExp("([0-9]+)deg", "gi").exec(t), 
            i && (e = this._convertGradientRotation(i[1]), t = t.replace("" + i[1] + "deg", "" + e + "deg")), 
            t);
        },
        _dump:function(t, e) {
            var i, n, o, r, s, a, l, c, h, u, d;
            if (r = t.keys(e), s = e[e.length - 1], l = [], n = function(t) {
                return t.replace(/;/gi, ";\n  ");
            }, r) {
                for (s && l.push("" + s + " {"), u = 0, d = r.length; d > u; u++) o = r[u], l.push(this._dump(t, e.concat(o)));
                s && l.push("}");
            } else s && (h = t.get(e), "box-shadow" === s ? (a = e.slice(0, e.length - 1).concat([ "-webkit-box-shadow" ]), 
            t.get(a) ? l.push("  " + s + ": " + t.get(e) + ";") :(c = n(this.stringifyBoxShadow(h)), 
            l.push("  " + c + ";"))) :"background-image" === s && h.indexOf("gradient") > -1 ? (i = n(this.stringifyBackgroundImage(h)), 
            l.push("  " + i + ";")) :l.push("  " + s + ": " + t.get(e) + ";"));
            return l.join("\n");
        }
    };
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    Draw.Export.Document = function() {
        function e(e, i, n) {
            this.easelDocument = e, this.easelProject = i, this.options = null != n ? n :{}, 
            this._generateDocument = t(this._generateDocument, this), this.options.nameGenerator || (this.options.nameGenerator = new Draw.Export.NameGenerator()), 
            this.nameGenerator = this.options.nameGenerator;
        }
        return e.prototype.REMOTE_FILES = {
            css:[ "bootstrap.css", "bootstrap-responsive.css", "fontawesome.css", "common.css" ],
            fonts:[ "fontawesome-webfont.eot", "fontawesome-webfont.svg", "fontawesome-webfont.ttf", "fontawesome-webfont.woff" ]
        }, e.prototype["export"] = function(t, e) {
            var i = this;
            return this._generateDocument(this.easelDocument, function(n) {
                return i.exportedData = n, i.generateZipForm(t), e(i);
            }, this.options);
        }, e.prototype.exportRaw = function(t) {
            var e = this;
            return this._generateDocument(this.easelDocument, function(i, n) {
                return e.exportedData = i, t(i, n);
            }, this.options);
        }, e.prototype.generateZipForm = function(t) {
            var e;
            return e = this._generatePackageData(), this._generateZipForm(e, t);
        }, e.prototype._generateDocument = function(t, e, i) {
            var n, o, r, s, a = this;
            return null == i && (i = {}), r = Draw.DocumentFactory.instance(), o = {
                activate:!1,
                realtime:!1
            }, s = {
                initiallyAttachStyleSheets:!0
            }, n = r.getOrCreate(t.id, o, s), n.waitDocumentLoad(function() {
                var o, r, s, l, c, h, u;
                return r = n.document, s = a.easelProject.documents, h = i.objects || [], i.exportAll && !i.objects && (h = r.getProject().findAll(!1)), 
                c = a.nameGenerator.generateName(t.get("name"), "document", t.id), l = _.extend({
                    wrap:i.exportAll,
                    processor:i.processor,
                    projectCss:i.exportAll,
                    document:r,
                    documents:s,
                    styleCssName:c,
                    nameGenerator:a.nameGenerator
                }, a.options), u = new Draw.Export.Tree(h, l), o = u["export"](), o.id = t.id, o.document = t, 
                o.name = c, e(o, u);
            }), null;
        }, e.prototype._generateZipForm = function(t, e) {
            var i, n;
            return i = _.extend({}, this.options, {
                easelProject:this.easelProject
            }), n = new Draw.Export.FormZip(i), n.setData(t), n.applyToForm(e), n;
        }, e.prototype._generatePackageData = function() {
            var t, e, i, n, o, r, s, a, l, c, h;
            for (e = {
                html:[],
                css:[],
                images:[],
                fonts:[]
            }, this.options.projectDocument && (a = this.options.projectDocument.getStyleSheet(0), 
            s = a.getCssText(), t = new Draw.Export.File("project.css", s), e.css.push(t)), 
            i = new Draw.Export.File("index.html", this.exportedData.html), e.html.push(i), 
            t = new Draw.Export.File("" + this.exportedData.name + ".css", this.exportedData.css), 
            e.css.push(t), h = this.exportedData.images, l = 0, c = h.length; c > l; l++) n = h[l], 
            o = n.getData(), o.eid && (r = new Draw.Export.File(o.name, o.eid, {
                remote:!0
            }), e.images.push(r));
            return this.options.exportAll && this._addCommonAssetsToZipData(e), e;
        }, e.prototype._addCommonAssetsToZipData = function(t) {
            var e, i, n, o, r;
            o = this.REMOTE_FILES, r = [];
            for (n in o) i = o[n], r.push(function() {
                var o, r, s;
                for (s = [], o = 0, r = i.length; r > o; o++) e = i[o], s.push(t[n].push(new Draw.Export.File(e, e, {
                    remote:!0
                })));
                return s;
            }());
            return r;
        }, e;
    }();
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.Export.DomHeading = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        return i(n, e), n.prototype._scrubCss = function(t, e, i) {
            var o, r, s, a, l, c, h;
            if (l = n.__super__._scrubCss.call(this, t, e, i), i.root) {
                for (o = this._tagWrapsAll(e, ">b, >i>b, >strong, >em>strong", !1), a = this._tagWrapsAll(e, ">i, >b>i, >em, >strong>em", !1), 
                r = e.find("div"), c = 0, h = r.length; h > c; c++) s = r[c], s = $(s), this._tagWrapsAll(s, "i, em", !1) || (a = !1), 
                this._tagWrapsAll(s, "b, strong", !1) || (o = !1);
                a && (l["font-style"] = "italic"), o && (l["font-weight"] = "bold");
            }
            return l;
        }, n.prototype._scrubHtml = function(t) {
            return n.__super__._scrubHtml.call(this, t), t.is("h1, h2, h3, h4") ? (this._unwrap(t, ">b, >strong", !1), 
            this._unwrap(t, ">i, >em", !1)) :t.is("div") ? (this._unwrap(t, "i, em", !1), this._unwrap(t, "b, strong", !1)) :void 0;
        }, n;
    }(Draw.Export.DomElement);
}.call(this), function() {
    var t = {}.hasOwnProperty, e = function(e, i) {
        function n() {
            this.constructor = e;
        }
        for (var o in i) t.call(i, o) && (e[o] = i[o]);
        return n.prototype = i.prototype, e.prototype = new n(), e.__super__ = i.prototype, 
        e;
    };
    Draw.Export.Image = function(t) {
        function i(t, e, n) {
            this.object = t, this.root = e, this.options = null != n ? n :{}, i.__super__.constructor.call(this, this.object, this.root, this.options);
        }
        return e(i, t), i.parseEid = function(t) {
            var e, i;
            return e = /^(?:https:\/\/www\.easel\.io)?\/images\/([a-f0-9]+)/gi, i = e.exec(t), 
            i ? i[1] :null;
        }, i.prototype.acceptsChildren = function() {
            return !0;
        }, i.prototype.isBase64 = function() {
            var t;
            return t = this.getServerUrl(), t ? t.indexOf("base64,") > -1 :!1;
        }, i.prototype.suggestName = function(t) {
            this._nameSuggestion = t;
        }, i.prototype.getImages = function(t) {
            var e, i, n, o;
            if (!this._cssImages) {
                for (t && t.NameGenerator && (this.options.nameGenerator = t.nameGenerator), this._cssImages = [ this ], 
                o = this.children, i = 0, n = o.length; n > i; i++) e = o[i], this._cssImages = this._cssImages.concat(e.getImages(t));
                this._cssImages = this._filterUniqueImages(this._cssImages);
            }
            return this._cssImages;
        }, i.prototype.getGeneratedName = function() {
            if (this.object && !this._name) {
                if (!this.options.nameGenerator) throw new Error("Must use setNameGenerator to generate a name on a Draw.Export.Image");
                this._name = this.options.nameGenerator.generateName(this._nameSuggestion || this.object, "image", this.getEid());
            }
            return this._name;
        }, i.prototype.getServerUrl = function() {
            return this.object && this.object.get ? this.object.get("url") :this.object;
        }, i.prototype.getUrl = function() {
            var t;
            return t = this.getServerUrl(), this.getEid() || this.isBase64() ? "" + this.getGeneratedName() + "." + (Util.getExtension(t) || "png") :t;
        }, i.prototype.getEid = function() {
            return Draw.Export.Image.parseEid(this.getServerUrl());
        }, i.prototype.getData = function() {
            return {
                eid:this.getEid(),
                name:this.getUrl(),
                url:this.getServerUrl(),
                cssClass:this.getGeneratedName()
            };
        }, i.prototype.onLoad = function(t) {
            var e, i = this;
            return this._loaded ? t.call(this, this._image) :(this._img = new window.Image(), 
            e = function(e) {
                return i._loaded = !0, i._img.onerror = null, i._img.onload = null, t.call(i, i, i._img, e);
            }, this._img.onerror = _.bind(e, this, !0), this._img.onload = _.bind(e, this, !1), 
            this._img.src = this.getServerUrl(), this._img.complete ? e(!1) :void 0);
        }, i.prototype.toHtmlString = function(t) {
            var e;
            return this.object ? this.object.el ? (e = this._fetchNodeFromObject(t).parent(), 
            this.children.length ? (e = this._createImageMarkup(e, t), this._scrub(e.children(), t), 
            e.html()) :i.__super__.toHtmlString.call(this, t)) :this._createImageMarkup($("<div/>"), t).html() :"";
        }, i.prototype._scrubCss = function(t, e, n) {
            var o;
            return t = i.__super__._scrubCss.call(this, t, e, n), this.children.length && n.root && (o = this.getUrl(), 
            o && (o = Draw.Export.PathResolver.getPath(o, "images", "css", n), t.background = "transparent url(" + o + ") top left no-repeat", 
            t["background-size"] = "100% 100%")), t;
        }, i.prototype._scrubHtml = function(t, e) {
            var n;
            return null == e && (e = {}), i.__super__._scrubHtml.call(this, t, e), t[0].src && e.root ? (n = Draw.Export.PathResolver.getPath(this.getUrl(), "images", "html", e), 
            t[0].src = n) :void 0;
        }, i.prototype._createImageMarkup = function(t, e) {
            var i, n, o, r, s, a, l, c, h, u, d;
            return s = o = a = h = "", this.object.get ? (l = t.find("img"), o = l[0].className.trim(), 
            a = l[0].id, a && (a = ' id="' + a + '"'), u = l.attr("style"), s = "", this.object && this.object.get && (c = this._getLinkedDocumentName(this.object.get("href"), e), 
            c && (s = ' data-link="' + c + '"'))) :(r = this.getData(), o = r.cssClass, h = r.name, 
            this.object.getSize && (d = this.object.getSize()), u = "", d && (u = "width: " + d.width + "px; height: " + d.height + "px;")), 
            this.children.length ? (n = function() {
                var t, n, o, r;
                for (o = this.children, r = [], t = 0, n = o.length; n > t; t++) i = o[t], r.push(i.toHtmlString(e));
                return r;
            }.call(this).join("\n"), t.html("<div" + a + ' class="' + o + '"' + s + ' style="' + u + '">' + n + "</div>")) :t.html("<img" + a + ' src="' + h + '" class="' + o + '"' + s + ' style="' + u + '"/>'), 
            t;
        }, i;
    }(Draw.Export.DomElement);
}.call(this), function() {
    Draw.Export.NameGenerator = function() {
        function t() {
            this._nameCounters = {}, this._nameCache = {};
        }
        return t.prototype.GENERATORS = {
            image:"_generateImageName"
        }, t.prototype.generateName = function(t, e, i) {
            var n;
            return n = "_generateName", this.GENERATORS[e] && (n = this.GENERATORS[e]), this[n](t, e, i);
        }, t.prototype._generateName = function(t, e, i) {
            var n;
            return n = this._checkCache(e, i), n && i ? n :(t = _.dasherize(t), t = this._uniqueName(t, e, i), 
            this._cacheName(t, e, i));
        }, t.prototype._generateImageName = function(t, e, i) {
            var n, o, r, s;
            return o = this._checkCache(e, i), o && i ? o :(r = t, t.get && (r = t.get("name")), 
            r = r || "image", r.indexOf("data:") > -1 && (r = "image"), r = r.toLowerCase(), 
            s = _.lastIndexOf(r, "/") + 1, n = _.lastIndexOf(r, "."), 0 > n && (n = r.length), 
            r = r.slice(s, n), this._generateName(r, e, i));
        }, t.prototype._uniqueName = function(t, e) {
            var i, n, o;
            return this._nameCounters[e] || (this._nameCounters[e] = {}), n = this._nameCounters[e], 
            o = t, i = n[o] || 0, i && (t = t + "-" + i), n[o] = i + 1, t;
        }, t.prototype._checkCache = function(t, e) {
            return this._nameCache[t] && this._nameCache[t][e] ? this._nameCache[t][e] :null;
        }, t.prototype._cacheName = function(t, e, i) {
            return this._nameCache[e] || (this._nameCache[e] = {}), this._nameCache[e][i] = t, 
            t;
        }, t;
    }();
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.Export.NestedDomElement = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        return i(n, e), n.prototype.acceptsChildren = function() {
            return !0;
        }, n.prototype._scrub = function(t, e) {
            var i, o;
            return n.__super__._scrub.call(this, t, e), o = function() {
                var t, n, o, r;
                for (o = this.children, r = [], t = 0, n = o.length; n > t; t++) i = o[t], r.push(i.toHtmlString(e));
                return r;
            }.call(this).join("\n"), o.length ? t.append(o) :void 0;
        }, n;
    }(Draw.Export.DomElement);
}.call(this), function() {
    Draw.Export.PathResolver = function() {
        function t() {}
        return t.getPath = function(t, e, i, n) {
            var o, r, s, a, l;
            if (t.indexOf("/") > -1) return t;
            if (a = this._getPathFromKey(e, n), a && (t = "" + a + "/" + t), r = null, i && (r = this._getPathFromKey(i, n)), 
            r) for (o = r.split("/").length, s = l = 0; o >= 0 ? o > l :l > o; s = o >= 0 ? ++l :--l) t = "../" + t;
            return t;
        }, t._getPathFromKey = function(t, e) {
            return e[t + "Path"];
        }, t;
    }();
}.call(this), function() {
    Draw.Export.Processor = {};
}.call(this), function() {
    Draw.Export.Processor.Base = function() {
        function t() {}
        return t.prototype.process = function() {}, t.prototype._beautify = function(t) {
            var e;
            return null == t && (t = {}), e = {
                indent_size:2,
                indent_char:" "
            }, t.css ? css_beautify(t.css, e) :t.html ? style_html(t.html, e) :null;
        }, t;
    }();
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.Export.Processor.FullPage = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        return i(n, e), n.prototype.process = function(t, e) {
            return {
                css:this._beautify({
                    css:this._toCssString(t, e)
                }) || "",
                html:this._beautify({
                    html:this._toHtmlString(t, e)
                }) || "",
                images:this._getImages(t, e)
            };
        }, n.prototype._toCssString = function(t, e) {
            var i, n, o, r, s, a;
            return s = t.stylesheet.getCssText(), n = this._scrubDocumentCss(e.document.toCss(), e), 
            o = {}, i = {
                "padding-left":0,
                "padding-right":0
            }, (1 !== _.size(n) || "#ffffff" !== n["background-color"]) && (o = n, i.background = "transparent"), 
            a = "", t.tree.hasSnapped() || (a = "#page-wrapper{\n  position: relative;\n  width: " + e.document.getSize().width + "px;\n  /* centers the document */\n  margin: 0 auto;\n  /*\n  hides anything drawn off canvas.\n  remove overflow and height to see things drawn off canvas.\n  */\n  overflow: hidden;\n  height: " + e.document.getSize().height + "px;\n}"), 
            r = "", s.indexOf("position: absolute") > -1 && (r += "  /* This makes absolutely positioned elements like p, h1,\n     and some bootstrap elements placed properly. */\n#absolute-wrapper p, #absolute-wrapper h1, #absolute-wrapper h2, #absolute-wrapper h3, #absolute-wrapper h4, #absolute-wrapper h5, #absolute-wrapper h6 { margin-top: 0 !important; }"), 
            s.indexOf("dom-heading") > -1 && (r += '/* Set floating dom-heading margins to 0 */\n[class*="dom-heading"] {margin: 0;}'), 
            s.indexOf("dom-paragraph") > -1 && (r += '/* Set floating body text margins to 0 */\n[class*="dom-paragraph"] p {margin: 0 0 10px 0;}'), 
            o = _.size(o) ? "html{" + Draw.Export.CSS.stringifyCss(o) + "}" :"", i = _.size(i) ? "body{" + Draw.Export.CSS.stringifyCss(i) + "}" :"", 
            s = "" + o + " " + i + " " + a + " " + r + " " + s;
        }, n.prototype._toHtmlString = function(t, e) {
            var i, n, o, r, s, a, l, c, h, u;
            return l = t.rootNode.html(), i = '<link href="' + this._getCssPath("bootstrap.css", e) + '" media="screen" rel="stylesheet" type="text/css" />\n<link href="' + this._getCssPath("bootstrap-responsive.css", e) + '" media="screen" rel="stylesheet" type="text/css" />\n<link href="' + this._getCssPath("common.css", e) + '" media="screen" rel="stylesheet" type="text/css" />\n<link href="' + this._getCssPath("fontawesome.css", e) + '" media="screen" rel="stylesheet" type="text/css" />', 
            e.projectCss && (i += '<link href="' + this._getCssPath("project.css", e) + '" media="screen" rel="stylesheet" type="text/css" />'), 
            i += '<link href="' + this._getCssPath((e.styleCssName || "style") + ".css", e) + '" media="screen" rel="stylesheet" type="text/css" />', 
            c = "", s = paper.project.filterItems(function(t) {
                return t instanceof Draw.BootstrapNavBar;
            }), s && s[0] && (c = s[0].getDocumentStyleString()), l.indexOf("easel-inserted-link") > -1 && (c += "/*\n  This is for links easel inserts on document links when no link is available\n  to attach an href to.\n*/\na.easel-inserted-link{\n  color: inherit;\n  text-decoration: inherit;\n  border: inherit;\n}"), 
            c && (i = "<style>\n/* No content under the fixed bootstrap header. */\n" + c + "\n</style>\n" + i), 
            t.tree.hasSnapped() || (l = '<div id="page-wrapper">' + l + "</div>"), r = e.document.fontLoader, 
            u = this.TYPEKIT_NO_ID, o = r ? r.getGoogle().join("|") :"", a = e.document.get("easel_project"), 
            a && (h = a.get("typekit_id"), n = a.get("google_fonts"), h && (u = _.template(this.TYPEKIT_HAS_ID, {
                typekit:h
            })), o = _.any(n) ? n.join("|") :o), l = _.template(this.HTML_PAGE_TEMPLATE, {
                title:e.document.getName(),
                body:l,
                css:i,
                google:o,
                typekit:u
            });
        }, n.prototype._getImages = function(t, e) {
            var i, n;
            return i = this._getBackgroundImage(e), n = _.clone(t.tree.getImages()), i && (n = [ i ].concat(n)), 
            n;
        }, n.prototype._scrubDocumentCss = function(t, e) {
            var i, n, o, r, s;
            if (i = this._getBackgroundImage(e)) {
                o = i.getServerUrl();
                for (n in t) s = t[n], s.indexOf(o) > -1 && (r = Draw.Export.PathResolver.getPath(i.getUrl(), "images", "css", e), 
                t[n] = s.replace(o, r));
            }
            return t;
        }, n.prototype._getCssPath = function(t, e) {
            return Draw.Export.PathResolver.getPath(t, "css", "html", e);
        }, n.prototype._getBackgroundImage = function(t) {
            var e, i;
            return this._bgimage || (e = t.document.get("background_image"), this._bgimage = null, 
            e && t.document.get("toggle:background_image") && (i = t.document.get("name") || "", 
            this._bgimage = new Draw.Export.Image(e, t.root, t), this._bgimage.suggestName("" + i + " background"))), 
            this._bgimage;
        }, n.prototype.TYPEKIT_HAS_ID = '<script type="text/javascript" src="//use.typekit.net/{{typekit}}.js"></script>\n<script type="text/javascript">try{Typekit.load();}catch(e){}</script>', 
        n.prototype.TYPEKIT_NO_ID = '<!--\n  Typekit fonts require an account and a kit containing the fonts used.\n  see https://typekit.com/plans for details.\n\n  <script type="text/javascript" src="//use.typekit.net/YOUR_KIT_ID.js"></script>\n  <script type="text/javascript">try{Typekit.load();}catch(e){}</script>\n-->', 
        n.prototype.HTML_PAGE_TEMPLATE = '<!DOCTYPE HTML>\n<html lang="en">\n  <head>\n    <meta charset="utf-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">\n    <link href="https://fonts.googleapis.com/css?family={{google}}" media="screen" rel="stylesheet" type="text/css" />\n    {{css}}\n    {{typekit}}\n    <title>{{title}}</title>\n  </head>\n  <body>\n    {{body}}\n  </body>\n</html>', 
        n;
    }(Draw.Export.Processor.Base);
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.Export.Processor.Identity = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        return i(n, e), n.prototype.process = function(t) {
            return {
                css:this._beautify({
                    css:t.stylesheet.getCssText()
                }) || "",
                html:this._beautify({
                    html:t.rootNode.html()
                }) || "",
                images:t.tree.getImages()
            };
        }, n;
    }(Draw.Export.Processor.Base);
}.call(this), function() {
    Draw.Export.Project = function() {
        function t(t, e, i) {
            this.project = t, this.projectDocument = e, this.options = null != i ? i :{}, this.documents = {};
        }
        return t.prototype.REMOTE_FILES = {
            css:[ "bootstrap.css", "bootstrap-responsive.css", "fontawesome.css", "common.css" ],
            fonts:[ "fontawesome-webfont.eot", "fontawesome-webfont.svg", "fontawesome-webfont.ttf", "fontawesome-webfont.woff" ]
        }, t.prototype["export"] = function(t, e) {
            var i = this;
            return this._generateAll(function() {
                var n;
                return n = i._generatePackageData(), i._generateZipForm(n, t), e(i);
            });
        }, t.prototype._generateAll = function(t) {
            var e, i, n, o, r, s, a, l, c, h = this;
            if (e = {}, n = this.project.documents, this.nameGenerator = new Draw.Export.NameGenerator(), 
            0 === n.length) return t();
            for (l = n.models, o = 0, s = l.length; s > o; o++) i = l[o], e[i.id] = !1;
            for (c = n.models, r = 0, a = c.length; a > r; r++) i = c[r], this._generateDocument(i, function(i) {
                var n, o, r;
                h.documents[i.id] = i, e[i.id] = !0, n = !0;
                for (o in e) r = e[o], r || (n = !1);
                return n ? t() :void 0;
            });
            return null;
        }, t.prototype._generateDocument = function(t, e) {
            var i, n;
            return n = _.extend({}, this.options, {
                projectDocument:this.projectDocument,
                nameGenerator:this.nameGenerator,
                exportAll:!0,
                processor:"FullPage"
            }), i = new Draw.Export.Document(t, this.project, n), i.exportRaw(e);
        }, t.prototype._generateZipForm = function(t, e) {
            var i, n;
            return i = _.extend({}, this.options, {
                easelProject:this.project
            }), n = new Draw.Export.FormZip(i), n.setData(t), n.applyToForm(e), n;
        }, t.prototype._generatePackageData = function() {
            var t, e, i, n, o, r, s, a, l, c, h, u, d, p;
            e = {
                html:[],
                css:[],
                images:[],
                fonts:[]
            }, c = this.projectDocument.getStyleSheet(0), l = c.getCssText(), t = new Draw.Export.File("project.css", l), 
            e.css.push(t), d = this.documents;
            for (o in d) for (i = d[o], n = new Draw.Export.File("" + i.name + ".html", i.html), 
            e.html.push(n), t = new Draw.Export.File("" + i.name + ".css", i.css), e.css.push(t), 
            p = i.images, h = 0, u = p.length; u > h; h++) r = p[h], s = r.getData(), s.eid && (a = new Draw.Export.File(s.name, s.eid, {
                remote:!0
            }), e.images.push(a));
            return this._addCommonAssetsToZipData(e), e;
        }, t.prototype._addCommonAssetsToZipData = function(t) {
            var e, i, n, o, r;
            o = this.REMOTE_FILES, r = [];
            for (n in o) i = o[n], r.push(function() {
                var o, r, s;
                for (s = [], o = 0, r = i.length; r > o; o++) e = i[o], s.push(t[n].push(new Draw.Export.File(e, e, {
                    remote:!0
                })));
                return s;
            }());
            return r;
        }, t;
    }();
}.call(this), function() {
    Draw.Export.Generator = function() {
        function t() {}
        return t.prototype.generate = function(t, e) {
            var i, n, o, r, s, a;
            return n = {
                processor:"Identity"
            }, e = _.extend(n, e), o = t.toHtmlString(e), a = new Lib.GeneratedStyleSheet(), 
            r = a.parse($($.parseHTML(o))), i = {
                tree:t,
                stylesheet:a,
                rootNode:r
            }, s = new Draw.Export.Processor[e.processor](), s.process(i, e);
        }, t;
    }(), Draw.Export.Tree = function() {
        function t(t, e) {
            this.objects = t, this.options = null != e ? e :{}, this.generator = new Draw.Export.Generator();
        }
        return t.prototype.TOLERANCE = 10, t.prototype["export"] = function() {
            return this.root = this._generateTree(this.objects, this.options), this.generator.generate(this.root, this.options);
        }, t.prototype.getImages = function() {
            return this.root ? this.root.getImages() :[];
        }, t.prototype._exportTypes = function() {
            return this._types || (this._types = {
                DomElement:Draw.Export.DomElement,
                FontIcon:Draw.Export.DomElement,
                Rectangle:Draw.Export.NestedDomElement,
                DomRectangle:Draw.Export.NestedDomElement,
                DomOval:Draw.Export.NestedDomElement,
                DomImage:Draw.Export.Image,
                DomBodyText:Draw.Export.DomBodyText,
                BootstrapParagraph:Draw.Export.DomBodyText,
                DomHeading:Draw.Export.DomHeading,
                Path:Draw.Export.NoopObject,
                Text:Draw.Export.NoopObject,
                TextArea:Draw.Export.NoopObject
            }), this._types;
        }, t.prototype._generateTree = function(t, e) {
            var i, n, o, r, s, a, l;
            if (e = e || {
                type:"default"
            }, !t) return null;
            for (o = new Draw.Export.Object(null, !0), t = Draw.Item.sortDesc(t, !0, e), t = this._createExportObjects(t, o, e), 
            i = r = 0, l = t.length; l >= 0 ? l > r :r > l; i = l >= 0 ? ++r :--r) this._generateHiearchy(t[i], i, t);
            for (s = 0, a = t.length; a > s; s++) n = t[s], n.parent || o.addChild(n);
            return o.sortChildren(), o;
        }, t.prototype._generateHiearchy = function(t, e, i) {
            var n, o, r, s, a, l;
            for (l = [], n = r = s = e + 1, a = i.length; a >= s ? a > r :r > a; n = a >= s ? ++r :--r) {
                if (o = i[n], this._isParent(o, t)) {
                    o.addChild(t, !0);
                    break;
                }
                l.push(void 0);
            }
            return l;
        }, t.prototype._createExportObjects = function(t, e, i) {
            var n, o, r, s;
            for (s = [], o = 0, r = t.length; r > o; o++) n = t[o], s.push(this._createExportObject(n, e, i));
            return s;
        }, t.prototype._createExportObject = function(t, e, i) {
            var n, o;
            return n = this._exportTypes(), o = n[t.TYPE], !o && t instanceof Draw.DomElement && (o = Draw.Export.DomElement), 
            o || $.error("object", t.TYPE, "does not have an export type defined.", t), new o(t, e, i);
        }, t.prototype._isParent = function(t, e) {
            var i;
            return t.acceptsChildren() ? (i = t.object.getBounds().expand(this.TOLERANCE), i.contains(e.object.getBounds())) :!1;
        }, t;
    }();
}.call(this), function() {
    Draw.Export.FormZip = function() {
        function t(t) {
            var e;
            this.options = null != t ? t :{}, e = {
                data:null
            }, this.options = _.extend(e, this.options), this.setData(this.options.data);
        }
        return t.prototype.inputTemplate = _.template('<input type="hidden" name="{{serverKey}}[{{name}}]" value=""/>'), 
        t.prototype.setData = function(t) {
            this.data = t;
        }, t.prototype.applyToForm = function(t) {
            return this._generateZipStructure(t);
        }, t.prototype._generateZipStructure = function(t) {
            var e, i, n, o, r, s, a, l, c, h;
            t.html(""), this.options.easelProject && t.append('<input type="hidden" name="project" value="' + this.options.easelProject.id + '"/>'), 
            h = this.data;
            for (o in h) for (i = h[o], s = this.options["" + o + "Path"] || "", l = 0, c = i.length; c > l; l++) e = i[l], 
            a = "files", "images" === o && e.isRemote() ? a = "images" :e.isRemote() && (a = "common_files"), 
            r = e.name, s && (r = "" + s + "/" + e.name), n = $(this.inputTemplate({
                name:r,
                serverKey:a
            })), n.val(e.data), t.append(n);
            return null;
        }, t;
    }(), Draw.Export.File = function() {
        function t(t, e, i) {
            this.name = t, this.data = e, this.options = null != i ? i :{};
        }
        return t.prototype.isRemote = function() {
            return !!this.options.remote;
        }, t;
    }();
}.call(this), function() {
    function t(t, e, i, n) {
        _.isEqual(i, n) || t.trigger("change", t, {
            operation:e,
            old:i,
            "new":n
        });
    }
    paper.Point.prototype.toJSON = function() {
        return {
            x:Util.round(this.x, 2),
            y:Util.round(this.y, 2)
        };
    }, paper.Point.fromJSON = function(t) {
        return t ? t instanceof paper.Point ? t :new paper.Point(t.x, t.y) :null;
    }, paper.Point.translate = function(t, e, i) {
        return t instanceof paper.Point && e && (t = t[i ? "add" :"subtract"](e)), t;
    }, paper.Size.prototype.toJSON = function() {
        return {
            w:Util.round(this.width, 2),
            h:Util.round(this.height, 2)
        };
    }, paper.Size.fromJSON = function(t) {
        return t ? t instanceof paper.Size ? t :new paper.Size(t.w, t.h) :null;
    }, paper.Gradient.prototype.toString = function() {
        return "Gradient";
    }, paper.GradientColor.toString = function() {
        return "{GradientColor@" + this._id + "; " + this.stops.length + " stops}";
    }, _.extend(paper.GradientStop.prototype, Backbone.Events), _.extend(paper.GradientColor.prototype, Backbone.Events), 
    _.extend(paper.Gradient.prototype, Backbone.Events), paper.GradientColor.prototype.clone = function() {
        var t = this.gradient.clone(), e = new paper.GradientColor(t, this._origin, this._destination, this._hilite);
        return e;
    };
    var e = paper.GradientColor.prototype.initialize;
    paper.GradientColor.prototype.initialize = function() {
        return this._id = _.uniqueId(), e.apply(this, arguments);
    };
    var i = paper.GradientColor.prototype.transform;
    paper.GradientColor.prototype.transform = function(t, e) {
        e = e || {};
        var n = e.silent;
        n || this.trigger("prechange", this, "position", e), i.apply(this, arguments), n || this.trigger("change", this, "position", e);
    }, paper.GradientColor.prototype.setOrigin = function(t, e) {
        e = e || {};
        var i = e.silent;
        return i || this.trigger("prechange", this, "origin", e), t = paper.Point.read(arguments).clone(), 
        this._origin = t, this._destination && (this._radius = this._destination.getDistance(this._origin)), 
        i || this.trigger("change", this, "origin", e), this;
    }, paper.GradientColor.prototype.getPosition = function() {
        return this.getOrigin();
    }, paper.GradientColor.prototype.setPosition = function(t) {
        if (t) {
            var e = t.subtract(this.getPosition());
            this.transform(Matrix.getTranslateInstance(e.x, e.y));
        }
    }, paper.GradientColor.prototype.setDestination = function(t, e) {
        e = e || {};
        var i = e.silent;
        return i || this.trigger("prechange", this, "destination", e), t = paper.Point.read(arguments).clone(), 
        this._destination = t, this._radius = this._destination.getDistance(this._origin), 
        i || this.trigger("change", this, "destination", e), this;
    };
    var n = paper.Gradient.prototype.initialize;
    paper.Gradient.prototype.initialize = function() {
        return _.bindAll(this, "_onChangeStop", "_onPreChangeStop"), n.apply(this, arguments);
    }, paper.Gradient.prototype._onPreChangeStop = function(t, e, i) {
        this.trigger("prechange", t, e, i);
    }, paper.Gradient.prototype._onChangeStop = function(t, e, i) {
        for (var n = 0, o = 0; o < this.stops.length; o++) {
            var r = this.stops[o];
            if (r.rampPoint == t.rampPoint && r.color == t.color) {
                n = o;
                break;
            }
        }
        this.trigger("change:stop", t, n, e, i), this.trigger("change", this, "stop", {
            index:n,
            key:e,
            value:i,
            object:t
        });
    };
    var o = paper.Gradient.prototype.setStops;
    paper.Gradient.prototype.setStops = function(t, e) {
        if (this.stops) for (var i = 0; i < this.stops.length; i++) this.stops[i].unbind("change", this._onChangeStop), 
        this.stops[i].unbind("prechange", this._onPreChangeStop);
        this.trigger("prechange", this, "stops", {
            object:this.getStops()
        }), o.call(this, t), this.stops = _.sortBy(this.stops, function(t) {
            return t.getRampPoint();
        });
        for (var i = 0; i < this.stops.length; i++) this.stops[i].bind("change", this._onChangeStop), 
        this.stops[i].bind("prechange", this._onPreChangeStop);
        e || (this.trigger("change:stops", this, this.getStops()), this.trigger("change", this, "stops", {
            object:this.getStops()
        }));
    };
    var r = paper.GradientStop.prototype.setColor;
    paper.GradientStop.prototype.setColor = function(t, e) {
        this.trigger("prechange", this, "color", this.getColor()), r.call(this, t), e || (this.trigger("change:color", this, this.getColor()), 
        this.trigger("change", this, "color", this.getColor()));
    };
    var s = paper.GradientStop.prototype.setRampPoint;
    paper.GradientStop.prototype.setRampPoint = function(t, e) {
        this.trigger("prechange", this, "ramp_point", this.getRampPoint()), s.call(this, t), 
        e || (this.trigger("change:ramp_point", this, this.getRampPoint()), this.trigger("change", this, "ramp_point", this.getRampPoint()));
    }, paper.Gradient.prototype.toCss = function() {
        for (var t = [], e = 0; e < this.stops.length; e++) {
            var i = this.stops[e];
            t.push(Util.replace("{0} {1}%", [ i.color.toCssString(), Math.round(100 * i.rampPoint) ]));
        }
        var n = {
            background:this.stops[0].color.toCssString(),
            "background-image":"linear-gradient(top, " + t + ")"
        };
        return n;
    }, paper.Gradient.prototype.toJSON = function() {
        var t = {
            t:this.type
        };
        t.stops = [];
        for (var e = 0; e < this.stops.length; e++) t.stops.push(this.stops[e].toJSON());
        return t;
    }, paper.Gradient.fromJSON = function(t) {
        for (var e = [], i = 0; i < t.stops.length; i++) e.push(paper.GradientStop.fromJSON(t.stops[i]));
        return new paper.Gradient(e, t.t);
    }, paper.GradientStop.prototype.toJSON = function() {
        return {
            r:this.rampPoint,
            c:this.color.toJSON()
        };
    }, paper.GradientStop.fromJSON = function(t) {
        return new paper.GradientStop(paper.Color.fromJSON(t.c), t.r);
    }, paper.GradientColor.prototype.toJSON = function() {
        return {
            g:this.gradient.toJSON(),
            o:this.origin.toJSON(),
            d:this.destination.toJSON()
        };
    }, paper.GradientColor.fromJSON = function(t) {
        return new paper.GradientColor(paper.Gradient.fromJSON(t.g), paper.Point.fromJSON(t.o), paper.Point.fromJSON(t.d));
    }, paper.GradientColor.prototype.toCss = function() {
        angle = Angle.topCW(this.destination.subtract(this.origin).angle);
        var t = this.gradient.toCss();
        return t["background-image"] = t["background-image"].replace(/\(top/g, "(" + Math.round(angle) + "deg"), 
        t;
    }, paper.Color.prototype.average = function(t) {
        function e(t, e) {
            var i = t + e;
            return i ? i / 2 :0;
        }
        return new paper.RGBColor(e(this.red, t.red), e(this.green, t.green), e(this.blue, t.blue), e(this.alpha, t.alpha));
    }, paper.Color.prototype.toJSON = function() {
        var t = {
            R:Math.round(255 * this.red),
            G:Math.round(255 * this.green),
            B:Math.round(255 * this.blue),
            A:this.alpha
        };
        return (isNaN(this.alpha) || !this.alpha && 0 != this.alpha) && (t.A = 1), t;
    }, paper.Color.fromJSON = function(t) {
        return new paper.RGBColor(t.R / 255, t.G / 255, t.B / 255, t.A);
    };
    var a = paper.Color.prototype.toCssString;
    paper.Color.prototype.toCssString = function() {
        return 1 == this.alpha ? Color.NORMALIZED_HEX_STRING(this) :a.call(this);
    };
    var l = paper.Color.prototype.toString;
    paper.Color.prototype.toString = function() {
        return this._components ? l.call(this) :"Color";
    }, paper.Color.generateGradient = function(t, e, i) {
        e = e || .5;
        var n = t;
        return n && (n = Color.RGB_HSV(Color.NORMALIZED_RGB(Color.normalize(n))), void 0 != i && (n.S = _.clamp(n.S * i, 0, 100)), 
        n.V = _.clamp(n.V * e, 0, 100), n = Color.normalize(Color.HSV_RGB(n))), new paper.Gradient([ [ t || "white", 0 ], [ n || "black", 1 ] ]);
    }, paper.Color.generateGradientColor = function(t, e) {
        if (e) {
            var i = e.getBounds(), n = i.x + i.width / 2;
            return new paper.GradientColor(t, [ n, i.y ], [ n, i.y + i.height ]);
        }
        return null;
    };
    var c = paper.GradientColor.prototype.equals;
    paper.GradientColor.prototype.equals = function(t, e) {
        return e ? c.call(this, t) :t ? this._id == t._id :!1;
    };
    for (var h = [ paper.Color, paper.Gradient, paper.GradientColor, paper.GradientStop, paper.Point, paper.Rectangle, paper.Size ], u = 0; u < h.length; u++) h[u].prototype.isEqual = function(t) {
        return this.equals(t, !0);
    };
    paper.Layer.prototype.hitTest = function(t, e, i) {
        return this._hitTest(t, e, i);
    }, paper.Project.prototype.getChildren = function() {
        return this.layers;
    }, paper.Project.prototype._findThings = function(t, e) {
        if (!t) return [];
        for (var i = [], n = this.getChildren(), o = 0; n && o < n.length; o++) i = i.concat(n[o][e](t));
        return i;
    }, paper.Project.prototype.filterItems = function(t, e) {
        if (!t) return [];
        e = e || this;
        for (var i = [], n = e.getChildren(), o = 0; n && o < n.length; o++) t(n[o]) && i.push(n[o]), 
        i = i.concat(this.filterItems(t, n[o]));
        return i;
    }, paper.Project.prototype.findItems = function(t) {
        return this._findThings(t, "findItems");
    }, paper.Project.prototype.findSegments = function(t) {
        return this._findThings(t, "findSegments");
    }, paper.Item.prototype.getImages = function() {
        if (images = [], this._children) for (var t = 0; t < this._children.length; t++) images = images.concat(this._children[t].getImages());
        return images;
    }, paper.Item.prototype.findAll = function() {
        return [ this ];
    }, paper.Project.prototype.findAll = function(t) {
        for (var e = [], i = this.getChildren(), n = 0; n < i.length; n++) e = e.concat(i[n].findAll(t));
        return e;
    }, paper.Item.prototype.isEqual = function(t) {
        return this.equals(t);
    }, paper.Item.prototype.equals = function(t) {
        return t ? this.getId() && t.getId && this.getId() == t.getId() :!1;
    }, paper.Project.prototype.acceptsObject = function(t) {
        if (!t) return null;
        for (var e = this.getChildren(), i = 0; e && i < e.length; i++) {
            var n = e[i].acceptsObject(t);
            if (n) return n;
        }
        return null;
    }, paper.Layer.prototype.acceptsObject = paper.Project.prototype.acceptsObject, 
    paper.Group.prototype.acceptsObject = paper.Project.prototype.acceptsObject, paper.Item.prototype.acceptsObject = function() {
        return null;
    }, _.extend(paper.Group.prototype, Backbone.Events), paper.Layer.prototype.findAll = paper.Project.prototype.findAll, 
    paper.Layer.prototype.findItems = paper.Project.prototype.findItems, paper.Layer.prototype.toJSON = function() {
        var t = paper.Item.prototype.toJSON.apply(this);
        return t.t = "layer", t;
    }, paper.Layer.fromJSON = function(t, e) {
        var i = new paper.Layer();
        return i.childrenFromJSON(t, e), i;
    }, paper.Item.prototype.initCallbacks = function() {
        this._changeCallbacks || (this.onChildChanged = _.bind(this.onChildChanged, this), 
        this.onSegmentChanged = _.bind(this.onSegmentChanged, this), this._onChangeChild = _.bind(this.bubbleChangeEvent, this, "change:child"), 
        this._onChangeHierarchy = _.bind(this.bubbleChangeEvent, this, "change:hierarchy"), 
        this._onChangeSegment = _.bind(this.bubbleChangeEvent, this, "change:segment"), 
        this._onUpgradeJSON = _.bind(this.bubbleChangeEvent, this, "upgrade:json"), this._changeCallbacks = !0);
    }, paper.Item.prototype.bubbleChangeEvent = function(t, e, i, n, o) {
        n.splice(0, 0, this.findChildIndex(e)), this.trigger(t, this, i, n, o);
    }, paper.Item.prototype.onChildChanged = function(t, e) {
        if (t = t.owner || t, e = e || {}, !e.frompaper) {
            var i = t.changedAttributes();
            i = e.changed ? [ e.changed ] :i;
            var n = this.findChildIndex(t);
            if (n >= 0) for (var o = 0; o < i.length; o++) {
                var r = _.clone(e);
                r.old = r.old || t.getPrevious(i[o]), r["new"] = t.get(i[o]), this.trigger("change:child", this, t, [ n, i[o] ], r);
            } else pds(this, "DONT trigger change:child: ", i, t);
        }
    }, paper.Item.prototype.onSegmentChanged = function(t, e, i) {
        var n = this.findChildIndex(t);
        i.segment = e, this.trigger && this.trigger("change:segment", this, t, [ n, i.index ], i);
    }, paper.Item.prototype.bindEvents = function(t) {
        t && t.bind && (t.bind("change", this.onChildChanged), t.bind("change:child_segment", this.onSegmentChanged), 
        t.bind("change:child", this._onChangeChild), t.bind("change:hierarchy", this._onChangeHierarchy), 
        t.bind("change:segment", this._onChangeSegment), t.bind("upgrade:json", this._onUpgradeJSON));
    }, paper.Item.prototype.unbindEvents = function(t) {
        t && t.unbind && (t.unbind("change", this.onChildChanged), t.unbind("change:child_segment", this.onSegmentChanged), 
        t.unbind("change:child", this._onChangeChild), t.unbind("change:hierarchy", this._onChangeHierarchy), 
        t.unbind("change:segment", this._onChangeSegment), t.unbind("upgrade:json", this._onUpgradeJSON));
    }, paper.Item.prototype.findChildIndex = function(t) {
        t = t.owner || t;
        for (var e = 0; e < this._children.length; e++) if (this._children[e].id == t.id) return e;
        return -1;
    };
    var d = paper.Item.prototype.insertChild;
    paper.Item.prototype.insertChild = function(t, e) {
        var i = d.apply(this, arguments);
        return this.bindEvents(e), i && (t = this.findChildIndex(e), e.insertedInto && e.insertedInto(this, t), 
        this.trigger("change:hierarchy", this, e, [ t ], {
            operation:"add"
        })), i;
    }, paper.Item.prototype.translate = function(t, e) {
        var i = new paper.Matrix();
        return this.transform(i.translate.apply(i, arguments), e);
    }, paper.Item.CHILD_TRANSFORM_FLAG = 1024, paper.Item.prototype.transform = function(t, e) {
        var i = this._bounds, n = this._position, o = this._children;
        this._transform && (this._transform(t, e), this._changed(paper.Change.GEOMETRY)), 
        i && t.getRotation() % 90 === 0 ? (this._bounds = this._createBounds(t._transformBounds(i)), 
        this._position = this._bounds.getCenter()) :n && (this._position = t._transformPoint(n, n, !0)), 
        e = e || 0, e |= paper.Item.CHILD_TRANSFORM_FLAG;
        for (var r = 0, s = o && o.length; s > r; r++) o[r].transform(t, e);
        return this;
    };
    var p = paper.Item.prototype._remove;
    paper.Item.prototype._remove = function() {
        var t;
        if (this._parent) {
            t = this._parent, t.unbindEvents(this);
            var e = t.findChildIndex(this);
            t.trigger("change:hierarchy", t, this, [ e ], {
                operation:"remove"
            }), t.onChildRemove && t.onChildRemove(this);
        }
        var i = p.apply(this, arguments);
        return t && t.onAfterChildRemove && t.onAfterChildRemove(this), i;
    }, paper.Item.prototype.insertItemInPlace = function(t) {
        return t._parent && t._parent.insertChild(t._index, this);
    }, paper.Item.prototype.childrenToJSON = function() {
        var t = [];
        if (this.children) for (var e = 0; e < this.children.length; e++) this.children[e].toJSON && t.push(this.children[e].toJSON());
        return t;
    }, paper.Item.prototype.toJSON = function() {
        return ret = {
            children:this.childrenToJSON()
        };
    }, paper.Item.JSON_CLASSES = {
        layer:paper.Layer
    }, paper.Item.canCreateFromJSON = function(t) {
        var e = paper.Item.JSON_CLASSES[t.t];
        return e ? [ !0, e ] :[ !1, "no_class" ];
    }, paper.Item.fromJSON = function(t, e) {
        if (t.clone && t instanceof paper.Item) return t;
        var i = this.canCreateFromJSON(t), n = i[1];
        return i[0] ? n.fromJSON(t, e) :($.warn("Cannot create from json:", n, t), null);
    }, paper.Item.childrenFromJSON = function(t, e) {
        e = e || {}, e.path || (e.path = []);
        var i = [];
        if (t.children && t.children.length) for (var n = 0; n < t.children.length; n++) {
            var o = _.extend({}, e, {
                path:e.path.concat([ n ])
            }), r = paper.Item.fromJSON(t.children[n], o);
            r && i.push(r);
        }
        return i;
    }, paper.Item.prototype.childrenFromJSON = function(t, e) {
        for (var i = paper.Item.childrenFromJSON(t, e), n = 0; n < i.length; n++) this.addChild(i[n]);
    }, paper.Item.prototype.canFlatten = function() {
        return this.children && this.children.length;
    }, paper.Item.prototype.flattenVisible = function(t) {
        var e = [];
        if (!this.canFlatten(t)) return [ this ];
        for (var i = 0; i < this.children.length; i++) {
            var n = this.children[i];
            if (n.flattenVisible) for (var o = n.flattenVisible(t), r = 0; r < o.length; r++) e.push(o[r]);
        }
        return e;
    }, paper.Path.prototype.toJSON = function() {
        var t = paper.Item.prototype.toJSON.call(this);
        return t;
    }, paper.Item.prototype.findItems = function(t) {
        return this.getLocked() || !this.getVisible() ? [] :t && t.intersects(this.getBounds()) ? [ this ] :[];
    }, paper.Item.prototype._findThings = paper.Project.prototype._findThings, paper.Item.prototype.findSegments = paper.Project.prototype.findSegments, 
    paper.Path.prototype.findSegments = function(t) {
        var e = [];
        if (t) for (var i = 0; i < this._segments.length; i++) t.contains(this._segments[i].point) && e.push(this._segments[i]);
        return e;
    }, paper.PointText.prototype.findSegments = function() {
        return [];
    };
    var f = paper.Segment.prototype.initialize;
    paper.Segment.prototype.initialize = function(t) {
        this.id = _.uniqueId("seg");
        f.apply(this, arguments);
        this._movePoint = !1, t instanceof paper.Segment && t.isMovePoint() && (this._movePoint = !0);
    }, paper.Segment.prototype.setIsMovePoint = function(t) {
        this._movePoint = t;
    }, paper.Segment.prototype.isMovePoint = function() {
        return this._movePoint;
    }, paper.Path.prototype.findSegmentIndex = function(t) {
        if (!this._segments.length) return -1;
        for (var e = 0; e < this._segments.length; e++) if (t.id == this._segments[e].id) return e;
        return -1;
    };
    var g = paper.Path.prototype._add;
    paper.Path.prototype._add = function(t) {
        for (var e = g.apply(this, arguments), i = 0; i < t.length; i++) this.bindSegmentEvents(t[i]);
        return e;
    };
    paper.Path.prototype.setSegments;
    paper.Path.prototype.setSegments = function(t, e) {
        if (this._segments) for (var i = 0; i < this._segments.length; i++) this.unbindSegmentEvents(this._segments[i]);
        this._segments ? (this._selectedSegmentState = 0, this._segments.length = 0, this._curves && delete this._curves) :this._segments = [], 
        this._add(paper.Segment.readAll(t), null, e);
    };
    var m = paper.Path.prototype.removeSegments;
    paper.Path.prototype.removeSegments = function(t, e) {
        for (var i, n = t; n < (i = Math.min(this._segments.length, e)); n++) this.unbindSegmentEvents(this._segments[n]);
        var o = m.apply(this, arguments);
        return o;
    }, paper.Path.prototype.bindSegmentEvents = function(t) {
        t.bind("change", this.onChangeSegment), this.trigger && this.trigger("change:child_segment", this, t, {
            operation:"add",
            index:this.findSegmentIndex(t)
        });
    }, paper.Path.prototype.unbindSegmentEvents = function(t) {
        t.unbind("change", this.onChangeSegment), this.trigger && this.trigger("change:child_segment", this, t, {
            operation:"remove",
            index:this.findSegmentIndex(t)
        });
    }, paper.Path.prototype.onChangeSegment = function(t, e) {
        e.index = this.findSegmentIndex(t), this.trigger && this.trigger("change:child_segment", this, t, e);
    }, paper.Item.prototype.isPreselected = function() {
        if (this._children) for (var t = 0, e = this._children.length; e > t; t++) if (this._children[t].isPreselected()) return !0;
        return !!this._preselected;
    }, paper.Item.prototype.setPreselected = function(t) {
        if (this._children) for (var e = 0, i = this._children.length; i > e; e++) this._children[e].setPreselected(t); else (t = !!t) != !!this._preselected && (this._preselected = t, 
        this._project._updateSelection(this, "pre"), this._changed(33));
    }, paper.Item.prototype.getSelectable = function() {
        return this.group || this;
    }, paper.Item.prototype.getSelectedParent = function() {
        for (var t = this._parent; t; ) {
            if (t._selected) return t;
            t = t._parent;
        }
        return null;
    }, paper.Item.prototype.isParentSelected = function() {
        return !!this.getSelectedParent();
    }, paper.Item.prototype._getLocked = paper.Item.prototype.getLocked, paper.Item.prototype.getLocked = function() {
        return this._getLocked() || this.isParentLocked();
    }, paper.Item.prototype.isParentLocked = function() {
        for (var t = this._parent; t; ) {
            var e = t._getLocked();
            if (e) return e;
            t = t._parent;
        }
        return !1;
    }, paper.Item.prototype.hitTest = function(t, e, i) {
        function n(n, o) {
            if (!c || !r.contains(t)) {
                var a = r["get" + o]().transform(i);
                return t.getDistance(a) < e.tolerance ? new paper.HitResult(n, s, {
                    name:paper.Base.hyphenate(o),
                    point:a
                }) :void 0;
            }
        }
        if (!this.getVisible()) return null;
        if (e = paper.HitResult.getOptions(t, e), t = e.point, !this._children && !this.getRoughBounds(i).expand(e.tolerance)._containsPoint(t)) return null;
        if (!(!e.center && !e.bounds || this instanceof paper.Layer && !this._parent)) {
            var o, r = this.getBounds(), s = this, a = [ "LeftCenter", "TopCenter", "RightCenter", "BottomCenter", "TopLeft", "TopRight", "BottomLeft", "BottomRight" ], l = Math.min(r.width, r.height), c = e.tolerance > .2 * l;
            if (e.center && (o = n("center", "Center"))) return o;
            if (e.bounds) for (var h = 0; 8 > h; h++) if (o = n("bounds", a[h])) return o;
        }
        return this._children || !(e.guides && !this._guide || e.selected && !this._selected) ? this._hitTest(t, e, i) :null;
    }, paper.Item.prototype.getHelperCanvas = function() {
        return this._helperCanvas || (this._helperCanvas = document.createElement("canvas")), 
        this._helperCanvas;
    }, paper.Item.prototype.cropHelperCanvas = function() {
        function t(t, e) {
            for (var i = t; i >= 0 && r > i; ) {
                for (var n = 0; s > n; n++) if (o[4 * (n * r + i) + 3]) return i;
                i += e;
            }
            return -1;
        }
        var e = this.getHelperCanvas(), i = e.getContext("2d"), n = i.getImageData(0, 0, e.width, e.height), o = n.data, r = e.width, s = e.height, a = t(0, 1), l = t(r - 1, -1);
        a >= 0 && l > a && (e.width = l - a + 1, i.putImageData(n, -a, 0));
    }, paper.Item.prototype.toImage = function() {
        {
            var t = this.getImagableBounds ? this.getImagableBounds :this.getDrawableBounds, e = this.getHelperCanvas(), i = t.call(this), n = e.getContext("2d");
            new Image();
        }
        return i ? (e.width = i.width, e.height = i.height, matrix = paper.Matrix.getTranslateInstance(-i.x, -i.y), 
        n.save(), matrix.applyToContext(n), this.draw(n, {}), n.restore(), this.cropHelperCanvas(), 
        Util.dataUrlToBase64(e.toDataURL("image/png"))) :null;
    }, paper.Tool.prototype.deactivate = function() {
        return this._scope ? (pds("Tool", "Deactivating: " + this, this), this._scope[this._reference] = null, 
        changed = this._active, this._active = !1, changed) :!1;
    }, paper.Tool.prototype.activate = function(t) {
        if (!this._scope) return !1;
        if (paper.Tool._activeTools || (paper.Tool._activeTools = []), pds("Tool", "Begin Activate: " + this, this), 
        this.deactivatesActiveTool !== !1) {
            newActive = [];
            for (var e = 0; e < paper.Tool._activeTools.length; e++) {
                var i = paper.Tool._activeTools[e];
                i && i == this ? newActive = [ this ] :i && i.deactivate(t);
            }
            paper.Tool._activeTools = newActive;
        }
        return paper.Tool._activeTools.indexOf(this) < 0 && paper.Tool._activeTools.push(this), 
        pds("Tool", "Activating: " + this, this), this._scope[this._reference] = this, changed = !this._active, 
        this._active = !0, changed;
    }, paper.View.prototype.setZoom = function(t) {
        this._transform(new paper.Matrix().scale(t / this._zoom, new paper.Point(0, 0))), 
        this._zoom = t;
    }, paper.View.prototype._transform = function(t) {
        this._matrix.preConcatenate(t), this._context.matrix = this._matrix, this._bounds = null, 
        this._inverse = null;
    }, paper.View.prototype.onResize = function(t) {
        this.trigger("onResize", t);
    }, paper.View.prototype.onMove = function(t) {
        this.trigger("onMove", t);
    }, paper.View.prototype.isVisible = function() {
        return !0;
    };
    var v = paper.View.prototype._createEvents;
    paper.View.prototype._createEvents = function() {
        function t(t) {
            View._focused = i;
            var e = i._scope.tool;
            if (e) {
                var n = i.viewToProject(paper.DomEvent.getOffset(t, i._canvas));
                e.onHandleEvent("dblclick", n, t) && i.draw(!0);
            }
        }
        var e = v.call(this), i = this;
        return e.dblclick = t, e;
    }, paper.View.prototype.draw = function(t, e, i) {
        if (!e) return !1;
        if (t && !this._redrawNeeded) return !1;
        this._stats && this._stats.update();
        var n = this._context, o = this._viewSize, r = i ? i.getRectangle() :null;
        return e && e != Draw.LAYER_ALL || r || window.TESTING || (print("Clearing whole USER layer", o._width, o._height), 
        n.clearRect(0, 0, o._width + 1, o._height + 1)), n.save(), this._scope.project.draw(n, e, i), 
        n.restore(), this._redrawNeeded && (this._redrawNeeded = !1, this._scope._redrawNotified = !1), 
        !0;
    }, _.extend(paper.View.prototype, Backbone.Events);
    var y = paper.Item.prototype.initialize;
    paper.Item.prototype.initialize = function() {
        this.initCallbacks(), this instanceof paper.Group || this.onChangeSegment && (this.onChangeSegment = _.bind(this.onChangeSegment, this)), 
        y.apply(this, arguments);
    }, paper.Path.prototype.getDrawableBounds = function() {
        return this.getBounds();
    }, paper.PointText.prototype.getDrawableBounds = function() {
        return this.getBounds();
    }, paper.Segment.HANDLE_MODE_BROKEN = "broken", paper.Segment.HANDLE_MODE_BALANCED = "balanced", 
    _.extend(paper.Segment.prototype, Backbone.Events), paper.Segment.prototype._setSelected = function(t, e) {
        var i = this._path, e = !!e, n = this._selectionState || 0, o = [ !!(n & T.POINT), !!(n & T.HANDLE_IN), !!(n & T.HANDLE_OUT) ];
        if (t == this._point) o[1] = o[2] = !1, o[0] = e; else {
            var r = t == this._handleIn ? 1 :2, s = 1 == r ? 2 :1;
            o[r] = e, o[s] = !1, i._changed(33);
        }
        this._selectionState = (o[0] ? T.POINT :0) | (o[1] ? T.HANDLE_IN :0) | (o[2] ? T.HANDLE_OUT :0), 
        i && (n & T.POINT) != (this._selectionState & T.POINT) && i._updateSelection(this, n, this._selectionState);
    };
    var b = paper.Segment.prototype.setHandleIn;
    paper.Segment.prototype.setHandleIn = function(e, i) {
        var n = this.getHandleIn().clone(), o = b.apply(this, arguments);
        return 0 != i && this._handleMode == paper.Segment.HANDLE_MODE_BALANCED && this._balanceHandles(T.HANDLE_IN), 
        t(this, "handle-in", n, this._handleIn.clone()), o;
    };
    var w = paper.Segment.prototype.setHandleOut;
    paper.Segment.prototype.setHandleOut = function(e, i) {
        var n = this.getHandleOut().clone(), o = w.apply(this, arguments);
        return 0 != i && this._handleMode == paper.Segment.HANDLE_MODE_BALANCED && this._balanceHandles(T.HANDLE_OUT), 
        t(this, "handle-out", n, this._handleOut.clone()), o;
    }, paper.Segment.prototype.setPoint = function(e) {
        var i = this.getPoint().clone();
        e = paper.Point.read(arguments), this._point.set(e.x, e.y), t(this, "point", i, e);
    };
    var C = paper.Segment.prototype._transformCoordinates;
    paper.Segment.prototype._transformCoordinates = function(e, i, n) {
        var o = this.getPoint().clone(), r = this.getHandleIn().clone(), s = this.getHandleOut().clone(), a = C.apply(this, arguments);
        return n && (t(this, "point", o, this.getPoint().clone()), t(this, "handle-in", r, this.getHandleIn().clone()), 
        t(this, "handle-out", s, this.getHandleOut().clone())), a;
    }, paper.Segment.prototype._balanceHandles = function(t) {
        var e = "getHandleIn", i = "setHandleOut";
        t == T.HANDLE_OUT && (e = "getHandleOut", i = "setHandleIn");
        var n = this[e]();
        this[i](new paper.Point(-1 * n.x, -1 * n.y), !1);
    }, paper.Segment.prototype.getHandleMode = function() {
        return this._handleMode || paper.Segment.HANDLE_MODE_BROKEN;
    }, paper.Segment.prototype.setHandleMode = function(t, e) {
        if ((t == paper.Segment.HANDLE_MODE_BROKEN || t == paper.Segment.HANDLE_MODE_BALANCED) && this._handleMode != t) {
            var i = this._handleMode;
            if (this._handleMode = t, t == paper.Segment.HANDLE_MODE_BALANCED) {
                if (e) return this._balanceHandles(e);
                var n = [ [ "getHandleIn", T.HANDLE_IN ], [ "getHandleOut", T.HANDLE_OUT ] ];
                this._lastHandle && this._lastHandle & T.HANDLE_OUT && (n = [ [ "getHandleOut", T.HANDLE_OUT ], [ "getHandleIn", T.HANDLE_IN ] ]);
                for (var o, r = !1, s = 0; s < n.length; s++) o = n[s], this[o[0]]().isZero() || (this._balanceHandles(o[1]), 
                r = !0);
                r || this.setHandleOut(new paper.Point(10, 10));
            }
            this.trigger("change", this, {
                operation:"mode",
                old:i || paper.Segment.HANDLE_MODE_BROKEN,
                "new":this._handleMode
            });
        }
    }, paper.Segment.prototype.getHandlePoint = function(t) {
        var e = null;
        return t == T.HANDLE_IN ? e = this._point.add(this._handleIn) :t == T.HANDLE_OUT && (e = this._point.add(this._handleOut)), 
        e;
    }, paper.Segment.prototype.getSelectionState = function() {
        return this._selectionState;
    }, paper.Segment.prototype.selectHandle = function(t) {
        t == T.HANDLE_IN ? (this._lastHandle = t, this._setSelected(this._handleIn, !0)) :t == T.HANDLE_OUT ? (this._lastHandle = t, 
        this._setSelected(this._handleOut, !0)) :this._setSelected(this._handleOut, !1);
    }, paper.Segment.fromJSON = function(t) {
        var e = new paper.Segment(paper.Point.fromJSON(t.p));
        return e.setHandleMode(t.mode), e.setHandleIn(paper.Point.fromJSON(t.i)), e.setHandleOut(paper.Point.fromJSON(t.o)), 
        t.m && e.setIsMovePoint(!0), e;
    }, paper.Segment.prototype.toJSON = function() {
        var t = this.getPoint(), e = this.getHandleIn(), i = this.getHandleOut(), n = {
            p:t && !t.isZero() ? t.toJSON() :null,
            i:e && !e.isZero() ? e.toJSON() :null,
            o:i && !i.isZero() ? i.toJSON() :null,
            mode:this.getHandleMode()
        };
        return this.isMovePoint() && (n.m = !0), n;
    };
    var T;
    T = Draw.SelectionState = {
        HANDLE_IN:1,
        HANDLE_OUT:2,
        POINT:4
    }, paper.Item.transformPoint = function(t, e) {
        return e && t ? t = e.transform(t) :t && (t = new paper.Point(t.x, t.y)), t;
    }, paper.Path.prototype.drawBezierHandles = function(t, e, i) {
        function n(e) {
            sel = !!(l & e), sel && t.save();
            var n = e == T.HANDLE_IN ? s._handleIn :s._handleOut;
            c.drawBezierHandle(t, a, paper.Item.transformPoint(n, i), sel), sel && t.restore();
        }
        for (var o = 0, r = e.length; r > o; o++) {
            var s = e[o], a = paper.Item.transformPoint(s._point, i), l = s._selectionState, c = (l & T.POINT, 
            this);
            n(T.HANDLE_IN), n(T.HANDLE_OUT);
        }
    }, paper.Path.prototype.drawBezierHandle = function(t, e, i, n) {
        if (!i.isZero()) {
            var o = e.x + i.x, r = e.y + i.y, s = function(e, i) {
                t.fillStyle = i, t.beginPath(), t.arc(o, r, e, 0, 2 * Math.PI, !0), t.fill();
            };
            ss = t.strokeStyle, t.beginPath(), t.moveTo(e.x, e.y), t.lineTo(o, r), t.stroke(), 
            n ? (s(6, ss), s(5, "rgba(255,255,255,.4)")) :s(1.75, ss);
        }
    }, paper.Item.prototype.drawHandle = function(t, e, i, n, o) {
        i && (e = paper.Item.transformPoint(e, i));
        var r = o ? Draw.HANDLE_SIZE_SMALL :Draw.HANDLE_SIZE, s = parseInt(e.x), a = parseInt(e.y);
        if (t.save(), n) t.fillRect(s - r / 2, a - r / 2, r, r); else {
            s = s - r / 2 + .5, a = a - r / 2 + .5;
            var l = r - 1;
            t.lineWidth = 1, t.strokeRect(s, a, l, l), t.strokeStyle = "rgba(255,255,255,0.5)", 
            t.strokeRect(s + 1, a + 1, l - 2, l - 2);
        }
        t.restore();
    }, paper.Item.prototype.drawCenterHandles = function(t, e, i, n, o) {
        this.drawHandle(t, e.topCenter, i, n, o), this.drawHandle(t, e.rightCenter, i, n, o), 
        this.drawHandle(t, e.bottomCenter, i, n, o), this.drawHandle(t, e.leftCenter, i, n, o);
    }, paper.Item.prototype.drawHandles = function(t, e, i, n, o) {
        for (var r = 0, s = e.length; s > r; r++) {
            var a = e[r], l = a._point, c = a._selectionState, h = c & T.POINT, u = n;
            void 0 == u && (u = h), this.drawHandle(t, l, i, u, o);
        }
    }, paper.Path.prototype.drawSegments = function(t, e, i, n, o, r, s) {
        paper.Path.drawSegments.call(this, t, e, i, n, o, r, s);
    }, paper.PointText.prototype.drawSegments = paper.Path.prototype.drawSegments, paper.Path.drawSegments = function(t, e, i, n, o, r, s) {
        function a(t, e) {
            return void 0 == e ? t :parseInt(t) + e;
        }
        function l(i) {
            var l = e[i], d = paper.Item.transformPoint(l._point, n), p = a(d.x, o), f = a(d.y, r), g = paper.Item.transformPoint(l._handleIn, s ? n :null);
            !c || l.isMovePoint() ? t.moveTo(p, f) :g.isZero() && c.isZero() ? t.lineTo(p, f) :t.bezierCurveTo(h, u, g.x + p, g.y + f, p, f), 
            c = paper.Item.transformPoint(l._handleOut, s ? n :null), h = c.x + p, u = c.y + f;
        }
        var c, h, u, d = e.length;
        0 != s && (s = !0);
        for (var p = 0; d > p; p++) l(p);
        i && d > 1 && (l(0), t.closePath());
    }, paper.Path.prototype.drawDashes = function(t, e, i, n, o) {
        e = e.clone(), o && e.transform(o);
        var r = e.getBounds(), s = t.lineWidth / 2, a = parseInt(r.x) + s, l = parseInt(r.y) + s, c = parseInt(r.width) - t.lineWidth, h = parseInt(r.height) - t.lineWidth;
        e.setBounds(new paper.Rectangle(a, l, c, h));
        var u, d = new paper.PathFlattener(e), p = n, f = 0;
        for (e.remove(); p < d.length; ) u = p + i[f++ % i.length], d.drawPart(t, p, u), 
        p = u + i[f++ % i.length];
    }, paper.Item.prototype.drawBounds = function(t, e) {
        if (window.SHOWBOUNDS) {
            var i = this.getDrawableBounds();
            i = new paper.Rectangle(paper.Item.transformPoint(i.topLeft, e), paper.Item.transformPoint(i.bottomRight, e)), 
            t.save(), t.strokeStyle = "blue", t.lineWidth = 1, t.strokeRect(parseInt(i.x) + .5, parseInt(i.y) + .5, parseInt(i.width) - 1, parseInt(i.height) - 1), 
            t.restore();
        }
    }, paper.Item.prototype.drawSelection = function(t, e) {
        t.stroke(), this.drawHandles(t, this._segments, e);
    }, paper.Path.prototype.draw = function(t, e) {
        function i() {
            s && (t.fillStyle = s.getCanvasStyle(t), t.fill());
        }
        function n() {
            h && (t.strokeStyle = a.getCanvasStyle(t), c ? (t.beginPath(), r.drawDashes(t, r, l, r.getDashOffset(), e.matrix)) :r._closed && (t.lineWidth *= 2), 
            t.stroke());
        }
        if (!e || !e.renderModel || e.renderModel.includes(this)) {
            var o = "outer" == this.strokeAlign, r = this;
            e.compound || t.beginPath();
            var s = this.getFillColor(), a = this.getStrokeColor(), l = this.getDashArray() || [], c = !!l.length, h = a && this.getStrokeWidth();
            if (e.selection) this.drawSegments(t, this._segments, this._closed, e.matrix), this.drawSelection(t, e.matrix); else if (this._clipMask) this.drawSegments(t, this._segments, this._closed, e.matrix), 
            t.clip(); else if (!e.compound) {
                if (t.save(), this._setStyles(t), s && a || (t.globalAlpha = this._opacity), this.drawSegments(t, this._segments, this._closed, e.matrix), 
                this._closed && !o && a && !c && t.clip(), this._closed && !o && s && h) {
                    var u = null, d = this.getBounds(), p = t.lineWidth, f = new paper.Rectangle(d.x + p / 2, d.y + p / 2, d.width - p, d.height - p);
                    this instanceof Draw.Rectangle ? u = new Draw.InvisibleRectangle(f) :(u = new Draw.InvisiblePath(), 
                    u.setSegments(this._segments), u.setBounds(f)), t.beginPath(), this.drawSegments(t, u._segments, this._closed, e.matrix), 
                    i(), u.remove(), t.beginPath(), this.drawSegments(t, this._segments, this._closed, e.matrix);
                }
                this._closed || (i(), n()), o ? (n(), i()) :((s && !h || !s) && i(), n()), t.restore();
            }
        }
    };
}(), function() {
    window.Easel = window.Easel || {};
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Easel.Features = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        return i(n, e), n.setup = function(t) {
            return window.Features = new Easel.Features(t);
        }, n;
    }(Backbone.Model), Easel.Features.setup(window.__f);
}.call(this), function() {
    var t, e, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Easel.Document = function(e) {
        function i() {
            return t = i.__super__.constructor.apply(this, arguments);
        }
        return n(i, e), i.prototype.TYPE = "document", i.prototype.ATTRS = [ "eid", "name", "slug", "description", "created_at", "updated_at", "creator", "demo_type", "is_homepage", "accessibility", "thumbnail_url" ], 
        i.prototype.defaultThumbnail = Asset.DEFAULT_THUMBNAIL, i.prototype.defaultDemoThumbnail = Asset.DEFAULT_DEMO_THUMBNAIL, 
        i.prototype.idAttribute = "eid", i.prototype.initialize = function(t, e) {
            var n;
            return i.__super__.initialize.call(this, t, e), this.get("thumbnail_url") ? void 0 :(n = this.get("is_demo") && this.defaultDemoThumbnail || this.defaultThumbnail, 
            this.set({
                thumbnail_url:n
            }));
        }, i.prototype.setIsHomepage = function(t, e) {
            var i, n, o, r, s, a;
            if (t !== this.get("is_homepage") && (i = e ? "save" :"set", this[i]({
                is_homepage:t
            }), t)) {
                for (s = this.collection.models, a = [], o = 0, r = s.length; r > o; o++) n = s[o], 
                n.id !== this.id ? a.push(n.setIsHomepage(!1, e)) :a.push(void 0);
                return a;
            }
        }, i.prototype.url = function() {
            var t;
            return t = "/api/v1/documents", this.isNew() ? this.isNew() && this.options.duplicate && (t += "/" + this.options.duplicate + "/duplicate") :t += "/" + this.get("eid"), 
            t;
        }, i.prototype.parse = function(t) {
            return t = _.extract(i.__super__.parse.call(this, t), this.ATTRS), "thumbnail_url" in t && !t.thumbnail_url && delete t.thumbnail_url, 
            t;
        }, i;
    }(Backbone.Item), Easel.Documents = function(t) {
        function i() {
            return e = i.__super__.constructor.apply(this, arguments);
        }
        return n(i, t), i.prototype.model = Easel.Document, i.prototype.getHomepage = function() {
            var t, e, i, n;
            for (n = this.models, e = 0, i = n.length; i > e; e++) if (t = n[e], t.get("is_homepage")) return t;
            return null;
        }, i;
    }(Backbone.Items);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Easel.Project = function(i) {
        function o() {
            return this._listenForDeletedDocuments = e(this._listenForDeletedDocuments, this), 
            this._listenForCreatedDocuments = e(this._listenForCreatedDocuments, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.TYPE = "project", o.prototype.ATTRS = [ "eid", "name", "slug", "documents", "description", "created_at", "updated_at", "creator", "user_role", "memberships", "archived_at" ], 
        o.prototype.idAttribute = "eid", o.prototype.initialize = function(t, e) {
            var i, n, r, s;
            for (o.__super__.initialize.call(this, t, e), n = this.get("documents"), n || (n = [], 
            this.set({
                documents:n
            })), r = 0, s = n.length; s > r; r++) i = n[r], i && (i.project = this.get("eid"));
            return this.documents = new Easel.Documents(n, {
                project:this.get("eid")
            }), this.documents.parent = this, this._listenForCreatedDocuments(), this._listenForDeletedDocuments(), 
            this.bind("change:documents", this.onChangeDocuments);
        }, o.prototype._listenForCreatedDocuments = function() {
            return this.documents.bind("add", function(t) {
                return window.mixpanel ? mixpanel.track("Document:Create", {
                    eid:t.attributes.eid
                }) :void 0;
            });
        }, o.prototype._listenForDeletedDocuments = function() {
            return this.documents.bind("remove", function(t) {
                return window.mixpanel ? mixpanel.track("Document:Delete", {
                    eid:t.attributes.eid
                }) :void 0;
            });
        }, o.prototype.onChangeDocuments = function() {
            return this.documents.refresh(this.get("documents"));
        }, o.prototype.url = function() {
            var t;
            return t = "/api/v1/projects", this.isNew() || (t += "/" + this.get("eid")), t;
        }, o.prototype.parse = function(t) {
            var e;
            return e = _.extract(o.__super__.parse.call(this, t), this.ATTRS), this.documents.options.project = this.get("eid") || e.eid, 
            e.documents && this.get("documents") && e.documents.length === this.get("documents").length && delete e.documents, 
            e;
        }, o;
    }(Backbone.Item);
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Easel.User = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        var o, r, s, a;
        return i(n, e), s = "reader", r = "collaborator", o = "admin", a = [ s, r, o ], 
        n.prototype.DEFAULT_PREFERENCES = {
            htmlPath:"",
            cssPath:"stylesheets",
            fontsPath:"fonts",
            imagesPath:"images"
        }, n.prototype.ATTRS = [ "eid", "role", "email", "name", "preferences" ], n.prototype.idAttribute = "eid", 
        n.prototype.initialize = function(t, e) {
            var i;
            return n.__super__.initialize.call(this, t, e), this.get("role") || this.set({
                role:window.Role
            }), i = _.extend({}, this.DEFAULT_PREFERENCES, this.get("preferences")), this.set({
                preferences:i
            });
        }, n.prototype.toJSON = function() {
            var t;
            return t = _.extract(this.attributes, this.ATTRS);
        }, n.prototype.parse = function(t) {
            return _.extract(n.__super__.parse.call(this, t), this.ATTRS);
        }, n.prototype.hasRole = function(t) {
            var e, i;
            return this.get("role") ? (i = a.indexOf(this.get("role")), e = a.indexOf(t), i >= e) :!1;
        }, n.prototype.isReaderOrBetter = function() {
            return this.hasRole(s);
        }, n.prototype.isCollaboratorOrBetter = function() {
            return this.hasRole(r);
        }, n.prototype.isAdminOrBetter = function() {
            return this.hasRole(o);
        }, n.prototype.isSameUser = function(t) {
            return t.eid === this.get("eid") ? !0 :t.email === this.get("email") ? !0 :!1;
        }, n.prototype.canViewComments = function() {
            return !0;
        }, n.prototype.canComment = function() {
            return this.isReaderOrBetter();
        }, n.prototype.canEditCommentText = function(t) {
            return this.isSameUser(t.get("creator"));
        }, n.prototype.canEditCommentProperties = function(t) {
            var e;
            return e = this.isCollaboratorOrBetter(), e || this.isSameUser(t.get("creator"));
        }, n;
    }(Backbone.Item);
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    }, n = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Easel.Comment = function(e) {
        function o() {
            return t = o.__super__.constructor.apply(this, arguments);
        }
        return i(o, e), o.prototype.ATTRS = [ "eid", "x", "y", "w", "h", "text", "parent_id", "resolved_at", "number" ], 
        o.prototype.URL = "/api/v1/documents/{{document_id}}/comments", o.prototype.idAttribute = "eid", 
        o.prototype.initialize = function(t, e) {
            return o.__super__.initialize.call(this, t, e);
        }, o.prototype.url = function() {
            return this._url || (this._url = _.template(this.URL, {
                document_id:this.getDocumentId()
            })), this.isNew() && this._url || "" + this._url + "/" + this.get("eid");
        }, o.prototype.toJSON = function() {
            var t;
            return t = _.extract(this.attributes, this.ATTRS), "resolved_at" in t && (_.isBoolean(t.resolved_at) || delete t.resolved_at), 
            t.number && delete t.number, t;
        }, o.prototype.parse = function(t) {
            return _.extract(o.__super__.parse.call(this, t), this.ATTRS);
        }, o.prototype.getDocumentId = function() {
            return this.get("document_id") || this.options.document_id;
        }, o.prototype.isResolved = function() {
            return !!this.get("resolved_at");
        }, o.prototype.setResolved = function(t) {
            return this.set({
                resolved_at:!!t
            });
        }, o.prototype.toggleResolved = function() {
            return this.setResolved(!this.isResolved());
        }, o.prototype.isOpen = function() {
            return !!this.get("is_open");
        }, o.prototype.open = function() {
            return this.set({
                is_open:!0
            });
        }, o.prototype.close = function() {
            return this.set({
                is_open:!1
            });
        }, o.prototype.getDate = function(t) {
            var e;
            return e = this.get(t), e ? Util.parseDate(e, Util.DataFormatters.dateParseFormat) :e;
        }, o.prototype.getUpdatedDate = function() {
            return this.getDate("updated_at");
        }, o.prototype.getCreatedDate = function() {
            return this.getDate("created_at");
        }, o.prototype.isRoot = function() {
            return !this.get("parent_id");
        }, o.prototype.reply = function(t) {
            var e;
            return e = Easel.Comments.newCommentAttributes({
                text:t,
                parent_id:this.id,
                document_id:this.getDocumentId()
            }), new Easel.Comment(e, this.options);
        }, o.prototype.shouldSync = function() {
            var t, e, i, o;
            for (e = this.changedAttributes(), i = 0, o = e.length; o > i; i++) if (t = e[i], 
            ("resolved_at" !== t || _.isBoolean(this.get("resolved_at"))) && n.call(this.ATTRS, t) >= 0) return !0;
            return !1;
        }, o;
    }(Backbone.Item);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Easel.CommentView = function(i) {
        function o() {
            return this.stopEditing = e(this.stopEditing, this), this.updateResolved = e(this.updateResolved, this), 
            t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.template = "#comment-template", o.prototype.editTemplate = "#edit-comment-template", 
        o.prototype.className = "comment", o.prototype.tagName = "div", o.prototype.formats = {
            text:"markdown",
            updated_at:"relativetime"
        }, o.prototype.events = {
            "click .resolve":"onClickResolve",
            "click .edit":"onClickEdit",
            "click .edit-cancel":"onClickEditCancel"
        }, o.prototype.render = function() {
            return this.el = $(this.el), this.model.isRoot() ? this.el.addClass("root-comment") :this.el.addClass("reply-comment"), 
            o.__super__.render.call(this), this.model.bind("change:resolved_at", this.updateResolved), 
            this.model.bind("hide", this.stopEditing), this.updateResolved(), User.canEditCommentProperties(this.model) || this.$(".resolve").remove(), 
            User.canEditCommentText(this.model) || this.$(".delete, .edit").remove(), this;
        }, o.prototype.onClickEdit = function() {
            return this.startEditing(), !1;
        }, o.prototype.onClickEditCancel = function() {
            return this.stopEditing(), !1;
        }, o.prototype.onClickResolve = function() {
            return this.model.toggleResolved(), !1;
        }, o.prototype.updateResolved = function() {
            var t;
            return t = this.$(".resolve"), this.model.isResolved() ? t.addClass("resolved") :t.removeClass("resolved");
        }, o.prototype["delete"] = function(t) {
            return confirm("Delete this comment?") && o.__super__["delete"].call(this, t), !1;
        }, o.prototype.submit = function() {
            return this.$(".edit-form textarea").val() && this.model.set({
                text:this.$(".edit-form textarea").val()
            }), this.stopEditing(), !1;
        }, o.prototype.startEditing = function() {
            var t, e;
            return Easel.CommentView.editNode || (Easel.CommentView.editNode = $(this.renderTemplate(this.editTemplate, {}))), 
            Easel.CommentView.editing && Easel.CommentView.editing.stopEditing(), Easel.CommentView.editNode.insertAfter(this.$(".text").hide()), 
            e = Easel.CommentView.editNode.find("textarea").val(this.model.get("text")), $("textarea").blur(), 
            t = function() {
                return e.blur().focus()[0].select();
            }, setTimeout(t, 10), Easel.CommentView.editing = this, this.model.trigger("change:editing", this, !0);
        }, o.prototype.stopEditing = function() {
            return Easel.CommentView.editing === this ? (Easel.CommentView.editing = null, this.$(".edit-form").length && (this.$(".edit-form").remove(), 
            this.$(".text").show()), this.model.trigger("change:editing", this, !1)) :void 0;
        }, o;
    }(Backbone.ItemView);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Easel.Comments = function(i) {
        function o() {
            return this.fetchNewComments = e(this.fetchNewComments, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype._module = "Comments", o.SYNC = !0, o.newCommentAttributes = function(t) {
            var e;
            return e = {
                name:"You"
            }, window.User && (e = _.clone(User.attributes)), t = _.extend({
                parent_id:null,
                creator:e,
                updated_at:new Date(),
                created_at:new Date()
            }, t);
        }, o.prototype.model = Easel.Comment, o.prototype.POLL_INTERVAL = 5e3, o.prototype.initialize = function(t, e) {
            var i, n = this;
            return o.__super__.initialize.call(this, t, e), this.options.document_id && (this.url = _.template(Easel.Comment.prototype.URL, this.options)), 
            this._number = 1, this.options.document_id ? (i = function() {
                var t, e, i, o, r;
                for (n._findLatestDate(), o = n.models, r = [], e = 0, i = o.length; i > e; e++) t = o[e], 
                r.push(t.set({
                    document_id:n.options.document_id
                }));
                return r;
            }, i(), this.bind("reset", i), this.bind("add", function(t) {
                return t.set({
                    document_id:n.options.document_id
                });
            })) :void 0;
        }, o.prototype.getNextNumber = function() {
            var t;
            return t = this._number++;
        }, o.prototype.getNumberUnresolved = function() {
            var t, e, i, n, o;
            for (t = 0, o = this.models, i = 0, n = o.length; n > i; i++) e = o[i], e.isResolved() || t++;
            return t;
        }, o.prototype._findLatestDate = function(t) {
            var e, i, n, o, r;
            for (t = t || this.models, this._latestDate || (this._latestDate = {
                date:null,
                str:null
            }), r = [], n = 0, o = t.length; o > n; n++) i = t[n], e = i.getUpdatedDate(), !this._latestDate.date || e > this._latestDate.date ? (this._latestDate.date = e, 
            r.push(this._latestDate.str = i.get("updated_at"))) :r.push(void 0);
            return r;
        }, o.prototype.getLatestDate = function() {
            return this._latestDate ? this._latestDate.str :null;
        }, o.prototype.startPollingForChanges = function() {
            return Easel.Comments.SYNC && !this._polling ? this._polling = setInterval(this.fetchNewComments, this.POLL_INTERVAL) :void 0;
        }, o.prototype.stopPollingForChanges = function() {
            return this._polling ? (clearInterval(this._polling), this._polling = null) :void 0;
        }, o.prototype.fetchNewComments = function() {
            var t, e = this;
            return this.url ? (t = {}, this.getLatestDate() && (t.updated_after = this.getLatestDate()), 
            $.getJSON(this.url, t, function(t) {
                var i, n;
                return t = t.results, t && t.length ? (i = function() {
                    var e, i, o;
                    for (o = [], e = 0, i = t.length; i > e; e++) n = t[e], o.push(new Easel.Comment(n, this.options));
                    return o;
                }.call(e), e._findLatestDate(i), pds(e, "Found new comments", t, i), e.trigger("new:comments", e, t, i)) :pds(e, "NO new comments back from fetch");
            })) :$.error("Comment collection Must have a document id!");
        }, o.prototype.getThreads = function(t) {
            var e, i, n, o;
            for (t = t || this.models, i = {}, n = 0, o = t.length; o > n; n++) e = t[n], e.isRoot() ? (e.set({
                number:this.getNextNumber()
            }), e.collection = null, i[e.id] = new Easel.Comments(), i[e.id].add(e)) :i[e.get("parent_id")].add(e);
            return i;
        }, o.prototype.getRoot = function() {
            var t, e, i, n;
            for (n = this.models, e = 0, i = n.length; i > e; e++) if (t = n[e], t.isRoot()) return t;
            return null;
        }, o;
    }(Backbone.Items);
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    Easel.CommentsController = function() {
        function e(e) {
            this.registerThread = t(this.registerThread, this), this.onCommentCreate = t(this.onCommentCreate, this), 
            this.syncComment = t(this.syncComment, this), this.destroyThread = t(this.destroyThread, this), 
            this.onNewComments = t(this.onNewComments, this), this.refresh = t(this.refresh, this), 
            this._removeThread = t(this._removeThread, this), this._addThread = t(this._addThread, this), 
            this.options = e, this.model = e.model, this._sync = !0, this.model.bind("reset", this.refresh), 
            this.model.bind("new:comments", this.onNewComments), this.refresh();
        }
        return mixin(e, Backbone.Events), e.prototype._initThreads = function(t) {
            var e, i, n, o;
            o = [];
            for (e in t) i = t[e], n = new Easel.ThreadView({
                model:i,
                parent:this.model
            }), this._addToRootComments(n, i.getRoot()), o.push(this._addThread(i, i.getRoot()));
            return o;
        }, e.prototype._addToRootComments = function(t, e) {
            return e.thread = t, this.model.remove(e), e.collection = null, this.rootComments.add(e);
        }, e.prototype._addThread = function(t, e) {
            return t.bind("change", this.syncComment), this.threads[e.id] = t, e.thread ? this.threadViews.push(e.thread) :void 0;
        }, e.prototype._removeThread = function(t) {
            return this.threads[t.id] && (this.threads[t.id].unbind("change", this.syncComment), 
            delete this.threads[t.id], t.thread) ? this.threadViews = _.without(this.threadViews, t.thread) :void 0;
        }, e.prototype.refresh = function() {
            return this.threads = this.model.getThreads(), this.threadViews = [], this.rootComments ? this.rootComments.reset([]) :(this.rootComments = new Easel.Comments(), 
            this.rootComments.bind("remove", this.destroyThread)), this._initThreads(this.threads), 
            this.model.NAME = "all", this.rootComments.NAME = "root", this.trigger("ready", this);
        }, e.prototype.onNewComments = function(t, e, i) {
            var n, o, r, s, a, l, c, h, u, d;
            for (this._sync = !1, l = 0, h = i.length; h > l; l++) if (r = i[l], s = r.get("parent_id"), 
            s && this.threads[s]) {
                for (o = !1, d = this.threads[s].models, c = 0, u = d.length; u > c; c++) n = d[c], 
                n.id === r.id && (n.set(r.attributes), o = !0);
                o || this.threads[s].add(r);
            } else this.threads[r.id] ? this.threads[r.id].getRoot().set(r.attributes) :r.isRoot() && (a = this.model.getThreads([ r ]), 
            _.extend(this.threads, a), this._initThreads(a));
            return this._sync = !0;
        }, e.prototype.getThread = function(t) {
            return this.threads[t];
        }, e.prototype.getComment = function(t) {
            var e, i, n, o, r;
            if (i = parseInt(t), i && !isNaN(i) && 16 !== t.length && "" + i == "" + t) for (r = this.rootComments.models, 
            n = 0, o = r.length; o > n; n++) if (e = r[n], e.get("number") === i) return e;
            return this.rootComments.get(t);
        }, e.prototype.destroyThread = function(t) {
            var e;
            return t.isRoot() && t.thread ? (e = t.thread, this._removeThread(t), this.trigger("thread:destroy", e, t)) :void 0;
        }, e.prototype.syncComment = function(t) {
            return this._sync && !t.isNew() ? t.shouldSync() && Easel.Comments.SYNC ? t.save() :void 0 :void 0;
        }, e.prototype.onCommentCreate = function(t, e) {
            var i = this;
            return t.unbind("create", this.onCommentCreate), e.isRoot() ? (this._addToRootComments(t, e), 
            e.isNew() ? (this.model.stopPollingForChanges(), e.bind("change:eid", function() {
                return i._addThread(t.model, e), i.model.startPollingForChanges();
            })) :this._addThread(t.model, e)) :void 0;
        }, e.prototype.registerThread = function(t) {
            return t ? t.bind("create", this.onCommentCreate) :void 0;
        }, e;
    }();
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Easel.CommentsView = function(i) {
        function o() {
            return this.updateNumber = e(this.updateNumber, this), this.onClick = e(this.onClick, this), 
            t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.className = "comment-count", o.prototype.tagName = "div", 
        o.prototype.events = {
            click:"onClick"
        }, o.prototype.initialize = function(t) {
            return t = t || {}, t.controller && (this.model = t.controller.rootComments), this.model.bind("add", this.updateNumber), 
            this.model.bind("remove", this.updateNumber), this.model.bind("change", this.updateNumber), 
            this.updateNumber();
        }, o.prototype.onClick = function() {
            return this.trigger("click", this), !1;
        }, o.prototype.updateNumber = function() {
            var t;
            return t = this.model.getNumberUnresolved(), this.$(".number").text(t || "");
        }, o;
    }(Backbone.View);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Easel.ThreadView = function(i) {
        function o() {
            return this.replyAndResolve = e(this.replyAndResolve, this), this.comment = e(this.comment, this), 
            this.onClickCancel = e(this.onClickCancel, this), this.onClickReplyAndUnresolve = e(this.onClickReplyAndUnresolve, this), 
            this.onClickReplyAndResolve = e(this.onClickReplyAndResolve, this), this.onModelChange = e(this.onModelChange, this), 
            this.submit = e(this.submit, this), this.submitFocused = e(this.submitFocused, this), 
            this.onChangeCommentEditing = e(this.onChangeCommentEditing, this), this.addItem = e(this.addItem, this), 
            this.removeItem = e(this.removeItem, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.collectionClass = Easel.Comments, o.prototype.viewClass = Easel.CommentView, 
        o.prototype.template = "#thread-template", o.prototype.className = "thread", o.prototype.events = {
            "submit form.reply-form":"submit",
            "click .cancel":"onClickCancel",
            "click .reply-and-resolve":"onClickReplyAndResolve",
            "click .reply-and-unresolve":"onClickReplyAndUnresolve",
            "focus textarea":"onFocusTextarea"
        }, o.prototype.render = function() {
            return o.__super__.render.call(this), this.model.bind("change", this.onModelChange), 
            User.canComment() || this.$(".reply-form").remove(), this._updateResolvedInterface(), 
            this;
        }, o.prototype._createView = function(t) {
            return t.bind("change:editing", this.onChangeCommentEditing), o.__super__._createView.call(this, t);
        }, o.prototype._updateResolvedInterface = function() {
            var t;
            return t = this.getRoot(), t ? (this.el.addClass("has-root"), t.isResolved() ? this.el.addClass("resolved") :this.el.removeClass("resolved")) :this.el.removeClass("has-root").removeClass("resolved");
        }, o.prototype.removeItem = function(t) {
            return t.unbind("change:editing", this.onChangeCommentEditing), o.__super__.removeItem.call(this, t);
        }, o.prototype.addItem = function(t, e, i) {
            return o.__super__.addItem.call(this, t, e, i), this._updateResolvedInterface();
        }, o.prototype.onChangeCommentEditing = function(t, e) {
            var i;
            return i = this.$(".reply-form"), e ? i.hide() :i.show();
        }, o.prototype.onFocusTextarea = function(t) {
            var e;
            return e = $(t.target), e.elastic({
                isSingleton:!0
            });
        }, o.prototype.onShow = function() {
            var t, e = this;
            return t = function() {
                return e.getReplyBox().focus();
            }, setTimeout(t, 10);
        }, o.prototype.onHide = function() {
            var t, e, i, n;
            for (n = this.model.models, e = 0, i = n.length; i > e; e++) t = n[e], t.trigger("hide");
            return this.getReplyBox().val(""), this.getReplyBox().blur();
        }, o.prototype.submitFocused = function() {
            return Easel.CommentView.editing ? Easel.CommentView.editing.submit() :this.submit();
        }, o.prototype.submit = function() {
            var t;
            return t = this.getReplyBox().val(), t && this.comment(t), !1;
        }, o.prototype.onModelChange = function(t) {
            return t.isRoot() ? this._updateResolvedInterface() :void 0;
        }, o.prototype.onClickReplyAndResolve = function() {
            return this.replyAndResolve(!0);
        }, o.prototype.onClickReplyAndUnresolve = function() {
            return this.replyAndResolve(!1);
        }, o.prototype.onClickCancel = function() {
            return this.getReplyBox().val(""), this.trigger("cancel", this), !1;
        }, o.prototype.getRoot = function() {
            return this.model.getRoot();
        }, o.prototype.getReplyBox = function() {
            return this.$(".reply-form textarea");
        }, o.prototype.setData = function(t) {
            var e;
            return this.data = t, e = this.model.getRoot(), e ? e.set(this.data) :void 0;
        }, o.prototype.comment = function(t) {
            var e, i, n;
            return n = this.model.getRoot(), n ? i = n.reply(t) :(e = this.data || {}, e.text = t, 
            e.is_open = !0, e.number = this.options.parent.getNextNumber(), e = Easel.Comments.newCommentAttributes(e), 
            i = new Easel.Comment(e, {
                document_id:e.document_id
            })), Easel.Comments.SYNC && i.save(), this.model.add(i), this.getReplyBox().val(""), 
            this.trigger("create", this, i);
        }, o.prototype.replyAndResolve = function(t) {
            var e;
            return (e = this.getRoot()) ? (this.getReplyBox().val() && this.submit(), e.setResolved(t), 
            !1) :void 0;
        }, o;
    }(Backbone.ItemViews);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    }, o = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Easel.ThreadsView = function(i) {
        function r() {
            return this.onAddThread = e(this.onAddThread, this), this.onChangeThread = e(this.onChangeThread, this), 
            this._unbindThread = e(this._unbindThread, this), t = r.__super__.constructor.apply(this, arguments);
        }
        return n(r, i), r.prototype.template = '<a class="thread-marker thread-marker-{{number}}" href="#" rel="{{number}}">{{number}}</a>', 
        r.prototype.events = {
            "click .thread-marker":"onClickMarker"
        }, r.prototype.initialize = function(t) {
            var e, i, n, o, r;
            for (this.options = t, this.model.bind("add", this.onAddThread), this.model.bind("change", this.onChangeThread), 
            this.showResolved(!1), o = this.model.models, r = [], i = 0, n = o.length; n > i; i++) e = o[i], 
            r.push(this.onAddThread(e));
            return r;
        }, r.prototype._getMarker = function(t) {
            return this.$(".thread-marker-" + t);
        }, r.prototype._showMarker = function(t, e) {
            var i;
            return i = this._getMarker(t.get("number")), t.isResolved() && !this._showResolved ? i.hide() :e && t === this.current ? void 0 :i.show();
        }, r.prototype._setupForResolved = function(t) {
            var e;
            return e = this._getMarker(t.get("number")), t.isResolved() ? e.addClass("resolved") :e.removeClass("resolved");
        }, r.prototype._placeMarker = function(t, e) {
            var i, n;
            return n = t.width(), i = t.height(), t.css({
                left:e.x + e.w / 2 - n / 2,
                top:e.y + e.h / 2 - i / 2
            });
        }, r.prototype._unbindThread = function() {
            return this._newThread.unbind("create", this._unbindThread), this._newThread = null;
        }, r.prototype._getNewThreadView = function() {
            return this._newThread || (this._newThread = new Easel.ThreadView({
                model:new Easel.Comments(),
                parent:this.options.parent
            }), this._newThread.bind("create", this._unbindThread), this.trigger("new:thread", this._newThread)), 
            this._newThread;
        }, r.prototype.onChangeThread = function(t) {
            var e, i, n, r;
            return e = t.changedAttributes(), n = t.get("is_open"), i = this._getMarker(t.get("number")), 
            this._placeMarker(i, t.attributes), this._setupForResolved(t), n ? i.hide() :this._showMarker(t, (r = !1, 
            o.call(e, r) >= 0));
        }, r.prototype.onAddThread = function(t) {
            var e;
            return e = $($.parseHTML(this.renderTemplate(this.template, t.attributes))), this.el.append(e), 
            this._placeMarker(e, t.attributes), this._setupForResolved(t), this._showMarker(t), 
            t.isOpen() ? (this.open(t), this.onChangeThread(t)) :void 0;
        }, r.prototype.onClickMarker = function(t) {
            var e, i;
            return i = $(t.target), e = parseInt(i.attr("rel")), this.open(e), !1;
        }, r.prototype.areResolvedShowing = function() {
            return this._showResolved;
        }, r.prototype.showResolved = function(t) {
            var e, i, n, o, r;
            for (this._showResolved = !!t, o = this.model.models, r = [], i = 0, n = o.length; n > i; i++) e = o[i], 
            e.isResolved() ? r.push(this._showMarker(e, !0)) :r.push(void 0);
            return r;
        }, r.prototype.openComment = function(t) {
            var e, i, n, o;
            if (this.current !== t) {
                for (o = this.model.models, i = 0, n = o.length; n > i; i++) e = o[i], e.isOpen() && (this.current && this.current.id === e.id && (this.currentThread = this.current = null), 
                e.close());
                return t.open(), this.current = t, this.currentThread = t.thread, this.trigger("change:current", this.currentThread, this.current, this.current.get("number"));
            }
        }, r.prototype.open = function(t) {
            var e, i, n, o, r;
            if (null != t) {
                if (t instanceof Easel.Comment) return this.openComment(t);
                for (o = this.model.models, r = [], i = 0, n = o.length; n > i; i++) {
                    if (e = o[i], e.get("number") === t) {
                        this.openComment(e);
                        break;
                    }
                    r.push(void 0);
                }
                return r;
            }
        }, r.prototype.close = function() {
            return this.currentThread || this.current ? (this.current && this.current.close(), 
            this.currentThread = this.current = null, this.trigger("change:current", null, null, null)) :void 0;
        }, r.prototype.newThread = function() {
            return this.close(), this.currentThread = this._getNewThreadView(), this.trigger("change:current", this.currentThread, null, null);
        }, r;
    }(Backbone.View);
}.call(this), Draw.LinkableObjectMixin = function() {}, Draw.LinkableObjectMixin.prototype = {
    _setHref:function(t) {
        return t ? (this.el.attr("data-link", t), this.el.addClass("easel-linkable")) :(this.el.removeAttr("data-link"), 
        this.el.removeClass("easel-linkable")), t;
    }
}, Draw.MovableObjectMixin = function() {}, Draw.MovableObjectMixin.prototype = {
    setPosition:function(t, e) {
        this.set("position", t, e);
    },
    getPosition:function() {
        return this.get("position");
    },
    moveUp:function() {
        this.nextSibling && this.moveAbove(this);
    },
    moveDown:function() {
        this.previousSibling && this.moveBelow(this);
    },
    moveToTop:function() {
        this.parent.appendTop(this);
    },
    moveToBottom:function() {
        this.parent.appendBottom(this);
    }
}, Draw.MovableObjectMixin.mixinTo = function(t) {
    _.extend(t.prototype, Draw.MovableObjectMixin.prototype);
}, Draw.MovableDomObjectMixin = function() {}, Draw.MovableDomObjectMixin.prototype = {
    getReferenceEl:function() {
        return this.el;
    },
    insertedInto:function(t, e) {
        function i(i, o) {
            for (var r = e; r >= 0 && r < t.children.length; r += o) {
                var s = t.children[r];
                if (s.getReferenceEl && s.id != n.id) return n.el[i](s.getReferenceEl()), !0;
            }
            return !1;
        }
        if (this.el) {
            var n = this, o = i("insertBefore", 1);
            o || (o = i("insertAfter", -1)), !o && t.el ? t.el.append(this.el) :o || this._appendToCanvas(this.el);
        }
    },
    _appendToCanvas:function(t) {
        this._project && this._project.getCanvasElement && (parent = this._project.getCanvasElement(), 
        parent && parent.append(t));
    }
}, Draw.DomCanvasMixin = function() {}, Draw.DomCanvasMixin.included = function(t) {
    t.prototype._draw = t.prototype.draw, t.prototype.draw = t.prototype.__draw;
}, Draw.DomCanvasMixin.prototype = {
    initDomElement:function() {
        this.el = $("<canvas/>"), this.el[0].id = "dom-elem-" + this.id, this.domCanvas = this.el[0], 
        this.domCtx = this.domCanvas.getContext("2d"), this.el.css({
            position:"absolute"
        });
    },
    getReferenceEl:function() {
        return this.el;
    },
    addToDocument:function() {
        this.shouldAdd() && (paper.project.activeLayer.addChild(this), this._appendToCanvas(this.el));
    },
    shouldAdd:function() {
        return !0;
    },
    __draw:function(t, e) {
        if (!e || !e.renderModel || e.renderModel.includes(this)) {
            if (e && e.selection || !this.domCanvas || "helper" == t.canvas.className || e.useSingleLayer) i = this._draw(t, e); else if (e.layer == Draw.LAYER_ALL || e.renderModel && e.renderModel.includesItem(this)) {
                var i, n = this.getDrawableBounds(), o = parseInt(n.x), r = parseInt(n.y), s = Math.round(n.width), a = Math.round(n.height);
                this.domCanvas.width != s && (this.domCanvas.width = s), this.domCanvas.height != a && (this.domCanvas.height = a), 
                this.el.css({
                    top:r,
                    left:o
                }), this.domCtx.save(), this.domCtx.translate(-o, -r), this.domCtx.clearRect(o, r, s, a), 
                i = this._draw(this.domCtx, e), this.domCtx.restore();
            }
            return this.clearDrawableBounds(), i;
        }
    }
}, Draw.DrawableBoundsMixin = function() {}, Draw.DrawableBoundsMixin.prototype = {
    initializeDrawable:function() {
        this._drawableBounds = new Draw.RenderModel(), this._drawableBounds.THRESHOLD = 0;
    },
    cacheCurrentDrawableBounds:function() {
        this._initializing || (this._drawableBounds.add(this.getDrawableBounds()), this._currentBoundsHaveBeenAdded = !1);
    },
    resetBoundsCache:function() {
        this._initializing || this.cacheCurrentDrawableBounds(), this._bounds = null;
    },
    clearDrawableBounds:function() {
        this._currentBoundsHaveBeenAdded = !1, this._drawableBounds.clear();
    },
    _getDrawableBounds:function() {
        return this._currentBoundsHaveBeenAdded || (this._drawableBounds.add(this.getBounds()), 
        this._currentBoundsHaveBeenAdded = !0), this._drawableBounds.getRectangle();
    }
}, Draw.DrawableBoundsMixin.mixinTo = function(t) {
    _.extend(t.prototype, Draw.DrawableBoundsMixin.prototype);
}, Draw.DrawableObjectMixin = function() {}, Draw.DrawableObjectMixin.prototype = _.extend({}, Draw.DrawableBoundsMixin.prototype, Draw.MovableObjectMixin.prototype, {
    initializeDrawable:function() {
        Draw.DrawableBoundsMixin.prototype.initializeDrawable.call(this), _.bindAll(this, "cacheGradientAnchor", "transformColors", "transformColorsOnBounds"), 
        this.bind("change:fill_color", this.cacheGradientAnchor), this.bind("change:stroke_color", this.cacheGradientAnchor);
    },
    _normalizeColor:function(t, e, i) {
        if (i = i || {}, e instanceof paper.Gradient && t instanceof paper.GradientColor) t.gradient.setStops(e.clone().stops, i.silent), 
        e = t; else if (e instanceof paper.Gradient) {
            var n = this.getBounds(), o = n.x + n.width / 2;
            e = new paper.GradientColor(e, [ o, n.y ], [ o, n.y + n.height ]);
        }
        return e;
    },
    _bindToColor:function(t, e, i) {
        if (!(t && e && (t == e || t._id && t._id == e._id))) {
            var n = "__ong_" + i, o = "__onpg_" + i;
            t && t instanceof paper.GradientColor && this[n] && (t.unbind("change", this[n]), 
            t.gradient.unbind("change", this[n]), t.unbind("prechange", this[o]), t.gradient.unbind("prechange", this[o])), 
            e && e instanceof paper.GradientColor && (this[n] = _.bind(this._onGradientChange, this, i), 
            e.bind("change", this[n]), e.gradient.bind("change", this[n]), this[o] = _.bind(this._onGradientPreChange, this, i), 
            e.bind("prechange", this[o]), e.gradient.bind("prechange", this[o]));
        }
    },
    _onGradientPreChange:function(t) {
        this._oldColors || (this._oldColors = {}), this._oldColors[t] = Draw.jsonify(this.get(t));
    },
    _onGradientChange:function(t, e, i, n) {
        old = {
            old:this._oldColors[t]
        };
        var o = _.extend({}, n, {
            changed:t,
            property_key:t,
            old:old.old
        });
        this.trigger("change:" + i, this._model, this.get(i), old), this.trigger("change", this._model, o, i, n), 
        this.cacheGradientAnchor();
    },
    cacheGradientAnchor:function() {
        var t = {};
        colors = [ "fill_color", "stroke_color" ];
        for (var e = 0; e < colors.length; e++) {
            var i = this.get(colors[e]);
            i instanceof paper.GradientColor && (t[colors[e]] = [ new paper.Point(i.getOrigin()), new paper.Point(i.getDestination()) ]);
        }
        ("fill_color" in t || "stroke_color" in t) && (t.bounds = this.getBounds(), t.bounds.width > 0 && t.bounds.height > 0 && (this._gradientAnchor = t));
    },
    transformColorsOnBounds:function() {
        this.transformColors(this.getBounds());
    },
    transformColors:function(t) {
        if (!(t instanceof paper.Matrix)) {
            if (!this._gradientAnchor) return;
            var e = t, i = this._gradientAnchor.bounds;
            t = paper.Matrix.getTranslateInstance(e.x - i.x, e.y - i.y), t.scale(e.width / i.width, e.height / i.height, i.topLeft);
            for (var n in this._gradientAnchor) {
                var o = this.get(n);
                o instanceof paper.GradientColor && (o.setOrigin(this._gradientAnchor[n][0], {
                    silent:!0
                }), o.setDestination(this._gradientAnchor[n][1], {
                    silent:!0
                }));
            }
        }
        if (!t.isIdentity()) {
            var r = this.getFillColor(), s = this.getStrokeColor();
            r && r.transform && r.transform(t, {
                childop:!0
            }), s && s.transform && s.transform(t, {
                childop:!0
            });
        }
    },
    getCurrentStyle:function() {
        var t = this.get();
        return t = _.withoutkeys(t, [ "position", "width", "height", "size", "closed", "content", "rotation", "html", "config", "css", "root" ]), 
        t.fill_color = Color.normalize(t.fill_color), t.stroke_color = Color.normalize(t.stroke_color), 
        t.fill_color instanceof paper.Gradient && (t.fill_color = t.fill_color.clone()), 
        t.stroke_color instanceof paper.Gradient && (t.stroke_color = t.stroke_color.clone()), 
        t;
    },
    cssString:function(t, e) {
        return t + ": " + e + ";";
    },
    cssProperties:function() {
        return [ "fill_color", "stroke_color", "size" ];
    },
    toCss:function() {
        for (var t = this.cssProperties(), e = {}, i = 0; i < t.length; i++) e = _.extend(e, this.propertyToCss(t[i]));
        return e;
    },
    propertyToCss:function(t, e) {
        return e || (e = this.get()), Draw.Export.CSS.propertyToCss(t, e);
    },
    setFillColor:function(t, e) {
        this.set("fill_color", t, e);
    },
    _setFillColor:function(t, e) {
        return existing = this.getFillColor(), t = this._normalizeColor(existing, t, e), 
        this._bindToColor(existing, t, "fill_color"), this._style.setFillColor(t), this.fillColor = this._style.getFillColor(), 
        t;
    },
    setStrokeColor:function(t, e) {
        this.set("stroke_color", t, e);
    },
    _setStrokeColor:function(t, e) {
        var i = this.getStrokeColor();
        return t = this._normalizeColor(i, t, e), this._bindToColor(i, t, "stroke_color"), 
        this._style.setStrokeColor(t), this.strokeColor = this._style.getStrokeColor(), 
        t;
    }
}), Draw.DrawableObjectMixin.mixinTo = function(t) {
    _.extend(t.prototype, Draw.DrawableObjectMixin.prototype);
}, function() {
    var t, e, i = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, n = {}.hasOwnProperty, o = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var o in e) n.call(e, o) && (t[o] = e[o]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.IntRectangle = function(e) {
        function n() {
            return this.initialize = i(this.initialize, this), t = n.__super__.constructor.apply(this, arguments);
        }
        return o(n, e), n.prototype.initialize = function() {
            return Draw.IntRectangle.__super__.initialize.apply(this, arguments), this.x = Math.round(this.x), 
            this.y = Math.round(this.y), this.width = Math.round(this.width), this.height = Math.round(this.height);
        }, n;
    }(paper.Rectangle), Draw.RotatedRectangle = function(t) {
        function n() {
            return this.initialize = i(this.initialize, this), e = n.__super__.constructor.apply(this, arguments);
        }
        return o(n, t), n.prototype.initialize = function(t, e, i) {
            return Draw.RotatedRectangle.__super__.initialize.call(this, t), this._angle = e, 
            this._angleCenter = i || t.center;
        }, n.prototype.getAngle = function() {
            return this._angle;
        }, n.prototype.getMatrix = function() {
            return this._matrix || (this._matrix = paper.Matrix.getRotateInstance(this.getAngle(), this._angleCenter.x, this._angleCenter.y)), 
            this._matrix;
        }, n;
    }(paper.Rectangle);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.Snapper = function() {
        function t(t) {
            this.fromJSON = e(this.fromJSON, this), this.toJSON = e(this.toJSON, this), this._difference = e(this._difference, this), 
            this.snap = e(this.snap, this), this.unscaledTolerance = Draw.GUIDE_TOLERANCE, this.id = _.uniqueId("grid-"), 
            this.initializeProperties(t || {});
        }
        return t.prototype.getTolerance = function(t) {
            return this.unscaledTolerance / (t || 1);
        }, t.prototype.snap = function(t) {
            return t;
        }, t.prototype._difference = function(t, e) {
            return Math.abs(t - e);
        }, t.prototype.toJSON = function() {
            var t;
            return t = _.extract(this.get(), this.supportedProperties()), Draw.toJSON(t);
        }, t.prototype.fromJSON = function(t) {
            return this.set(Draw.fromJSON(t));
        }, t;
    }(), Draw.Snapper.supportedProperties = function() {
        return [];
    }, Draw.PropertyMixin.mixinTo(Draw.Snapper), Draw.BaseGridSnapper = function(i) {
        function o() {
            return this.snap = e(this.snap, this), this._snapDim = e(this._snapDim, this), this._snapNumDistance = e(this._snapNumDistance, this), 
            this._snapNum = e(this._snapNum, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype._getGuides = function() {
            return [];
        }, o.prototype._snapNum = function(t, e, i) {
            var n, o, r;
            return r = this._snapNumDistance(t, e, i), o = r[0], n = r[1], o;
        }, o.prototype._snapNumDistance = function(t, e, i) {
            var n;
            return n = this._getGuides(t, e, i), this._snapDim(t, e, n, i);
        }, o.prototype._snapDim = function(t, e, i, n) {
            var o, r, s, a, l;
            return i.length ? (l = _.sortedIndex(i, e), 0 === l || l === i.length ? (l = Math.max(0, l - 1), 
            r = i[l]) :(s = r = i[l - 1], a = i[l], e - s > a - e && (r = a)), o = e - r, Math.abs(o) <= this.getTolerance(n) ? e = r :o = null, 
            [ e, o ]) :[ e, null ];
        }, o.prototype.snap = function(t, e, i) {
            var n, o, r, s, a, l, c, h, u, d, p, f, g, m, _, v, y, b, w;
            return this.getEnabled() ? t instanceof paper.Point ? new paper.Point(this._snapNum("x", t.x, e), this._snapNum("y", t.y, e)) :t instanceof paper.Rectangle ? (d = t.x, 
            f = t.y, a = function(t, e) {
                return i && i[e] ? t === i[e] :!i || i === t;
            }, a("begin", "x") && (m = this._snapNumDistance("x", t.x, e), d = m[0], p = m[1]), 
            a("center", "x") && (_ = this._snapNumDistance("x", t.center.x, e), n = _[0], o = _[1]), 
            a("end", "x") && (v = this._snapNumDistance("x", t.x + t.width, e), h = v[0], u = v[1]), 
            a("begin", "y") && (y = this._snapNumDistance("y", t.y, e), f = y[0], g = y[1]), 
            a("center", "y") && (b = this._snapNumDistance("y", t.center.y, e), r = b[0], s = b[1]), 
            a("end", "y") && (w = this._snapNumDistance("y", t.y + t.height, e), c = w[0], l = w[1]), 
            i ? (null != o && (d = t.x + n - t.center.x), null != s && (f = t.y + r - t.center.y), 
            null != u && (d = h - t.width), null != l && (f = c - t.height)) :((u && p && Math.abs(u) < Math.abs(p) || u) && (d = h - t.width), 
            (l && g && Math.abs(l) < Math.abs(g) || l) && (f = c - t.height)), new paper.Rectangle(d, f, t.width, t.height)) :t :t;
        }, o;
    }(Draw.Snapper);
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.GuidesSnapper = function(e) {
        function n(e) {
            this._getGuides = t(this._getGuides, this), this.replaceYGuide = t(this.replaceYGuide, this), 
            this.replaceXGuide = t(this.replaceXGuide, this), this.removeYGuide = t(this.removeYGuide, this), 
            this.removeXGuide = t(this.removeXGuide, this), this.addYGuide = t(this.addYGuide, this), 
            this.addXGuide = t(this.addXGuide, this), this._setYGuides = t(this._setYGuides, this), 
            this._setXGuides = t(this._setXGuides, this), this._replaceGuide = t(this._replaceGuide, this), 
            this._removeGuide = t(this._removeGuide, this), this._addGuide = t(this._addGuide, this), 
            this._setGuides = t(this._setGuides, this);
            var i;
            i = {
                x_guides:[],
                y_guides:[],
                enabled:!0,
                color:"#0ff",
                visible:!0
            }, n.__super__.constructor.call(this, _.extend({}, i, e));
        }
        return i(n, e), n.prototype._setGuides = function(t) {
            return t ? t.sort(function(t, e) {
                return t - e;
            }) :void 0;
        }, n.prototype._addGuide = function(t, e) {
            var i;
            return i = this.get(t + "_guides"), i.push(e), this.set(t + "_guides", i);
        }, n.prototype._removeGuide = function(t, e) {
            var i;
            return i = this.get(t + "_guides"), i = _.without(i, e), this.set(t + "_guides", i);
        }, n.prototype._replaceGuide = function(t, e, i) {
            var n;
            return n = this.get(t + "_guides"), n = _.without(n, e), n.push(i), this.set(t + "_guides", n);
        }, n.prototype._setXGuides = function(t) {
            return t = t || [], this._setGuides(t), t;
        }, n.prototype._setYGuides = function(t) {
            return t = t || [], this._setGuides(t), t;
        }, n.prototype.addXGuide = function(t) {
            return this._addGuide("x", t);
        }, n.prototype.addYGuide = function(t) {
            return this._addGuide("y", t);
        }, n.prototype.removeXGuide = function(t) {
            return this._removeGuide("x", t);
        }, n.prototype.removeYGuide = function(t) {
            return this._removeGuide("y", t);
        }, n.prototype.replaceXGuide = function(t, e) {
            return this._replaceGuide("x", t, e);
        }, n.prototype.replaceYGuide = function(t, e) {
            return this._replaceGuide("y", t, e);
        }, n.prototype._getGuides = function(t) {
            return this.get(t + "_guides");
        }, n;
    }(Draw.BaseGridSnapper), Draw.GuidesSnapper.supportedProperties = function() {
        return [ "x_guides", "y_guides", "enabled", "visible", "color" ];
    }, Draw.PropertyMixin.generateGettersSetters(Draw.GuidesSnapper);
}.call(this), function() {
    Draw.UndoCommand = function() {
        function t(t) {
            var e;
            e = {}, this.options = _.extend(e, t), this._handled = !1, this._undone = !1;
        }
        return t.prototype.toString = function() {
            return "Command";
        }, t.prototype.handle = function() {
            return this._handled = !0;
        }, t.prototype.isHandled = function() {
            return this._handled;
        }, t.prototype.unexecute = function() {
            return this;
        }, t.prototype.isCollapsable = function() {
            return !1;
        }, t.prototype.canCollapseWith = function() {
            return !1;
        }, t.prototype.setInitialState = function(t) {
            return this.options.object = t;
        }, t.prototype.setEndState = function() {}, t.prototype.undo = function() {
            return this._undone ? void 0 :(this.unexecute(), this._undone = !0);
        }, t.prototype.execute = function() {
            return this;
        }, t.prototype.redo = function() {
            return this._undone ? (this.execute(), this._undone = !1) :void 0;
        }, t;
    }();
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.GridBase = function(i) {
        function o() {
            return this.hitTest = e(this.hitTest, this), this.onEvent = e(this.onEvent, this), 
            this.onChangeVisible = e(this.onChangeVisible, this), this.hitTest = e(this.hitTest, this), 
            this.initialize = e(this.initialize, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.initialize = function(t) {
            return this._project = t.getProject(), this.document = t, this.toolLayer = this.getLayer(), 
            this.toolLayer.addChild(this), this.grid = this.getGrid(), this.setLocked(!0), o.__super__.initialize.call(this), 
            this.bindToGrid(), this.setVisible(this.grid.getVisible());
        }, o.prototype.getGrid = function() {}, o.prototype.getLayer = function() {
            return this.document.getToolLayer(!0);
        }, o.prototype.hitTest = function() {
            return null;
        }, o.prototype.drawVerticalGrid = function(t, e, i) {
            var n, o, r, s, a, l;
            for (r = this.document.getSize(), e.lineWidth = 1, a = 0, l = t.length; l > a; a++) o = t[a], 
            s = this._trans(new paper.Point(o, -1), i), n = this._trans(new paper.Point(o, r.height + 2), i), 
            e.moveTo(this._roundHalf(s.x + .5), s.y), e.lineTo(this._roundHalf(n.x + .5), n.y);
            return e.stroke();
        }, o.prototype.drawHorizontalGrid = function(t, e, i) {
            var n, o, r, s, a, l;
            for (s = this.document.getSize(), e.lineWidth = 1, a = 0, l = t.length; l > a; a++) n = t[a], 
            o = this._trans(new paper.Point(-1, n), i), r = this._trans(new paper.Point(s.width + 2, n), i), 
            e.moveTo(o.x, this._roundHalf(o.y + .5)), e.lineTo(r.x, this._roundHalf(r.y + .5));
            return e.stroke();
        }, o.prototype._roundHalf = function(t) {
            return Math.round(t - .5) + .5;
        }, o.prototype._trans = function(t, e) {
            return e.matrix ? e.matrix.transform(t) :t;
        }, o.prototype.bindToGrid = function() {
            return this.grid.bind("change:visible", this.onChangeVisible), this.grid.bind("change", this.onEvent), 
            this.document.bind("change:size", this.onEvent);
        }, o.prototype.onChangeVisible = function() {
            return this.setVisible(this.grid.getVisible());
        }, o.prototype.onEvent = function(t) {
            var e;
            e = t.changedAttributes(), e && e.length && "visible" === e[0];
        }, o.prototype.hitTest = function() {
            return null;
        }, o;
    }(paper.Group);
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.Guides = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        return i(n, e), n.prototype.getGrid = function() {
            return this.document.getGuides();
        }, n.prototype.draw = function(t, e) {
            var i;
            return (i = Color.normalize(this.getGrid().getColor())) ? (t.save(), t.beginPath(), 
            t.strokeStyle = i.getCanvasStyle(t), this.grid.getYGuides().length && this.drawHorizontalGrid(this.grid.getYGuides(), t, e), 
            this.grid.getXGuides().length && this.drawVerticalGrid(this.grid.getXGuides(), t, e), 
            t.restore()) :void 0;
        }, n;
    }(Draw.GridBase);
}.call(this), function() {
    Draw.Item = function() {
        function t() {}
        return t.prototype.getGroup = function() {
            return this.group ? this.group.getGroup() :this;
        }, t.hierarchyComparatorAsc = function(t, e) {
            return t.isAbove(e) ? 1 :-1;
        }, t.hierarchyComparatorDesc = function(t, e) {
            return t.isAbove(e) ? -1 :1;
        }, t.getGroups = function(t) {
            var e;
            return _.isArray(t) || (t = _.values(t)), _.uniq(function() {
                var i, n, o;
                for (o = [], i = 0, n = t.length; n > i; i++) e = t[i], o.push(e.getGroup());
                return o;
            }());
        }, t.sortAsc = function(t, e, i) {
            return this.sort(t, this.hierarchyComparatorAsc, e, i);
        }, t.sortDesc = function(t, e, i) {
            return this.sort(t, this.hierarchyComparatorDesc, e, i);
        }, t.sort = function(t, e, i, n) {
            var o, r, s, a, l, c, h, u;
            if (_.isArray(t) || (t = _.values(t)), t = _.compact(t), i) for (a = _.toArray(t), 
            l = 0, h = a.length; h > l; l++) if (s = a[l], s && s.canFlatten && s.canFlatten()) if (r = s.flattenVisible(n), 
            1 !== r.length || s.id !== r[0].id) {
                for (c = 0, u = r.length; u > c; c++) o = r[c], t.push(o);
                t = _.without(t, s);
            } else 0 === r.length && (t = _.without(t, s));
            return _.compact(t.sort(e || this.hierarchyComparatorDesc));
        }, t;
    }();
}.call(this), Draw.Path = paper.Path.extend({
    _module:"Path",
    TYPE:"Path",
    DEFAULTS:{
        stroke_cap:"round",
        stroke_align:"inner",
        fill_color:"black",
        stroke_color:null,
        stroke_width:1,
        rotation:0,
        is_locked:!1
    },
    initialize:function() {
        this._initializing = !0, this._project = paper.project, this.initDomElement(), this.base.apply(this, arguments), 
        this._selBounds = null, this.initializeProperties(this.DEFAULTS), this.initializeDrawable(), 
        this._syncBounds(), this.addToDocument(), this._initializing = !1;
    },
    _changed:function(t) {
        if ((t & paper.Change.GEOMETRY) == paper.Change.GEOMETRY && this._segments) {
            this._segmentBounds && this._drawableBounds.add(this._segmentBounds), this._segmentBounds = null;
            var e = {
                fromdraw:!0,
                frompaper:!0,
                fromsegment:(t & paper.Change.SEGMENT) == paper.Change.SEGMENT
            };
            this._syncBounds(e), this.change(e), this.cacheCurrentDrawableBounds();
        }
        this.base.apply(this, arguments);
    },
    _setPosition:function(t) {
        return this.resetBoundsCache && this.resetBoundsCache(), paper.Path.prototype.setPosition.call(this, t), 
        t;
    },
    _syncPosition:function() {
        bounds = this.getBounds(), this._model.set({
            position:bounds.topLeft
        }, {
            fromdraw:!0
        });
    },
    _syncBounds:function(t) {
        if (!this._segments || this._segments.length) {
            t = _.extend({
                fromdraw:!0
            }, t);
            var e = this.getBounds(), i = {
                size:new paper.Size(e.width, e.height),
                position:new paper.Point(e.x, e.y)
            };
            if (this._model) {
                var n = this._model.get("position"), o = this._model.get("size");
                o && e.width == o.width && e.height == o.height || this._model.set({
                    size:i.size
                }, t), n && e.x == n.x && e.y == n.y || this._model.set({
                    position:i.position
                }, t);
            }
        }
    },
    _createCloneObject:function() {
        return this._clone(new this.constructor(this.getSegments()));
    },
    clone:function() {
        var t = this._createCloneObject();
        return t._closed = this._closed, void 0 !== this._clockwise && (t._clockwise = this._clockwise), 
        this._cloneProperties(t), t;
    },
    equals:function(t) {
        return this.getId() && this.getId() == t.getId();
    },
    containsSegment:function(t) {
        return t.path && this.equals(t.path);
    },
    toJSON:function() {
        var t = this.base.apply(this);
        return t.t = "path", _.extend(t, {
            stroke_width:this.getStrokeWidth(),
            stroke:Color.NORMALIZE_JSON(this.getStrokeColor()),
            fill:Color.NORMALIZE_JSON(this.getFillColor()),
            close:this._closed,
            pos:this.getPosition().toJSON(),
            href:this.getHref(),
            is_locked:this.getIsLocked()
        }), t.segments = this.segmentsToJSON(), t;
    },
    segmentsToJSON:function() {
        for (var t = [], e = this.getSegments(), i = 0; i < e.length; i++) t.push(e[i].toJSON());
        return t;
    },
    _getOvalSegments:function(t, e) {
        return Draw.Path._getOvalSegments(t, e);
    },
    _getRectangleSegments:function(t, e) {
        return Draw.Path._getRectangleSegments(t, e);
    },
    drawSelection:function(t, e) {
        function i(t, i, n) {
            return t = paper.Item.transformPoint(t, e), t = new paper.Point(parseInt(t.x) + i, parseInt(t.y) + n);
        }
        var n = e, o = this._segments;
        if (this.project.getSelectionMode() == Draw.SELECTION_MODE_BOUNDS) {
            if (this.getRotation()) {
                var r = this.getDrawableBounds();
                t.beginPath(), t.rect(r.x, r.y, r.width, r.height), t.stroke();
            }
            this.getRotation() && (mtx = new paper.Matrix(), e && mtx.concatenate(e), mtx.concatenate(this.getRotationMatrix()), 
            e = mtx), this._removeSelBounds();
            var s = new Draw.IntRectangle(this.getRotatedBounds()), a = this._getRectangleSegments(s, !0);
            this._selBounds = a, this.drawHandles(t, a, e, !1, !1), this.drawHandles(t, o, n, !0, !0), 
            this.drawCenterHandles(t, s, e, !1, !1), this.getRotation() || (a[0]._point = i(a[0]._point, .5, -.5), 
            a[1]._point = i(a[1]._point, .5, .5), a[2]._point = i(a[2]._point, -.5, .5), a[3]._point = i(a[3]._point, -.5, -.5)), 
            t.beginPath(), this.drawSegments(t, a, !0, this.getRotation() ? e :void 0, void 0, void 0, !1), 
            t.stroke();
        } else t.stroke(), this.drawBezierHandles(t, o, e), this.drawHandles(t, o, e);
        this.drawBounds(t, e);
    },
    selectSegments:function() {
        for (var t = 0; t < this._segments.length; t++) this._segments[t].setSelected(!0);
    },
    deselectSegments:function() {
        for (var t = 0; t < this._segments.length; t++) this._segments[t].setSelected(!1);
    },
    getSelectedSegments:function() {
        for (var t = [], e = 0; e < this._segments.length; e++) this._segments[e].isSelected() && t.push(this._segments[e]);
        return t;
    },
    _removeSelBounds:function() {
        if (this._selBounds) for (var t = 0; t < this._selBounds.length; t++) this._selBounds[t].remove();
    },
    _setIsLocked:function(t) {
        return this.setLocked(t), t;
    },
    setStrokeWidth:function(t) {
        this.set("stroke_width", t);
    },
    _setStrokeWidth:function(t) {
        return this.strokeWidth = t, t;
    },
    _setStrokeCap:function(t) {
        return this.strokeCap = t, t;
    },
    _setStrokeAlign:function(t) {
        return this.strokeAlign = t, t;
    },
    _setSize:function(t) {
        var e = new paper.Rectangle(this.getBounds());
        return (e.width != t.width || e.height != t.height) && (e.width = t.width, e.height = t.height, 
        this.setRotatedBounds(e)), t;
    },
    _setClosed:function(t) {
        return paper.Path.prototype.setClosed.call(this, !!t), this.resetBoundsCache(), 
        this._syncBounds(), t;
    },
    setClosed:function(t) {
        this.set("closed", t);
    },
    _rotate:paper.Path.prototype.rotate,
    rotate:function(t) {
        return this.setRotation(t);
    },
    _setRotation:function(t) {
        var e = parseInt(this.getRotation());
        if (t = parseInt(t), isNaN(t)) return e;
        if (!isNaN(e)) {
            this.cacheCurrentDrawableBounds();
            var i = t - e, n = this.getBounds(), o = n.center;
            this._rotate(i, o), this._syncPosition();
        }
        return t;
    },
    getRotationMatrix:function() {
        return paper.Matrix.getRotateInstance(this.getRotation(), this.getBounds().center);
    },
    hitTest:function(t, e, i) {
        var n = this.getBounds;
        this.getBounds = this.getRotatedBounds;
        var o = this.getRotationMatrix();
        return i = i ? new paper.Matrix().concatenate(i).concatenate(o) :o, ret = this.base(t, e, i), 
        this.getBounds = n, ret;
    },
    getDrawableBounds:function(t) {
        t || (t = Draw.SELECTION_MODE_BOUNDS, this.project && this.project.getSelectionMode && (t = this.project.getSelectionMode()));
        var e = this.base;
        if (t == Draw.SELECTION_MODE_SEGMENTS && (e = this.getSegmentBounds), this._currentBoundsHaveBeenAdded != t) {
            var i = e.call(this);
            if (this.getRotation() && t == Draw.SELECTION_MODE_BOUNDS) {
                var n = this.getRotatedBounds().expand(2), o = this.getRotationMatrix();
                i = i.include(o.transform(n.topLeft)), i = i.include(o.transform(n.topRight)), i = i.include(o.transform(n.bottomLeft)), 
                i = i.include(o.transform(n.bottomRight));
            }
            this._drawableBounds.add(i), this._currentBoundsHaveBeenAdded = t;
        }
        return this._drawableBounds.getRectangle();
    },
    getRoughBounds:function() {
        return this.getDrawableBounds();
    },
    __getBounds:paper.Path.prototype.getBounds,
    getRotatedBounds:function() {
        return bounds = this.__getBounds(), rot = this.getRotation(), rot && (bounds = new Draw.IntRectangle(this.__getBounds(paper.Matrix.getRotateInstance(-rot, bounds.center.x, bounds.center.y)))), 
        new Draw.RotatedRectangle(bounds, rot || 0, bounds.center);
    },
    getSegmentBounds:function() {
        if (this._segmentBounds) return this._segmentBounds;
        if (!this._segments.length) return new paper.Rectangle(0, 0, 0, 0);
        this._bounds = null;
        for (var t = this.getBounds(), e = 0; e < this._segments.length; e++) {
            var i = this._segments[e], n = new paper.Rectangle(i.point, i.point.add(i.handleIn));
            n = n.include(i.point.add(i.handleOut)), t = t.unite(n);
        }
        return this._segmentBounds = t, t;
    },
    _add:function(t, e, i) {
        var n = this.base.call(this, t, e);
        return this._syncBounds(_.extend({
            fromsegment:!0
        }, i)), n;
    },
    removeSegments:function(t, e, i) {
        var n = this.base.call(this, t, e);
        return this.getSegments().length < 1 ? this.remove() :this._syncBounds(_.extend({
            fromsegment:!0
        }, i)), n;
    },
    setSelected:function(t) {
        t || this.deselectSegments(), this.base.apply(this, arguments);
    },
    remove:function() {
        this.el.remove(), this.base(), this._removeSelBounds(), this.trigger("removed", this);
    },
    translate:function(t, e) {
        (t.x || t.y) && (this.cacheCurrentDrawableBounds(), this.base(t, e), r = this.getBounds(), 
        this._model.set({
            position:new paper.Point(r.x, r.y)
        }, {
            fromdraw:!0,
            ignore:!0
        }));
    },
    _transform:function(t) {
        if (!t.isIdentity()) {
            for (var e = new Array(6), i = 0, n = this._segments.length; n > i; i++) this._segments[i]._transformCoordinates(t, e, !0);
            this.transformColors(t);
        }
    },
    transform:function(t, e) {
        this.cacheCurrentDrawableBounds();
        var i = this.base.apply(this, arguments), n = {};
        return e && e & paper.Item.CHILD_TRANSFORM_FLAG && (n.childop = !0), this._syncBounds(n), 
        i;
    },
    setRotatedBounds:function() {
        var t = this.getRotation();
        if (t) {
            this.cacheCurrentDrawableBounds();
            var e = (this.getBounds().center, this.getRotationMatrix()), i = e.createInverse();
            this._transform(i);
            var n = this.setBounds.apply(this, arguments);
            return this._transform(e), n;
        }
        return this.setBounds.apply(this, arguments);
    },
    setBounds:function(t, e) {
        this.cacheCurrentDrawableBounds();
        var i = this.base.call(this, t);
        return this._syncBounds(e), i;
    },
    getRotation:function() {
        return 0;
    },
    setRotation:function() {},
    supportedEffects:function() {
        return [ "box_shadow" ];
    }
}), Draw.Path.fromJSON = function(t, e) {
    for (var i = [], n = t.segments, o = 0; o < n.length; o++) s = paper.Segment.fromJSON(n[o]), 
    i.push(s);
    var r = new Draw.Path(i), s = r.getSegments();
    return r.set({
        stroke_width:t.stroke_width,
        stroke_color:Color.NORMALIZE_FROM_JSON(t.stroke),
        fill_color:Color.NORMALIZE_FROM_JSON(t.fill),
        closed:t.close,
        href:t.href,
        is_locked:t.is_locked
    }), r.childrenFromJSON(t, e), r;
}, Draw.Path.OVAL_SEGMENTS = [ new paper.Segment([ 0, .5 ], [ 0, Draw.KAPPA ], [ 0, -Draw.KAPPA ]), new paper.Segment([ .5, 0 ], [ -Draw.KAPPA, 0 ], [ Draw.KAPPA, 0 ]), new paper.Segment([ 1, .5 ], [ 0, -Draw.KAPPA ], [ 0, Draw.KAPPA ]), new paper.Segment([ .5, 1 ], [ Draw.KAPPA, 0 ], [ -Draw.KAPPA, 0 ]) ], 
Draw.Path._getRectangleSegments = function(t, e) {
    for (var i = [ "getBottomLeft", "getTopLeft", "getTopRight", "getBottomRight" ], n = new Array(4), o = 0; 4 > o; o++) n[o] = new paper.Segment(t[i[o]]()), 
    n[o]._selectionState = e ? 7 :0;
    return n;
}, Draw.Path._getOvalSegments = function(t, e) {
    for (var i = t.getTopLeft(), n = new paper.Size(t.width, t.height), o = new Array(4), r = 0; 4 > r; r++) {
        var s = Draw.Path.OVAL_SEGMENTS[r];
        o[r] = new paper.Segment(s._point.multiply(n).add(i), s._handleIn.multiply(n), s._handleOut.multiply(n)), 
        o[r]._selectionState = e ? 7 :0;
    }
    return o;
}, Draw.Path.supportedProperties = function() {
    return [ "fill_color", "stroke_cap", "stroke_color", "stroke_width", "position", "size", "stroke_align", "closed", "href", "is_locked" ];
}, mixin(Draw.Path, Draw.PropertyMixin), mixin(Draw.Path, Draw.LinkableObjectMixin), 
mixin(Draw.Path, Draw.DomCanvasMixin), mixin(Draw.Path, Draw.DrawableObjectMixin), 
mixin(Draw.Path, Draw.MovableDomObjectMixin), mixin(Draw.Path, Draw.Item), paper.Item.JSON_CLASSES.path = Draw.Path, 
Draw.InvisiblePath = paper.Path.extend({
    initialize:function() {
        this._project = paper.project, this.base.apply(this, arguments);
    }
}), function() {
    Draw.Dom = {
        _clearConfig:function(t, e) {
            var i, n, o;
            if (e && t) {
                o = [];
                for (i in e) n = e[i], i in t && null == t[i] ? (delete e[i], o.push(delete t[i])) :o.push(void 0);
                return o;
            }
        },
        baseOptions:function(t, e, i) {
            var n;
            return i = i || t, n = $.extend(!0, {
                store_config:!1,
                override:[],
                override_styles:!0,
                auto_width:!0,
                auto_height:!0,
                root:t,
                can_edit:!1,
                watch_size:!1,
                config:{
                    padding_top:i,
                    padding_right:i,
                    padding_bottom:i,
                    padding_left:i,
                    margin_top:i,
                    margin_right:i,
                    margin_bottom:i,
                    margin_left:i
                }
            }, e), e && this._clearConfig(e.config, n.config), n;
        },
        textOptions:function(t, e, i) {
            var n;
            return i = i || t, n = $.extend(!0, Draw.Dom.baseOptions(t, void 0, i), {
                can_edit:!0,
                watch_size:!1,
                config:{
                    text_shadow:i,
                    font_face:i,
                    font_weight:i,
                    font_size:i,
                    is_italic:i,
                    is_underlined:i,
                    alignment:i,
                    text_color:i,
                    line_height:i
                }
            }, e), e && this._clearConfig(e.config, n.config), n;
        },
        boxOptions:function(t, e, i) {
            var n;
            return i = i || t, n = $.extend(!0, Draw.Dom.baseOptions(t, void 0, i), {
                can_edit:!1,
                watch_size:!0,
                highlight_empty:!0,
                config:{
                    fill_color:i,
                    roundness:i,
                    background_image:i,
                    background_repeat:i,
                    background_position:i,
                    background_size:i,
                    box_shadow:i,
                    border:i
                }
            }, e), e && this._clearConfig(e.config, n.config), n;
        },
        textAndBoxOptions:function(t, e, i) {
            var n, o;
            return n = Draw.Dom.boxOptions(t, e, i), o = Draw.Dom.textOptions(t, e, i), $.extend(!0, n, o, e);
        }
    };
}.call(this), function() {
    Draw.Dom.Mixin || (Draw.Dom.Mixin = {});
}.call(this), function() {
    Draw.Dom.Mixin.ToHtmlString = function() {
        function t() {}
        var e;
        return e = {
            "float":"none",
            position:"absolute",
            opacity:"1",
            "font-style":"normal",
            "border-width":"initial",
            "border-color":"initial",
            "border-image":"none",
            "border-top":"initial none initial",
            "border-left":"initial none initial",
            "border-right":"initial none initial",
            "border-bottom":"initial none initial"
        }, t.prototype.toHtmlString = function() {
            var t, e;
            return this.syncCssToProperties(), t = this.el.clone(), e = this._scrubHtml(t).outerHtml(), 
            t.remove(), e;
        }, t.prototype._scrubHtml = function(t) {
            var e, i, n;
            return i = null, this.options.override_styles && (i = this.get("override")), this.syncProperties(i, {
                el:t,
                filter:!1,
                setStyleAttribute:!0
            }), n = this.el.attr("style"), e = _.extract(Import.CSS.cssToDict(n), [ "width", "height" ]), 
            e = _.extend(Import.CSS.cssToDict(t.attr("style")), e), e = this._scrubCss(e), t.attr("style", Draw.Export.CSS.stringifyCss(e, !0)), 
            this._removeUnnecessaryMarkup(t), this._unwrap(t), this._removeClasses(t), this._removeIds(t, !0), 
            t;
        }, t.prototype._scrubCss = function(t) {
            var i, n, o;
            n = {}, t && t["background-color"] && !t["background-image"] && (n["background-image"] = "none");
            for (i in t) o = t[i], "line-height" === i ? (n[i] = o, /^[0-9]+(\.[0-9]+)?$/.test((o + "").trim()) && (n[i] = Util.DataFormatters.decimal(parseFloat(o), 1))) :"top" === i || "left" === i || "position" === i && (o = "absolute") || "initial initial" === o || i.indexOf("-box-shadow") > -1 || e[i] === "" + o && o || o && (n[i] = o);
            return n;
        }, t.prototype._removeUnnecessaryMarkup = function(t) {
            var e, i, n, o, r, s;
            if (e = t.findAndSelf(".editable-element")[0]) {
                for (s = [], i = o = r = e.childNodes.length - 1; o >= 0; i = o += -1) if (n = e.childNodes[i], 
                "BR" === n.tagName) s.push($(n).remove()); else if (3 !== n.nodeType || n.textContent.trim()) break;
                return s;
            }
        }, t.prototype._removeClasses = function(t) {
            var e, i, n, o;
            if (this.options.removeClasses) for (o = this.options.removeClasses, i = 0, n = o.length; n > i; i++) e = o[i], 
            t.removeClass(e), t.find("." + e).removeClass(e);
            return t;
        }, t.prototype._removeIds = function(t, e) {
            var i, n, o, r, s, a;
            for (e && this.getDefaultElementId && t[0].id !== this.getDefaultElementId() || t.removeAttr("id"), 
            n = this._getChildIdSelector(), s = t.children(), a = [], o = 0, r = s.length; r > o; o++) i = s[o], 
            i = $(i), i.is(n) ? a.push(void 0) :a.push(this._removeIds(i, !1));
            return a;
        }, t.prototype._unwrap = function(t) {
            var e, i, n, o, r;
            if (e = this._getChildIdSelector(), this.options.unwrap) for (r = this.options.unwrap, 
            n = 0, o = r.length; o > n; n++) i = r[n], t.unwrapSelector(i, e);
            return t;
        }, t;
    }();
}.call(this), function() {
    var t, e, i, n = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, o = {}.hasOwnProperty, r = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var n in e) o.call(e, n) && (t[n] = e[n]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    }, s = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.DomElement = function(e) {
        function i() {
            return this._hasSelection = n(this._hasSelection, this), this._setBoxShadow = n(this._setBoxShadow, this), 
            this._setTextShadow = n(this._setTextShadow, this), this._fitSize = n(this._fitSize, this), 
            this._watchSizeIfGreater = n(this._watchSizeIfGreater, this), this._watchSize = n(this._watchSize, this), 
            this.onSetProperty = n(this.onSetProperty, this), this.onGradientChange = n(this.onGradientChange, this), 
            this.drawSelection = n(this.drawSelection, this), this.finishEditing = n(this.finishEditing, this), 
            t = i.__super__.constructor.apply(this, arguments);
        }
        var o, a;
        return r(i, e), mixin(i, Draw.Item), mixin(i, Draw.Dom.Mixin.ToHtmlString), i.prototype._module = "DomElement", 
        i.prototype.TYPE = "DomElement", i.prototype.KEY = "dom", i.URL_REGEX = new RegExp("url\\(([^)]+)\\)", "gi"), 
        i.SRC_URL_REGEX = new RegExp("src=['\"]([^'\"]+)['\"]", "gi"), i.BORDER_PREOPTY_REGEX = new RegExp("(border_)(top_|left_|right_|bottom_)(style|width|color)", "gi"), 
        i.prototype.MUTABLE_PROPS = [ "override", "html", "css", "position", "size", "is_locked", "snapped", "href", "auto_height", "auto_width" ], 
        i.prototype.SNAP_ONLY_PROPERTIES = [ "margin_top", "margin_right", "margin_bottom", "margin_left", "float" ], 
        i.prototype.SNAP_ONLY_CSS_PROPERTIES = [ "margin-top", "margin-right", "margin-bottom", "margin-left", "margin", "float" ], 
        i.prototype.CONFIG_PROPS = [ "name", "config", "root", "override_styles", "can_edit", "watch_size" ], 
        i.supportedProperties = function() {
            return this.prototype.CONFIG_PROPS.concat(this.prototype.MUTABLE_PROPS);
        }, o = [ "fill_color", "text_color", "stroke_color", "is_underlined", "is_italic", "text_shadow", "box_shadow", "border_top_left_radius", "border_top_right_radius", "border_bottom_left_radius", "border_bottom_right_radius", "margin_left", "margin_bottom", "margin_right", "margin_top" ], 
        mixin(i, Draw.PropertyMixin), mixin(i, Draw.LinkableObjectMixin), mixin(i, Draw.DrawableObjectMixin), 
        mixin(i, Draw.MovableDomObjectMixin), i.prototype.initialize = function(t, e) {
            var n, o, r, s;
            return r = {
                html:null,
                css:null,
                config:{},
                is_locked:!1,
                can_edit:!0,
                can_edit_auto_sizing:!0,
                editableClass:".editable-element",
                override:[],
                override_styles:!1,
                initialSync:!0,
                store_config:!0
            }, this._project = paper.project, this._initializing = !0, this.options = _.extend(r, e), 
            s = {
                quiet:!0,
                init:!0
            }, this.initializeDrawable(), this.bind("all", this.onSetProperty), i.__super__.initialize.call(this), 
            this.initializeProperties({
                html:this.options.html,
                css:this.options.css
            }), n = _.without(this.CONFIG_PROPS, "config").concat([ "override", "auto_width", "auto_height" ]), 
            o = _.extend({
                position:t
            }, _.extract(this.options, n)), this.set(o, s), this.set({
                config:this.options.config
            }, s), this.shouldAdd() && paper.project.activeLayer.addChild(this), this.bind("change", this.onGradientChange), 
            this.options.initialSync && (this.syncCssToProperties(null, s), this.fromJSON(this.options)), 
            this._children = [], this._initializing = !1;
        }, i.prototype.initDomElement = function(t) {
            return this.el = $($.parseHTML(t || this.getHtml())), this.initElementId(this.el), 
            this._ensureRootClass(this.el);
        }, i.prototype.initElementId = function(t) {
            return t[0].id = this.get("id") || this.getDefaultElementId();
        }, i.prototype.getDefaultElementId = function() {
            return "dom-elem-" + this.id;
        }, i.prototype.clone = function() {
            var t, e, i;
            return e = this.toJSON(), i = e.snapped, i && (e.snapped = !1), t = Draw[this.TYPE].fromJSON(e), 
            i && this.parent && this.parent.addChild(t), t;
        }, i.prototype.getName = function() {
            return this.get("name");
        }, i.prototype.setName = function(t, e) {
            return this.set("name", t, e);
        }, i.prototype.generateName = function() {
            return _.uniqueId("Element ");
        }, i.prototype.shouldAdd = function() {
            return this.options.addToActiveLayer !== !1;
        }, i.prototype.canEdit = function() {
            return this.get("can_edit");
        }, i.prototype.canEditAutoSizing = function() {
            return this.options.can_edit_auto_sizing;
        }, i.prototype.colAndRowToIndex = function(t) {
            return t;
        }, i.prototype.pointToIndex = function(t) {
            return t;
        }, i.prototype.insertText = function() {
            return 0;
        }, i.prototype.selectAll = function() {
            return this._editableEl && this._inTextMode ? this._editableEl.is("input, textarea") ? (this._editableEl.focus(), 
            this._editableEl.select()) :Draw.CKEditor.selectAll(this._editableEl) :void 0;
        }, i.prototype.setSelection = function() {}, i.prototype.getPropertyConfig = function(t) {
            return this.options.config[t];
        }, i.prototype.supportedProperties = function() {
            var t;
            return t = this.CONFIG_PROPS.concat(this.MUTABLE_PROPS), this.options.config && (t = t.concat(_.keys(this.options.config))), 
            "pull-center" === this.get("pull") && (t = _.without(t, "margin_left", "margin_right")), 
            t;
        }, i.prototype.mutableProperties = function() {
            return this.MUTABLE_PROPS.concat(_.keys(this.getConfig()));
        }, i.prototype.supportedEffects = function() {
            var t;
            return t = this.getConfig() || this.options.config, _.keys(_.extract(t, [ "box_shadow", "text_shadow" ]));
        }, i.prototype.cssProperties = function() {
            return _.keys(this.getConfig()).concat([ "size" ]);
        }, i.prototype.syncableProperties = function(t) {
            var e;
            return t || (t = _.without(this.cssProperties(), "html")), t = _.uniq(function() {
                var i, n, o;
                for (o = [], i = 0, n = t.length; n > i; i++) e = t[i], e && this.options.config && e in this.options.config && o.push(e);
                return o;
            }.call(this));
        }, i.prototype.customProperties = function() {
            var t, e, i, n;
            i = {}, n = this.options.config;
            for (e in n) t = n[e], this._isCustomProperty(t) && (i[e] = t.type);
            return i;
        }, i.prototype.copyableProperties = function() {
            return _.keys(this.getConfig()).concat(this.customProperties());
        }, i.createObject = function(t) {
            return new Draw[this.prototype.TYPE](t.position, t);
        }, i.upgradeJSON = function(t) {
            var e;
            return null != t.line_height && _.isNumber(t.line_height) && t.line_height >= 5 && (t.line_height = t.line_height + "px"), 
            null != t.font_face_size && (null == t.font_size && (t.font_size = t.font_face_size + "pt"), 
            delete t.font_face_size), null != t.roundness && (e = t.roundness + "px", t.border_top_left_radius = e, 
            t.border_top_right_radius = e, t.border_bottom_left_radius = e, t.border_bottom_right_radius = e), 
            null != t.stroke_width && null != t.stroke_color && null == t.border_top_width && (t.border_width = t.stroke_width, 
            t.border_color = t.stroke_color, t.border_style = "solid", t.border_top_width = t.stroke_width, 
            t.border_top_color = t.stroke_color, t.border_top_style = "solid", t.border_right_width = t.stroke_width, 
            t.border_right_color = t.stroke_color, t.border_right_style = "solid", t.border_left_width = t.stroke_width, 
            t.border_left_color = t.stroke_color, t.border_left_style = "solid", t.border_bottom_width = t.stroke_width, 
            t.border_bottom_color = t.stroke_color, t.border_bottom_style = "solid"), t;
        }, i.fromJSON = function(t, e) {
            var i, n;
            return null == e && (e = {}), n = Draw.fromJSON(t), n = Draw[this.prototype.TYPE].upgradeJSON(n), 
            n.initialSync = !1, n.addToActiveLayer = !1, i = Draw[this.prototype.TYPE].createObject(n), 
            pds(i, "created", i.id), i._initializing = !0, n.children && i.childrenFromJSON(n, _.extend({
                isRoot:!1
            }, e)), e.isRoot !== !1 && (i.fromJSON(n, e), paper.project.activeLayer.addChild(i)), 
            i._initializing = !1, i;
        }, i.prototype.upgradeJSON = function(t, e) {
            var i;
            return t.effects && (i = Draw.EffectCollection.fromJSON(t.effects).toCss(), this._triggerJSONUpgrade([ "effects" ], {
                od:t.effects
            }, e), delete t.effects, t.box_shadow = i["box-shadow"], t.text_shadow = i["text-shadow"], 
            (!this.options.override_styles || t.override && s.call(t.override, "box_shadow") >= 0) && this._triggerJSONUpgrade([ "box_shadow" ], {
                oi:t.box_shadow
            }, e), !this.options.override_styles || t.override && s.call(t.override, "text_shadow") >= 0) ? this._triggerJSONUpgrade([ "text_shadow" ], {
                oi:t.text_shadow
            }, e) :void 0;
        }, i.prototype.fromJSON = function(t, e) {
            var i, n, o, r, s, a, l, c, h, u, d, p;
            for (null == e && (e = {}), t = Draw.fromJSON(t), t = Draw[this.TYPE].upgradeJSON(t), 
            this.upgradeJSON(t, e), s = t.size, this._initializing = !0, i = _.keys(this.customProperties()), 
            r = _.difference(this.mutableProperties(), [ "size", "html" ].concat(i)), r = _.intersection(_.keys(t), r), 
            l = 0, u = i.length; u > l; l++) o = i[l], this.set(_.extract(t, [ o ]));
            for (c = 0, d = r.length; d > c; c++) o = r[c], this.set(_.extract(t, [ o ]), {
                init:!0,
                silent:!0
            });
            if (pds(this, "set props; syncing properties to css", this.id), a = r, this.options.override_styles && (a = t.override), 
            null == a && (a = this.syncableProperties(r)), this.syncProperties(a, {
                init:!0
            }), s ? this.set("size", s, {
                init:!0
            }) :this.set("size", new paper.Size(this.el.outerWidth(), this.el.outerHeight()), {
                init:!0
            }), t.children) for (n = h = 0, p = this.children.length; p >= 0 ? p > h :h > p; n = p >= 0 ? ++h :--h) this.children[n].fromJSON(t.children[n]);
            return this._initializing = !1, this;
        }, i.prototype.toJSON = function() {
            var t, e, i, n, o, r, a, l, c, h;
            t = this.get(), n = this.get("override"), r = _.difference(this.syncableProperties(), _.keys(this.customProperties()));
            for (i in t) a = t[i], void 0 === a && delete t[i], s.call(r, i) >= 0 && n && this.options.override_styles && s.call(n, i) < 0 && delete t[i];
            if (!this.options.store_config) for (h = this.CONFIG_PROPS, l = 0, c = h.length; c > l; l++) o = h[l], 
            o in t && delete t[o];
            return e = Draw.toJSON(_.extend({
                t:this.KEY
            }, t)), e.children = this.childrenToJSON(), e;
        }, i.prototype.getImages = function() {
            var t, e, i, n, o, r;
            for (i = [], this.get("background_image") && i.push(this.get("background_image")), 
            t = this.getCss(), r = Draw.DomElement.URL_REGEX, o = r.exec(t); o; ) n = Util.replaceAll(o[1], '"', ""), 
            n = Util.replaceAll(n, "'", ""), i.push(n), o = r.exec(t);
            for (e = this.getHtml(), r = Draw.DomElement.SRC_URL_REGEX, o = r.exec(e); o; ) i.push(o[1]), 
            o = r.exec(t);
            return i;
        }, i.prototype.getReferenceEl = function() {
            return this.inTextMode() ? this._pl :this.el;
        }, i.prototype.inTextMode = function() {
            return this._inTextMode;
        }, i.prototype.setRoundness = function(t, e) {
            return null != t ? (t += "px", this.set("border_top_left_radius", t, e), this.set("border_top_right_radius", t, e), 
            this.set("border_bottom_left_radius", t, e), this.set("border_bottom_right_radius", t, e)) :void 0;
        }, i.prototype.copyStylesFrom = function(t) {
            var e, i, n, o, r, s;
            if (t) {
                for (i = _.intersection(this.copyableProperties(), t.copyableProperties()), s = [], 
                o = 0, r = i.length; r > o; o++) e = i[o], n = t.get(e), n && n.clone && (n = n.clone()), 
                s.push(this.set(e, n));
                return s;
            }
        }, i.prototype.syncCss = function() {
            var t, e, i, n, o, r, s, a, l, c;
            for (e = this.getCss(), r = Import.CSS.split(e), t = this.el.wrap("<div/>").parent(), 
            e = [], l = 0, c = r.length; c > l; l++) o = r[l], n = o[0], a = o[1], i = t.find(n), 
            s = i.attr("style"), e = e.concat([ n, "{", s, "}\n" ]);
            return e = e.join(" "), this.setCss(e), this.el.unwrap();
        }, i.prototype.syncHtml = function() {
            var t;
            return t = this.extractHtml(), t !== this.getHtml() ? this.setHtml(t) :void 0;
        }, i.prototype.syncCssToProperties = function(t, e) {
            var i;
            return null == e && (e = {
                silent:!0
            }), t = this.syncableProperties(t), i = this._parseCss(), i = _.extract(i, t), pds(this, "Syncing properties from css", t, e, i), 
            e.syncing = !0, this.set(i, e);
        }, i.prototype.syncProperties = function(t, e) {
            var i, n, r, s, a, l, c, h, u, d;
            for (null == e && (e = {}), t || (t = _.without(this.cssProperties(), "html"), this.options.override_styles && (s = (this.get("override") || []).concat(_.keys(this.customProperties())), 
            t = _.intersection(t, s))), t = this.syncableProperties(t), r = {}, u = 0, d = t.length; d > u; u++) c = t[u], 
            i = this._normalizeConfigEntry(this.options.config[c]), a = i.node, this._isCustomProperty(i) ? this.onSetCustomProperty(c, this, this.get(c), e) :(r[a] || (r[a] = {
                node:this._findNode(a, e),
                css:{}
            }), l = this.propertyToCss(c), l = Draw.Export.CSS.normalizeForBrowser(l), _.extend(r[a].css, l));
            for (a in r) n = r[a], this._applyCssForProperty(n.node, n.css, e);
            return !this._initializing && e.watchSize !== !1 && (h = _.without.apply(null, [ t ].concat(o)), 
            _.size(r) > 0 && h.length) ? this._watchSize(t, e) :void 0;
        }, i.prototype.extractHtml = function(t) {
            var e;
            return t = this._extractHtml(t), e = t.outerHtml(), t.remove(), e;
        }, i.prototype.resetToBaseStyles = function() {
            var t, e;
            if (this.options.override_styles) return t = this._extractStyleAttributes(), this.syncCssToProperties(null, {
                silent:!1
            }), this._applyStyleAttributes(t), e = _.difference(this.syncableProperties(), _.keys(this.customProperties())), 
            this.syncProperties(e), this.set("override", [], {
                undoIgnore:!0
            });
        }, i.prototype.replaceImage = function(t, e) {
            return this.setHtml(Util.replaceAll(this.getHtml(), t, e)), this.getCss() && this.setCss(Util.replaceAll(this.getCss(), t, e)), 
            this.get("background_image") === t ? this.set("background_image", e) :void 0;
        }, i.prototype.findChildAtPoint = function(t, e, i) {
            var n, o, r, s, a, l, c;
            if (e = e || this.el, 0 === e.children().length && (i || e.text()) && (r = e.getCanvasOffset(), 
            s = new paper.Rectangle(r.x, r.y, e.outerWidth(), e.outerHeight()), s.contains(t))) return e;
            for (c = e.children(), a = 0, l = c.length; l > a; a++) if (n = c[a], o = this.findChildAtPoint(t, $(n))) return o;
            return null;
        }, i.prototype.setCursorPosition = function(t) {
            return pds(this, "setCursorPosition", t);
        }, i.prototype.beginEditing = function() {
            var t, e, i;
            if (!this.inTextMode() && this.canEdit()) return pds(this, "beginEditing", this.el), 
            t = $(".viewable-viewport .document").css({
                "z-index":110
            }), this._sizeTimeout = setInterval(this._watchSize, 100), document.onselectstart = null, 
            e = this._findEditableEl(), this._editableEl && this._editableEl[0] === e[0] || (this._setEditableEl(e), 
            this._beginEditingEditableEl()), this._inTextMode = !0, t.length && (i = t.find("iframe"), 
            i.length) ? setTimeout(function() {
                return i[0].contentWindow.focus();
            }, 10) :void 0;
        }, i.prototype.finishEditing = function() {
            return this.inTextMode() && this.canEdit() ? (pds(this, "finishEditing", this.el), 
            $(".viewable-viewport .document").css({
                "z-index":""
            }), window.focus(), this._finishEditingEditableEl(), this._unsetEditableEl(), clearInterval(this._sizeTimeout), 
            this._inTextMode = !1, document.onselectstart = function() {
                return !1;
            }, this.syncHtml()) :void 0;
        }, i.prototype.toggleUnderlined = function() {
            return this.set("is_underlined", !this.get("is_underlined"));
        }, i.prototype.toggleItalic = function() {
            return this.set("is_italic", !this.get("is_italic"));
        }, i.prototype.toggleBold = function() {
            var t, e;
            return e = this.get("font_weight"), t = parseInt(e), e = t ? 401 > t ? "bold" :"normal" :"normal" === e ? "bold" :"normal", 
            this.set("font_weight", e);
        }, i.prototype.splitBorders = function() {
            var t, e, i, n, o, r, s, a, l;
            o = [], l = this.BORDER_PROPERTIES;
            for (e in l) for (i = l[e], t = void 0, s = 0, a = i.length; a > s; s++) n = i[s], 
            r = this.get(n), null == t || _.isEqual(t, r) || o.push(e), null == t && (t = r);
            return o.length ? _.uniq(o) :null;
        }, i.prototype.BORDER_PROPERTIES = {
            border_width:[ "border_top_width", "border_bottom_width", "border_left_width", "border_right_width" ],
            border_style:[ "border_top_style", "border_bottom_style", "border_left_style", "border_right_style" ],
            border_color:[ "border_top_color", "border_bottom_color", "border_left_color", "border_right_color" ]
        }, i.prototype.get = function(t) {
            return "border_width" === t || "border_style" === t || "border_color" === t ? this._getMajority(this.BORDER_PROPERTIES[t]) :Draw.PropertyMixin.prototype.get.apply(this, arguments);
        }, i.prototype.setPreselected = function(t) {
            return (t = !!t) != !!this._preselected ? (this._preselected = t, this._project._updateSelection(this, "pre"), 
            this._changed(33)) :void 0;
        }, i.prototype.setSelected = function(t) {
            return (t = !!t) != !!this._selected ? (this._selected = t, this._project._updateSelection(this), 
            this._changed(33)) :void 0;
        }, i.prototype.drawSelection = function(t, e) {
            var i, n, o, r, s, a, l, c, h, u;
            for (l = this.project.getSelectionMode() === Draw.SELECTION_MODE_TEXT, this.drawBounds(t, e), 
            i = this.getBounds(), e = new paper.Matrix().concatenate(e), n = new paper.Point(i.bottomRight.x + 1, i.bottomRight.y + 1), 
            a = new Draw.IntRectangle(i.topLeft, n), o = this._getResizeHandlePoints(), h = 0, 
            u = o.length; u > h; h++) s = o[h], this.drawHandle(t, a[s], e, !1, !1);
            return c = paper.Item.transformPoint(i.topLeft, e), n = paper.Item.transformPoint(i.bottomRight, e), 
            a = new paper.Rectangle(c, n), r = function(t, e) {
                return e = e || .5, parseInt(t) + .5;
            }, t.beginPath(), t.strokeRect(r(a.x), r(a.y, -.5), parseInt(a.width), parseInt(a.height));
        }, i.prototype.draw = function(t, e) {
            return e && e.renderModel && !e.renderModel.includes(this) ? void 0 :(e.selection && (this._preselected || this._selected) && this.drawSelection(t, e.matrix), 
            this.clearDrawableBounds());
        }, i.prototype.canBeRemoved = function() {
            return !0;
        }, i.prototype.remove = function() {
            return this.resetBoundsCache(), this.el.remove(), i.__super__.remove.call(this), 
            this.trigger("removed", this);
        }, i.prototype.hitTest = function(t, e) {
            var n, o;
            return e = paper.HitResult.getOptions(t, e), o = i.__super__.hitTest.call(this, t, e), 
            o && o.item ? o :e.fill && (n = this.getBounds(), n && n._containsPoint(t)) ? new HitResult("fill", this, {
                point:t
            }) :null;
        }, i.prototype.translate = function(t, e, i) {
            var n, o, r, s, a, l;
            if (i = i || {}, i.domParent) return this._watchSize(), this._watchPosition(), void 0;
            if (t.x || t.y) {
                for (o = new paper.Matrix(), o = o.translate(t), this.setPosition(o.transform(this.getPosition())), 
                this.transformColorsOnBounds(), i.domParent = !0, a = this._children, l = [], r = 0, 
                s = a.length; s > r; r++) n = a[r], l.push(n.translate(t, e, i));
                return l;
            }
        }, i.prototype.transform = function(t, e, i) {
            var n, o, r, s, a, l, c, h;
            if (i = i || {}, i.domParent) return this._watchSize(), this._watchPosition(), void 0;
            for (i = i || {}, e && e & paper.Item.CHILD_TRANSFORM_FLAG && (i.childop = !0), 
            n = this.getBounds(), s = t.transform(n.topLeft), o = t.transform(n.bottomRight), 
            this.setBounds(new paper.Rectangle(s, o), i), i.domParent = !0, c = this._children, 
            h = [], a = 0, l = c.length; l > a; a++) r = c[a], h.push(r.transform(t, e, i));
            return h;
        }, i.prototype.getSize = function() {
            return this.get("size");
        }, i.prototype.setSize = function(t, e) {
            return this.set("size", t, e);
        }, i.prototype.setBounds = function(t, e) {
            return this.setPosition(t.topLeft, e), this.setSize(t.size, e), this.transformColorsOnBounds();
        }, i.prototype.getRoughBounds = function() {
            return this.getBounds();
        }, i.prototype.getBounds = function() {
            return this.get("snapped") ? (this._bounds = this._getBounds(), this._bounds) :(this._bounds || (this._bounds = new paper.Rectangle(this.getPosition(), this.getSize())), 
            this._bounds);
        }, i.prototype.getDrawableBounds = function() {
            return this.get("snapped") ? (this._drawableBounds.add(this.getBounds()), this._drawableBounds.getRectangle()) :this._getDrawableBounds();
        }, i.prototype.cacheCurrentDrawableBounds = function() {
            return this._initializing ? void 0 :(this._bounds && this._drawableBounds.add(this._bounds), 
            this._drawableBounds.add(this._getBounds()), this._currentBoundsHaveBeenAdded = !1);
        }, i.prototype.onGradientChange = function(t, e) {
            return e && "fill_color" === e.property_key ? this.onSetProperty("change:fill_color") :void 0;
        }, i.prototype.onSetProperty = function(t, e, i, n) {
            var o, r, s, a;
            return null == n && (n = {}), a = t.split(":"), s = a[0], r = a[1], r && r.indexOf("border") > -1 && (o = Draw.DomElement.BORDER_PREOPTY_REGEX.exec(r), 
            o && this.trigger("change:border_" + o[3], e, i, _.extend({
                property:r
            }, n))), !r || n.init || n.syncing || this.syncProperties([ r ], n), "snapped" !== r || n.init ? void 0 :(this.onSnapped(n), 
            this._watchPosition(), this._watchSize());
        }, i.prototype.onSetCustomProperty = function(t, e, i, n) {
            return this._callCustomPropertyFn("set", t, i, n);
        }, i.prototype.onSnapped = function() {
            var t;
            return this.resetBoundsCache(), t = this._getOverriddenSnapProperties(), this.syncProperties(t);
        }, i.prototype._triggerJSONUpgrade = function(t, e, i) {
            return i.document && i.document.triggerJSONUpgrade && i.path ? i.document.triggerJSONUpgrade(this, i.path.concat(t), e) :void 0;
        }, i.prototype._applyCss = function() {
            var t, e;
            return this.getCss() ? (e = Import.CSS.applyToNode(this.el, this.getCss(), {
                object:this,
                stripMargins:!0
            }), t = {
                bottom:"",
                right:"",
                "z-index":""
            }, this.get("snapped") || (t.position = "absolute", t.float = "none"), this.el.css(t), 
            e) :{};
        }, i.prototype._parseCss = function() {
            var t;
            return this.el.height(), t = {}, this.options.config && (t = Import.CSS.importProperties(this.el, this.options.config, {
                object:this,
                window:this._getWindow()
            })), t;
        }, i.prototype._normalizeConfigEntry = function(t) {
            var e;
            return this._isCustomProperty(t) ? t :e = _.isArray(t) ? {
                property:t[0],
                node:t[1]
            } :{
                node:t
            };
        }, i.prototype._extractStyleAttributes = function() {
            var t, e, i, n, o, r;
            o = {}, r = this.options.config;
            for (n in r) e = r[n], i = this._normalizeConfigEntry(e).node, i in o || (t = this._findNode(i), 
            o[i] = t.attr("style"), t.attr("style", ""));
            return o;
        }, i.prototype._applyStyleAttributes = function(t) {
            var e, i, n;
            n = [];
            for (e in t) i = t[e], n.push(this._findNode(e).attr("style", i));
            return n;
        }, i.prototype._upgradeConfig = function(t) {
            var e;
            return null == t && (t = {}), t.roundness && (t.border_top_left_radius = t.roundness, 
            t.border_top_right_radius = t.roundness, t.border_bottom_left_radius = t.roundness, 
            t.border_bottom_right_radius = t.roundness, delete t.roundness), t.stroke_color && (t.border = t.stroke_color, 
            delete t.stroke_color, t.stroke_width && delete t.stroke_width), t.font_face_size && (t.font_size = t.font_face_size, 
            delete t.font_face_size), t.border && (e = t.border, _.extend(t, {
                border_color:e,
                border_style:e,
                border_width:e,
                border_top_color:e,
                border_top_style:e,
                border_top_width:e,
                border_right_color:e,
                border_right_style:e,
                border_right_width:e,
                border_bottom_color:e,
                border_bottom_style:e,
                border_bottom_width:e,
                border_left_color:e,
                border_left_style:e,
                border_left_width:e
            }), delete t.border), this.options.root && !t.id && (t.id = {
                node:this.options.root,
                type:"custom_string_id"
            }), this.options.root && !t.classes && (t.classes = {
                node:this.options.root,
                type:"custom_string_class",
                base_classes:this.options.root.replace(".", "")
            }), t;
        }, i.prototype._setConfig = function(t, e) {
            return t = this._upgradeConfig(t), this.options.config = t, this._applyCss(), this.set(this._initCustomProperties(e), e), 
            t;
        }, i.prototype._setHtml = function(t, e) {
            var i, n, o, r, s, a, l, c;
            if (t = t || "<div/>", t = this._sanitizeHtml(t), i = this.el, this.initDomElement(t), 
            this._initializing || this._applyCss(), i) i.replaceWith(this.el), s = this.getSize(), 
            this._setPosition(this.getPosition()), this._setSize(s), e.init || this.syncProperties(null, {
                init:!0,
                watchSize:!1
            }), this._setSize(s); else {
                if (pds(this, "initializing html", this.el), this.el.length > 1) {
                    for (r = $(this.el[0]), n = l = 1, c = this.el.length; c >= 1 ? c > l :l > c; n = c >= 1 ? ++l :--l) a = $(this.el[n]).text().trim(), 
                    a && r.append(" " + a + " ");
                    this.el = r, o = r[0].id, r.removeAttr("id"), t = r.outerHtml(), r[0].id = o;
                }
                this._appendToCanvas(this.el);
            }
            return this._setHref(this.getHref()), t;
        }, i.prototype._extractHtml = function(t) {
            var e, i, n, o, r, s, a;
            t = t || this.el, t.find("textarea").each(function() {
                var t;
                return t = $(this), t.html(t.val());
            }), t.is("textarea") && t.html(t.val()), t = t.clone(), r = function(t) {
                var e, i, n, o, s;
                for (t.parents(".editable-element").length || t.removeAttr("style"), o = t.children(), 
                s = [], i = 0, n = o.length; n > i; i++) e = o[i], s.push(r($(e)));
                return s;
            }, r(t), a = this.customProperties();
            for (o in a) s = a[o], e = this.get(o), "custom_class" !== s && "custom_string_class" !== s || !e || (i = this._normalizeConfigEntry(this.options.config[o]), 
            n = this._findNode(i.node, {
                el:t
            }), n.removeClass(e));
            return t;
        }, i.prototype._sanitizeHtml = function(t) {
            var e, i;
            return i = function(t) {
                return t.toLowerCase().indexOf("javascript:") > -1 ? "#" :t;
            }, e = function(t) {
                return t;
            }, window.html_sanitize ? html_sanitize(t, i, e) :t;
        }, i.prototype._setCss = function(t) {
            return this._sanitizeCss(t), t;
        }, i.prototype._sanitizeCss = function(t) {
            var e, i;
            return i = function(t) {
                return t;
            }, e = "removethisprefix-123456789", window.sanitizeStylesheet ? sanitizeStylesheet(t, e, i).replace(/(\.|-)removethisprefix-123456789 ?/g, "") :t;
        }, i.prototype._getOverriddenSnapProperties = function() {
            var t;
            return t = this.SNAP_ONLY_PROPERTIES, this.options.override_styles && this.get("override") && (t = _.intersection(this.get("override"), this.SNAP_ONLY_PROPERTIES)), 
            t;
        }, i.prototype._setAutoSizing = function(t, e, i) {
            var n;
            return this.get("snapped") && t && !i.init && (n = {}, n[e] = "", this.el.css(n), 
            this._watchSize()), !!t;
        }, i.prototype._setAutoHeight = function(t, e) {
            return this._setAutoSizing(t, "height", e);
        }, i.prototype._setAutoWidth = function(t, e) {
            return this._setAutoSizing(t, "width", e);
        }, i.prototype._setSnapped = function(t) {
            return this._syncSizeToCss(null, {
                snapped:t
            }), this._syncPositionToCss(null, {
                snapped:t
            }), t;
        }, i.prototype._applyCssForProperty = function(t, e, i) {
            var n, o, r, s, a, l;
            if (null == i && (i = {}), r = function(e) {
                return t.find(e).each(function() {
                    return $(this).replaceWith(this.childNodes);
                });
            }, !this.get("snapped")) for (l = this.SNAP_ONLY_CSS_PROPERTIES, s = 0, a = l.length; a > s; s++) o = l[s], 
            o in e && (e[o] = "");
            return e["font-style"] && !t.is("input, textarea, img, select") ? i.init || r("i, em") :e["text-decotation"] && !t.is("input, textarea, img, select") ? i.init || r("u") :e["font-weight"] && !t.is("input, textarea, img, select") && (i.init || r("b, strong")), 
            i.filter !== !1 && (n = this._filterOnlyOverriddenCss(t, e), this._syncOverriddenProperties(e, n), 
            e = n), i.setStyleAttribute ? t.attr("style", Draw.Export.CSS.stringifyCss(e)) :t.css(e);
        }, i.prototype._filterOnlyOverriddenCss = function(t, e) {
            var i, n, o, r, s, a, l, c, h, u;
            if (!this.options.override_styles) return e;
            l = {
                "background-image":[ "background" ]
            }, c = {};
            for (n in e) u = e[n], c[n] = "";
            t.css(c), t.height(), i = Import.CSS.getComputedStyle(t, _.keys(e), {
                object:this,
                window:this._getWindow()
            }), h = {};
            for (o in l) a = l[o], o in i && (r = [ o ].concat(a), s = _.extract(e, r), _.isEqual(_.extract(i, r), s) || _.extend(h, s));
            for (n in e) u = e[n], n in l || u !== i[n] && (h[n] = u);
            return h;
        }, i.prototype._syncOverriddenProperties = function(t, e) {
            var i, n, o;
            if (this.options.override_styles) return o = this.get("override") || [], i = Draw.Export.CSS.propertyNamesFromCssProperty(_.keys(t)), 
            n = Draw.Export.CSS.propertyNamesFromCssProperty(_.keys(e)), o = _.difference(o, i), 
            o = _.union(o, n), this.set("override", o, {
                undoIgnore:!0
            });
        }, i.prototype._findNode = function(t, e) {
            var i;
            return null == e && (e = {}), t = t.replace(this.options.root, "").trim(), i = e.el || this.el, 
            t.length && (i = i.find(t)), i;
        }, i.prototype._ensureRootClass = function(t) {
            var e;
            if (this.options.root) return t.is(this.options.root) ? void 0 :(e = this.options.root.replace(".", ""), 
            t.addClass(e));
        }, i.prototype._getChildIdSelector = function() {
            var t, e, i, n, o, r;
            for (i = [], r = this.children, n = 0, o = r.length; o > n; n++) t = r[n], e = t.el[0].id, 
            e && i.push("#" + e);
            return i.join(", ");
        }, i.prototype._isCustomProperty = function(t) {
            return !(!t || !t.type);
        }, i.prototype._initCustomProperties = function(t) {
            var e, i, n, o, r;
            i = {}, r = this.options.config;
            for (n in r) e = r[n], this._isCustomProperty(e) && (o = this._callCustomPropertyFn("init", n, null, t), 
            void 0 !== o && (i[n] = o));
            return i;
        }, i.prototype._callCustomPropertyFn = function(t, e, i, n) {
            var o, r, s;
            return null == n && (n = {}), o = this.getPropertyConfig(e), r = this._findNode(o.node), 
            s = "_" + _.camelize(t + "_" + o.type), this[s] && r && o ? this[s](r, e, o, i, n) :void 0;
        }, i.prototype._getTagName = function(t) {
            return t[0].tagName.toLowerCase();
        }, i.prototype._initTagName = function(t, e, i) {
            return this._getTagName(t, e, i);
        }, i.prototype._setTagName = function(t, e, i, n, o) {
            var r, s, a, l, c, h, u, d, p;
            for (null == o && (o = {}), s = !1, p = i.options, u = 0, d = p.length; d > u; u++) c = p[u], 
            n === c[0] && (s = !0);
            if (s && this._getTagName(t, e, i) !== n) {
                if (r = this.inTextMode(), r && this.finishEditing(), l = $(this.getHtml()), a = $("<" + n + "/>").append(l.html()), 
                a[0].className = l[0].className, this.setHtml(a.outerHtml()), this._initializing || o.init || this.syncCssToProperties(null, {
                    silent:!1,
                    undoIgnore:!0
                }), r) return this.beginEditing();
            } else if (!s) return h = {}, h[e] = this._getTagName(t, e, i), this._model.set(h, {
                undoIgnore:!0,
                silent:!0
            });
        }, i.prototype._initCustomClass = function(t, e, i, n, o) {
            var r, s, a, l, c;
            if (r = this.options[e] || "", !r) for (c = i.options, a = 0, l = c.length; l > a; a++) s = c[a], 
            s[0] && t.hasClass(s[0]) && (r = s[0]);
            return this._setCustomClass(t, e, i, r, o), r;
        }, i.prototype._setCustomClass = function(t, e, i, n, o) {
            var r, s, a, l, c, h;
            for (null == o && (o = {}), r = !1, h = i.options, l = 0, c = h.length; c > l; l++) a = h[l], 
            s = a[0], s && (s === n ? t.hasClass(s) || (r = !!t.addClass(n)) :s && t.hasClass(s) && (r = !!t.removeClass(s)));
            return !r || (this._fitSize(this.get("watch_size"), !1), this._initializing || o.init) ? void 0 :this.syncCssToProperties(null, {
                silent:!1,
                undoIgnore:!0
            });
        }, i.prototype._sanitizeCustomStringClass = function(t) {
            var e;
            return t ? (e = t.match(/[a-z_-]+[_a-z0-9-]*/gi), e ? e.join(" ") :"") :"";
        }, i.prototype._initCustomStringClass = function(t, e, i, n, o) {
            var r, s;
            return r = i.base_classes, r || (r = t[0].className), r || (r = ""), this["_customStringClassBase" + e] = r, 
            s = this._sanitizeCustomStringClass(this.options[e]), this._setCustomStringClass(t, e, i, s, o), 
            s;
        }, i.prototype._findPropertyForClass = function(t) {
            var e, i, n, o, r, s, a;
            if (n = this.customProperties(), t = t.toLowerCase()) {
                for (o in n) if (r = n[o], "custom_class" === r && (i = this.options.config[o].options)) for (s = 0, 
                a = i.length; a > s; s++) if (e = i[s], e[0] === t) return o;
                return null;
            }
        }, i.prototype._setCustomStringClass = function(t, e, i, n, o) {
            var r, s, a, l, c, h, u, d, p, f, g;
            for (null == o && (o = {}), d = this["_customStringClass" + e], r = this["_customStringClassBase" + e], 
            l = this._sanitizeCustomStringClass(n).split(" "), h = [], f = 0, g = l.length; g > f; f++) u = l[f], 
            p = this._findPropertyForClass(u), p ? this.set(p, u, o) :h.push(u);
            return h = h.join(" "), h !== n ? this.set(e, h, o) :(d && r && (c = [], l = d.split(" "), 
            c = function() {
                var t, e, i;
                for (i = [], t = 0, e = l.length; e > t; t++) a = l[t], r.indexOf(a.trim()) < 0 && i.push(a);
                return i;
            }(), d = c.join(" ")), s = !1, d && t.hasClass(d) && (s = !!t.removeClass(d)), n && !t.hasClass(n) && (s = !!t.addClass(n)), 
            this["_customStringClass" + e] = n, !s || d === n || this._initializing || o.init ? void 0 :this.syncCssToProperties(null, {
                silent:!1,
                undoIgnore:!0
            }));
        }, i.prototype._sanitizeId = function(t) {
            var e, i;
            return i = t.trim().match(/\w+/g), i ? function() {
                var t, n, o;
                for (o = [], t = 0, n = i.length; n > t; t++) e = i[t], e && o.push(e);
                return o;
            }().join("-") :"";
        }, i.prototype._initCustomStringId = function(t, e, i, n, o) {
            var r;
            return null == o && (o = {}), r = this._sanitizeId(this.options[e] || ""), r || (r = t[0].id), 
            r === this.getDefaultElementId() && (r = ""), r = this._setCustomStringId(t, e, i, r, o);
        }, i.prototype._setCustomStringId = function(t, e, i, n, o) {
            var r, s, a;
            return null == o && (o = {}), s = t[0].id, s === this.getDefaultElementId() && (s = ""), 
            n = n || "", a = this._sanitizeId(n), a !== n ? this.set(e, a, o) :s === n ? s :n && (r = this._incrementId(n), 
            r !== n) ? (this.set(e, r, o), r) :(n ? t[0].id = n :this.initElementId(t), this._initializing || o.init || this.syncCssToProperties(null, {
                silent:!1,
                undoIgnore:!0
            }), n);
        }, i.prototype._incrementId = function(t) {
            var e, i, n, o;
            if (e = this.el.parents("body"), !e.find("#" + t).length) return t;
            for (o = t.split("-"), n = parseInt(o[o.length - 1]), n ? t = o.slice(0, o.length - 1).join("-") :n = 1, 
            i = function() {
                return "" + t + "-" + n;
            }; ;) {
                if (!e.find("#" + i()).length) break;
                n++;
            }
            return i();
        }, i.prototype._initCustomProp = function(t, e, i, n, o) {
            var r, s, a, l, c;
            if (s = this.options[e] || "", !s) for (c = i.options, a = 0, l = c.length; l > a; a++) r = c[a], 
            null != r[0] && t.prop(i.prop) + "" == r[0] + "" && (s = r[0]);
            return this._setCustomProp(t, e, i, s, o), s;
        }, i.prototype._setCustomProp = function(t, e, i, n) {
            return t.prop(i.prop, this._stringToPrimitive(n));
        }, i.prototype._initCustomStringProp = function(t, e, i, n, o) {
            var r;
            return r = this.options[e] || "", r || (r = t.prop(i.prop) + ""), r = this._stripWindowLocation(t, r), 
            this._setCustomStringProp(t, e, i, r, o), r;
        }, i.prototype._setCustomStringProp = function(t, e, i, n, o) {
            return n = this._stripWindowLocation(t, n), this._setCustomProp(t, e, i, n, o);
        }, i.prototype._stripWindowLocation = function(t, e) {
            var i, n;
            return e ? (t = t[0], n = t.ownerDocument.defaultView || t.ownerDocument.parentWindow, 
            i = n.location + "", e.indexOf(i) > -1 ? e.replace(i, "") :e) :e;
        }, i.prototype._stringToPrimitive = function(t) {
            return "undefined" === t ? void 0 :"null" === t ? null :"true" === t ? !0 :"false" === t ? !1 :t;
        }, i.prototype._setSize = function(t, e) {
            var i, n, o;
            return null == e && (e = {}), n = this.getSize(), t ? (this._beforeStrokeSize = null, 
            this.resetBoundsCache(), this.get("snapped") ? n && (o = this.get("auto_width") ? n.width :t.width, 
            i = this.get("auto_height") ? n.height :t.height, t = new paper.Size(o, i)) :(n = n || new paper.Size(0, 0), 
            n && !_.isNumber(t.width) && (t.width = n.width), n && !_.isNumber(t.height) && (t.height = n.height)), 
            this._syncSizeToCss(t, e), t) :n;
        }, i.prototype._syncSizeToCss = function(t, e) {
            var i, n, o;
            return null == e && (e = {}), n = e.el || this.el, o = null != e.snapped ? e.snapped :this.get("snapped"), 
            (t = t || this.getSize()) ? o ? (i = {}, this.get("auto_width") && (i.width = ""), 
            this.get("auto_height") && (i.height = ""), n.css(i), this.get("auto_height") || (n.outerHeight(), 
            n.outerHeight(t.height)), this.get("auto_width") ? void 0 :(n.outerWidth(), n.outerWidth(t.width))) :(n.outerWidth(), 
            n.outerHeight(), n.outerWidth(t.width), n.outerHeight(t.height)) :void 0;
        }, i.prototype._setPosition = function(t, e) {
            return this.resetBoundsCache(), this._syncPositionToCss(t, e), t;
        }, i.prototype._syncPositionToCss = function(t, e) {
            var i, n;
            return null == e && (e = {}), i = e.el || this.el, n = null != e.snapped ? e.snapped :this.get("snapped"), 
            (t = t || this.getPosition()) ? n ? i.css({
                position:"",
                top:"",
                left:""
            }) :i.css({
                position:"absolute",
                top:t.y,
                left:t.x
            }) :void 0;
        }, i.prototype._setPull = function(t) {
            var e;
            return this.resetBoundsCache(), "pull-center" === t && (e = this._normalizeConfigEntry(this.options.config.margin_left), 
            e && this._findNode(e.node).css({
                "margin-left":"",
                "margin-right":""
            })), t;
        }, i.prototype._setMargin = function(t) {
            return this.resetBoundsCache(), t;
        }, i.prototype._setBorderWidth = function(t, e) {
            return this.set("border_top_width", t, e), this.set("border_right_width", t, e), 
            this.set("border_bottom_width", t, e), this.set("border_left_width", t, e), void 0;
        }, i.prototype._setBorderStyle = function(t, e) {
            return this.set("border_top_style", t, e), this.set("border_right_style", t, e), 
            this.set("border_bottom_style", t, e), this.set("border_left_style", t, e), void 0;
        }, i.prototype._setBorderColor = function(t, e) {
            return this.set("border_top_color", t, e), this.set("border_right_color", t, e), 
            this.set("border_bottom_color", t, e), this.set("border_left_color", t, e), void 0;
        }, i.prototype._setBorderTopStyle = function(t) {
            return t || "solid";
        }, i.prototype._setBorderBottomStyle = function(t) {
            return t || "solid";
        }, i.prototype._setBorderLeftStyle = function(t) {
            return t || "solid";
        }, i.prototype._setBorderRightStyle = function(t) {
            return t || "solid";
        }, i.prototype._setMarginBottom = function(t, e) {
            return this._setMargin(t, e);
        }, i.prototype._setMarginTop = function(t, e) {
            return this._setMargin(t, e);
        }, i.prototype._setMarginLeft = function(t, e) {
            return this._setMargin(t, e);
        }, i.prototype._setMarginRight = function(t, e) {
            return this._setMargin(t, e);
        }, i.prototype._getMajority = function(t) {
            var e, i, n, o, r, s, a, l, c;
            for (n = [], s = 0, l = t.length; l > s; s++) {
                for (o = t[s], r = this.get(o), i = null, a = 0, c = n.length; c > a; a++) if (e = n[a], 
                _.isEqual(e[0], r)) {
                    i = e;
                    break;
                }
                if (i || (i = [], n.push(i)), i.push(r), i.length >= t.length / 2) return r;
            }
            return n.length ? n[0][0] :null;
        }, i.prototype._getBounds = function() {
            var t, e, i;
            return i = this.el.outerWidth(), t = this.el.outerHeight(), e = this.el.getCanvasOffset(), 
            new paper.Rectangle(e.x, e.y, i, t);
        }, i.prototype._watchSize = function(t, e) {
            var i, n;
            return null == e && (e = {}), (n = this.getSize()) ? (i = this._getBounds(), n.width !== i.width || n.height !== i.height ? (this.resetBoundsCache(), 
            this._model.set({
                size:new paper.Size(i.width, i.height)
            }, {
                undoIgnore:!0
            })) :void 0) :void 0;
        }, i.prototype._watchSizeIfGreater = function(t, e) {
            var i, n, o;
            return null == e && (e = {}), (n = this.getSize()) ? (i = this._getBounds(), o = new paper.Size(i.width > n.width ? i.width :n.width, i.height > n.height ? i.height :n.height), 
            o.width !== n.width || o.height !== n.height ? this.setSize(o, {
                undoIgnore:!0
            }) :void 0) :void 0;
        }, i.prototype._fitSize = function(t, e) {
            var i;
            if (t) return _.isString(t) ? (i = {}, i[t] = "") :i = {
                width:"",
                height:""
            }, this.el.css(i), e ? this._watchSizeIfGreater() :this._watchSize(), this._syncSizeToCss();
        }, i.prototype._watchPosition = function() {
            var t;
            return this.get("snapped") ? (this.resetBoundsCache(), t = this._getBounds(), this._model.set({
                position:t.topLeft
            }, {
                undoIgnore:!0
            })) :void 0;
        }, i.prototype._setIsLocked = function(t) {
            return this.setLocked(!!t), t;
        }, i.prototype._setTextShadow = function(t) {
            return t;
        }, i.prototype._setBoxShadow = function(t) {
            return t;
        }, i.prototype._hasSelection = function() {
            var t, e, i;
            return e = "input, textarea, img, select", i = Selection.getStart(this._getWindow()), 
            t = Selection.getEnd(this._getWindow()), i && t ? i[0] === t[0] && i[1] === t[1] && 0 === i[1] ? !1 :$(i[0]).is(e) || $(t[0]).is(e) ? !1 :!0 :!1;
        }, a = /px|em|pt$/i, i.prototype._setFontSize = function(t, e) {
            return null == e && (e = {}), _.isNumber(t) || (t = (t || "").trim()), a.test(t) || (t = parseInt(t) || 14, 
            t += "px"), t;
        }, i.prototype._getResizeHandlePoints = function() {
            var t;
            return this.textMode ? [] :(t = [], this.get("snapped") ? (this.get("auto_width") || (t = t.concat([ "leftCenter", "rightCenter" ])), 
            this.get("auto_height") || (t = t.concat([ "topCenter", "bottomCenter" ])), 4 === t.length && (t = t.concat([ "bottomLeft", "topLeft", "topRight", "bottomRight" ]))) :t = [ "bottomLeft", "topLeft", "topRight", "bottomRight", "topCenter", "rightCenter", "bottomCenter", "leftCenter" ], 
            t);
        }, i.prototype._isEventInElement = function(t) {
            var e, i;
            return i = $(t.target), e = "#" + this.el[0].id, i.is(e) || i.parents(e).length ? !0 :!1;
        }, i.prototype._getWindow = function() {
            return window.TESTING ? window.TESTING ? window :void 0 :this.el && this.el[0] ? this.el[0].ownerDocument.defaultView || this.el[0].ownerDocument.parentWindow :$(".viewable-viewport .dom-frame")[0].contentWindow;
        }, i.prototype._findEditableEl = function() {
            var t, e;
            return e = this._getChildIdSelector(), t = this.el.findAndSelf(this.options.editableClass, e), 
            t.length || (t = this.el), t;
        }, i.prototype._setEditableEl = function(t) {
            return this._unsetEditableEl(), pds(this, "setting contenteditable on", t), this._editableEl = t, 
            this._editableEl.css({
                outline:"none"
            });
        }, i.prototype._beginEditingEditableEl = function() {
            var t, e;
            if (this._editableEl) return this.el.addClass("editing-element"), e = this._editableEl, 
            e.is("input, textarea") ? (e.focus(), e.select(), t = function() {
                return e.is("input") && e.attr("value", e.val()), e.is("textarea") && e.text(e.val()), 
                e.off("change", t);
            }, e.on("change", t)) :Draw.CKEditor.enable(e);
        }, i.prototype._finishEditingEditableEl = function() {
            var t;
            if (this._editableEl) return this.el.removeClass("editing-element"), t = this._editableEl, 
            t.is("input, textarea") ? void 0 :Draw.CKEditor.disable(this._editableEl);
        }, i.prototype._unsetEditableEl = function() {
            return this._editableEl ? (Selection.clearSelection(this._getWindow()), this._editableEl.css({
                outline:""
            }), this._editableEl = null) :void 0;
        }, i;
    }(paper.Item), Draw.DomObject = function(t) {
        function i() {
            return this._watchSize = n(this._watchSize, this), e = i.__super__.constructor.apply(this, arguments);
        }
        return r(i, t), i.prototype._module = "DomObject", i.prototype.TYPE = "DomObject", 
        i.prototype.KEY = "dobj", i.prototype.className = "dom-obj", i.prototype.OPTIONS = {}, 
        i.prototype.initialize = function(t, e) {
            return i.__super__.initialize.call(this, t, this._getOptions(e));
        }, i.prototype._getHtml = function() {
            return '<div class="' + this.className + '"></div>';
        }, i.prototype._getCss = function() {
            return "";
        }, i.prototype._getConfig = function() {
            return {};
        }, i.prototype._getOptions = function(t) {
            var e;
            return t = t || {}, e = "." + this.className, _.extend({
                root:e,
                config:t.config || this._getConfig(),
                html:t.html || this._getHtml(),
                css:t.css || this._getCss()
            }, this.OPTIONS, t);
        }, i.prototype.SIZE_AFFECTING_PROPERTIES = Draw.DomElement.prototype.BORDER_PROPERTIES.border_width.concat(Draw.DomElement.prototype.BORDER_PROPERTIES.border_color), 
        i.prototype._watchSize = function(t, e) {
            var n;
            return null == e && (e = {}), i.__super__._watchSize.call(this, t, e), n = !1, t && (n = _.intersection(t, this.SIZE_AFFECTING_PROPERTIES).length), 
            this._beforeStrokeSize && n ? (this.setSize(this._beforeStrokeSize), this._beforeStrokeSize = null) :void 0;
        }, i.prototype._setBorderTopWidth = function(t) {
            return this._setBeforeStrokeSizeForWidthChange(t);
        }, i.prototype._setBorderBottomWidth = function(t) {
            return this._setBeforeStrokeSizeForWidthChange(t);
        }, i.prototype._setBorderRightWidth = function(t) {
            return this._setBeforeStrokeSizeForWidthChange(t);
        }, i.prototype._setBorderLeftWidth = function(t) {
            return this._setBeforeStrokeSizeForWidthChange(t);
        }, i.prototype._setBorderTopColor = function(t) {
            return this._setBeforeStrokeSizeForColorChange(t, "border_top_color");
        }, i.prototype._setBorderBottomColor = function(t) {
            return this._setBeforeStrokeSizeForColorChange(t, "border_bottom_color");
        }, i.prototype._setBorderLeftColor = function(t) {
            return this._setBeforeStrokeSizeForColorChange(t, "border_left_color");
        }, i.prototype._setBorderRightColor = function(t) {
            return this._setBeforeStrokeSizeForColorChange(t, "border_right_color");
        }, i.prototype._setBeforeStrokeSizeForWidthChange = function(t) {
            return this._beforeStrokeSize = this.getSize(), t;
        }, i.prototype._setBeforeStrokeSizeForColorChange = function(t, e) {
            var i;
            return i = this.get(e), !!i != !!t && (this._beforeStrokeSize = this.getSize()), 
            t;
        }, i;
    }(Draw.DomElement), Draw.RectangleDomObject = function(t) {
        function e() {
            return i = e.__super__.constructor.apply(this, arguments);
        }
        return r(e, t), e.prototype._module = "DomObject", e.prototype.TYPE = "DomObject", 
        e.prototype.KEY = "dobj", e.prototype.className = "dom-obj", e.prototype.initialize = function(t, i) {
            return e.__super__.initialize.call(this, t.topLeft, _.extend({
                size:t.size
            }, i));
        }, e.createObject = function(t) {
            return new Draw[this.prototype.TYPE](new paper.Rectangle(t.position, t.size), t);
        }, e;
    }(Draw.DomObject), paper.Item.JSON_CLASSES.dom = Draw.DomElement;
}.call(this), function() {
    var t, e, i = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, n = {}.hasOwnProperty, o = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var o in e) n.call(e, o) && (t[o] = e[o]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.DomContainer = function(e) {
        function n() {
            return this.onChildsChildRemove = i(this.onChildsChildRemove, this), this.onChildsChildAdd = i(this.onChildsChildAdd, this), 
            t = n.__super__.constructor.apply(this, arguments);
        }
        return o(n, e), n.prototype._module = "DomContainer", n.prototype.className = "dom-container", 
        n.prototype.TYPE = "DomContainer", n.prototype.KEY = "dcont", n.prototype.HIGHLIGHT_CLASS = "container-highlight", 
        n.prototype.EMPTY_CLASS = "container-empty", n.prototype.CONFIG_PROPS = Draw.DomObject.prototype.CONFIG_PROPS.concat([ "accepts" ]), 
        n.prototype.findAll = function(t) {
            return t ? paper.Layer.prototype.findAll.call(this, t).concat([ this ]) :[ this ];
        }, n.prototype.canFlatten = function() {
            return !1;
        }, n.prototype.getImages = function() {
            var t, e, i, o, r;
            for (e = n.__super__.getImages.call(this), r = this._children, i = 0, o = r.length; o > i; i++) t = r[i], 
            e = e.concat(t.getImages());
            return e;
        }, n.prototype.findContainer = function(t) {
            var e, i, n, o, r;
            if (this.el) {
                for (i = null, r = this._getNormalizedAcceptanceOptions(), n = 0, o = r.length; o > n; n++) if (e = r[n], 
                t.is(e.accepts)) {
                    i = e;
                    break;
                }
                return i ? Draw.NodePlacement.findContainer(this.el, i.container) :null;
            }
        }, n.prototype.highlight = function(t, e) {
            var i;
            if (this.el && !this.getLocked()) return i = t ? this.findContainer(t.el) :this.el, 
            i ? i.addClass(e || this.HIGHLIGHT_CLASS) :void 0;
        }, n.prototype.unhighlight = function(t) {
            return this.el ? (t = t || this.HIGHLIGHT_CLASS, this.el.find("." + t).removeClass(t), 
            this.el.removeClass(t)) :void 0;
        }, n.prototype.highlightAsEmpty = function(t) {
            return t ? t.addClass(this.EMPTY_CLASS) :void 0;
        }, n.prototype.unhighlightAsEmpty = function(t) {
            return t ? t.removeClass(this.EMPTY_CLASS) :void 0;
        }, n.prototype.syncHtml = function() {
            return n.__super__.syncHtml.call(this), this._replacePlaceholders(), this._checkForEmpty();
        }, n.prototype.toHtmlString = function() {
            var t, e, i, n, o;
            for (this.removePlaceholder(), this.syncCssToProperties(), e = this.el.clone(), 
            this._scrubHtml(e), i = n = 0, o = this._children.length; o >= 0 ? o > n :n > o; i = o >= 0 ? ++n :--n) t = this._children[i], 
            e.find("#" + t.el[0].id).replaceWith(t.toHtmlString());
            return e.outerHtml();
        }, n.prototype.insertChild = function(t, e) {
            var i, o, r;
            return o = n.__super__.insertChild.call(this, t, e), t = this.findChildIndex(e), 
            this._replacePlaceholder(t, e) || (r = this._children[t + 1], t < this._children.length - 1 && r ? this._snapInChild(e, r.el, "before") :(i = this.findContainer(e.el), 
            i && i.length && this._snapInChild(e, i.eq(0), "append"))), e.bind("add:child", this.onChildsChildAdd), 
            e.bind("remove:child", this.onChildsChildRemove), this.trigger("add:child", e), 
            this._checkForEmpty(), o;
        }, n.prototype.onChildRemove = function(t) {
            return t.unbind("add:child", this.onChildsChildAdd), t.unbind("remove:child", this.onChildsChildRemove), 
            this.trigger("remove:child", t);
        }, n.prototype.onAfterChildRemove = function() {
            return this._syncHtmlPlaceholders();
        }, n.prototype.onChildsChildAdd = function(t) {
            return this.trigger("add:child", t), this._fitSize(this.get("watch_size"), !0);
        }, n.prototype.onChildsChildRemove = function(t) {
            return this.trigger("remove:child", t);
        }, n.prototype.findReferenceNode = function(t) {
            var e, i, n, o, r;
            for (n = this._getNormalizedAcceptanceOptions(), o = 0, r = n.length; r > o; o++) if (i = n[o], 
            e = Draw.NodePlacement.findNode(this, t, i), e[0]) return e;
            return Draw.NodePlacement.NULL;
        }, n.prototype.canAcceptObject = function(t) {
            var e, i, n, o, r;
            if (t.equals(this)) return !1;
            if (this.isDescendant(t)) return !1;
            for (e = !1, r = _.pluck(this._getNormalizedAcceptanceOptions(), "accepts"), n = 0, 
            o = r.length; o > n; n++) i = r[n], t.el.is(i) && (e = !0);
            return e;
        }, n.prototype.acceptsObject = function(t, e) {
            var i, n, o, r, s, a, l, c, h, u, d, p, f, g, m, _, v;
            if (t.equals(this)) return null;
            if (this.get("is_locked")) return null;
            if (l = this.getBounds(), n = e = e || t.getBounds(), s = Draw.NodePlacement.isInline(t.el), 
            (n.height > 50 || !s) && (n = paper.Rectangle.create(n.x, n.y, n.width, 10)), !l.intersects(e)) return this.removePlaceholder(), 
            null;
            if (pds(this, "within bounds of", this.id, this.TYPE), !this.canAcceptObject(t)) for (m = this.children, 
            d = 0, f = m.length; f > d; d++) if (o = m[d], u = o.acceptsObject(t, e)) return u;
            for (_ = this.children, p = 0, g = _.length; g > p; p++) if (o = _[p], pds(this, "checking child", o.id, o.TYPE), 
            o.getBounds().expand(-25).intersects(n) && (i = o.acceptsObject(t, e), pds(this, "checking child", o.id, o.TYPE), 
            i)) return i;
            return t instanceof Draw.DomElement && (c = this.createPlaceholder(t), v = this.findReferenceNode(t), 
            h = v[0], a = v[1], r = v[2], h) ? (pds(this, "I want it", this.id, a, r, h, c), 
            Draw.NodePlacement.placeNode(c, h, a), this.sizePlaceholder(c, n, h, r), this.showPlaceholder(), 
            pds(this, "do I have a _placeholder?", this.id, this._placeholder), this) :(this.removePlaceholder(), 
            null);
        }, n.prototype.acceptObject = function(t) {
            var e, i, n, o, r, s;
            return t.equals(this) ? null :this.get("is_locked") ? null :(i = this.getBounds(), 
            n = t.getBounds(), t instanceof Draw.DomElement && n.intersects(i) ? (s = Draw.NodePlacement.findReferenceNode(this._placeholder), 
            r = s[0], e = s[1], o = this._generateChildPlaceholder(this.children.length), Draw.NodePlacement.placeNode(o, r, e), 
            this._placeholder.remove(), this.unhighlight(), this.addChild(t), this._syncHtmlPlaceholders(), 
            t.syncCssToProperties(null, {
                silent:!1
            }), this._fitSize(this.get("watch_size"), !0), !0) :!1);
        }, n.prototype.releaseObject = function(t) {
            return t._parent.id !== this.id ? !1 :this.get("is_locked") ? !1 :(t._syncSizeToCss(t.getSize(), {
                snapped:!1
            }), t.insertAbove(this.findLastContainer()), t.set("snapped", !1), this._syncHtmlPlaceholders(), 
            t.syncCssToProperties(null, {
                silent:!1
            }), !0);
        }, n.prototype.findLastContainer = function() {
            return this.parent.findLastContainer ? this.parent.findLastContainer() :this;
        }, n.prototype.createPlaceholder = function(t) {
            var e;
            return e = Draw.NodePlacement.placeholder(t.el), this.el.append(e), e.hide();
        }, n.prototype.sizePlaceholder = function(t, e, i, n) {
            var o, r, s;
            return r = t.parent().width(), i && i.is("tr, th, td") ? (s = i, i.is("th, td") && (s = i.parent()), 
            t.outerHeight(s.height()), t.css({
                "min-width":"50px"
            })) :r < e.width ? (o = e.height / e.width * r, t.outerWidth(r), t.outerHeight(o)) :(t.outerWidth(e.width), 
            t.outerHeight(e.height)), t.css({
                padding:0,
                margin:0,
                display:n
            });
        }, n.prototype.showPlaceholder = function() {
            return this._placeholder = Draw.NodePlacement.placeholder().show();
        }, n.prototype.removePlaceholder = function() {
            var t;
            return pds(this, "removing _placeholder", this.id, this._placeholder), this._placeholder && (t = this._placeholder.hide()), 
            this._placeholder = null, t;
        }, n.prototype.draw = function(t, e) {
            var i, o, r, s, a;
            for (n.__super__.draw.call(this, t, e), s = this.children, a = [], o = 0, r = s.length; r > o; o++) i = s[o], 
            a.push(paper.Item.draw(i, t, e));
            return a;
        }, n.prototype._normalizeAcceptanceValue = function(t) {
            return t = t || {}, t.container || (t.container = this.el), t.accepts && !t.list && (t.list = t.accepts), 
            !t.accepts && t.list && (t.accepts = t.list), this.options.highlight_empty && (t.highlight_empty = !0), 
            t;
        }, n.prototype._getNormalizedAcceptanceOptions = function() {
            var t, e;
            return this._acceptsOptions || (t = this.options.accepts || [], t = function() {
                var i, n, o;
                for (o = [], i = 0, n = t.length; n > i; i++) e = t[i], o.push(this._normalizeAcceptanceValue(_.clone(e)));
                return o;
            }.call(this), _.size(t) || t.push({
                container:this.el,
                list:">*:not(.dom-placeholder)",
                accepts:"*",
                dimension:"auto"
            }), this._acceptsOptions = t), this._acceptsOptions;
        }, n.prototype._clearAcceptanceSelectorCache = function() {
            return this._acceptsOptions = null;
        }, n.prototype._checkForEmpty = function(t) {
            var e, i, n, o, r, s, a, l, c, h, u;
            for (o = this, c = this._getNormalizedAcceptanceOptions(), r = 0, a = c.length; a > r; r++) n = c[r], 
            i = Draw.NodePlacement.findContainer(this.el, n.container), i.each(function() {
                var t;
                return t = $(this), n.highlight_empty && 0 === t.find(n.list).length ? o.highlightAsEmpty(t) :o.unhighlightAsEmpty(t), 
                null;
            });
            if (t && this.children) {
                for (h = this.children, u = [], s = 0, l = h.length; l > s; s++) e = h[s], e._checkForEmpty ? u.push(e._checkForEmpty(t)) :u.push(void 0);
                return u;
            }
        }, n.prototype.snapInChild = function(t, e, i) {
            return this._snapInChild(t, e, i);
        }, n.prototype._snapInChild = function(t, e, i) {
            return Draw.NodePlacement.placeNode(t.el, e, i), t.set("snapped", !0), this._initializing || this._syncHtmlPlaceholders(), 
            this._fitSize(this.get("watch_size"), !0);
        }, n.prototype._extractHtml = function(t) {
            var e, i, o, r, s, a, l, c;
            for (this.unhighlight(), this.removePlaceholder(), a = (t || this.el).find(".child-place"), 
            a.length && (i = {
                message:"Placeholders on extract!"
            }, Err.notify(i, "DomContainer", "_extractHtml", {}), a.remove()), t = n.__super__._extractHtml.call(this, t), 
            o = l = 0, c = this.children.length; c >= 0 ? c > l :l > c; o = c >= 0 ? ++l :--l) e = this.children[o], 
            r = e.el[0].id, s = t.find("#" + r), s.length > 1 && (i = {
                message:"More than one element with the same id!!"
            }, Err.notify(i, "DomContainer", "_extractHtml", {
                len:s.length
            })), s.replaceWith(this._generateChildPlaceholder(o)), s.remove();
            return t;
        }, n.prototype._generateChildPlaceholder = function(t) {
            var e;
            return e = "div", this.el.is("table") && (e = "tr"), this.el.is("tr") && (e = "td"), 
            $("<" + e + "/>", {
                "class":"child-place child-place-" + t
            });
        }, n.prototype._syncHtmlPlaceholders = function() {
            var t;
            return t = this.extractHtml(), this._model.set({
                html:t
            }, {
                undoIgnore:!0
            }), this._checkForEmpty();
        }, n.prototype._replacePlaceholder = function(t, e) {
            var i;
            return i = this.el.find(".child-place-" + t), i.length ? (e.el.insertAfter(i), i.remove(), 
            e.set("snapped", !0, {
                init:this._initializing
            }), !0) :!1;
        }, n.prototype._replacePlaceholders = function() {
            var t, e, i, n, o;
            for (e = n = 0, o = this.children.length; o >= 0 ? o > n :n > o; e = o >= 0 ? ++n :--n) this._replacePlaceholder(e, this.children[e]);
            return i = this.el.find(".child-place"), i.length && (t = {
                message:"latent placeholders after replacement"
            }, Err.notify(t, "DomContainer", "_replacePlaceholders", {
                len:i.length
            }), i.remove()), this._checkForEmpty();
        }, n.prototype._getHtml = function() {
            return '<div class="' + this.className + '"></div>';
        }, n.prototype._getCss = function() {
            return "";
        }, n.prototype._parseCss = function() {
            var t;
            return this.unhighlight(this.EMPTY_CLASS), t = n.__super__._parseCss.call(this), 
            this._checkForEmpty(!0), t;
        }, n.prototype._getConfig = function() {
            return {};
        }, n.prototype._setHtml = function(t, e) {
            return t = n.__super__._setHtml.call(this, t, e), this._clearAcceptanceSelectorCache(), 
            this._checkForEmpty(), this.children && this._replacePlaceholders(), t;
        }, n;
    }(Draw.DomObject), paper.Item.JSON_CLASSES.dcont = Draw.DomContainer, Draw.DomLayout = function(t) {
        function i() {
            return e = i.__super__.constructor.apply(this, arguments);
        }
        return o(i, t), i;
    }(Draw.DomContainer);
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.DomRectangle = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        var o;
        return i(n, e), n.prototype._module = "DomRectangle", n.prototype.TYPE = "DomRectangle", 
        n.prototype.KEY = "drect", n.prototype.className = "dom-rect", o = ".dom-rect", 
        n.prototype.OPTIONS = {
            store_config:!1,
            config:{
                fill_color:o,
                background_image:o,
                background_repeat:o,
                background_position:o,
                background_size:o,
                border:o,
                box_shadow:o,
                border_top_left_radius:o,
                border_top_right_radius:o,
                border_bottom_left_radius:o,
                border_bottom_right_radius:o,
                margin_top:o,
                margin_bottom:o,
                margin_right:o,
                margin_left:o
            }
        }, n.prototype._removeClasses = function(t) {
            return n.__super__._removeClasses.call(this, t), t.removeClass("dom-rect"), (t[0].className || "").trim() || t.addClass("rectangle"), 
            t;
        }, n.prototype.getRoundness = function() {
            return parseInt(this.get("border_top_left_radius"));
        }, n.fromJSON = function(t, e) {
            return t.config && !t.config.background_image && (t.config.background_image = "." + Draw.DomRectangle.prototype.className, 
            t.config.background_repeat = "." + Draw.DomRectangle.prototype.className, t.config.background_position = "." + Draw.DomRectangle.prototype.className, 
            t.config.background_size = "." + Draw.DomRectangle.prototype.className), n.__super__.constructor.fromJSON.call(this, t, e);
        }, n.prototype.canEdit = function() {
            return !1;
        }, n.prototype.beginEditing = function() {}, n.prototype.finishEditing = function() {}, 
        n.prototype.selectAll = function() {}, n;
    }(Draw.RectangleDomObject), paper.Item.JSON_CLASSES.drect = Draw.DomRectangle, paper.Item.JSON_CLASSES.rect = Draw.DomRectangle;
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.AutoGuides = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        return i(n, e), n.prototype.getGrid = function() {
            return this.document.autoSnapper;
        }, n;
    }(Draw.Guides);
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.BodyTextMixin = {
        toHtmlString:function() {
            var t, e, i;
            return this.syncCssToProperties(), t = this.el.clone(), t = this._scrubHtml(t), 
            this.UNWRAP_PARENT && this.get("snapped") ? (t.attr("data-link") && (i = t.attr("data-link"), 
            t.children().each(function() {
                return $(this).attr("data-link", i);
            })), t.html()) :(e = t.outerHtml(), t.remove(), e);
        }
    }, Draw.DomBodyText = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        var o;
        return i(n, e), mixin(n, Draw.BodyTextMixin), n.prototype.UNWRAP_PARENT = !0, n.prototype.NODE_NAME = "p", 
        n.prototype._module = "DomBodyText", n.prototype.TYPE = "DomBodyText", n.prototype.KEY = "dbtext", 
        o = ".dom-paragraph > *", n.prototype.OPTIONS = {
            root:".dom-paragraph",
            watch_size:!0,
            auto_width:!0,
            auto_height:!0,
            store_config:!1,
            override_styles:!0,
            html:'<div class="dom-paragraph editable-element"><p>This is body text</p></div>',
            css:".dom-paragraph {\n  overflow: hidden;\n}",
            config:{
                fill_color:o,
                background_image:o,
                background_repeat:o,
                background_position:o,
                background_size:o,
                text_color:o,
                border:o,
                font_face:o,
                font_weight:o,
                font_size:o,
                is_italic:o,
                is_underlined:o,
                alignment:o,
                line_height:o,
                text_shadow:o,
                padding_top:o,
                padding_right:o,
                padding_bottom:o,
                padding_left:o,
                margin_top:o,
                margin_right:o,
                margin_bottom:o,
                margin_left:o
            }
        }, n.prototype._getOptions = function(t) {
            return t = n.__super__._getOptions.call(this, t), t.config.is_underlined || (t.config.is_underlined = o), 
            t;
        }, n.prototype.fromJSON = function(t, e) {
            var i, o, r = this;
            return n.__super__.fromJSON.call(this, t, e), o = this.get("html"), o.indexOf("dom-body-text") > -1 && (i = function() {
                var t, e;
                return r.get("css") && (t = Util.replaceAll(r.get("css"), "dom-body-text", "dom-paragraph"), 
                r.set("css", t, {
                    undoIgnore:!0
                })), o = Util.replaceAll(o, "dom-body-text", "dom-paragraph"), r.set("html", o, {
                    undoIgnore:!0
                }), e = _.without(r.cssProperties(), "html"), r.syncProperties(e, {
                    init:!0
                }), print("upgraded body text!", r);
            }, setTimeout(i, 100)), this;
        }, n;
    }(Draw.RectangleDomObject), paper.Item.JSON_CLASSES.dbtext = Draw.DomBodyText;
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.BootstrapAlert = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        var o;
        return i(n, e), n.prototype.TYPE = "BootstrapAlert", n.prototype.KEY = "bsalert", 
        o = ".alert", n.prototype.OPTIONS = Draw.Dom.textAndBoxOptions(o, {
            html:'<div class="alert">\n  <span class="editable-element">\n    Alert!\n  </span>\n</div>',
            unwrap:[ "span.editable-element" ],
            accepts:[ {
                container:".alert",
                accepts:".btn, h1, h2, h3, h4, h5, h6, .label, .badge, .editable-element",
                dimension:"auto"
            } ],
            config:{
                size_type:{
                    node:".alert",
                    type:"custom_class",
                    options:[ [ "", "Normal" ], [ "alert-block", "Block" ] ]
                },
                message:{
                    node:".alert",
                    type:"custom_class",
                    options:[ [ "", "Warning" ], [ "alert-error", "Error" ], [ "alert-success", "Success" ], [ "alert-info", "Info" ] ]
                },
                pull:{
                    node:o,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                }
            }
        }), n;
    }(Draw.DomContainer), paper.Item.JSON_CLASSES.bsalert = Draw.BootstrapAlert;
}.call(this), function() {
    var t, e, i, n = {}.hasOwnProperty, o = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var o in e) n.call(e, o) && (t[o] = e[o]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.BootstrapButton = function(e) {
        function i() {
            return t = i.__super__.constructor.apply(this, arguments);
        }
        var n;
        return o(i, e), i.prototype.TYPE = "BootstrapButton", i.prototype.KEY = "bsbutton", 
        n = ".btn", i.prototype.OPTIONS = Draw.Dom.textAndBoxOptions(n, {
            highlight_empty:!1,
            auto_width:!0,
            auto_height:!0,
            override:[],
            unwrap:[ "span.editable-element" ],
            html:'<button class="btn"><span class="editable-element">Button</span></button>',
            accepts:[ {
                container:".btn",
                accepts:".icon",
                list:".icon, .editable-element",
                dimension:"auto"
            } ],
            config:{
                btn_type:{
                    node:".btn",
                    type:"custom_class",
                    options:[ [ "", "Default" ], [ "btn-primary", "Primary" ], [ "btn-info", "Info" ], [ "btn-success", "Success" ], [ "btn-warning", "Warning" ], [ "btn-danger", "Danger" ], [ "btn-inverse", "Inverse" ], [ "btn-link", "Link" ], [ "close", "Close" ] ]
                },
                btn_size:{
                    node:".btn",
                    type:"custom_class",
                    options:[ [ "", "Default" ], [ "btn-large", "Large" ], [ "btn-small", "Small" ], [ "btn-mini", "MINI" ] ]
                },
                pull:{
                    node:n,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                }
            }
        }), i.prototype.toHtmlString = function(t) {
            var e;
            return e = i.__super__.toHtmlString.call(this, t), this.get("href") && (e = e.replace(/^<button/, "<a").replace(/<\/button>/, "</a>")), 
            e;
        }, i;
    }(Draw.DomContainer), Draw.BootstrapButtonGroup = function(t) {
        function i() {
            return e = i.__super__.constructor.apply(this, arguments);
        }
        var n;
        return o(i, t), i.prototype.TYPE = "BootstrapButtonGroup", i.prototype.KEY = "bsbuttongroup", 
        n = ".btn-group", i.prototype.OPTIONS = Draw.Dom.baseOptions(n, {
            watch_size:!0,
            highlight_empty:!0,
            html:'<div class="btn-group"></div>',
            accepts:[ {
                container:n,
                accepts:".btn",
                dimension:"auto"
            } ],
            config:{
                pull:{
                    node:n,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                }
            }
        }), i;
    }(Draw.DomContainer), Draw.BootstrapButtonToolbar = function(t) {
        function e() {
            return i = e.__super__.constructor.apply(this, arguments);
        }
        var n;
        return o(e, t), e.prototype.TYPE = "BootstrapButtonToolbar", e.prototype.KEY = "bsbuttontoolbar", 
        n = ".btn-toolbar", e.prototype.OPTIONS = Draw.Dom.baseOptions(n, {
            watch_size:!0,
            highlight_empty:!0,
            html:'<div class="btn-toolbar"></div>',
            accepts:[ {
                container:n,
                accepts:".btn-group",
                dimension:"auto"
            } ],
            config:{
                pull:{
                    node:n,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                }
            }
        }), e;
    }(Draw.DomContainer), paper.Item.JSON_CLASSES.bsbutton = Draw.BootstrapButton, paper.Item.JSON_CLASSES.bsbuttongroup = Draw.BootstrapButtonGroup, 
    paper.Item.JSON_CLASSES.bsbuttontoolbar = Draw.BootstrapButtonToolbar;
}.call(this), function() {
    var t, e, i, n, o = {}.hasOwnProperty, r = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var n in e) o.call(e, n) && (t[n] = e[n]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    }, s = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    Draw.BootstrapContainer = function(e) {
        function i() {
            return t = i.__super__.constructor.apply(this, arguments);
        }
        var n;
        return r(i, e), i.prototype.TYPE = "BootstrapContainer", i.prototype.KEY = "bscontainer", 
        n = ".bsc", i.prototype.OPTIONS = Draw.Dom.boxOptions(n, {
            auto_width:!0,
            auto_height:!0,
            watch_size:"height",
            always_snapped:!0,
            accepts:[ {
                accepts:".container, .dom-div, .container-fluid, .row, .row-fluid, .hero-unit, .thumbnails, .alert, .well, .dom-rect, .page-header, table, p, h1, h2, h3, h4, h5, h6, .dom-paragraph, .paragraph, img, .navbar",
                dimension:"y",
                highlight_empty:!0
            } ],
            removeClasses:[ "bsc" ],
            html:'<div class="bsc container"></div>',
            config:{
                margin_left:void 0,
                margin_right:void 0,
                layout_type:{
                    node:n,
                    type:"custom_class",
                    options:[ [ "container", "Fixed" ], [ "container-fluid", "Fluid" ] ]
                }
            }
        }), i;
    }(Draw.DomLayout), Draw.BootstrapRow = function(t) {
        function i() {
            return this.onChildChangedColumns = s(this.onChildChangedColumns, this), e = i.__super__.constructor.apply(this, arguments);
        }
        var n;
        return r(i, t), i.prototype.TYPE = "BootstrapRow", i.prototype.KEY = "bsrow", n = ".row-fluid", 
        i.prototype.OPTIONS = {
            auto_width:!0,
            auto_height:!0,
            watch_size:"height",
            can_edit:!1,
            override_styles:!0,
            store_config:!1,
            root:n,
            accepts:[ {
                container:n,
                accepts:".column",
                dimension:"x",
                highlight_empty:!0
            } ],
            html:'<div class="row-fluid"></div>',
            config:{
                padding_top:n,
                padding_right:n,
                padding_bottom:n,
                padding_left:n,
                margin_top:n,
                margin_right:n,
                margin_bottom:n,
                margin_left:n
            }
        }, i.prototype.insertChild = function(t, e) {
            return e.bind("change:column_span", this.onChildChangedColumns), e.bind("change:offset_span", this.onChildChangedColumns), 
            i.__super__.insertChild.call(this, t, e), this._initializing ? void 0 :this._redistributeForChangedColumn(e);
        }, i.prototype.onChildRemove = function(t) {
            var e, n = this;
            return t.unbind("change:column_span", this.onChildChangedColumns), t.unbind("change:offset_span", this.onChildChangedColumns), 
            e = function() {
                return n._redistributeForRemovedColumn(t);
            }, setTimeout(e, 2), i.__super__.onChildRemove.call(this, t);
        }, i.prototype.canSetNumberColumns = function(t, e, i) {
            var n, o, r, s;
            return o = this.findChildIndex(t), 0 === o && "left" === i ? !1 :o === this.children.length - 1 && "right" === i ? !1 :(r = t.getNumberColumns(), 
            n = r - e, 0 > n && ("right" === i ? s = this.children[o + 1] :"left" === i && (s = this.children[o - 1]), 
            s && s.getNumberColumns() + n < 1) ? !1 :!0);
        }, i.prototype.canAdjustColumn = function(t, e) {
            var i;
            return i = this.findChildIndex(t), 0 === i && "left" === e ? !1 :i === this.children.length - 1 && "right" === e ? !1 :!0;
        }, i.prototype.addColumn = function() {
            return this.insertColumn(this.children.length);
        }, i.prototype.getColumnToRemove = function(t) {
            var e;
            return e = this.findChildIndex(t), e > -1 ? this.children[e] :null;
        }, i.prototype.removeColumn = function(t) {
            return t = this.getColumnToRemove(t), t && t.remove(), t;
        }, i.prototype.insertColumnBefore = function(t) {
            var e;
            return e = this.findChildIndex(t), e > -1 ? this.insertColumn(e) :void 0;
        }, i.prototype.insertColumnAfter = function(t) {
            var e;
            return e = this.findChildIndex(t), e > -1 ? this.insertColumn(e + 1) :void 0;
        }, i.prototype.insertColumn = function(t) {
            var e, i, n;
            return i = 3, this.children.length && (i = this.children[0].children.length), n = this._redistributeForNewColumn(), 
            n > 0 ? (e = new Draw.BootstrapColumn(new paper.Point(0, 0)), e.setNumberColumns(n, {
                adjust:!1
            }), this.insertChild(t, e), e) :null;
        }, i.prototype.onChildChangedColumns = function(t, e, i) {
            return t = t.owner || t, i.init || i.adjust === !1 ? void 0 :i.sideMoved ? this._adjustNeighboringColumn(t, i.sideMoved) :this._redistributeForChangedColumn(t);
        }, i.prototype._redistributeForRemovedColumn = function(t) {
            var e, i, n, o, r, s, a;
            if (this.children.length) {
                for (n = t.getNumberColumns(), o = parseInt(n / this.children.length), e = function(e, i) {
                    return e.id !== t.id ? (e.setNumberColumns(e.getNumberColumns() + i, {
                        undoIgnore:!0,
                        adjust:!1
                    }), n -= i) :void 0;
                }, a = this.children, r = 0, s = a.length; s > r; r++) i = a[r], e(i, o);
                return n > 0 ? e(this.children[0], n) :void 0;
            }
        }, i.prototype._redistributeForNewColumn = function() {
            var t, e, i, n, o, r, s, a, l;
            for (n = this.children.length, e = n + 1, r = 0, l = this.children, s = 0, a = l.length; a > s; s++) t = l[s], 
            o = t.getNumberColumns(), i = _.clamp(Math.round(o * n / e), 1, 12), i === o && o > 1 && i--, 
            t.setNumberColumns(i, {
                undoIgnore:!0,
                adjust:!1
            }), r += o - i;
            return r;
        }, i.prototype._redistributeForChangedColumn = function(t) {
            var e, i, n, o, r, s, a, l, c, h, u, d, p, f, g, m, v, y, b;
            if (o = t.getNumberColumns(), l = 13 - this.children.length, o > l) return o = t.setNumberColumns(l, {
                undoIgnore:!0
            }), void 0;
            for (h = 0, v = this.children, u = 0, f = v.length; f > u; u++) n = v[u], h += n.getNumberColumns();
            if (s = 12 - h, !(s > 0)) {
                for (i = 0, r = parseInt(s / (this.children.length - 1)), e = function(e, n) {
                    var o;
                    if (e.id !== t.id) return o = _.clamp(e.getNumberColumns() + n, 1, 12), n = o - e.getNumberColumns(), 
                    e.setNumberColumns(o, {
                        undoIgnore:!0,
                        adjust:!1
                    }), i += Math.abs(n);
                }, y = this.children, d = 0, g = y.length; g > d; d++) n = y[d], e(n, r);
                if (a = Math.abs(s) - i) {
                    for (0 > s && (a = -a), b = this.children, p = 0, m = b.length; m > p; p++) if (n = b[p], 
                    n.id !== t.id && n.getNumberColumns() > 1) {
                        c = n;
                        break;
                    }
                    if (c) return e(c, a);
                }
            }
        }, i.prototype._adjustNeighboringColumn = function(t, e) {
            var i, n, o, r, s, a, l, c, h;
            for (a = 0, h = this.children, l = 0, c = h.length; c > l; l++) i = h[l], a += i.getNumberColumns();
            return r = this.findChildIndex(t), "right" === e ? s = this.children[r + 1] :"left" === e && (s = this.children[r - 1]), 
            s ? (o = 12 - a, n = _.clamp(s.getNumberColumns() + o, 1, 12), s.setNumberColumns(n, {
                undoIgnore:!0,
                adjust:!1
            })) :void 0;
        }, i;
    }(Draw.DomContainer), Draw.BootstrapColumn = function(t) {
        function e() {
            return i = e.__super__.constructor.apply(this, arguments);
        }
        var n;
        return r(e, t), e.prototype.TYPE = "BootstrapColumn", e.prototype.KEY = "bscolumn", 
        n = ".column", e.prototype.OPTIONS = {
            auto_width:!0,
            auto_height:!0,
            watch_size:"height",
            can_edit:!1,
            override_styles:!0,
            highlight_empty:!0,
            store_config:!1,
            root:n,
            accepts:[ {
                container:n,
                list:">*:not(.dom-placeholder, .column)",
                accepts:"*:not(.dom-responsive-container, .column)",
                dimension:"auto"
            } ],
            removeClasses:[ "column" ],
            html:'<span class="span6 column"></span>',
            config:{
                padding_top:n,
                padding_right:n,
                padding_bottom:n,
                padding_left:n,
                column_span:{
                    node:n,
                    type:"custom_class",
                    options:[ [ "span1", "1" ], [ "span2", "2" ], [ "span3", "3" ], [ "span4", "4" ], [ "span5", "5" ], [ "span6", "6" ], [ "span7", "7" ], [ "span8", "8" ], [ "span9", "9" ], [ "span10", "10" ], [ "span11", "11" ], [ "span12", "12" ] ]
                },
                offset_span:{
                    node:n,
                    type:"custom_class",
                    options:[ [ "", "No Offset" ], [ "offset1", "1" ], [ "offset2", "2" ], [ "offset3", "3" ], [ "offset4", "4" ], [ "offset5", "5" ], [ "offset6", "6" ], [ "offset7", "7" ], [ "offset8", "8" ], [ "offset1", "9" ], [ "offset10", "10" ], [ "offset11", "11" ] ]
                }
            }
        }, e.prototype.canBeRemoved = function() {
            var t;
            return t = this.getTableParent(), t.canAdjustColumn(this, "left") || t.canAdjustColumn(this, "right");
        }, e.prototype.getOffsetColumns = function() {
            var t;
            return t = this.get("offset_span"), t ? parseInt(t.replace("offset", "")) || 0 :0;
        }, e.prototype.setOffsetColumns = function(t, e) {
            return t ? this.set("offset_span", "offset" + t, e) :this.set("offset_span", "", e);
        }, e.prototype.getNumberColumns = function() {
            var t;
            return t = this.get("column_span"), t ? parseInt(t.replace("span", "")) + this.getOffsetColumns() :null;
        }, e.prototype.setNumberColumns = function(t, e) {
            return t = _.clamp(t - this.getOffsetColumns(), 1, 12), this.set("column_span", "span" + t, e);
        }, e.prototype.getTableParent = function() {
            return this.parent && this.parent instanceof Draw.BootstrapRow ? this.parent :null;
        }, e.prototype.getColumnToRemove = function() {
            return this;
        }, e.prototype.insertColumnBefore = function() {
            var t;
            return t = this.getTableParent(), t ? t.insertColumnBefore(this) :void 0;
        }, e.prototype.insertColumnAfter = function() {
            var t;
            return t = this.getTableParent(), t ? t.insertColumnAfter(this) :void 0;
        }, e.prototype._getResizeHandlePoints = function() {
            var t, i;
            return this.get("snapped") && this.get("auto_width") ? (t = [], i = this.getTableParent(), 
            i.canAdjustColumn(this, "left") && t.push("leftCenter"), i.canAdjustColumn(this, "right") && t.push("rightCenter"), 
            t) :e.__super__._getResizeHandlePoints.call(this);
        }, e.prototype._setSize = function(t, i) {
            var n, o, r, s, a, l, c, h, u;
            return t ? (n = 20, h = e.__super__._setSize.call(this, t), this.get("snapped") && (o = this.get("column_span"), 
            u = null, i && i.anchor && (u = i.anchor.indexOf("Left") > -1 ? "right" :"left"), 
            o && u && (s = this.getNumberColumns(), a = this.getSize().width, r = (a - (s - 1 * n)) / s, 
            l = _.clamp(Math.round(t.width / r), 1, 12), s !== l && (c = this.getTableParent(), 
            (!c || c.canSetNumberColumns(this, l, u)) && (this.setNumberColumns(l, {
                sideMoved:u
            }), h.width = this.el.outerWidth())))), h) :t;
        }, e;
    }(Draw.DomContainer), Draw.BootstrapWell = function(t) {
        function e() {
            return n = e.__super__.constructor.apply(this, arguments);
        }
        var i;
        return r(e, t), e.prototype.TYPE = "BootstrapWell", e.prototype.KEY = "bswell", 
        i = ".well", e.prototype.OPTIONS = Draw.Dom.boxOptions(i, {
            highlight_empty:!1,
            unwrap:[ "span.editable-element" ],
            html:'<div class="well"></div>',
            accepts:[ {
                container:".well",
                list:">*:not(.dom-placeholder)",
                accepts:"*:not(.dom-placeholder)",
                dimension:"auto"
            } ],
            config:{
                pull:{
                    node:i,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                }
            }
        }), e;
    }(Draw.DomContainer), paper.Item.JSON_CLASSES.bswell = Draw.BootstrapWell, paper.Item.JSON_CLASSES.bsrow = Draw.BootstrapRow, 
    paper.Item.JSON_CLASSES.bscolumn = Draw.BootstrapColumn, paper.Item.JSON_CLASSES.bscontainer = Draw.BootstrapContainer, 
    paper.Item.JSON_CLASSES.bsfluidcontainer = Draw.BootstrapFluidContainer;
}.call(this), function() {
    var t, e, i, n, o, r, s, a, l, c, h = {}.hasOwnProperty, u = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var n in e) h.call(e, n) && (t[n] = e[n]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    t = function(t, e) {
        return $.extend(!0, Draw.Dom.boxOptions(t), Draw.Dom.textOptions(t), {
            config:{
                size_class:{
                    node:t,
                    type:"custom_class",
                    prop:"type",
                    options:[ [ "", "Default" ], [ "input-mini", "Mini" ], [ "input-small", "Small" ], [ "input-medium", "Medium" ], [ "input-large", "Large" ], [ "input-xlarge", "XLarge" ], [ "input-xxlarge", "XXLarge" ], [ "span1", "Span 1" ], [ "span2", "Span 2" ], [ "span3", "Span 3" ], [ "span4", "Span 4" ], [ "span5", "Span 5" ], [ "span6", "Span 6" ], [ "span7", "Span 7" ], [ "span8", "Span 8" ], [ "span9", "Span 9" ], [ "span10", "Span 10" ], [ "span11", "Span 11" ], [ "span12", "Span 12" ] ]
                }
            }
        }, e);
    }, Draw.BootstrapForm = function(t) {
        function i() {
            return e = i.__super__.constructor.apply(this, arguments);
        }
        var n;
        return u(i, t), i.prototype.TYPE = "BootstrapForm", i.prototype.KEY = "bsform", 
        n = ".bs-form", i.prototype.OPTIONS = Draw.Dom.boxOptions(n, {
            html:'<form class="bs-form"></form>',
            accepts:[ {
                accepts:"label, input, textarea, legend, .help-block, button, a, .control-group, .form-actions, select, .dom-paragraph, .paragraph, p, h1, h2, h3, h4, h5, h6, .btn-group, .btn-toolbar",
                dimension:"auto"
            } ],
            removeClasses:[ "bs-form" ],
            config:{
                form_type:{
                    node:n,
                    type:"custom_class",
                    prop:"type",
                    options:[ [ "", "Default" ], [ "form-inline", "Inline" ], [ "form-horizontal", "Horizontal" ], [ "navbar-form", "Navbar Form" ], [ "navbar-search", "Navbar Search Form" ] ]
                },
                pull:{
                    node:n,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                },
                action:{
                    node:n,
                    type:"custom_string_prop",
                    prop:"action"
                }
            }
        }), i.prototype.onSnapped = function(t) {
            return i.__super__.onSnapped.call(this, t), this._parent instanceof Draw.BootstrapNavBar && !this.get("form_type") && (this.set("form_type", "navbar-form"), 
            !this.get("pull")) ? this.set("pull", "pull-left") :void 0;
        }, i;
    }(Draw.DomContainer), Draw.BootstrapFormActions = function(t) {
        function e() {
            return i = e.__super__.constructor.apply(this, arguments);
        }
        var n;
        return u(e, t), e.prototype.TYPE = "BootstrapFormActions", e.prototype.KEY = "bsformactions", 
        n = ".form-actions", e.prototype.OPTIONS = Draw.Dom.boxOptions(n, {
            html:'<div class="form-actions"></div>',
            accepts:[ {
                accepts:'button, input[type="submit"]',
                dimension:"auto"
            } ],
            config:{
                pull:{
                    node:n,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                }
            }
        }), e;
    }(Draw.DomContainer), Draw.BootstrapControlGroup = function(t) {
        function e() {
            return n = e.__super__.constructor.apply(this, arguments);
        }
        var i;
        return u(e, t), e.prototype.TYPE = "BootstrapControlGroup", e.prototype.KEY = "bscontrolgroup", 
        i = ".control-group", e.prototype.OPTIONS = Draw.Dom.baseOptions(i, {
            watch_size:!0,
            html:'<div class="control-group">\n  <div class="controls">\n  </div>\n</div>',
            accepts:[ {
                container:".controls",
                accepts:"label, input, textarea, legend, .help-block, button, .checkbox, .radio, select",
                highlight_empty:!0
            }, {
                container:".control-group",
                accepts:"label",
                insertType:"prepend",
                dimension:"auto",
                highlight_empty:!1
            } ],
            config:{}
        }), e;
    }(Draw.DomContainer), Draw.BootstrapTextInput = function(e) {
        function i() {
            return o = i.__super__.constructor.apply(this, arguments);
        }
        var n;
        return u(i, e), i.prototype.TYPE = "BootstrapTextInput", i.prototype.KEY = "bstextinput", 
        n = "input", i.prototype.OPTIONS = t(n, {
            html:'<input class="textinput" type="text" placeholder="Text input" />',
            placeholder:"Placeholder",
            config:{
                input_type:{
                    node:n,
                    type:"custom_prop",
                    prop:"type",
                    options:[ [ "text", "Text" ], [ "password", "Password" ], [ "email", "Email" ] ]
                },
                query_type:{
                    node:n,
                    type:"custom_class",
                    options:[ [ "", "Normal" ], [ "search-query", "Search Query" ] ]
                },
                placeholder:{
                    node:n,
                    type:"custom_string_prop",
                    prop:"placeholder"
                },
                pull:{
                    node:n,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                },
                input_name:{
                    node:n,
                    type:"custom_string_prop",
                    prop:"name"
                }
            }
        }), i;
    }(Draw.DomObject), Draw.BootstrapTextArea = function(e) {
        function i() {
            return r = i.__super__.constructor.apply(this, arguments);
        }
        var n;
        return u(i, e), i.prototype.TYPE = "BootstrapTextArea", i.prototype.KEY = "bstextarea", 
        n = "textarea", i.prototype.OPTIONS = t(n, {
            auto_height:!1,
            html:"<textarea></textarea>",
            placeholder:"Placeholder",
            config:{
                placeholder:{
                    node:n,
                    type:"custom_string_prop",
                    prop:"placeholder"
                },
                pull:{
                    node:n,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                },
                input_name:{
                    node:n,
                    type:"custom_string_prop",
                    prop:"name"
                }
            }
        }), i;
    }(Draw.DomObject), Draw.BootstrapLabel = function(t) {
        function e() {
            return s = e.__super__.constructor.apply(this, arguments);
        }
        var i;
        return u(e, t), e.prototype.TYPE = "BootstrapLabel", e.prototype.KEY = "bslabel", 
        i = "label", e.prototype.OPTIONS = Draw.Dom.textOptions(i, {
            html:'<label class="control-label editable-element">Form Label</label>'
        }), e;
    }(Draw.DomObject), Draw.BootstrapCheckbox = function(t) {
        function e() {
            return a = e.__super__.constructor.apply(this, arguments);
        }
        var i;
        return u(e, t), e.prototype.TYPE = "BootstrapCheckbox", e.prototype.KEY = "bscheckbox", 
        i = "label", e.prototype.OPTIONS = Draw.Dom.textOptions(i, {
            html:'<label class="checkbox">\n  <input type="checkbox" value="">\n  <span class="editable-element">checkbox!</span>\n</label>',
            config:{
                is_checked:{
                    node:"input",
                    type:"custom_prop",
                    prop:"checked",
                    options:[ [ "false", "Unchecked" ], [ "true", "Checked" ] ]
                },
                pull:{
                    node:i,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                },
                input_name:{
                    node:"label input",
                    type:"custom_string_prop",
                    prop:"name"
                }
            }
        }), e;
    }(Draw.DomObject), Draw.BootstrapRadioButton = function(t) {
        function e() {
            return l = e.__super__.constructor.apply(this, arguments);
        }
        var i;
        return u(e, t), e.prototype.TYPE = "BootstrapRadioButton", e.prototype.KEY = "bsradiobutton", 
        i = "label", e.prototype.OPTIONS = Draw.Dom.textOptions(i, {
            html:'<label class="radio">\n  <input type="radio" value="">\n  <span class="editable-element">Radio button</span>\n</label>',
            config:{
                is_checked:{
                    node:"input",
                    type:"custom_prop",
                    prop:"checked",
                    options:[ [ "false", "Unchecked" ], [ "true", "Checked" ] ]
                },
                pull:{
                    node:i,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-right", "Right" ] ]
                },
                input_name:{
                    node:"label input",
                    type:"custom_string_prop",
                    prop:"name"
                }
            }
        }), e;
    }(Draw.DomObject), Draw.SelectBox = function(t) {
        function e() {
            return c = e.__super__.constructor.apply(this, arguments);
        }
        var i;
        return u(e, t), e.prototype.TYPE = "SelectBox", e.prototype.KEY = "bsselect", i = "select", 
        e.prototype.OPTIONS = Draw.Dom.textOptions(i, {
            can_edit:!1,
            auto_width:!1,
            html:"<select></select>",
            options:"One\nItem\nPer\nLine",
            config:{
                fill_color:i,
                background_image:i,
                background_repeat:i,
                background_position:i,
                background_size:i,
                border:i,
                options:{
                    node:"select",
                    type:"multiline_text"
                },
                pull:{
                    node:i,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                },
                input_name:{
                    node:i,
                    type:"custom_string_prop",
                    prop:"name"
                }
            }
        }), e.prototype._initMultilineText = function(t, e, i) {
            var n;
            return n = this.options[e], this._setMultilineText(t, e, i, n), n;
        }, e.prototype._setMultilineText = function(t, e, i, n) {
            var o, r, s, a, l;
            for (r = n.split("\n"), s = [], a = 0, l = r.length; l > a; a++) o = r[a], o = o.trim(), 
            o && s.push('<option value="' + o + '">' + o + "</option>");
            return t.html(s.join(""));
        }, e;
    }(Draw.DomObject), paper.Item.JSON_CLASSES.bsform = Draw.BootstrapForm, paper.Item.JSON_CLASSES.bsformactions = Draw.BootstrapFormActions, 
    paper.Item.JSON_CLASSES.bscontrolgroup = Draw.BootstrapControlGroup, paper.Item.JSON_CLASSES.bslabel = Draw.BootstrapLabel, 
    paper.Item.JSON_CLASSES.bstextinput = Draw.BootstrapTextInput, paper.Item.JSON_CLASSES.bstextarea = Draw.BootstrapTextArea, 
    paper.Item.JSON_CLASSES.bscheckbox = Draw.BootstrapCheckbox, paper.Item.JSON_CLASSES.bsradiobutton = Draw.BootstrapRadioButton, 
    paper.Item.JSON_CLASSES.bsselect = Draw.SelectBox;
}.call(this), function() {
    var t, e, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.BootstrapBadgeLabel = function(e) {
        function i() {
            return t = i.__super__.constructor.apply(this, arguments);
        }
        var o;
        return n(i, e), i.prototype.TYPE = "BootstrapBadgeLabel", i.prototype.KEY = "bsbadgelabel", 
        o = ".label", i.prototype.OPTIONS = Draw.Dom.textAndBoxOptions(o, {
            removeClasses:[ "editable-element" ],
            can_edit_auto_sizing:!1,
            html:'<span class="label editable-element">Label</span>',
            config:{
                label_type:{
                    node:".label",
                    type:"custom_class",
                    options:[ [ "", "Default" ], [ "label-success", "Success" ], [ "label-warning", "Warning" ], [ "label-important", "Important" ], [ "label-info", "Info" ], [ "label-invert", "Invert" ] ]
                },
                pull:{
                    node:o,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                }
            }
        }), i;
    }(Draw.DomObject), Draw.BootstrapBadge = function(t) {
        function i() {
            return e = i.__super__.constructor.apply(this, arguments);
        }
        var o;
        return n(i, t), i.prototype.TYPE = "BootstrapBadge", i.prototype.KEY = "bsbadge", 
        o = ".badge", i.prototype.OPTIONS = Draw.Dom.textAndBoxOptions(o, {
            removeClasses:[ "editable-element" ],
            can_edit_auto_sizing:!1,
            html:'<span class="badge editable-element">Badge</span>',
            config:{
                badge_type:{
                    node:".badge",
                    type:"custom_class",
                    options:[ [ "", "Default" ], [ "badge-success", "Success" ], [ "badge-warning", "Warning" ], [ "badge-important", "Important" ], [ "badge-info", "Info" ], [ "badge-invert", "Invert" ] ]
                },
                pull:{
                    node:o,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                }
            }
        }), i;
    }(Draw.DomObject), paper.Item.JSON_CLASSES.bsbadgelabel = Draw.BootstrapBadgeLabel, 
    paper.Item.JSON_CLASSES.bsbadge = Draw.BootstrapBadge;
}.call(this), function() {
    var t, e, i, n, o, r = {}.hasOwnProperty, s = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var n in e) r.call(e, n) && (t[n] = e[n]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.BootstrapNavBar = function(e) {
        function i() {
            return t = i.__super__.constructor.apply(this, arguments);
        }
        var n, o;
        return s(i, e), i.prototype.TYPE = "BootstrapNavBar", i.prototype.KEY = "bsnavbar", 
        n = ".navbar", o = ".navbar .navbar-inner", i.prototype.OPTIONS = Draw.Dom.boxOptions(n, {
            auto_width:!0,
            auto_height:!1,
            watch_size:!1,
            highlight_empty:!1,
            html:'<div class="navbar">\n  <div class="navbar-inner">\n  </div>\n</div>',
            accepts:[ {
                container:".navbar-inner",
                accepts:".nav, img, form, .btn, .btn-group",
                dimension:"auto"
            } ],
            config:{
                colors:{
                    node:n,
                    type:"custom_class",
                    options:[ [ "", "Default" ], [ "navbar-inverse", "Inverse" ] ]
                },
                positioning:{
                    node:n,
                    type:"custom_class",
                    options:[ [ "", "Default" ], [ "navbar-fixed-top", "Fixed Top" ], [ "navbar-static-top", "Static Top" ], [ "navbar-fixed-bottom", "Fixed Bottom" ] ]
                },
                margin_top:n,
                margin_right:n,
                margin_bottom:n,
                margin_left:n
            }
        }, o), i.prototype.getDocumentStyleString = function() {
            var t;
            return this._styleEl ? (t = "", this._getRules(function(e) {
                var i, n, o, r;
                for (r = [], n = 0, o = e.length; o > n; n++) i = e[n], r.push(t += i.cssText);
                return r;
            }), t) :"";
        }, i.prototype._addStyleSheet = function(t) {
            var e, i = this;
            return this._styleEl = $("<style/>"), e = this.el.parents("html").find("head"), 
            e.prepend(this._styleEl), setTimeout(function() {
                var e, n, o, r;
                if (i._styleEl) {
                    for (n = i._styleEl[0].ownerDocument.styleSheets, o = 0, r = n.length; r > o; o++) if (e = n[o], 
                    e.ownerNode === i._styleEl[0]) return i._styleSheet = e, t(i._styleSheet);
                    return $.error("Nav stylesheet not found! WTF", i._styleEl, n), i._styleSheet = n[0], 
                    t(i._styleSheet);
                }
            }, 5);
        }, i.prototype._removeStyleSheet = function() {
            return this._styleEl ? (this._styleEl.text(""), this._styleEl.remove(), this._styleEl = null, 
            this._styleSheet = null) :void 0;
        }, i.prototype._getSheet = function(t) {
            return this._styleSheet ? t(this._styleSheet) :this._addStyleSheet(t);
        }, i.prototype._getRules = function(t) {
            return this._getSheet(function(e) {
                return t("cssRules" in e ? e.cssRules :e.rules);
            });
        }, i.prototype._getRule = function(t, e) {
            return this._getRules(function(i) {
                var n, o, r, s;
                for (n = null, r = 0, s = i.length; s > r; r++) if (o = i[r], o.selectorText === t) {
                    n = o;
                    break;
                }
                return e(n);
            });
        }, i.prototype._updateRule = function(t, e, i) {
            var n = this;
            return this._getRule(t, function(o) {
                return o ? o.style[_.camelize(e)] = i :n._getRules(function(o) {
                    var r;
                    return r = n._styleSheet, "insertRule" in r ? r.insertRule("" + t + " { " + e + ": " + i + "; }", o.length) :r.addRule(t, "" + e + ": " + i + ";", o.length);
                });
            });
        }, i.prototype._setCustomClass = function(t, e, n, o, r) {
            var s, a, l, c, h;
            if (i.__super__._setCustomClass.call(this, t, e, n, o, r), "positioning" === e) {
                if (a = o.indexOf("fixed-top") > -1, s = o.indexOf("fixed-") > -1, c = o.indexOf("static-") > -1, 
                s && this.parent && this.moveToBottom(), l = this.parent instanceof Draw.DomContainer, 
                l || this.set("snapped", s || c), !a) return this._removeStyleSheet();
                if (h = this.getSize()) return this._updateRule("body", "padding-top", h.height + "px");
            }
        }, i.prototype._setSize = function(t) {
            var e, n, o;
            return o = i.__super__._setSize.call(this, t), t && (n = this.el.find(".navbar-inner"), 
            this.el.outerHeight(), this.get("auto_height") ? n.css({
                height:""
            }) :n.outerHeight(t.height), e = this.get("positioning").indexOf("fixed-top") > -1, 
            e && this._updateRule("body", "padding-top", n.outerHeight() + "px")), o;
        }, i.prototype._setSnapped = function(t, e) {
            return this.get("snapped") && !t && this.set("positioning", ""), i.__super__._setSnapped.call(this, t, e);
        }, i.prototype._setAutoHeight = function(t, e) {
            var i;
            return this.get("snapped") && t && !e.init && (i = this.el.find(".navbar-inner").css({
                height:""
            }), this.setSize(new paper.Size(this.el.outerWidth(), i.outerHeight()))), !!t;
        }, i.prototype._scrubHtml = function(t) {
            var e, n, o, r;
            return t = i.__super__._scrubHtml.call(this, t), n = t.find(".navbar-inner"), o = n.attr("style"), 
            e = Import.CSS.cssToDict(o), r = this.getSize(), r && (this.get("auto_height") ? delete e.height :e.height = r.height + "px"), 
            e["padding-left"] = "20px", e["padding-right"] = "20px", n.attr("style", Draw.Export.CSS.stringifyCss(e)), 
            t;
        }, i;
    }(Draw.DomContainer), Draw.BootstrapResponsiveNavBar = function(t) {
        function i() {
            return e = i.__super__.constructor.apply(this, arguments);
        }
        var n, o;
        return s(i, t), i.prototype.TYPE = "BootstrapResponsiveNavBar", i.prototype.KEY = "bsnavbarresponsive", 
        n = ".navbar", o = ".navbar .navbar-inner", i.prototype.OPTIONS = Draw.Dom.boxOptions(n, {
            auto_width:!0,
            auto_height:!1,
            watch_size:!1,
            highlight_empty:!1,
            html:'<div class="navbar">\n  <div class="navbar-inner">\n    <div class="responsive-container">\n\n      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n      </a>\n\n      <div class="nav-collapse collapse">\n      </div>\n\n    </div>\n  </div>\n</div>',
            accepts:[ {
                container:".responsive-container",
                accepts:".brand",
                list:"a, .brand, .nav-collapse",
                dimension:"auto"
            }, {
                container:".nav-collapse",
                accepts:".nav, img, form, .btn, .btn-group",
                dimension:"auto"
            } ],
            config:{
                colors:{
                    node:n,
                    type:"custom_class",
                    options:[ [ "", "Default" ], [ "navbar-inverse", "Inverse" ] ]
                },
                positioning:{
                    node:n,
                    type:"custom_class",
                    options:[ [ "", "Default" ], [ "navbar-fixed-top", "Fixed Top" ], [ "navbar-static-top", "Static Top" ], [ "navbar-fixed-bottom", "Fixed Bottom" ] ]
                },
                margin_top:n,
                margin_right:n,
                margin_bottom:n,
                margin_left:n
            }
        }, o), i;
    }(Draw.BootstrapNavBar), Draw.BootstrapNavLink = function(t) {
        function e() {
            return i = e.__super__.constructor.apply(this, arguments);
        }
        var n;
        return s(e, t), e.prototype.TYPE = "BootstrapNavLink", e.prototype.KEY = "bsnavlink", 
        n = "li", e.prototype.OPTIONS = Draw.Dom.textAndBoxOptions(n, {
            unwrap:[ "span.editable-element" ],
            html:'<li><a href="#"><span class="editable-element">Link</span></a></li>',
            can_edit_auto_sizing:!1,
            highlight_empty:!1,
            accepts:[ {
                container:"a",
                accepts:"i, .label, .badge",
                list:"i, .label, .badge, span",
                dimension:"auto"
            } ],
            config:{
                state:{
                    node:n,
                    type:"custom_class",
                    options:[ [ "", "Default" ], [ "active", "Active" ], [ "disabled", "Disabled" ] ]
                },
                is_divider:{
                    node:n,
                    type:"custom_class",
                    options:[ [ "", "No" ], [ "divider", "Yes" ] ]
                }
            }
        }, "li a"), e;
    }(Draw.DomContainer), Draw.BootstrapBrand = function(t) {
        function e() {
            return n = e.__super__.constructor.apply(this, arguments);
        }
        var i;
        return s(e, t), e.prototype.TYPE = "BootstrapBrand", e.prototype.KEY = "bsbrand", 
        i = ".brand", e.prototype.OPTIONS = Draw.Dom.textAndBoxOptions(i, {
            unwrap:[ "span.editable-element" ],
            html:'<a class="brand" href="#"><span class="editable-element">Title</span></a>',
            highlight_empty:!1,
            accepts:[ {
                container:"a",
                accepts:"i, .label, .badge",
                list:"i, .label, .badge, span",
                dimension:"auto"
            } ]
        }), e;
    }(Draw.DomContainer), Draw.BootstrapNav = function(t) {
        function e() {
            return o = e.__super__.constructor.apply(this, arguments);
        }
        var i;
        return s(e, t), e.prototype.TYPE = "BootstrapNav", e.prototype.KEY = "bsnav", i = ".nav", 
        e.prototype.OPTIONS = Draw.Dom.boxOptions(i, {
            can_edit:!1,
            watch_size:!1,
            html:'<ul class="nav">\n</ul>',
            root:i,
            accepts:[ {
                container:i,
                accepts:"li",
                dimension:"auto",
                highlight_empty:!0
            } ],
            config:{
                nav_type:{
                    node:i,
                    type:"custom_class",
                    options:[ [ "", "Default" ], [ "nav-tabs", "Tabs" ], [ "nav-pills", "Pills" ], [ "nav-list", "List" ] ]
                },
                is_stacked:{
                    node:i,
                    type:"custom_class",
                    options:[ [ "", "No" ], [ "nav-stacked", "Yes" ] ]
                },
                pull:{
                    node:i,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-right", "Right" ] ]
                }
            }
        }), e;
    }(Draw.DomContainer), paper.Item.JSON_CLASSES.bsnavbarresponsive = Draw.BootstrapResponsiveNavBar, 
    paper.Item.JSON_CLASSES.bsnavbar = Draw.BootstrapNavBar, paper.Item.JSON_CLASSES.bsnavlink = Draw.BootstrapNavLink, 
    paper.Item.JSON_CLASSES.bsbrand = Draw.BootstrapBrand, paper.Item.JSON_CLASSES.bsnav = Draw.BootstrapNav;
}.call(this), function() {
    var t, e, i, n, o, r = {}.hasOwnProperty, s = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var n in e) r.call(e, n) && (t[n] = e[n]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.BootstrapTable = function(e) {
        function i() {
            return t = i.__super__.constructor.apply(this, arguments);
        }
        var n;
        return s(i, e), i.prototype.TYPE = "BootstrapTable", i.prototype.KEY = "bstable", 
        n = ".table", i.prototype.OPTIONS = Draw.Dom.baseOptions(n, {
            html:'<table class="table" action="#">\n  <thead></thead>\n  <tbody></tbody>\n</table>',
            watch_size:"height",
            accepts:[ {
                container:"thead",
                accepts:"tr.bs-head",
                dimension:"y",
                highlight_empty:!1
            }, {
                container:"tbody",
                accepts:"tr.bs-body",
                dimension:"y",
                highlight_empty:!0
            } ],
            config:{
                border:n,
                stripe_rows:{
                    node:n,
                    type:"custom_class",
                    options:[ [ "", "No" ], [ "table-striped", "Yes" ] ]
                },
                border_rows:{
                    node:n,
                    type:"custom_class",
                    options:[ [ "", "No" ], [ "table-bordered", "Yes" ] ]
                },
                condensed:{
                    node:n,
                    type:"custom_class",
                    options:[ [ "", "No" ], [ "table-condensed", "Yes" ] ]
                },
                pull:{
                    node:n,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                }
            }
        }), i.prototype._findColumnIndex = function(t) {
            var e, i, n, o, r, s;
            for (n = -1, s = this.children, o = 0, r = s.length; r > o; o++) if (e = s[o], i = e.findChildIndex(t), 
            i > -1) {
                n = i;
                break;
            }
            return n;
        }, i.prototype._findRowIndex = function(t) {
            var e, i, n, o;
            if (i = this.findChildIndex(t), 0 > i) for (e = n = 0, o = this.children.length; o >= 0 ? o > n :n > o; e = o >= 0 ? ++n :--n) if (this.children[e].findChildIndex(t) > -1) {
                i = e;
                break;
            }
            return i;
        }, i.prototype.addRow = function() {
            return this.insertRow(this.children.length);
        }, i.prototype.addColumn = function() {
            var t;
            return this.children.length ? (t = this.children[0].children.length, this.insertColumn(t)) :null;
        }, i.prototype.getRowToRemove = function(t) {
            var e, i;
            return e = this._findRowIndex(t), e > -1 ? i = this.children[e] :null;
        }, i.prototype.removeRow = function(t) {
            var e;
            return e = this.getRowToRemove(t), e && e.remove(), e;
        }, i.prototype.insertRowBefore = function(t) {
            var e;
            return e = this._findRowIndex(t), e > -1 ? this.insertRow(e) :void 0;
        }, i.prototype.insertRowAfter = function(t) {
            var e;
            return e = this._findRowIndex(t), e > -1 ? this.insertRow(e + 1) :void 0;
        }, i.prototype.insertRow = function(t) {
            var e, i, n, o;
            for (e = 3, this.children.length && (e = this.children[0].children.length), n = new Draw.BootstrapTableRow(new paper.Point(0, 0)), 
            i = o = 0; e >= 0 ? e > o :o > e; i = e >= 0 ? ++o :--o) n.addChild(new Draw.BootstrapTableCell(new paper.Point(0, 0)));
            return this.insertChild(t, n), n;
        }, i.prototype.getColumnToRemove = function(t) {
            var e, i, n, o, r, s;
            if (i = this._findColumnIndex(t), n = [], i > -1) for (s = this.children, o = 0, 
            r = s.length; r > o; o++) e = s[o], n.push(e.getColumnToRemove(i));
            return n;
        }, i.prototype.removeColumn = function(t) {
            var e, i, n;
            for (e = this.getColumnToRemove(t), i = 0, n = e.length; n > i; i++) t = e[i], t.remove();
            return e;
        }, i.prototype.insertColumnBefore = function(t) {
            var e;
            return e = this._findColumnIndex(t), e > -1 ? this.insertColumn(e) :void 0;
        }, i.prototype.insertColumnAfter = function(t) {
            var e;
            return e = this._findColumnIndex(t), e > -1 ? this.insertColumn(e + 1) :void 0;
        }, i.prototype.insertColumn = function(t) {
            var e, i, n, o, r;
            for (o = this.children, r = [], i = 0, n = o.length; n > i; i++) e = o[i], r.push(e.insertColumn(t));
            return r;
        }, i;
    }(Draw.DomContainer), Draw.BootstrapTableRow = function(t) {
        function i() {
            return e = i.__super__.constructor.apply(this, arguments);
        }
        var n;
        return s(i, t), i.prototype.TYPE = "BootstrapTableRow", i.prototype.KEY = "bstablerow", 
        i.prototype.CELL_CLASS = "BootstrapTableCell", n = ".bs-body", i.prototype.OPTIONS = {
            can_edit_auto_sizing:!1,
            store_config:!1,
            override_styles:!0,
            auto_width:!0,
            auto_height:!0,
            root:n,
            can_edit:!1,
            watch_size:"height",
            html:'<tr class="bs-body"></tr>',
            removeClasses:[ "bs-body" ],
            accepts:[ {
                container:"tr",
                accepts:"td",
                dimension:"x",
                highlight_empty:!0
            } ]
        }, i.prototype.getTableParent = function() {
            return this.parent && this.parent instanceof Draw.BootstrapTable ? this.parent :null;
        }, i.prototype.getRowToRemove = function() {
            return this;
        }, i.prototype.getColumnToRemove = function(t) {
            return this.children[t];
        }, i.prototype.insertRowBefore = function() {
            var t;
            return t = this.getTableParent(), t ? t.insertRowBefore(this) :void 0;
        }, i.prototype.insertRowAfter = function() {
            var t;
            return t = this.getTableParent(), t ? t.insertRowAfter(this) :void 0;
        }, i.prototype.insertColumn = function(t) {
            var e;
            return e = new Draw[this.CELL_CLASS](new paper.Point(0, 0)), this.insertChild(t, e), 
            e;
        }, i;
    }(Draw.DomContainer), Draw.BootstrapTableHeadRow = function(t) {
        function e() {
            return i = e.__super__.constructor.apply(this, arguments);
        }
        var n;
        return s(e, t), e.prototype.TYPE = "BootstrapTableHeadRow", e.prototype.KEY = "bstableheadrow", 
        e.prototype.CELL_CLASS = "BootstrapTableHeadCell", n = ".bs-head", e.prototype.OPTIONS = {
            store_config:!1,
            override_styles:!0,
            auto_width:!0,
            auto_height:!0,
            root:n,
            can_edit:!1,
            can_edit_auto_sizing:!1,
            watch_size:"height",
            html:'<tr class="bs-head"></tr>',
            removeClasses:[ "bs-head" ],
            accepts:[ {
                container:"tr",
                accepts:"th",
                dimension:"x",
                highlight_empty:!0
            } ]
        }, e;
    }(Draw.BootstrapTableRow), Draw.BootstrapTableCell = function(t) {
        function e() {
            return n = e.__super__.constructor.apply(this, arguments);
        }
        var i;
        return s(e, t), e.prototype.TYPE = "BootstrapTableCell", e.prototype.KEY = "bstablecell", 
        i = ".bs-cell", e.prototype.OPTIONS = Draw.Dom.textOptions(i, {
            can_edit:!0,
            can_edit_auto_sizing:!1,
            watch_size:"height",
            html:'<td class="bs-cell"><span class="editable-element">Text can go here</span></td>',
            removeClasses:[ "bs-cell" ],
            unwrap:[ "span.editable-element" ],
            accepts:[ {
                list:">*:not(.dom-placeholder, .column, table, tr, td, .fluid-row, .container)",
                accepts:"*:not(.dom-responsive-container, .column, table, tr, td, .fluid-row, .container)",
                dimension:"auto",
                highlight_empty:!0
            } ],
            config:{
                fill_color:i,
                border:i
            }
        }), e.prototype.getTableParent = function() {
            return this.parent && this.parent.parent && "BootstrapTable" === this.parent.parent.TYPE ? this.parent.parent :null;
        }, e.prototype.getRowToRemove = function() {
            var t;
            return t = this.getTableParent(), t ? t.getRowToRemove(this) :void 0;
        }, e.prototype.getColumnToRemove = function() {
            var t;
            return t = this.getTableParent(), t ? t.getColumnToRemove(this) :void 0;
        }, e.prototype.insertColumnAfter = function() {
            var t;
            return t = this.getTableParent(), t ? t.insertColumnAfter(this) :void 0;
        }, e.prototype.insertColumnBefore = function() {
            var t;
            return t = this.getTableParent(), t ? t.insertColumnBefore(this) :void 0;
        }, e.prototype.insertRowAfter = function() {
            var t;
            return t = this.getTableParent(), t ? t.insertRowAfter(this) :void 0;
        }, e.prototype.insertRowBefore = function() {
            var t;
            return t = this.getTableParent(), t ? t.insertRowBefore(this) :void 0;
        }, e;
    }(Draw.DomContainer), Draw.BootstrapTableHeadCell = function(t) {
        function e() {
            return o = e.__super__.constructor.apply(this, arguments);
        }
        var i;
        return s(e, t), e.prototype.TYPE = "BootstrapTableHeadCell", e.prototype.KEY = "bstableheadcell", 
        i = ".bs-head-cell", e.prototype.OPTIONS = Draw.Dom.textOptions(i, {
            can_edit:!0,
            watch_size:"height",
            html:'<th class="bs-head-cell editable-element">Heading</th>',
            removeClasses:[ "bs-head-cell", "editable-element" ],
            config:{
                fill_color:i,
                border:i
            }
        }), e;
    }(Draw.BootstrapTableCell), paper.Item.JSON_CLASSES.bstable = Draw.BootstrapTable, 
    paper.Item.JSON_CLASSES.bstableheadrow = Draw.BootstrapTableHeadRow, paper.Item.JSON_CLASSES.bstablerow = Draw.BootstrapTableRow, 
    paper.Item.JSON_CLASSES.bstableheadcell = Draw.BootstrapTableHeadCell, paper.Item.JSON_CLASSES.bstablecell = Draw.BootstrapTableCell;
}.call(this), function() {
    var t, e, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.BootstrapThumbnailGrid = function(e) {
        function i() {
            return t = i.__super__.constructor.apply(this, arguments);
        }
        var o;
        return n(i, e), i.prototype.TYPE = "BootstrapThumbnailGrid", i.prototype.KEY = "bsthumbnailgrid", 
        o = ".thumbnails", i.prototype.OPTIONS = Draw.Dom.boxOptions(o, {
            highlight_empty:!0,
            accepts:[ {
                container:o,
                accepts:"li.bs-thumb",
                dimension:"auto"
            } ],
            html:'<ul class="thumbnails"></ul>'
        }), i;
    }(Draw.DomContainer), Draw.BootstrapThumbnail = function(t) {
        function i() {
            return e = i.__super__.constructor.apply(this, arguments);
        }
        var o;
        return n(i, t), i.prototype.TYPE = "BootstrapThumbnail", i.prototype.KEY = "bsthumbnail", 
        o = ".bs-thumb", i.prototype.OPTIONS = Draw.Dom.boxOptions(o, {
            highlight_empty:!0,
            accepts:[ {
                container:".thumbnail",
                accepts:"h1, h2, h3, h4, h5, h6, p, img, a, button, form, .btn-group, .btn-toolbar, .dom-paragraph, .paragraph",
                dimension:"y"
            } ],
            removeClasses:[ "bs-thumb" ],
            html:'<li class="bs-thumb span4">\n  <div class="thumbnail">\n  </div>\n</li>',
            config:{
                column_span:{
                    node:o,
                    type:"custom_class",
                    options:[ [ "span1", "1" ], [ "span2", "2" ], [ "span3", "3" ], [ "span4", "4" ], [ "span5", "5" ], [ "span6", "6" ], [ "span7", "7" ], [ "span8", "8" ], [ "span9", "9" ], [ "span10", "10" ], [ "span11", "11" ], [ "span12", "12" ] ]
                }
            }
        }, ".thumbnail"), i;
    }(Draw.DomContainer), paper.Item.JSON_CLASSES.bsthumbnail = Draw.BootstrapThumbnail, 
    paper.Item.JSON_CLASSES.bsthumbnailgrid = Draw.BootstrapThumbnailGrid;
}.call(this), function() {
    var t, e, i, n, o, r, s, a, l = {}.hasOwnProperty, c = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var n in e) l.call(e, n) && (t[n] = e[n]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.BootstrapPageHeading = function(e) {
        function i() {
            return t = i.__super__.constructor.apply(this, arguments);
        }
        var n, o;
        return c(i, e), i.prototype.TYPE = "BootstrapPageHeading", i.prototype.KEY = "bspageheading", 
        n = ".page-header", o = ".page-header h1", i.prototype.OPTIONS = Draw.Dom.textAndBoxOptions(n, {
            unwrap:[ "span.editable-element" ],
            html:'<div class="page-header">\n  <h1>\n    <span class="editable-element">Page heading</span>\n  </h1>\n</div>',
            accepts:[ {
                container:"h1",
                accepts:"small, span, a, .btn",
                insertType:"append",
                dimension:"auto"
            } ],
            config:{
                fill_color:n,
                roundness:n,
                background_image:n,
                background_repeat:n,
                background_position:n,
                background_size:n,
                box_shadow:n,
                border:n,
                padding_top:n,
                padding_right:n,
                padding_bottom:n,
                padding_left:n,
                margin_top:n,
                margin_right:n,
                margin_bottom:n,
                margin_left:n,
                pull:{
                    node:n,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                }
            }
        }, o), i;
    }(Draw.DomContainer), Draw.BootstrapSubHeading = function(t) {
        function i() {
            return e = i.__super__.constructor.apply(this, arguments);
        }
        var n;
        return c(i, t), i.prototype.TYPE = "BootstrapSubHeading", i.prototype.KEY = "bssubheading", 
        n = "small", i.prototype.OPTIONS = Draw.Dom.textOptions(n, {
            override_styles:!0,
            can_edit_auto_sizing:!1,
            removeClasses:[ "editable-element" ],
            html:'<small class="editable-element">Subheading</small>'
        }), i;
    }(Draw.DomObject), Draw.BootstrapHeading = function(t) {
        function e() {
            return i = e.__super__.constructor.apply(this, arguments);
        }
        var n;
        return c(e, t), e.prototype.TYPE = "BootstrapHeading", e.prototype.KEY = "bsheading", 
        n = ".heading", e.prototype.OPTIONS = Draw.Dom.textAndBoxOptions(n, {
            unwrap:[ "span.editable-element" ],
            html:'<h1 class="heading">\n  <span class="editable-element">Heading</span>\n</h1>',
            accepts:[ {
                container:".heading",
                accepts:"small, span, a, .btn, .icon",
                insertType:"append",
                dimension:"auto"
            } ],
            config:{
                tag_type:{
                    node:n,
                    type:"tag_name",
                    options:[ [ "h1", "H1" ], [ "h2", "H2" ], [ "h3", "H3" ], [ "h4", "H4" ], [ "h5", "H5" ], [ "h6", "H6" ] ]
                },
                pull:{
                    node:n,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                }
            }
        }), e;
    }(Draw.DomContainer), Draw.BootstrapParagraph = function(t) {
        function e() {
            return n = e.__super__.constructor.apply(this, arguments);
        }
        var i;
        return c(e, t), mixin(e, Draw.BodyTextMixin), e.prototype.UNWRAP_PARENT = !0, e.prototype.NODE_NAME = "p", 
        e.prototype.TYPE = "BootstrapParagraph", e.prototype.NAME = "BootstrapBodyText", 
        e.prototype.KEY = "bsparagraph", i = ".paragraph > *", e.prototype.OPTIONS = Draw.Dom.textAndBoxOptions(".paragraph", {
            html:'<div class="paragraph editable-element"><p>Lorem Ipsum...</p></div>',
            config:{
                pull:{
                    node:".paragraph",
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                }
            }
        }, i), e;
    }(Draw.DomObject), Draw.BootstrapPre = function(t) {
        function e() {
            return o = e.__super__.constructor.apply(this, arguments);
        }
        var i;
        return c(e, t), e.prototype.TYPE = "BootstrapPre", e.prototype.KEY = "bspre", i = ".dom-pre", 
        e.prototype.OPTIONS = Draw.Dom.textAndBoxOptions(i, {
            html:'<pre class="dom-pre editable-element">Preformatted text here</pre>',
            config:{
                pull:{
                    node:i,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                }
            }
        }, i), e;
    }(Draw.DomObject), Draw.BootstrapLink = function(t) {
        function e() {
            return r = e.__super__.constructor.apply(this, arguments);
        }
        var i;
        return c(e, t), e.prototype.TYPE = "BootstrapLink", e.prototype.KEY = "bslink", 
        i = ".dom-link", e.prototype.OPTIONS = Draw.Dom.textAndBoxOptions(i, {
            can_edit_auto_sizing:!1,
            html:'<a class="dom-link editable-element" href="#">Link!</div>',
            config:{
                pull:{
                    node:i,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                },
                link_href:{
                    node:i,
                    type:"custom_string_prop",
                    prop:"href"
                }
            }
        }), e;
    }(Draw.DomObject), Draw.BootstrapList = function(t) {
        function e() {
            return s = e.__super__.constructor.apply(this, arguments);
        }
        var i;
        return c(e, t), mixin(e, Draw.BodyTextMixin), e.prototype.UNWRAP_PARENT = !1, e.prototype.NODE_NAME = "li", 
        e.prototype.TYPE = "BootstrapList", e.prototype.KEY = "bslist", i = ".dom-list", 
        e.prototype.OPTIONS = Draw.Dom.textAndBoxOptions(i, {
            html:'<ul class="dom-list editable-element"><li>My list item</li></ul>',
            config:{
                line_height:i + " li",
                list_type:{
                    node:i,
                    type:"tag_name",
                    options:[ [ "ul", "Unordered" ], [ "ol", "Ordered" ] ]
                },
                pull:{
                    node:i,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                }
            }
        }), e;
    }(Draw.DomObject), Draw.BootstrapHeroUnit = function(t) {
        function e() {
            return a = e.__super__.constructor.apply(this, arguments);
        }
        var i;
        return c(e, t), e.prototype.TYPE = "BootstrapHeroUnit", e.prototype.KEY = "bsherounit", 
        i = ".hero-unit", e.prototype.OPTIONS = Draw.Dom.boxOptions(i, {
            highlight_empty:!1,
            accepts:[ {
                container:".hero-unit",
                list:".btns, h1, h2, h3, h4, h5, h6, p, .dom-paragraph, .paragraph",
                accepts:"h1, h2, h3, h4, h5, h6, p, .dom-paragraph, .paragraph",
                dimension:"auto",
                highlight_empty:!1
            }, {
                container:".btns",
                accepts:".btn, img",
                dimension:"auto",
                highlight_empty:!1
            } ],
            html:'<div class="hero-unit">\n  <div class="child-place child-place-0"></div>\n  <div class="child-place child-place-1"></div>\n  <div class="btns">\n    <div class="child-place child-place-2"></div>\n  </div>\n</div>'
        }), e;
    }(Draw.DomContainer), paper.Item.JSON_CLASSES.bsherounit = Draw.BootstrapHeroUnit, 
    paper.Item.JSON_CLASSES.bspageheading = Draw.BootstrapPageHeading, paper.Item.JSON_CLASSES.bssubheading = Draw.BootstrapSubHeading, 
    paper.Item.JSON_CLASSES.bsheading = Draw.BootstrapHeading, paper.Item.JSON_CLASSES.bsparagraph = Draw.BootstrapParagraph, 
    paper.Item.JSON_CLASSES.bspre = Draw.BootstrapPre, paper.Item.JSON_CLASSES.bslist = Draw.BootstrapList, 
    paper.Item.JSON_CLASSES.bslink = Draw.BootstrapLink;
}.call(this), function() {
    var t, e, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.DivContainer = function(e) {
        function i() {
            return t = i.__super__.constructor.apply(this, arguments);
        }
        var o;
        return n(i, e), i.prototype.TYPE = "DivContainer", i.prototype.KEY = "div", o = ".dom-div", 
        i.prototype.OPTIONS = Draw.Dom.textAndBoxOptions(o, {
            can_edit:!1,
            accepts:[ {
                container:o,
                list:">*:not(.dom-placeholder)",
                accepts:"*:not(.dom-placeholder)",
                dimension:"auto"
            } ],
            removeClasses:[ "dom-div" ],
            html:'<div class="dom-div"></div>',
            config:{
                pull:{
                    node:o,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                }
            }
        }), i;
    }(Draw.DomContainer), Draw.SpanContainer = function(t) {
        function i() {
            return e = i.__super__.constructor.apply(this, arguments);
        }
        var o;
        return n(i, t), i.prototype.TYPE = "SpanContainer", i.prototype.KEY = "span", o = ".dom-sp", 
        i.prototype.OPTIONS = Draw.Dom.textAndBoxOptions(o, {
            can_edit:!1,
            accepts:[ {
                container:o,
                list:">*:not(.dom-placeholder)",
                accepts:"*:not(.dom-placeholder)",
                dimension:"auto"
            } ],
            removeClasses:[ "dom-sp" ],
            html:'<span class="dom-sp"></span>'
        }), i;
    }(Draw.DomContainer), paper.Item.JSON_CLASSES.div = Draw.DivContainer, paper.Item.JSON_CLASSES.span = Draw.SpanContainer;
}.call(this), function() {
    var t, e, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.DivElement = function(e) {
        function i() {
            return t = i.__super__.constructor.apply(this, arguments);
        }
        var o;
        return n(i, e), i.prototype.TYPE = "DivElement", i.prototype.KEY = "divelem", o = ".dom-div-elem", 
        i.prototype.OPTIONS = Draw.Dom.textAndBoxOptions(o, {
            removeClasses:[ "dom-div-elem", "editable-element" ],
            html:'<div class="dom-div-elem editable-element">Lorem ipsum...</div>',
            config:{
                pull:{
                    node:o,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                }
            }
        }), i;
    }(Draw.DomObject), Draw.SpanElement = function(t) {
        function i() {
            return e = i.__super__.constructor.apply(this, arguments);
        }
        var o;
        return n(i, t), i.prototype.TYPE = "SpanElement", i.prototype.KEY = "spanelem", 
        o = ".dom-sp-elem", i.prototype.OPTIONS = Draw.Dom.textAndBoxOptions(o, {
            removeClasses:[ "dom-sp-elem", "editable-element" ],
            html:'<span class="dom-sp-elem editable-element">Lorem ipsum...</span>',
            config:{
                pull:{
                    node:o,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                }
            }
        }), i;
    }(Draw.DomObject), paper.Item.JSON_CLASSES.divelem = Draw.DivElement, paper.Item.JSON_CLASSES.spanelem = Draw.SpanElement;
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    }, o = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.FontIcon = function(i) {
        function r() {
            return this._watchSize = e(this._watchSize, this), t = r.__super__.constructor.apply(this, arguments);
        }
        var s;
        return n(r, i), r.prototype._module = "FontIcon", r.prototype.TYPE = "FontIcon", 
        r.prototype.KEY = "ficon", s = ".icon", r.prototype.OPTIONS = {
            root:s,
            can_edit:!1,
            store_config:!1,
            override_styles:!0,
            can_edit_auto_sizing:!1,
            config:{
                text_color:s,
                text_shadow:s,
                font_size:s,
                margin_top:s,
                margin_right:s,
                margin_bottom:s,
                margin_left:s,
                pull:{
                    node:s,
                    type:"custom_class",
                    options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                }
            }
        }, r.prototype.getCssComments = function() {
            return "Using this css requires Font Awesome:\nhttp://fortawesome.github.com/Font-Awesome/";
        }, r.prototype.resetToBaseStyles = function() {
            return r.__super__.resetToBaseStyles.call(this), this._fitSize(!0);
        }, r.prototype._scrubHtml = function(t) {
            return r.__super__._scrubHtml.call(this, t), o.call(this.get("override"), "font_size") < 0 && t.css({
                width:"",
                height:"",
                "font-size":""
            }), t;
        }, r.prototype._watchSize = function(t, e) {
            return null == e && (e = {}), o.call(this.get("override"), "font_size") < 0 ? r.__super__._watchSize.call(this, t, e) :void 0;
        }, r.prototype._setSnapped = function(t, e) {
            return r.__super__._setSnapped.call(this, t, e), t && o.call(this.get("override"), "font_size") < 0 && this._fitSize(!0), 
            t;
        }, r.prototype._setSize = function(t, e) {
            var i, n, r, s;
            return t && (this.resetBoundsCache(), i = this.get("font_size"), n = [ t.width, t.height ], 
            (e && !e.init || e && e.init && (s = parseInt(i), o.call(n, s) < 0) && !this.get("snapped")) && (r = Math.min(t.width, t.height), 
            this.set("font_size", r + "px")), this.el.height(t.height), this.el.width(t.width)), 
            t;
        }, r.fromJSON = function(t) {
            return t.config && !t.config.font_size && (t.config.font_size = ".icon"), r.__super__.constructor.fromJSON.call(this, t);
        }, r;
    }(Draw.DomObject), paper.Item.JSON_CLASSES.ficon = Draw.FontIcon;
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.DomHeading = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        var o;
        return i(n, e), n.prototype._module = "DomHeading", n.prototype.TYPE = "DomHeading", 
        n.prototype.KEY = "dhead", o = ".dom-heading", n.prototype.OPTIONS = {
            root:o,
            watch_size:!0,
            auto_width:!0,
            auto_height:!0,
            store_config:!1,
            override_styles:!0,
            html:'<h1 class="dom-heading editable-element">Heading</h1>',
            css:"",
            config:{
                roundness:o,
                fill_color:o,
                background_image:o,
                background_repeat:o,
                background_position:o,
                background_size:o,
                text_color:o,
                border:o,
                font_face:o,
                font_weight:o,
                font_size:o,
                is_italic:o,
                is_underlined:o,
                alignment:o,
                line_height:o,
                text_shadow:o,
                padding_top:o,
                padding_right:o,
                padding_bottom:o,
                padding_left:o,
                margin_top:o,
                margin_right:o,
                margin_bottom:o,
                margin_left:o,
                tag_type:{
                    node:o,
                    type:"tag_name",
                    options:[ [ "h1", "H1" ], [ "h2", "H2" ], [ "h3", "H3" ], [ "h4", "H4" ], [ "h5", "H5" ], [ "h6", "H6" ] ]
                }
            }
        }, n.prototype.getCssClass = function() {
            return "heading";
        }, n.prototype.setContent = function(t) {
            return this.setHtml(this.el.html(t).outerHtml());
        }, n.prototype.getContent = function() {
            return this.el.html();
        }, n.prototype._getOptions = function(t) {
            return t = n.__super__._getOptions.call(this, t), t.config.is_underlined || (t.config.is_underlined = o), 
            t.config.tag_type || (t.config.tag_type = "h2"), t;
        }, n.prototype._scrubHtml = function(t) {
            return t = n.__super__._scrubHtml.call(this, t), t.css("font-size", this.get("font_size"));
        }, n;
    }(Draw.RectangleDomObject), paper.Item.JSON_CLASSES.dhead = Draw.DomHeading;
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.DomImage = function(i) {
        function o() {
            return this.setImage = e(this.setImage, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype._module = "DomImage", o.prototype.TYPE = "DomImage", 
        o.prototype.REPLACEMENT_URL = Asset.IMAGE_REPLACEMENT_URL, o.prototype.initialize = function(t, e) {
            var i, n, r;
            return null == e && (e = {}), e = e || {}, n = {
                replaceUrl:!1,
                replacementUrl:this.REPLACEMENT_URL,
                eidPattern:/\/(uploads|images)\/([0-9a-f]+)/gi
            }, i = e.addToActiveLayer, r = null, t instanceof window.Image && (r = t, t = t.src || t), 
            e.name || (e.name = this.generateName()), o.__super__.initialize.call(this, new paper.Point(0, 0), _.extend(n, {
                override_styles:!0,
                store_config:!1,
                size:new paper.Size(0, 0),
                root:".dom-image",
                can_edit:!1,
                config:{
                    border_top_left_radius:".dom-image",
                    border_bottom_left_radius:".dom-image",
                    border_top_right_radius:".dom-image",
                    border_bottom_right_radius:".dom-image",
                    margin_top:".dom-image",
                    margin_right:".dom-image",
                    margin_bottom:".dom-image",
                    margin_left:".dom-image",
                    opacity:".dom-image",
                    box_shadow:".dom-image",
                    pull:{
                        node:".dom-image",
                        type:"custom_class",
                        options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                    }
                },
                html:'<img class="dom-image"/>',
                css:"",
                addToActiveLayer:!1,
                watch_size:!0,
                auto_height:!0,
                auto_width:!0
            }, e)), this._initializing = !0, this.set({
                url:t,
                opacity:1
            }, {
                imageObj:r,
                init:!0
            }), this.options.addToActiveLayer = i, this.shouldAdd() && paper.project.activeLayer.addChild(this), 
            this._initializing = !1;
        }, o.prototype.getDefaultElementId = function() {
            return "dom-image-" + this.id;
        }, o.prototype.supportedProperties = function() {
            return o.__super__.supportedProperties.call(this).concat([ "loaded", "url" ]);
        }, o.prototype.getImages = function() {
            return [ this ];
        }, o.prototype.toJSON = function() {
            var t;
            return t = this.get(), this.options.replaceUrl && this.hasDataUrl() && (t.url = this.options.replacementUrl), 
            delete t.loaded, Draw.toJSON(_.extend({
                t:"dimg"
            }, t));
        }, o.createObject = function(t) {
            return new Draw.DomImage(t.url, t);
        }, o.upgradeJSON = function(t) {
            return o.__super__.constructor.upgradeJSON.call(this, t), t.float && (t.pull = t.float), 
            t;
        }, o.prototype.fromJSON = function(t, e) {
            var i = this;
            return null == e && (e = {}), o.__super__.fromJSON.call(this, t, e), t = Draw.fromJSON(t), 
            t.size && !t.size.isZero() && Draw.DomImage.onLoadImage(this, function() {
                return i.set({
                    size:t.size
                }, {
                    init:!0
                });
            }), this;
        }, o.prototype.getName = function() {
            return this.get("name");
        }, o.prototype.setName = function(t, e) {
            return this.set("name", t, e);
        }, o.prototype.generateName = function() {
            return _.uniqueId("Image ");
        }, o.prototype.setImage = function(t, e) {
            var i, n;
            return e = e || {}, t.width || (pds(this, "no width on image in setImage, calling loadImage", this.id), 
            t.width) ? (n = new paper.Size(t.width, t.height), this.el[0].src !== t.src && (i = $(t).addClass(this.el[0].className), 
            i.attr("style", this.el.attr("style")), i.attr("data-link", this.el.attr("data-link")), 
            this.el.replaceWith(i), this.el = i, this.initElementId(this.el)), e = _.clone(e), 
            e["new"] && delete e["new"], e.old && delete e.old, this.getSize().isZero() && this.setSize(n, {
                init:!0
            }), this.trigger("load:image", this), pds(this, "setting loaded for", this), this.set("loaded", !0, {
                childop:!0,
                sync:!1,
                init:e.init
            })) :this.loadImage(t, e);
        }, o.prototype.loadImage = function(t, e) {
            var i = this;
            return e = e || {}, t.src.indexOf(this.options.replacementUrl) > 0 ? this.set("loaded", !0, {
                childop:!0,
                ignore:!0,
                init:e.init
            }) :(this.set("loaded", !1, {
                childop:!0,
                ignore:!0,
                init:e.init
            }), t.onload = function() {
                return t.onload = null, pds(i, "Draw.Image image.onload called: ", i.id, t.width, t.height), 
                i.setImage(t, e);
            }, t.onerror = function() {
                return pds(i, "Error loading image"), i.trigger("error:image", i, !0);
            });
        }, o.prototype.isLoaded = function() {
            return this.get("loaded");
        }, o.prototype.hasDataUrl = function() {
            return Util.isDataUrl(this.get("url"));
        }, o.prototype.getImageEid = function() {
            var t;
            return t = this.options.eidPattern.exec(this.get("url")), t ? t[2] :null;
        }, o.prototype.getUrl = function() {
            return this.get("url");
        }, o.prototype.setUrl = function(t, e) {
            return this.set("url", t, e);
        }, o.prototype._scrubHtml = function(t) {
            return t = o.__super__._scrubHtml.call(this, t), t[0].src || (t[0].src = this.get("url")), 
            t;
        }, o.prototype._removeClasses = function(t) {
            return o.__super__._removeClasses.call(this, t), t.removeClass("dom-image"), t.addClass("image"), 
            t;
        }, o.prototype._setUrl = function(t, e) {
            return this.set({
                loaded:!1
            }, {
                childop:!0,
                ignore:!0,
                init:e.init
            }), e.imageObj ? (pds(this, "Using imageObj from options. Assuming it's already loaded..."), 
            this._image = e.imageObj, this.setImage(this._image, e)) :(pds(this, "just url, loading the image...", this), 
            this._image = new window.Image(), this._image.src = t, this.loadImage(this._image, e)), 
            t;
        }, o.prototype._setOpacity = function(t) {
            return null != t ? parseFloat(t) :1;
        }, o;
    }(Draw.DomElement), Draw.DomImage.onLoadImage = function(t, e) {
        var i, n, o;
        return t.isLoaded() ? e.call(this, t) :(n = "load:image", i = "error:image", o = function(t, r) {
            return e.call(this, t, r), t.unbind(n, o), t.unbind(i, o);
        }, t.bind(n, o), t.bind(i, o));
    }, paper.Item.JSON_CLASSES.img = Draw.DomImage, paper.Item.JSON_CLASSES.dimg = Draw.DomImage, 
    Draw.DomImage.prototype.getPrevious = function(t) {
        var e;
        return e = this._model.getPrevious(t), "url" === t && this.options.replaceUrl && Util.isDataUrl(e) && (e = this.options.replacementUrl), 
        e;
    };
}.call(this), function() {
    Draw.NodePlacement = {
        _module:"NodePlacement",
        TOLERANCE:10,
        NULL:[ null, null, null ],
        placeholder:function(t) {
            var e;
            return t && (e = t.is("img"), e && this._placeholder && "SPAN" !== this._placeholder[0].tagName ? (Draw.NodePlacement.removePlaceholder(), 
            this._placeholder = $("<span/>")) :e || this._placeholder && this._placeholder[0].tagName === t[0].tagName || (Draw.NodePlacement.removePlaceholder(), 
            this._placeholder = t.clone(), this._placeholder.removeAttr("style"), this._placeholder.removeAttr("id"), 
            this._placeholder.html("")), this._placeholder && (t.is("img") || t.children().length || !Draw.NodePlacement.isInline(t) || this._placeholder.text(t.text()), 
            this._placeholder[0].className = t[0].className, this._placeholder.addClass("dom-placeholder"))), 
            this._placeholder || (Draw.NodePlacement.removePlaceholder(), this._placeholder = $("<div/>", {
                "class":"dom-placeholder"
            })), this._placeholder;
        },
        removePlaceholder:function() {
            return this._placeholder && this._placeholder.remove(), this._placeholder = null;
        },
        isInline:function(t) {
            return t ? (null == t[0].isInline && (t[0].isInline = Draw.NodePlacement._getDisplayType(t).indexOf("inline") > -1), 
            t[0].isInline) :void 0;
        },
        getBounds:function(t) {
            var e;
            return e = t.getCanvasOffset(), new paper.Rectangle(e.x, e.y, t.outerWidth(), t.outerHeight());
        },
        placeNode:function(t, e, i, n) {
            var o;
            switch (o = function(t, e) {
                return n !== !1 ? Draw.NodePlacement.placeNode($.textNode(" "), t, e, !1) :void 0;
            }, i) {
              case "prepend":
                return e.prepend(t), o(t, "after");

              case "append":
                return e.append(t), o(t, "before");

              case "before":
                return t.insertBefore(e), o(e, "before");

              case "after":
                return t.insertAfter(e), o(e, "after");
            }
        },
        findContainer:function(t, e) {
            return e instanceof $ ? e :t.is(e) ? t :t.find(e);
        },
        findReferenceNode:function(t) {
            var e, i;
            return i = {}, e = function(e, n) {
                var o;
                if (!i.insertType) return o = t[e](), o.length && !o.is(".dom-placeholder") ? (i.insertType = n, 
                i.referenceNode = o) :void 0;
            }, e("next", "before"), e("prev", "after"), e("parent", "append"), [ i.referenceNode, i.insertType ];
        },
        findClosestNode:function(t, e, i) {
            var n, o, r, s, a;
            return o = this.getBounds(e), r = this, n = null, a = i, s = "block", t.each(function(t) {
                var l, c, h, u, d;
                return h = $(this), "auto" === i && (u = Draw.NodePlacement._getDisplayType(h), 
                d = Draw.NodePlacement._getDisplayType(e), s = "block", a = "y", u.indexOf("inline") > -1 && d.indexOf("inline") > -1 && (s = d, 
                a = "x")), l = r.getBounds(h), o.intersects(l) && (c = a ? o[a] - l.center[a] :o.topLeft.subtract(l.topLeft).length, 
                (null == n || Math.abs(c) < Math.abs(n[2])) && (n = [ t, h, c, s ])), null;
            }), n;
        },
        findNodeInList:function(t, e, i) {
            var n, o, r, s, a, l, c, h;
            return pds(this, "-- finding node in list", t, e, i), c = t.el || t, e = e.el || e, 
            n = i.accepts || i.list, Draw.NodePlacement.NULL = [ null, null, null ], e.is(n) ? (s = Draw.NodePlacement._getDisplayType(e), 
            r = this.findContainer(c, i.container), (o = this.findClosestNode(r, e)) ? (r = o[1], 
            "append" === (h = i.insertType) || "prepend" === h ? [ r, i.insertType, s ] :(l = r.find(i.list).filter(function() {
                return this.parentNode === r[0];
            }), pds(this, "container, list", r, l), l.length ? (o = this.findClosestNode(l, e, i.dimension), 
            pds(this, "closest?", o), o ? (c = o[1], a = o[2] > 0 ? "after" :"before", [ c, a, o[3] ]) :[ r, "append", s ]) :[ r, "append", s ])) :Draw.NodePlacement.NULL) :Draw.NodePlacement.NULL;
        },
        findNode:function(t, e, i) {
            return i = i || {}, i.list ? this.findNodeInList(t, e, i) :[ null, null, null ];
        },
        _getDisplayType:function(t) {
            var e, i;
            return "IMG" === t[0].tagName ? "inline-block" :("absolute" === t.css("position") && (e = !0, 
            t.css({
                position:"static"
            })), i = t.css("display"), e && t.css({
                position:"absolute"
            }), i);
        }
    };
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.DomOval = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        var o;
        return i(n, e), n.prototype._module = "DomOval", n.prototype.TYPE = "DomOval", n.prototype.KEY = "doval", 
        n.prototype.className = "dom-oval", o = ".dom-oval", n.prototype.OPTIONS = {
            store_config:!1,
            config:{
                fill_color:o,
                background_image:o,
                background_repeat:o,
                background_position:o,
                background_size:o,
                border:o,
                box_shadow:o,
                margin_top:o,
                margin_bottom:o,
                margin_right:o,
                margin_left:o
            }
        }, n.prototype._removeClasses = function(t) {
            return n.__super__._removeClasses.call(this, t), t.removeClass("dom-oval"), (t[0].className || "").trim() || t.addClass("oval"), 
            t;
        }, n.prototype._scrubCss = function(t) {
            return t = n.__super__._scrubCss.call(this, t), t["border-radius"] = "" + t.width + " / " + t.height, 
            t;
        }, n.prototype._setSize = function(t, e) {
            return n.__super__._setSize.call(this, t, e), t && this.el.css({
                "border-radius":"" + t.width + "px / " + t.height + "px"
            }), t;
        }, n;
    }(Draw.DomRectangle), paper.Item.JSON_CLASSES.doval = Draw.DomOval, paper.Item.JSON_CLASSES.oval = Draw.DomOval;
}.call(this), function() {
    var t, e, i = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, n = {}.hasOwnProperty, o = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var o in e) n.call(e, o) && (t[o] = e[o]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.GradientEditor = function(e) {
        function n() {
            return this.getBounds = i(this.getBounds, this), this.initialize = i(this.initialize, this), 
            t = n.__super__.constructor.apply(this, arguments);
        }
        return o(n, e), n.prototype.initialize = function(t, e) {
            return this._project = t, this._project.activateToolLayer && this._project.activateToolLayer(), 
            this.gradientColor = e, this._project.toolLayer ? this._project.toolLayer.addChild(this) :this._project.activeLayer.addChild(this), 
            this.setLocked(!0), n.__super__.initialize.call(this), this.group = new paper.Group(), 
            this.addChild(this.group), this.drawPaths(), this.updatePaths(), this._project.deactivateToolLayer ? this._project.deactivateToolLayer() :void 0;
        }, n.prototype.drawPaths = function() {
            var t;
            return t = new paper.Rectangle(0, 0, 20, 50), this.outerRect = new Draw.Rectangle(t), 
            this.outerRect.set({
                stroke_width:1,
                stroke_color:"black",
                fill_color:"white",
                stroke_align:"outer",
                roundness:5
            }), this.innerRect = new Draw.Rectangle(t), this.innerRect.set({
                stroke_width:1,
                stroke_color:null,
                roundness:4
            }), this.stopTrack = new Draw.Rectangle(t), this.stopTrack.set({
                fill_color:new paper.RGBColor(0, 0, 0, .1)
            }), this.originCircle = new Draw.Path(), this.originCircle._closed = !0, this.originCircle.fillColor = "black", 
            this.originCircle.strokeWidth = 1, this.originCircle.strokeColor = "white", this.originCircle.set("stroke_align", "outer"), 
            this.destCircle = new Draw.Path(), this.destCircle._closed = !0, this.destCircle.fillColor = "black", 
            this.destCircle.strokeWidth = 3, this.destCircle.strokeColor = "white", this.destCircle.set("stroke_align", "outer"), 
            this.group.addChildren([ this.outerRect, this.innerRect, this.originCircle, this.destCircle, this.stopTrack ]), 
            this.drawStops();
        }, n.prototype.updatePaths = function(t) {
            var e, i, n, o, r, s, a, l, c, h, u;
            return r = this.gradientColor.origin, e = this.gradientColor.destination, t && (r = t.transform(r), 
            e = t.transform(e)), u = e.subtract(r), o = Draw.GradientEditor.WIDTH / 2, s = new paper.Point(Math.round(r.x - o), Math.round(r.y - o)), 
            i = new paper.Point(Math.round(s.x), Math.round(s.y + u.length)), a = new paper.Rectangle(s.x, s.y, Draw.GradientEditor.WIDTH, Math.round(u.length + Draw.GradientEditor.WIDTH)), 
            this.innerRect.set({
                fill_color:null
            }), this.outerRect.setBounds(a), this.innerRect.setBounds(new paper.Rectangle(a.x + 1, a.y + 1, a.width - 2, a.height - 2)), 
            Draw.GradientEditor.STOP_TRACK_WIDTH, this.stopTrack.setBounds(new paper.Rectangle(r.x + o, r.y, Draw.GradientEditor.STOP_TRACK_WIDTH, u.length)), 
            c = this.originCircle.strokeWidth, h = 2 * this.originCircle.strokeWidth, l = new paper.Rectangle(s.x + c, s.y + c, Draw.GradientEditor.WIDTH - h, Draw.GradientEditor.WIDTH - h), 
            this.originCircle.setSegments(this.innerRect._getOvalSegments(l)), c = this.destCircle.strokeWidth, 
            h = 2 * this.destCircle.strokeWidth, l = new paper.Rectangle(s.x + c, s.y + u.length + c, Draw.GradientEditor.WIDTH - h, Draw.GradientEditor.WIDTH - h), 
            this.destCircle.setSegments(this.innerRect._getOvalSegments(l)), this.updateStops(t), 
            this.scaleSelectedStop(), this.rotate(u.getAngle() - 90, r), n = this.gradientColor, 
            t && (n = n.clone(), n.transform(t)), this.innerRect.set({
                fill_color:n
            });
        }, n.prototype.setSelectedStop = function(t) {
            return this.selectedStop = t;
        }, n.prototype.scaleSelectedStop = function() {
            var t, e, i, n, o;
            if (this.selectedStop) {
                for (o = [], t = i = 0, n = this.gradientColor.gradient.stops.length; n >= 0 ? n > i :i > n; t = n >= 0 ? ++i :--i) {
                    if (e = this.gradientColor.gradient.stops[t], e.rampPoint === this.selectedStop.rampPoint && e.color === this.selectedStop.color) {
                        this.stops[t]._children[0].scale(), this.stops[t]._children[1].scale();
                        break;
                    }
                    o.push(void 0);
                }
                return o;
            }
        }, n.prototype.drawStops = function(t) {
            var e, i, n, o, r;
            for (this.stops = [], n = this.gradientColor.gradient.stops, o = 0, r = n.length; r > o; o++) i = n[o], 
            e = new paper.Group(), e.addChild(new Draw.GradientStop(this.gradientColor, i, !1, t)), 
            e.addChild(new Draw.GradientStop(this.gradientColor, i, !0, t)), this.stops.push(e);
            return this.group.addChildren(this.stops), this.stops;
        }, n.prototype.updateStops = function(t) {
            var e, i, n, o, r, s, a, l;
            if (n = this.gradientColor.gradient.stops, n.length !== this.stops.length) {
                for (a = this.stops, o = 0, s = a.length; s > o; o++) i = a[o], i.remove();
                return this.drawStops(t);
            }
            for (e = r = 0, l = n.length; l >= 0 ? l > r :r > l; e = l >= 0 ? ++r :--r) this.stops[e]._children[0].update(this.gradientColor, n[e], t), 
            this.stops[e]._children[1].update(this.gradientColor, n[e], t);
            return this.stops;
        }, n.prototype.getStops = function() {
            var t, e, i, n;
            for (e = [], t = i = 0, n = this.stops.length; n >= 0 ? n > i :i > n; t = n >= 0 ? ++i :--i) e = e.concat(this.stops[t]._children);
            return e;
        }, n.prototype.getBounds = function() {
            var t;
            return t = n.__super__.getBounds.call(this), this.inverse && (t = new paper.Rectangle(this.inverse.transform(t.topLeft), this.inverse.transform(t.bottomRight))), 
            t;
        }, n.prototype.draw = function(t, e) {
            var i, o;
            return this.matrix = i = e.matrix, i && (this.inverse = i.createInverse()), e.matrix = null, 
            e.renderModel && (o = e.renderModel.clone(), o.transform(i), e = _.extend({}, e, {
                renderModel:o
            })), this.updatePaths(i), n.__super__.draw.call(this, t, e);
        }, n;
    }(paper.Group), Draw.GradientEditor.WIDTH = 10, Draw.GradientEditor.STOP_TRACK_WIDTH = 8, 
    Draw.GradientStop = function(t) {
        function n() {
            return this.generateSegments = i(this.generateSegments, this), this.transformStopToPoint = i(this.transformStopToPoint, this), 
            this.update = i(this.update, this), this.updateColor = i(this.updateColor, this), 
            this.scale = i(this.scale, this), this.initialize = i(this.initialize, this), e = n.__super__.constructor.apply(this, arguments);
        }
        return o(n, t), n.prototype.HEIGHT = 12, n.prototype.WIDTH = 8, n.prototype.POINT = 6, 
        n.prototype.SCALE = 1.3, n.prototype.initialize = function(t, e, i, o) {
            return this._project = paper.project, n.__super__.initialize.call(this), this._isInner = i, 
            this._closed = !0, t && e ? this.update(t, e, o) :void 0;
        }, n.prototype.scale = function() {
            var t;
            return t = new paper.Matrix(), t.scale(this.SCALE, this.point), this.transform(t);
        }, n.prototype.updateColor = function(t, e) {
            return this.gradientStop = e || this.gradientStop, this.gradientColor = t || this.gradientColor, 
            this._isInner ? (this.fillColor = this.gradientStop.color, this.strokeColor = "white") :(this.fillColor = "white", 
            this.strokeColor = "black");
        }, n.prototype.update = function(t, e, i) {
            var n;
            return this.updateColor(t, e), n = this.generateSegments(this.gradientColor, this.gradientStop, i), 
            this.setSegments(n), this.strokeWidth = 1;
        }, n.prototype.transformStopToPoint = function(t, e, i) {
            var n, o, r, s, a;
            return o = t.origin, n = t.destination, i && (o = i.transform(o), n = i.transform(n)), 
            r = n.subtract(o), s = o.x + Draw.GradientEditor.WIDTH / 2, a = o.y + r.length * e.rampPoint, 
            new paper.Point(s, a);
        }, n.prototype.generateSegments = function(t, e, i) {
            var n, o, r, s, a, l, c;
            for (r = [], s = null, a = null, n = function(t, e) {
                return s = t, a = e, r.push(new paper.Segment(new paper.Point(Math.round(s), Math.round(a))));
            }, this.point = this.transformStopToPoint(t, e, i), this._isInner ? (n(this.point.x + 1, this.point.y), 
            n(s + this.POINT, a - this.HEIGHT / 2 + 1), n(s + this.WIDTH - 2, a), n(s, a + (this.HEIGHT - 2)), 
            n(s - (this.WIDTH - 2), a), n(this.point.x + 1, this.point.y)) :(n(this.point.x, this.point.y), 
            n(s + this.POINT, a - this.HEIGHT / 2), n(s + this.WIDTH, a), n(s, a + this.HEIGHT), 
            n(s - this.WIDTH, a), n(this.point.x, this.point.y)), l = 0, c = r.length; c > l; l++) o = r[l], 
            o.setSelected(!1);
            return r;
        }, n;
    }(paper.Path);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.Grid = function(i) {
        function o() {
            return this.draw = e(this.draw, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.getGrid = function() {
            return this.document.getGrid();
        }, o.prototype.draw = function(t, e) {
            var i, n, o, r, s, a, l;
            for (n = [], o = this.grid.getOffset(), s = this.grid.getGrid(), i = this.document.getSize(), 
            a = [], l = [], r = o.x || s; r < i.width; ) a.push(r), r += s;
            for (r = o.y || s; r < i.height; ) l.push(r), r += s;
            return t.save(), t.beginPath(), t.strokeStyle = this.grid.getColor().getCanvasStyle(t), 
            this.drawHorizontalGrid(l, t, e), this.drawVerticalGrid(a, t, e), t.restore();
        }, o;
    }(Draw.GridBase);
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.GridSystem = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        return i(n, e), n.prototype.getGrid = function() {
            return this.document.getGridSystem();
        }, n.prototype.bindToGrid = function() {
            return this.grid.bind("change:visible", this.onChangeVisible), this.grid.bind("change:color", this.onEvent), 
            this.grid.bind("change:column_color", this.onEvent), this.grid.bind("refresh", this.onEvent);
        }, n.prototype.draw = function(t, e) {
            var i, n, o, r, s, a, l, c, h, u, d, p = this;
            for (s = this.grid.getEffectiveSize(), r = this.document.getSize(), l = r.height, 
            !s && r.width > 960 && (s = 960), h = function(t, i) {
                return new paper.Rectangle(p._trans(t, e), p._trans(i, e));
            }, t.save(), t.beginPath(), s && s !== r.width && (a = this.grid.getGuides(), t.strokeStyle = this.grid.getColor().getCanvasStyle(t), 
            this.drawVerticalGrid(a, t, e)), o = this.grid.getColumnPositions(), n = this.grid.getColumnWidth(), 
            t.fillStyle = this.grid.getColumnColor().getCanvasStyle(t), u = 0, d = o.length; d > u; u++) i = o[u], 
            c = h(new paper.Point(i, 0), new paper.Point(i + n, l)), t.rect(c.x, c.y, c.width, c.height);
            return t.fill(), t.restore();
        }, n;
    }(Draw.GridBase);
}.call(this), Draw.Rectangle = Draw.Path.extend({
    _module:"Rectangle",
    TYPE:"Rectangle",
    initialize:function(t, e) {
        e = e || {}, t && (e = _.extend({
            position:t.point,
            size:t.size,
            roundness:0
        }, e)), this.base(t), this.set(e), this.setRectangle(t);
    },
    bindSegmentEvents:function() {},
    unbindSegmentEvents:function() {},
    _createCloneObject:function() {
        return this._clone(new this.constructor(this.getBounds()));
    },
    cssProperties:function() {
        var t = this.base();
        return t.push("roundness"), t;
    },
    toJSON:function() {
        var t = paper.Path.prototype.toJSON.call(this);
        return _.extend(t, {
            t:"rect",
            stroke_width:this.getStrokeWidth(),
            stroke:Color.NORMALIZE_JSON(this.getStrokeColor()),
            fill:Color.NORMALIZE_JSON(this.getFillColor()),
            r:this.getRoundness() || 0,
            pos:this.getPosition().toJSON(),
            sz:this.getSize().toJSON(),
            href:this.getHref()
        }), t;
    },
    setRectangle:function(t, e) {
        var i = 2 / 3 * (Math.sqrt(2) - 1), n = this;
        if (e = e || {}, setRectProps = function() {
            e.fromdraw = !0, n._model.set({
                position:t.getPoint(),
                size:t.getSize()
            }, e);
        }, !e.size) {
            var o = this._getRectangleSegments.call(this, t, e.selectSegments);
            return this.setSegments(o, e), this._closed = !0, setRectProps(), this;
        }
        var r = e.size;
        r = paper.Size.min(r, t.getSize().divide(2));
        var s = r.multiply(2 * i), a = t.getBottomLeft(), l = t.getTopLeft(), c = t.getTopRight(), h = t.getBottomRight();
        if (this.setSegments([ new paper.Segment(a.add(r.width, 0), null, [ -s.width, 0 ]), new paper.Segment(a.subtract(0, r.height), [ 0, s.height ], null), new paper.Segment(l.add(0, r.height), null, [ 0, -s.height ]), new paper.Segment(l.add(r.width, 0), [ -s.width, 0 ], null), new paper.Segment(c.subtract(r.width, 0), null, [ s.width, 0 ]), new paper.Segment(c.add(0, r.height), [ 0, -s.height ], null), new paper.Segment(h.subtract(0, r.height), null, [ 0, s.height ]), new paper.Segment(h.subtract(r.width, 0), [ s.width, 0 ], null) ], e), 
        !e.selectSegments) for (var u = 0; u < this._segments.length; u++) this._segments[u].setSelected(!!e.selectSegments);
        return this._closed = !0, setRectProps(), this;
    },
    _setRoundness:function(t, e) {
        if (t = parseInt(t), isNaN(t)) return this.getRoundness();
        var i = this.getBounds(), n = parseInt(Math.min(i.width, i.height)) / 2;
        return t = Math.min(n, parseInt(t)), this.setRectangle(this.getBounds(), _.extend({
            size:new paper.Size(t, t)
        }, e)), t;
    },
    setBounds:function(t, e) {
        this.cacheCurrentDrawableBounds();
        var i = this.get("roundness");
        i && (e = _.extend({
            size:new paper.Size(i, i)
        }, e)), this.setRectangle(t, e), this.transformColors(this.getBounds());
    }
}), Draw.Rectangle.fromJSON = function(t, e) {
    var i = new Draw.Rectangle(new paper.Rectangle(paper.Point.fromJSON(t.pos), paper.Size.fromJSON(t.sz)));
    return i.set({
        stroke_width:t.stroke_width,
        stroke_color:Color.NORMALIZE_FROM_JSON(t.stroke),
        fill_color:Color.NORMALIZE_FROM_JSON(t.fill),
        roundness:t.r || 0,
        href:t.href
    }), i.childrenFromJSON(t, e), i;
}, Draw.InvisibleRectangle = Draw.Rectangle.extend({
    shouldAdd:function() {
        return !1;
    }
}), Draw.Rectangle.supportedProperties = function() {
    var t = Draw.Path.supportedProperties();
    return t.push("roundness"), t;
}, Draw.PropertyMixin.generateGettersSetters(Draw.Rectangle), function() {
    var t, e, i = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, n = {}.hasOwnProperty, o = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var o in e) n.call(e, o) && (t[o] = e[o]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    }, r = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.TextFocuser = function() {
        function t() {
            this.val = i(this.val, this), this.focus = i(this.focus, this), this.focuser = $("<textarea/>"), 
            this.focuser.css({
                position:"fixed",
                "z-index":"-10",
                top:"-100000px",
                right:"0px",
                width:300,
                height:200,
                border:"none",
                id:"textfocuser"
            }), $("body").append(this.focuser);
        }
        return t.prototype.focus = function() {
            return this.focuser.focus(), this.focuser.select();
        }, t.prototype.val = function(t) {
            var e;
            return e = void 0 !== t ? this.focuser.val(t || "") :this.focuser.val(), this.focus(), 
            e;
        }, t.prototype.destroy = function() {
            return this.focuser.remove();
        }, t.instance = function() {
            return this._instance || (this._instance = new Draw.TextFocuser()), this._instance;
        }, t.destroy = function() {
            return this._instance && this._instance.destroy(), this._instance = null;
        }, t;
    }(), Draw.Text = function(e) {
        function n() {
            return this.draw = i(this.draw, this), this.drawStroke = i(this.drawStroke, this), 
            this.drawFill = i(this.drawFill, this), this.drawTextSelection = i(this.drawTextSelection, this), 
            this.drawSelection = i(this.drawSelection, this), this.drawBaseline = i(this.drawBaseline, this), 
            this._setStylesOnContext = i(this._setStylesOnContext, this), this._getFontString = i(this._getFontString, this), 
            this.pointToIndex = i(this.pointToIndex, this), this.getCursorRectangle = i(this.getCursorRectangle, this), 
            this.indexToColAndRow = i(this.indexToColAndRow, this), this.colAndRowToIndex = i(this.colAndRowToIndex, this), 
            this._sanitizeIndex = i(this._sanitizeIndex, this), this._shiftToAlignment = i(this._shiftToAlignment, this), 
            this._shiftFromAlignment = i(this._shiftFromAlignment, this), this._getAlignmentOffset = i(this._getAlignmentOffset, this), 
            this.hitTest = i(this.hitTest, this), this.setBounds = i(this.setBounds, this), 
            this.getBounds = i(this.getBounds, this), this.getRotatedBounds = i(this.getRotatedBounds, this), 
            this.getDrawableBounds = i(this.getDrawableBounds, this), this._getTextMetrics = i(this._getTextMetrics, this), 
            this._measureText = i(this._measureText, this), this._getContext = i(this._getContext, this), 
            this._setContent = i(this._setContent, this), this.setContent = i(this.setContent, this), 
            this._transform = i(this._transform, this), this.transform = i(this.transform, this), 
            this.translate = i(this.translate, this), this.usesFontFace = i(this.usesFontFace, this), 
            this.getLines = i(this.getLines, this), this.insertText = i(this.insertText, this), 
            this.getSelectedText = i(this.getSelectedText, this), this.getSelection = i(this.getSelection, this), 
            this.setSelection = i(this.setSelection, this), this._fillTextFocuserWithSelection = i(this._fillTextFocuserWithSelection, this), 
            this.getSelectableText = i(this.getSelectableText, this), this._setStrokeWidth = i(this._setStrokeWidth, this), 
            this.setStrokeWidth = i(this.setStrokeWidth, this), this._setPosition = i(this._setPosition, this), 
            this._setAlignment = i(this._setAlignment, this), this._setIsItalic = i(this._setIsItalic, this), 
            this._setFontWeight = i(this._setFontWeight, this), this._setFontFace = i(this._setFontFace, this), 
            this._setFontSize = i(this._setFontSize, this), this._setIsLocked = i(this._setIsLocked, this), 
            this._resetCache = i(this._resetCache, this), this._resetBoundsCache = i(this._resetBoundsCache, this), 
            this.toJSON = i(this.toJSON, this), this.initialize = i(this.initialize, this), 
            t = n.__super__.constructor.apply(this, arguments);
        }
        return o(n, e), n.prototype.TYPE = "Text", n.supportedProperties = function() {
            return [ "fill_color", "stroke_cap", "stroke_color", "stroke_width", "position", "font_face", "font_size", "font_weight", "is_italic", "is_underlined", "alignment", "rotation", "content", "href", "is_locked" ];
        }, mixin(n, Draw.PropertyMixin), mixin(n, Draw.LinkableObjectMixin), mixin(n, Draw.DrawableObjectMixin), 
        mixin(n, Draw.Item), n.prototype.DEFAULTS = {
            is_italic:!1,
            is_underlined:!1,
            alignment:Draw.ALIGN_LEFT,
            font_face:"Arial",
            font_size:12,
            font_weight:"normal",
            fill_color:"black",
            stroke_color:null,
            stroke_width:1,
            line_height:1.2,
            rotation:0,
            width:100,
            is_locked:!1
        }, n.prototype.FOCUS_DELAY = 100, n.prototype.ALIGNMENT_POINTS = {
            left:"topLeft",
            center:"topCenter",
            right:"topRight"
        }, n.prototype.initialize = function(t) {
            return this._project = paper.project, n.__super__.initialize.call(this, t), this._initializing = !0, 
            this.initDomElement(), this.initializeProperties(this.DEFAULTS), this.initializeDrawable(), 
            this.setPosition(t), this._bounds = null, this._fontMetrics = null, this._selection = null, 
            this._initializing = !1, Draw.Text._objects[this._id] = this, this._inverseMatrix = this._matrix.createInverse(), 
            this.addToDocument(), this.bind("change:font_size", this.transformColorsOnBounds), 
            this.bind("change:font_face", this.transformColorsOnBounds);
        }, n.prototype.clone = function() {
            var t;
            return t = this._clone(new this.constructor(this._point)), t._matrix.initialize(this._matrix), 
            this._inverseMatrix && t._inverseMatrix.initialize(this._inverseMatrix), this._cloneProperties(t), 
            t._resetCache(), t;
        }, n.prototype.toJSON = function() {
            var t;
            return t = paper.Path.prototype.toJSON.apply(this), _.extend(t, {
                t:"text",
                stroke_width:this.getStrokeWidth(),
                stroke:Color.NORMALIZE_JSON(this.getStrokeColor()),
                fill:Color.NORMALIZE_JSON(this.getFillColor()),
                font:this.getFontFace(),
                fs:this.getFontSize(),
                fw:this.getFontWeight(),
                ital:this.getIsItalic(),
                a:this.getAlignment(),
                text:this.getContent(),
                pos:this.getPosition().toJSON(),
                href:this.getHref(),
                is_locked:this.getIsLocked()
            }), t;
        }, n.prototype.equals = function(t) {
            return t ? this._id === t._id :!1;
        }, n.prototype.remove = function() {
            return n.__super__.remove.call(this), this.el.remove(), delete Draw.Text._objects[this._id], 
            this.trigger("removed", this);
        }, n.prototype.supportedEffects = function() {
            return [ "text_shadow" ];
        }, n.prototype._resetBoundsCache = function() {
            return this._initializing || this.cacheCurrentDrawableBounds(), this._bounds = null;
        }, n.prototype._resetCache = function() {
            return this._resetBoundsCache(), this._fontMetrics = null;
        }, n.prototype._setIsLocked = function(t) {
            return this.setLocked(t), t;
        }, n.prototype._setFontSize = function(t) {
            return this._characterStyle.fontSize = t, this._resetCache(), t;
        }, n.prototype._setFontFace = function(t) {
            return this._characterStyle.font = t, this._resetCache(), t;
        }, n.prototype._setFontWeight = function(t) {
            return this._resetCache(), t;
        }, n.prototype._setIsItalic = function(t) {
            return this._resetCache(), t;
        }, n.prototype._setAlignment = function(t) {
            var e, i, n, o, r;
            return e = this.getAlignment(), o = this._getTextMetrics(), i = this.getBounds(), 
            this._bounds = null, r = Math.sin(this.getRotation() * Math.PI / 180), n = r * o.width, 
            this._model.set({
                alignment:t
            }), e === Draw.ALIGN_LEFT && t === Draw.ALIGN_CENTER ? this.translate(new paper.Point(parseInt(i.width / 2), Math.round(n / 2))) :e === Draw.ALIGN_LEFT && t === Draw.ALIGN_RIGHT ? this.translate(new paper.Point(parseInt(i.width), Math.round(n))) :e === Draw.ALIGN_CENTER && t === Draw.ALIGN_LEFT ? this.translate(new paper.Point(-parseInt(i.width / 2), -Math.round(n / 2))) :e === Draw.ALIGN_CENTER && t === Draw.ALIGN_RIGHT ? this.translate(new paper.Point(parseInt(i.width / 2), Math.round(n / 2))) :e === Draw.ALIGN_RIGHT && t === Draw.ALIGN_LEFT ? this.translate(new paper.Point(-parseInt(i.width), -Math.round(n))) :e === Draw.ALIGN_RIGHT && t === Draw.ALIGN_CENTER && this.translate(new paper.Point(-parseInt(i.width / 2), -Math.round(n / 2))), 
            t;
        }, n.prototype._setPosition = function(t, e) {
            return this._resetBoundsCache(), paper.PointText.prototype.setPosition.call(this, t, e), 
            t;
        }, n.prototype._syncPosition = function(t) {
            var e;
            return e = this.getBounds(), this._model.set({
                position:e[this.ALIGNMENT_POINTS[this.getAlignment()]]
            }, _.extend({
                fromdraw:!0
            }, t));
        }, n.prototype.setPoint = function(t, e) {
            var i, n;
            return n = this.getPosition() || this._point, i = e.childop && paper.Item.CHILD_TRANSFORM_FLAG || 0, 
            this.translate(paper.Point.read(arguments).subtract(n), i);
        }, n.prototype.setStrokeWidth = function(t) {
            return this.set("stroke_width", t);
        }, n.prototype._setStrokeWidth = function(t) {
            return this.strokeWidth = t, t;
        }, n.prototype.getSelectableText = function() {
            return this._content;
        }, n.prototype._fillTextFocuserWithSelection = function() {
            return Draw.TextFocuser.instance().val(this.getSelectedText());
        }, n.prototype._updateFocuser = function() {
            return this._focuserDelay || (this._focuserDelay = new Debouncer(this.FOCUS_DELAY, this._fillTextFocuserWithSelection)), 
            this._focuserDelay.update();
        }, n.prototype.setSelection = function(t, e) {
            var i, n, o, r;
            return "number" == typeof t && "number" == typeof e ? (o = [ Math.min(t, e), Math.max(t, e) ], 
            i = o[0], n = o[1], r = [ Math.max(i, 0), Math.min(n, this.getSelectableText().length) ], 
            i = r[0], n = r[1], this._selection = i === n ? null :[ i, n ]) :null === t && (this._selection = null), 
            this._updateFocuser();
        }, n.prototype.getSelection = function() {
            return this._selection;
        }, n.prototype.setCursorPosition = function() {}, n.prototype.getSelectedText = function() {
            var t, e, i;
            return this._selection ? (i = this._selection, t = i[0], e = i[1], this.getSelectableText().substr(t, e - t)) :null;
        }, n.prototype.selectBlock = function(t, e) {
            var i;
            return i = [ this.getPreviousBlockIndex(t, e, !1), this.getNextBlockIndex(t, e, !1) ], 
            this.setSelection.apply(this, i);
        }, n.prototype.selectAll = function() {
            return this.setSelection(0, this._content.length);
        }, n.prototype.getPreviousBlockIndex = function(t, e, i) {
            var n, o, s, a, l;
            for (e = e.split(""), s = t, s instanceof paper.Point && (s = this.pointToIndex(s)), 
            a = !1, o = s - 1; o >= 0; ) {
                if (n = !i || i && a, l = this._content[o], r.call(e, l) >= 0 && n) {
                    a && o++;
                    break;
                }
                a = !0, o--;
            }
            return Math.max(0, o);
        }, n.prototype.getNextBlockIndex = function(t, e, i) {
            var n, o, s, a, l;
            for (e = e.split(""), s = t, s instanceof paper.Point && (s = this.pointToIndex(s)), 
            a = !1, o = s; o < this._content.length; ) {
                if (n = !i || i && a, l = this._content[o], r.call(e, l) >= 0 && n) {
                    a || o++;
                    break;
                }
                a = !0, o++;
            }
            return o;
        }, n.prototype.insertText = function(t, e, i) {
            var n, o, r;
            if (o = this.getSelection(), 0 > e && (i = Math.max(0, i + e), e = Math.max(0, e)), 
            o) {
                if (!o) return;
                e = o[0], r = o[1], i = r - e, this.setSelection(null);
            } else e = this.colAndRowToIndex(e), i = i || 0;
            return n = this.getSelectableText().split(""), n.splice(e, i, t), this.setContent(n.join("")), 
            this._updateFocuser(), e + t.length;
        }, n.prototype.getLines = function() {
            return [ this._content ];
        }, n.prototype.usesFontFace = function(t) {
            var e;
            return e = this.getFontFace(), e = $.trim(e.split(",")[0].toLowerCase()), e === t.toLowerCase();
        }, n.prototype.translate = function(t, e) {
            var i;
            return this.cacheCurrentDrawableBounds(), n.__super__.translate.call(this, t, e), 
            i = this.getFillColor(), t && i && i instanceof paper.GradientColor && (i.setOrigin(i.origin.add(t)), 
            i.setDestination(i.destination.add(t))), this._syncPosition();
        }, n.prototype.transform = function(t, e) {
            var i;
            return this.cacheCurrentDrawableBounds(), Draw.Text.__super__.transform.apply(this, arguments), 
            i = {}, e && e & paper.Item.CHILD_TRANSFORM_FLAG && (i.childop = !0), this._syncPosition(i);
        }, n.prototype._transform = function(t, e) {
            return n.__super__._transform.call(this, t, e), this._inverseMatrix = this._matrix.createInverse();
        }, n.prototype.setContent = function(t) {
            return this.set("content", t);
        }, n.prototype._setContent = function(t) {
            return this._resetCache(), paper.PointText.prototype.setContent.call(this, t), t;
        }, n.prototype._getContext = function(t) {
            return t ? t :(Draw.Text._ctx || (Draw.Text._ctx = $("<canvas/>")[0].getContext("2d")), 
            this._setStylesOnContext(Draw.Text._ctx), Draw.Text._ctx);
        }, n.prototype._measureText = function(t, e, i, n) {
            var o;
            return n = n || this.getSelectableText(), o = 0, e !== i && (o = t.measureText(n.substr(e, i - e)).width), 
            o;
        }, n.prototype._getTextMetrics = function(t, e) {
            return !e && this._fontMetrics ? this._fontMetrics :(this._fontMetrics = _.extend({}, Typo.getFontMetrics({
                text:t || this._content,
                font:this.getFontFace(),
                fontSize:this.getFontSize(),
                fontWeight:this.getFontWeight(),
                italic:this.getIsItalic()
            })), this._fontMetrics.top = 0, this._fontMetrics.lineHeight = this._fontMetrics.height, 
            this._fontMetrics);
        }, n.prototype.getLeft = function(t) {
            var e, i;
            return e = this.getAlignment(), i = 0, e === Draw.ALIGN_CENTER && (i = -t.width / 2), 
            e === Draw.ALIGN_RIGHT && (i = -t.width), i;
        }, n.prototype.getDrawableBounds = function() {
            var t, e;
            return this._currentBoundsHaveBeenAdded || (t = n.__super__.getDrawableBounds.call(this), 
            e = 0, this.getFontSize() && (e = parseInt(2.5 * this.getFontSize())), t = t.include(new paper.Point(t.x - e, t.y)), 
            t = t.include(new paper.Point(t.bottomRight.x + e, t.y)), this._drawableBounds.add(t), 
            this._currentBoundsHaveBeenAdded = !0), this._drawableBounds.getRectangle();
        }, n.prototype.getRotatedBounds = function(t) {
            var e;
            return e = this.getBounds(t, !0), new Draw.RotatedRectangle(e, this.getRotation(), e.center);
        }, n.prototype.getBoundsPoint = function(t, e, i, n, o) {
            switch (t) {
              case "topLeft":
                return new paper.Point(o, 0);

              case "bottomRight":
                return new paper.Point(o + i.width, i.height);

              case "topRight":
                return new paper.Point(o + i.width, 0);

              case "bottomLeft":
                return new paper.Point(o, i.height);
            }
        }, n.prototype.getBounds = function(t, e) {
            var i, n, o, r, s, a, l, c, h, u;
            return this._bounds && !e ? this._bounds :(t = this._getContext(t), s = this.getLines(), 
            a = this._getTextMetrics(this._content || "M", 0 === this._content.length), r = this.getLeft(a), 
            l = this, u = function(t) {
                return e ? t :l._matrix.transform(t);
            }, c = u(this.getBoundsPoint("topLeft", t, a, s, r)), o = u(this.getBoundsPoint("bottomRight", t, a, s, r)), 
            n = new Draw.IntRectangle(c, o), e || (h = u(this.getBoundsPoint("topRight", t, a, s, r)), 
            i = u(this.getBoundsPoint("bottomLeft", t, a, s, r)), n = n.unite(new Draw.IntRectangle(h, i))), 
            e || (this._bounds = n), n);
        }, n.prototype.setBounds = function(t, e) {
            var i, n, o, r;
            return e = e || {}, t && t.width && t.height ? (i = e.anchor || "topLeft", o = this.getBounds(), 
            n = Typo.getBestFontSize({
                text:this._content || "m",
                font:this.getFontFace(),
                fontSize:this.getFontSize(),
                fontWeight:this.getFontWeight(),
                italic:this.getIsItalic()
            }, t.width), this.set("font_size", n, e), r = o[i].subtract(this.getBounds()[i]), 
            r.isZero() || this.translate(r, e), this.transformColorsOnBounds()) :void 0;
        }, n.prototype.hitTest = function(t, e, i) {
            var n, o, r, s, a, l, c, h;
            if (i = this._matrix, e = HitResult.getOptions(t, e), t = e.point, this.getBounds().expand(e.tolerance)._containsPoint(t)) {
                if (n = this.getRotatedBounds(), e.center || e.bounds) {
                    if (l = this, s = [ "TopLeft", "TopRight", "BottomLeft", "BottomRight", "LeftCenter", "RightCenter" ], 
                    a = null, o = function(o, r) {
                        var s;
                        return s = n["get" + r]().transform(i), t.getDistance(s) < e.tolerance ? new HitResult(o, l, {
                            name:paper.Base.hyphenate(r),
                            point:s
                        }) :void 0;
                    }, e.center && (a = o("center", "Center"))) return a;
                    if (e.bounds) for (c = 0, h = s.length; h > c; c++) if (r = s[c], a = o("bounds", r)) return a;
                }
                if (e.fill && n && n._containsPoint(t.transform(i.createInverse()))) return new HitResult("fill", this, {
                    point:t
                });
            }
            return null;
        }, n.prototype._getAlignmentOffset = function(t) {
            var e, i;
            return e = this._getContext(), i = 0, this.getAlignment() === Draw.ALIGN_CENTER && (i = e.measureText(t).width / 2), 
            this.getAlignment() === Draw.ALIGN_RIGHT && (i = e.measureText(t).width), parseInt(i);
        }, n.prototype._shiftFromAlignment = function(t, e) {
            return t + this._getAlignmentOffset(e);
        }, n.prototype._shiftToAlignment = function(t, e) {
            return t - this._getAlignmentOffset(e);
        }, n.prototype._sanitizeIndex = function(t) {
            return t = t || 0, t = Math.max(0, Math.min(t, this.getSelectableText().length));
        }, n.prototype.colAndRowToIndex = function(t) {
            var e, i, n, o, r, s, a, l;
            if ("number" == typeof t) return this._sanitizeIndex(t);
            if (!(t instanceof paper.Point)) return 0;
            if (t.y < 0) return 0;
            for (o = this.getLines(), n = "", e = 0, i = s = 0, a = o.length; a >= 0 ? a > s :s > a; i = a >= 0 ? ++s :--s) {
                if (i === t.y) {
                    n = o[i];
                    break;
                }
                e += o[i].length;
            }
            return r = n.length, !r || " " !== (l = n[r - 1]) && "\n" !== l || r--, e += Math.min(t.x, r), 
            this._sanitizeIndex(e);
        }, n.prototype.indexToColAndRow = function(t) {
            var e, i, n, o, r, s, a;
            for (t = t || 0, t instanceof paper.Point && (t = this.colAndRowToIndex(t)), t = this._sanitizeIndex(t), 
            o = this.getLines(), n = 0, e = 0, i = s = 0, a = o.length; a >= 0 ? a > s :s > a; i = a >= 0 ? ++s :--s) {
                if (n = i, r = e + o[i].length, t >= e && r > t) {
                    e = t - e;
                    break;
                }
                e = r;
            }
            return e = Math.min(o[n].length, e), new paper.Point(e, n);
        }, n.prototype.getCursorRectangle = function(t) {
            var e, i, n, o, r, s, a, l;
            return i = this.indexToColAndRow(t), e = this.getBounds(), o = this.getLines(), 
            r = this._getTextMetrics(), n = this._getContext(), l = i.y * r.lineHeight + Math.max(r.top - 1, 0), 
            s = this._measureText(n, 0, i.x, o[i.y]), a = this._shiftToAlignment(s, o[i.y]), 
            new paper.Rectangle(a - 1, l, 1, r.height + 1);
        }, n.prototype.pointToIndex = function(t) {
            var e, i, n, o, r, s, a, l, c, h, u, d, p, f, g, m, v, y;
            if (e = this.getBounds(), c = this.getLines(), h = this._getTextMetrics(), i = this._getContext(), 
            f = _.clamp(t.x, e.x, e.x + e.width), g = _.clamp(t.y, e.y, e.y + e.height), t = new paper.Point(f, g), 
            !e.contains(t)) return null;
            if (s = this._inverseMatrix, t = s.transform(t), l = parseInt(t.y / h.lineHeight), 
            0 > l || l >= c.length) return null;
            for (d = c[l], f = this._shiftFromAlignment(t.x, d), a = [ 0, 0 ], n = null, r = m = 0, 
            v = d.length; v >= 0 ? v >= m :m >= v; r = v >= 0 ? ++m :--m) {
                if (p = this._measureText(i, 0, r, d), p > f) {
                    n = [ r, p ];
                    break;
                }
                a = [ r, p ];
            }
            return u = this, o = function(t) {
                return u.colAndRowToIndex(new paper.Point(t, l));
            }, n ? f - a[1] < n[1] - f ? o(a[0]) :o(n[0]) :" " === (y = d[d.length - 1]) || "\n" === y ? o(d.length - 1) :o(d.length);
        }, n.prototype._getFontString = function() {
            var t;
            return t = [], this.getIsItalic() && t.push("italic"), this.getFontWeight() && t.push(this.getFontWeight()), 
            t.push(this.getFontSize() + "pt"), t.push('"' + this.getFont() + '"'), t.join(" ");
        }, n.prototype._setStylesOnContext = function(t) {
            return t.font = this._getFontString(), t.textAlign = this.getJustification();
        }, n.prototype.drawCenterHandles = function(t, e, i, n, o) {
            return this.drawHandle(t, e.rightCenter, i, n, o), this.drawHandle(t, e.leftCenter, i, n, o);
        }, n.prototype.drawBaseline = function(t, e) {
            var i, n, o, r, s, a, l, c, h, u;
            for (s = this._getTextMetrics(), n = this.getLeft(s), r = this.getLines(), l = this.getWidth && this.getWidth() || s.width, 
            t.save(), i = s.top + s.baseline, h = 0, u = r.length; u > h; h++) o = r[h], c = i, 
            a = [ new paper.Segment(new paper.Point(n + 2, c)), new paper.Segment(new paper.Point(n + l - 2, c)) ], 
            t.beginPath(), this.drawSegments(t, a, !1, e, void 0, .5, !1), t.stroke(), i += s.lineHeight;
            return t.restore();
        }, n.prototype.drawSelection = function(t, e) {
            var i, n, o, r, s;
            return s = this.project.getSelectionMode() === Draw.SELECTION_MODE_TEXT, i = this.getRotatedBounds(t), 
            n = this.getBounds(t), this.drawBounds(t, e), e = new paper.Matrix().concatenate(e).concatenate(this._matrix), 
            s || (r = Draw.Path._getRectangleSegments(i, !0), o = new Draw.IntRectangle(i.topLeft, i.bottomRight), 
            this.drawHandles(t, r, e, !1, !1), this.drawCenterHandles(t, o, e, !1, !1)), this.drawBaseline(t, e), 
            s || (t.beginPath(), this.drawSegments(t, r, !0, e, void 0, .5, !1)), t.stroke();
        }, n.prototype.drawTextSelection = function(t) {
            var e, i, n, o, r, s, a, l, c, h, u, d, p, f, g, m, _, v, y;
            if (a = this.getLines(), i = this.getBounds(), p = i.width, d = this.getSelection(), 
            h = this._getTextMetrics(), d) {
                for (n = d[0], f = d[1], e = 0, u = n, y = [], o = _ = 0, v = a.length; (v >= 0 ? v > _ :_ > v) && (s = a[o].length, 
                l = e + s, t.fillStyle = new paper.RGBColor("#b4d5fe").getCanvasStyle(t), u >= e && l > u && (c = Math.min(l, f), 
                r = this._shiftToAlignment(this._measureText(t, e, u), a[o]), m = this._measureText(t, u, c), 
                g = h.lineHeight * o + h.top, t.fillRect(r, g, m, h.height), u = c), e = l, !(u >= f)); o = v >= 0 ? ++_ :--_) y.push(void 0);
                return y;
            }
        }, n.prototype.drawFill = function(t, e, i, n) {
            return e ? (t.fillStyle = e.getCanvasStyle(t, this._inverseMatrix), t.fillText(this._content, 0, n.baseline)) :void 0;
        }, n.prototype.drawStroke = function(t, e, i, n, o) {
            return e && i ? (t.lineWidth = i, t.strokeStyle = e.getCanvasStyle(t, this._inverseMatrix), 
            t.strokeText(this._content, 0, o.baseline)) :void 0;
        }, n.prototype.draw = function(t, e) {
            var i, n, o, r, s, a;
            if (e.selection) return t.save(), this.drawSelection(t, e.matrix), t.restore();
            if (this._content) return t.save(), this._setStylesOnContext(t), i = this.getBounds(t), 
            o = this.getLines(t), r = this._getTextMetrics(), t.textAlign = this.getAlignment() || Draw.ALIGN_LEFT, 
            this._matrix.applyToContext(t), this.drawTextSelection(t), n = this.getFillColor(), 
            s = this.getStrokeColor(), a = this.getStrokeWidth(), n && s || (t.globalAlpha = this._opacity), 
            this.drawFill(t, n, o, r), this.drawStroke(t, s, a, o, r), t.restore(), this.clearDrawableBounds();
        }, mixin(n, Draw.DomCanvasMixin), mixin(n, Draw.MovableDomObjectMixin), n;
    }(paper.PointText), Draw.Text._objects = {}, Draw.Text.prototype._rotate = paper.Path.prototype.rotate, 
    Draw.Text.prototype.rotate = Draw.Path.prototype.rotate, Draw.Text.prototype._setRotation = Draw.Path.prototype._setRotation, 
    Draw.Text.prototype.cssProperties = function() {
        var t;
        return t = [ "font_face", "font_size", "font_weight", "is_italic", "alignment" ], 
        _.without(Draw.Path.prototype.cssProperties.call(this).concat(t), "size");
    }, Draw.Text.prototype.propertyToCss = function(t) {
        var e, i, n;
        switch (t) {
          case "fill_color":
            return e = Color.solid(this.getFillColor()), {
                color:e && e.toCssString() || "transparent"
            };

          case "stroke_color":
            return e = Color.solid(this.getStrokeColor()), n = this.getStrokeWidth(), e && n ? {
                "-webkit-text-stroke":n + "px " + e.toCssString()
            } :"";

          case "font_size":
            return i = Draw.Path.prototype.propertyToCss.call(this, t), _.isNumber(i["font-size"]) && (i["font-size"] += "pt"), 
            i;

          default:
            return Draw.Path.prototype.propertyToCss.call(this, t);
        }
    }, Draw.Text.activateFont = function(t) {
        var e, i, n, o;
        i = [], o = Draw.Text._objects;
        for (e in o) n = o[e], n.usesFontFace(t) && (Typo.resetFontCache(t), n._resetCache(), 
        i.push(n));
        return i;
    }, Draw.Text.fromJSON = function(t) {
        var e, i;
        return i = paper.Point.fromJSON(t.pos), e = new Draw.Text(i), e.set({
            stroke_width:t.stroke_width,
            stroke_color:Color.NORMALIZE_FROM_JSON(t.stroke),
            fill_color:Color.NORMALIZE_FROM_JSON(t.fill),
            is_italic:t.ital,
            alignment:t.a,
            font_face:t.font,
            font_size:t.fs,
            font_weight:t.fw,
            href:t.href,
            is_locked:t.is_locked
        }), e.setPosition(i), e.setContent(t.text), e;
    }, paper.Item.JSON_CLASSES.text = Draw.Text, Draw.TextArea = function(t) {
        function n() {
            return this.drawStroke = i(this.drawStroke, this), this.drawFill = i(this.drawFill, this), 
            this._getDrawLeft = i(this._getDrawLeft, this), this._shiftToAlignment = i(this._shiftToAlignment, this), 
            this._shiftFromAlignment = i(this._shiftFromAlignment, this), this._getAlignmentOffset = i(this._getAlignmentOffset, this), 
            this.getLines = i(this.getLines, this), this.setBounds = i(this.setBounds, this), 
            this.setRotatedBounds = i(this.setRotatedBounds, this), this.getDrawableBounds = i(this.getDrawableBounds, this), 
            this.getSelectableText = i(this.getSelectableText, this), this._setAlignment = i(this._setAlignment, this), 
            this._setWidth = i(this._setWidth, this), this._getTextMetrics = i(this._getTextMetrics, this), 
            this._calculateLineHeight = i(this._calculateLineHeight, this), this._setLineHeight = i(this._setLineHeight, this), 
            this._resetCache = i(this._resetCache, this), this.toJSON = i(this.toJSON, this), 
            e = n.__super__.constructor.apply(this, arguments);
        }
        return o(n, t), n.prototype.TYPE = "TextArea", n.prototype.initialize = function(t) {
            return n.__super__.initialize.call(this, t), this.bind("change:width", this.transformColorsOnBounds);
        }, n.prototype.cssProperties = function() {
            var t;
            return t = [ "line_height", "width" ], n.__super__.cssProperties.call(this).concat(t);
        }, n.prototype.propertyToCss = function(t) {
            switch (t) {
              case "width":
                return {
                    width:this.getWidth() + "px"
                };

              default:
                return n.__super__.propertyToCss.call(this, t);
            }
        }, n.prototype.toJSON = function() {
            var t;
            return t = n.__super__.toJSON.call(this), _.extend(t, {
                t:"textarea",
                w:this.getWidth(),
                h:this.getLineHeight()
            }), t;
        }, n.prototype._resetCache = function() {
            return n.__super__._resetCache.call(this), this._lines = null;
        }, n.prototype._setLineHeight = function(t) {
            return this._initializing || this.cacheCurrentDrawableBounds(), this._fontMetrics = null, 
            this._bounds = null, t;
        }, n.prototype._calculateLineHeight = function(t) {
            var e, i;
            if (!t) return null;
            if (e = this.getLineHeight(), e && e.indexOf && e.indexOf("px") > 0) {
                if (i = parseInt(e), i && i > 0) return i;
            } else if (e && (i = parseFloat(e), i && i > 0)) return i * t;
            return null;
        }, n.prototype._getTextMetrics = function(t, e) {
            return this._fontMetrics && !e ? this._fontMetrics :(this._fontMetrics = _.extend({}, Typo.getFontMetrics({
                text:t || this._content.substr(0, 20),
                font:this.getFontFace(),
                fontSize:this.getFontSize(),
                fontWeight:this.getFontWeight(),
                italic:this.getIsItalic()
            })), this._fontMetrics.lineHeight = this._calculateLineHeight(this._fontMetrics.lineHeight) || this._fontMetrics.lineHeight, 
            this._fontMetrics.top = 0, this._fontMetrics);
        }, n.prototype._setWidth = function(t) {
            return this._lines = null, this._resetBoundsCache(), Math.max(t, 20);
        }, n.prototype._setAlignment = function(t) {
            return this._resetBoundsCache(), t;
        }, n.prototype._syncPosition = function(t) {
            var e;
            return e = this.getBounds(), this._model.set({
                position:e.topLeft
            }, _.extend({
                fromdraw:!0
            }, t));
        }, n.prototype.getSelectableText = function() {
            var t;
            return t = this.getLines(), t.join("");
        }, n.prototype.WHITESPACE = /\s+/i, n.prototype.getDrawableBounds = function() {
            var t, e, i, o, r, s, a, l, c;
            if (i = this._currentBoundsHaveBeenAdded, e = n.__super__.getDrawableBounds.call(this), 
            e = this.getBounds(), !i) for (t = this.getAlignment(), c = this.getLines(), a = 0, 
            l = c.length; l > a; a++) o = c[a], this.WHITESPACE.test(o.trim()) || (r = this._getTextMetrics(o || "M", !0).width, 
            s = e.x, t === Draw.ALIGN_RIGHT ? s -= r - e.width :t === Draw.ALIGN_CENTER && (s -= (r - e.width) / 2), 
            e = e.unite(new paper.Rectangle(s, e.y, r, 1)), this._drawableBounds.add(e));
            return this._drawableBounds.getRectangle();
        }, n.prototype.getLeft = function() {
            return 0;
        }, n.prototype.getBoundsPoint = function(t, e, i, n) {
            var o;
            switch (o = (n.length - 1) * i.lineHeight + i.baseline + i.bottom, t) {
              case "topLeft":
                return new paper.Point(0, 0);

              case "bottomRight":
                return new paper.Point(this.getWidth(), o);

              case "topRight":
                return new paper.Point(this.getWidth(), 0);

              case "bottomLeft":
                return new paper.Point(0, o);
            }
        }, n.prototype.setRotatedBounds = function() {
            return this.setBounds.apply(this, arguments);
        }, n.prototype.setBounds = function(t, e) {
            return this.set({
                position:t.topLeft,
                width:t.width
            }, e);
        }, n.prototype.getLines = function() {
            return this._lines ? this._lines :(this._lines = Typo.splitIntoLines({
                text:this._content,
                font:this.getFontFace(),
                fontSize:this.getFontSize(),
                fontWeight:this.getFontWeight(),
                italic:this.getIsItalic(),
                width:this.getWidth()
            }), this._lines);
        }, n.prototype._getAlignmentOffset = function(t) {
            var e, i, n;
            return i = this._getContext(), e = this.getBounds(), n = 0, this.getAlignment() === Draw.ALIGN_CENTER && (n = e.width / 2 - i.measureText(t).width / 2), 
            this.getAlignment() === Draw.ALIGN_RIGHT && (n = e.width - i.measureText(t).width), 
            parseInt(n);
        }, n.prototype._shiftFromAlignment = function(t, e) {
            return t - this._getAlignmentOffset(e);
        }, n.prototype._shiftToAlignment = function(t, e) {
            return t + this._getAlignmentOffset(e);
        }, n.prototype._getDrawLeft = function() {
            var t;
            return t = 0, this.getAlignment() === Draw.ALIGN_CENTER && (t = this.getWidth() / 2), 
            this.getAlignment() === Draw.ALIGN_RIGHT && (t = this.getWidth()), t;
        }, n.prototype.drawFill = function(t, e, i, n) {
            var o, r, s, a, l, c;
            if (r = this._getDrawLeft(), o = n.top + n.baseline, e) {
                for (c = [], a = 0, l = i.length; l > a; a++) s = i[a], t.fillStyle = e.getCanvasStyle(t, this._inverseMatrix), 
                t.fillText(s, r, o), c.push(o += n.lineHeight);
                return c;
            }
        }, n.prototype.drawStroke = function(t, e, i, n, o) {
            var r, s, a, l, c, h;
            if (s = this._getDrawLeft(), r = o.top + o.baseline, e && i) {
                for (h = [], l = 0, c = n.length; c > l; l++) a = n[l], t.lineWidth = i, t.strokeStyle = e.getCanvasStyle(t, this._inverseMatrix), 
                t.strokeText(a, s, r), h.push(r += o.lineHeight);
                return h;
            }
        }, n;
    }(Draw.Text), Draw.TextArea.fromJSON = function(t) {
        var e;
        return e = new Draw.TextArea(paper.Point.fromJSON(t.pos)), e.set({
            stroke_width:t.stroke_width,
            stroke_color:Color.NORMALIZE_FROM_JSON(t.stroke),
            fill_color:Color.NORMALIZE_FROM_JSON(t.fill),
            is_italic:t.ital,
            alignment:t.a,
            font_face:t.font,
            font_size:t.fs,
            font_weight:t.fw,
            line_height:t.h,
            width:t.w,
            is_locked:t.is_locked
        }), e.setContent(t.text), e;
    }, Draw.TextArea.supportedProperties = function() {
        var t;
        return t = Draw.Text.supportedProperties(), t.push("line_height"), t.push("width"), 
        t;
    }, paper.Item.JSON_CLASSES.textarea = Draw.TextArea, Draw.PropertyMixin.generateGettersSetters(Draw.TextArea);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.TextCursor = function(i) {
        function o() {
            return this.draw = e(this.draw, this), this.clear = e(this.clear, this), this.stop = e(this.stop, this), 
            this.moveTo = e(this.moveTo, this), this.start = e(this.start, this), this.changeAttribute = e(this.changeAttribute, this), 
            this.changePath = e(this.changePath, this), this._turnOff = e(this._turnOff, this), 
            this._turnOn = e(this._turnOn, this), this.stopBlink = e(this.stopBlink, this), 
            this.blink = e(this.blink, this), this.hitTest = e(this.hitTest, this), this.initialize = e(this.initialize, this), 
            t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.CURSOR_ON = 700, o.prototype.CURSOR_OFF = 500, o.prototype.initialize = function(t, e) {
            var i;
            return o.__super__.initialize.call(this, new paper.Rectangle(-10, -10, 1, 10)), 
            this.document = t, i = this.document.getToolLayer(), i.addChild(this), this.fillColor = "black", 
            this.model = e, this.model.bind("change:position", this.moveTo), this.model.bind("change:path", this.changePath);
        }, o.prototype.hitTest = function() {
            return null;
        }, o.prototype.initDomElement = function() {}, o.prototype.addToDocument = function() {}, 
        o.prototype.blink = function() {
            return this._interval && clearTimeout(this._interval), this._turnOn();
        }, o.prototype.stopBlink = function() {
            return this._interval && (clearTimeout(this._interval), this._interval = null), 
            this.setVisible(!1);
        }, o.prototype._turnOn = function() {
            return this._drawParams ? (this.setVisible(!0), this.draw.apply(this, this._drawParams), 
            this._interval = setTimeout(this._turnOff, this.CURSOR_ON)) :void 0;
        }, o.prototype._turnOff = function() {
            return this._drawParams ? (this.setVisible(!1), this.clear.apply(this, this._drawParams), 
            this._interval = setTimeout(this._turnOn, this.CURSOR_OFF)) :void 0;
        }, o.prototype.changePath = function(t, e) {
            return e ? this.start(e, t.get("position")) :this.stop();
        }, o.prototype.changeAttribute = function() {
            return this.moveTo(this.textObj, this.model.get("position"));
        }, o.prototype.start = function(t, e) {
            return t instanceof Draw.Text ? (this.textObj = t, this.textObj.bind("change", this.changeAttribute), 
            this.moveTo(this.model, e), this.blink()) :void 0;
        }, o.prototype.moveTo = function(t, e) {
            return this.textObj && this.textObj instanceof Draw.Text ? (this.setBounds(this.textObj.getCursorRectangle(e)), 
            this.transform(this.textObj._matrix), this.blink()) :void 0;
        }, o.prototype.stop = function() {
            return this.textObj instanceof Draw.Text ? (this.textObj.unbind("change", this.changeAttribute), 
            this.textObj = null, this._cursorPosition = null, this.stopBlink()) :void 0;
        }, o.prototype.clear = function(t, e) {
            var i;
            return t.save(), e.matrix && e.matrix.applyToContext(t), i = this.getBounds(), i && t.clearRect(i.x, i.y, i.width, i.height), 
            t.restore();
        }, o.prototype.draw = function(t, e, i) {
            return i || (e = _.clone(e), e.renderModel = null, this._drawParams = [ t, e, !0 ]), 
            this.document.getToolLayer().getMatrix && (e.matrix = this.document.getToolLayer().getMatrix()), 
            o.__super__.draw.call(this, t, e);
        }, o;
    }(Draw.Rectangle);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.EventedGroup = function(i) {
        function o() {
            return this.draw = e(this.draw, this), this.drawSelection = e(this.drawSelection, this), 
            this.onObjectChanged = e(this.onObjectChanged, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), mixin(o, Draw.Item), o.prototype.TYPE = "EventedGroup", o.supportedProperties = function() {
            return [ "position", "size", "name", "thumbnail_url", "href", "is_locked" ];
        }, mixin(o, Draw.PropertyMixin), mixin(o, Draw.LinkableObjectMixin), mixin(o, Draw.DrawableObjectMixin), 
        mixin(o, Draw.MovableObjectMixin), mixin(o, Draw.MovableDomObjectMixin), o.prototype.initialize = function(t, e) {
            var i;
            return i = {
                addAtChildPosition:!0,
                addToActiveLayer:!1
            }, this._initializing = !0, this._project = paper.project, this.options = _.extend(i, e), 
            this.initDomElement(), this.cacheReferenceElement(t), o.__super__.initialize.call(this, t), 
            this.setDomElementId(), this.initializeProperties({}), this.syncBounds(), this.initChildren(), 
            this.setName(this.generateName()), this.addToDocument(), this.cacheAnchor(), this._initializing = !1;
        }, o.prototype.initDomElement = function() {
            return this.el = $("<div/>", {
                "class":"dom-group"
            }), this.placeDomElement();
        }, o.prototype.setDomElementId = function() {
            return this.el[0].id = "dom-group-" + this.id;
        }, o.prototype.canEditAutoSizing = function() {
            return !1;
        }, o.prototype.cacheReferenceElement = function(t) {
            if (this.options.addAtChildPosition && t) {
                if (t = Draw.Item.sortDesc(_.toArray(t)), !(t && t.length && t[0].parent)) return;
                return this._reference = {
                    parent:t[0].parent,
                    element:t[0].nextSibling
                };
            }
        }, o.prototype.addToDocument = function() {
            return this.options.addToActiveLayer !== !1 ? paper.project.activeLayer.addChild(this) :this._reference ? this._reference.element ? this._reference.parent.insertChild(this._reference.element._index, this) :this._reference.parent.addChild(this) :void 0;
        }, o.prototype.placeDomElement = function(t) {
            var e, i, n, o;
            if (t) {
                for (o = [], i = 0, n = t.length; n > i; i++) {
                    if (e = t[i], e.el) {
                        this.el.insertBefore(e.el);
                        break;
                    }
                    o.push(void 0);
                }
                return o;
            }
            return this._appendToCanvas(this.el);
        }, o.prototype.placeChildDomElements = function(t) {
            var e, i, n, o;
            for (o = [], i = 0, n = t.length; n > i; i++) e = t[i], e.el ? o.push(this.el.append(e.el)) :o.push(void 0);
            return o;
        }, o.prototype.groupChildDomElements = function(t) {
            var e, i, n, o;
            for (o = [], i = 0, n = t.length; n > i; i++) e = t[i], e.el ? o.push(this.el.append(e.el)) :o.push(void 0);
            return o;
        }, o.prototype.clone = function() {
            return new Draw[this.TYPE](this.cloneItems(this.children, !0));
        }, o.prototype.cloneItems = function(t, e) {
            var i, n, o, r, s;
            for (n = t, e && (n = function() {
                var e, n, o;
                for (o = [], e = 0, n = t.length; n > e; e++) i = t[e], o.push(i.clone());
                return o;
            }()), s = [], o = 0, r = n.length; r > o; o++) i = n[o], i && s.push(i);
            return s;
        }, o.prototype.canFlatten = function() {
            return !0;
        }, o.prototype.getName = function() {
            return this.get("name");
        }, o.prototype.setName = function(t) {
            return this.set("name", t);
        }, o.prototype.generateName = function() {
            return _.uniqueId("Group ");
        }, o.prototype.toJSON = function() {
            var t, e, i, n, o;
            for (e = {
                t:"group",
                n:this.getName(),
                href:this.getHref(),
                is_locked:this.getIsLocked(),
                children:[]
            }, o = this.children, i = 0, n = o.length; n > i; i++) t = o[i], e.children.push(t.toJSON());
            return e;
        }, o.fromJSON = function(t, e) {
            var i, n;
            return n = paper.Item.childrenFromJSON(t, e), i = new Draw[this.prototype.TYPE](n), 
            i.setHref(t.href), i.setIsLocked(t.is_locked || !1), i;
        }, o.prototype.getDrawableBounds = function() {
            var t, e, i, n, o, r, s;
            for (n = null, s = this.children, o = 0, r = s.length; r > o; o++) t = s[o], e = t.getDrawableBounds || t.getBounds, 
            i = e.call(t), n || (n = i), n && (n = n.unite(i));
            return n;
        }, o.prototype.getSelectable = function() {
            return 1 === this.children.length ? this.children[0] :this;
        }, o.prototype.initChildren = function() {
            var t, e, i, n, o, r, s, a, l;
            for (this.constraints = {}, i = 10, t = this.getBounds(), e = t.center, a = this.children, 
            l = [], r = 0, s = a.length; s > r; r++) n = a[r], n.setSelected(!1), n.setPreselected(!1), 
            n instanceof Draw.Text && (o = n.getBounds().center.y, o >= e.y - i && o <= e.y + i && (this.constraints[n.id] = "center-y")), 
            l.push(n.group = this);
            return l;
        }, o.prototype.ungroup = function() {
            var t, e, i, n;
            if (this.children.length) {
                for (this.unbindAllEvents(), this._oldChildren = _.toArray(this.children), n = this._oldChildren, 
                e = 0, i = n.length; i > e; e++) t = n[e], t.insertItemInPlace(this), t.group = null;
                return this.remove(), this._oldChildren;
            }
        }, o.prototype.regroup = function() {
            var t;
            if (this._oldChildren && this._oldChildren.length) return t = this._oldChildren[this._oldChildren.length - 1], 
            this.insertItemInPlace(t), this.addChildren(this._oldChildren);
        }, o.prototype.getOldChildren = function() {
            return this._oldChildren;
        }, o.prototype.addChildren = function(t) {
            return o.__super__.addChildren.call(this, t), this.initChildren();
        }, o.prototype._setIsLocked = function(t) {
            return this.setLocked(t), t;
        }, o.prototype.translate = function(t, e) {
            var i;
            return t.x || t.y ? (o.__super__.translate.call(this, t, e), i = this.getBounds(), 
            this._model.set({
                position:new paper.Point(i.x, i.y)
            }, {
                fromdraw:!0
            }), this.cacheAnchor()) :void 0;
        }, o.prototype.cacheAnchor = function() {
            return this._anchor = new paper.Point(this.getBounds().topLeft);
        }, o.prototype._setPosition = function(t) {
            return paper.Group.prototype.setPosition.call(this, t), t;
        }, o.prototype._setSize = function(t, e) {
            var i;
            return i = new paper.Rectangle(this.getBounds()), (i.width !== t.width || i.height !== t.height) && (i.width = t.width, 
            i.height = t.height, this.setBounds(i, e)), t;
        }, o.prototype.syncBounds = function(t) {
            var e, i, n, o;
            return e = this.getBounds(), i = {
                size:new paper.Size(e.width, e.height),
                position:new paper.Point(e.x, e.y)
            }, this._model && (n = this._model.get("position"), o = this._model.get("size"), 
            o && e.width === o.width && e.height === o.height || this._model.set({
                size:i.size
            }, _.extend({
                fromdraw:!0
            }, t)), !n || e.x !== n.x || e.y !== n.y) ? this._model.set({
                position:i.position
            }, _.extend({
                fromdraw:!0
            }, t)) :void 0;
        }, o.prototype.setBounds = function(t, e) {
            var i, n, o, r, s, a, l, c, h, u, d, p, f, g, m, _, v, y, b, w, C, T, D;
            for (n = this.getBounds(), u = new paper.Matrix(), s = t.getCenter(), u.translate(s), 
            (t.width !== n.width || t.height !== n.height) && (_ = 0 !== n.width ? t.width / n.width :1, 
            v = 0 !== n.height ? t.height / n.height :1, u.scale(_, v)), s = n.getCenter(), 
            u.translate(-s.x, -s.y), d = -1, T = this.children, y = 0, w = T.length; w > y; y++) a = T[y], 
            i = a.getBounds(), a instanceof Draw.Text && (0 > d && (d = i.height), d = Math.min(d, i.height));
            for (D = this.children, b = 0, C = D.length; C > b; b++) a = D[b], i = a.getBounds(), 
            a instanceof Draw.TextArea ? (r = i.getCenter(), p = u.transform(r), g = u.transform(i.topLeft), 
            o = u.transform(i.bottomRight), f = o.subtract(g), h = u.transform(n.topLeft), c = u.transform(n.bottomRight), 
            m = f.x, l = this.constraints[a.id], v = "center-y" === l ? h.y + (c.y - h.y - i.height) / 2 :p.y - i.height / 2, 
            i = new paper.Rectangle(g.x, Math.max(v, h.y), m, i.height), a.setBounds(i, {
                childop:!0
            })) :a instanceof Draw.Text ? (r = i.getCenter(), p = u.transform(r), a.translate(p.subtract(r), paper.Item.CHILD_TRANSFORM_FLAG)) :(i = new paper.Rectangle(u.transform(i.topLeft), u.transform(i.bottomRight)), 
            i.height = Math.max(i.height, 1), d > 0 && (i.height = Math.max(i.height, d)), a.setBounds(i, {
                childop:!0
            }));
            return this._bounds = null, this.syncBounds(e);
        }, o.prototype.bindEvents = function(t) {
            return t && t.unbind && t.bind("change", this.onObjectChanged), o.__super__.bindEvents.call(this, t);
        }, o.prototype.unbindEvents = function(t) {
            return t && t.unbind && t.unbind("change", this.onObjectChanged), o.__super__.unbindEvents.call(this, t);
        }, o.prototype.unbindAllEvents = function() {
            var t, e, i, n, o;
            for (n = this.children, o = [], e = 0, i = n.length; i > e; e++) t = n[e], o.push(this.unbindEvents(t));
            return o;
        }, o.prototype.indexOf = function(t) {
            var e, i, n, o;
            for (t = t.owner || t, i = -1, e = n = 0, o = this.children.length; o >= 0 ? o > n :n > o; e = o >= 0 ? ++n :--n) if (this.children[e].id === t.id) {
                i = e;
                break;
            }
            return i;
        }, o.prototype.onObjectChanged = function(t, e, i, n) {
            var o, r;
            return e = e || {}, e.childop || e.frompaper || e.silent ? void 0 :(r = this.indexOf(t), 
            o = [], t.changedAttributes && (o = t.changedAttributes()), e = _.extend({}, e, n), 
            i && (null != e && null != e.property_key && (i = [ e.property_key, i ], null != e.index && i.push(e.index), 
            null != e.key && i.push(e.key)), o.push(i)), o.length ? this.trigger("change:object", this, t.owner, r, o, e) :void 0);
        }, o.prototype.remove = function() {
            var t, e, i, n;
            for (e = _.toArray(this.children), o.__super__.remove.call(this), this.el.remove(), 
            i = 0, n = e.length; n > i; i++) t = e[i], t.trigger("removed", t);
            return this.trigger("removed", this);
        }, o.prototype.hitTest = function(t, e, i) {
            var n;
            if (n = null, !this.children) return null;
            if (e.direct || e.modifiers && e.modifiers.option || this.children && 1 === this.children.length) e = paper.HitResult.getOptions(t, e), 
            n = this._hitTest(t, e, i); else if (n = o.__super__.hitTest.call(this, t, e, i), 
            n && n.item) {
                if (n.item.id === this.id) return n;
                if ("bounds" === n.type) return new paper.HitResult("fill", this);
                n.item = this;
            }
            return n;
        }, o.prototype.setPreselected = function(t) {
            return (t = !!t) != !!this._preselected ? (this._preselected = t, this._project._updateSelection(this, "pre"), 
            this._changed(33)) :void 0;
        }, o.prototype.setSelected = function(t) {
            return (t = !!t) != !!this._selected ? (this._selected = t, this._project._updateSelection(this), 
            this._changed(33)) :void 0;
        }, o.prototype.drawSelection = function(t, e) {
            var i, n, o;
            return this.drawBounds(t, e), i = this.getBounds(), o = Draw.Path._getRectangleSegments(i, !0), 
            n = new Draw.IntRectangle(i.topLeft, i.bottomRight), this.drawHandles(t, o, e, !1, !1), 
            this.drawCenterHandles(t, n, e, !1, !1), t.beginPath(), paper.Path.drawSegments.call(this, t, o, !0, e, void 0, .5, !1), 
            t.stroke();
        }, o.prototype.draw = function(t, e) {
            return e.selection ? (t.save(), this.drawSelection(t, e.matrix), t.restore()) :o.__super__.draw.call(this, t, e);
        }, o;
    }(paper.Group), paper.Item.JSON_CLASSES.group = Draw.EventedGroup;
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.Clipboard = function(i) {
        function o() {
            return this.paste = e(this.paste, this), this.cut = e(this.cut, this), this.copy = e(this.copy, this), 
            this._setData = e(this._setData, this), this.beforecut = e(this.beforecut, this), 
            this.beforecopy = e(this.beforecopy, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.TYPE_TEXT = "text/plain", o.TYPE_OBJECT = "object", o.TYPE_JSON_OBJECT = "json/object", 
        o.TIMESTAMP_KEY = "clip_ts", o.prototype.initialize = function() {
            return this._fixEvents();
        }, o.prototype.beforecopy = function() {}, o.prototype.beforecut = function() {}, 
        o.prototype._setData = function(t) {
            var e, i;
            return i = this, e = function(e, n) {
                var o, r, s, a;
                return r = null, e === Draw.Clipboard.TYPE_TEXT ? (Draw.TextFocuser.instance().val(n), 
                t && t.clipboardData && t.clipboardData.setData && t.clipboardData.setData("text/plain", n), 
                window.clipboardData && (window.clipboardData.setData("Text", n), t && t.preventDefault())) :(t && t.preventDefault(), 
                s = i.getClipLocalStorageKey(), _.isArray(n) && (n = Draw.Item.getGroups(n)), r = Draw.stringify(n), 
                Draw.LocalStorage.set(s, r)), o = {}, a = new Date().getTime() + "", Draw.LocalStorage.set(Draw.Clipboard.TIMESTAMP_KEY, a), 
                o[Draw.Clipboard.TIMESTAMP_KEY] = a, o[e] = n, o[Draw.Clipboard.TYPE_OBJECT] = n, 
                r && (o[Draw.Clipboard.TYPE_JSON_OBJECT] = r), i.set(o);
            };
        }, o.prototype.getClipLocalStorageKey = function() {
            return Draw.Clipboard.TYPE_JSON_OBJECT;
        }, o.prototype.isCopyOriginator = function() {
            var t;
            return t = Draw.Clipboard.TIMESTAMP_KEY, this.get(t) === Draw.LocalStorage.get(t);
        }, o.prototype.copy = function(t) {
            return this.trigger("copy", this._setData(t));
        }, o.prototype.cut = function(t) {
            return this.trigger("cut", this._setData(t));
        }, o.prototype.paste = function(t) {
            var e, i;
            return i = this, e = function() {
                var e, n, o;
                if (!t || t.clipboardData) return n = Draw.TextFocuser.instance().val(), e = {}, 
                e[Draw.Clipboard.TYPE_TEXT] = n, o = i.getClipLocalStorageKey(), e[Draw.Clipboard.TYPE_JSON_OBJECT] = Draw.LocalStorage.get(o), 
                i.set(e), i.trigger("paste", i.attributes);
            }, setTimeout(e, 20);
        }, o.prototype._fixEvents = function() {
            return $.event.fix = function(t) {
                return function(e) {
                    return e = t.apply(this, arguments), (0 === e.type.indexOf("cut") || 0 === e.type.indexOf("copy") || 0 === e.type.indexOf("paste")) && (e.clipboardData = e.originalEvent.clipboardData), 
                    e;
                };
            }($.event.fix);
        }, o;
    }(Backbone.Model);
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    Draw.Colors = function() {
        function e(e) {
            this.addTo = t(this.addTo, this), this.addToDocument = t(this.addToDocument, this), 
            this.clearDocumentCache = t(this.clearDocumentCache, this), this.addToRecent = t(this.addToRecent, this), 
            this._mindTheMax = t(this._mindTheMax, this), this.options = e || {}, this.clearDocumentCache(), 
            this.initializeProperties({
                recent:[],
                document:[]
            });
        }
        return e.prototype._mindTheMax = function(t) {
            return this.options.max && (t = t.slice(0, this.options.max)), t;
        }, e.prototype.addToRecent = function(t) {
            var e, i, n, o, r, s;
            if (t = Color.normalize(t)) {
                for (e = Draw.Export.CSS.toCssString(t), i = !1, o = this.get("recent"), n = r = 0, 
                s = o.length; s >= 0 ? s > r :r > s; n = s >= 0 ? ++r :--r) if (Draw.Export.CSS.toCssString(o[n]) === e) {
                    i = n;
                    break;
                }
                return i !== !1 && (o = o.slice(0, i).concat(o.slice(i + 1, o.length))), o = [ t ].concat(o), 
                this.set("recent", this._mindTheMax(o)), t;
            }
        }, e.prototype.clearDocumentCache = function() {
            return this._documentCache = {};
        }, e.prototype.addToDocument = function(t, e) {
            var i, n, o;
            return (t = Color.normalize(t)) ? (i = Draw.Export.CSS.toCssString(t), i in this._documentCache ? this._documentCache[i].count++ :this._documentCache[i] = {
                count:1,
                color:t
            }, o = _.values(this._documentCache), o.sort(function(t, e) {
                return e.count - t.count;
            }), o = function() {
                var t, e, i;
                for (i = [], t = 0, e = o.length; e > t; t++) n = o[t], i.push(n.color);
                return i;
            }(), this.set("document", this._mindTheMax(o), e), t) :void 0;
        }, e.prototype.addTo = function(t, e, i) {
            var n;
            return e = Color.normalize(e), e && (n = this.get(t), i ? n = [ e ].concat(n) :n.push(e), 
            this.set(t, this._mindTheMax(n))), e;
        }, e;
    }(), Draw.Colors.supportedProperties = function() {
        return [ "recent", "document" ];
    }, Draw.PropertyMixin.mixinTo(Draw.Colors);
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    }, n = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.ZOOM_NOTCHES = [ 50, 66, 100, 150, 200, 300, 400, 500, 800, 1600 ], Draw.DocumentBase = function() {
        function t() {}
        return t.prototype.onStateChange = function() {
            var t;
            return t = _.toArray(arguments), t.splice(0, 0, "change:state"), this.trigger.apply(this, t);
        }, t.prototype.initializeStateChangeEvents = function() {
            var t;
            if (!this._stateChangeEventsInitialized) return t = this.getRootLayer(), t.bind("change:child", _.bind(this.onStateChange, this, "change:child")), 
            t.bind("change:hierarchy", _.bind(this.onStateChange, this, "change:hierarchy")), 
            t.bind("change:segment", _.bind(this.onStateChange, this, "change:segment")), t.bind("upgrade:json", _.bind(this.onStateChange, this, "upgrade:json")), 
            this._stateChangeEventsInitialized = !0;
        }, t;
    }(), Draw.DocumentBase.mixinTo = function(t) {
        return _.extend(t.prototype, Draw.DocumentBase.prototype);
    }, Draw.ViewableDocument = function(e) {
        function n(e) {
            this.fromJSON = t(this.fromJSON, this), this.toJSON = t(this.toJSON, this), this.toCss = t(this.toCss, this);
            var i;
            this.options = _.extend({}, this.DEFAULTS, e), this.initializeProperties(this.options), 
            i = window.paper, this.scope = new paper.PaperScope(), this.options.project = this.scope.project = new Draw.Project(this), 
            window.paper = i, this.id = this.options.id, this.set({
                project:this.options.project
            }), this.options.activate && this.activate(), this._initializeDocumentState(this.options.state);
        }
        return i(n, e), n.prototype.DEFAULTS = {
            zoom:100,
            activate:!0,
            size:new paper.Size(1e3, 800),
            grid_size:Draw.DEFAULT_GRID,
            background_color:"white",
            background_image:null,
            background_repeat:"repeat",
            background_position:"top center",
            "toggle:background_image":!1,
            "toggle:background_cover":!1,
            "toggle:preview":!1
        }, n.prototype.WATCHED_PROPERTIES = [ "size", "background_color", "background_image", "background_repeat", "background_position", "toggle:background_image", "toggle:background_cover", "use_padding_top", "version" ], 
        n.supportedProperties = function() {
            return [ "tool", "cursor", "size", "fill_color", "stroke_color", "project", "zoom", "grid", "guides", "grid_system", "locked", "font", "fonts", "font_face", "font_size", "selected_stop", "background_color", "background_image", "background_repeat", "background_position", "style:text", "style:path", "id", "organization_id", "project_id", "easel_project", "thumbnail_url", "name", "creator", "slug", "demo_type", "accessibility", "toggle:dialogs", "toggle:dialog_symbols", "toggle:dialog_undo", "toggle:grids", "toggle:grid_system", "toggle:guides", "toggle:grid", "toggle:selection_bounds", "toggle:background_image", "toggle:background_repeat", "toggle:preview", "toggle:background_cover", "use_padding_top", "version" ];
        }, mixin(n, Draw.PropertyMixin), n.prototype.isActive = function() {
            return !!this._active;
        }, n.prototype.activate = function() {
            return this._active ? void 0 :(Draw.ViewableDocument._activeDocument && Draw.ViewableDocument._activeDocument.deactivate(), 
            this._active = !0, this._oldPaper = window.paper, window.paper = this.scope, Draw.ViewableDocument._activeDocument = this, 
            this.getProject().userLayer ? this.getProject().userLayer.activate() :void 0);
        }, n.prototype.deactivate = function() {
            return this._active ? (this._active = !1, this._oldPaper ? window.paper = this._oldPaper :void 0) :void 0;
        }, n.prototype.setCanvasElement = function(t) {
            return this.getProject().setCanvasElement(t);
        }, n.prototype.getRootLayer = function() {
            var t;
            return t = this.getProject(), t.rootLayer;
        }, n.prototype.isPersisted = function() {
            return this.id && "demo" !== this.id;
        }, n.prototype.isDemo = function() {
            return !!this.get("demo_type");
        }, n.prototype.getDemoName = function() {
            var t;
            return t = this.get("demo_type"), t && (t = _.camelize(t, !0)), t;
        }, n.prototype.loadDemo = function() {
            var t;
            return t = this.getDemoName() || "Default", Draw.Demo[t] ? this.isPersisted() ? Draw.Demo[t].documentLoad(this) :Draw.Demo[t].documentRun(this) :void 0;
        }, n.prototype.rerunDemo = function() {
            var t;
            return t = this.getDemoName() || "Default", Draw.Demo[t] && Draw.Demo[t].documentRerun ? Draw.Demo[t].documentRerun(this) :void 0;
        }, n.prototype.loadDefault = function() {
            var t;
            return t = this.getDemoName(), t && Draw.Demo[t] ? Draw.Demo[t].documentLoad(this, !1) :this.fromJSON(Draw.Document.DEFAULT_JSON);
        }, n.prototype.getBounds = function() {
            var t;
            return this._boundsCache || (t = this.getSize(), this._boundsCache = new paper.Rectangle(0, 0, t.width, t.height)), 
            this._boundsCache;
        }, n.prototype.getImages = function() {
            var t, e;
            return e = this.getProject().getImages(), t = this.get("background_image"), t && this.get("toggle:background_image") && e.push(t), 
            e;
        }, n.prototype.getElementById = function(t) {
            var e;
            return e = this.getProject().filterItems(function(e) {
                return e.get && e.get("id") === t;
            }), e[0];
        }, n.prototype.initializeDomElements = function() {
            var t;
            if (!this._domElementsInitialized) return this._cacheActiveDoc(), this.activate(), 
            this.getProject().initializeDomElements(), this._domElementsInitialized = !0, this._activateCachedDoc(), 
            t = this.isActive();
        }, n.prototype.toCss = function() {
            var t, e, i;
            return e = {}, t = this.getBackgroundColor(), t ? _.isString(t) || (t = t.toCssString()) :t = "transparent", 
            e["background-color"] = t, i = this.getBackgroundImage(), i && this.get("toggle:background_image") && (e["background-image"] = "url(" + i + ")", 
            e["background-repeat"] = this.getBackgroundRepeat(), e["background-position"] = this.getBackgroundPosition(), 
            this.get("toggle:background_cover") && (e["-webkit-background-size"] = "cover", 
            e["-moz-background-size"] = "cover", e["-o-background-size"] = "cover", e["background-size"] = "cover")), 
            e;
        }, n.prototype.toJSON = function() {
            var t, e;
            return t = Draw.toJSON(_.extract(this.get(), this.WATCHED_PROPERTIES)), this.symbols && (t.symbols = function() {
                var t, i, n, o;
                for (n = this.symbols.models, o = [], t = 0, i = n.length; i > t; t++) e = n[t], 
                o.push(e.id);
                return o;
            }.call(this)), t.document = this.getProject().toJSON(), t;
        }, n.prototype.fromJSON = function(t) {
            var e;
            if (t) return e = t.sz, e || (e = t), this.setSize(paper.Size.fromJSON(e)), this._cacheActiveDoc(), 
            this.activate(), this.getProject().fromJSON(t.document, {
                document:this
            }), this._activateCachedDoc(), this.set(Draw.fromJSON(_.extract(t, this.WATCHED_PROPERTIES)));
        }, n.prototype.getFocus = function() {
            var t;
            return t = this.getFocusManager(), t && t.getFocusType() || Draw.FOCUS_CANVAS;
        }, n.prototype.setFocusManager = function(t) {
            return this.focusManager = t;
        }, n.prototype.getFocusManager = function() {
            return this.focusManager || Draw.G.focus;
        }, n.prototype.pushFocus = function(t) {
            return this.focusManager ? this.focusManager.pushFocus(t) :void 0;
        }, n.prototype.popFocus = function(t) {
            return this.focusManager ? this.focusManager.popFocus(t) :void 0;
        }, n.prototype._cacheActiveDoc = function() {
            return this._lastActive = Draw.ViewableDocument._activeDocument;
        }, n.prototype._activateCachedDoc = function() {
            return this._lastActive ? this._lastActive.activate() :void 0;
        }, n.prototype._initializeDocumentState = function(t) {
            return t ? (this.state = new Draw.DocumentState({
                document:this,
                runDemo:this.options.runDemo,
                realtime:this.options.realtime,
                thumbSaver:this.options.thumbSaver
            }), t.addState(this.state)) :void 0;
        }, n;
    }(Draw.DocumentBase), Draw.EditableDocument = function(e) {
        function n(e) {
            var i;
            null == e && (e = {}), this.redrawSelected = t(this.redrawSelected, this), this.redraw = t(this.redraw, this), 
            this.redrawToolLayer = t(this.redrawToolLayer, this), this.redrawToolBottom = t(this.redrawToolBottom, this), 
            this.updateRedrawToolBottom = t(this.updateRedrawToolBottom, this), this.redrawUserLayer = t(this.redrawUserLayer, this), 
            this.updateRedrawUserLayer = t(this.updateRedrawUserLayer, this), this.fromJSON = t(this.fromJSON, this), 
            this.toJSON = t(this.toJSON, this), this.checkBackgroundRepeat = t(this.checkBackgroundRepeat, this), 
            i = {
                initializeDomElements:window.TESTING
            }, n.__super__.constructor.call(this, _.extend(i, e)), this.clipboard = new Draw.Clipboard(), 
            this.userRedrawDelay = new Debouncer(100, this.redrawUserLayer), this.gridRedrawDelay = new Debouncer(2, this.redrawToolBottom), 
            this.selectionModel = new Draw.SelectionModel({
                project:this.get("project")
            }), this.initializeGrids(this.options), this.initializeBackground();
        }
        var o;
        return i(n, e), n.prototype._module = "Document", o = "1.0", n.prototype.GRID_PROPERTIES = [ "grid", "guides", "grid_system" ], 
        n.prototype.DEFAULTS = {
            activate:!0,
            version:o,
            zoom:100,
            size:new paper.Size(1e3, 800),
            grid_size:Draw.DEFAULT_GRID,
            font_face:"Helvetica",
            font_size:12,
            tool:"pointer",
            background_color:"white",
            background_image:null,
            background_repeat:"repeat",
            background_position:"top center",
            "toggle:background_image":!1,
            "toggle:background_cover":!1,
            "toggle:preview":!1,
            state:null
        }, n.prototype.focusType = Draw.FOCUS_CANVAS, n.prototype.initializeStateChangeEvents = function() {
            return n.__super__.initializeStateChangeEvents.call(this), this.bind("change:config", _.bind(this.onStateChange, this, "change:config")), 
            this.bind("change:symbols", _.bind(this.onStateChange, this, "change:symbols"));
        }, n.prototype.initializeBackground = function() {
            var t = this;
            return this.bind("change:background_repeat", this.checkBackgroundRepeat), this.checkBackgroundRepeat(), 
            this._bgImage = null, this.bind("change:background_image", function(e, i) {
                return i ? (t._bgImage = new Image(), t._bgImage.src = i) :t._bgImage = null;
            }), this.bind("change:background_repeat", this.checkBackgroundRepeat), this.bind("change:size", this.onChangeSize);
        }, n.prototype.initializeGrids = function(t) {
            var e, i, n;
            return this.autoSnapper = new Draw.AutoSnapper({
                document:this
            }), e = new Draw.GridSnapper(t.grid_size), e.setEnabled(!1), e.setVisible(!1), n = new Draw.GuidesSnapper({
                enabled:!1,
                visible:!1
            }), i = new Draw.GridSystemSnapper({
                document_size:this.getSize().width,
                enabled:!1,
                visible:!1
            }), this.set({
                grid:e,
                guides:n,
                grid_system:i
            }), e.bind("change", this.updateRedrawToolBottom), n.bind("change", this.updateRedrawToolBottom), 
            i.bind("change", this.updateRedrawToolBottom), this.autoSnapper.bind("change", this.updateRedrawToolBottom), 
            this.set({
                "toggle:grids":!1,
                "toggle:grid":!1,
                "toggle:guides":!1,
                "toggle:grid_system":!1
            }), e.bind("change:visible", _.bind(this.onGridVisiblityChange, this, "grid")), 
            n.bind("change:visible", _.bind(this.onGridVisiblityChange, this, "guides")), i.bind("change:visible", _.bind(this.onGridVisiblityChange, this, "grid_system"));
        }, n.getCurrentJSONVersion = function() {
            return new Lib.Version(o);
        }, n.prototype.getCurrentJSONVersion = function() {
            return Draw.Document.getCurrentJSONVersion();
        }, n.prototype.getDocumentState = function() {
            return this.state;
        }, n.prototype.setLocked = function(t) {
            return this.selectionModel.setLocked(t), this.set({
                locked:t
            });
        }, n.prototype.getLocked = function() {
            return this.get("locked");
        }, n.prototype.acceptsObject = function(t) {
            return this.getProject().acceptsObject(t);
        }, n.prototype.activateToolLayer = function() {
            return this.getProject().activateToolLayer();
        }, n.prototype.deactivateToolLayer = function() {
            return this.getProject().deactivateToolLayer();
        }, n.prototype.getToolLayer = function(t) {
            return t ? this.getProject().bottomToolLayer :this.getProject().toolLayer;
        }, n.prototype.getActiveLayer = function() {
            return this.getProject().activeLayer;
        }, n.prototype.toggleBackgroundImage = function() {
            return this.set("toggle:background_image", !this.get("toggle:background_image"));
        }, n.prototype.toggleBackgroundCover = function() {
            return this.set("toggle:background_cover", !this.get("toggle:background_cover"));
        }, n.prototype.checkBackgroundRepeat = function() {
            return this.set("toggle:background_repeat", "repeat" === this.getBackgroundRepeat());
        }, n.prototype.toggleBackgroundRepeat = function() {
            var t;
            return t = this.getBackgroundRepeat(), this.setBackgroundRepeat("no-repeat" === t && "repeat" || "no-repeat");
        }, n.prototype.toJSON = function() {
            var t;
            return t = n.__super__.toJSON.call(this), t = _.extend(t, {
                grid:this.getGrid().toJSON(),
                gs:this.getGridSystem().toJSON(),
                guides:this.getGuides().toJSON(),
                version:this.getVersion().toString(),
                use_padding_top:!0
            });
        }, n.prototype.fromJSON = function(t) {
            var e, i, o;
            if (t) return o = t.sz, o || (o = t), this.set("version", t.version || "0.0"), this.symbols && this.symbols.fromJSON(t.symbols), 
            n.__super__.fromJSON.call(this, t), this.getGrid().fromJSON(t.grid), this.getGuides().fromJSON(t.guides), 
            this.getGridSystem().fromJSON(t.gs), this.setSize(paper.Size.fromJSON(o)), this.triggerLoad(), 
            setTimeout(this.upgradeNavbarPadding, 10), this.getCurrentJSONVersion().isEqual(this.getVersion()) ? void 0 :(i = this.getVersion().toJSON(), 
            e = this.getCurrentJSONVersion().toJSON(), this.setVersion(e), this.triggerJSONUpgrade(this, [ "version" ], {
                od:i,
                oi:e
            }));
        }, n.prototype.triggerJSONUpgrade = function(t, e, i) {
            return this.trigger("change:state", "upgrade:json", t, t, e, i);
        }, n.prototype.updateRedrawUserLayer = function() {
            return this.userRedrawDelay.update(new paper.Rectangle(0, 0, this.getSize().width, this.getSize().height));
        }, n.prototype.redrawUserLayer = function(t) {
            return this.redraw(Draw.LAYER_USER, t);
        }, n.prototype.updateRedrawToolBottom = function() {
            return this.gridRedrawDelay.update();
        }, n.prototype.redrawToolBottom = function() {
            return this.redraw(Draw.LAYER_TOOL_BOTTOM);
        }, n.prototype.redrawToolLayer = function() {
            return this.redraw(Draw.LAYER_TOOL);
        }, n.prototype.redraw = function(t, e) {
            return this.trigger("redraw", this, t || Draw.LAYER_USER, this.get("project"), e);
        }, n.prototype.redrawSelected = function() {
            return this.redraw(Draw.LAYER_USER, this.selectionModel.getSelectedBounds());
        }, n.prototype.onGridVisiblityChange = function(t, e, i) {
            var n, o, r, s, a;
            for (this.set("toggle:" + t, i), n = !0, a = this.GRID_PROPERTIES, r = 0, s = a.length; s > r; r++) o = a[r], 
            n = n && this.get(o).get("visible");
            return this.set("toggle:grids", n);
        }, n;
    }(Draw.ViewableDocument), Draw.Document = function(e) {
        function o(e) {
            null == e && (e = {}), this._moveSelectedInHierarchy = t(this._moveSelectedInHierarchy, this), 
            this.downloadAsPNG = t(this.downloadAsPNG, this), this.setupUploader = t(this.setupUploader, this), 
            this.uploadImage = t(this.uploadImage, this), this.startContainerTour = t(this.startContainerTour, this), 
            this.help = t(this.help, this), this.linkToDocument = t(this.linkToDocument, this), 
            this._updateLastZoom = t(this._updateLastZoom, this), this.zoom100 = t(this.zoom100, this), 
            this.zoom = t(this.zoom, this), this.signup = t(this.signup, this), this.editCode = t(this.editCode, this), 
            this.exportProject = t(this.exportProject, this), this.exportCode = t(this.exportCode, this), 
            this.exportAllCode = t(this.exportAllCode, this), this.copy = t(this.copy, this), 
            this.cut = t(this.cut, this), this.paste = t(this.paste, this), this.undoAdd = t(this.undoAdd, this), 
            this.undoResume = t(this.undoResume, this), this.undoIgnore = t(this.undoIgnore, this), 
            this._setBackgroundColor = t(this._setBackgroundColor, this), this.toolChangedState = t(this.toolChangedState, this), 
            this.toolTranslated = t(this.toolTranslated, this), this.toolDragEnd = t(this.toolDragEnd, this), 
            this.toolDragStart = t(this.toolDragStart, this), this.snap = t(this.snap, this), 
            this.promptForColor = t(this.promptForColor, this), this.sensiblyCenter = t(this.sensiblyCenter, this), 
            this.pasteStyles = t(this.pasteStyles, this), this.copyStyles = t(this.copyStyles, this), 
            this.setCurrentStyle = t(this.setCurrentStyle, this), this.getCurrentStyle = t(this.getCurrentStyle, this), 
            this.upgradeNavbarPadding = t(this.upgradeNavbarPadding, this), this.onChangeSize = t(this.onChangeSize, this), 
            o.__super__.constructor.call(this, e), this.hotkeys = this.options.hotkeys || new Draw.Hotkeys(), 
            this.tools = {
                pointer:new Draw.PointerTool(this),
                shape:new Draw.ShapeTool(this),
                gradient:new Draw.GradientTool(this),
                text:new Draw.TextTool(this),
                hand:new Draw.HandTool(this),
                keyboard:new Draw.KeyboardTool(this)
            }, Features.has("pen_tool") && (this.tools.node_pointer = new Draw.NodePointerTool(this), 
            this.tools.pen = new Draw.PenTool(this)), this.fontLoader = this.options.fontLoader || new Draw.FontLoader({}, {
                fontModel:this.getFonts()
            }), this.setFonts(this.options.fonts || new Draw.Fonts()), this.setFont("Helvetica"), 
            this.set(this.options), this._updateLastZoom(), this.symbols = this.options.symbols, 
            this.initializeSymbolEvents(), this.initializeAlignmentFunctions(), this.initializeConfigChangeEvents(), 
            this.options.initializeDomElements && this.initializeDomElements();
        }
        return i(o, e), o.prototype.initializeSymbolEvents = function() {
            var t;
            if (this.symbols) return t = this, this.symbols.bind("symbol:remove", _.bind(this.trigger, this, "symbol:remove")), 
            this.symbols.bind("change", function(e) {
                return e = e.owner || e, t.redraw(Draw.LAYER_USER, e.getDrawableBounds());
            }), this.symbols.bind("remove", function(e, i, n) {
                return n.path = [ "symbols", n.index ], n.operation = "remove", n.symbol = e, t.trigger("change:symbols", t, e, n.path, n);
            }), this.symbols.bind("add", function(e, i, n) {
                var o;
                return o = -1, t.symbols.each(function(t, i) {
                    return t.id === e.id ? o = i :void 0;
                }), n.index = o, n.path = [ "symbols", o ], n.operation = "add", n.symbol = e, pds(t, "symbol added to document. Triggering event", e, n), 
                t.trigger("change:symbols", t, e, n.path, n);
            }), this.symbols.bind("change:id", function(e, i, n) {
                var o;
                return o = -1, t.symbols.each(function(t, i) {
                    return t.id === e.id ? o = i :void 0;
                }), n.index = o, n.path = [ "symbols", o ], n.operation = "change", n.symbol = e, 
                n.old = e.getPrevious("id"), n["new"] = e.id, t.trigger("change:symbols", t, e, n.path, n);
            });
        }, o.prototype.initializeDomElements = function() {
            var t, e, i;
            if (!this._domElementsInitialized) {
                o.__super__.initializeDomElements.call(this), i = this.tools;
                for (t in i) e = i[t], e && e.initializeDomElements && e.initializeDomElements();
                return this.gridPaths = new Draw.Grid(this), this.guidePaths = new Draw.Guides(this), 
                this.gridSystemPaths = new Draw.GridSystem(this), this.autoGuidesPaths = new Draw.AutoGuides(this), 
                this.initializeStateChangeEvents(), this._domElementsInitialized = !0;
            }
        }, o.prototype.onChangeSize = function() {
            return this.get("grid_system").set("document_size", this.getSize().width), this._boundsCache = null;
        }, o.prototype.initializeAlignmentFunctions = function() {
            var t, e, i;
            if (window.Align) {
                i = [];
                for (t in Align) e = Align[t], 0 !== t.indexOf("_") && i.push(this[t] = _.bind(this._align, this, t));
                return i;
            }
        }, o.prototype._align = function(t) {
            return Align[t](this.selectionModel.getSelected());
        }, o.prototype.clearAutoSnapper = function() {
            return this.autoSnapper.setXGuides([]), this.autoSnapper.setYGuides([]);
        }, o.prototype.syncCssOnSelectedObjects = function() {
            var t, e, i, n;
            if (i = this.selectionModel.getSelected()) {
                n = [];
                for (t in i) e = i[t], e.syncCssToProperties ? n.push(e.syncCssToProperties(null, {
                    silent:!1,
                    undoIgnore:!0,
                    sync:!1
                })) :n.push(void 0);
                return n;
            }
        }, o.prototype.sampleColor = function(t) {
            return this.getProject().sampleColor(t);
        }, o.prototype.triggerLoad = function() {
            return this.trigger("load", this);
        }, o.prototype.notify = function(t) {
            return this.trigger("notify", t);
        }, o.prototype.flashNotify = function(t) {
            return this.trigger("notify:flash", t);
        }, o.prototype.statusNotify = function(t, e) {
            return this.trigger("notify:status", t, e);
        }, o.prototype.statusHide = function() {
            return this.trigger("notify:status:hide");
        }, o.prototype.dialogNotify = function(t, e) {
            return this.trigger("notify:dialog", this, t, e);
        }, o.prototype.videoNotify = function(t, e, i, n) {
            return this.trigger("notify:video", this, t, e, i, n);
        }, o.prototype.onChangeConfig = function(t, e) {
            var i, n, o, r, s, a, l;
            if (n = e.changedAttributes(), n && n.length) {
                for (l = [], s = 0, a = n.length; a > s; s++) i = n[s], o = {}, o.old = e.getPrevious(i), 
                o["new"] = e.get(i), r = [ i ], t && (r = [ t, i ]), l.push(this.trigger("change:config", this, e, r, o));
                return l;
            }
        }, o.prototype.initializeConfigChangeEvents = function() {
            var t, e, i, n, o, r, s, a;
            for (e = this.getGridSystem(), t = this.getGrid(), i = this.getGuides(), e.bind("change", _.bind(this.onChangeConfig, this, "grid_system")), 
            t.bind("change", _.bind(this.onChangeConfig, this, "grid")), i.bind("change", _.bind(this.onChangeConfig, this, "guides")), 
            s = this.WATCHED_PROPERTIES, a = [], o = 0, r = s.length; r > o; o++) n = s[o], 
            a.push(this.bind("change:" + n, _.bind(this.onChangeConfig, this, null)));
            return a;
        }, o.prototype.upgradeNavbarPadding = function() {
            var t, e, i, n, o;
            if (!(this.get("use_padding_top") || (o = this.getSize(), o.width < 980))) return n = this.getProject(), 
            i = n.filterItems(function(t) {
                return t instanceof Draw.BootstrapNavBar;
            }), t = n.filterItems(function(t) {
                return t instanceof Draw.BootstrapContainer;
            }), i[0] && t[0] && "navbar-fixed-top" === i[0].get("positioning") && (e = t[0].get("margin_top"), 
            e = parseInt(e), e && (e = Math.max(0, e - i[0].getSize().height), t[0].set("margin_top", e + "px"))), 
            this.set("use_padding_top", !0);
        }, o.prototype.getHelperCanvas = function() {
            return this._helperCanvas || (this._helperCanvas = document.createElement("canvas")), 
            this._helperCanvas;
        }, o.prototype.STYLE_DEFAULTS = {
            text:{
                font_face:"Arial",
                text_color:"#333",
                line_height:1.5
            },
            heading:{
                font_face:"Arial"
            },
            path:{
                stroke_cap:"round",
                stroke_align:"inner",
                fill_color:"#80ccff",
                border_color:Color.normalize("#333"),
                border_width:0
            }
        }, o.prototype.getCurrentStyle = function(t) {
            var e;
            return e = this.get("style:" + t), !e && t in this.STYLE_DEFAULTS ? this.STYLE_DEFAULTS[t] :e ? e.getCurrentStyle ? e.getCurrentStyle() :e :{};
        }, o.prototype.setCurrentStyle = function(t, e) {
            return e ? this.set("style:" + t, e) :void 0;
        }, o.prototype.copyStyles = function() {
            var t;
            return (t = this.selectionModel.getOneSelected()) ? this._styleCopyObject = t :void 0;
        }, o.prototype.pasteStyles = function() {
            var t, e, i, n, o, r;
            if (t = this.getStyleCopyObject()) {
                for (o = this.selectionModel.getSelectedList(), r = [], i = 0, n = o.length; n > i; i++) e = o[i], 
                r.push(e.copyStylesFrom(t));
                return r;
            }
        }, o.prototype.getStyleCopyObject = function() {
            return this._styleCopyObject;
        }, o.prototype.COLOR_PROPS = [ "fill_color", "stroke_color" ], o.prototype._cacheCurrentColors = function(t) {
            var e, i, o, r, s, a, l, c, h;
            if (t && t.length && Draw.G.colors) {
                for (h = [], r = 0, a = t.length; a > r; r++) {
                    for (e = t[r], o = e.supportedProperties && e.supportedProperties() || [], c = this.COLOR_PROPS, 
                    s = 0, l = c.length; l > s; s++) i = c[s], n.call(o, i) >= 0 && Draw.G.colors.addToDocument(e.get(i));
                    h.push(this._cacheCurrentColors(e.children));
                }
                return h;
            }
        }, o.prototype.cacheCurrentColors = function() {
            return Draw.G.colors ? (Draw.G.colors.clearDocumentCache(), this._cacheCurrentColors(this.getProject().getChildren())) :void 0;
        }, o.prototype.sensiblyCenter = function() {
            return this.trigger("prompt:center", this);
        }, o.prototype.promptForColor = function(t, e, i) {
            return this.trigger("prompt:color", t, e, i);
        }, o.prototype.snap = function(t, e) {
            var i, n, o;
            return e = e || {}, t instanceof paper.Point ? t = new paper.Point(Math.round(t.x), Math.round(t.y)) :t instanceof paper.Rectangle && !(t instanceof Draw.IntRectangle) && (t = new Draw.IntRectangle(t)), 
            o = this.getZoom() / 100, n = t, Features.has("auto_snap") && e.autoSnap && !this.getGrid().getEnabled() && (n = this.autoSnapper.snap(t, o, e)), 
            n = this.getGuides().snap(this.getGrid().snap(n, o), o), i = this.getGridSystem(), 
            i && (n = i.snap(n, o)), n;
        }, o.prototype._setVersion = function(t) {
            return t = new Lib.Version(t || this.CURRENT_JSON_VERSION);
        }, o.prototype._setTool = function(t) {
            var e, i;
            if (this.tools) return e = this.getTool(), t === this.getTool() ? t :(e = this.tools[e] || e, 
            null != e && (e.unbind("dragstart", this.toolDragStart), e.unbind("dragend", this.toolDragEnd), 
            e.unbind("translated", this.toolTranslated), e.unbind("change:state", this.toolChangedState)), 
            i = this.tools[t], null != i && (i.bind("dragstart", this.toolDragStart), i.bind("dragend", this.toolDragEnd), 
            i.bind("translated", this.toolTranslated), i.bind("change:state", this.toolChangedState), 
            i.activate(), this.get("project").setSelectionMode(i.SELECTION_MODE), this.set("cursor", i.CURSOR || "default"), 
            this.redraw(Draw.LAYER_TOOL)), t);
        }, o.prototype._setSize = function(t) {
            var e, i, n;
            return i = this.getSize(), i && (t.width && !isNaN(t.width) && (n = t.width), t.height && !isNaN(t.height) && (e = t.height), 
            t = new paper.Size(n || i.width, e || i.height)), t;
        }, o.prototype.toolDragStart = function(t, e) {
            return this.trigger("tool:dragstart", t, e);
        }, o.prototype.toolDragEnd = function(t, e) {
            return this.trigger("tool:dragend", t, e);
        }, o.prototype.toolTranslated = function(t, e) {
            return this.trigger("tool:translated", t, e);
        }, o.prototype.toolChangedState = function(t, e, i) {
            return this.trigger("tool:change:state", t, this.getTool(), e, i);
        }, o.prototype.moveToPointer = function() {
            return this.setTool("pointer");
        }, o.prototype._setBackgroundColor = function(t) {
            return _.isString(t) && (t = t.toLowerCase(), ("null" === t || "none" === t || "transparent" === t) && (t = null)), 
            Color.normalize(t);
        }, o.prototype.getActiveTool = function() {
            return this.tools[this.getTool()];
        }, o.prototype.placeSymbol = function(t, e) {
            var i, n = this;
            if (t instanceof Draw.Symbol) return i = {
                parent:this.getActiveLayer(),
                commandClass:Draw.AddObjectCommand
            }, this.undoBatch(i, function() {
                var i;
                return i = t.instantiate(), e && (i.translate(e.subtract(i.getPosition())), i.translate(new paper.Point(1, 0))), 
                n.selectionModel.setSelected(i.getSelectable()), n.trigger("symbol:place", t, i), 
                [ i ];
            });
        }, o.prototype.smartGroup = function() {
            var t, e, i, n, o, r;
            if (i = this.selectionModel.getSelectedList({
                groups:!0,
                sort:"asc"
            }), 0 !== i.length) {
                for (n = !1, o = 0, r = i.length; r > o; o++) t = i[o], t.get("snapped") && (n = !0);
                return n && i.length > 1 ? (alert("Oops. You've selected more than one snapped item.\nYou can only make an element out of a single snapped item.\n\nSelect only one and try again."), 
                !1) :(this.flashNotify("Symbol!"), e = {
                    commandClass:Draw.CreateSymbolCommand
                }, this.undoBatch(e, function() {
                    return [ i ];
                }));
            }
        }, o.prototype.group = function() {
            var t, e = this;
            return this.flashNotify("Grouped"), t = {
                commandClass:Draw.GroupCommand
            }, this.undoBatch(t, function() {
                var t, i;
                return i = e.selectionModel.getSelectedList({
                    groups:!0,
                    sort:"asc"
                }), i = function() {
                    var e, n, o;
                    for (o = [], e = 0, n = i.length; n > e; e++) t = i[e], t.get("snapped") || o.push(t);
                    return o;
                }(), 0 !== i.length ? [ i ] :void 0;
            }), this.trigger("group", this);
        }, o.prototype.smartUngroup = function() {
            return this.ungroup();
        }, o.prototype.ungroup = function() {
            var t, e = this;
            return this.flashNotify("Ungrouped"), t = {
                commandClass:Draw.UngroupCommand
            }, this.undoBatch(t, function() {
                var t, i, n, o, r;
                if (i = e.selectionModel.getSelectedList({
                    groups:!0
                }), 0 !== i.length) {
                    for (r = [], n = 0, o = i.length; o > n; n++) t = i[n], t.ungroup && r.push(t);
                    return r;
                }
            });
        }, o.prototype.undoIgnore = function() {
            return this.trigger("undo:ignore");
        }, o.prototype.undoResume = function() {
            return this.trigger("undo:resume");
        }, o.prototype.undoAdd = function(t, e) {
            return this.trigger("undo:add", t, e);
        }, o.prototype.undoBatch = function(t, e) {
            var i, n;
            return this.undoIgnore(), i = new Draw.MultiObjectUndoBatch(_.extend({
                document:this
            }, t)), n = e(), n && n.length && (i.setInitialState(n), t.execute !== !1 && i.execute(), 
            this.undoAdd(i), i.setEndState(n)), this.undoResume(), i;
        }, o.prototype.undo = function() {
            return this.trigger("undo", this);
        }, o.prototype.redo = function() {
            return this.trigger("redo", this);
        }, o.prototype.save = function() {
            return this.trigger("save", this);
        }, o.prototype.saveAs = function() {
            return this.trigger("prompt:saveas", JSON.stringify(this.toJSON())), this.trigger("saveAs", this);
        }, o.prototype.paste = function() {
            return this.flashNotify("Paste"), this.clipboard.paste();
        }, o.prototype.cut = function() {
            return this.clipboard.cut();
        }, o.prototype.copy = function() {
            return this.clipboard.copy();
        }, o.prototype.duplicateObjects = function(t, e) {
            var i, n = this;
            if (t) return t = Draw.Item.getGroups(t), t = Draw.Item.sortAsc(t), i = {
                useCurrentParent:!0,
                commandClass:Draw.AddObjectCommand
            }, this.undoBatch(i, function() {
                var i, o, r, s, a;
                for (o = [], n.selectionModel.clearSelected(), s = 0, a = t.length; a > s; s++) r = t[s], 
                i = r.clone(), i && (n.selectionModel.addToSelected(i.getSelectable()), e !== !1 && i.translate(new paper.Point(10, 10)), 
                o.push(i));
                return n.translateObjectsIntoView(o, !0), o;
            });
        }, o.prototype.duplicateSelected = function(t) {
            var e;
            return this.flashNotify("Duplicate!"), (e = this.selectionModel.getSelected()) ? this.duplicateObjects(this.selectionModel.getSelected(), t) :void 0;
        }, o.prototype.duplicate = function() {
            return this.trigger("duplicate", this);
        }, o.prototype.translateObjectsIntoView = function(t, e) {
            return this.trigger("translate:objects", t, e);
        }, o.prototype.moveObjectsIntoView = function(t, e) {
            return this.trigger("show:objects", t, e);
        }, o.prototype.removeSelected = function() {
            var t, e = this;
            return t = {
                useCurrentParent:!0,
                commandClass:Draw.RemoveObjectCommand
            }, this.undoBatch(t, function() {
                var t, i;
                return i = e.selectionModel.getSelectedList({
                    groups:!0
                }), i = function() {
                    var e, n, o;
                    for (o = [], e = 0, n = i.length; n > e; e++) t = i[e], (!t.canBeRemoved || t.canBeRemoved()) && o.push(t);
                    return o;
                }();
            });
        }, o.prototype.clearSelected = function() {
            return this.get("toggle:preview") ? this.preview() :this.selectionModel.clearSelected();
        }, o.prototype.lockSelected = function() {
            var t, e, i, n;
            e = this.selectionModel.getSelected(), n = [];
            for (t in e) i = e[t], n.push(i.set("is_locked", !i.get("is_locked")));
            return n;
        }, o.prototype.resetSelectedToBaseStyles = function() {
            var t, e, i, n, o;
            if (i = this.selectionModel.getSelectedList(), i && i.length) {
                for (this.undoIgnore(), t = new Draw.MultiPropertyUndoBatch(), t.setObjects(i), 
                n = 0, o = i.length; o > n; n++) e = i[n], e.resetToBaseStyles();
                return t.finish(), t.isNoop() || this.undoAdd(t), this.undoResume();
            }
        }, o.prototype.preview = function() {
            return this.selectionModel.clearSelected(), this.zoom100(), this.set("toggle:preview", !this.get("toggle:preview"));
        }, o.prototype.canComment = function() {
            var t;
            return "demo" === (t = this.id) ? (alert("Please sign up to use the commenting features!"), 
            !1) :!0;
        }, o.prototype.commentMode = function() {
            return this.canComment() ? (this.preview(), this.trigger("change:toggle:comments", this, !0)) :void 0;
        }, o.prototype.exportAllCode = function() {
            return this.trigger("prompt:codeexport", null, !0);
        }, o.prototype.exportCode = function() {
            var t;
            return t = this.selectionModel.getSelected(), this.trigger("prompt:codeexport", t, !1);
        }, o.prototype.exportProject = function() {
            return this.trigger("export:project");
        }, o.prototype.editCode = function() {
            return this.trigger("prompt:codeedit");
        }, o.prototype.signup = function(t) {
            return this.trigger("prompt:signup", t);
        }, o.prototype.canShare = function() {
            var t;
            return "demo" === (t = this.id) ? (alert("Please sign up to use the collaboration features!"), 
            !1) :!0;
        }, o.prototype.share = function() {
            return this.canShare() ? this.trigger("prompt:share") :void 0;
        }, o.prototype.importImageUrl = function() {
            var t, e, i, n = this;
            return i = prompt("Enter the URL of the image"), this.undoIgnore(), e = new Draw.DomImage(i, {
                replaceUrl:!1
            }), t = new Draw.AddObjectCommand({
                object:e,
                useCurrentParent:!0
            }), t.setInitialState(e), t.setEndState(e), Draw.DomImage.onLoadImage(e, function(o, r) {
                return r ? (t.undo(), alert(i + " is not an image!")) :(n.translateObjectsIntoView([ e ], !0), 
                n.undoAdd(t)), n.undoResume();
            });
        }, o.prototype.zoom = function(t, e) {
            return this._updateLastZoom(), this.set("zoom", 100 * t), this._model.set({
                zoomModel:new Draw.ZoomModel(t, e)
            });
        }, o.prototype.zoom100 = function() {
            return this.zoom(1);
        }, o.prototype.zoomRectangle = function(t) {
            return t ? this._model.set({
                zoomModel:new Draw.ZoomModel(t)
            }) :void 0;
        }, o.prototype.zoomIn = function(t) {
            var e, i, n, o;
            return t instanceof paper.Point || (t = null), e = this.get("zoom"), i = _.sortedIndex(Draw.ZOOM_NOTCHES, e), 
            Draw.ZOOM_NOTCHES[i] === e && i++, i < Draw.ZOOM_NOTCHES.length ? (o = Draw.ZOOM_NOTCHES[i] / 100, 
            n = t ? new Draw.ZoomModel(o, t) :new Draw.ZoomModel(o), this._updateLastZoom(), 
            this.set("zoom", Draw.ZOOM_NOTCHES[i]), this._model.set({
                zoomModel:n
            })) :void 0;
        }, o.prototype.zoomOut = function(t) {
            var e, i, n, o;
            return t instanceof paper.Point || (t = null), e = this.get("zoom"), i = _.sortedIndex(Draw.ZOOM_NOTCHES, e), 
            i--, i >= 0 ? (o = Draw.ZOOM_NOTCHES[i] / 100, n = t ? new Draw.ZoomModel(o, t) :new Draw.ZoomModel(o), 
            this._updateLastZoom(), this.set("zoom", Draw.ZOOM_NOTCHES[i]), this._model.set({
                zoomModel:n
            })) :void 0;
        }, o.prototype._updateLastZoom = function() {
            return this._model.set({
                last_zoom:this.get("zoom")
            }, {
                silent:!0
            });
        }, o.prototype.toggleHandTool = function() {
            return "hand" === this.getTool() && this._lastTool ? this.setTool(this._lastTool) :this.handTool();
        }, o.prototype.handTool = function() {
            var t;
            return t = this.getTool(), "hand" !== t && (this._lastTool = t), this.setTool("hand");
        }, o.prototype.pointerTool = function() {
            return this.set("tool", "pointer");
        }, o.prototype.nodePointerTool = function() {
            return this.tools.node_pointer ? this.set("tool", "node_pointer") :void 0;
        }, o.prototype.rectTool = function() {
            return this.set("tool", "shape"), this.tools.shape.setState(this.tools.shape.STATE_RECT);
        }, o.prototype.ovalTool = function() {
            return this.set("tool", "shape"), this.tools.shape.setState(this.tools.shape.STATE_OVAL);
        }, o.prototype.textTool = function() {
            return this.set("tool", "text");
        }, o.prototype.gradientTool = function() {
            return this.set("tool", "gradient");
        }, o.prototype.penTool = function() {
            return this.tools.pen ? (this.set("tool", "pen"), this.tools.pen.setState(this.tools.pen.STATE_CREATE)) :void 0;
        }, o.prototype.penToolAdd = function() {
            return this.tools.pen ? (this.set("tool", "pen"), this.tools.pen.setState(this.tools.pen.STATE_ADD)) :void 0;
        }, o.prototype.penToolRemove = function() {
            return this.tools.pen ? (this.set("tool", "pen"), this.tools.pen.setState(this.tools.pen.STATE_REMOVE)) :void 0;
        }, o.prototype.linkToDocument = function() {
            var t, e, i = this;
            return (e = _.values(this.selectionModel.getSelected())[0]) ? (t = function(t) {
                return pds(i, "setting link id to", t, "for", e), e.set("href", t);
            }, this.trigger("prompt:document", e.get("href"), t), !1) :void 0;
        }, o.prototype.help = function() {
            return this.trigger("prompt:help", this), !1;
        }, o.prototype.startContainerTour = function() {
            return this.trigger("tour:container", this), !1;
        }, o.prototype.callSupport = function() {
            return this.trigger("prompt:support", this), !1;
        }, o.prototype.uploadImage = function(t, e) {
            return this.trigger("upload:image", t, e);
        }, o.prototype.setupUploader = function(t, e, i) {
            return this.trigger("setup:uploader", t, e, i);
        }, o.prototype.downloadAsPNG = function() {
            var t, e = this;
            return t = function() {
                var i;
                return e.unbind("change:thumbnail_url", t), i = e.getThumbnailUrl().replace("small_", ""), 
                window.location = "" + i + "?download=" + e.getName(), e.trigger("exported:thumbnail", e);
            }, this.trigger("export:thumbnail", this), this.bind("change:thumbnail_url", t);
        }, o.prototype.toggleDialogs = function() {
            return this.trigger("toggle:dialogs", this);
        }, o.prototype.toggleDialogSymbols = function() {
            return this.trigger("toggle:dialog_symbols", this);
        }, o.prototype.toggleDialogUndo = function() {
            return this.trigger("toggle:dialog_undo", this);
        }, o.prototype.toggleSelectionBounds = function(t) {
            return this.trigger("toggle:selection_bounds", this, t);
        }, o.prototype.toggleGrids = function() {
            var t, e, i, n, o, r, s;
            for (e = !this.get("toggle:grids"), r = this.GRID_PROPERTIES, s = [], n = 0, o = r.length; o > n; n++) i = r[n], 
            t = this.get(i), t.setVisible(e), s.push(t.setEnabled(e));
            return s;
        }, o.prototype.toggleGrid = function() {
            var t;
            return t = !this.getGrid().getVisible(), this.getGrid().setVisible(t), this.getGrid().setEnabled(t);
        }, o.prototype.toggleGridSystem = function() {
            var t, e;
            return t = this.getGridSystem(), e = !t.getVisible(), t.setVisible(e), t.setEnabled(e);
        }, o.prototype.toggleBold = function() {
            var t, e, i, n;
            e = this.selectionModel.getSelected(), n = [];
            for (i in e) t = e[i], t.toggleBold ? n.push(t.toggleBold()) :n.push(void 0);
            return n;
        }, o.prototype.toggleItalic = function() {
            var t, e, i, n;
            e = this.selectionModel.getSelected(), n = [];
            for (i in e) t = e[i], t.toggleItalic ? n.push(t.toggleItalic()) :n.push(void 0);
            return n;
        }, o.prototype.toggleUnderlined = function() {
            var t, e, i, n;
            e = this.selectionModel.getSelected(), n = [];
            for (i in e) t = e[i], t.toggleUnderlined ? n.push(t.toggleUnderlined()) :n.push(void 0);
            return n;
        }, o.prototype._rowOrColumnAction = function(t, e, i) {
            var n, o;
            return (n = this.selectionModel.getOneSelected()) ? n[t] ? (o = {
                useCurrentParent:!0,
                commandClass:e,
                execute:i
            }, this.undoBatch(o, function() {
                var e;
                return e = n[t](), _.isArray(e) ? e :e ? [ e ] :null;
            })) :void 0 :void 0;
        }, o.prototype._rowOrColumnAddAction = function(t) {
            return this._rowOrColumnAction(t, Draw.AddObjectCommand, !1);
        }, o.prototype._rowOrColumnRemoveAction = function(t) {
            return this._rowOrColumnAction(t, Draw.RemoveObjectCommand, !0);
        }, o.prototype.removeRow = function() {
            return this._rowOrColumnRemoveAction("getRowToRemove");
        }, o.prototype.removeColumn = function() {
            return this._rowOrColumnRemoveAction("getColumnToRemove");
        }, o.prototype.addRow = function() {
            return this._rowOrColumnAddAction("addRow");
        }, o.prototype.addColumn = function() {
            return this._rowOrColumnAddAction("addColumn");
        }, o.prototype.insertColumnAfter = function() {
            return this._rowOrColumnAddAction("insertColumnAfter");
        }, o.prototype.insertColumnBefore = function() {
            return this._rowOrColumnAddAction("insertColumnBefore");
        }, o.prototype.insertRowAfter = function() {
            return this._rowOrColumnAddAction("insertRowAfter");
        }, o.prototype.insertRowBefore = function() {
            return this._rowOrColumnAddAction("insertRowBefore");
        }, o.prototype._moveSelectedInHierarchy = function(t, e) {
            var i, n, o, r, s;
            if (o = this.selectionModel.getSelectedList({
                sort:e && "desc" || "asc",
                groups:!0
            }), o.length) {
                for (this.undoIgnore(), i = new Draw.MultiObjectUndoBatch({
                    commandClass:Draw.MoveHierarchyCommand
                }), i.setInitialState(o), r = 0, s = o.length; s > r; r++) n = o[r], n[t]();
                return this.undoAdd(i), i.setEndState(o), this.undoResume(), this.redrawSelected();
            }
        }, o.prototype.moveSelectedUp = function() {
            return this._moveSelectedInHierarchy("moveUp", !0);
        }, o.prototype.moveSelectedDown = function() {
            return this._moveSelectedInHierarchy("moveDown", !1);
        }, o.prototype.moveSelectedToTop = function() {
            return this._moveSelectedInHierarchy("moveToTop", !1);
        }, o.prototype.moveSelectedToBottom = function() {
            return this._moveSelectedInHierarchy("moveToBottom", !0);
        }, o;
    }(Draw.EditableDocument), Draw.Document.DEFAULT_JSON = {
        grid:{
            grid:20,
            off:{
                x:0,
                y:0
            },
            enabled:!1,
            v:!1,
            c:{
                R:237,
                G:0,
                B:7,
                A:.15
            }
        },
        gs:{
            enabled:!1,
            v:!1,
            c:{
                R:237,
                G:0,
                B:7,
                A:.15
            },
            column_color:{
                R:255,
                G:0,
                B:9,
                A:.1
            },
            gutter_width:20,
            effective_size:960,
            document_size:980,
            columns:12
        },
        guides:{
            x_guides:[],
            y_guides:[],
            enabled:!0,
            v:!0,
            c:{
                R:0,
                G:255,
                B:255,
                A:1
            }
        },
        background_color:{
            R:255,
            G:255,
            B:255,
            A:1
        },
        sz:{
            w:980,
            h:1e3
        },
        symbols:[],
        document:[ {
            children:[],
            t:"layer"
        } ]
    };
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    Draw.DocumentDuplicator = function() {
        function e(e) {
            this.doDuplicate = t(this.doDuplicate, this);
            var i;
            i = {
                viewUrl:"/documents/",
                apiUrl:"/api/v1/documents/{{id}}/duplicate"
            }, this.options = _.extend(i, e), this.document = e.document, this.document.bind("duplicate", this.doDuplicate);
        }
        return e.prototype.doDuplicate = function(t) {
            var e;
            return e = prompt("Name your duplicated document:", "Copy of " + t.getName()), e ? (pds(this, "duplicate", t), 
            this.duplicate(t, e)) :void 0;
        }, e.prototype.showOverlay = function() {
            var t;
            return this.pane = new Draw.EmbedPane({
                template:"#loading-overlay-template",
                document:this.document
            }), t = new Draw.ModalOverlay({
                pane:this.pane,
                document:this.document
            }), this.pane.show();
        }, e.prototype.hideOverlay = function() {
            return this.pane.hide();
        }, e.prototype.duplicate = function(t, e) {
            var i = this;
            return this.showOverlay(), $.ajax({
                url:_.template(this.options.apiUrl, {
                    id:t.id
                }),
                type:"POST",
                dataType:"json",
                contentType:"application/json",
                data:JSON.stringify({
                    project:t.getProjectId(),
                    name:e
                }),
                success:function(t) {
                    return i.openDocument(t.results.eid);
                },
                error:function() {
                    var t, e;
                    return i.hideOverlay(), t = {
                        message:"Cant copy document from editor",
                        stack:""
                    }, Err.notify(t, "DocumentDuplicator", "duplicate", {
                        args:JSON.stringify(arguments)
                    }), e = '<a href="mailto:support@easel.io?subject=Problem+duplicating+' + i.document.id + '" target="_blank">support@easel.io</a>', 
                    i.document.statusNotify("There was a problem duplicating your document! Contact " + e + ".", "important");
                }
            });
        }, e.prototype.openDocument = function(t) {
            var e;
            return pds(this, "opening", t), e = $("<form/>", {
                action:this.options.viewUrl + t,
                method:"GET"
            }), e.submit();
        }, e;
    }();
}.call(this), function() {
    Draw.DocumentFactory = function() {
        function t(t) {
            this.options = null != t ? t :{}, this.documents = {};
        }
        return t.prototype.getCurrentDocument = function() {
            return this.currentDocument;
        }, t.prototype.getDocuments = function() {
            var t, e;
            e = [];
            for (t in this.documents) e.push(t.document);
            return e;
        }, t.prototype.getOrCreate = function(t, e, i) {
            var n;
            return this.documents[t] || (n = 0 === _.size(this.documents), e.id = t, this.documents[t] = new Draw.DocumentAndView(_.extend({}, this.options, {
                documentOptions:e,
                viewOptions:i
            })), n && (this.currentDocument = this.documents[t])), this.documents[t];
        }, t.createInstance = function(t) {
            return this._instance = new Draw.DocumentFactory(t), this._instance;
        }, t.instance = function() {
            return this._instance || this.createInstance({}), this._instance;
        }, t;
    }(), Draw.DocumentAndView = function() {
        function t(t) {
            var e = this;
            this.options = null != t ? t :{}, this._create(this.options.documentOptions, this.options.viewOptions), 
            this.document.state && (this.document.state.fetch(), this.waitViewReady(function() {
                return e.document.setCanvasElement(e.view.domCanvas), e.document.state.load();
            }));
        }
        return t.prototype.waitViewCreated = function(t) {
            return this.view ? (t(this), !0) :(this._viewCreatedCallbacks || (this._viewCreatedCallbacks = []), 
            this._viewCreatedCallbacks.push(t), !1);
        }, t.prototype.waitViewReady = function(t) {
            return this.waitViewCreated(function(e) {
                return e.view.waitReady(t);
            });
        }, t.prototype.waitDocumentLoad = function(t) {
            return this.document.state.waitLoad(t);
        }, t.prototype._triggerViewCreated = function() {
            var t, e, i, n, o;
            if (this._viewCreatedCallbacks) {
                for (n = this._viewCreatedCallbacks, o = [], e = 0, i = n.length; i > e; e++) t = n[e], 
                o.push(t(this));
                return o;
            }
        }, t.prototype._waitDomReady = function(t) {
            return this._isDomReady() ? t() :$(t);
        }, t.prototype._isDomReady = function() {
            return "complete" === document.readyState;
        }, t.prototype._create = function(t, e) {
            var i = this;
            return this.document = this._createDocumentObject(t), this.view = null, this._waitDomReady(function() {
                return i.view = i._createViewObject(i.document, e), i._triggerViewCreated();
            });
        }, t.prototype._createDocumentObject = function(t) {
            var e, i, n, o, r;
            return r = _.clone(this.options), this.options.projectDocument && (n = this.options.projectDocument.easelProject, 
            r.project_id = this.options.projectDocument.id, r.easel_project = n), e = Draw.Document, 
            t.realtime || (e = Draw.ViewableDocument), o = {}, n && n.documents && (i = n.documents.get(t.id), 
            i && (o = _.extend(o, i.attributes))), o = _.extend(o, t.metaJSON), o.project_id = o.project, 
            delete o.project, i = new e(_.extend(r, t)), i.set(o), i;
        }, t.prototype._createViewObject = function(t, e) {
            var i;
            return i = new Draw.DocumentView(_.extend({}, this.options, {
                model:t
            }, e));
        }, t;
    }();
}.call(this), function() {
    var t, e, i = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, n = {}.hasOwnProperty, o = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var o in e) n.call(e, o) && (t[o] = e[o]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    window.XMLHttpRequest && (_.extend(XMLHttpRequest, Backbone.Events), t = window.XMLHttpRequest.prototype.open, 
    XMLHttpRequest.prototype.open = function(e, i) {
        return this._method = e, this._url = i, t.apply(this, arguments);
    }, e = window.XMLHttpRequest.prototype.send, XMLHttpRequest.prototype.send = function(t) {
        return this._trackRequest(t), e.apply(this, arguments);
    }, XMLHttpRequest.prototype._trackRequest = function(t) {
        var e, i, n, o, r;
        try {
            if (o = this._url + "", "POST" !== this._method) return;
            if (!(o.indexOf("channel/bind") > -1)) return;
            return t = Util.parseUrlParams(t), n = function() {
                var e;
                e = [];
                for (i in t) r = t[i], i.indexOf("JSON") > -1 && e.push(JSON.parse(decodeURIComponent(r)));
                return e;
            }(), XMLHttpRequest.trigger("request", this, this._method, o, n);
        } catch (s) {
            e = s;
        }
    }), Draw.DocumentWatchdog = function(t) {
        function e(t, n) {
            this.onAddRequest = i(this.onAddRequest, this), e.__super__.constructor.call(this, t, n), 
            this.requests = [], this.id = "wd-" + Draw.DocumentWatchdog.ID_COUTNER++, XMLHttpRequest.bind("request", this.onAddRequest);
        }
        return o(e, t), e.ID_COUTNER = 0, e.prototype.destroy = function() {
            return e.__super__.destroy.call(this), XMLHttpRequest.unbind("request", this.onAddRequest);
        }, e.prototype.setOps = function(t) {
            return this.ops = t;
        }, e.prototype.onAddRequest = function(t, e, i, n) {
            return this._addRequest(i, n);
        }, e.prototype._addRequest = function(t, e) {
            var i;
            return i = this._matchOps(e), i ? this.requests.push({
                matchPercentage:i,
                url:t,
                ops:e
            }) :void 0;
        }, e.prototype._matchOps = function(t) {
            var e, i, n, o, r;
            if (!this.ops || !this.ops.length) return 0;
            for (e = 0, r = this.ops, n = 0, o = r.length; o > n; n++) i = r[n], this._matchOp(i, t) && e++;
            return 100 * e / this.ops.length;
        }, e.prototype._matchOp = function(t, e) {
            var i, n, o, r, s, a;
            for (o = 0, s = e.length; s > o; o++) for (n = e[o], n = n.op || n, _.isArray(n) || (n = [ n ]), 
            r = 0, a = n.length; a > r; r++) if (i = n[r], _.isEqual(t, i)) return !0;
            return !1;
        }, e;
    }(Debouncer), Draw.DocumentState = function() {
        function t(t) {
            this.onChangeVersion = i(this.onChangeVersion, this), this.onServerChange = i(this.onServerChange, this), 
            this.onDocumentChange = i(this.onDocumentChange, this), this.flushPendingOps = i(this.flushPendingOps, this);
            var e;
            e = {
                document:null,
                undo:!0,
                thumbSaver:!0,
                delay:this.OP_DELAY,
                realtime:!0,
                runDemo:!1,
                documentTransformerClass:Draw.DocumentTransformer
            }, this.options = _.extend(e, t), this.id = _.uniqueId("state-"), this.document = this.options.document, 
            this.document.state = this, this.document.bind("change:version", this.onChangeVersion), 
            this.symbolManager = this.options.symbolManager, this.transformer = new this.options.documentTransformerClass({
                document:this.document
            }), this.transformer.watchDocument(!1), this.transformer.bind("change:document", this.onDocumentChange), 
            this.options.undo && (this.undo = new Draw.Undo({
                document:this.document,
                transformer:this.transformer
            })), this._setupStats(), this.readyToLoad = !1, this.loaded = !1, this.watchdogs = [], 
            this.pendingOpsOnServer = [], this.pendingOps = [], this.flushDelay = new Debouncer(this.options.delay, this.flushPendingOps);
        }
        return t.prototype._module = "DocumentState", mixin(t, Backbone.Events), t.prototype.OP_DELAY = 100, 
        t.prototype.OP_WATCHDOG = 6e4, t.prototype.ERR_VER = 4, t.prototype.fetch = function() {
            return this._fetchFromDocServer();
        }, t.prototype.load = function() {
            return this.readyToLoad = !0, this._loadPendingIfReady();
        }, t.prototype.isLoaded = function() {
            return !!this._loaded;
        }, t.prototype.waitLoad = function(t) {
            return this.isLoaded() ? t(!0, this._loaded) :this.bind("load", t);
        }, t.prototype.close = function() {
            return print("Closing doc", this.shareDoc), this.shareDoc ? this.shareDoc.close() :void 0;
        }, t.prototype.lockdown = function() {
            return this.transformer.watchDocument(!1), this.document.setLocked(!0);
        }, t.prototype.startOpWatchdog = function(t) {
            var e;
            return e = new Draw.DocumentWatchdog(this.OP_WATCHDOG, this.onOpWatchdogExpire), 
            e.setOps(t), this.watchdogs.push(e), pds(this, "Starting Watchdog.", e), e.start(this, t, new Date().getTime()), 
            e;
        }, t.prototype.stopOpWatchdog = function(t) {
            return pds(this, "Watchdog stopped. All is well.", t), t.destroy(), this.watchdogs = _.without(this.watchdogs, t);
        }, t.prototype.stopAllOpWatchdogs = function() {
            var t, e, i, n, o;
            for (n = this.watchdogs, o = [], e = 0, i = n.length; i > e; e++) t = n[e], o.push(t.stop());
            return o;
        }, t.prototype.resumeAllOpWatchdogs = function() {
            var t, e, i, n, o;
            for (n = this.watchdogs, o = [], e = 0, i = n.length; i > e; e++) t = n[e], o.push(t.update());
            return o;
        }, t.prototype.flushPendingOps = function() {
            var t, e, i, n, o, r;
            t = new Draw.OperationBatch({
                ops:this.pendingOps
            }), n = t.getOperations(), $.log.enabled && pds(this, "flushing... Was:", this.pendingOps.length, "; collapsed to:", n.length, "payload", JSON.stringify(n).length, n), 
            0 === this.pendingOpsOnServer.length && this.trigger("saving", this), r = this.startOpWatchdog(n), 
            i = _.uniqueId(), o = new Date().getTime(), this.pendingOpsOnServer.push([ i, o, n ]);
            try {
                this.shareDoc.submitOp(n, _.bind(this.onOpCallback, this, i, o, n, r));
            } catch (s) {
                e = s, this.stopOpWatchdog(r), Err.notify(e, "DocumentState", "flush");
            }
            return this.pendingOps = [];
        }, t.prototype.onOpCallback = function(t, e, i, n, o, r) {
            var s;
            return pds(this, "from server: ", t, e, "; err:", o, "ops:", r, "; orig", i), o ? this.onOpError(o) :(this.stopOpWatchdog(n), 
            s = this._indexOfPendingOp(t), this._removeOpFromPending(s), this.lastOpTime = new Date().getTime());
        }, t.prototype.onOpError = function(t) {
            var e;
            return e = {
                message:"Error on Operation: " + t
            }, Err.notify(e, "DocumentState", "onOpError", {
                error:t
            });
        }, t.prototype.onDocumentChange = function(t) {
            var e, i, n;
            if (this.shareDoc) {
                if (_.isArray(t)) for (i = 0, n = t.length; n > i; i++) e = t[i], this.pendingOps.push(e); else this.pendingOps.push(t);
                return this.flushDelay.update();
            }
        }, t.prototype.onServerChange = function(t) {
            return t ? (window.OP = t, pds(this, "STATE CHANGE", t), this.transformer.fromTransform(t)) :void 0;
        }, t.prototype.onOpWatchdogExpire = function(t, e, i) {
            var n, o, r, s;
            return t.stopOpWatchdog(this), r = new Date().getTime(), o = {
                message:"Op watchdog expired!"
            }, n = "unknown", t.shareDoc && t.shareDoc.connection && (n = t.shareDoc.connection.state), 
            s = "unknown", t.shareDoc && (s = t.shareDoc.version), Err.notify(o, "DocumentState", "onOpWatchdogExpire", _.extend({
                pendingOps:JSON.stringify(e),
                connectionState:n,
                version:s,
                started:i,
                now:r,
                delta:r - i,
                errVer:t.ERR_VER,
                requests:JSON.stringify(this.requests)
            }, t.stats));
        }, t.prototype.onDisconnect = function() {
            return this.stats.disconnects++, this.document.setLocked && this.document.setLocked(!0), 
            this.stopAllOpWatchdogs(), this.trigger("disconnect", this);
        }, t.prototype.onReconnect = function() {
            return this.stats.reconnects++, this.document.setLocked && this.document.setLocked(!1), 
            this.resumeAllOpWatchdogs(), this.trigger("reconnect", this);
        }, t.prototype.onChangeVersion = function(t, e, i) {
            return null == i && (i = {}), "server" === i.originator && this.document.getCurrentJSONVersion().isMajorDifferentThan(e) ? (this.lockdown(), 
            this.trigger("upgrade:json", this)) :void 0;
        }, t.prototype._fetchFromDocServer = function() {
            return this.options.runDemo ? this._loadWhenReady({
                runDemo:this.options.runDemo
            }) :this.options.realtime ? this._fetchFromDocServerRealtime() :this._fetchFromDocServerREST();
        }, t.prototype._fetchFromDocServerREST = function() {
            var t = this;
            return Draw.Storage.get(this.document.id, function(e) {
                return pds(t, "Node server returned document", e), t._loadWhenReady({
                    json:e
                });
            }, function() {
                return print("error", arguments), t._loadWhenReady({
                    json:{},
                    loadDefault:!0
                });
            });
        }, t.prototype._fetchFromDocServerRealtime = function() {
            var t = this;
            return window.sharejs ? this.connection = Draw.Storage.open(this.document.id, function(e, i) {
                var n, o;
                if (!t.loaded) return e ? (n = {
                    message:e + "",
                    stack:"_fetchFromDocServerRealtime"
                }, Err.notify(n, "DocumentState", "_fetchFromDocServerRealtime"), o = '<a href="mailto:support@easel.io?subject=Problem+reading+sharedoc+' + t.document.id + '" target="_blank">support@easel.io</a>', 
                t.document.statusNotify("There was a problem loading your document! Try reloading or contact " + o, "important")) :(t.document.loadDemo && (!t.document.isDemo() || i.created || i.snapshot || (i.created = !0)), 
                t._loadWhenReady({
                    shareDoc:i,
                    loadDemo:i.created && t.document.isDemo && t.document.isDemo()
                }));
            }) :($.warn("Need sharejs."), void 0);
        }, t.prototype._loadWhenReady = function(t) {
            return null == t && (t = {}), this._pendingDocumentData = t, this._loadPendingIfReady();
        }, t.prototype._loadPendingIfReady = function() {
            return this.readyToLoad && this._pendingDocumentData ? (this._loaded = this._pendingDocumentData, 
            this._load(this._pendingDocumentData), this._pendingDocumentData = null) :void 0;
        }, t.prototype._load = function(t) {
            return this._initializeThumbSaver(), t.shareDoc ? this._loadFromShare(t) :t.json ? this._loadFromJSON(t) :t.runDemo && this._loadDemo(t), 
            this._bindThumbSaver();
        }, t.prototype._loadFromShare = function(t) {
            var e, i, n, o;
            if (!this.loaded) {
                this.shareDoc = i = t.shareDoc;
                try {
                    this._bindToShareDocument(i), i.created || !i.snapshot ? this._loadEmptyDocument(i, t.loadDemo) :this.document.fromJSON && this._loadExistingDocument(i), 
                    this.transformer.watchDocument(!0), this.loaded = !0, n = !0;
                } catch (r) {
                    e = r, n = !1, Err.notify(e, "DocumentState", "load"), o = '<a href="mailto:support@easel.io?subject=Problem+loading+' + this.document.id + '" target="_blank">support@easel.io</a>', 
                    this.document.statusNotify("There was a problem loading your document :( Contact " + o, "important");
                }
                return this.trigger("load", n, t);
            }
        }, t.prototype._loadFromJSON = function(t) {
            return this._initializeDomElements(), t.loadDemo ? this.document.loadDemo() :t.loadDefault ? this.document.loadDefault() :this._fromJSON(t.json), 
            this.loaded = !0, this.document.triggerLoad && this.document.triggerLoad(), this.trigger("load", !0, t);
        }, t.prototype._loadDemo = function(t) {
            return this._initializeDomElements(), this.document.loadDemo(), this.loaded = !0, 
            this.document.triggerLoad && this.document.triggerLoad(), this.trigger("load", !0, t);
        }, t.prototype._loadEmptyDocument = function(t, e) {
            return pds(this, "Create document on the server", this.shareDoc.snapshot), this._initializeDomElements(), 
            e && this.document.loadDemo(), Draw.Storage.replaceDocument(t, this.document.toJSON(!0)), 
            this.document.triggerLoad ? this.document.triggerLoad() :void 0;
        }, t.prototype._loadExistingDocument = function(t) {
            var e;
            if (pds(this, "Initial load of saved document", t.snapshot), e = t.snapshot, !e) throw new Error("Document " + this.document.id + " json is NULL");
            return this._initializeDomElements(), this._fromJSON(e);
        }, t.prototype._initializeDomElements = function() {
            return this.document.initializeDomElements ? this.document.initializeDomElements() :void 0;
        }, t.prototype._initializeThumbSaver = function() {
            return this.options.thumbSaver && !this.thumbSaver ? this.thumbSaver = new Draw.ThumbSaver({
                document:this.document,
                eid:this.document.eid || this.document.id || window.__d
            }) :void 0;
        }, t.prototype._bindThumbSaver = function() {
            return this.thumbSaver ? this.thumbSaver.bindToEvents() :void 0;
        }, t.prototype._fromJSON = function(t) {
            var e, i;
            try {
                return this.document.fromJSON(t);
            } catch (n) {
                return e = n, Err.notify(e, "DocumentState", "fromJSON"), i = '<a href="mailto:support@easel.io?subject=AHHHH! Problem+loading+' + this.document.id + '+from+json" target="_blank">support@easel.io</a>', 
                this.document.statusNotify("There was a problem loading your document! Contact " + i, "important");
            }
        }, t.prototype._indexOfPendingOp = function(t) {
            var e, i, n, o;
            for (e = n = 0, o = this.pendingOpsOnServer.length; o >= 0 ? o > n :n > o; e = o >= 0 ? ++n :--n) if (i = this.pendingOpsOnServer[e], 
            i && t === i[0]) return e;
            return -1;
        }, t.prototype._removeOpFromPending = function(t) {
            var e, i, n, o, r, s;
            return s = this.pendingOpsOnServer[t], e = s[0], r = s[1], n = s[2], i = new Date().getTime(), 
            o = i - r, this.stats.min = Math.min(this.stats.min, o), this.stats.max = Math.max(this.stats.max, o), 
            this.stats.avg = (this.stats.avg * this.stats.count + o) / (this.stats.count + 1), 
            this.stats.count++, this.pendingOpsOnServer.splice(t, 1), 0 === this.pendingOpsOnServer.length && this.trigger("saved", this), 
            null;
        }, t.prototype._bindToShareDocument = function(t) {
            var e = this;
            return t.on("remoteop", this.onServerChange), t.connection.on("error", function(i) {
                var n, o, r, s, a, l, c;
                return print("connection error", i), n = "unknown", t && t.connection && (n = t.connection.state), 
                c = "unknown", t && (c = t.version), o = (i + "").toLowerCase(), r = o.indexOf("request failed") > -1, 
                l = o.indexOf("unknown session") > -1, s = o.indexOf("general network error") > -1, 
                a = new Date().getTime(), !r && !l && !s || l && e.lastOpTime && a - e.lastOpTime < 3e4 ? Err.notify({
                    message:i + ""
                }, "DocumentState", "onConnectionError", _.extend({
                    document:e.document.id,
                    errorObject:JSON.stringify(i),
                    connectionState:n,
                    version:c
                }, e.stats)) :void 0;
            }), t.connection.on("disconnected", function() {
                return e._hasDisconnected ? void 0 :(e._hasDisconnected = !0, e.onDisconnect());
            }), t.connection.on("ok", function() {
                return e._hasDisconnected ? (e._hasDisconnected = !1, e.onReconnect()) :void 0;
            });
        }, t.prototype._setupStats = function() {
            return this.stats = {
                disconnects:0,
                reconnects:0,
                min:1e7,
                max:0,
                avg:0,
                count:0,
                errVer:this.ERR_VER
            };
        }, t;
    }(), Draw.AggregateDocumentState = function() {
        function t() {
            this.onStateLoad = i(this.onStateLoad, this), this.clear();
        }
        return t.prototype._module = "AggregateDocumentState", mixin(t, Backbone.Events), 
        t.prototype.clear = function() {
            return this.states = [], this.loadEventArguments = {};
        }, t.prototype.addState = function(t) {
            return this.states.push(t), t.waitLoad(_.bind(this.onStateLoad, this, t));
        }, t.prototype.getStates = function() {
            return this.states;
        }, t.prototype.getConnection = function() {
            return this.states[0] ? this.states[0].connection :void 0;
        }, t.prototype.isLoaded = function() {
            var t, e, i, n, o;
            for (t = !0, o = this.states, i = 0, n = o.length; n > i; i++) e = o[i], t = t && e.isLoaded();
            return t;
        }, t.prototype.waitLoad = function(t) {
            return this.isLoaded() ? t.apply(this, this._createLoadEventArgs()) :this.bind("load", t);
        }, t.prototype.fetch = function() {
            var t, e, i, n, o;
            for (n = this.states, o = [], e = 0, i = n.length; i > e; e++) t = n[e], o.push(t.fetch());
            return o;
        }, t.prototype.load = function() {
            var t, e, i, n, o;
            for (n = this.states, o = [], e = 0, i = n.length; i > e; e++) t = n[e], o.push(t.load());
            return o;
        }, t.prototype.onStateLoad = function(t, e, i) {
            return this.loadEventArguments[t.id] = [ e, i ], this._fireLoadIfAllLoaded();
        }, t.prototype._fireLoadIfAllLoaded = function() {
            var t, e, i, n;
            if (this.isLoaded()) return n = this._createLoadEventArgs(), i = n[0], t = n[1], 
            e = n[2], this.trigger("load", i, t, e);
        }, t.prototype._createLoadEventArgs = function() {
            var t, e, i, n, o, r;
            if (!this.isLoaded()) return null;
            for (i = !0, t = {}, r = this.states, n = 0, o = r.length; o > n; n++) e = r[n], 
            i = i && this.loadEventArguments[e.id][0], t[e.id] = this.loadEventArguments[e.id][1];
            return [ i, t, this.states ];
        }, t;
    }();
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, e = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.DocumentTransformer = function() {
        function i(e) {
            this.fromTransform = t(this.fromTransform, this), this.fromSingleTransform = t(this.fromSingleTransform, this), 
            this.objectsFromPath = t(this.objectsFromPath, this), this.toTransform = t(this.toTransform, this), 
            this.watchDocument = t(this.watchDocument, this);
            var i;
            i = {
                document:null
            }, this.options = _.extend(i, e), this.document = this.options.document, this.document || $.warn("NEED a valid Draw.Document"), 
            this.document.bind("change:state", this.toTransform), this._watchDocument = !1;
        }
        return i.prototype._module = "DocumentTransformer", i.prototype.TRANSFORM_FN = {
            "change:child":"onChangeChild",
            "change:hierarchy":"onChangeHierarchy",
            "change:segment":"onChangeSegment",
            "change:config":"onChangeConfig",
            "change:symbols":"onChangeSymbols",
            "upgrade:json":"onUpgradeJSON"
        }, i.prototype.SEGMENT_FNS = {
            i:"setHandleIn",
            o:"setHandleOut",
            p:"setPoint",
            mode:"setHandleMode"
        }, i.prototype.watchDocument = function(t) {
            return pds(this, "setWatchDoc", t), this._watchDocument = t;
        }, i.prototype.isWatchingDocument = function() {
            return this._watchDocument;
        }, i.prototype.toPath = function(t) {
            var e, i, n, o, r;
            for (n = [], e = o = 0, r = t.length; r >= 0 ? r > o :o > r; e = r >= 0 ? ++o :--o) _.isNumber(t[e]) && (i = "children", 
            0 === e && (i = "document"), n.push(i)), n.push(t[e]);
            return n;
        }, i.prototype.toTransform = function(t, e, i, n, o) {
            var r;
            return "upgrade:json" === t || this._watchDocument && !o.ignore && o.sync !== !1 ? (pds(this, arguments), 
            r = this[this.TRANSFORM_FN[t]].call(this, e, i, this.toPath(n), o), r ? this.trigger("change:document", r, t, i, o) :void 0) :(pds(this, "ignored", arguments), 
            void 0);
        }, i.prototype.onUpgradeJSON = function(t, e, i, n) {
            return _.extend({
                p:i
            }, n);
        }, i.prototype.onChangeConfig = function(t, e, i, n) {
            var o, r, s, a;
            for (o = s = 0, a = i.length; a >= 0 ? a >= s :s >= a; o = a >= 0 ? ++s :--s) r = i[o], 
            Draw.JSON_KEYS[r] && (i[o] = Draw.JSON_KEYS[r]);
            return {
                p:i,
                od:Draw.jsonify(n.old),
                oi:Draw.jsonify(n["new"])
            };
        }, i.prototype.onChangeChild = function(t, e, i, n) {
            var o;
            return o = i[i.length - 1], "size" !== o && "position" !== o || "Path" !== e.TYPE ? (i[i.length - 1] = Draw.JSON_KEYS[o] || o, 
            {
                p:i,
                od:Draw.jsonify(n.old),
                oi:Draw.jsonify(n["new"])
            }) :null;
        }, i.prototype.onChangeHierarchy = function(t, e, i, n) {
            var o, r;
            return o = "add" === n.operation ? "li" :"ld", r = {
                p:i
            }, r[o] = e.toJSON(), r;
        }, i.prototype.onChangeSegment = function(t, e, i, n) {
            var o;
            if (i[i.length - 2] = "segments", o = {
                p:i
            }, "add" === n.operation) o.li = n.segment.toJSON(); else if ("remove" === n.operation) o.ld = n.segment.toJSON(); else if (n.operation && (i.push(Draw.JSON_KEYS[n.operation]), 
            o.p = i, o.od = Draw.jsonify(n.old), o.oi = Draw.jsonify(n["new"]), _.isEqual(o.oi, o.od))) return null;
            return o;
        }, i.prototype.onChangeSymbols = function(t, e, i, n) {
            var o, r;
            return i = _.without(i, "children"), o = {
                p:i
            }, "add" === (r = n.operation) || "remove" === r ? "add" === n.operation ? o.li = e.id :"remove" === n.operation && (o.ld = e.id) :"change" === n.operation && (o = [ {
                p:i,
                ld:n.old
            }, {
                p:i,
                li:n["new"]
            } ]), o;
        }, i.prototype.objectsFromPath = function(t) {
            var i, n, o, r, s, a;
            if (o = null, n = this.document.getRootLayer(), i = Draw.JSON_KEYS_INV[t[0]] || t[0], 
            t.length && e.call(this.document.supportedProperties(), i) >= 0) return 1 === t.length ? [ null, this.document ] :[ this.document, this.document.get(i) ];
            if (t.length && "symbols" === t[0]) return [ null, this.document ];
            for (s = 0, a = t.length; a > s; s++) r = t[s], "children" === r || "document" === r ? (o = n, 
            n = n.getChildren()) :"segments" === r ? (o = n, n = n.getSegments()) :_.isNumber(r) && (n = n.at ? n.at(r) :n[r]);
            return [ o, n ];
        }, i.prototype.fromSingleTransform = function(t, i) {
            var n, o, r, s, a, l, c, h;
            c = t.p, h = this.objectsFromPath(c), l = h[0], a = h[1], i || (n = this._watchDocument, 
            this.watchDocument(!1)), s = c[c.length - 1];
            try {
                "li" in t || "ld" in t ? a instanceof paper.Segment || e.call(c, "segments") >= 0 ? (t.ld && a.remove(), 
                t.li && l.addSegment(paper.Segment.fromJSON(t.li))) :a instanceof Draw.Document || e.call(c, "symbols") >= 0 || (t.ld && a.remove(), 
                t.li && l.insertChild(s, paper.Item.fromJSON(t.li))) :"oi" in t && !_.isEqual(t.oi, t.od) && (o = Draw.unjsonify(s, t.oi), 
                a instanceof paper.Segment || e.call(c, "segments") >= 0 ? a[this.SEGMENT_FNS[s]](o) :a.set(Draw.JSON_KEYS_INV[s] || s, o, {
                    originator:"server"
                }));
            } catch (u) {
                if (r = u, window.TESTING) throw r;
                Err.notify(r, "DocumentTransformer", "FromTransform", {
                    op:JSON.stringify(t),
                    parent:l + ""
                });
            }
            return i ? void 0 :this.watchDocument(n);
        }, i.prototype.stripOps = function(t) {
            var e, i, n, o, r, s, a, l, c, h, u, d, p;
            l = [ "pos", "sz", "p" ], e = function(t, e) {
                return t.slice(0, null != e && e || t.length - 1);
            }, i = function(t, i, n) {
                var o, r;
                return n !== !1 && t.length !== i.length ? !1 :(o = e(t, t.length - 1), r = e(i, t.length - 1), 
                _.isEqual(o, r));
            }, s = function(e) {
                var n, o, r;
                for (o = 0, r = t.length; r > o; o++) if (n = t[o], _.contains(l, n.p[n.p.length - 1]) && i(e, n.p)) return n;
                return null;
            }, o = function(e) {
                var n, o, r, s, a;
                for (r = [], s = 0, a = t.length; a > s; s++) o = t[s], n = o.p[o.p.length - 1], 
                o.p.length > e.length && _.contains(l, n) && i(e, o.p, !1) && r.push(o);
                return r;
            }, r = function(e) {
                var i, n, o;
                for (n = 0, o = t.length; o > n; n++) if (i = t[n], "oi" in i && _.isEqual(i.p, e.p) && _.isEqual(i.oi, e.od) && _.isEqual(e.oi, i.od)) return i;
                return null;
            }, u = _.clone(t);
            for (d = 0, p = t.length; p > d; d++) h = t[d], c = h.p[h.p.length - 1], h.oi && h.od && h.oi.g && "fill" === c && _.isEqual(h.oi.g, h.od.g) ? s(h.p) && (u = _.without(u, h)) :_.contains(l, c) && (n = o(h.p), 
            u = _.difference(u, n)), "oi" in h && (a = r(h), a && (a.od = h.od, h.oi = a.oi));
            return u;
        }, i.prototype.fromTransform = function(t, e) {
            var i, n, o, r;
            for (t = this.stripOps(t), r = [], n = 0, o = t.length; o > n; n++) i = t[n], r.push(this.fromSingleTransform(i, e));
            return r;
        }, i;
    }(), _.extend(Draw.DocumentTransformer.prototype, Backbone.Events);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.ProjectDocument = function(i) {
        function o() {
            return this._createStyleSheets = e(this._createStyleSheets, this), this.onUpdateStyleSheet = e(this.onUpdateStyleSheet, this), 
            this.onChange = e(this.onChange, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.VERSION = 1, o.supportedProperties = function() {
            return [ "type", "version", "styles", "demo_type" ];
        }, o.prototype.initialize = function(t) {
            var e;
            return e = {
                id:null,
                type:"pdoc",
                version:this.VERSION,
                styles:[ {} ],
                metaJSON:null
            }, this.options = _.extend(e, t), this.set(_.extract(this.options, this.supportedProperties()), {
                silent:!0
            }), this._previousAttributes = _.clone(this.attributes), this.bind("all", this.onChange), 
            this.bind("change:styles", this._createStyleSheets), this.options.metaJSON && this._createEaselProject(this.options.metaJSON), 
            this.options.state && this._createDocumentState(this.options.state), this._createStyleSheets();
        }, o.prototype.toJSON = function() {
            return _.extract(this.attributes, this.supportedProperties());
        }, o.prototype.fromJSON = function(t) {
            return this.set(t), this.triggerLoad();
        }, o.prototype.isDemo = function() {
            var t;
            return t = this.getCurrentDocument(), t ? t.isDemo() :!1;
        }, o.prototype.getDemoName = function() {
            var t;
            return t = this.get("demo_type"), t && (t = _.camelize(t, !0)), t;
        }, o.prototype.loadDemo = function() {
            var t;
            return (t = Draw.Demo[this.getDemoName()]) ? t.projectRun ? t.projectRun.call(t, this) :void 0 :void 0;
        }, o.prototype.loadDefault = function() {}, o.prototype.triggerLoad = function() {
            return this.trigger("load", this);
        }, o.prototype.statusNotify = function(t, e) {
            var i;
            return i = this.getCurrentDocument(), i ? i.statusNotify(t, e) :void 0;
        }, o.prototype.getCurrentDocument = function() {
            var t, e;
            return e = Draw.DocumentFactory.instance(), t = e.getCurrentDocument(), t ? t.document :null;
        }, o.prototype.getStyleSheets = function() {
            return this.styleSheets;
        }, o.prototype.getStyleSheet = function(t) {
            return this.styleSheets[t];
        }, o.prototype.attachStyleSheetsToDocument = function(t) {
            var e, i, n, o, r;
            for (o = this.styleSheets, r = [], i = 0, n = o.length; n > i; i++) e = o[i], r.push(e.attachToDocument(t));
            return r;
        }, o.prototype.supportedProperties = function() {
            return Draw.ProjectDocument.supportedProperties();
        }, o.prototype.onChange = function(t) {
            var e, i, n, o, r, s;
            if ("change:state" !== t && t.indexOf("change:") > -1) {
                for (i = this.changedAttributes(), s = [], o = 0, r = i.length; r > o; o++) e = i[o], 
                n = {
                    old:this._previousAttributes[e],
                    "new":this.get(e)
                }, s.push(this.trigger("change:state", t, this, [ e ], n));
                return s;
            }
        }, o.prototype.onChangeStyleSheet = function(t, e, i, n) {
            return i = [ "styles", t ].concat(i), this.trigger("change:state", "change:styles", this, i, n);
        }, o.prototype.onUpdateStyleSheet = function() {
            var t, e, i, n, o;
            for (n = Draw.DocumentFactory.instance().getDocuments(), o = [], e = 0, i = n.length; i > e; e++) t = n[e], 
            t && t.syncCssOnSelectedObjects ? o.push(t.syncCssOnSelectedObjects()) :o.push(void 0);
            return o;
        }, o.prototype._createEaselProject = function(t) {
            return t ? this.easelProject = new Easel.Project(t) :void 0;
        }, o.prototype._createDocumentState = function(t) {
            return t ? (this.state = new Draw.DocumentState({
                document:this,
                runDemo:this.options.runDemo,
                realtime:this.options.realtime,
                thumbSaver:!1,
                documentTransformerClass:Draw.ProjectDocumentTransformer
            }), t.addState(this.state)) :void 0;
        }, o.prototype._createStyleSheets = function() {
            var t, e, i, n, o, r, s, a, l;
            if (this.styleSheets) for (a = this.styleSheets, n = 0, r = a.length; r > n; n++) t = a[n], 
            this._unbindStyleSheet(t);
            for (this.styleSheets = [], i = this.get("styles"), l = [], o = 0, s = i.length; s > o; o++) e = i[o], 
            t = new Lib.StyleSheet(e), this._bindStyleSheet(this.styleSheets.length, t), l.push(this.styleSheets.push(t));
            return l;
        }, o.prototype._bindStyleSheet = function(t, e) {
            return e.bind("change", _.bind(this.onChangeStyleSheet, this, t, e)), e.bind("update", this.onUpdateStyleSheet);
        }, o.prototype._unbindStyleSheet = function(t) {
            return t.remove(), t.unbind();
        }, o;
    }(Backbone.Model);
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    Draw.ProjectDocumentTransformer = function() {
        function e(e) {
            null == e && (e = {}), this.fromSingleTransform = t(this.fromSingleTransform, this), 
            this.fromTransform = t(this.fromTransform, this), this.toTransform = t(this.toTransform, this), 
            this.watchDocument = t(this.watchDocument, this), this.options = e, this.document = this.options.document, 
            this.document || $.warn("NEED a valid Draw.Document"), this.document.bind("change:state", this.toTransform), 
            this.watchDocument(!1);
        }
        return e.prototype._module = "ProjectDocumentTransformer", mixin(e, Backbone.Events), 
        e.prototype.watchDocument = function(t) {
            return this._watchDocument = t;
        }, e.prototype.isWatchingDocument = function() {
            return this._watchDocument;
        }, e.prototype.toTransform = function(t, e, i, n) {
            var o;
            return null == n && (n = {}), !this._watchDocument || n.ignore ? (pds(this, "ignored", arguments), 
            void 0) :(o = this.onChange(e, i, n), o ? this.trigger("change:document", o, t, e, n) :void 0);
        }, e.prototype.onChange = function(t, e, i) {
            var n;
            return n = {
                p:e
            }, null != i.old && (n.od = i.old), null != i["new"] && (n.oi = i["new"]), n;
        }, e.prototype.fromTransform = function(t, e) {
            var i, n, o, r;
            for (r = [], n = 0, o = t.length; o > n; n++) i = t[n], r.push(this.fromSingleTransform(i, e));
            return r;
        }, e.prototype.fromSingleTransform = function(t, e) {
            var i, n, o, r, s;
            o = t.p, e || (i = this._watchDocument, this.watchDocument(!1));
            try {
                "styles" === o[0] && o.length > 1 ? (r = this.document.getStyleSheet(o[1]), r.set(o.slice(2), t.oi, {
                    originator:"server"
                })) :(s = {}, s[o[0]] = t.oi, this.document.set(s));
            } catch (a) {
                if (n = a, window.TESTING) throw n;
                Err.notify(n, "ProjectDocumentTransformer", "FromTransform", {
                    op:JSON.stringify(t)
                });
            }
            return e ? void 0 :this.watchDocument(i);
        }, e;
    }();
}.call(this), function() {
    Draw.HardcodedElementSpecs = [], Draw.HardcodedElements = {}, Draw.IconSpecs = [ "icon-play-circle", "icon-remove-circle", "icon-ok-circle", "icon-ban-circle", "icon-download", "icon-upload", "icon-comment", "icon-comments", "icon-comment-alt", "icon-comments-alt", "icon-font", "icon-bold", "icon-italic", "icon-strikethrough", "icon-underline", "icon-text-height", "icon-text-width", "icon-align-left", "icon-align-center", "icon-align-right", "icon-align-justify", "icon-indent-left", "icon-indent-right", "icon-list", "icon-list-ul", "icon-list-ol", "icon-list-alt", "icon-cut", "icon-copy", "icon-paste", "icon-save", "icon-undo", "icon-zoom-out", "icon-zoom-in", "icon-folder-close", "icon-folder-open", "icon-file", "icon-link", "icon-columns", "icon-table", "icon-calendar", "icon-th-large", "icon-th-list", "icon-reorder", "icon-refresh", "icon-cloud", "icon-trash", "icon-home", "icon-print", "icon-lock", "icon-unlock", "icon-inbox", "icon-envelope", "icon-envelope-alt", "icon-tasks", "icon-filter", "icon-search", "icon-user", "icon-user-md", "icon-group", "icon-signout", "icon-signin", "icon-heart", "icon-heart-empty", "icon-star", "icon-star-empty", "icon-star-half", "icon-camera", "icon-camera-retro", "icon-picture", "icon-facetime-video", "icon-headphones", "icon-volume-off", "icon-volume-down", "icon-volume-up", "icon-download-alt", "icon-upload-alt", "icon-pencil", "icon-edit", "icon-share", "icon-share-alt", "icon-check", "icon-check-empty", "icon-move", "icon-external-link", "icon-plus", "icon-minus", "icon-remove", "icon-off", "icon-plus-sign", "icon-minus-sign", "icon-remove-sign", "icon-ok-sign", "icon-question-sign", "icon-info-sign", "icon-warning-sign", "icon-exclamation-sign", "icon-signal", "icon-bar-chart", "icon-cog", "icon-cogs", "icon-flag", "icon-qrcode", "icon-barcode", "icon-tag", "icon-tags", "icon-book", "icon-bookmark", "icon-bookmark-empty", "icon-map-marker", "icon-adjust", "icon-tint", "icon-screenshot", "icon-asterisk", "icon-gift", "icon-leaf", "icon-fire", "icon-bolt", "icon-umbrella", "icon-lemon", "icon-plane", "icon-magnet", "icon-shopping-cart", "icon-key", "icon-phone", "icon-phone-sign", "icon-pushpin", "icon-bullhorn", "icon-bell", "icon-certificate", "icon-dashboard", "icon-glass", "icon-time", "icon-road", "icon-eye-open", "icon-eye-close", "icon-trophy", "icon-credit-card", "icon-rss", "icon-hdd", "icon-sitemap", "icon-globe", "icon-wrench", "icon-briefcase", "icon-beaker", "icon-paper-clip", "icon-sign-blank", "icon-magic", "icon-truck", "icon-money", "icon-legal", "icon-step-backward", "icon-fast-backward", "icon-backward", "icon-play", "icon-pause", "icon-stop", "icon-forward", "icon-fast-forward", "icon-step-forward", "icon-eject", "icon-repeat", "icon-random", "icon-chevron-left", "icon-chevron-right", "icon-arrow-left", "icon-arrow-right", "icon-arrow-up", "icon-arrow-down", "icon-circle-arrow-left", "icon-circle-arrow-right", "icon-circle-arrow-up", "icon-circle-arrow-down", "icon-caret-down", "icon-caret-up", "icon-caret-left", "icon-caret-right", "icon-sort", "icon-sort-down", "icon-sort-up", "icon-chevron-up", "icon-chevron-down", "icon-resize-full", "icon-resize-small", "icon-resize-vertical", "icon-resize-horizontal", "icon-fullscreen", "icon-retweet", "icon-thumbs-up", "icon-thumbs-down", "icon-hand-right", "icon-hand-left", "icon-hand-up", "icon-hand-down", "icon-twitter", "icon-twitter-sign", "icon-facebook", "icon-facebook-sign", "icon-github", "icon-github-sign", "icon-google-plus", "icon-google-plus-sign", "icon-linkedin", "icon-linkedin-sign", "icon-pinterest", "icon-pinterest-sign" ];
}.call(this), function() {
    var t, e, i, n, o, r, s;
    Draw.HardcodedElementSpecs = [ {
        eid:"bslayout",
        name:"Layout",
        thumbnail_url:"null",
        description:"A fixed container with a row and two columns.",
        tags:[ "Bootstrap/Containers" ],
        section_description:'<p class="subtle">\n  Learn more about using containers by watching\n  <a href="#" title="Using Bootstrap containers" rel="52770560" data-permalink="http://easelapp.uservoice.com/knowledgebase/articles/139831-how-to-use-twitter-bootstrap-containers" class="show-video">the video</a>\n  <span id="container-learn-tour">\n    or by <a href="#">taking the tour</a>\n  </span>\n</p>'
    }, {
        eid:"bsfixedcontainer",
        name:"Fixed Container",
        thumbnail_url:"null",
        description:"An empty fixed width, centered container. You can put rows in it.",
        tags:[ "Bootstrap/Containers" ]
    }, {
        eid:"bsfluidcontainer",
        name:"Fluid Container",
        thumbnail_url:"null",
        description:"An empty fluid width, centered, responsive container. You can put rows in it.",
        tags:[ "Bootstrap/Containers" ]
    }, {
        eid:"bsrow",
        name:"Row",
        thumbnail_url:"null",
        description:"Responsive rows to go inside of your layout and containers. This one comes with two columns.",
        tags:[ "Bootstrap/Containers" ]
    }, {
        eid:"bswell",
        name:"Well",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/bswell-e95f7816c4eaf5644bfb3ccde42672dd.png",
        description:"A nice inset container.",
        tags:[ "Bootstrap/Containers" ]
    }, {
        eid:"div",
        name:"Div Container",
        description:"A generic div container. Can accept anything.",
        thumbnail_url:"null",
        tags:[ "Bootstrap/Containers" ]
    }, {
        eid:"span",
        name:"Span Container",
        description:"A generic span container. Can accept anything.",
        thumbnail_url:"null",
        tags:[ "Bootstrap/Containers" ]
    }, {
        eid:"bspageheading",
        name:"Page Heading",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/bspageheading-c4f5228fabd2cf75839c0b67bce77bbc.png",
        description:"Page heading with sub heading",
        tags:[ "Bootstrap/Typography" ]
    }, {
        eid:"bsheading",
        name:"Heading",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/bsheading-8a5fc322967f17ca08da9f2e26ff81c9.png",
        description:"Standard Heading",
        tags:[ "Bootstrap/Typography" ]
    }, {
        eid:"bsparagraph",
        name:"Body Text",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/bsparagraph-ecf5c08ea2f425b014022cafdcd7a662.png",
        description:"Use this for all body text. Use the rich text editor to add bulleted items and links.",
        tags:[ "Bootstrap/Typography" ]
    }, {
        eid:"bslink",
        name:"Link",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/bslink-71c92ec9eb9bcf4708d6ef520d54eecc.png",
        tags:[ "Bootstrap/Typography" ]
    }, {
        eid:"bsherounit",
        name:"Hero Unit",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/bsherounit-8c71e18be343d83782c98855ffd71c4c.png",
        tags:[ "Bootstrap/Typography" ]
    }, {
        eid:"bspre",
        name:"Preformatted Text",
        thumbnail_url:"null",
        description:"A &lt;pre&gt; tag for preformatted text. i.e. Code",
        tags:[ "Bootstrap/Typography" ]
    }, {
        eid:"bstable",
        name:"Table",
        thumbnail_url:"null",
        description:"A Table! Select the table or its cells then right click to add/remove rows and columns.",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/bstable-d56c37ec486ec61d5d7af9b863da1333.png",
        tags:[ "Bootstrap/Table" ]
    }, {
        eid:"bstextinput",
        name:"Text Input",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/bstextinput-280c3e7473b0ffc686495306f26847d2.png",
        tags:[ "Bootstrap/Forms" ]
    }, {
        eid:"bstextarea",
        name:"Text Area",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/bstextarea-6f8c0492ef55ac2f763f2ffdc20693d3.png",
        tags:[ "Bootstrap/Forms" ]
    }, {
        eid:"bscheckbox",
        name:"Checkbox",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/bscheckbox-b2b2256d508554b3391604ad7efeb469.png",
        tags:[ "Bootstrap/Forms" ]
    }, {
        eid:"bsradiobutton",
        name:"Radio Button",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/bsradiobutton-70d18da0a6f5f5016c955127eed7f345.png",
        tags:[ "Bootstrap/Forms" ]
    }, {
        eid:"bsselect",
        name:"Select Box",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/select-481cee9a14b16db8cfc3bede148ec2c4.png",
        tags:[ "Bootstrap/Forms" ]
    }, {
        eid:"bsform",
        name:"Form",
        thumbnail_url:"null",
        description:"A form container for all your form elements.",
        tags:[ "Bootstrap/Forms" ]
    }, {
        eid:"bscontrolgroup",
        name:"Control Group",
        thumbnail_url:"null",
        description:'Displays form elements in horizontal rows. Contains a label and a container for a control. Set the form to "Horizontal" for best results.',
        tags:[ "Bootstrap/Forms" ]
    }, {
        eid:"bsformactions",
        name:"Form Actions",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/bsformactions-810eed5e7e298e2a602c9a4c421703e9.png",
        description:"A group for your form submit, cancel, etc. buttons.",
        tags:[ "Bootstrap/Forms" ]
    }, {
        eid:"bslabel",
        name:"Form Label",
        thumbnail_url:"null",
        description:"A text label for your form elements.",
        tags:[ "Bootstrap/Forms" ]
    }, {
        eid:"bsbutton",
        name:"Button",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/btn-0ee3ed2ce03a5559d090504d66f725ea.png",
        description:"Standard button. You can choose type (info, warning, etc.)",
        tags:[ "Bootstrap/Buttons" ]
    }, {
        eid:"bsbuttongroup",
        name:"Button Group",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/btn_group-6488b39955e3cf292f5da5b8389e8921.png",
        description:"Container for snapping buttons into nice groups.",
        tags:[ "Bootstrap/Buttons" ]
    }, {
        eid:"bsbuttontoolbar",
        name:"Button Toolbar",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/btn_toolbar-0a019c52dad28fcceed1df637b25fd8d.png",
        description:"Container for snapping button groups into a toolbar.",
        tags:[ "Bootstrap/Buttons" ]
    }, {
        eid:"bsnavbar",
        name:"Nav Bar",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/nav-97774b40b06c1e5bc4e6e105404025c9.png",
        tags:[ "Bootstrap/Navigation" ]
    }, {
        eid:"bsnavbarresponsive",
        name:"Responsive Nav Bar",
        description:"A responsive version of the Nav Bar. All the navigation\nelements you place into the this navbar will collapse\ninto a button on mobile devices.",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/nav-97774b40b06c1e5bc4e6e105404025c9.png",
        tags:[ "Bootstrap/Navigation" ]
    }, {
        eid:"bsnav",
        name:"Nav Container",
        description:"A generic nav element you can put anywhere on your pages.",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/nav-97774b40b06c1e5bc4e6e105404025c9.png",
        tags:[ "Bootstrap/Navigation" ]
    }, {
        eid:"bsbrand",
        name:"Brand",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/nav_brand-295a04e7cdec1bedd0a2a00528404dc5.png",
        description:"Brand link for your navbar.",
        tags:[ "Bootstrap/Navigation" ]
    }, {
        eid:"bsnavlink",
        name:"Nav Link",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/nav_link-5276a9a928feeab04b62a05d9f701b1b.png",
        description:"Header link for your navbar.",
        tags:[ "Bootstrap/Navigation" ]
    }, {
        eid:"bsthumbnailgrid",
        name:"Thumbnail Grid",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/bsthumbnailgrid-97f3f1cfc9bbf4a0b366a718087c83e5.png",
        description:"Put your thumbnail objects into a grid.",
        tags:[ "Bootstrap/Thumbnails" ]
    }, {
        eid:"bsthumbnail",
        name:"Thumbnail",
        thumbnail_url:"null",
        description:"Thumbnail objects that can be placed into a thumbnail grid.",
        tags:[ "Bootstrap/Thumbnails" ]
    }, {
        eid:"bsalert",
        name:"Alert",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/bsalert-a65a5b9ff4dd1e7610185cdc738e3e4d.png",
        description:"An alert message.",
        tags:[ "Bootstrap/Misc" ]
    }, {
        eid:"bsbadgelabel",
        name:"Label",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/bsbadgelabel-3346361d641bfbcc284a9d8f393d9f6d.png",
        description:"A colored label.",
        tags:[ "Bootstrap/Misc" ]
    }, {
        eid:"bsbadge",
        name:"Badge",
        thumbnail_url:"//127.0.0.1/easel/assets/editor/symbols/bootstrap/bsbadge-286b3d4a4acf32384eec59e37e93d7a9.png",
        description:"A small colored rounded badge.",
        tags:[ "Bootstrap/Misc" ]
    } ].concat(Draw.HardcodedElementSpecs), Features.has("extra_elements") && Draw.HardcodedElementSpecs.splice(14, 0, {
        eid:"divelem",
        name:"Div Element",
        thumbnail_url:"null",
        description:"A div element you can type into.",
        tags:[ "Bootstrap/Typography" ]
    }, {
        eid:"spanelem",
        name:"Span Element",
        thumbnail_url:"null",
        description:"A span element you can type into.",
        tags:[ "Bootstrap/Typography" ]
    }), r = new paper.Point(0, 0), o = function(t) {
        var e;
        return e = _.clone(Draw.Document.DEFAULT_JSON), e.document = t, e;
    }, t = {}, s = {
        bscolumn:new paper.Size(940, 30),
        bsbutton:new paper.Size(72, 30),
        bsnavlink:new paper.Size(50, 42),
        bsbrand:new paper.Size(100, 42),
        bscolumn:new paper.Size(700, 60),
        bsheading:new paper.Size(300, 42),
        bsparagraph:new paper.Size(300, 42),
        bspre:new paper.Size(300, 42),
        bslink:new paper.Size(100, 25),
        bssubheading:new paper.Size(300, 35),
        bstextinput:new paper.Size(220, 28),
        bscheckbox:new paper.Size(300, 20),
        bsradiobutton:new paper.Size(300, 20),
        bstextarea:new paper.Size(220, 100),
        bslabel:new paper.Size(220, 20),
        bsform:new paper.Size(220, 100),
        bsselect:new paper.Size(200, 25),
        bsbadgelabel:new paper.Size(40, 16),
        bsbadge:new paper.Size(53, 16),
        bswell:new paper.Size(700, 60),
        bstablecell:new paper.Size(220, 200),
        bstableheadcell:new paper.Size(220, 200)
    };
    for (e in s) n = s[e], t[e] = {
        t:e,
        position:r,
        size:n
    };
    _.extend(t, {
        bsbuttongroup:{
            t:"bsbuttongroup",
            position:r,
            size:new paper.Size(200, 30),
            children:[ t.bsbutton, t.bsbutton ]
        },
        bsformactions:{
            t:"bsformactions",
            position:r,
            size:new paper.Size(220, 200),
            children:[ _.extend({}, t.bsbutton, {
                html:'<button class="btn btn-primary"><span class="editable-element">Save</span></button>'
            }), _.extend({}, t.bsbutton, {
                html:'<button class="btn"><span class="editable-element">Cancel</span></button>'
            }) ]
        },
        bscontrolgroup:{
            t:"bscontrolgroup",
            position:r,
            size:new paper.Size(220, 55),
            html:'<div class="control-group">\n  <div class="child-place child-place-0"></div>\n  <div class="controls">\n  </div>\n</div>',
            children:[ t.bslabel ]
        },
        bsherounit:{
            t:"bsherounit",
            position:r,
            size:new paper.Size(700, 300),
            children:[ t.bsheading, t.bsparagraph, _.extend({}, t.bsbutton, {
                html:'<a href="#" class="btn btn-primary btn-large"><span class="editable-element">Learn More</span></a>'
            }) ]
        },
        bspageheading:{
            t:"bspageheading",
            size:new paper.Size(700, 60),
            position:r,
            children:[ t.bssubheading ]
        },
        bsrow:{
            t:"bsrow",
            position:r,
            size:new paper.Size(940, 30),
            children:[ t.bscolumn, t.bscolumn ]
        },
        bsthumbnail:{
            t:"bsthumbnail",
            position:r,
            size:new paper.Size(310, 300),
            html:'<li class="bs-thumb span4">\n  <div class="thumbnail">\n    <div class="child-place child-place-0"></div>\n  </div>\n</li>',
            children:[ {
                t:"dimg",
                url:"http://placehold.it/900x600",
                roundness:0,
                opacity:1
            } ]
        },
        bsalert:{
            t:"bsalert",
            position:r,
            size:new paper.Size(830, 40),
            html:'<div class="alert">\n  <div class="child-place child-place-0"></div>\n  <span class="editable-element">\n    <strong>Alert!</strong> This is an alert message.\n  </span>\n</div>',
            children:[ _.extend({}, t.bsbutton, {
                can_edit:!1,
                html:'<button type="button" class="btn close">x</button>'
            }) ]
        },
        bstableheadrow:{
            t:"bstableheadrow",
            position:r,
            html:'<tr class="bs-head">\n  <div class="child-place child-place-0"></div>\n  <div class="child-place child-place-1"></div>\n  <div class="child-place child-place-2"></div>\n</tr>',
            children:[ _.extend({}, t.bstableheadcell, {
                html:'<th class="bs-head-cell editable-element">Column 1</th>'
            }), _.extend({}, t.bstableheadcell, {
                html:'<th class="bs-head-cell editable-element">Column 2</th>'
            }), _.extend({}, t.bstableheadcell, {
                html:'<th class="bs-head-cell editable-element">Column 3</th>'
            }) ]
        },
        bstablerow:{
            t:"bstablerow",
            position:r,
            html:'<tr class="bs-body">\n  <div class="child-place child-place-0"></div>\n  <div class="child-place child-place-1"></div>\n  <div class="child-place child-place-2"></div>\n</tr>',
            children:[ t.bstablecell, t.bstablecell, t.bstablecell ]
        }
    });
    for (e in t) i = t[e], Draw.HardcodedElements[e] = o([ i ]);
    Draw.HardcodedElements = _.extend(Draw.HardcodedElements, {
        bslayout:o([ {
            t:"bscontainer",
            position:r,
            size:new paper.Size(940, 60),
            children:[ t.bsrow ]
        } ]),
        bsfixedcontainer:o([ {
            t:"bscontainer",
            position:r,
            size:new paper.Size(940, 60)
        } ]),
        bsfluidcontainer:o([ {
            t:"bscontainer",
            position:r,
            size:new paper.Size(940, 60),
            layout_type:"container-fluid"
        } ]),
        bstable:o([ {
            t:"bstable",
            position:r,
            size:new paper.Size(400, 200),
            children:[ t.bstableheadrow, t.bstablerow, t.bstablerow, t.bstablerow ]
        } ]),
        bsnavbar:o([ {
            t:"bsnavbar",
            position:r,
            size:new paper.Size(940, 42),
            html:'<div class="navbar">\n  <div class="navbar-inner">\n    <div class="child-place child-place-0"></div>\n    <div class="child-place child-place-1"></div>\n  </div>\n</div>',
            children:[ t.bsbrand, {
                t:"bsnav",
                position:r,
                size:new paper.Size(100, 100),
                html:'<ul class="nav">\n  <li class="child-place child-place-0"></li>\n  <li class="child-place child-place-1"></li>\n  <li class="child-place child-place-2"></li>\n</ul>',
                children:[ t.bsnavlink, t.bsnavlink, t.bsnavlink ]
            } ]
        } ]),
        bsnavbarresponsive:o([ {
            t:"bsnavbarresponsive",
            position:r,
            size:new paper.Size(940, 42),
            html:'<div class="navbar">\n  <div class="navbar-inner">\n    <div class="responsive-container">\n\n      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n      </a>\n\n      <div class="child-place child-place-0"></div>\n\n      <div class="nav-collapse collapse">\n        <div class="child-place child-place-1"></div>\n      </div>\n\n    </div>\n  </div>\n</div>',
            children:[ t.bsbrand, {
                t:"bsnav",
                position:r,
                size:new paper.Size(100, 100),
                html:'<ul class="nav">\n  <li class="child-place child-place-0"></li>\n  <li class="child-place child-place-1"></li>\n  <li class="child-place child-place-2"></li>\n</ul>',
                children:[ t.bsnavlink, t.bsnavlink, t.bsnavlink ]
            } ]
        } ]),
        bsnav:o([ {
            t:"bsnav",
            position:r,
            size:new paper.Size(100, 100),
            html:'<ul class="nav">\n  <li class="child-place child-place-0"></li>\n  <li class="child-place child-place-1"></li>\n  <li class="child-place child-place-2"></li>\n</ul>',
            children:[ t.bsnavlink, t.bsnavlink, t.bsnavlink ]
        } ]),
        bsbuttontoolbar:o([ {
            t:"bsbuttontoolbar",
            position:r,
            size:new paper.Size(400, 30),
            children:[ t.bsbuttongroup, t.bsbuttongroup ]
        } ]),
        bsthumbnailgrid:o([ {
            t:"bsthumbnailgrid",
            position:r,
            size:new paper.Size(960, 202),
            html:'<ul class="thumbnails">\n  <div class="child-place child-place-0"></div>\n  <div class="child-place child-place-1"></div>\n  <div class="child-place child-place-2"></div>\n</ul>',
            children:[ t.bsthumbnail, t.bsthumbnail, t.bsthumbnail ]
        } ]),
        span:o([ {
            t:"span",
            position:r,
            size:new paper.Size(100, 50)
        } ]),
        div:o([ {
            t:"div",
            position:r,
            size:new paper.Size(100, 50)
        } ]),
        divelem:o([ {
            t:"divelem",
            position:r,
            size:new paper.Size(100, 20)
        } ]),
        spanelem:o([ {
            t:"spanelem",
            position:r,
            size:new paper.Size(100, 20)
        } ])
    });
}.call(this), function() {
    var t, e, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.ElementCollection = function(e) {
        function i() {
            return t = i.__super__.constructor.apply(this, arguments);
        }
        return n(i, e), i.prototype.getElementsBySubtag = function() {
            var t, e, i, n, o, r;
            for (e = {}, r = this.models, n = 0, o = r.length; o > n; n++) t = r[n], i = t.getSubTag(), 
            e[i] || (e[i] = []), e[i].push(t);
            return e;
        }, i;
    }(Draw.Collection), Draw.Element = function(t) {
        function i() {
            return e = i.__super__.constructor.apply(this, arguments);
        }
        return n(i, t), i.getBaseTag = function(t) {
            return t && t.split("/")[0] || null;
        }, i.getSubTag = function(t) {
            return t && t.split("/")[1] || null;
        }, i.prototype.initialize = function(t, e) {
            var n;
            return null == t && (t = {}), n = {
                json:t.json || null,
                tag:null
            }, this.options = _.extend(n, e), i.__super__.initialize.call(this, t, this.options), 
            this.set({
                json:this.options.json
            });
        }, i.prototype.instantiate = function(t) {
            var e, i, n, o, r;
            return (n = this.get("json")) ? (n = this._getJSONToInstantiate(n), r = paper.Item.canCreateFromJSON(n), 
            e = r[0], o = r[1], i = null, e && (i = paper.Item.fromJSON(n), i.translate(t || new paper.Point(10, 10))), 
            [ i, _.isString(o) && o || null ]) :($.warn("no json to make an element from!", n, this), 
            void 0);
        }, i.prototype.getBaseTag = function() {
            return Draw.Element.getBaseTag(this._getFirstTag());
        }, i.prototype.getSubTag = function() {
            return Draw.Element.getSubTag(this._getFirstTag());
        }, i.prototype.getAttributes = function() {
            var t;
            return t = _.clone(this.attributes), t.preview = t.thumbnail_url, t;
        }, i.prototype.isLoaded = function() {
            return !!this.get("json");
        }, i.prototype.load = function() {
            return this.isLoaded() ? void 0 :this._fetchJSON();
        }, i.prototype._fetchJSON = function() {
            var t = this;
            return Draw.Storage.get(this.id, function(e) {
                return t.set({
                    json:e
                }), t.trigger("load", t);
            });
        }, i.prototype._getJSONToInstantiate = function(t) {
            var e, i;
            return e = t.document, i = _.clone(e[0]), "symbol" === i.t && (1 === i.children.length ? i = i.children[0] :i.t = "pelement"), 
            i;
        }, i.prototype._getFirstTag = function() {
            var t;
            return this.options.tag ? this.options.tag :(t = this.get("tags"), t && t[0] || null);
        }, i;
    }(Easel.Document);
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.IconElement = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        return i(n, e), n.prototype.initialize = function(t, e) {
            var i;
            return i = {}, this.options = _.extend(i, e), this.set({
                id:t.icon_class,
                tags:[ "Icons" ]
            });
        }, n.prototype.instantiate = function(t) {
            return Draw.FontIcon.fromJSON({
                position:t,
                size:new paper.Size(14, 14),
                html:'<i class="icon ' + this.get("icon_class") + '"></i>'
            });
        }, n;
    }(Backbone.Model);
}.call(this), function() {
    Draw.ElementManager = function() {
        function t(t) {
            var e;
            Easel.Document.prototype.defaultThumbnail = null, e = {
                global:[],
                user:[]
            }, this.options = _.extend(e, t), this.createUserCollections(), this.createGlobalCollections(), 
            this.createIconCollections();
        }
        return t.prototype.createUserCollections = function() {
            var t, e, i, n, o;
            for (this.userCollections = {
                All:new Draw.ElementCollection()
            }, n = this.options.user, o = [], e = 0, i = n.length; i > e; e++) t = n[e], o.push(this.userCollections.All.add(new Draw.Element(t)));
            return o;
        }, t.prototype.createGlobalCollections = function() {
            return this.collections = {}, this.readElements(Draw.HardcodedElementSpecs), this.readElements(this.options.global);
        }, t.prototype.createIconCollections = function() {
            var t, e, i, n, o, r, s, a;
            for (this.iconCollections = {}, s = Draw.IconSpecs, a = [], o = 0, r = s.length; r > o; o++) e = s[o], 
            i = new Draw.IconElement({
                icon_class:e
            }), a.push(function() {
                var e, o, r, s;
                for (r = i.get("tags"), s = [], e = 0, o = r.length; o > e; e++) n = r[e], t = Draw.Element.getBaseTag(n), 
                t in this.iconCollections || (this.iconCollections[t] = new Draw.ElementCollection()), 
                s.push(this.iconCollections[t].add(i));
                return s;
            }.call(this));
            return a;
        }, t.prototype.readElements = function(t) {
            var e, i, n, o, r, s;
            for (s = [], o = 0, r = t.length; r > o; o++) i = t[o], s.push(function() {
                var t, o, r, s;
                for (r = i.tags, s = [], t = 0, o = r.length; o > t; t++) n = r[t], e = Draw.Element.getBaseTag(n), 
                e in this.collections || (this.collections[e] = new Draw.ElementCollection()), s.push(this.collections[e].add(new Draw.Element(i, {
                    json:Draw.HardcodedElements[i.eid],
                    tag:n
                })));
                return s;
            }.call(this));
            return s;
        }, t.prototype.getUserCollections = function() {
            return this.userCollections;
        }, t.prototype.getIconCollections = function() {
            return this.iconCollections;
        }, t.prototype.getCollections = function() {
            return this.collections;
        }, t;
    }();
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.PlacedElement = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        return i(n, e), n.prototype.TYPE = "PlacedElement", n.prototype.initialize = function(t, e) {
            var i;
            return t instanceof Draw.Symbol && (t = t.children), i = {
                position:null,
                clone:!0
            }, this.options = _.extend(i, e), n.__super__.initialize.call(this, this.cloneItems(t, this.options.clone), this.options), 
            this.options.position ? this.setPosition(this.options.position) :void 0;
        }, n.prototype.clone = function() {
            return new Draw.PlacedElement(this.children);
        }, n.prototype.toString = function() {
            return "PlacedElement @" + this.id;
        }, n.prototype.generateName = function() {
            return "Element Instance";
        }, n.prototype.toJSON = function() {
            var t;
            return t = n.__super__.toJSON.call(this), _.extend(t, {
                t:"pelement"
            }), t;
        }, n.fromJSON = function(t, e) {
            var i, n;
            return n = paper.Item.childrenFromJSON(t, e), i = new Draw[this.prototype.TYPE](n, {
                clone:!1
            }), i.setHref(t.href), i;
        }, n;
    }(Draw.EventedGroup), paper.Item.JSON_CLASSES.pelement = Draw.PlacedElement;
}.call(this), function() {
    var t, e, i, n = {}.hasOwnProperty, o = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var o in e) n.call(e, o) && (t[o] = e[o]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    }, r = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    window.Draw = window.Draw || {}, Draw.Font = function(e) {
        function i() {
            return t = i.__super__.constructor.apply(this, arguments);
        }
        return o(i, e), i.prototype.idAttribute = "id", i;
    }(Backbone.Model), Draw.FontLoader = function(t) {
        function i() {
            return this.fontinactive = r(this.fontinactive, this), this.fontactive = r(this.fontactive, this), 
            this.fontloading = r(this.fontloading, this), this.inactive = r(this.inactive, this), 
            this.active = r(this.active, this), this.loading = r(this.loading, this), this.guessOrigin = r(this.guessOrigin, this), 
            this.load = r(this.load, this), e = i.__super__.constructor.apply(this, arguments);
        }
        return o(i, t), i.prototype.initialize = function(t, e) {
            var i = this;
            return this._module = "DrawFontLoader", this.fontModel = e.fontModel, this.bind("change", this.load), 
            this.bind("active", function() {
                return i.set({
                    fontsLoaded:!0
                });
            }), this.set({
                fontsLoaded:!1
            });
        }, i.prototype.getGoogle = function() {
            var t;
            return t = this.get("google"), t ? t.families :[];
        }, i.prototype.getTypekit = function() {
            var t;
            return t = this.get("typekit"), t ? t.id :null;
        }, i.prototype.load = function() {
            var t;
            if (_.values(this.attributes) && !this.get("fontsLoaded")) try {
                return WebFont.load(_.extend({
                    loading:this.loading,
                    active:this.active,
                    inactive:this.inactive,
                    fontloading:this.fontloading,
                    fontactive:this.fontactive,
                    fontinactive:this.fontinactive
                }, this.attributes));
            } catch (e) {
                return t = e, this.trigger("error", t.message);
            }
        }, i.prototype.PLUS_TO_SPACE = new RegExp("\\+"), i.prototype.guessOrigin = function(t) {
            var e, i, n, o, r;
            if (e = this.attributes, e.google && e.google.families) for (r = e.google.families, 
            n = 0, o = r.length; o > n; n++) if (i = r[n], i.replace(this.PLUS_TO_SPACE, " ").indexOf(t) > -1) return "google";
            return "typekit";
        }, i.prototype.loading = function() {
            return pds(this, "loading");
        }, i.prototype.active = function() {
            return pds(this, "active"), this.trigger("active");
        }, i.prototype.inactive = function() {
            return pds(this, "inactive");
        }, i.prototype.fontloading = function(t, e) {
            return pds(this, "fontloading", t, e);
        }, i.prototype.fontactive = function(t, e) {
            var i;
            return pds(this, "fontactive", t, e, arguments), i = t.replace(/-/g, " "), i = _.titlize(i), 
            this.fontModel.addFamily(t, i, this.guessOrigin(t)), this.trigger("fontactive", t, e, i);
        }, i.prototype.fontinactive = function(t, e) {
            return pds(this, "fontinactive", t, e);
        }, i;
    }(Backbone.Model), Draw.Fonts = function(t) {
        function e() {
            return this.getFamilies = r(this.getFamilies, this), this.removeFamily = r(this.removeFamily, this), 
            this.hasFamily = r(this.hasFamily, this), this.getFamily = r(this.getFamily, this), 
            this.addFamily = r(this.addFamily, this), this.setupNative = r(this.setupNative, this), 
            this.comparator = r(this.comparator, this), i = e.__super__.constructor.apply(this, arguments);
        }
        return o(e, t), e.prototype.ORIGIN_ORDER = {
            typekit:1,
            google:2,
            "native":3,
            local:4
        }, e.prototype.NATIVE = [ "Andale Mono", "Arial", "Helvetica", "Helvetica Neue", "Arial Black", "Courier New", "Georgia", "Impact", "Monospace", "Times New Roman", "Trebuchet MS", "Verdana" ], 
        e.prototype.model = Draw.Font, e.prototype.initialize = function(t, e) {
            return this.options = e || {}, this.setupNative();
        }, e.prototype.comparator = function(t) {
            return this.ORIGIN_ORDER[t.get("origin")] + t.get("family");
        }, e.prototype.setupNative = function() {
            var t, e, i, n, o;
            for (n = this.NATIVE, o = [], e = 0, i = n.length; i > e; e++) t = n[e], o.push(this.addFamily(t, t, "native"));
            return o;
        }, e.prototype.addFamily = function(t, e, i) {
            return t = t.toLowerCase(), this.hasFamily(t) ? void 0 :this.add({
                id:t,
                uid:Draw.Fonts.id++,
                family:t,
                description:e,
                origin:i
            });
        }, e.prototype.getFamily = function(t) {
            return t = t.toLowerCase(), this.get(t);
        }, e.prototype.hasFamily = function(t) {
            return !!this.getFamily(t);
        }, e.prototype.removeFamily = function(t) {
            return this.remove(t);
        }, e.prototype.getFamilies = function() {
            return this.pluck("family");
        }, e;
    }(Backbone.Collection), Draw.Fonts.id = 0;
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.HelperCanvas = function(i) {
        function o() {
            return this.dblclick = e(this.dblclick, this), this.mousedown = e(this.mousedown, this), 
            this._createEvents = e(this._createEvents, this), this.draw = e(this.draw, this), 
            this.createCanvas = e(this.createCanvas, this), this._clearRect = e(this._clearRect, this), 
            this.clear = e(this.clear, this), this.moveCanvas = e(this.moveCanvas, this), this.syncSize = e(this.syncSize, this), 
            t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.CANVAS = "#canvas", o.prototype.initialize = function() {
            var t;
            return this.parentView = paper.View.parentView, t = this.createCanvas(), o.__super__.initialize.call(this, t), 
            paper.View._views[t] = this.parentView, this.parentView ? (this.parentView.bind("onResize", this.syncSize), 
            this.parentView.bind("onMove", this.moveCanvas), this.syncSize({
                size:this.parentView.getViewSize()
            })) :void 0;
        }, o.prototype.syncSize = function(t) {
            return this.setViewSize(t.size.width, t.size.height);
        }, o.prototype.moveCanvas = function(t) {
            return this._canvas.insertAfter(t.canvas);
        }, o.prototype.clear = function(t) {
            return t ? (this._clearRect(t), t) :(window.TESTING || ($.log("Clearing whole helper canvas", t), 
            this._canvas.width = this._canvas.width), null);
        }, o.prototype._clearRect = function(t) {
            return window.TESTING ? void 0 :this.context.clearRect(t.x, t.y, t.width, t.height);
        }, o.prototype.createCanvas = function() {
            var t;
            return t = _.uniqueId("canvas-"), this.parentView && (this._originalCanvas = this.parentView.getCanvas()), 
            this._canvas = $("<canvas/>", {
                "class":"helper",
                id:t
            }), this._originalCanvas && this._canvas.insertAfter($(this._originalCanvas)), this._canvas = this._canvas[0], 
            this.context = this._canvas.getContext("2d"), t;
        }, o.prototype.draw = function() {}, o.prototype._createEvents = function() {
            var t, e, i, n, r = this;
            return n = null, t = function() {
                return clearTimeout(n), n = null;
            }, e = function(e) {
                return n ? (t(), r.dblclick(e)) :n = setTimeout(t, 300);
            }, i = o.__super__._createEvents.call(this), {
                click:e,
                mousedown:this.mousedown,
                touchstart:this.mousedown,
                selectstart:i.selectstart
            };
        }, o.prototype.mousedown = function(t) {
            return this.parentView._events.mousedown(t);
        }, o.prototype.dblclick = function(t) {
            return this.parentView._events.dblclick(t);
        }, o;
    }(paper.View);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    }, o = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.DefaultHotkeys = {
        "control p":"preview",
        "control e":"editMode",
        "control shift a":"commentMode",
        "control s":"save",
        "control shift s":"saveAs",
        "control z":"undo",
        "control shift z":"redo",
        "control y":"smartGroup",
        "control shift y":"smartUngroup",
        "control g":"group",
        "control shift g":"ungroup",
        "control d":"duplicateSelected",
        "control c":"copy",
        "control v":"paste",
        "control x":"cut",
        "control shift c":"copyStyles",
        "control shift v":"pasteStyles",
        "control b":"toggleBold",
        "control i":"toggleItalic",
        "control u":"toggleUnderlined",
        "`":"toggleSelectionBounds",
        v:"pointerTool",
        p:"penTool",
        i:"penToolAdd",
        o:"penToolRemove",
        a:"nodePointerTool",
        r:"rectTool",
        c:"ovalTool",
        t:"textTool",
        space:"toggleHandTool",
        backspace:"removeSelected",
        "delete":"removeSelected",
        escape:"clearSelected",
        tab:"toggleDialogs",
        "control option s":"toggleDialogSymbols",
        "control shift option u":"toggleDialogUndo",
        "control shift option c":"editCode",
        "control shift e":"exportCode",
        "shift option b":"toggleBalanceBreak",
        "control [":"moveSelectedDown",
        "control ]":"moveSelectedUp",
        "control shift [":"moveSelectedToBottom",
        "control shift ]":"moveSelectedToTop",
        "control down":"moveSelectedDown",
        "control up":"moveSelectedUp",
        "control shift down":"moveSelectedToBottom",
        "control shift up":"moveSelectedToTop",
        "control shift l":"lockSelected",
        "control =":"zoomIn",
        "control -":"zoomOut",
        "control shift =":"zoomIn",
        "control shift -":"zoomOut",
        "=":"zoomIn",
        "-":"zoomOut",
        "control '":"toggleGrids",
        "control shift '":"toggleGrid",
        "control shift option '":"toggleGridSystem",
        "1":"zoom100",
        "control 0":"zoom100",
        "shift /":"help",
        "?":"help"
    }, Draw.HotkeyDescription = {
        smartGroup:"Make a symbol from selected objects",
        smartUngroup:"Ungroup a symbol",
        group:"Group selected objects",
        ungroup:"Ungroup selected groups",
        cut:"Cut",
        copy:"Copy",
        paste:"Paste",
        clearSelected:"Unselect all selected elements",
        toggleDialogs:"Hide/Show all dialogs",
        toggleDialogGrid:"Hide/Show Grid Properties Dialog",
        toggleDialogSymbols:"Hide/Show Symbols dialog",
        exportCode:"Export selected objects to HTML/CSS",
        moveSelectedDown:"Bring selected objects down",
        moveSelectedUp:"Bring selected objects up",
        moveSelectedToBottom:"Bring selected objects to the bottom",
        moveSelectedToTop:"Bring selected objects to the top",
        zoomIn:"Zoom In",
        zoomOut:"Zoom Out",
        zoom100:"Zoom to 100%",
        toggleGrids:"Hide/Show grid",
        help:"This help screen"
    }, Draw.HotkeyModes = {
        zoomIn:[ "read" ],
        zoomOut:[ "read" ],
        zoom100:[ "read" ],
        help:[ "read" ],
        toggleGrids:[ "read" ],
        toggleGrid:[ "read" ],
        toggleGridSystem:[ "read" ]
    }, Draw.HotkeyFocusScope = {
        smartGroup:[ Draw.FOCUS_CANVAS ],
        smartUngroup:[ Draw.FOCUS_CANVAS ],
        group:[ Draw.FOCUS_CANVAS ],
        ungroup:[ Draw.FOCUS_CANVAS ],
        duplicateSelected:[ Draw.FOCUS_CANVAS ],
        copy:[ Draw.FOCUS_CANVAS ],
        paste:[ Draw.FOCUS_CANVAS ],
        cut:[ Draw.FOCUS_CANVAS ],
        toggleDialogs:[ Draw.FOCUS_CANVAS ],
        moveSelectedUp:[ Draw.FOCUS_CANVAS ],
        moveSelectedDown:[ Draw.FOCUS_CANVAS ],
        moveSelectedToTop:[ Draw.FOCUS_CANVAS ],
        moveSelectedToBottom:[ Draw.FOCUS_CANVAS ],
        exportCode:[ Draw.FOCUS_CANVAS ],
        undo:[ Draw.FOCUS_DOCUMENT ],
        redo:[ Draw.FOCUS_DOCUMENT ],
        toggleSelectionBounds:[ Draw.FOCUS_DOCUMENT ],
        toggleDialogGrid:[ Draw.FOCUS_DOCUMENT ],
        toggleDialogDocument:[ Draw.FOCUS_DOCUMENT ],
        save:[ Draw.FOCUS_DOCUMENT ],
        saveAs:[ Draw.FOCUS_DOCUMENT ],
        zoomIn:[ Draw.FOCUS_DOCUMENT ],
        zoomOut:[ Draw.FOCUS_DOCUMENT ],
        help:[ Draw.FOCUS_DOCUMENT ],
        zoom100:[ Draw.FOCUS_CANVAS ],
        pointerTool:[ Draw.FOCUS_CANVAS ],
        rectTool:[ Draw.FOCUS_CANVAS ],
        ovalTool:[ Draw.FOCUS_CANVAS ],
        penTool:[ Draw.FOCUS_CANVAS ],
        penToolAdd:[ Draw.FOCUS_CANVAS ],
        penToolRemove:[ Draw.FOCUS_CANVAS ],
        nodePointerTool:[ Draw.FOCUS_CANVAS ],
        textTool:[ Draw.FOCUS_CANVAS ],
        removeSelected:[ Draw.FOCUS_CANVAS ],
        clearSelected:[ Draw.FOCUS_CANVAS ],
        toggleBalanceBreak:[ Draw.FOCUS_CANVAS ]
    }, Draw.HotkeyToggleActions = {}, Draw.Hotkeys = function(i) {
        function r() {
            return this.breakInverseCache = e(this.breakInverseCache, this), t = r.__super__.constructor.apply(this, arguments);
        }
        return n(r, i), r.prototype.initialize = function(t, e) {
            var i, n, o, r, s;
            if (r = {}, window.ui && "Mac OS X" === window.ui.os) {
                s = Draw.DefaultHotkeys;
                for (i in s) o = s[i], r[i.replace("control", "command")] = o;
            } else r = Draw.DefaultHotkeys;
            return n = {
                mode:"edit"
            }, this.options = _.extend(n, e), t.focusModel && (this.focusModel = t.focusModel, 
            delete t.focusModel), this.set($.extend({}, r, t)), this.bind("change", this.breakInverseCache);
        }, r.prototype.sendMessage = function(t, e) {
            var i, n, r, s, a;
            return e = e || "down", this.trigger("combo", t, e), n = this.get(t), i = Draw.HotkeyModes[n], 
            r = "edit" === this.options.mode || i && (a = this.options.mode, o.call(i, a) >= 0), 
            s = "up" === e && n in Draw.HotkeyToggleActions, n && r && ("down" === e || s) ? (this.trigger("hotkey", n, t, e), 
            !0) :!1;
        }, r.prototype.breakInverseCache = function() {
            return this._inverseCache = null;
        }, r.prototype.getInverse = function() {
            var t, e, i;
            if (!this._inverseCache) {
                this._inverseCache = {}, i = this.attributes;
                for (t in i) e = i[t], this._inverseCache[e] = t;
            }
            return this._inverseCache;
        }, r;
    }(Backbone.Model);
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    Draw.ImageManager = function() {
        function e(e) {
            this.onUploadFinish = t(this.onUploadFinish, this), this.onUploadError = t(this.onUploadError, this), 
            this.onUploadSuccess = t(this.onUploadSuccess, this), this.triggerUpload = t(this.triggerUpload, this), 
            this.onAdd = t(this.onAdd, this), this.onPaste = t(this.onPaste, this), this.onDrop = t(this.onDrop, this), 
            this.onDragLeave = t(this.onDragLeave, this), this.onDragOver = t(this.onDragOver, this), 
            this.checkForImage = t(this.checkForImage, this), this.onAddOperation = t(this.onAddOperation, this), 
            this.onErrorUploadedImage = t(this.onErrorUploadedImage, this), this.onSuccessUploadedImage = t(this.onSuccessUploadedImage, this), 
            this.setupGenericUploader = t(this.setupGenericUploader, this), this.uploadImage = t(this.uploadImage, this);
            var i;
            i = {
                document:null,
                uploadUrl:"/api/v1/images",
                attachUrl:"/api/v1/documents/",
                uploadInputSelector:".import-image",
                doUpload:!0,
                minFileSize:1,
                maxFileSize:5242e3,
                acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i
            }, this.options = _.extend(i, e), this.document = this.options.document, this.setupForExistingImages(), 
            this.setupUndoHook(), this.setupUploader(), this.imageBatches = {}, this.document.bind("upload:image", this.uploadImage), 
            this.document.bind("setup:uploader", this.setupGenericUploader);
        }
        return mixin(e, Backbone.Events), e.prototype.getImageUploadOptions = function(t) {
            return _.extend({
                url:this.options.uploadUrl,
                formData:{
                    document:this.document.id
                },
                type:"POST",
                dataType:"json"
            }, t);
        }, e.prototype.uploadImage = function(t, e) {
            return $.ajax(this.getImageUploadOptions({
                success:function(t) {
                    return e(t.results);
                },
                data:{
                    document:this.document.id,
                    url:t
                }
            }));
        }, e.prototype.setupGenericUploader = function(t, e, i) {
            return pds(this, "setting up input element", t), t.fileupload(this.getImageUploadOptions({
                dropZone:null,
                add:_.bind(this.onAddUploadedImage, this, e, i),
                namespace:_.uniqueId("genup-")
            }));
        }, e.prototype.onAddUploadedImage = function(t, e, i, n) {
            var o, r, s, a, l, c, h;
            if (n.files.length) {
                for (pds(this, "added a file!", i, n), h = n.files, l = 0, c = h.length; c > l; l++) if (r = h[l], 
                !this._isValidFile(r)) return t(null, !0, r);
                return e && e(n.files), a = _.bind(this.onSuccessUploadedImage, this, t), o = _.bind(this.onErrorUploadedImage, this, t), 
                this.options.doUpload ? n.submit().success(a).error(o) :(pds(this, "Would upload bg image... Trying to read locally", n, n.files[0]), 
                (s = $.File.read(n.files[0], "url", function(t) {
                    return a({
                        results:{
                            url:t,
                            eid:_.uniqueId("localfile-")
                        }
                    });
                })) ? void 0 :alert("Oops, your browser doesnt support reading files locally :(. Check it out in chrome :)."));
            }
        }, e.prototype.onSuccessUploadedImage = function(t, e) {
            var i;
            return pds(this, "success", e), i = e.results, t(i, !1);
        }, e.prototype.onErrorUploadedImage = function(t) {
            return pds(this, "error", arguments), this.onUploadError.apply(this, arguments), 
            t(null, !0, Array.prototype.slice.call(arguments, 1));
        }, e.prototype.setupUndoHook = function() {
            return this.document.state ? this.document.state.undo.bind("add:operation", this.onAddOperation) :void 0;
        }, e.prototype.onAddOperation = function(t, e, i, n, o, r) {
            var s;
            if (o instanceof Draw.DomImage) return "add" === r.operation ? (this.imageBatches[o.id] = e, 
            s = i.getOperation(), s.li = o, i.setOperation(s), e.add(i), t.saveCurrentBatch()) :"remove" === r.operation ? (s = i.getOperation(), 
            s.ld = o, i.setOperation(s)) :r.init ? i.handle() :void 0;
        }, e.prototype.setupForExistingImages = function() {
            return this.document.bind("change:state", this.checkForImage);
        }, e.prototype.checkForImage = function(t, e, i) {
            return "change:hierarchy" === t ? i instanceof Draw.DomImage && !i.hasDataUrl() ? this.attachImageToDoc(i.getImageEid()) :void 0 :void 0;
        }, e.prototype.attachImageToDoc = function(t) {
            return t ? $.ajax({
                url:this.options.attachUrl + this.document.id,
                type:"PUT",
                dataType:"json",
                contentType:"application/json",
                data:JSON.stringify({
                    images:[ t ]
                })
            }) :void 0;
        }, e.prototype.setupUploader = function() {
            return $(this.options.uploadInputSelector).fileupload(this.getImageUploadOptions({
                add:this.onAdd,
                dragover:this.onDragOver,
                dragleave:this.onDragLeave,
                drop:this.onDrop,
                namespace:_.uniqueId("dd-"),
                paste:this.onPaste
            }));
        }, e.prototype.onDragOver = function() {
            return this.ddGrowl = Draw.Growl.notify("Yeah, drop that thing!!");
        }, e.prototype.onDragLeave = function() {
            return this.ddGrowl ? this.ddGrowl.hide() :void 0;
        }, e.prototype.onDrop = function() {
            return this.ddGrowl ? this.ddGrowl.hide() :void 0;
        }, e.prototype.onPaste = function(t, e) {
            return e && (e.files = []), !0;
        }, e.prototype._handleError = function(t) {
            var e;
            if (t) {
                switch (e = null, t) {
                  case "acceptFileTypes":
                    e = "Only image formats are supported: .png, .jpg, .gif";
                    break;

                  case "maxFileSize":
                    e = "Image must be smaller than " + Math.round(this.options.maxFileSize / 1024 / 1024) + "MB!";
                    break;

                  case "minFileSize":
                    e = "Image must not be empty";
                }
                return this.document.notify(e);
            }
        }, e.prototype._hasError = function(t) {
            var e;
            return e = this.options.acceptFileTypes, e.test(t.type) || e.test(t.name) ? this.options.maxFileSize && t.size > this.options.maxFileSize ? "maxFileSize" :"number" == typeof t.size && t.size < this.options.minFileSize ? "minFileSize" :null :"acceptFileTypes";
        }, e.prototype._isValidFile = function(t) {
            var e;
            return e = this._hasError(t), e ? (this._handleError(e), !1) :!0;
        }, e.prototype.onAdd = function(t, e) {
            var i, n, o, r, s, a, l;
            if (r = this, e && e.files) {
                for (o = [], i = function(i, n) {
                    var s, a, l;
                    return a = new Draw.DomImage(n || Draw.DomImage.prototype.REPLACEMENT_URL, {
                        replaceUrl:!0
                    }), a.setName(i.name, {
                        init:!0
                    }), s = t.originalEvent.originalEvent, null != s.clientX && (l = ViewUtil.XYInObject(s, $(".viewable-viewport .dom-frame"))), 
                    o.push([ i, a, !!n ]), o.length === e.files.length ? r.onReadFinished(e, o, l) :void 0;
                }, l = e.files, s = 0, a = l.length; a > s; s++) n = l[s], this._isValidFile(n) && ($.File.read(n, "url", _.bind(i, r, n)) || i.call(r, n, null));
                return !0;
            }
        }, e.prototype.onReadFinished = function(t, e, i) {
            var n, o, r, s = this;
            for (o = 0, r = e.length; r > o; o++) n = e[o], Draw.DomImage.onLoadImage(n[1], function(t) {
                return pds(s, "tiling image", t), i ? t.setPosition(new paper.Point(i.x, i.y)) :s.document.translateObjectsIntoView([ t ], !0), 
                s.document.selectionModel.setSelected(t);
            });
            return this.triggerUpload(t, e);
        }, e.prototype.triggerUpload = function(t, e) {
            return this.options.doUpload ? (this.document.statusNotify("Uploading Image...", "info"), 
            this.trigger("uploading", this), t.submit().success(_.bind(this.onUploadSuccess, this, e)).error(_.bind(this.onUploadError, this, e))) :pd("doUpload == false; would upload", e);
        }, e.prototype.onImageLoaded = function(t, e, i, n) {
            return t.setUrl(e, {
                imageObj:i,
                init:!0
            }), pds(this, "Image from server loaded. Was previewed?", n, arguments, i.width, i.height), 
            n ? void 0 :t.setSize(new paper.Size(i.width, i.height));
        }, e.prototype.preloadImage = function(t, e, i) {
            var n;
            return n = new window.Image(), pds(this, "preloading image from server", t, e, i), 
            n.onload = _.bind(this.onImageLoaded, this, t, e, n, i), n.src = e;
        }, e.prototype.onUploadSuccess = function(t, e) {
            var i, n, o, r;
            if (n = e.results, this.document.statusNotify("Image uploaded", "success"), _.isArray(n)) {
                if (t.length !== n.length) return $.warn("ImageManager.onUploadSuccess: image list lengths are not the same!"), 
                void 0;
                for (i = o = 0, r = t.length; r >= 0 ? r > o :o > r; i = r >= 0 ? ++o :--o) this.preloadImage(t[i][1], n[i].url, t[i][2]);
            } else {
                if (!n || !t.length) return $.warn("ImageManager.onUploadSuccess: issue with response", n, t), 
                void 0;
                this.preloadImage(t[0][1], n.url, t[0][2]);
            }
            return this.onUploadFinish();
        }, e.prototype.onUploadError = function() {
            return this.document.statusNotify("Image upload failed!", "important", 5e3), this.onUploadFinish();
        }, e.prototype.onUploadFinish = function() {
            return this.trigger("uploaded", this);
        }, e;
    }();
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    Draw.ImportManager = function() {
        function e(e) {
            this.onAdd = t(this.onAdd, this);
            var i;
            i = {
                document:null,
                importSelector:".import-file"
            }, this.options = _.extend(i, e), this.document = this.options.document, this.setupImporter();
        }
        return e.prototype.IMPORT_FNS = {
            svg:"SVG"
        }, e.prototype.setupImporter = function() {
            return $(this.options.importSelector).fileupload({
                dropZone:null,
                add:this.onAdd
            });
        }, e.prototype.onAdd = function(t, e) {
            var i, n, o, r, s, a, l;
            for (a = e.files, l = [], r = 0, s = a.length; s > r; r++) n = a[r], i = n.name.toLowerCase().split("."), 
            i = i[i.length - 1], o = this.IMPORT_FNS[i], o ? l.push($.File.read(n, "text", _.bind(this.importFile, this, n, o))) :l.push(void 0);
            return l;
        }, e.prototype.importFile = function(t, e, i) {
            return this.document.undoIgnore(), Import[e](i, this.document), this.document.undoResume();
        }, e;
    }();
}.call(this), function() {
    var t, e, i = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, n = {}.hasOwnProperty, o = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var o in e) n.call(e, o) && (t[o] = e[o]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.UserLayer = function(e) {
        function n() {
            return this.draw = i(this.draw, this), t = n.__super__.constructor.apply(this, arguments);
        }
        return o(n, e), n.prototype.draw = function(t, e) {
            return n.__super__.draw.call(this, t, e);
        }, n;
    }(paper.Layer), Draw.Project = function(t) {
        function n() {
            return this.drawSelection = i(this.drawSelection, this), this.hitTest = i(this.hitTest, this), 
            this.toggleSelectionBounds = i(this.toggleSelectionBounds, this), this.fromJSON = i(this.fromJSON, this), 
            this.toJSON = i(this.toJSON, this), e = n.__super__.constructor.apply(this, arguments);
        }
        return o(n, t), n.prototype.initialize = function(t) {
            return n.__super__.initialize.call(this, !0), this.id = _.uniqueId(), this._preselectedItems = {}, 
            this._preselectedItemCount = 0, this.document = t, this._drawSelection = !0, this.document.set("toggle:selection_bounds", this._drawSelection), 
            this.document ? this.document.bind("toggle:selection_bounds", this.toggleSelectionBounds) :void 0;
        }, n.prototype.toJSON = function() {
            var t;
            return t = this.rootLayer.toJSON(), t && t.children ? t.children :[];
        }, n.prototype.fromJSON = function(t, e) {
            return this.rootLayer.removeChildren(), 1 === t.length && "symbol" === t[0].t && (t = [ {
                t:"layer",
                children:t[0].children
            } ]), this.rootLayer.childrenFromJSON({
                children:t
            }, e), this.userLayer = this.rootLayer.children[0];
        }, n.prototype.setCanvasElement = function(t) {
            return this.canvasElement = t;
        }, n.prototype.getCanvasElement = function() {
            return this.canvasElement;
        }, n.prototype.toggleSelectionBounds = function() {
            var t, e, i;
            return this._drawSelection = !this._drawSelection, i = this.document.selectionModel, 
            t = i.getSelectedBounds(), e = i.getSelectedBounds([ i.getPreselected() ]), t || (t = e), 
            e && (t = t.unite(e)), this.document.set("toggle:selection_bounds", this._drawSelection), 
            t && !t.isEmpty() ? this.document.redraw(Draw.LAYER_TOOL, t) :void 0;
        }, n.prototype.initializeDomElements = function() {
            return this.initializeLayers();
        }, n.prototype.initializeLayers = function() {
            return this.toolLayer = new Draw.ToolLayer(this.document, [], {
                onDraw:this.drawSelection
            }), this.bottomToolLayer = new Draw.BottomToolLayer(this.document), this.rootLayer = this.layers[0], 
            this.userLayer = new Draw.UserLayer(), this.rootLayer.addChild(this.userLayer);
        }, n.prototype.activateToolLayer = function() {
            return this._currentLayer = this.activeLayer, this.toolLayer.activate();
        }, n.prototype.deactivateToolLayer = function() {
            return this._currentLayer.activate(), this._currentLayer = null;
        }, n.prototype.sampleColor = function(t) {
            var e, i, n;
            return n = this._scope.view.zoom, e = this._scope.view._context, i = e.getImageData(t.x * n, t.y * n, 1, 1).data, 
            Color.normalize({
                R:i[0],
                G:i[1],
                B:i[2],
                A:i[3] / 255
            });
        }, n.prototype.getChildren = function() {
            return this.rootLayer.getChildren();
        }, n.prototype.getImages = function() {
            var t, e, i, n, o;
            for (e = [], o = this.getChildren(), i = 0, n = o.length; n > i; i++) t = o[i], 
            e = e.concat(t.getImages());
            return e;
        }, n.prototype.hitTest = function(t, e) {
            var i, o, r, s, a, l, c;
            if (a = this, r = function(t) {
                return !t || !t.item || t.item instanceof paper.Item ? (t && t.item && t.item.getLayer() === a.toolLayer && (t.toolItem = t.item, 
                t.item = null), t) :null;
            }, s = this.document.selectionModel.getSelected()) for (s = Draw.Item.sortDesc(s), 
            l = 0, c = s.length; c > l; l++) if (o = s[l], i = o.hitTest(t, e), i && "fill" !== i.type && "stroke" !== i.type) return r(i);
            return r(n.__super__.hitTest.call(this, t, e));
        }, n.prototype.setSelectionMode = function(t) {
            return this._selectionMode = t || Draw.SELECTION_MODE_BOUNDS;
        }, n.prototype.getSelectionMode = function() {
            return this._selectionMode || Draw.SELECTION_MODE_BOUNDS;
        }, n.prototype._updateSelection = function(t, e) {
            var i;
            return i = {
                test:"_selected",
                count:"_selectedItemCount",
                items:"_selectedItems"
            }, "pre" === e && (i = {
                test:"_preselected",
                count:"_preselectedItemCount",
                items:"_preselectedItems"
            }), t[i.test] ? (this[i.count]++, this[i.items][t.getId()] = t) :(this[i.count]--, 
            delete this[i.items][t.getId()]);
        }, n.prototype.drawSelection = function(t, e) {
            var i, n;
            return n = this, this._selectedItemCount < 1 && this._preselectedItemCount < 1 ? void 0 :(t.save(), 
            t.strokeWidth = 1, i = function(t, i, o) {
                var r;
                if (n._drawSelection) return n.toolLayer.context.strokeStyle = n.toolLayer.context.fillStyle = t, 
                r = {
                    selection:!0,
                    renderModel:e.renderModel,
                    layer:e.layer
                }, paper.Base.each(i, function(t) {
                    return o && (!o || t.getId() in o) ? void 0 :n.toolLayer.drawItem(t, r);
                });
            }, this._preselectedItemCount > 0 && i(Draw.PRESELECTION_COLOR, this._preselectedItems, this._selectedItems), 
            this._selectedItemCount > 0 && i(Draw.SELECTION_COLOR, this._selectedItems), t.restore());
        }, n.prototype.draw = function(t, e, i) {
            var n, o, r, s, a, l, c, h, u, d;
            for (s = this, t.save(), r = {
                offset:new paper.Point(0, 0),
                renderModel:i,
                layer:e
            }, d = this.layers, h = 0, u = d.length; u > h; h++) o = d[h], n = e === Draw.LAYER_ALL, 
            a = o.NAME && e === o.NAME, l = e === Draw.LAYER_USER && o.NAME === Draw.LAYER_TOOL, 
            c = !o.NAME && e === Draw.LAYER_USER, (n || a || c || l) && ($.log.enabled && pds(this, "drawing", o, e, r, r.renderModel && r.renderModel.getRectangle() + "" || "no rect"), 
            paper.Item.draw(o, t, r));
            return t.restore();
        }, n;
    }(paper.Project);
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, e = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.PropertyProxy = function() {
        function i() {
            this._callModifier = t(this._callModifier, this), this._setPosition = t(this._setPosition, this), 
            this._getPosition = t(this._getPosition, this), this._setDefault = t(this._setDefault, this), 
            this._getDefault = t(this._getDefault, this), this.onObjectEvent = t(this.onObjectEvent, this), 
            this.getPropertyConfig = t(this.getPropertyConfig, this), this.customProperties = t(this.customProperties, this), 
            this.supportedProperties = t(this.supportedProperties, this), this.setObjects = t(this.setObjects, this), 
            this.set = t(this.set, this), this.get = t(this.get, this), this.objects = null;
        }
        return mixin(i, Backbone.Events), i.prototype.TYPE = "PropertyProxy", i.prototype.IGNORE_PROPS = [], 
        i.prototype.toString = function() {
            return this.TYPE;
        }, i.prototype.get = function(t) {
            var i, n, o, r;
            if (this.objects) {
                if (t && e.call(this._props, t) >= 0) return this._callModifier("get", t);
                if (!t) {
                    for (i = {}, r = this._props, n = 0, o = r.length; o > n; n++) t = r[n], i[t] = this._callModifier("get", t);
                    return i;
                }
                return void 0;
            }
        }, i.prototype.set = function(t, i) {
            return this.objects ? t && e.call(this._props, t) >= 0 ? this._callModifier("set", t, i) :void 0 :void 0;
        }, i.prototype.setObjects = function(t) {
            var e;
            return this._unbindObjects(this.objects), t && 0 !== _.size(t) ? (e = function(t, e) {
                return t.isAbove(e) ? -1 :1;
            }, _.isArray(t) || (t = _.values(t)), this._bindObjects(t), this.objects = t.sort(e), 
            this._cacheProperties(this.objects), this._cacheCustomProperties(this.objects)) :(this.objects = null, 
            void 0);
        }, i.prototype.supportedProperties = function() {
            return this._props;
        }, i.prototype.customProperties = function() {
            return this._customProps;
        }, i.prototype.getPropertyConfig = function(t) {
            return this.objects && this.objects.length && this.objects[0].getPropertyConfig ? this.objects[0].getPropertyConfig(t) :null;
        }, i.prototype.canEditAutoSizing = function() {
            return !1;
        }, i.prototype.splitBorders = function() {
            var t, e, i, n, o, r;
            for (e = [], r = this.objects, n = 0, o = r.length; o > n; n++) i = r[n], i.splitBorders && (t = i.splitBorders(), 
            t && (e = e.concat(t)));
            return e.length ? _.uniq(e) :null;
        }, i.prototype.onObjectEvent = function() {
            return this.trigger.apply(this, arguments);
        }, i.prototype._bindObjects = function(t) {
            var e, i, n, o;
            if (t) {
                for (o = [], i = 0, n = t.length; n > i; i++) e = t[i], o.push(e.bind("all", this.onObjectEvent));
                return o;
            }
        }, i.prototype._unbindObjects = function(t) {
            var e, i, n, o;
            if (t) {
                for (o = [], i = 0, n = t.length; n > i; i++) e = t[i], o.push(e.unbind("all", this.onObjectEvent));
                return o;
            }
        }, i.prototype._cacheProperties = function(t) {
            var e, i;
            return i = _.intersection.apply(_, function() {
                var i, n, o;
                for (o = [], i = 0, n = t.length; n > i; i++) e = t[i], o.push(e.supportedProperties());
                return o;
            }()), this._props = _.without.apply(_, [ i ].concat(this.IGNORE_PROPS));
        }, i.prototype._cacheCustomProperties = function(t) {
            var e, i, n, o, r, s, a, l, c, h, u;
            for (e = [], s = 0, l = t.length; l > s; s++) n = t[s], n.customProperties && e.push(function() {
                var t, e;
                t = n.customProperties(), e = [];
                for (i in t) r = t[i], e.push("" + i + ":" + r);
                return e;
            }());
            for (e.length !== t.length && (e = []), e = _.intersection.apply(null, e), this._customProps = {}, 
            u = [], a = 0, c = e.length; c > a; a++) o = e[a], h = o.split(":"), i = h[0], r = h[1], 
            u.push(this._customProps[i] = r);
            return u;
        }, i.prototype._getDefault = function(t) {
            return this.objects[0].get(t);
        }, i.prototype._setDefault = function(t, e) {
            var i, n, o, r, s;
            for (r = this.objects, s = [], n = 0, o = r.length; o > n; n++) i = r[n], s.push(i.set(t, e));
            return s;
        }, i.prototype._getPosition = function() {
            var t, e, i, n, o, r, s;
            if (this.objects) {
                for (i = 9999999, n = 9999999, s = this.objects, o = 0, r = s.length; r > o; o++) t = s[o], 
                e = t.getPosition(), i = Math.min(i, e.x), n = Math.min(n, e.y);
                return new paper.Point(i, n);
            }
        }, i.prototype._setPosition = function(t) {
            var e, i, n, o, r, s, a;
            if (this.objects) {
                for (i = this._getPosition(), n = t.subtract(i), s = this.objects, a = [], o = 0, 
                r = s.length; r > o; o++) e = s[o], a.push(e.translate(n));
                return a;
            }
        }, i.prototype._callModifier = function(t, e) {
            var i, n;
            return i = _.toArray(arguments).slice(2), n = "_" + _.camelize("" + t + "_" + e), 
            _.isFunction(this[n]) ? (i = _.toArray(arguments).slice(2), this[n].apply(this, i)) :(i = _.toArray(arguments).slice(1), 
            this["_" + t + "Default"].apply(this, i));
        }, i;
    }();
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, e = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.RenderModel = function() {
        function i(e) {
            this.includes = t(this.includes, this), this.includesItem = t(this.includesItem, this), 
            this.add = t(this.add, this), this.clone = t(this.clone, this), this.clear = t(this.clear, this), 
            this.transform = t(this.transform, this), this.getRectangle = t(this.getRectangle, this), 
            this._addThreshold = t(this._addThreshold, this), this._rect = null, e && (this._rect = this._addThreshold(e)), 
            this._ids = [];
        }
        return i.prototype.THRESHOLD = 8, i.prototype._addThreshold = function(t) {
            return this.THRESHOLD ? new Draw.IntRectangle(_.clamp(t.x - this.THRESHOLD, 0, 1e5), _.clamp(t.y - this.THRESHOLD, 0, 1e5), _.clamp(t.width + 2 * this.THRESHOLD, 0, 1e5), _.clamp(t.height + 2 * this.THRESHOLD, 0, 1e5)) :new Draw.IntRectangle(t);
        }, i.prototype.getRectangle = function() {
            return this._rect;
        }, i.prototype.transform = function(t) {
            return this._rect ? this._rect = new Draw.IntRectangle(t.transform(this._rect.topLeft), t.transform(this._rect.bottomRight)) :void 0;
        }, i.prototype.clear = function() {
            return this._rect = null, this._ids = [];
        }, i.prototype.clone = function() {
            var t;
            return t = new Draw.RenderModel(), this._rect && (t._rect = new Draw.IntRectangle(this._rect)), 
            t._ids = _.toArray(this._ids), t;
        }, i.prototype.add = function(t) {
            var e, i, n, o, r;
            if (!t) return !1;
            if (_.isArray(t)) for (o = 0, r = t.length; r > o; o++) n = t[o], this.add(n);
            return t.getBounds || t instanceof paper.Rectangle ? (i = t.getDrawableBounds && "getDrawableBounds" || "getBounds", 
            t instanceof paper.Rectangle ? e = t :(e = t[i](), t.id && this._ids.push(t.id)), 
            !this._rect && e ? this._rect = this._addThreshold(e) :e && (this._rect = this._rect.unite(this._addThreshold(e))), 
            !0) :!1;
        }, i.prototype.includesItem = function(t) {
            var i;
            return t.id ? (i = t.id, e.call(this._ids, i) >= 0) :!1;
        }, i.prototype.includes = function(t) {
            var e, i;
            return t.getBounds ? (i = t.getDrawableBounds || t.getBounds, e = i.call(t), this._rect ? this._rect.intersects(e) :!0) :!1;
        }, i;
    }();
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.SelectionModel = function(i) {
        function o() {
            return this.objectChanged = e(this.objectChanged, this), this.objectRemoved = e(this.objectRemoved, this), 
            this.selected = e(this.selected, this), this.preselected = e(this.preselected, this), 
            this.modifySelectionFor = e(this.modifySelectionFor, this), this.toggleSelected = e(this.toggleSelected, this), 
            this.addToSelected = e(this.addToSelected, this), this.removeFromSelected = e(this.removeFromSelected, this), 
            this.setSelected = e(this.setSelected, this), this.clearSelected = e(this.clearSelected, this), 
            this.isSelected = e(this.isSelected, this), this.getSelectedBounds = e(this.getSelectedBounds, this), 
            this.getSelectedLength = e(this.getSelectedLength, this), this.getOneSelected = e(this.getOneSelected, this), 
            this.getSelectedList = e(this.getSelectedList, this), this.getSelected = e(this.getSelected, this), 
            this.getSelectedSegments = e(this.getSelectedSegments, this), this.removePreselected = e(this.removePreselected, this), 
            this.clearPreselected = e(this.clearPreselected, this), this.getPreselectedLength = e(this.getPreselectedLength, this), 
            this.getPreselected = e(this.getPreselected, this), this.setPreselected = e(this.setPreselected, this), 
            this._bindToPreselected = e(this._bindToPreselected, this), this.clearSelectedHandle = e(this.clearSelectedHandle, this), 
            this.getSelectedHandle = e(this.getSelectedHandle, this), this.setSelectedHandle = e(this.setSelectedHandle, this), 
            this.initialize = e(this.initialize, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype._module = "SelectionModel", o.prototype.initialize = function() {
            return this._boundObjects = null, this.set({
                selected:null
            }), this.set({
                preselected:null
            }), this.set({
                selectedHandle:null
            }), this.bind("change:preselected", this.preselected), this.bind("change:selected", this.selected);
        }, o.prototype.setLocked = function(t, e) {
            return t && !e && this.clearSelected(), this.set({
                locked:t
            });
        }, o.prototype.getLocked = function() {
            return this.get("locked");
        }, o.prototype.setSelectedHandle = function(t, e) {
            var i;
            if (t && (e === Draw.SelectionState.HANDLE_IN || e === Draw.SelectionState.HANDLE_OUT)) return i = this.get("selectedHandle"), 
            i && i[0].selectHandle(null), t.selectHandle(e), i = [ t, e ], this.set({
                selectedHandle:i
            });
        }, o.prototype.getSelectedHandle = function() {
            return this.get("selectedHandle");
        }, o.prototype.clearSelectedHandle = function() {
            var t;
            return t = this.get("selectedHandle"), t && t[0].selectHandle(null), this.set({
                selectedHandle:null
            });
        }, o.prototype._bindToPreselected = function(t, e) {
            return t && (t[e ? "bind" :"unbind"]("removed", this.clearPreselected), t.setPreselected(!!e), 
            !e) ? this.trigger("remove:preselected", this, t, "remove:preselected") :void 0;
        }, o.prototype.setPreselected = function(t) {
            var e;
            if (!(t && t.get("is_locked") || (e = this.getPreselected(), !e && e === t || e && t && e._id === t._id))) return !t || t instanceof paper.Item ? (this._bindToPreselected(this.getPreselected(), !1), 
            this._bindToPreselected(t, !0), this.set({
                preselected:t
            })) :void 0;
        }, o.prototype.getPreselected = function() {
            return this.get("preselected");
        }, o.prototype.getPreselectedLength = function() {
            return this.getPreselected() ? 1 :0;
        }, o.prototype.clearPreselected = function() {
            return this._bindToPreselected(this.getPreselected(), !1), this.setPreselected(null);
        }, o.prototype.removePreselected = function(t) {
            var e;
            return e = this.getPreselected(), t && e && e._id === t._id ? this.clearPreselected() :void 0;
        }, o.prototype.getSelectedSegments = function() {
            var t, e, i, n, o;
            i = this.getSelected(), o = [];
            for (t in i) e = i[t], e.getSelectedSegments && (n = e.getSelectedSegments(), n.length || (n = e.getSegments()), 
            o = o.concat(n));
            return o;
        }, o.prototype.getSelected = function() {
            return this.get("selected");
        }, o.prototype.getSelectedList = function(t) {
            var e, i;
            return e = {
                sort:void 0,
                groups:!0
            }, t = _.extend(e, t), i = _.values(this.getSelected()), t.groups && (i = Draw.Item.getGroups(i)), 
            "asc" === t.sort && (i = Draw.Item.sortAsc(i)), "desc" === t.sort && (i = Draw.Item.sortDesc(i)), 
            i;
        }, o.prototype.getOneSelected = function(t) {
            var e, i, n;
            if (t && 1 !== _.size(this.getSelected())) return null;
            n = this.getSelected();
            for (e in n) return i = n[e];
            return null;
        }, o.prototype.getSelectedLength = function() {
            return _.size(this.getSelected());
        }, o.prototype._selBoundsFns = {
            object:"getBounds",
            segment:"getSegmentBounds"
        }, o.prototype.getSelectedBounds = function(t, e) {
            var i, n, o, r, s, a, l, c;
            if (e = e || {}, e.boundsType || (e.boundsType = "object"), t = t || this.getSelected(), 
            i = this._selBoundsFns[e.boundsType], n = function(t, e) {
                var n;
                return t instanceof paper.Item ? (n = t[i] || t.getBounds, e = e ? e.unite(n.call(t)) :n.call(t)) :t instanceof paper.Segment && (e = e ? e.include(t.point) :new paper.Rectangle(t.point.x, t.point.y, 0, 0)), 
                e;
            }, a = null, _.isArray(t)) for (l = 0, c = t.length; c > l; l++) o = t[l], a = n(o, a); else for (r in t) o = t[r], 
            a = n(o, a);
            return e.addPrev && (s = this._selBounds, this._selBounds = a, s && (a = s.unite(this._selBounds))), 
            a;
        }, o.prototype.isSelected = function(t) {
            var e;
            return e = this.get("selected"), !!(e && t._id in e);
        }, o.prototype.clearSelected = function() {
            return this.setSelected(null);
        }, o.prototype.setSelected = function(t) {
            var e, i, n;
            if (!(this.getLocked() || (n = this.getSelected(), n && 1 === _.size(n) && t && n[t._id]))) {
                if (n) for (e in n) i = n[e], i.setSelected(!1);
                return n = null, t && (n = {}, n[t._id] = t, t.setSelected(!0)), this.clearPreselected(), 
                this.set({
                    selected:n
                });
            }
        }, o.prototype.removeFromSelected = function(t) {
            return this.modifySelectionFor(t, "remove");
        }, o.prototype.addToSelected = function(t) {
            return this.modifySelectionFor(t, "add");
        }, o.prototype.toggleSelected = function(t) {
            return this.modifySelectionFor(t, "toggle");
        }, o.prototype.modifySelectionFor = function(t, e) {
            var i, n;
            if (!this.getLocked() && t) return n = this.get("selected"), n = n ? $.extend({}, n) :{}, 
            "toggle" === e && (e = t._id in n ? "remove" :"add"), "add" === e ? (n[t._id] = t, 
            t.setSelected(!0)) :"remove" === e && t._id in n && (delete n[t._id], t.setSelected(!1), 
            i = this.getPreselected(), i && i._id === t._id && this.clearPreselected()), n = _.isEmpty(n) ? null :n, 
            this.set({
                selected:n
            });
        }, o.prototype.preselected = function() {}, o.prototype.selected = function(t, e) {
            var i, n, o, r;
            if (this._selBounds = null, this._boundObjects) {
                o = this._boundObjects;
                for (i in o) n = o[i], n.unbind("change", this.objectChanged), n.unbind("removed", this.objectRemoved);
                this.trigger("remove:selected", this, this._boundObjects, "remove:selected"), this._boundObjects = null;
            }
            if (e) {
                this._boundObjects = e, r = [];
                for (i in e) n = e[i], n.bind("change", this.objectChanged), r.push(n.bind("removed", this.objectRemoved));
                return r;
            }
        }, o.prototype.objectRemoved = function(t) {
            return this.modifySelectionFor(t, "remove"), this.trigger("remove:object", this, t);
        }, o.prototype.objectChanged = function(t) {
            var e;
            return e = [], t.changedAttributes && (e = t.changedAttributes()), this.trigger("change:object", this, t, e, this.getSelected()), 
            !0;
        }, o;
    }(Backbone.Model);
}.call(this), Draw.Effect = paper.Base.extend({
    TYPE:"Effect",
    initialize:function(t) {
        this.cid = _.uniqueId("c"), this.id = _.uniqueId("i"), this.initializeProperties(t);
    },
    toString:function() {
        return "Effect!";
    }
}), Draw.Effect.fromJSON = function(t) {
    if (!t.t) return null;
    t = Draw.fromJSON(t);
    var e = new Draw[t.t](t.offset, t.color, t.blur);
    return void 0 !== t.visible && e.setVisible(t.visible), e;
}, Draw.Effect.supportedProperties = function() {
    return [ "visible", "name" ];
}, Draw.PropertyAttributeMixin.mixinTo(Draw.Effect), Draw.Shadow = Draw.Effect.extend({
    WHEN:"pre",
    TYPE:"Shadow",
    initialize:function(t, e, i) {
        this.ORIGIN = new paper.Point(0, 0), this.base({
            visible:!0,
            offset:t || new paper.Point(0, 0),
            color:e || new paper.RGBColor("black"),
            blur:void 0 != i ? i :5,
            name:this.TYPE
        });
    },
    _toCssString:function() {
        function t(t) {
            return Math.round(t) + "px";
        }
        return t(this._offset.x) + " " + t(this._offset.y) + " " + t(this._blur) + " " + t(0) + " " + this._color.toCssString();
    },
    toCssString:function() {
        return this._toCssString();
    },
    _round:function(t) {
        return Math.round(1e4 * t) / 1e4;
    },
    _setOffset:function(t, e) {
        return this._calculateAngleAndDistance(t, e), t;
    },
    _calculateAngleAndDistance:function(t, e) {
        var i = t.subtract(this.ORIGIN), n = -1 * i.angle;
        this._distance = i.length, this._model.set({
            distance:this._distance
        }, e), (this._round(this._distance) || !_.isNumber(this._angle)) && (this._angle = n, 
        this._model.set({
            angle:this._angle
        }, e));
    },
    _setAngle:function(t, e) {
        var i = this._offset.subtract(this.ORIGIN);
        return i.setAngle(-1 * t), this._angle = t, this.set("offset", new paper.Point(this._round(i.x), this._round(i.y)), e), 
        t;
    },
    _setDistance:function(t, e) {
        var i = this._offset.subtract(this.ORIGIN);
        return i.setLength(t), i.setAngle(-1 * this._angle), this._distance = i.length, 
        this.set("offset", new paper.Point(this._round(i.x), this._round(i.y)), e), t;
    },
    _setColor:function(t, e) {
        return e && "setvisible" != e.originator && t && this.set("visible", t.getAlpha() > .001, {
            originator:"setcolor"
        }), t;
    },
    _setVisible:function(t, e) {
        return "setcolor" != e.originator && t != this.get("visible") && (color = this.get("color"), 
        color && color.getAlpha && (color = color.clone(), t ? color.setAlpha(1e3 * color.getAlpha()) :color.setAlpha(color.getAlpha() / 1e3), 
        this.set("color", color, {
            originator:"setvisible"
        }))), t;
    }
}), Draw.Shadow.supportedProperties = function() {
    return Draw.Effect.supportedProperties().concat([ "color", "offset", "blur", "angle", "distance" ]);
}, Draw.PropertyAttributeMixin.mixinTo(Draw.Shadow), Draw.Shadow.fromCssTokens = function(t) {
    if (t && (t = t.trim()), !t || "none" == t || "null" == t) return [];
    var e = [], i = [], n = [], o = !1;
    saveComp = function() {
        var t = n.join("").trim();
        t && i.push(t), n = [];
    }, saveShadow = function() {
        e.push(i), i = [];
    };
    for (var r = 0; r < t.length; r++) {
        var s = t[r];
        "(" == s && (o = !0), ")" == s && (o = !1), "," != s || o ? " " == s && !o && n.length ? saveComp() :n.push(s) :(saveComp(), 
        saveShadow());
    }
    return saveComp(), saveShadow(), e;
}, Draw.Shadow.parseShadowTokens = function(t) {
    for (var e = /rgb|#/g, i = {
        position:[],
        color:null,
        inset:!1
    }, n = 0; n < t.length; n++) {
        var o = t[n];
        e.test(o) ? i.color = Color.normalize(o) :o.indexOf("inset") > -1 ? i.inset = !0 :i.position.push(o);
    }
    return i;
}, Draw.Shadow.normalize = function(t) {
    var e = [], i = Draw.Shadow.fromCssTokens(t);
    if (0 == i.length) return "none";
    for (var n = 0; n < i.length; n++) {
        var o = Draw.Shadow.parseShadowTokens(i[n]), r = o.color ? o.color.toCssString() :"transparent", s = o.inset ? "inset " :"", a = o.position.join(" ");
        e.push(s + a + " " + r);
    }
    return e.join(", ");
}, Draw.Shadow.fromCss = function(t, e) {
    for (var i = {
        "box:true":Draw.InnerShadow,
        "box:false":Draw.Shadow,
        "text:false":Draw.TextShadow
    }, n = [], o = Draw.Shadow.fromCssTokens(t), r = 0; r < o.length; r++) {
        var s = Draw.Shadow.parseShadowTokens(o[r]), a = Color.normalize(s.color), l = new paper.Point(parseInt(s.position[0]), parseInt(s.position[1])), c = parseInt(s.position[2]);
        n.push(new i[e + ":" + s.inset](l, a, c));
    }
    return n;
}, Draw.TextShadow = Draw.Shadow.extend({
    TYPE:"TextShadow",
    _toCssString:function() {
        function t(t) {
            return Math.round(t) + "px";
        }
        return t(this._offset.x) + " " + t(this._offset.y) + " " + t(this._blur) + " " + this._color.toCssString();
    }
}), Draw.InnerShadow = Draw.Shadow.extend({
    WHEN:"post",
    TYPE:"InnerShadow",
    _toCssString:function(t) {
        return "inset " + this.base(t);
    }
}), Draw.EffectCollection = Draw.Collection.extend({
    toCss:function() {
        for (var t = [], e = [], i = 0; i < this.length; i++) this.at(i) instanceof Draw.TextShadow ? t.push(this.at(i).toCssString()) :e.push(this.at(i).toCssString());
        var n = {};
        return e = e.join(", "), t = t.join(", "), n["box-shadow"] = e || "none", n["text-shadow"] = t || "none", 
        n;
    },
    trigger:function(t) {
        var e = _.toArray(arguments);
        if ("change" == t) {
            var i = e[1], n = e[1] = e[1].owner, o = e[2];
            o.index = this.indexOf(n), o.changedAttributes = i.changedAttributes();
        }
        Draw.EffectCollection.__super__.trigger.apply(this, e);
    },
    doAction:function(t, e, i) {
        if ("add" == t) this.add(e.clone(), i); else if ("remove" == t) this.remove(this.at(i.index), i); else if ("change" == t) {
            var n = this.at(i.index), o = i.changedAttributes;
            if (n && o && o.length) for (var r = 0; r < o.length; r++) n.set(o[r], e.get(o[r]), i);
        } else "insert" == t && (i.lastIndex > -1 ? this.insert(this.at(i.lastIndex), i.index, i) :this.insert(e.clone(), i.index, i));
    },
    getTextShadows:function() {
        return shadows = [], this.each(function(t) {
            t instanceof Draw.TextShadow && shadows.push(t);
        }), shadows;
    },
    getBoxShadows:function() {
        return shadows = [], this.each(function(t) {
            t instanceof Draw.TextShadow || shadows.push(t);
        }), shadows;
    },
    insert:function(t, e, i) {
        i = i || {};
        var n = this.getByCid(t.cid), o = this.indexOf(n);
        if (n && this.remove(n, {
            silent:!0
        }), this.add(t, _.extend({}, {
            at:e,
            silent:!0
        }, i)), !i.silent) {
            var r = {
                index:e,
                lastIndex:o
            };
            t.trigger("insert", t, t.collection, _.extend({}, r, i));
        }
    },
    clone:function() {
        var t = new Draw.EffectCollection();
        return this.each(function(e) {
            t.add(e.clone());
        }), t;
    }
}), Draw.EffectCollection.fromJSON = function(t) {
    for (var e = [], i = 0; i < t.length; i++) shadow = Draw.Effect.fromJSON(t[i]), 
    e.push(shadow);
    return e.reverse(), e = new Draw.EffectCollection(e);
}, function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.AngleSnapper = function(e) {
        function n(e) {
            this.snap = t(this.snap, this), this._snapAngleDistance = t(this._snapAngleDistance, this), 
            this._snapAngle = t(this._snapAngle, this), this._setAngles = t(this._setAngles, this), 
            n.__super__.constructor.call(this, {
                angles:e || []
            });
        }
        return i(n, e), n.prototype._setAngles = function(t) {
            return t.sort(function(t, e) {
                return t - e;
            });
        }, n.prototype._snapAngle = function(t) {
            var e, i, n;
            return n = this._snapAngleDistance(t), i = n[0], e = n[1], i;
        }, n.prototype._snapAngleDistance = function(t) {
            var e, i, n, o, r, s, a;
            return e = this.getAngles(), e.length ? (a = 0 > t ? -1 :1, t = Math.abs(t) % 360, 
            s = _.sortedIndex(e, t), 0 === s || s === e.length ? (o = n = e[0], r = e[e.length - 1]) :(o = n = e[s - 1], 
            r = e[s]), t - o > r - t && (n = r), i = t - n, Math.abs(i) <= Draw.GUIDE_TOLERANCE ? t = n :i = null, 
            [ t % 360 * a, i ]) :[ t, null ];
        }, n.prototype.snap = function(t) {
            var e;
            return t instanceof paper.Point && _.isNumber(t.angle) ? (e = t.clone(), e.setAngle(this._snapAngle(t.getAngle())), 
            e) :t;
        }, n;
    }(Draw.Snapper), Draw.AngleSnapper.supportedProperties = function() {
        return [ "angles" ];
    }, Draw.PropertyMixin.generateGettersSetters(Draw.AngleSnapper), Draw.AngleSnapper.AXIS = [ 0, 90, 180, 270, 360 ], 
    Draw.AngleSnapper.AXIS_INTERSECT = [ 0, 45, 90, 135, 180, 225, 270, 315, 360 ];
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    }, n = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.AutoSnapper = function(e) {
        function o(e) {
            this._getGuides = t(this._getGuides, this), this.snap = t(this.snap, this);
            var i;
            e = e || {}, i = {
                x_guides:[],
                y_guides:[],
                enabled:!0,
                color:"#FF0",
                visible:!0,
                tolerance:3,
                snap_dims:null
            }, o.__super__.constructor.call(this, _.extend({}, i, e)), this.document = e.document;
        }
        return i(o, e), o.prototype.POINTS = [ "begin", "center", "end" ], o.prototype.RADIUS = 100, 
        o.prototype._getStops = function(t) {
            var e, i;
            return e = [ t.x, t.center.x, t.topRight.x ], i = [ t.y, t.center.y, t.bottomLeft.y ], 
            [ e, i ];
        }, o.prototype.checkBounds = function(t, e) {
            var i, n, o, r, s, a, l, c, h, u, d, p, f, g, m, _;
            for (m = this._getStops(t), s = m[0], a = m[1], _ = this._getStops(e), i = _[0], 
            n = _[1], l = this.getTolerance(), c = null, h = null, r = u = 0; 3 > u; r = ++u) {
                for (d = 0, f = i.length; f > d; d++) if (o = i[d], Math.abs(s[r] - o) <= l) {
                    c = [ this.POINTS[r], parseInt(o) ];
                    break;
                }
                for (p = 0, g = n.length; g > p; p++) if (o = n[p], Math.abs(a[r] - o) <= l) {
                    h = [ this.POINTS[r], parseInt(o) ];
                    break;
                }
            }
            return {
                x:c,
                y:h
            };
        }, o.prototype._findItems = function(t, e) {
            var i, o, r, s, a, l;
            if (r = Draw.Item.getGroups(this.document.getProject().findItems(t)), r.sort(function(e, i) {
                var n, o;
                return n = Math.abs(e.getBounds().center.subtract(t.center).length), o = Math.abs(i.getBounds().center.subtract(t.center).length), 
                n - o;
            }), s = Draw.Item.getGroups(this.document.selectionModel.getSelected()), i = function() {
                var t, e, i;
                for (i = [], t = 0, e = s.length; e > t; t++) o = s[t], i.push(o.id);
                return i;
            }(), e) for (a = 0, l = e.length; l > a; a++) o = e[a], i.push(o.id);
            return r = function() {
                var t, e, s, a;
                for (a = [], t = 0, e = r.length; e > t; t++) o = r[t], s = o.id, n.call(i, s) < 0 && a.push(o);
                return a;
            }(), [ this.document ].concat(r);
        }, o.prototype.snap = function(t, e, i) {
            var n, r, s, a, l, c, h, u, d, p, f, g, m, v, y, b, w;
            if (i = i || {}, f = t, t instanceof paper.Rectangle || (f = new paper.Rectangle(t, new paper.Size(0, 0))), 
            n = f.expand(2 * this.RADIUS), d = this._findItems(n, i.ignore), l = {
                x:null,
                y:null
            }, g = {
                x:null,
                y:null
            }, d) for (m = 0, y = d.length; y > m; m++) if (u = d[m], c = this.checkBounds(f, u.getBounds()), 
            c.x || c.y) {
                for (r in c) s = c[r], g[r] || (s && (a = [ s[1] ]), s && null != a && (g[r] = s[0], 
                l[r] = a));
                if (l.x && l.y) break;
            }
            for (w = [ "x", "y" ], v = 0, b = w.length; b > v; v++) r = w[v], p = this.get(r + "_guides"), 
            h = i.ignoreDim === r, a = l[r], null == a || h || _.isEqual(a, p) ? (h || null == a && p !== []) && this.set(r + "_guides", []) :(this.set(r + "_guides", a), 
            print(g[r], a, p));
            return g.x || g.y ? (this.set("snap_dims", g), o.__super__.snap.call(this, t, e, g)) :(this.set("snap_dims", null), 
            this.set("x_guides", []), this.set("y_guides", []), t);
        }, o.prototype._getGuides = function(t) {
            return this.get(t + "_guides");
        }, o.supportedProperties = function() {
            return [ "x_guides", "y_guides", "enabled", "visible", "color", "tolerance", "snap_dims" ];
        }, o;
    }(Draw.BaseGridSnapper), Draw.PropertyMixin.generateGettersSetters(Draw.AutoSnapper);
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.GridSnapper = function(e) {
        function n(e, i) {
            this._getGuides = t(this._getGuides, this), this.fromJSON = t(this.fromJSON, this), 
            n.__super__.constructor.call(this, {
                grid:e || Draw.DEFAULT_GRID,
                offset:i || new paper.Point(0, 0),
                enabled:!0,
                visible:!0,
                color:Color.normalize({
                    R:237,
                    G:0,
                    B:7,
                    A:.15
                })
            });
        }
        return i(n, e), n.prototype.fromJSON = function(t) {
            var e;
            return e = Draw.fromJSON(t), e.grid = e.grid || Draw.DEFAULT_GRID, this.set(e);
        }, n.prototype._getGuides = function(t, e) {
            var i, n, o, r, s;
            return i = this.getGrid(), s = this.getOffset()[t], r = e - s, 0 > r ? [ 0, s ] :(o = r - r % i + s, 
            n = o + i, [ o, n ]);
        }, n;
    }(Draw.BaseGridSnapper), Draw.GridSnapper.supportedProperties = function() {
        return [ "grid", "offset", "enabled", "visible", "color" ];
    }, Draw.PropertyMixin.generateGettersSetters(Draw.GridSnapper);
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.GridSystemSnapper = function(e) {
        function n(e) {
            this.refresh = t(this.refresh, this), this.getColumnWidth = t(this.getColumnWidth, this), 
            this.getColumnPositions = t(this.getColumnPositions, this), this.getGuides = t(this.getGuides, this), 
            this.fromJSON = t(this.fromJSON, this), this.toJSON = t(this.toJSON, this);
            var i;
            i = {
                color:Color.normalize({
                    R:0,
                    G:255,
                    B:255,
                    A:.8
                }),
                column_color:Color.normalize({
                    R:255,
                    G:0,
                    B:9,
                    A:.1
                }),
                gutter_width:20,
                effective_size:null,
                document_size:960,
                columns:12
            }, n.__super__.constructor.call(this, _.extend({}, i, e)), this.bind("change:gutter_width", this.refresh), 
            this.bind("change:effective_size", this.refresh), this.bind("change:document_size", this.refresh), 
            this.bind("change:columns", this.refresh), this.refresh();
        }
        return i(n, e), n.prototype.threshold = 5, n.prototype.toJSON = function() {
            var t;
            return t = n.__super__.toJSON.call(this), t.column_color = Color.NORMALIZE_JSON(this.getColumnColor()), 
            delete t.x_guides, delete t.y_guides, t;
        }, n.prototype.fromJSON = function(t) {
            return n.__super__.fromJSON.call(this, t), this.refresh();
        }, n.prototype.getGuides = function() {
            var t;
            return t = this.getXGuides(), [ t[0], t[t.length - 1] ];
        }, n.prototype.getColumnPositions = function() {
            var t, e, i, n, o;
            for (t = this.getXGuides(), i = [], e = n = 1, o = t.length - 1; o >= 1 ? o > n :n > o; e = o >= 1 ? ++n :--n) (e - 1) % 2 === 0 && i.push(t[e]);
            return i;
        }, n.prototype.getColumnWidth = function() {
            return this.columnWidth;
        }, n.prototype.refresh = function() {
            var t, e, i, n, o, r, s, a, l, c, h;
            for (a = 0, e = this.getDocumentSize(), i = this.getEffectiveSize(), o = this.getGutterWidth(), 
            !i && e > 960 && (i = 960), e || $.error("Hey, give me a doc size"), i && i > e && $.warn("doc must be larger than effective size"), 
            l = e, i && (a = (e - i) / 2, l = i), t = o / 2 + a, this.columnWidth = l / this.getColumns() - o, 
            n = [ a ], r = c = 0, h = this.getColumns(); h >= 0 ? h > c :c > h; r = h >= 0 ? ++c :--c) s = (this.columnWidth + o) * r + t, 
            n.push(s), n.push(s + this.columnWidth);
            return n.push(a + l), this.setXGuides(n), this.trigger("refresh", this);
        }, n;
    }(Draw.GuidesSnapper), Draw.GridSystemSnapper.supportedProperties = function() {
        var t;
        return t = Draw.GuidesSnapper.supportedProperties(), t.concat([ "column_color", "gutter_width", "effective_size", "document_size", "columns" ]);
    }, Draw.PropertyMixin.generateGettersSetters(Draw.GridSystemSnapper);
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.ProportionSnapper = function(e) {
        function n(e) {
            this.snap = t(this.snap, this), n.__super__.constructor.call(this, {
                proportion:e || 1
            });
        }
        return i(n, e), n.prototype._shiftToAnchor = function(t, e, i) {
            var n, o, r;
            return e === Draw.ANCHOR_TOP_LEFT ? t :(o = t.x, r = t.y, n = e.toLowerCase(), n.indexOf("right") > -1 && (o = parseInt(o + (i.x - t[e].x))), 
            n.indexOf("bottom") > -1 && (r = parseInt(r + (i.y - t[e].y))), t.set(o, r, t.width, t.height));
        }, n.prototype._snap = function(t, e, i) {
            var n, o;
            return n = t[e], o = t.width / t.height, t = i > o ? new Draw.IntRectangle(t.x, t.y, t.height * i, t.height) :new Draw.IntRectangle(t.x, t.y, t.width, t.width / i), 
            this._shiftToAnchor(t, e, n);
        }, n.prototype.snap = function(t, e, i) {
            return t instanceof paper.Rectangle ? (e = e || Draw.ANCHOR_TOP_LEFT, i = i || this.getProportion(), 
            this._snap(t, e, i)) :t;
        }, n;
    }(Draw.Snapper), Draw.ProportionSnapper.supportedProperties = function() {
        return [ "proportion" ];
    }, Draw.PropertyMixin.generateGettersSetters(Draw.ProportionSnapper);
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.RectangleSnapper = function(e) {
        function n(e) {
            this.snap = t(this.snap, this), this._snapNumDistance = t(this._snapNumDistance, this), 
            this._snapNum = t(this._snapNum, this), n.__super__.constructor.call(this, {
                rectangle:e
            });
        }
        return i(n, e), n.prototype.SIZE = {
            x:"width",
            y:"height"
        }, n.prototype._snapNum = function(t, e) {
            var i, n, o;
            return o = this._snapNumDistance(t, e), n = o[0], i = o[1], n;
        }, n.prototype._snapNumDistance = function(t, e) {
            var i, n, o, r, s, a, l, c, h, u, d;
            if (a = "x" === t ? "y" :"x", l = this.getRectangle(), s = e[t], o = l[a] - Draw.GUIDE_THRESHOLD, 
            n = l[a] + l[this.SIZE[a]] + Draw.GUIDE_THRESHOLD, !l || e[a] < o || e[a] > n) return [ s, null ];
            for (r = l[t], i = l[t] + l[this.SIZE[t]], h = [ [ r, s - r ], [ i, s - i ] ], u = 0, 
            d = h.length; d > u; u++) if (c = h[u], Math.abs(c[1]) <= Draw.GUIDE_THRESHOLD) return c;
            return [ s, null ];
        }, n.prototype.snap = function(t) {
            return t instanceof paper.Point ? new paper.Point(this._snapNum("x", t), this._snapNum("y", t)) :t;
        }, n;
    }(Draw.Snapper), Draw.RectangleSnapper.supportedProperties = function() {
        return [ "rectangle" ];
    }, Draw.PropertyMixin.generateGettersSetters(Draw.RectangleSnapper);
}.call(this), function() {
    var t, e = this;
    Draw.Storage = {
        server:null,
        setServer:function(t) {
            return Draw.Storage.server = t;
        },
        open:function(t, e) {
            var i, n, o, r;
            return Draw.Storage.server || $.warn("Draw.Storage.server is null. Call setServer() before open"), 
            r = Draw.Storage.server.split("//"), n = r[0], i = r[1], o = 0 === i.indexOf("localhost") ? "" + n + "//" + i + "/channel" :"" + n + "//" + t + "." + i + "/channel", 
            sharejs.open(t, "json", o, function(t, i) {
                return t && $.warn("Share doc didnt load:", t), e(t, i);
            });
        },
        replaceDocument:function(t, e, i) {
            return t.submitOp([ {
                p:[],
                od:null,
                oi:e
            } ], i);
        },
        get:function(e, i, n) {
            return $.ajax({
                url:t(e),
                method:"GET",
                dataType:"json",
                contentType:"application/json",
                crossDomain:!0,
                xhrFields:{
                    withCredentials:!0
                },
                success:i,
                error:n
            });
        },
        post:function(e, i, n, o, r) {
            var s;
            return s = "" + t(e) + "?v=" + i, $.ajax({
                url:s,
                method:"POST",
                data:_.isString(n) ? void 0 :JSON.stringify(n),
                dataType:"json",
                contentType:"application/json",
                crossDomain:!0,
                xhrFields:{
                    withCredentials:!0
                },
                success:function(t) {
                    return o(t);
                },
                error:r
            });
        },
        create:function(e, i, n, o) {
            return $.ajax({
                url:t(e),
                method:"PUT",
                data:JSON.stringify({
                    type:"json",
                    meta:null
                }),
                dataType:"text",
                contentType:"application/json",
                crossDomain:!0,
                xhrFields:{
                    withCredentials:!0
                },
                success:function() {
                    return Draw.Storage.post(e, 0, [ {
                        p:[],
                        od:null,
                        oi:i
                    } ], n, o);
                },
                error:o
            });
        }
    }, t = function(t) {
        var e, i, n, o;
        return o = Draw.Storage.server.split("//"), i = o[0], e = o[1], n = 0 === e.indexOf("localhost") ? "" + i + "//" + e + "/doc/" + t :"" + i + "//" + t + "." + e + "/doc/" + t;
    }, Draw.LocalStorage = {
        set:function(t, i, n) {
            return window.localStorage ? (n && (i = Draw.stringify(i)), pds(e, "Local storage to " + t, i), 
            localStorage.setItem(t, i)) :$.warn("No localstorage");
        },
        unset:function(t) {
            return window.localStorage ? localStorage.removeItem(t) :!1;
        },
        get:function(t, e) {
            var i;
            return window.localStorage ? (i = localStorage.getItem(t), i && e && (i = JSON.parse(i)), 
            i) :null;
        }
    };
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.SymbolCollection = function(i) {
        function o() {
            return this._onModelEvent = e(this._onModelEvent, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.toJSON = function() {
            var t;
            return t = [], this.each(function(e) {
                return t.push(e.toJSON());
            }), t;
        }, o.prototype.fromJSON = function(t) {
            var e, i, n, o, r, s;
            if (t) {
                for (e = !1, n = 0, r = t.length; r > n; n++) if (i = t[n], !_.isString(i)) {
                    e = !0;
                    break;
                }
                if (e) for (this.reset(), o = 0, s = t.length; s > o; o++) i = t[o], i = Draw.Symbol.fromJSON(i), 
                i && !this.get(i) && this.add(i);
                return this;
            }
        }, o.prototype._onModelEvent = function(t, e, i, n) {
            return "add" !== t && "remove" !== t || i === this ? ("destroy" === t && this._remove(e, n), 
            e && t === "change:" + e.idAttribute && (delete this._byId[e.previous(e.idAttribute)], 
            this._byId[e.id] = e.owner || e), this.trigger.apply(this, arguments)) :void 0;
        }, o;
    }(Draw.Collection);
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    Draw.DemoSymbolManager = function() {
        function e(e) {
            this.onAddSymbol = t(this.onAddSymbol, this);
            var i, n = this;
            i = {
                document:null,
                symbols:null,
                userElements:null
            }, this.options = _.extend(i, e), this.document = this.options.document, this.symbols = this.options.symbols, 
            this.symbols.bind("add", this.onAddSymbol), this.symbols.bind("change:thumbnail_url", function(t) {
                var e;
                return e = n.options.userElements.get(t.id), e.set({
                    thumbnail_url:t.get("thumbnail_url")
                });
            });
        }
        return e.prototype._module = "SymbolManager", e.prototype.onAddSymbol = function(t) {
            var e;
            return print("add sym", t), this.options.userElements && !this.options.userElements.get(t.id) && (e = new Easel.Document({
                eid:t.id,
                organization:this.options.org,
                type:"DocumentSymbol",
                name:t.getName()
            }), this.options.userElements) ? this.options.userElements.add(e) :void 0;
        }, e;
    }();
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    Draw.SymbolManager = function() {
        function e(e) {
            this.onCreateSymbol = t(this.onCreateSymbol, this), this.onAddSymbol = t(this.onAddSymbol, this);
            var i;
            i = {
                document:null,
                symbols:null,
                userElements:null,
                org:null
            }, this.options = _.extend(i, e), this.document = this.options.document, this.symbols = this.options.symbols, 
            this.symbols.bind("add", this.onAddSymbol), this.symbolUndoOps = {};
        }
        return e.prototype._module = "SymbolManager", mixin(e, Backbone.Events), e.prototype.onAddSymbol = function(t) {
            var e, i, n, o, r, s, a, l;
            if (pds(this, "Add symbol to documents symbol collection", t.id, t), !this.options.userElements || !this.options.userElements.get(t.id)) {
                for (pds(this, "Request to server to create a new symbol", t.id, t), n = [], l = this.document.getImages(), 
                s = 0, a = l.length; a > s; s++) o = l[s], r = o.getUrl ? o.getUrl() :o, e = Draw.Export.Image.parseEid(r), 
                e && n.push(e);
                return i = new Draw.Element({
                    organization:this.options.org,
                    type:"DocumentSymbol",
                    name:t.getName(),
                    images:n,
                    json:t.toJSON(!0)
                }), i.save({}, {
                    success:_.bind(this.onCreateSymbol, this, t)
                });
            }
        }, e.prototype.onCreateSymbol = function(t, e, i) {
            return this.options.userElements && this.options.userElements.add(e), i = i.results, 
            i.eid !== t.getId() && t.setId(i.eid, {
                init:!0
            }), Draw.Storage.create(i.eid, t.toJSON(!0), function() {
                var e;
                return e = new Draw.ThumbSaver({
                    document:t,
                    eid:t.id
                }), e.save();
            }, function() {
                var t;
                return t = _.toArray(arguments), Err.notify({
                    message:"Failed to create symbol doc"
                }, "SymbolManager", "onCreateSymbol", {
                    eid:i.eid,
                    arguments:JSON.stringify(t)
                });
            });
        }, e;
    }(), _.extend(Draw.SymbolManager.prototype, Backbone.Events);
}.call(this), function() {
    var t, e, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    }, o = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    Draw.InvisibleLayer = function(e) {
        function i() {
            return t = i.__super__.constructor.apply(this, arguments);
        }
        return n(i, e), i.prototype.initialize = function() {
            return this._project = paper.project, paper.Group.prototype.initialize.apply(this, arguments);
        }, i;
    }(paper.Group), Draw.Symbol = function(t) {
        function i() {
            return this.fireChange = o(this.fireChange, this), e = i.__super__.constructor.apply(this, arguments);
        }
        return n(i, t), mixin(i, Draw.DocumentBase), i.prototype._module = "Symbol", i._module = "Symbol", 
        i.prototype.initialize = function(t, e) {
            var n;
            return this._initializing = !0, n = {
                watchedProperties:Draw.Symbol.WATCHED_PROPERTIES,
                updateDelay:50,
                addToActiveLayer:!1,
                id:null,
                autoAdd:!0,
                internal:!1
            }, i.__super__.initialize.call(this, t, _.extend(n, e)), this.placed = {}, this.setId(this.options.id || _.uuid()), 
            this.cid = _.uniqueId("c"), this.changeDelay = new Debouncer(this.options.updateDelay, this.fireChange), 
            this.bind("change:object", this.onChangeObject), this._parentLayer = new Draw.InvisibleLayer(), 
            this._parentLayer.addChild(this), this.options.autoAdd && Draw.G && Draw.G.symbols && Draw.G.symbols.add(this), 
            this.originalPosition = this.getPosition(), this.setPosition(new paper.Point(0, 0)), 
            this.initializeStateChangeEvents(), this._internal = this.options.internal, this._watchForChanges = !0, 
            this._initializing = !1;
        }, i.prototype.instantiate = function() {
            var t;
            return t = null, this.children && 1 === this.children.length ? t = this.children[0].clone() :this.children && (t = new Draw.PlacedElement(this.children)), 
            t;
        }, i.prototype.watchForChanges = function(t) {
            return this._watchForChanges = t;
        }, i.prototype.addToDocument = function() {
            return null;
        }, i.prototype.getRootLayer = function() {
            return this._parentLayer;
        }, i.prototype.getLength = function() {
            return _.size(this.placed);
        }, i.prototype.fireChange = function() {
            return this.trigger("change:placed", this);
        }, i.prototype.placeDomElement = function() {}, i.prototype.insertedInto = function() {}, 
        i.prototype.statusNotify = function() {
            return print.apply(window, arguments);
        }, i.prototype.clone = function() {
            var t;
            return t = new Draw.Symbol(this.cloneItems(this.children, !0), {
                watchedProperties:this.getWatchedProperties()
            }), t.setName(this.getName() + " copy"), t;
        }, i.prototype.generateName = function() {
            var t;
            if (1 === this.children.length && this.children[0].el) {
                if (t = this.children[0], t.el.is("a") && t.get("fill_color") || t.el.is('button, input[type="submit"]')) return "Button";
                if (t.el.is("h1, h2, h3, h4, h5, h6")) return "Heading";
                if (t.el.is("p")) return "Body Text";
                if (t.el.is("input, textarea")) return "Input";
                if (t.el.is("select")) return "Dropdown";
            }
            return "Element";
        }, i.prototype.supportedProperties = function() {
            return i.__super__.supportedProperties.call(this).concat([ "id" ]);
        }, i.prototype.getId = function() {
            return this.get("id");
        }, i.prototype.setId = function(t, e) {
            return pds(this, "changing symbol id from", this.id, "to", t), this._id = t, this.set("id", t, e);
        }, i.prototype._setId = function(t, e) {
            var i, n, o;
            pds(this, "setting id to", t, "replacing ids for", _.size(this.placed), "placed syms"), 
            o = this.placed;
            for (i in o) n = o[i], n.setSymbolId(t, e);
            return t;
        }, i.prototype.getIsInternal = function() {
            return !!this._internal;
        }, i.prototype.setIsInternal = function(t) {
            return this._internal = !!t;
        }, i.prototype.hitTest = function() {
            return null;
        }, i.prototype.getVisible = function() {
            return !1;
        }, i.prototype.getCurrentStyle = function() {
            return {};
        }, i.prototype._needsRedraw = function() {
            return !1;
        }, i.prototype._updateSelection = function() {}, i.prototype.getSelectionMode = function() {
            return Draw.SELECTION_MODE_BOUNDS;
        }, i.prototype.toJSON = function(t) {
            var e, n;
            return e = i.__super__.toJSON.call(this), _.extend(e, {
                t:"symbol",
                id:this.id,
                n:this.getName(),
                props:this.getWatchedProperties()
            }), t && (n = _.clone(Draw.Document.DEFAULT_JSON), n.background_color = null, n.sz = this.getSize().toJSON(), 
            n.document = [ e ], e = n), e;
        }, i.prototype.isPlaced = function(t) {
            return !!this.placed[t._id];
        }, i.prototype.triggerPlaceEvent = function(t) {
            return this.trigger("symbol:place", this, t);
        }, i.prototype.place = function(t) {
            return t ? (this.placed[t._id] = t, this.triggerPlaceEvent(t)) :void 0;
        }, i.prototype.removePlacedSymbol = function(t) {
            return this.placed[t._id] && delete this.placed[t._id], this.trigger("symbol:remove", this, t);
        }, i.prototype.getImagableBounds = function() {
            return Draw.EventedGroup.prototype.getDrawableBounds.call(this);
        }, i.prototype.getWatchedProperties = function() {
            return this.options.watchedProperties;
        }, i.prototype.toString = function() {
            var t, e, i, n, o, r, s, a, l;
            r = "Links:\n", l = this.links;
            for (i in l) for (n = l[i], r += "  " + i + ":\n", s = 0, a = n.length; a > s; s++) {
                t = n[s];
                for (e in t) o = t[e], r += "    " + o + "\n";
                r += "    --\n";
            }
            return r;
        }, i.fromJSON = function(t, e) {
            var i, n, o;
            return _.isString(t) || !t ? null :t.document && (i = t, t = t.document[0], !t) ? (pds(Draw.Symbol, "Symbol has no children!!", i), 
            null) :(n = paper.Item.childrenFromJSON(t), o = new Draw.Symbol(n, _.extend(e || {}, {
                watchedProperties:t.props,
                id:t.id
            })));
        }, i.create = function(t, e) {
            var i, n;
            if (t && (e = e || {}, i = Draw.Item.sortAsc(t, !1), 0 !== _.size(i))) return n = new Draw.Symbol(i, e);
        }, i.WATCHED_PROPERTIES = [ "fill_color", "fill_color:stop", "fill_color:origin", "fill_color:destination", "fill_color:position", "stroke_color", "stroke_color:stop", "stroke_color:origin", "stroke_color:destination", "stroke_color:position", "stroke_width", "font_face", "font_size", "font_weight", "line_height", "alignment", "border_top_left_radius", "border_top_right_radius", "border_bottom_left_radius", "border_bottom_right_radius" ], 
        i;
    }(Draw.EventedGroup), Draw.Symbol.WATCHED_PROPERTIES.sort();
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.TextCursorModel = function(i) {
        function o() {
            return this.down = e(this.down, this), this.up = e(this.up, this), this.left = e(this.left, this), 
            this.right = e(this.right, this), this.end = e(this.end, this), this.home = e(this.home, this), 
            this.getPosition = e(this.getPosition, this), this.setPosition = e(this.setPosition, this), 
            this.getPath = e(this.getPath, this), this.setPath = e(this.setPath, this), this.initialize = e(this.initialize, this), 
            t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.SUPPORTED_FUNCTIONS = [ "home", "end", "up", "down", "left", "right" ], 
        o.prototype.initialize = function() {
            return this.set({
                path:null,
                position:0
            }), this.selectionAnchor = null;
        }, o.prototype.setPath = function(t, e) {
            var i;
            return e = e || {}, i = this.getPath(), i && (!t && "focus" !== e.type || t && t._id !== i._id) && i.setSelection(null), 
            i && i.finishEditing && i.finishEditing(), this.set({
                path:t
            }), t && t.beginEditing ? t.beginEditing() :void 0;
        }, o.prototype.getPath = function() {
            return this.get("path");
        }, o.prototype.setPosition = function(t, e) {
            var i;
            return i = this.getPath(), i && i.colAndRowToIndex ? (t = i.colAndRowToIndex(t), 
            e ? (null === this.selectionAnchor && (this.selectionAnchor = this.getPosition()), 
            i.setSelection(this.selectionAnchor, t)) :(this.selectionAnchor = null, i.setSelection(null)), 
            i.setCursorPosition(t), this.set({
                position:t
            })) :void 0;
        }, o.prototype.getPosition = function() {
            return this.get("position");
        }, o.prototype.home = function(t) {
            var e, i;
            return e = this.getPath(), e ? (i = e.indexToColAndRow(this.getPosition()), i.x = 0, 
            this.setPosition(i, t)) :void 0;
        }, o.prototype.end = function(t) {
            var e, i;
            return e = this.getPath(), e ? (i = e.indexToColAndRow(this.getPosition()), i.x = 9e4, 
            this.setPosition(i, t)) :void 0;
        }, o.prototype.right = function(t, e) {
            var i, n;
            return i = this.getPath(), i ? (n = this.getPosition() + 1, e && (n = i.getNextBlockIndex(this.getPosition(), " \n", !0)), 
            this.setPosition(n, t)) :void 0;
        }, o.prototype.left = function(t, e) {
            var i, n;
            return i = this.getPath(), i ? (n = this.getPosition() - 1, e && (n = i.getPreviousBlockIndex(this.getPosition(), " \n", !0)), 
            this.setPosition(n, t)) :void 0;
        }, o.prototype.up = function(t) {
            var e, i;
            return e = this.getPath(), e ? (i = e.indexToColAndRow(this.getPosition()), i.y--, 
            this.setPosition(i, t)) :void 0;
        }, o.prototype.down = function(t) {
            var e, i;
            return e = this.getPath(), e ? (i = e.indexToColAndRow(this.getPosition()), i.y++, 
            this.setPosition(i, t)) :void 0;
        }, o;
    }(Backbone.Model);
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, e = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.ThumbSaver = function() {
        function i(e) {
            this.onThumbRequestSuccess = t(this.onThumbRequestSuccess, this), this.save = t(this.save, this), 
            this.updateAutoSave = t(this.updateAutoSave, this);
            var i;
            i = {
                delay:3e3,
                document:null,
                url:"/api/v1/images",
                saveOnInit:!1
            }, this.options = _.extend(i, e), this.document = this.options.document, this.options.url = this.options.url, 
            this.delay = new Debouncer(this.options.delay, this.save);
        }
        return i.prototype.bindToEvents = function() {
            var t = this;
            return this.document ? (this.document.bind("change:state", this.updateAutoSave), 
            this.document.bind("export:thumbnail", function() {
                return t.save();
            })) :void 0;
        }, i.prototype.updateAutoSave = function(t, i, n, o) {
            return e.call(o, "thumbnail_url") >= 0 ? void 0 :window.TESTING ? this.save() :this.delay.update();
        }, i.prototype.save = function() {
            return pds(this, "Requesting thumb for", this.document), $.ajax({
                url:this.options.url,
                type:"POST",
                dataType:"json",
                success:this.onThumbRequestSuccess,
                data:{
                    document:this.document.id,
                    thumbnail:!0
                }
            });
        }, i.prototype.onThumbRequestSuccess = function() {
            var t, e, i, n, o = this;
            if (!this.fetching) return e = new Easel.Document({
                eid:this.document.id,
                thumbnail_url:this.document.get("thumbnail_url")
            }), this.fetching = !0, i = function() {
                return pds(o, "fetching doc for new thumb", e), e.fetch({
                    cache:!1,
                    success:function(e, i) {
                        return i.results.thumbnail_url !== o.document.get("thumbnail_url") ? t(e, i.results.thumbnail_url) :void 0;
                    }
                });
            }, window.TESTING || n || (n = setInterval(i, 3e3)), t = function(t, e) {
                return pds(o, "thumb changed", e, o.document.get("thumbnail_url")), e && e !== o.document.get("thumbnail_url") ? (clearInterval(n), 
                n = null, o.fetching = !1, pds(o, "setting thumb to", e, o.document), o.document.set({
                    thumbnail_url:e
                })) :void 0;
            };
        }, i;
    }();
}.call(this), function() {
    var t, e, i, n = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, o = {}.hasOwnProperty, r = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var n in e) o.call(e, n) && (t[n] = e[n]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.CanvasLayer = function(e) {
        function i() {
            return this.draw = n(this.draw, this), this.getRect = n(this.getRect, this), this.getCanvas = n(this.getCanvas, this), 
            this.createHelperCanvas = n(this.createHelperCanvas, this), t = i.__super__.constructor.apply(this, arguments);
        }
        return r(i, e), i.prototype.initialize = function(t, e, n) {
            var o;
            return o = {
                onDraw:function() {}
            }, this.options = _.extend({}, o, n), this.document = t, e && e.length ? i.__super__.initialize.call(this, e) :i.__super__.initialize.call(this), 
            this._canvas = this.createHelperCanvas(), this.context = this._canvas.context;
        }, i.prototype.createHelperCanvas = function() {
            return new Draw.HelperCanvas();
        }, i.prototype.clear = function(t) {
            return this._canvas.clear(t);
        }, i.prototype.getCanvas = function() {
            return this._canvas.getCanvas();
        }, i.prototype.getRect = function(t) {
            var e;
            return e = null, t.renderModel && (e = t.renderModel.getRectangle()), e && t && t.matrix && (e = new Draw.IntRectangle(t.matrix.transform(e.topLeft), t.matrix.transform(e.bottomRight))), 
            e;
        }, i.prototype.draw = function(t, e) {
            var n, o, r;
            return this._canvas._redrawNeeded ? (n = this._canvas.context, r = this._canvas._viewSize, 
            o = this.getRect(e), o = this._canvas.clear(o), o && window.SHOWRECT && e.layer === Draw.LAYER_USER && (this._canvas.context.save(), 
            this._canvas.context.strokeStyle = "green", this._canvas.context.lineWidth = 1, 
            this._canvas.context.strokeRect(parseInt(o.x) + .5, parseInt(o.y) + .5, parseInt(o.width) - 1, parseInt(o.height) - 1), 
            this._canvas.context.restore()), this.options.onDraw && this.options.onDraw(n, e), 
            o && (n.save(), n.beginPath(), n.rect(o.x, o.y, o.width, o.height), n.clip()), i.__super__.draw.call(this, n, e), 
            o ? n.restore() :void 0) :!1;
        }, i;
    }(paper.Layer), Draw.ToolLayer = function(t) {
        function i() {
            return this.draw = n(this.draw, this), this.drawItem = n(this.drawItem, this), this.injectMatrix = n(this.injectMatrix, this), 
            this.hitTest = n(this.hitTest, this), this.resetMatrix = n(this.resetMatrix, this), 
            e = i.__super__.constructor.apply(this, arguments);
        }
        return r(i, t), i.prototype.NAME = Draw.LAYER_TOOL, i.prototype.initialize = function(t, e, n) {
            return i.__super__.initialize.call(this, t, e, n), this.document ? (this.document.bind("change:zoom", this.resetMatrix), 
            this.resetMatrix()) :void 0;
        }, i.prototype.getMatrix = function() {
            return this._matrix;
        }, i.prototype.resetMatrix = function() {
            return this._matrix = new paper.Matrix().scale(this.document.get("zoom") / 100), 
            this._inverse = this._matrix.createInverse();
        }, i.prototype.hitTest = function(t, e, n) {
            return this._matrix && (t = this._matrix.transform(t)), i.__super__.hitTest.call(this, t, _.extend({}, e, {
                point:t
            }), n);
        }, i.prototype.injectMatrix = function(t) {
            return t = t || {}, t.matrix || (t.matrix = this._matrix), t;
        }, i.prototype.drawItem = function(t, e) {
            var i, n;
            return e = this.injectMatrix(e), i = this._canvas.context, n = this.getRect(e), 
            n && (i.save(), i.beginPath(), i.rect(n.x, n.y, n.width, n.height), i.clip()), t.draw(i, e), 
            n ? i.restore() :void 0;
        }, i.prototype.draw = function(t, e) {
            return e = this.injectMatrix(e), i.__super__.draw.call(this, t, e);
        }, i;
    }(Draw.CanvasLayer), Draw.BottomToolLayer = function(t) {
        function e() {
            return this.createHelperCanvas = n(this.createHelperCanvas, this), i = e.__super__.constructor.apply(this, arguments);
        }
        return r(e, t), e.prototype.NAME = Draw.LAYER_TOOL_BOTTOM, e.prototype._reorderCanvas = function(t, e) {
            return t = t || this._canvas._canvas, $(t).css("z-index", e);
        }, e.prototype.moveAbove = function(t) {
            return this._reorderCanvas(t, 102);
        }, e.prototype.moveBelow = function(t) {
            return this._reorderCanvas(t, 99);
        }, e.prototype.createHelperCanvas = function() {
            var t;
            return t = new Draw.HelperCanvas(), this.moveAbove(t._canvas), t;
        }, e;
    }(Draw.ToolLayer);
}.call(this), function() {
    var t = {}.hasOwnProperty, e = function(e, i) {
        function n() {
            this.constructor = e;
        }
        for (var o in i) t.call(i, o) && (e[o] = i[o]);
        return n.prototype = i.prototype, e.prototype = new n(), e.__super__ = i.prototype, 
        e;
    };
    Draw.UndoBatch = function() {
        function t(t) {
            var e;
            e = {}, this.options = _.extend(e, t), this.batch = [], this.id = _.uniqueId("batch-");
        }
        return t.prototype.getLength = function() {
            return this.batch.length;
        }, t.prototype.isNoop = function() {
            var t, e, i, n;
            for (n = this.batch, e = 0, i = n.length; i > e; e++) if (t = n[e], !this._isNoop(t)) return !1;
            return !0;
        }, t.prototype.add = function(t) {
            return this._add(t, !1);
        }, t.prototype.prepend = function(t) {
            return this._add(t, !0);
        }, t.prototype.undo = function() {
            var t, e, i, n;
            if (this.batch.length) {
                for (n = [], t = e = i = this.batch.length - 1; 0 >= i ? 0 >= e :e >= 0; t = 0 >= i ? ++e :--e) n.push(this.batch[t].undo());
                return n;
            }
        }, t.prototype.execute = function() {
            var t, e, i, n;
            for (n = this.batch, e = 0, i = n.length; i > e; e++) t = n[e], t.execute();
            return this;
        }, t.prototype.redo = function() {
            var t, e, i, n, o;
            for (n = this.batch, o = [], e = 0, i = n.length; i > e; e++) t = n[e], o.push(t.redo());
            return o;
        }, t.prototype._isNoop = function(t) {
            return t.isNoop ? t.isNoop() :!1;
        }, t.prototype._add = function(t, e) {
            var i, n, o, r;
            if (!t.isHandled()) {
                if (t.isCollapsable() && this.batch.length) for (i = o = r = this.batch.length - 1; 0 >= r ? 0 >= o :o >= 0; i = 0 >= r ? ++o :--o) if (n = this.batch[i], 
                n.isCollapsable() && t.canCollapseWith(n)) {
                    this.batch = _.without(this.batch, n);
                    break;
                }
                return t.handle(), e ? this.batch = [ t ].concat(this.batch) :this.batch.push(t), 
                t.batch = this, this.trigger("add", this, t);
            }
        }, t;
    }(), _.extend(Draw.UndoBatch.prototype, Backbone.Events), Draw.OperationBatch = function(t) {
        function i(t) {
            var e;
            e = {
                ops:[]
            }, i.__super__.constructor.call(this, _.extend(e, t)), this.initialize(this.options.ops);
        }
        return e(i, t), i.prototype.initialize = function(t) {
            var e, i, n, o;
            for (o = [], i = 0, n = t.length; n > i; i++) e = t[i], o.push(this.add(new Draw.UndoOperation({
                transformer:this.options.transformer,
                operation:e
            })));
            return o;
        }, i.prototype.getOperations = function() {
            var t, e, i, n, o;
            for (n = this.batch, o = [], e = 0, i = n.length; i > e; e++) t = n[e], this._isNoop(t) || o.push(t.operation);
            return o;
        }, i;
    }(Draw.UndoBatch);
}.call(this), function() {
    var t = {}.hasOwnProperty, e = function(e, i) {
        function n() {
            this.constructor = e;
        }
        for (var o in i) t.call(i, o) && (e[o] = i[o]);
        return n.prototype = i.prototype, e.prototype = new n(), e.__super__ = i.prototype, 
        e;
    }, i = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.AddObjectCommand = function(t) {
        function n(t) {
            var e;
            e = {
                object:null,
                parent:null,
                index:null
            }, n.__super__.constructor.call(this, _.extend(e, t)), this.options.object && this.options.useCurrentParent && (this.options.parent = this.options.object.parent);
        }
        return e(n, t), n.prototype.toString = function() {
            return "AddObject:" + this.options.object + " to " + this.options.parent;
        }, n.prototype.setInitialState = function(t) {
            return n.__super__.setInitialState.call(this, t), this.options.useCurrentParent && (this.options.parent = t.parent), 
            i.call(t.supportedProperties(), "snapped") >= 0 ? (this.snappedCommand = new Draw.SnapObjectCommand({
                assumeInitiallyRemoved:!0
            }), this.snappedCommand.setInitialState(t)) :void 0;
        }, n.prototype.setEndState = function(t) {
            return this.snappedCommand ? this.snappedCommand.setEndState(t) :void 0;
        }, n.prototype.unexecute = function() {
            return this.snappedCommand && !this.snappedCommand.isNoop() ? this.snappedCommand.unexecute() :this.options.object.remove(), 
            this;
        }, n.prototype.execute = function() {
            return this.snappedCommand && !this.snappedCommand.isNoop() ? this.snappedCommand.execute() :(null != this.options.index ? this.options.parent.insertChild(this.options.index, this.options.object) :this.options.parent.addChild(this.options.object), 
            this.options.object.place && this.options.object.place()), this;
        }, n;
    }(Draw.UndoCommand);
}.call(this), function() {
    var t, e, i, n = {}.hasOwnProperty, o = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var o in e) n.call(e, o) && (t[o] = e[o]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    t = function() {
        function t(t) {
            this.object = t, this.parent = t.getParent(), this.index = this.parent.findChildIndex(t);
        }
        return t;
    }(), Draw.GroupUngroupCommand = function(t) {
        function e(t) {
            var i;
            i = {
                object:null
            }, e.__super__.constructor.call(this, _.extend(i, t));
        }
        return o(e, t), e.prototype.setInitialState = function(t) {
            return e.__super__.setInitialState.call(this, t), this.options.children = _.toArray(t.children);
        }, e.prototype.select = function(t, e) {
            var i, n, o, r, s, a, l;
            for (n = this.options.document.selectionModel, o = 0, s = t.length; s > o; o++) i = t[o], 
            n.addToSelected(i);
            for (l = [], r = 0, a = e.length; a > r; r++) i = e[r], l.push(n.removeFromSelected(i));
            return l;
        }, e.prototype.clearSelected = function() {
            var t;
            return t = this.options.document.selectionModel, t.clearSelected();
        }, e.prototype.ungroup = function() {
            return this.options.children = this.options.object.ungroup(), this.select(this.options.children, [ this.options.object ]), 
            this;
        }, e.prototype.regroup = function() {
            return this.options.object.regroup(), this.clearSelected(), this.select([ this.options.object ], this.options.children), 
            this;
        }, e;
    }(Draw.UndoCommand), Draw.GroupCommand = function(i) {
        function n() {
            return e = n.__super__.constructor.apply(this, arguments);
        }
        return o(n, i), n.prototype.toString = function() {
            return "Group:" + this.options.object;
        }, n.prototype.setInitialState = function(e) {
            var i, n;
            return this.options.object = null, this.options.children = e, i = function() {
                var e, i, o, r;
                for (o = this.options.children, r = [], e = 0, i = o.length; i > e; e++) n = o[e], 
                r.push(new t(n));
                return r;
            }.call(this), this.options.childrenCache = i;
        }, n.prototype.redistributeChildren = function() {
            var t, e, i, n, o;
            for (n = this.options.childrenCache, o = [], e = 0, i = n.length; i > e; e++) t = n[e], 
            o.push(t.parent.insertChild(t.index, t.object));
            return o;
        }, n.prototype.unexecute = function() {
            return this.ungroup(), this.redistributeChildren();
        }, n.prototype.execute = function() {
            return this.options.object || (this.options.object = new Draw.EventedGroup(this.options.children)), 
            this.regroup();
        }, n;
    }(Draw.GroupUngroupCommand), Draw.UngroupCommand = function(t) {
        function e() {
            return i = e.__super__.constructor.apply(this, arguments);
        }
        return o(e, t), e.prototype.toString = function() {
            return "Ungroup:" + this.options.object;
        }, e.prototype.setInitialState = function(t) {
            return e.__super__.setInitialState.call(this, t), this.options.children = _.toArray(t.getOldChildren());
        }, e.prototype.unexecute = function() {
            return this.regroup();
        }, e.prototype.execute = function() {
            return this.ungroup();
        }, e;
    }(Draw.GroupUngroupCommand);
}.call(this), function() {
    var t = {}.hasOwnProperty, e = function(e, i) {
        function n() {
            this.constructor = e;
        }
        for (var o in i) t.call(i, o) && (e[o] = i[o]);
        return n.prototype = i.prototype, e.prototype = new n(), e.__super__ = i.prototype, 
        e;
    };
    Draw.MoveHierarchyCommand = function(t) {
        function i(t) {
            var e;
            e = {
                object:null
            }, i.__super__.constructor.call(this, _.extend(e, t));
        }
        return e(i, t), i.prototype.toString = function() {
            return "MoveHierarchy:" + this.options.object + " " + this.options.fromIndex + " on " + this.options.fromParent + " to " + this.options.toIndex + " on " + this.options.toParent;
        }, i.prototype.setInitialState = function(t) {
            return i.__super__.setInitialState.call(this, t), this.options.fromParent = t.getParent(), 
            this.options.fromIndex = this.options.fromParent.findChildIndex(t), this;
        }, i.prototype.setEndState = function(t) {
            return i.__super__.setEndState.call(this, t), this.options.toParent = t.getParent(), 
            this.options.toIndex = this.options.toParent.findChildIndex(t), this;
        }, i.prototype.move = function(t, e) {
            return e.insertChild(t, this.options.object);
        }, i.prototype.unexecute = function() {
            return this.move(this.options.fromIndex, this.options.fromParent), this;
        }, i.prototype.execute = function() {
            return this.move(this.options.toIndex, this.options.toParent), this;
        }, i;
    }(Draw.UndoCommand);
}.call(this), function() {
    var t = {}.hasOwnProperty, e = function(e, i) {
        function n() {
            this.constructor = e;
        }
        for (var o in i) t.call(i, o) && (e[o] = i[o]);
        return n.prototype = i.prototype, e.prototype = new n(), e.__super__ = i.prototype, 
        e;
    };
    Draw.UndoOperation = function(t) {
        function i(t) {
            var e;
            e = {
                transformer:null,
                operation:null,
                object:null
            }, i.__super__.constructor.call(this, _.extend(e, t)), this.transformer = t.transformer, 
            this.setupOperation(this.options.operation);
        }
        return e(i, t), i.prototype.toString = function() {
            var t, e, i, n;
            return n = "Op:", i = this.operation, "li" in i || "ld" in i ? (t = "li" in i && "li" || "ld", 
            n += "" + ("li" === t && "ins" || "del") + ":", e = i[t], n += "[" + (e instanceof paper.Item && e + "" || "json") + "] ") :n += "edit ", 
            n += JSON.stringify(i);
        }, i.prototype.setupOperation = function(t) {
            return this.operation = t;
        }, i.prototype.getObject = function() {
            return this.options.object;
        }, i.prototype.setOperation = function(t) {
            return this.operation = t;
        }, i.prototype.getOperation = function() {
            return _.clone(this.operation);
        }, i.prototype.isNoop = function() {
            var t;
            return t = this.operation, "li" in t && "ld" in t && _.isEqual(t.li, t.ld) ? !0 :"oi" in t && "od" in t && _.isEqual(t.oi, t.od) ? !0 :!1;
        }, i.prototype.isCollapsable = function() {
            return !0;
        }, i.prototype.canCollapseWith = function(t) {
            var e;
            return t.operation ? (e = t.operation, "oi" in e && "oi" in this.operation && _.isEqual(e.p, this.operation.p) ? (this.operation.od = e.od, 
            !0) :!1) :!1;
        }, i.prototype.unexecute = function() {
            var t, e;
            return t = _.clone(this.operation), "li" in t ? (t.ld = t.li, delete t.li) :"ld" in t ? (t.li = t.ld, 
            delete t.ld) :"oi" in t && (e = [ t.od, t.oi ], t.oi = e[0], t.od = e[1]), this.transformer.fromTransform([ t ], !0);
        }, i.prototype.execute = function() {
            return this.transformer.fromTransform([ this.operation ], !0);
        }, i;
    }(Draw.UndoCommand);
}.call(this), function() {
    var t = {}.hasOwnProperty, e = function(e, i) {
        function n() {
            this.constructor = e;
        }
        for (var o in i) t.call(i, o) && (e[o] = i[o]);
        return n.prototype = i.prototype, e.prototype = new n(), e.__super__ = i.prototype, 
        e;
    };
    Draw.RemoveObjectCommand = function(t) {
        function i(t) {
            var e;
            e = {
                object:null,
                parent:null
            }, i.__super__.constructor.call(this, _.extend(e, t));
        }
        return e(i, t), i.prototype.toString = function() {
            return "RemoveObject:" + this.options.object + " from " + this.options.parent + " at index " + this.options.index;
        }, i.prototype.setInitialState = function(t) {
            return i.__super__.setInitialState.call(this, t), this.options.useCurrentParent && (this.options.parent = t.parent), 
            t.get("snapped") ? (this.snappedCommand = new Draw.SnapObjectCommand(), this.snappedCommand.setInitialState(t)) :void 0;
        }, i.prototype.setEndState = function(t) {
            return this.snappedCommand ? this.snappedCommand.setEndState(t) :void 0;
        }, i.prototype.unexecute = function() {
            return this.snappedCommand ? this.snappedCommand.unexecute() :(this.options.parent.insertChild(this.options.index, this.options.object), 
            this.options.object.place && this.options.object.place()), this;
        }, i.prototype.execute = function() {
            return this.snappedCommand && this.snappedCommand.end ? this.snappedCommand.execute() :(this.options.index = this.options.parent.findChildIndex(this.options.object), 
            this.options.object.remove()), this;
        }, i;
    }(Draw.UndoCommand);
}.call(this), function() {
    var t = {}.hasOwnProperty, e = function(e, i) {
        function n() {
            this.constructor = e;
        }
        for (var o in i) t.call(i, o) && (e[o] = i[o]);
        return n.prototype = i.prototype, e.prototype = new n(), e.__super__ = i.prototype, 
        e;
    }, i = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.SetPropertyCommand = function(t) {
        function n(t) {
            var e;
            e = {
                property:"someprop",
                args:[],
                object:null,
                from:null,
                to:null
            }, n.__super__.constructor.call(this, _.extend(e, t));
        }
        return e(n, t), n.prototype.toString = function() {
            return "Set " + this.options.property + ":" + this.options.object + ": " + Draw.stringify(this.options.from) + " to " + Draw.stringify(this.options.to);
        }, n.prototype.isNoop = function() {
            return _.isEqual(this.options.to, this.options.from);
        }, n.prototype.isSupportedProperty = function(t) {
            var e;
            return t.supportedProperties && (e = this.options.property, i.call(t.supportedProperties(), e) >= 0);
        }, n.prototype.getProperty = function(t) {
            var e, i;
            return t ? t.get && this.isSupportedProperty(t) ? t.get(this.options.property) :(i = t[_.camelize("get_" + this.options.property)]) ? i.call(t) :(e = {
                message:"Object doesnt have a get function!",
                stack:"SetPropertyCommand::getProperty"
            }, Err.notify(e, "SetPropertyCommand", "getProperty", {
                property:this.options.property,
                from:this.options.from + "",
                object:(t.TYPE || t._module || t) + ""
            }), null) :null;
        }, n.prototype.setProperty = function(t, e) {
            var i, n, o;
            return t ? (o = this, n = function(t) {
                var e;
                return e = [ t ], o.options.args && o.options.args.length && (e = e.concat(o.options.args)), 
                e;
            }, t.set && this.isSupportedProperty(t) ? (i = {}, i[this.options.property] = e, 
            t.set.apply(t, n(i))) :t ? t[_.camelize("set_" + this.options.property)].apply(t, n(e)) :void 0) :null;
        }, n.prototype.clone = function(t) {
            return t && _.isFunction(t.clone) ? t.clone() :t;
        }, n.prototype.isCollapsable = function() {
            return !0;
        }, n.prototype.canCollapseWith = function(t) {
            return t.options.property !== this.options.property ? !1 :_.isEqual(t.options.object, this.options.object) ? (this.options.from = t.options.from, 
            !0) :!1;
        }, n.prototype.setInitialState = function(t, e) {
            var i;
            return null == e && (e = {}), n.__super__.setInitialState.call(this, t), i = "value" in e ? e.value :this.getProperty(t), 
            this.options.from = this.clone(i);
        }, n.prototype.setEndState = function(t, e) {
            var i;
            return null == e && (e = {}), n.__super__.setEndState.call(this, t), i = "value" in e ? e.value :this.getProperty(t), 
            this.options.to = this.clone(i);
        }, n.prototype.unexecute = function() {
            return this.setProperty(this.options.object, this.options.from), this;
        }, n.prototype.execute = function() {
            return this.setProperty(this.options.object, this.options.to), this;
        }, n;
    }(Draw.UndoCommand);
}.call(this), function() {
    var t = {}.hasOwnProperty, e = function(e, i) {
        function n() {
            this.constructor = e;
        }
        for (var o in i) t.call(i, o) && (e[o] = i[o]);
        return n.prototype = i.prototype, e.prototype = new n(), e.__super__ = i.prototype, 
        e;
    };
    Draw.SnapObjectCommand = function(t) {
        function i(t) {
            var e;
            e = {
                object:null,
                parent:null,
                index:null,
                assumeInitiallyRemoved:!1
            }, i.__super__.constructor.call(this, _.extend(e, t));
        }
        return e(i, t), i.prototype.toString = function() {
            return "SnapObject:" + this.options.object + " to " + this.options.object.parent;
        }, i.prototype.setInitialState = function(t, e) {
            return null == e && (e = {}), i.__super__.setInitialState.call(this, t), this.initial = this._extractState(t, e.assumeRemoved || this.options.assumeInitiallyRemoved);
        }, i.prototype.setEndState = function(t, e) {
            return null == e && (e = {}), this.end = this._extractState(t, e.assumeRemoved);
        }, i.prototype.isNoop = function() {
            return this.initial && this.end ? this.initial.snapped !== this.end.snapped ? !1 :this.initial.snapped ? this.initial.removed !== this.end.removed ? !1 :this.initial.parent.id !== this.end.parent.id ? !1 :this.initial.index !== this.end.index ? !1 :this.initial.referenceNode[0].id !== this.end.referenceNode[0].id ? !1 :this.initial.insertType !== this.end.insertType ? !1 :!0 :!0 :!0;
        }, i.prototype.unexecute = function() {
            return this._moveToState(this.end, this.initial), this;
        }, i.prototype.execute = function() {
            return this._moveToState(this.initial, this.end), this;
        }, i.prototype._moveToState = function(t, e) {
            var i, n, o, r, s;
            if (!this.isNoop()) {
                if (n = this.options.object, o = t.parent && e.parent && t.parent.id === e.parent.id, 
                i = t.index === e.index, r = t.removed === e.removed, s = function(t, e) {
                    return e.parent.snapInChild ? e.parent.snapInChild(t, e.referenceNode, e.insertType) :t.set("snapped", !0);
                }, e.removed) return t.snapped && t.parent.releaseObject(n), n.remove();
                if (t.snapped && e.snapped) return t.parent && !o && t.parent.releaseObject(n), 
                o && i && r && n.parent || e.parent.insertChild(e.index, n), s(n, e);
                if (t.snapped && !e.snapped) {
                    if (t.parent.releaseObject(n), e.parent.insertChild(e.index, n), n.setPosition(e.position), 
                    n.setSize) return n.setSize(e.size);
                } else if (!t.snapped && e.snapped) return e.parent.insertChild(e.index, n), s(n, e);
            }
        }, i.prototype._extractState = function(t, e) {
            var i, n, o, r;
            return o = {
                parent:t.parent,
                snapped:t.get("snapped")
            }, t.parent && (o.index = t.parent.findChildIndex(t)), e || !t.parent ? o.removed = !0 :o.snapped ? (r = Draw.NodePlacement.findReferenceNode(t.el), 
            n = r[0], i = r[1], o.referenceNode = n, o.insertType = i) :(o.position = t.getPosition(), 
            t.getSize && (o.size = t.getSize())), o;
        }, i;
    }(Draw.UndoCommand);
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.CreateSymbolCommand = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        return i(n, e), n.prototype.toString = function() {
            return "CreateSymbol: " + this.options.object + " placed: " + this.options.placed;
        }, n.prototype.unexecute = function() {
            var t;
            return 1 === this.options.children.length && this.options.children[0] instanceof Draw.PlacedElement || (this.options.placed.ungroup && this.options.placed.ungroup(), 
            this.redistributeChildren()), t = [], this.options.children.length && this.options.children[0].id === this.options.placed.id || (t = [ this.options.placed ]), 
            this.select(this.options.children, t), this;
        }, n.prototype.placeSymbol = function(t, e) {
            var i, n, o, r;
            return e ? (o = t[0], r = Draw.Symbol.create([ o.clone() ])) :1 === t.length ? (o = t[0], 
            n = o.clone(), n.get("snapped") && n.parent && n.parent.releaseObject && n.parent.releaseObject(n), 
            r = Draw.Symbol.create([ n ])) :(o = new Draw.PlacedElement(t, {
                clone:!1
            }), r = Draw.Symbol.create(function() {
                var t, e, n, r;
                for (n = o.children, r = [], t = 0, e = n.length; e > t; t++) i = n[t], r.push(i.clone());
                return r;
            }())), [ r, o ];
        }, n.prototype.execute = function() {
            var t, e, i, n, o, r;
            return t = 1 === this.options.children.length && this.options.children[0] instanceof Draw.PlacedElement, 
            this.options.object ? t || this.options.placed.regroup && this.options.placed.regroup() :(r = this.placeSymbol(this.options.children, t), 
            o = r[0], i = r[1], o.triggerPlaceEvent(i), this.options.placed = i, this.select([ i.getSelectable() ], []), 
            this.options.object = o), this.clearSelected(), n = function() {
                var t, i, n, o;
                for (n = this.options.children, o = [], t = 0, i = n.length; i > t; t++) e = n[t], 
                e.id !== this.options.placed.id && o.push(e);
                return o;
            }.call(this), this.select([ this.options.placed ], n), this;
        }, n;
    }(Draw.GroupCommand);
}.call(this), function() {
    var t = {}.hasOwnProperty, e = function(e, i) {
        function n() {
            this.constructor = e;
        }
        for (var o in i) t.call(i, o) && (e[o] = i[o]);
        return n.prototype = i.prototype, e.prototype = new n(), e.__super__ = i.prototype, 
        e;
    };
    Draw.MultiObjectUndoBatch = function(t) {
        function i(t) {
            var e;
            e = {
                commandClass:Draw.UndoCommand
            }, i.__super__.constructor.call(this, _.extend(e, t));
        }
        return e(i, t), i.prototype.setInitialState = function(t) {
            var e, i, n, o, r;
            for (r = [], n = 0, o = t.length; o > n; n++) i = t[n], e = new this.options.commandClass(_.extend({
                object:i
            }, this.options)), e.setInitialState(i), r.push(this.add(e));
            return r;
        }, i.prototype.setEndState = function(t) {
            var e, i, n, o;
            for (o = [], e = i = 0, n = t.length; n >= 0 ? n > i :i > n; e = n >= 0 ? ++i :--i) o.push(this.batch[e].setEndState(t[e]));
            return o;
        }, i;
    }(Draw.UndoBatch);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    }, o = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.MultiPropertyUndoBatch = function(i) {
        function r() {
            return this.onObjectChanged = e(this.onObjectChanged, this), t = r.__super__.constructor.apply(this, arguments);
        }
        return n(r, i), r.prototype.setObjects = function(t) {
            return this.objects = t, this._bindObjects(t);
        }, r.prototype.finish = function() {
            return this._unbindObjects(this.objects), this.objects = null;
        }, r.prototype.onObjectChanged = function(t, e, i, n) {
            var r;
            return null == n && (n = {}), 0 === t.indexOf("change:") ? (e = e.owner || e, r = t.split(":")[1], 
            e.supportedProperties && o.call(e.supportedProperties(), r) >= 0 && !n.undoIgnore ? this._addChange(e, r) :void 0) :void 0;
        }, r.prototype._bindObjects = function(t) {
            var e, i, n, o;
            if (t) {
                for (o = [], i = 0, n = t.length; n > i; i++) e = t[i], e ? o.push(e.bind("all", this.onObjectChanged)) :o.push(void 0);
                return o;
            }
        }, r.prototype._unbindObjects = function(t) {
            var e, i, n, o;
            if (t) {
                for (o = [], i = 0, n = t.length; n > i; i++) e = t[i], e ? o.push(e.unbind("all", this.onObjectChanged)) :o.push(void 0);
                return o;
            }
        }, r.prototype._addChange = function(t, e) {
            var i;
            return i = new Draw.SetPropertyCommand({
                property:e
            }), i.setInitialState(t, {
                value:t.getPrevious(e)
            }), i.setEndState(t), this.add(i);
        }, r;
    }(Draw.UndoBatch);
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    Draw.Undo = function() {
        function e(e) {
            this.redo = t(this.redo, this), this.undo = t(this.undo, this), this.addOperation = t(this.addOperation, this), 
            this.addCommand = t(this.addCommand, this), this.saveCurrentBatch = t(this.saveCurrentBatch, this), 
            this.resumeWatch = t(this.resumeWatch, this), this.ignoreWatch = t(this.ignoreWatch, this);
            var i;
            i = {
                delay:300,
                document:null,
                transformer:null
            }, this.options = _.extend(i, e), this.document = this.options.document, this.transformer = this.options.transformer, 
            this.document || $.warn("NEED a valid Draw.Document"), this.document.bind("undo", this.undo), 
            this.document.bind("redo", this.redo), this.document.bind("undo:ignore", this.ignoreWatch), 
            this.document.bind("undo:resume", this.resumeWatch), this.document.bind("undo:add", this.addCommand), 
            this.transformer.bind("change:document", this.addOperation), this._watchForTransforms = !0, 
            this._watchHistory = [], this.delay = new Debouncer(this.options.delay, this.saveCurrentBatch), 
            this.currentBatch = this.createBatch(), this.stack = [], this.index = 0;
        }
        return e.prototype.watchForTransforms = function(t) {
            return this._watchForTransforms = t;
        }, e.prototype.isWatching = function() {
            return this._watchForTransforms;
        }, e.prototype.ignoreWatch = function() {
            return this._watchHistory.push(this._watchForTransforms), this._watchForTransforms = !1;
        }, e.prototype.resumeWatch = function() {
            var t;
            return t = !0, this._watchHistory.length && (t = this._watchHistory.pop()), this._watchForTransforms = t;
        }, e.prototype.createBatch = function() {
            return new Draw.UndoBatch({
                document:document
            });
        }, e.prototype.addBatch = function(t) {
            return t.getLength() && this.stack.splice(this.index, this.stack.length - this.index, t), 
            this.index = this.stack.length, this.trigger("add", t, this.index);
        }, e.prototype.saveCurrentBatch = function() {
            var t;
            return t = this.currentBatch, this.currentBatch = this.createBatch(), this.addBatch(t);
        }, e.prototype.addCommand = function(t) {
            var e;
            return e = t, t instanceof Draw.UndoCommand && (e = this.createBatch(), e.add(t)), 
            this.addBatch(e), e;
        }, e.prototype.addOperation = function(t, e, i, n) {
            return !this.isWatching() || "change:config" === e || n.childop || n.init || n.undoIgnore || !("li" in t || "ld" in t || "oi" in t && "od" in t) || (t = new Draw.UndoOperation({
                transformer:this.transformer,
                operation:t,
                object:i
            }), this.trigger("add:operation", this, this.currentBatch, t, e, i, n), t.isHandled()) ? void 0 :(this.delay.update(), 
            this.currentBatch.add(t), this.trigger("added:operation", this, this.currentBatch, t));
        }, e.prototype.undo = function() {
            var t;
            if (!(this.index < 1)) return this.index = _.clamp(this.index - 1, 0, this.stack.length), 
            t = this.stack[this.index], this.ignoreWatch(), t.undo(), this.resumeWatch(), this.trigger("undo", t, this.index);
        }, e.prototype.redo = function() {
            var t;
            if (!(this.index > this.stack.length - 1)) return t = this.stack[this.index], this.ignoreWatch(), 
            t.redo(), this.resumeWatch(), this.index = _.clamp(this.index + 1, 0, this.stack.length), 
            this.trigger("redo", t, this.index);
        }, e;
    }(), _.extend(Draw.Undo.prototype, Backbone.Events);
}.call(this), function() {
    Draw.ZoomModel = function() {
        function t(t, e) {
            1 === arguments.length ? _.isNumber(t) ? this.scale = t :t instanceof paper.Rectangle && (this.rectangle = t) :2 === arguments.length && (this.center = e, 
            this.scale = t);
        }
        return t;
    }();
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.Tool = function(i) {
        function o() {
            return this.onClickOutOfDocument = e(this.onClickOutOfDocument, this), this.onMouseMove = e(this.onMouseMove, this), 
            this.processMouseMoveHit = e(this.processMouseMoveHit, this), this.onHandleEvent = e(this.onHandleEvent, this), 
            this.paste = e(this.paste, this), this.copy = e(this.copy, this), this.cut = e(this.cut, this), 
            this.deactivate = e(this.deactivate, this), this.activate = e(this.activate, this), 
            this.isActive = e(this.isActive, this), this._hit = e(this._hit, this), this._preselectItem = e(this._preselectItem, this), 
            this.initialize = e(this.initialize, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype._module = "Tool", o.prototype.initialize = function(t) {
            return this.document = t, this.id = _.uniqueId("tool-"), o.__super__.initialize.call(this);
        }, o.prototype.toString = function() {
            return "" + this.constructor.name + "(@" + this.id + ")";
        }, o.prototype._preselectItem = function(t) {
            return t ? this.document.selectionModel.setPreselected(t) :this.document.selectionModel.clearPreselected();
        }, o.prototype._hit = function(t) {
            var e;
            return this.hitOptions ? (this._hitOptionCache || (this._hitOptionCache = _.extend({}, this.hitOptions)), 
            this._hitOptionCache.tolerance = this.hitOptions.tolerance / (this.document.getZoom() / 100), 
            this._hitOptionCache.rotateTolerance = this.hitOptions.rotateTolerance / (this.document.getZoom() / 100), 
            this._hitOptionCache.modifiers = t.modifiers, e = paper.project.hitTest(t.point, this._hitOptionCache)) :null;
        }, o.prototype.initializeDomElements = function() {}, o.prototype.directHitGroup = function(t, e) {
            var i;
            return i = _.clone(this._hitOptionCache), i.direct = !0, i.modifiers = e.modifiers, 
            t.hitTest(e.point, i);
        }, o.prototype.isActive = function() {
            return this._active;
        }, o.prototype.activate = function(t) {
            return o.__super__.activate.call(this, t) ? (this.document.clipboard.bind("copy", this.copy), 
            this.document.clipboard.bind("cut", this.cut), this.document.clipboard.bind("paste", this.paste), 
            this.trigger("activate", this), this.document.selectionModel && this.document.redraw(Draw.LAYER_TOOL, this.document.selectionModel.getSelectedBounds(null, {
                boundsType:"segment"
            })), !0) :!1;
        }, o.prototype.deactivate = function(t) {
            return o.__super__.deactivate.call(this, t) ? (this.document.clipboard.unbind("copy", this.copy), 
            this.document.clipboard.unbind("cut", this.cut), this.document.clipboard.unbind("paste", this.paste), 
            this.trigger("deactivate", this), !0) :!1;
        }, o.prototype.cut = function(t) {
            var e, i, n, o, r;
            for (this.copy(t), n = this.document.selectionModel, i = _.values(n.getSelected()), 
            o = 0, r = i.length; r > o; o++) e = i[o], e.remove();
            return n.clearSelected();
        }, o.prototype.copy = function(t) {
            var e, i, n;
            return n = this.document.selectionModel, n.getSelectedLength() > 0 ? (Draw.LocalStorage.set("import", null), 
            i = _.values(n.getSelected()), t ? t(Draw.Clipboard.TYPE_OBJECT, i) :(e = {
                message:"copy callback is falsy",
                stack:"Tool::Copy"
            }, Err.notify(e, "Tool", "Copy", {
                objects:i.length,
                callback:t
            }))) :void 0;
        }, o.prototype.getImport = function() {
            return Draw.LocalStorage.get("import", !0) || null;
        }, o.prototype.paste = function(t) {
            var e, i, n, o, r, s, a, l;
            if (o = this.getImport()) return i = Import.HTML["import"](o, this.document), this.document.translateObjectsIntoView(i), 
            this.document.selectionModel.setSelected(i), i;
            if (t || (n = {
                message:"paste data is falsy",
                stack:"Tool::Paste"
            }, Err.notify(n, "Tool", "Paste", {
                data:t + ""
            })), e = t[Draw.Clipboard.TYPE_OBJECT], e && this.document.clipboard.isCopyOriginator()) return pds(this, "pasting from objs", e), 
            this.document.duplicateObjects(e);
            if (e = t[Draw.Clipboard.TYPE_JSON_OBJECT], pds(this, "pasting from local storage", e), 
            e) {
                for (s = paper.Item.childrenFromJSON({
                    children:JSON.parse(e)
                }), this.document.selectionModel.clearSelected(), a = 0, l = s.length; l > a; a++) r = s[a], 
                r.set("snapped", !1), r.translate(new paper.Point(10, 10)), this.document.selectionModel.addToSelected(r);
                return this.document.translateObjectsIntoView(s, !0);
            }
        }, o.prototype.onHandleEvent = function(t, e, i) {
            var n;
            return n = !1, "dblclick" === t ? this.onDblClick && (this.onDblClick(new ToolEvent(this, t, i)), 
            n = !0) :n = o.__super__.onHandleEvent.call(this, t, e, i), n;
        }, o.prototype.processMouseMoveHit = function() {}, o.prototype.onMouseMove = function(t) {
            var e, i, n;
            return i = t.point, n = this.document.getSize(), i.x >= 0 && i.y >= 0 && i.x <= n.width && i.y <= n.height && t.event && t.event.target instanceof HTMLCanvasElement && (e = this._hit(t), 
            this.processMouseMoveHit(t, e)), !0;
        }, o.prototype.onClickOutOfDocument = function() {
            return this.document.selectionModel.clearSelected();
        }, o;
    }(paper.Tool), _.extend(Draw.Tool.prototype, Backbone.Events);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    }, o = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.KEY_MAP = {
        9:"tab",
        33:"pageup",
        34:"pagedown",
        96:"0",
        97:"1",
        98:"2",
        99:"3",
        100:"4",
        101:"5",
        102:"6",
        103:"7",
        104:"8",
        105:"9",
        112:"f1",
        113:"f2",
        114:"f3",
        115:"f4",
        116:"f5",
        117:"f6",
        118:"f7",
        119:"f8",
        186:";",
        187:"=",
        188:",",
        109:"-",
        173:"-",
        189:"-",
        190:".",
        191:"/",
        192:"`",
        219:"[",
        220:"\\",
        221:"]",
        222:"'"
    }, Draw.KeyboardTool = function(i) {
        function r() {
            return this.onKeyUp = e(this.onKeyUp, this), this.onKeyPress = e(this.onKeyPress, this), 
            this.onKeyDown = e(this.onKeyDown, this), this._generateKeyCombo = e(this._generateKeyCombo, this), 
            this.translateObjects = e(this.translateObjects, this), this.endUndoBatch = e(this.endUndoBatch, this), 
            this.initialize = e(this.initialize, this), t = r.__super__.constructor.apply(this, arguments);
        }
        return n(r, i), r.prototype.KEY_TRANSLATIONS = {
            up:new paper.Point(0, -1),
            down:new paper.Point(0, 1),
            left:new paper.Point(-1, 0),
            right:new paper.Point(1, 0)
        }, r.prototype.LARGE_KEY_TRANSLATIONS = {
            up:new paper.Point(0, -10),
            down:new paper.Point(0, 10),
            left:new paper.Point(-10, 0),
            right:new paper.Point(10, 0)
        }, r.prototype.ALLOW_DEFAULT_ACTIONS = [ "copy", "paste", "cut" ], r.prototype.KEYBOARD_UNDO_DELAY = 500, 
        r.prototype.initialize = function(t) {
            return this.translateDelay = new Debouncer(this.KEYBOARD_UNDO_DELAY, this.endUndoBatch), 
            r.__super__.initialize.call(this, t);
        }, r.prototype.updateUndoBatch = function(t, e) {
            return this._undobatch || (this.document.undoIgnore(), this._undoObjects = Draw.Item.sortAsc(t), 
            this._undobatch = new Draw.MultiObjectUndoBatch(e), this._undobatch.setInitialState(this._undoObjects)), 
            this.translateDelay.update();
        }, r.prototype.endUndoBatch = function() {
            return this._undobatch.setEndState(this._undoObjects), this.document.undoAdd(this._undobatch), 
            this.document.undoResume(), this._undobatch = null, this._undoObjects = null;
        }, r.prototype.translateObjects = function(t, e) {
            var i, n, o;
            this.updateUndoBatch(e, {
                property:"position",
                commandClass:Draw.SetPropertyCommand
            }), n = (t.modifiers.shift ? this.LARGE_KEY_TRANSLATIONS :this.KEY_TRANSLATIONS)[t.key];
            for (i in e) o = e[i], o.get("is_locked") || o.translate(n);
            return this.trigger("translated", this, n, e);
        }, r.prototype.getKey = function(t) {
            var e, i, n;
            return i = t.event, e = i.which || i.keyCode, n = e in Draw.KEY_MAP && Draw.KEY_MAP[e] || t.key, 
            pds(this, "getKey", n, e, t.key, t.character, i), n.toLowerCase();
        }, r.prototype._generateKeyCombo = function(t) {
            var e, i, n, o, r, s;
            for (n = this.getKey(t), e = [], o = [ "control", "command", "shift", "option" ], 
            r = 0, s = o.length; s > r; r++) i = o[r], t.modifiers[i] && e.push(i);
            return e.push(n), e.join(" ");
        }, r.prototype.callHotkey = function(t, e) {
            var i, n, r, s, a, l;
            return n = this._generateKeyCombo(t), i = this.document.hotkeys.get(n), s = Draw.HotkeyFocusScope[i], 
            r = !s || (a = Draw.FOCUS_DOCUMENT, o.call(s, a) >= 0) || (l = this.document.getFocus(), 
            o.call(s, l) >= 0), r && this.document.hotkeys.sendMessage(n, e) ? !!(i && o.call(this.ALLOW_DEFAULT_ACTIONS, i) >= 0) :null;
        }, r.prototype.onKeyDown = function(t) {
            var e, i, n, o;
            return this.document.getFocus() === Draw.FOCUS_TEXTBOX ? !0 :(e = this.callHotkey(t, "down"), 
            null != e ? e :(n = this.document.selectionModel, i = n.getSelected(), t.key in this.KEY_TRANSLATIONS && i ? (o = this.document.getFocus()) !== Draw.FOCUS_CANVAS ? !0 :(this.translateObjects(t, i), 
            !1) :!0));
        }, r.prototype.onKeyPress = function() {
            return this.document.getFocus() === Draw.FOCUS_TEXTBOX ? !0 :void 0;
        }, r.prototype.onKeyUp = function(t) {
            return this.document.getFocus() === Draw.FOCUS_TEXTBOX ? !0 :this.document.getFocus() !== Draw.FOCUS_CANVAS || "backspace" !== t.key && "delete" !== t.key ? this.callHotkey(t, "up") :!1;
        }, r;
    }(Draw.Tool);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.ResizeTool = function(i) {
        function o() {
            return this.onMouseUp = e(this.onMouseUp, this), this.onMouseDrag = e(this.onMouseDrag, this), 
            this.onMouseDown = e(this.onMouseDown, this), this._doRotate = e(this._doRotate, this), 
            this._doResize = e(this._doResize, this), this._shouldRotate = e(this._shouldRotate, this), 
            this._shouldResize = e(this._shouldResize, this), this._should = e(this._should, this), 
            this.processMouseMoveHit = e(this.processMouseMoveHit, this), this._hit = e(this._hit, this), 
            this.initialize = e(this.initialize, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.CURSOR = "default", o.prototype.ROTATE_CURSOR = "crosshair", 
        o.prototype.SELECTION_MODE = Draw.SELECTION_MODE_BOUNDS, o.prototype.RESIZE_CURSORS = {
            "top-left":"nw-resize",
            "top-right":"ne-resize",
            "bottom-left":"sw-resize",
            "bottom-right":"se-resize",
            "left-center":"w-resize",
            "top-center":"n-resize",
            "right-center":"e-resize",
            "bottom-center":"s-resize"
        }, o.prototype.ANCHORS = {
            "top-left":Draw.ANCHOR_BOTTOM_RIGHT,
            "top-right":Draw.ANCHOR_BOTTOM_LEFT,
            "top-center":Draw.ANCHOR_BOTTOM_LEFT,
            "bottom-left":Draw.ANCHOR_TOP_RIGHT,
            "left-center":Draw.ANCHOR_TOP_RIGHT,
            "bottom-right":Draw.ANCHOR_TOP_LEFT,
            "bottom-center":Draw.ANCHOR_TOP_LEFT,
            "right-center":Draw.ANCHOR_TOP_LEFT
        }, o.prototype.initialize = function(t) {
            return o.__super__.initialize.call(this, t), this.hitOptions = {
                segments:!1,
                bounds:!0,
                stroke:!0,
                fill:!0,
                tolerance:6
            }, this._cur = null, this._anchor = null, this._resize = null, this._lastPoint = null, 
            this.propSnapper = new Draw.ProportionSnapper(), this.angleSnapper = new Draw.AngleSnapper(Draw.AngleSnapper.AXIS_INTERSECT);
        }, o.prototype.isText = function(t) {
            return t instanceof Draw.Text || t instanceof Draw.DomElement && t.canEdit();
        }, o.prototype._hit = function(t) {
            var e;
            return e = o.__super__._hit.call(this, t);
        }, o.prototype.processMouseMoveHit = function(t, e) {
            var i;
            return i = this.CURSOR, e && e.item && e.item.get("is_locked") ? i = this.CURSOR :e && "bounds" === e.type && e.name in this.RESIZE_CURSORS ? i = this.RESIZE_CURSORS[e.name] :e && "rotate" === e.type && (i = this.ROTATE_CURSOR), 
            this.document.set("cursor", i);
        }, o.prototype._should = function(t, e, i) {
            var n, o;
            return o = this.document.selectionModel, n = o.getSelected(), t && t.type === e ? (t.item.isParentSelected ? t.item.isParentSelected() :void 0) ? !1 :t.item && t.item.get("is_locked") ? !1 :0 === _.size(n) || 1 === _.size(n) && o.isSelected(t.item) || !o.isSelected(t.item) && !i.shift || t.item && !i.shift :!1;
        }, o.prototype._shouldResize = function(t, e) {
            return this._should(t, "bounds", e);
        }, o.prototype._shouldRotate = function(t, e) {
            return this._should(t, "rotate", e);
        }, o.prototype._doResize = function(t, e, i, n) {
            var o, r, s, a, l, c, h, u, d, p, f, g, m, _;
            switch (a = t.getBounds(), o = null, d = [], s = [ "x", "y" ], f = [ "x" ], g = [ "y" ], 
            r = this.ANCHORS[this._resize], this._resize) {
              case "top-left":
                o = new paper.Point(a.x + a.width, a.y + a.height), d = s;
                break;

              case "top-right":
                o = new paper.Point(a.x, a.y + a.height), d = s;
                break;

              case "bottom-left":
                o = new paper.Point(a.x + a.width, a.y), d = s;
                break;

              case "bottom-right":
                o = new paper.Point(a.x, a.y), d = s;
                break;

              case "left-center":
                o = new paper.Point(a.x + a.width, a.y), e.y = a.y + a.height, d = f;
                break;

              case "top-center":
                o = new paper.Point(a.x, a.y + a.height), e.x = a.x + a.width, d = g;
                break;

              case "right-center":
                o = new paper.Point(a.x, a.y), e.y = a.y + a.height, d = f;
                break;

              case "bottom-center":
                o = new paper.Point(a.x, a.y), e.x = a.x + a.width, d = g;
            }
            for (this._anchor || (this._anchor = o), p = this.document.snap(e), m = 0, _ = d.length; _ > m; m++) l = d[m], 
            e[l] = p[l];
            return u = new paper.Rectangle(this._anchor, e), n.shift && this._originalBounds && (h = this._originalBounds.width / this._originalBounds.height, 
            u = this.propSnapper.snap(u, r, h)), c = {
                anchor:r,
                useTransform:n.shift
            }, t.setBounds(u, c), c;
        }, o.prototype._doRotate = function(t, e, i, n, o) {
            var r, s, a, l;
            return r = t.getBounds(), s = r.center, l = i.subtract(s), a = e.subtract(s), a.setAngle(a.angle - l.angle + n), 
            o.shift && (a = this.angleSnapper.snap(a)), t.setRotation(Math.round(a.angle));
        }, o.prototype.onMouseDown = function(t) {
            return this._lastPoint = new paper.Point(t.point), this._curHit = this._hit(t), 
            this._cur = this._curHit ? this._curHit.item :null, this._resize = this._shouldResize(this._curHit, t.modifiers) ? this._curHit.name :!1, 
            this._rotate = this._shouldRotate(this._curHit, t.modifiers) ? this._curHit.name :!1, 
            this._anchor = null, this._didDrag = !1, this._initialPoint = t.point, this._cur && this._cur.getRotation && (this._initialRotation = this._cur.getRotation()), 
            this._cur ? this._originalBounds = this._cur.getBounds() :void 0;
        }, o.prototype.onMouseDrag = function(t) {
            return this._resize && this._cur && this._doResize(this._cur, t.point, this._lastPoint, t.modifiers), 
            this._rotate && this._cur && this._doRotate(this._cur, t.point, this._initialPoint, this._initialRotation, t.modifiers), 
            this._lastPoint = new paper.Point(t.point), this._didDrag || this.trigger("dragstart", this, t), 
            this._didDrag = !0;
        }, o.prototype.onMouseUp = function(t) {
            return this._lastPoint = null, this._resize = null, this._anchor = null, this._cur = null, 
            this._didDrag ? this.trigger("dragend", this, t) :void 0;
        }, o;
    }(Draw.KeyboardTool);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    }, o = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.PointerTool = function(i) {
        function r() {
            return this.onDblClick = e(this.onDblClick, this), this.onMouseUp = e(this.onMouseUp, this), 
            this.onMouseDrag = e(this.onMouseDrag, this), this.onMouseDown = e(this.onMouseDown, this), 
            this.processMouseMoveHit = e(this.processMouseMoveHit, this), this.translate = e(this.translate, this), 
            this.translateItems = e(this.translateItems, this), this.findItems = e(this.findItems, this), 
            this.toggleSelected = e(this.toggleSelected, this), this.clearSelected = e(this.clearSelected, this), 
            this.setPreselected = e(this.setPreselected, this), this.setSelected = e(this.setSelected, this), 
            this.addToSelected = e(this.addToSelected, this), this.isSelected = e(this.isSelected, this), 
            this.getSelected = e(this.getSelected, this), this.initialize = e(this.initialize, this), 
            t = r.__super__.constructor.apply(this, arguments);
        }
        return n(r, i), r.prototype._module = "PointerTool", r.prototype.CURSOR = "default", 
        r.prototype.initialize = function(t) {
            return r.__super__.initialize.call(this, t);
        }, r.prototype.getSelected = function() {
            var t, e, i, n;
            i = this.document.selectionModel.getSelected(), e = {};
            for (t in i) n = i[t], n.getLocked && n.getLocked() || (e[t] = n);
            return 0 === _.size(e) && (e = null), e;
        }, r.prototype.isSelected = function(t) {
            return this.document.selectionModel.isSelected(t);
        }, r.prototype.addToSelected = function(t) {
            return this.document.selectionModel.addToSelected(t);
        }, r.prototype.setSelected = function(t) {
            return this.document.selectionModel.setSelected(t);
        }, r.prototype.setPreselected = function(t) {
            return this.document.selectionModel.setPreselected(t);
        }, r.prototype.clearSelected = function() {
            return this.document.selectionModel.clearSelected();
        }, r.prototype.toggleSelected = function(t) {
            return this.document.selectionModel.toggleSelected(t);
        }, r.prototype.findItems = function(t) {
            return this.document.getProject().findItems(t);
        }, r.prototype.translateItems = function(t, e) {
            var i, n, o;
            o = [];
            for (i in t) n = t[i], !n.getLocked || n.getLocked && !n.getLocked() ? o.push(n.translate(e)) :o.push(void 0);
            return o;
        }, r.prototype.translate = function(t, e, i) {
            var n, o, r;
            return o = this.document.selectionModel.getSelectedBounds(t).topLeft, n = this.document.snap(e, i), 
            r = n.topLeft.subtract(o), this.translateItems(t, r), !r.equals(new paper.Point(0, 0));
        }, r.prototype.createTranslateUndoBatchForItems = function(t) {
            var e;
            return e = new Draw.MultiObjectUndoBatch({
                property:"position",
                commandClass:Draw.SetPropertyCommand
            }), e.setInitialState(t), e;
        }, r.prototype.createSnapUndoBatchForItems = function(t) {
            var e;
            return e = new Draw.MultiObjectUndoBatch({
                property:"position",
                commandClass:Draw.SnapObjectCommand
            }), e.setInitialState(t), e;
        }, r.prototype.processMouseMoveHit = function(t, e) {
            var i;
            return r.__super__.processMouseMoveHit.call(this, t, e), i = null, !e || !e.item || e.item.getLocked && e.item.getLocked() || (i = e.item), 
            this._preselectItem(i);
        }, r.prototype.onMouseDown = function(t) {
            return r.__super__.onMouseDown.call(this, t), this._dragSelected = null, this._dragOffset = null, 
            this._dragBounds = null, this._dragCacheFlag = !1, this._ignoreSelected = !1, this._transpoint = t.point.clone(), 
            this._clickAnchor = this._transpoint, this._snapObject = null, this._snapParent = null, 
            this._snapUndoBatch = null, this._dragCount = 0;
        }, r.prototype.onMouseDrag = function(t, e) {
            var i, n, r, s, a, l, c, h, u, d, p, f, g, m, v, y, b, w, C, T, D, E, x, S, O, k, I, R, P, N;
            if (null == e && (e = {}), !window.TESTING && e.bufferDrag !== !1 && this._dragCount < 1) return this._dragCount++, 
            !1;
            if (m = t.point, c = this._transpoint, b = !0, h = this._cur && this._cur.get("is_locked"), 
            !this._resize && !this._rotate && !this._dragCacheFlag && (this._dragCacheFlag = !0, 
            y = this.getSelected(), this._cur && y && this.isSelected(this._cur) && !h ? this._dragSelected = y :this._cur && !h ? (this._cur.isParentSelected() ? this.setPreselected(null) :t.modifiers.shift ? this.addToSelected(this._cur) :this.setSelected(this._cur), 
            this._dragSelected = this.getSelected()) :this._dragRect || (this._anchor = c, this.document.activateToolLayer(), 
            this._dragRect = new Draw.Rectangle(new paper.Rectangle(this._anchor, m)), this._dragRect.setStrokeWidth(1), 
            this._dragRect.setStrokeColor("black"), this._dragRect.setFillColor(null), this.document.deactivateToolLayer()), 
            t.modifiers.option && this._cur && this.isSelected(this._cur) && !h && (this._ignoreSelected = _.values(this.getSelected()), 
            this.document.duplicateSelected(!1), this._dragSelected = this.getSelected()), this._dragSelected)) {
                u = !1, O = this._dragSelected;
                for (l in O) C = O[l], ("BootstrapTableHeadCell" === (k = C.TYPE) || "BootstrapTableCell" === k || "BootstrapTableHeadRow" === k || "BootstrapTableRow" === k || "BootstrapColumn" === k) && (g = C.getTableParent(), 
                g && (this.toggleSelected(C), this.toggleSelected(g), u = !0));
                if (u && (this._dragSelected = this.getSelected()), e.undo !== !1 && (this.document.undoIgnore(), 
                this._undoItems = _.values(this._dragSelected), this._undoBatch = this.createTranslateUndoBatchForItems(this._undoItems), 
                this._snapUndoBatch = this.createSnapUndoBatchForItems(this._undoItems)), this._dragBounds = new paper.Rectangle(this.document.selectionModel.getSelectedBounds(this._dragSelected)), 
                this._dragOrigin = this._dragBounds.topLeft, this._dragOffset = t.point.subtract(this._dragBounds.topLeft), 
                1 === _.size(this._dragSelected)) for (d = _.values(this._dragSelected)[0], this._snapObject = d, 
                this._snappableContainers = this.document.getProject().findAll(!0), this._snappableContainers = function() {
                    var t, e, i, o;
                    for (i = this._snappableContainers, o = [], t = 0, e = i.length; e > t; t++) n = i[t], 
                    n.canAcceptObject && n.canAcceptObject(d) && o.push(n);
                    return o;
                }.call(this), I = this._snappableContainers, D = 0, S = I.length; S > D; D++) n = I[D], 
                n.highlight(d);
            }
            if (this._dragRect && (v = this._dragRect.getBounds(), i = new paper.Rectangle(this._anchor, m), 
            this._dragRect.setBounds(i), this.document.redraw(Draw.LAYER_TOOL, v.unite(i))), 
            this._dragSelected) {
                for (w = t.point.subtract(this._dragOffset), f = {}, T = _.values(this._dragSelected), 
                s = E = 0, R = T.length; R >= 0 ? R > E :E > R; s = R >= 0 ? ++E :--E) if (d = T[s], 
                d.get("snapped") && d.parent.releaseObject) for (g = d.parent, g.releaseObject(d), 
                this._snappableContainers && o.call(this._snappableContainers, g) >= 0 && g.highlight(d), 
                a = x = P = s + 1, N = T.length; N >= P ? N > x :x > N; a = N >= P ? ++x :--x) this._snapUndoBatch.batch[a].setInitialState(T[a]); else d.get("snapped") && !d.parent.releaseObject && d.set("snapped", !1);
                t.modifiers.shift ? (p = t.point.subtract(this._clickAnchor), Math.abs(p.x) >= Math.abs(p.y) ? (this._dragBounds.x = w.x, 
                this._dragBounds.y = this._dragOrigin.y, f.ignoreDim = "y") :(this._dragBounds.x = this._dragOrigin.x, 
                this._dragBounds.y = w.y, f.ignoreDim = "x")) :(this._dragBounds.x = w.x, this._dragBounds.y = w.y), 
                this._ignoreSelected && (f.ignore = this._ignoreSelected), f.autoSnap = !(t.modifiers.control || t.modifiers.command), 
                f.autoSnap || this.document.clearAutoSnapper(), b = this.translate(this._dragSelected, this._dragBounds, f), 
                this._snapObject && (this._snapParent = this.document.acceptsObject(this._snapObject));
            }
            return (this._resize || this._rotate) && this._cur && (this.document.selectionModel.isSelected(this._cur) || this.document.selectionModel.setSelected(this._cur), 
            this._resize ? (r = new paper.Rectangle(this._cur.getBounds()), this._undoBatch || this.document.undoIgnore(), 
            e = this._doResize(this._cur, m, c, t.modifiers), this._undoBatch || (this._undoItems = this._cur, 
            this._undoBatch = new Draw.SetPropertyCommand({
                property:"bounds",
                args:[ e ],
                object:this._cur,
                from:r
            }))) :this._rotate && this._doRotate(this._cur, m, this._initialPoint, this._initialRotation, t.modifiers)), 
            b !== !1 && (this._transpoint = m.clone()), this._didDrag || this.trigger("dragstart", this, t), 
            this._didDrag = !0, !1;
        }, r.prototype.onMouseUp = function(t, e) {
            var i, n, o, s, a, l, c, h, u, d, p, f;
            if (null == e && (e = {}), o = this._cur, this._curForDbl = o, this.document.clearAutoSnapper(), 
            this._dragSelected || this._didDrag || (o && t.modifiers.shift ? this.toggleSelected(o) :o ? this.setSelected(o) :t.modifiers.shift || this.clearSelected()), 
            this._dragRect) {
                for (n = this._dragRect.getBounds(), this._dragRect.remove(), this._dragRect = null, 
                l = this.findItems(n), t.modifiers.shift || this.clearSelected(), h = 0, d = l.length; d > h; h++) a = l[h], 
                this.toggleSelected(a.getSelectable && a.getSelectable() || a);
                this.document.redraw(Draw.LAYER_TOOL, n);
            }
            if (pds(this, "checking for snap object/parent", this._snapObject, this._snapParent), 
            this._snapObject && this._snapParent ? (c = new Draw.SetPropertyCommand({
                property:"size"
            }), c.setInitialState(this._snapParent), this._snapParent.acceptObject(this._snapObject), 
            c.setEndState(this._snapParent)) :this._snapObject && !this._snapParent && this._snapObject.options && this._snapObject.options.always_snapped && this._snapObject.set("snapped", !0), 
            e.undo !== !1 && (pds(this, "handling undo", this._undoItems, this._snapUndoBatch, this._undoBatch), 
            this._snapUndoBatch && this._undoItems && this._snapUndoBatch.setEndState(this._undoItems), 
            this._undoBatch && this._undoItems && this._undoBatch.setEndState(this._undoItems), 
            this._snapUndoBatch && !this._snapUndoBatch.isNoop() ? i = this._snapUndoBatch :this._undoBatch && this._undoItems && (i = this._undoBatch), 
            c && i.prepend(c), i && this.document.undoAdd(i), this._undoBatch && this.document.undoResume()), 
            this._snappableContainers) {
                for (f = this._snappableContainers, u = 0, p = f.length; p > u; u++) s = f[u], s.unhighlight();
                this._snappableContainers = null;
            }
            return this._undoBatch = this._undoItems = this._snapUndoBatch = null, Draw.NodePlacement.removePlaceholder(), 
            r.__super__.onMouseUp.call(this, t);
        }, r.prototype.onDblClick = function(t) {
            var e, i, n, o;
            return o = this, i = function() {
                return o.document.setTool("text"), o.document.tools.text.onMouseDown(t);
            }, e = this._curForDbl, e && this.isText(e) ? i() :e && e instanceof Draw.EventedGroup && (n = this.directHitGroup(e, t), 
            n && n.item && (this.setSelected(n.item), this.isText(n.item))) ? i() :void 0;
        }, r;
    }(Draw.ResizeTool);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.DialogViewTool = function(i) {
        function o() {
            return this.onKeyDown = e(this.onKeyDown, this), this.deactivate = e(this.deactivate, this), 
            t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.CURSOR = "default", o.prototype.deactivatesActiveTool = !1, 
        o.prototype.initialize = function(t) {
            return o.__super__.initialize.call(this, t);
        }, o.prototype.activate = function(t) {
            return paper.Tool.prototype.activate.call(this, t) ? (this.trigger("activate", this), 
            !0) :!1;
        }, o.prototype.deactivate = function(t) {
            return paper.Tool.prototype.deactivate.call(this, t) ? (this.trigger("deactivate", this), 
            !0) :!1;
        }, o.prototype.onMouseDown = function(t) {
            var e;
            return e = this.document.getActiveTool(), e ? e.onMouseDown(t) :void 0;
        }, o.prototype.onMouseDrag = function(t) {
            var e;
            return e = this.document.getActiveTool(), e ? e.onMouseDrag(t) :void 0;
        }, o.prototype.onMouseUp = function(t) {
            var e;
            return e = this.document.getActiveTool(), e ? e.onMouseUp(t) :void 0;
        }, o.prototype.onMouseMove = function(t) {
            var e;
            return e = this.document.getActiveTool(), e ? e.onMouseMove(t) :void 0;
        }, o.prototype.onKeyDown = function(t) {
            var e, i;
            return i = this.getKey(t), e = this.document.hotkeys.get(this._generateKeyCombo(t)), 
            "enter" === i ? (this.trigger("accept", t), this.isInputFocused() ? !0 :!1) :"escape" === i ? (this.trigger("cancel", t), 
            !1) :"tab" === i ? (t.modifiers.shift && this.trigger("focus:previous", t), t.modifiers.shift || this.trigger("focus:next", t), 
            !1) :"toggleSelectionBounds" === e || "preview" === e ? o.__super__.onKeyDown.call(this, t) :!0;
        }, o.prototype.isInputFocused = function() {
            return !!$("input:focus, textarea:focus").length;
        }, o;
    }(Draw.KeyboardTool);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.GradientTool = function(i) {
        function o() {
            return this.onMouseDrag = e(this.onMouseDrag, this), this.onMouseDown = e(this.onMouseDown, this), 
            this.processMouseMoveHit = e(this.processMouseMoveHit, this), this._snapGradientPoints = e(this._snapGradientPoints, this), 
            this.removeStop = e(this.removeStop, this), this.addStop = e(this.addStop, this), 
            this.translatePointToStopValue = e(this.translatePointToStopValue, this), this.createGradientEditor = e(this.createGradientEditor, this), 
            this.removeGradientEditor = e(this.removeGradientEditor, this), this.onSelectStop = e(this.onSelectStop, this), 
            this.onChangeGradient = e(this.onChangeGradient, this), this.redraw = e(this.redraw, this), 
            this.activate = e(this.activate, this), this.deactivate = e(this.deactivate, this), 
            this._getBounds = e(this._getBounds, this), this._getSelectedPath = e(this._getSelectedPath, this), 
            this.initialize = e(this.initialize, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.CURSOR = "default", o.prototype.ADJUST_CURSOR = Cur.HAND_ROTATE, 
        o.prototype.MOVE_CURSOR = "move", o.prototype.STOP_CURSOR = Cur.FINGER, o.prototype.ADD_STOP_CURSOR = Cur.ADD, 
        o.prototype.STOP_REMOVE_DISTANCE = 40, o.prototype.deactivatesActiveTool = !1, o.prototype.initialize = function(t) {
            return o.__super__.initialize.call(this, t), this.hitOptions = {
                segments:!1,
                stroke:!0,
                fill:!0,
                tolerance:2
            }, this.angleSnapper = new Draw.AngleSnapper(Draw.AngleSnapper.AXIS_INTERSECT), 
            this.rectSnapper = new Draw.RectangleSnapper(), this.document.bind("change:selected_stop", this.onSelectStop);
        }, o.prototype._getSelectedPath = function() {
            var t, e, i, n;
            i = null, n = this.document.selectionModel.getSelected();
            for (t in n) {
                e = n[t], i = e;
                break;
            }
            return i;
        }, o.prototype._getBounds = function() {
            var t;
            return this.gradientEditor ? (t = this.gradientEditor.getBounds(), new Draw.IntRectangle(t)) :null;
        }, o.prototype.deactivate = function() {
            var t;
            return this._active = !1, t = this.removeGradientEditor(), t ? this.redraw(t) :void 0;
        }, o.prototype.activate = function(t) {
            var e;
            return this.gradientColor = t || null, e = this._getSelectedPath(), e && this.document.selectionModel.setSelected(e), 
            this.createGradientEditor(e), this._active = !0;
        }, o.prototype.redraw = function(t) {
            return this.document.redraw(Draw.LAYER_TOOL, t || this._getBounds());
        }, o.prototype.onChangeGradient = function() {
            return this._active ? this.redraw() :void 0;
        }, o.prototype.onSelectStop = function(t, e) {
            return this.stop && this.stop.unbind("change", this.onChangeGradient), this.gradientEditor ? (this.stop = e, 
            this.stop && this.stop.bind("change", this.onChangeGradient), this.gradientEditor.setSelectedStop(e), 
            this.redraw()) :void 0;
        }, o.prototype.removeGradientEditor = function() {
            var t;
            return this.gradientEditor ? (t = this.gradientEditor.getBounds(), this.gradient && this.gradient.unbind("change", this.onChangeGradient), 
            this.gradientEditor.remove(), this.gradientEditor = null, t) :null;
        }, o.prototype.createGradientEditor = function(t) {
            var e, i, n, o, r;
            return this.removeGradientEditor(), t && (this.rectSnapper.setRectangle(t.getBounds()), 
            o = null, i = this.gradientColor || t.fillColor, i instanceof paper.GradientColor ? o = i :(n = new paper.Gradient([ [ i || "white", 0 ], [ "black", 1 ] ]), 
            e = t.getBounds(), r = e.x, o = new paper.GradientColor(n, [ r, e.y ], [ r, e.y + e.height ]), 
            t.set("fill_color", o)), this.gradientEditor = new Draw.GradientEditor(this.document.get("project"), o), 
            this.stop = this.document.getSelectedStop(), this.stop && this.gradientEditor.setSelectedStop(stop), 
            this.stop) ? this.stop.bind("change", this.onChangeGradient) :void 0;
        }, o.prototype.translatePointToStopValue = function(t) {
            var e, i, n, o, r, s, a, l;
            return r = this.gradientEditor.gradientColor.getOrigin(), i = this.gradientEditor.gradientColor.getDestination(), 
            o = i.subtract(r), s = t.subtract(r), e = Math.abs(o.angle - s.angle), a = s.project(o), 
            n = Math.sqrt(Math.pow(s.length, 2) - Math.pow(a.length, 2)), e > 90 ? l = 0 :(l = o.length ? a.length / o.length :0, 
            l = _.clamp(l, 0, 1)), [ l, n ];
        }, o.prototype.addStop = function(t) {
            var e, i, n, o, r, s;
            if (this.gradientEditor) return s = this.translatePointToStopValue(t), o = s[0], 
            i = s[1], r = this.gradientEditor.gradientColor.gradient.getStops(), r.sort(function(t, e) {
                return t.getRampPoint() - e.getRampPoint();
            }), n = _.sortedIndex(r, {
                rampPoint:o
            }, function(t) {
                return t.rampPoint;
            }), 0 === n || n === r.length ? (n = Math.max(0, n - 1), e = r[n].color) :e = r[n].color.average(r[n - 1].color), 
            o = new paper.GradientStop(e, o), r.push(o), this.gradientEditor.gradientColor.gradient.setStops(r), 
            o;
        }, o.prototype.removeStop = function(t) {
            var e;
            if (this.gradientEditor) return e = this.gradientEditor.gradientColor.gradient.stops, 
            e = _.without(e, t), this.gradientEditor.gradientColor.gradient.setStops(e);
        }, o.prototype._snapGradientPoints = function(t, e) {
            var i, n;
            return i = t.point, t.modifiers.shift && (n = this.angleSnapper.snap(i.subtract(e)), 
            i = e.add(n), i = this.rectSnapper.snap(i)), i;
        }, o.prototype.processMouseMoveHit = function(t, e) {
            if (o.__super__.processMouseMoveHit.call(this, t, e), this._preselectItem(e ? e.item :null), 
            this.document.set("cursor", this.CURSOR), e && this.gradientEditor) {
                if (e.toolItem === this.gradientEditor.destCircle || e.toolItem === this.gradientEditor.originCircle) return this.document.set("cursor", this.ADJUST_CURSOR);
                if (e.toolItem === this.gradientEditor.innerRect) return this.document.set("cursor", this.MOVE_CURSOR);
                if (e.toolItem instanceof Draw.GradientStop) return this.document.set("cursor", this.STOP_CURSOR);
                if (e.toolItem === this.gradientEditor.stopTrack) return this.document.set("cursor", this.ADD_STOP_CURSOR);
            }
        }, o.prototype.onMouseDown = function(t) {
            return this._initialPoint = t.point, this._lastPoint = t.point, this._curHit = this._hit(t), 
            this._cur = this._curHit ? this._curHit.item :null, this._toolItem = this._curHit ? this._curHit.toolItem :null, 
            this._wasDragging = !1, this._toolItem instanceof Draw.GradientStop ? this.document.setSelectedStop(this._toolItem.gradientStop) :void 0;
        }, o.prototype.onMouseDrag = function(t) {
            var e, i, n, o, r, s, a;
            return this._wasDragging = !0, this.gradientEditor ? (this._toolItem === this.gradientEditor.destCircle ? (r = this._snapGradientPoints(t, this.gradientEditor.gradientColor.origin), 
            this.gradientEditor.gradientColor.setDestination(r)) :this._toolItem === this.gradientEditor.originCircle ? (r = this._snapGradientPoints(t, this.gradientEditor.gradientColor.destination), 
            this.gradientEditor.gradientColor.setOrigin(r)) :this._toolItem === this.gradientEditor.innerRect ? (n = paper.Matrix.getTranslateInstance(t.point.subtract(this._lastPoint)), 
            this._lastPoint = t.point, this.gradientEditor.gradientColor.transform(n)) :this._toolItem instanceof Draw.GradientStop ? (a = this.translatePointToStopValue(t.point), 
            s = a[0], i = a[1], this._toolItem.gradientStop.setRampPoint(s), i > this.STOP_REMOVE_DISTANCE ? this._toolItem.parent.setVisible(!1) :this._toolItem.parent.setVisible(!0), 
            this.trigger("change:stop", this, t)) :(o = this._initialPoint, t.modifiers.shift && (o = this.rectSnapper.snap(o)), 
            r = this._snapGradientPoints(t, o), this.gradientEditor.gradientColor.setOrigin(o), 
            this.gradientEditor.gradientColor.setDestination(r)), e = this._getBounds(), this.redraw(e)) :void 0;
        }, o.prototype.onMouseUp = function(t) {
            var e, i, n, o;
            return this._wasDragging ? (this.gradientEditor && this._toolItem instanceof Draw.GradientStop && (o = this.translatePointToStopValue(t.point), 
            n = o[0], e = o[1], e > this.STOP_REMOVE_DISTANCE && (this.removeStop(this._toolItem.gradientStop), 
            this.redraw())), this.trigger("change:gradient", this, t)) :this._toolItem instanceof Draw.GradientStop ? (this.document.setSelectedStop(this._toolItem.gradientStop), 
            this.trigger("click:stop", this._toolItem.gradientStop, t)) :this.gradientEditor && this._toolItem === this.gradientEditor.stopTrack ? (i = this.addStop(t.point), 
            this.document.setSelectedStop(i), this.trigger("click:stop", i, t), this.redraw()) :this._cur ? (this.document.selectionModel.setSelected(this._cur), 
            this.createGradientEditor(this._cur), this.redraw()) :(this.document.selectionModel.clearSelected(), 
            this.removeGradientEditor(), this.redraw());
        }, o;
    }(Draw.KeyboardTool);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.HandTool = function(i) {
        function o() {
            return this.onVPMouseUp = e(this.onVPMouseUp, this), this.onVPMouseMove = e(this.onVPMouseMove, this), 
            this.onVPMouseDown = e(this.onVPMouseDown, this), this.onMouseUp = e(this.onMouseUp, this), 
            this.onMouseDrag = e(this.onMouseDrag, this), this.onMouseDown = e(this.onMouseDown, this), 
            t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype._module = "HandTool", o.prototype.CURSOR = Cur.HAND_OPEN, 
        o.prototype.CURSOR_DRAG = Cur.HAND_CLOSED, o.prototype.activate = function(t) {
            return o.__super__.activate.call(this, t), this._setupDomNodes(), this._bindEvents(), 
            this.setCursor(this.CURSOR);
        }, o.prototype.deactivate = function(t) {
            return o.__super__.deactivate.call(this, t), this._unbindEvents(), this.docEl.css({
                cursor:""
            });
        }, o.prototype._bindEvents = function() {
            return this.docEl.on("mousedown", this.onVPMouseDown), this.docEl.on("mousemove", this.onVPMouseMove), 
            this.docEl.on("mouseup", this.onVPMouseUp), this.viewport.on("mouseleave", this.onVPMouseUp);
        }, o.prototype._unbindEvents = function() {
            return this.docEl.off("mousedown", this.onVPMouseDown), this.docEl.off("mousemove", this.onVPMouseMove), 
            this.docEl.off("mouseup", this.onVPMouseUp), this.viewport.off("mouseleave", this.onVPMouseUp);
        }, o.prototype.onMouseDown = function() {}, o.prototype.onMouseDrag = function() {}, 
        o.prototype.onMouseUp = function() {}, o.prototype.setCursor = function(t) {
            return this.docEl.css({
                cursor:t
            }), this.document.set("cursor", t);
        }, o.prototype.onVPMouseDown = function(t) {
            return this.mousedown = !0, this.setCursor(this.CURSOR_DRAG), this.last = new paper.Point(t.pageX, t.pageY);
        }, o.prototype.onVPMouseMove = function(t) {
            var e, i;
            if (this.mousedown) return e = new paper.Point(t.pageX, t.pageY), this.diff = e.subtract(this.last), 
            i = new paper.Point(this.viewport.scrollLeft(), this.viewport.scrollTop()), i = i.subtract(this.diff), 
            this.viewport.scrollLeft(i.x), this.viewport.scrollTop(i.y), this.last = e;
        }, o.prototype.onVPMouseUp = function() {
            var t;
            return this.diff && (t = new paper.Point(this.viewport.scrollLeft(), this.viewport.scrollTop()), 
            t = t.subtract(this.diff), this.viewport.animate({
                scrollLeft:t.x,
                scrollTop:t.y
            }, 200)), this.mousedown = !1, this.diff = null, this.setCursor(this.CURSOR);
        }, o.prototype._setupDomNodes = function() {
            return this.viewport && this.docEl ? void 0 :(this.viewport = $(".viewable-viewport"), 
            this.docEl = $(".viewable-viewport .document-container"));
        }, o;
    }(Draw.KeyboardTool);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.NodePointerTool = function(i) {
        function o() {
            return this.findItems = e(this.findItems, this), this.translateItems = e(this.translateItems, this), 
            this.toggleBalanceBreak = e(this.toggleBalanceBreak, this), this.redrawSelected = e(this.redrawSelected, this), 
            this.handleHotkey = e(this.handleHotkey, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.SELECTION_MODE = Draw.SELECTION_MODE_SEGMENTS, o.prototype.CURSOR = Cur.WHITE_POINTER, 
        o.prototype.SEGMENT_CURSOR = Cur.NODE_POINTER, o.prototype.SEGMENT_ADD_CURSOR = "copy", 
        o.prototype.HANDLE_CURSOR = Cur.NODE_POINTER, o.prototype.DRAG_CURSOR = Cur.BLACK_NO_HANDLE, 
        o.prototype.HANDLE_MAP = {
            "handle-out":Draw.SelectionState.HANDLE_OUT,
            "handle-in":Draw.SelectionState.HANDLE_IN
        }, o.prototype.initialize = function(t) {
            return o.__super__.initialize.call(this, t), this.hitOptions = {
                segments:!0,
                bounds:!1,
                handles:!0,
                stroke:!0,
                fill:!0,
                direct:!0,
                tolerance:20
            }, this.document.hotkeys.bind("hotkey", this.handleHotkey), this.angleSnapper = new Draw.AngleSnapper(Draw.AngleSnapper.AXIS_INTERSECT);
        }, o.prototype.handleHotkey = function(t) {
            return this._active ? t in this ? this[t]() :void 0 :void 0;
        }, o.prototype.redrawSelected = function(t) {
            var e, i;
            return t = t || Draw.LAYER_USER, i = this.document.selectionModel, e = i.getSelectedBounds(null, {
                boundsType:"segment",
                addPrev:!0
            }), this.document.redraw(t, e);
        }, o.prototype._preselectSegment = function(t, e) {
            var i, n, o;
            return o = this.document.selectionModel.getSelectedHandle(), i = [], o && i.push(o[0].getHandlePoint(o[1])), 
            !t || "handle-out" !== e && "handle-in" !== e ? this.document.selectionModel.clearSelectedHandle() :(this.document.selectionModel.setSelectedHandle(t, this.HANDLE_MAP[e]), 
            i.push(t.getHandlePoint(this.HANDLE_MAP[e]))), n = null, i.length && (n = new Draw.IntRectangle(i[0], (t || o[0]).getPoint())), 
            2 === i.length && n.include(i[1]), n ? this.document.redraw(Draw.LAYER_TOOL, n) :void 0;
        }, o.prototype._preselectItem = function(t) {
            return t ? this.document.selectionModel.setPreselected(t) :this.document.selectionModel.clearPreselected();
        }, o.prototype.getSelected = function() {
            var t;
            return Draw.isDrawable(this._cur) ? o.__super__.getSelected.call(this) :(t = this.document.selectionModel.getSelectedSegments(), 
            t.length ? t :o.__super__.getSelected.call(this));
        }, o.prototype.isSelected = function(t) {
            var e;
            return Draw.isDrawable(t) ? o.__super__.isSelected.call(this, t) :(e = t && t.isSelected(), 
            e && this.document.selectionModel.isSelected(t.path));
        }, o.prototype.addToSelected = function(t) {
            return Draw.isDrawable(t) ? o.__super__.addToSelected.call(this, t) :t && t.path ? (this.document.selectionModel.addToSelected(t.path), 
            t.setSelected(!0)) :void 0;
        }, o.prototype.setSelected = function(t) {
            return Draw.isDrawable(t) ? o.__super__.setSelected.call(this, t) :t && t.path ? (this.document.selectionModel.setSelected(t.path), 
            t.path.deselectSegments(), t.setSelected(!0)) :void 0;
        }, o.prototype.clearSelected = function() {
            return Draw.isDrawable(this._cur) ? o.__super__.clearSelected.call(this, this._cur) :this.document.selectionModel.clearSelected();
        }, o.prototype.toggleSelected = function(t) {
            return Draw.isDrawable(t) ? o.__super__.toggleSelected.call(this, t) :t && t.path ? (this.document.selectionModel.addToSelected(t.path), 
            t.setSelected(!t.isSelected())) :void 0;
        }, o.prototype.toggleBalanceBreak = function() {
            var t, e, i, n, o, r;
            for (n = this.document.selectionModel.getSelectedSegments(), o = 0, r = n.length; r > o; o++) i = n[o], 
            t = i.getHandleMode(), e = paper.Segment.HANDLE_MODE_BALANCED, t === paper.Segment.HANDLE_MODE_BALANCED && (e = paper.Segment.HANDLE_MODE_BROKEN), 
            i.setHandleMode(e);
            return this.redrawSelected();
        }, o.prototype.translateItems = function(t, e) {
            var i, n, r, s, a, l;
            if (!_.isEmpty(t) && (i = _.values(t)[0], Draw.isDrawable(i))) return o.__super__.translateItems.call(this, t, e);
            for (l = [], s = 0, a = t.length; a > s; s++) r = t[s], n = r.getPoint(), l.push(r.setPoint(n.add(e)));
            return l;
        }, o.prototype.getTranslateUndoOptions = function() {
            return {
                property:"point",
                commandClass:Draw.SetPropertyCommand
            };
        }, o.prototype.createTranslateUndoBatchForItems = function(t) {
            var e;
            if (t.length) return Draw.isDrawable(t[0]) ? o.__super__.createTranslateUndoBatchForItems.call(this, t) :(e = new Draw.MultiObjectUndoBatch(this.getTranslateUndoOptions()), 
            e.setInitialState(t), e);
        }, o.prototype.findItems = function(t) {
            return this.document.getProject().findSegments(t);
        }, o.prototype.processMouseMoveHit = function(t, e) {
            var i, n;
            return this.cursor = e && "segment" === e.type ? this.SEGMENT_CURSOR :!e || "handle-out" !== (n = e.type) && "handle-in" !== n ? this.CURSOR :this.HANDLE_CURSOR, 
            this.document.set("cursor", this.cursor), i = e ? e.segment :null, this._preselectSegment(i, e && e.type || null), 
            this._preselectItem(e ? e.item :null);
        }, o.prototype.onKeyDown = function(t) {
            var e, i, n, r, s, a, l;
            if (t.key in this.KEY_TRANSLATIONS) return this.document.getFocus() !== Draw.FOCUS_CANVAS ? !0 :(n = this.getSelected(), 
            r = (t.modifiers.shift ? this.LARGE_KEY_TRANSLATIONS :this.KEY_TRANSLATIONS)[t.key], 
            n && n.length && (Draw.isDrawable(n[0]) && this.updateUndoBatch(n, this.getTranslateUndoOptions()), 
            this.translateItems(n, r)), !1);
            if ("backspace" === (l = t.key) || "delete" === l) {
                if (this.document.getFocus() === Draw.FOCUS_CANVAS) for (i = this.document.selectionModel.getSelectedSegments(), 
                s = 0, a = i.length; a > s; s++) e = i[s], e.remove();
                return !1;
            }
            return o.__super__.onKeyDown.call(this, t);
        }, o.prototype.onMouseDown = function(t) {
            var e, i, n;
            return o.__super__.onMouseDown.call(this, t), this._curHit && (this._hitType = this._curHit.type, 
            ("segment" === (e = this._curHit.type) || "handle-in" === e || "handle-out" === e) && (this._cur = this._curHit.segment), 
            ("fill" === (i = this._curHit.type) || "stroke" === i) && (this._cur = this._curHit.item), 
            ("handle-in" === (n = this._hitType) || "handle-out" === n) && (this.document.selectionModel.isSelected(this._curHit.item) || this.document.selectionModel.setSelected(this._curHit.item))), 
            this._resize = !1, this._cursor = this.cursor, this._setdragcur = !0;
        }, o.prototype.onMouseDrag = function(t) {
            var e, i, n, r, s;
            return !this._setdragcur || "handle-in" !== (r = this._hitType) && "handle-out" !== r && "segment" !== r || (this.document.set("cursor", this.DRAG_CURSOR), 
            this._setdragcur = !1), "handle-in" === (s = this._hitType) || "handle-out" === s ? (e = "handle-in" === this._hitType && "setHandleIn" || "setHandleOut", 
            i = t.point, t.modifiers.option && this._cur.setHandleMode(paper.Segment.HANDLE_MODE_BROKEN), 
            n = i.subtract(this._cur.getPoint()), t.modifiers.shift && (n = this.angleSnapper.snap(n)), 
            this._cur[e](n)) :o.__super__.onMouseDrag.call(this, t);
        }, o.prototype.onMouseUp = function(t) {
            return this.document.set("cursor", this._cursor), o.__super__.onMouseUp.call(this, t), 
            this.redrawSelected(Draw.LAYER_TOOL), this._hitType = null;
        }, o;
    }(Draw.PointerTool);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.PenTool = function(i) {
        function o() {
            return this.insertSegment = e(this.insertSegment, this), this.getState = e(this.getState, this), 
            this.setState = e(this.setState, this), this.deactivate = e(this.deactivate, this), 
            this.activate = e(this.activate, this), this.initialize = e(this.initialize, this), 
            t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.SELECTION_MODE = Draw.SELECTION_MODE_SEGMENTS, o.prototype.CURSOR = Cur.PEN, 
        o.prototype.SEGMENT_CURSOR = Cur.NODE_POINTER, o.prototype.SEGMENT_ADD_CURSOR = Cur.ADD, 
        o.prototype.NEW_SEGMENT_CURSOR = Cur.PEN, o.prototype.PATH_CLOSE_CURSOR = Cur.PEN_CLOSE, 
        o.prototype.HANDLE_CURSOR = Cur.NODE_POINTER, o.prototype.CREATE_CURSOR = Cur.PEN_X, 
        o.prototype.REMOVE_CURSOR = Cur.PEN_MINUS, o.prototype.STATE_CREATE = "create", 
        o.prototype.STATE_DRAW = "draw", o.prototype.STATE_ADD = "add", o.prototype.STATE_REMOVE = "remove", 
        o.prototype.initialize = function(t) {
            return o.__super__.initialize.call(this, t), this.setState(this.STATE_CREATE);
        }, o.prototype.autoClose = function() {
            return this.path ? this.path.setClosed(!0) :void 0;
        }, o.prototype.activate = function(t) {
            return o.__super__.activate.call(this, t), this.state === this.STATE_DRAW ? this.setState(this.STATE_CREATE) :void 0;
        }, o.prototype.deactivate = function(t) {
            return this.autoClose(), o.__super__.deactivate.call(this, t);
        }, o.prototype.setState = function(t) {
            var e;
            if (this.state !== t) {
                if (t === this.STATE_CREATE || t === this.STATE_ADD || t === this.STATE_REMOVE) this.autoClose(), 
                this.path = this.segment = null; else {
                    if (t !== this.STATE_DRAW) return this.setState(this.STATE_CREATE);
                    this.path = arguments[1], this.segment = arguments[2];
                }
                return e = this.state, this.state = t, this.trigger("change:state", this, t, e);
            }
        }, o.prototype.getState = function() {
            return this.state;
        }, o.prototype.insertSegment = function(t, e, i) {
            var n;
            return e && e.location ? (n = t.insert(e.location.index + 1, i), this.setSelected(n), 
            n) :null;
        }, o.prototype.processMouseMoveHit = function(t, e) {
            var i, n, o;
            return n = this.state === this.STATE_DRAW && e && e.item && e.item.equals(this.path), 
            this.cursor = this.CURSOR, n || this.state === this.STATE_ADD ? (this.cursor = e && "segment" === e.type && this.path && e.segment.getPoint().equals(this.path.getSegments()[0].getPoint()) ? this.PATH_CLOSE_CURSOR :e && "segment" === e.type ? this.SEGMENT_CURSOR :e && "stroke" === e.type ? this.SEGMENT_ADD_CURSOR :!e || "handle-out" !== (o = e.type) && "handle-in" !== o ? this.CURSOR :this.HANDLE_CURSOR, 
            i = e ? e.segment :null, this._preselectSegment(i, e && e.type || null), this._preselectItem(e ? e.item :null)) :this.state === this.STATE_DRAW ? this.cursor = this.NEW_SEGMENT_CURSOR :this.state === this.STATE_CREATE ? this.cursor = this.CREATE_CURSOR :this.state === this.STATE_REMOVE && (this.cursor = e && "segment" === e.type ? this.REMOVE_CURSOR :this.CURSOR, 
            this._preselectItem(e ? e.item :null)), this.document.set("cursor", this.cursor);
        }, o.prototype.onKeyDown = function(t) {
            var e, i, n, r, s, a, l, c;
            if (!this.path || (l = this.state) !== this.STATE_DRAW && l !== this.STATE_CREATE || "backspace" !== (c = t.key) && "delete" !== c) return o.__super__.onKeyDown.call(this, t);
            if (this.document.getFocus() === Draw.FOCUS_CANVAS) if (1 === this.path.getSegments().length) e = this.path.getBounds(), 
            this.path.remove(), this.setState(this.STATE_CREATE), this.document.redraw(Draw.LAYER_USER, e); else {
                for (n = this.document.selectionModel.getSelectedSegments(), s = 0, a = n.length; a > s; s++) i = n[s], 
                i.remove();
                r = this.path.getSegments(), this.segment = r[r.length - 1], this.setSelected(this.segment), 
                this.redrawSelected();
            }
            return !1;
        }, o.prototype.onMouseDown = function(t) {
            var e, i, n, o, r;
            if (this._cursor = this.cursor, this._setdragcur = !0, Draw.PointerTool.prototype.onMouseDown.call(this, t), 
            e = this._curHit, r = this._hitType = this._curHit && this._curHit.type || null, 
            this.state === this.STATE_CREATE) return n = new paper.Segment(t.point), i = new Draw.Path([ n ]), 
            o = this.document.getCurrentStyle(Draw.STYLE_PATH), i.set(o), this.document.setCurrentStyle(Draw.STYLE_PATH, i), 
            this.setState(this.STATE_DRAW, i, n), this.document.selectionModel.setSelected(i), 
            this.setSelected(n);
            if (this.state === this.STATE_ADD) {
                if (e && "segment" === r ? (this.segment = e.segment, this.setSelected(this.segment)) :"stroke" === r && (this.segment = this.insertSegment(e.item, e, t.point), 
                this.setSelected(this.segment)), e && e.item && this.setSelected(e.item), "handle-in" === r || "handle-out" === r) return this._cur = e.segment, 
                this.setSelected(e.segment);
            } else if (this.state === this.STATE_REMOVE) {
                if (e && "segment" === r && e.segment.remove(), e && e.item) return this.setSelected(e.item);
            } else if (this.state === this.STATE_DRAW) return "segment" === r && e.segment.getPoint().equals(this.path.getSegments()[0].getPoint()) ? (this.path.closePath(), 
            this.path.deselectSegments(), this.setState(this.STATE_CREATE)) :"segment" === r && this.path.containsSegment(e.segment) ? this.segment = e.segment :"stroke" === r && e.item.equals(this.path) ? this.segment = this.insertSegment(this.path, e, t.point) :(this.segment = new paper.Segment(t.point), 
            this.path.addSegment(this.segment), this.setSelected(this.segment)), ("handle-in" === r || "handle-out" === r) && (this._cur = e.segment), 
            this.redrawSelected();
        }, o.prototype.onMouseDrag = function(t) {
            var e, i, n, r;
            return !this._setdragcur || "handle-in" !== (i = this._hitType) && "handle-out" !== i && "segment" !== i || (this.document.set("cursor", this.DRAG_CURSOR), 
            this._setdragcur = !1), "handle-in" !== (n = this._hitType) && "handle-out" !== n && this.segment ? (e = t.point.subtract(this.segment.getPoint()), 
            t.modifiers.shift && (e = this.angleSnapper.snap(e)), this.segment.setHandleMode(paper.Segment.HANDLE_MODE_BALANCED), 
            this.segment.setHandleOut(e)) :"handle-in" === (r = this._hitType) || "handle-out" === r || "stroke" === r || "fill" === r ? o.__super__.onMouseDrag.call(this, t) :void 0;
        }, o.prototype.onMouseUp = function(t) {
            return Draw.ResizeTool.prototype.onMouseUp.call(this, t), this._hitType = null;
        }, o;
    }(Draw.NodePointerTool);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.ShapeTool = function(i) {
        function o() {
            return this.onMouseUp = e(this.onMouseUp, this), this.onMouseDrag = e(this.onMouseDrag, this), 
            this.onMouseDown = e(this.onMouseDown, this), this.getState = e(this.getState, this), 
            this.setState = e(this.setState, this), this.initialize = e(this.initialize, this), 
            t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.CURSOR = "crosshair", o.prototype.STATE_RECT = "rect", 
        o.prototype.STATE_OVAL = "oval", o.prototype.initialize = function(t) {
            return o.__super__.initialize.call(this, t), this.rect = null, this.path = null, 
            this.SHAPE = {
                rect:Draw.DomRectangle,
                oval:Draw.DomOval
            }, this.setState(this.STATE_RECT);
        }, o.prototype.setState = function(t) {
            var e;
            if (this.state !== t) return e = this.state, this.state = t, this.trigger("change:state", this, t, e);
        }, o.prototype.getState = function() {
            return this.state;
        }, o.prototype.onMouseDown = function(t) {
            return o.__super__.onMouseDown.call(this, t), this._resize ? void 0 :(this.document.undoIgnore(), 
            this.point = this.document.snap(t.point), this.path = new this.SHAPE[this.state](new Draw.IntRectangle(this.point, new paper.Size(0, 0))), 
            this.path.set({
                fill_color:null,
                border_color:Color.normalize("black"),
                border_width:1
            }), this.document.selectionModel.setSelected(this.path));
        }, o.prototype.onMouseDrag = function(t) {
            var e, i;
            return this._resize && this._cur ? o.__super__.onMouseDrag.call(this, t) :(e = this.document.snap(t.point), 
            i = new Draw.IntRectangle(this.point, e), t.modifiers.shift && (i = this.propSnapper.snap(i)), 
            this.path.setBounds(i));
        }, o.prototype.onMouseUp = function(t) {
            var e, i, n, r, s;
            return o.__super__.onMouseUp.call(this, t), this.path && (e = this.path.getBounds(), 
            s = e.width, n = e.height, 0 >= s - 2 || 0 >= n - 2 ? this.path.remove() :(r = this.document.getCurrentStyle(Draw.STYLE_PATH), 
            this.path.set(r), this.path.setSize(new paper.Size(s, n)), this.document.setCurrentStyle(Draw.STYLE_PATH, this.path), 
            i = new Draw.AddObjectCommand({
                object:this.path,
                parent:this.document.getActiveLayer()
            }), this.document.undoAdd(i.execute()))), this.document.clearAutoSnapper(), this._resize || this.document.undoResume(), 
            this.point = null, this.path = null;
        }, o;
    }(Draw.ResizeTool);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    }, o = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.TextTool = function(i) {
        function r() {
            return this.onClickOutOfDocument = e(this.onClickOutOfDocument, this), this.onMouseUp = e(this.onMouseUp, this), 
            this.onMouseDrag = e(this.onMouseDrag, this), this.onMouseDown = e(this.onMouseDown, this), 
            this.onRemoveSelected = e(this.onRemoveSelected, this), this.onKeyUp = e(this.onKeyUp, this), 
            this.onKeyPress = e(this.onKeyPress, this), this.onKeyDown = e(this.onKeyDown, this), 
            this.handleKey = e(this.handleKey, this), this.handleKeyForDomElement = e(this.handleKeyForDomElement, this), 
            this.insertText = e(this.insertText, this), this.processMouseMoveHit = e(this.processMouseMoveHit, this), 
            this.getSelectedItem = e(this.getSelectedItem, this), this.paste = e(this.paste, this), 
            this.copy = e(this.copy, this), this.cut = e(this.cut, this), this.selectionChanged = e(this.selectionChanged, this), 
            this.deactivate = e(this.deactivate, this), this.activate = e(this.activate, this), 
            this.initialize = e(this.initialize, this), t = r.__super__.constructor.apply(this, arguments);
        }
        return n(r, i), r.prototype._module = "TextTool", r.prototype.CURSOR = "text", r.prototype.CLICK_DELAY = 300, 
        r.prototype.SELECTION_MODE = Draw.SELECTION_MODE_TEXT, r.prototype.NON_PRINTABLE = [ "delete", "caps-lock", "command", "escape", "control", "shift", "option", "pageup", "pagedown" ], 
        r.prototype.KEY_MAP = {
            space:" ",
            enter:"\n",
            "return":"\n",
            tab:"	"
        }, r.prototype.PASSTHRU = "abcdefghijklmnopqrstuvwxyz1234567890-=?`/", r.prototype.initialize = function(t, e) {
            var i = this;
            return r.__super__.initialize.call(this, t), this.cursorModel = new Draw.TextCursorModel(), 
            this._ignoreCursor = e, this._clicks = 0, this._clickDelay = new Debouncer(this.CLICK_DELAY, function() {
                return i._clicks = 0;
            });
        }, r.prototype.initializeDomElements = function() {
            return this._ignoreCursor ? void 0 :this.cursor = new Draw.TextCursor(this.document, this.cursorModel);
        }, r.prototype.activate = function(t) {
            var e, i;
            return r.__super__.activate.call(this, t) ? (e = this.getSelectedItem(), i = this.document.selectionModel, 
            this._bound ? pds(this, "trying to bind twice in text tool for selection changing.") :(i.bind("remove:selected", this.onRemoveSelected), 
            i.bind("change:selected", this.selectionChanged), this._bound = !0, i.setSelected(e), 
            this.cursorModel.setPath(e)), !0) :!1;
        }, r.prototype.deactivate = function(t) {
            var e;
            return null == t && (t = {}), r.__super__.deactivate.call(this, t) ? (e = this.cursorModel.getPath(), 
            e && ("focus" !== t.type && this.cursorModel.setPosition(0, !1), this.document.redraw(Draw.LAYER_USER, e)), 
            this.cursorModel.setPath(null, t), this.document.selectionModel.unbind("change:selected", this.selectionChanged), 
            this.document.selectionModel.unbind("remove:selected", this.onRemoveSelected), this._bound = !1, 
            !0) :!1;
        }, r.prototype.selectionChanged = function() {
            var t;
            return t = this.getSelectedItem(), this.cursorModel.setPath(t), this._referenceHtml = null, 
            t ? this._referenceHtml = t.el.html() :void 0;
        }, r.prototype.cut = function(t) {
            var e;
            return e = this.cursorModel.getPath(), e ? (this.copy(t), this.insertText("", this.cursorModel.getPosition(), 0)) :void 0;
        }, r.prototype.copy = function(t) {
            var e, i;
            return e = this.cursorModel.getPath(), i = this.cursorModel.getPosition(), e && e.getSelection() ? t(Draw.Clipboard.TYPE_TEXT, e.getSelectedText()) :void 0;
        }, r.prototype.paste = function(t) {
            var e, i, n;
            return e = t[Draw.Clipboard.TYPE_TEXT], i = this.cursorModel.getPath(), n = this.cursorModel.getPosition(), 
            e && i ? this.insertText(e, n) :void 0;
        }, r.prototype.getSelectedItem = function() {
            var t, e, i, n, o;
            for (t = _.values(this.document.selectionModel.getSelected()), i = null, n = 0, 
            o = t.length; o > n; n++) if (e = t[n], this.isText(e) && !e.get("is_locked")) {
                i = e;
                break;
            }
            return i;
        }, r.prototype.moveToPointer = function() {
            return this.document.moveToPointer();
        }, r.prototype.processMouseMoveHit = function(t, e) {
            var i;
            return this.document.set("cursor", this.CURSOR), i = e && e.item || null, i && i instanceof Draw.Text ? this._preselectItem(i) :this._preselectItem(null);
        }, r.prototype.insertText = function(t, e, i) {
            var n;
            return n = this.cursorModel.getPath(), n ? (this.cursorModel.setPosition(n.insertText(t, e, i)), 
            this.document.redraw(Draw.LAYER_USER, n)) :void 0;
        }, r.prototype.handleKeyForDomElement = function(t, e, i) {
            var n;
            return n = this.cursorModel.getPath(), n && "a" === t && (e.control || e.command) ? (n.selectAll(), 
            !1) :"escape" === t || "enter" === t && e.option ? (this.moveToPointer(), !1) :(e.control || e.command) && "buis01=-".indexOf(t) > -1 ? Draw.KeyboardTool.prototype.onKeyDown.call(this, i) :!0;
        }, r.prototype.handleKey = function(t, e) {
            var i, n;
            if (i = this.cursorModel.getPath(), n = this.cursorModel.getPosition(), t && o.call(this.cursorModel.SUPPORTED_FUNCTIONS, t) >= 0) this.cursorModel[t](e.shift, e.control || e.command || e.option), 
            i = this.cursorModel.getPath(), i && this.document.redraw(Draw.LAYER_USER, i); else if (i && "a" === t && (e.control || e.command)) i.selectAll(), 
            this.document.redraw(Draw.LAYER_USER, i); else {
                if (e.control || e.command) return !1;
                if ("backspace" === t) this.insertText("", n - 1, 1); else if ("delete" === t) this.insertText("", n, 1); else if ("escape" === t || "enter" === t && e.option) this.moveToPointer(); else {
                    if (!(t in this.KEY_MAP)) return !1;
                    t = this.KEY_MAP[t], this.insertText(t, n);
                }
            }
            return !0;
        }, r.prototype.onKeyDown = function(t) {
            var e, i, n;
            return n = this.cursorModel.getPath(), e = n instanceof Draw.DomElement, i = this.getKey(t), 
            e ? this.handleKeyForDomElement(i, t.modifiers, t) :n && this.handleKey(i, t.modifiers) ? !1 :n && !t.modifiers.control && !t.modifiers.command && this.PASSTHRU.indexOf(i) > -1 ? !0 :r.__super__.onKeyDown.call(this, t);
        }, r.prototype.onKeyPress = function(t) {
            var e, i, n, s;
            return (n = this.cursorModel.getPath()) ? n instanceof Draw.DomElement ? !0 :(e = t.key, 
            i = t.modifiers, o.call(this.NON_PRINTABLE, e) >= 0 || (s = this.cursorModel.getPosition(), 
            e in this.KEY_MAP && (e = this.KEY_MAP[e]), (i.shift || i.capsLock) && (e = e.toUpperCase()), 
            this.insertText(e, s)), r.__super__.onKeyPress.call(this, t)) :r.__super__.onKeyPress.call(this, t);
        }, r.prototype.onKeyUp = function(t) {
            return r.__super__.onKeyUp.call(this, t);
        }, r.prototype.onRemoveSelected = function(t, e) {
            var i, n;
            if (e) return n = this, i = function() {
                var t, i, o, r;
                for (e = _.values(e), r = [], i = 0, o = e.length; o > i; i++) t = e[i], t instanceof Draw.Text ? r.push(n.document.redraw(Draw.LAYER_USER, t)) :r.push(void 0);
                return r;
            }, setTimeout(i, 10);
        }, r.prototype.onMouseDown = function(t) {
            var e, i, n, o, s, a, l;
            if (r.__super__.onMouseDown.call(this, t), o = this.cursorModel.getPath(), n = o instanceof Draw.DomElement, 
            this._didDrag = !1, this._dragBounds = null, this._hitResult = e = this._hit(t), 
            this._hitItem = e ? e.item :null, this._hitItem instanceof Draw.EventedGroup && (i = this.directHitGroup(this._hitItem, t), 
            i && i.item && this.isText(i.item) && (this._hitResult = e = i, this._hitItem = i.item)), 
            this._isTextHit = this._hitItem && this.isText(this._hitItem), l = this.document.selectionModel, 
            this._isTextHit && !l.isSelected(this._hitItem) && l.setSelected(this._hitItem), 
            a = this.getSelectedItem(), a && this._isTextHit && e.item._id === a._id && (s = a.pointToIndex(t.point), 
            this._clickPosition = s, null !== s && this.cursorModel.setPosition(s), this.document.redraw(Draw.LAYER_USER, _.values(this.document.selectionModel.getSelected()))), 
            this._isTextHit && a && a.selectBlock && !n) {
                if (this._clicks++, this._clickDelay.update(), 2 === this._clicks) return a.selectBlock(t.point, " \n");
                if (this._clicks > 2) return a.selectBlock(t.point, "\n");
            }
        }, r.prototype.onMouseDrag = function(t) {
            var e, i, n, o;
            if (i = this.cursorModel.getPath(), this._isTextHit) {
                if (i instanceof Draw.DomElement) return !0;
                i = this.cursorModel.getPath(), null !== this._clickPosition && i && (o = i.pointToIndex(t.point), 
                null !== o && (i.getSelection() || this.cursorModel.setPosition(this._clickPosition, !0), 
                this.cursorModel.setPosition(o, !0), this.document.redraw(Draw.LAYER_USER, i)));
            } else this._isTextHit || (n = this.document.snap(t.point), this._dragRect ? (e = this._dragBounds, 
            this._dragBounds = new paper.Rectangle(this._anchorPoint, n), this._dragRect.setBounds(this._dragBounds)) :(this._anchorPoint = this.document.snap(this._lastPoint.clone()), 
            this._dragBounds = e = new paper.Rectangle(this._anchorPoint, n), this.document.activateToolLayer(), 
            this._dragRect = new Draw.Rectangle(this._dragBounds), this._dragRect.setStrokeWidth(1), 
            this._dragRect.setStrokeColor("black"), this._dragRect.setFillColor(null), this.document.deactivateToolLayer()), 
            this.document.redraw(Draw.LAYER_TOOL, this._dragBounds.unite(e)));
            return this._didDrag = !0;
        }, r.prototype.onMouseUp = function(t) {
            var e, i, n, o, s, a, l;
            return n = this.cursorModel.getPath(), a = null, s = Draw.STYLE_TEXT, e = this._didDrag && this._dragBounds && Math.max(this._dragBounds.width, this._dragBounds.height) > 10, 
            this._isTextHit || e || !this.cursorModel.getPath() ? this._isTextHit || e ? e && (a = new Draw.DomBodyText(this._dragBounds)) :(this._lastPoint.y = this._lastPoint.y - 5, 
            l = 300, i = 42, a = new Draw.DomHeading(new paper.Rectangle(this._lastPoint.x, this._lastPoint.y, l, i)), 
            s = Draw.STYLE_HEADING) :this.moveToPointer(), this._dragRect && (this._dragRect.remove(), 
            this.document.redraw(Draw.LAYER_TOOL, this._dragBounds), this._dragRect = null, 
            this._dragBounds = null), a && (o = this.document.getCurrentStyle(s), a.set(o), 
            this.document.setCurrentStyle(s, a), this.document.selectionModel.setSelected(a)), 
            r.__super__.onMouseUp.call(this, t);
        }, r.prototype.onClickOutOfDocument = function() {
            return this.moveToPointer();
        }, r;
    }(Draw.ResizeTool);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.BasicViewTool = function(i) {
        function o() {
            return this.onKeyPress = e(this.onKeyPress, this), this.onKeyUp = e(this.onKeyUp, this), 
            this.onKeyDown = e(this.onKeyDown, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.CURSOR = "default", o.prototype.deactivatesActiveTool = !1, 
        o.prototype.onKeyDown = function() {
            return !0;
        }, o.prototype.onKeyUp = function() {
            return !0;
        }, o.prototype.onKeyPress = function() {
            return !0;
        }, o;
    }(Draw.KeyboardTool);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.ColorViewTool = function(i) {
        function o() {
            return this.onMouseDrag = e(this.onMouseDrag, this), this.onMouseDown = e(this.onMouseDown, this), 
            this.onMouseMove = e(this.onMouseMove, this), this.processMouseMoveHit = e(this.processMouseMoveHit, this), 
            this.onKeyDown = e(this.onKeyDown, this), this.activate = e(this.activate, this), 
            this.deactivate = e(this.deactivate, this), this.initialize = e(this.initialize, this), 
            t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.CURSOR = "default", o.prototype.deactivatesActiveTool = !1, 
        o.prototype.initialize = function(t, e) {
            return o.__super__.initialize.call(this, t), this.gradientTool = e, this.hitOptions = {
                segments:!1,
                stroke:!0,
                fill:!0,
                tolerance:2
            };
        }, o.prototype.deactivate = function(t) {
            var e;
            return e = o.__super__.deactivate.call(this, t), e && this.deactivateGradient(), 
            e;
        }, o.prototype.activate = function(t) {
            var e;
            return e = o.__super__.activate.call(this, t), e && (this._gradientWhenActive && this.activateGradient(this._gradientWhenActive), 
            this.gradientTool && this.gradientTool.redraw()), e;
        }, o.prototype.activateGradient = function(t) {
            return this._active ? this._gradientActive ? void 0 :(this._gradientActive = !0, 
            this.gradientTool.activate(t), this._gradientWhenActive = null) :this._gradientWhenActive = t;
        }, o.prototype.deactivateGradient = function() {
            return this._gradientActive ? (this.gradientTool.deactivate(), this._gradientActive = !1) :void 0;
        }, o.prototype.onKeyDown = function(t) {
            return this._gradientActive ? this.gradientTool.onKeyDown(t) :o.__super__.onKeyDown.call(this, t);
        }, o.prototype.processMouseMoveHit = function(t, e) {
            return o.__super__.processMouseMoveHit.call(this, t, e), this.document.set("cursor", this.CURSOR), 
            this._gradientActive && e && e.toolItem ? this.gradientTool.processMouseMoveHit(t, e) :void 0;
        }, o.prototype.onMouseMove = function(t) {
            return Draw.Tool.prototype.onMouseMove.call(this, t);
        }, o.prototype.onMouseDown = function(t) {
            return this._curHit = this._hit(t), this._cur = this._curHit ? this._curHit.item :null, 
            this._toolItem = this._curHit ? this._curHit.toolItem :null, this._gradientActive && this._toolItem ? this.gradientTool.onMouseDown(t) :(this.trigger("click:nothing", this), 
            t.event.preventDefault(), t.event.stopPropagation()), !0;
        }, o.prototype.onMouseDrag = function(t) {
            return this._gradientActive && this._toolItem ? this.gradientTool.onMouseDrag(t) :void 0;
        }, o.prototype.onMouseUp = function(t) {
            return this._gradientActive && this._toolItem ? this.gradientTool.onMouseUp(t) :void 0;
        }, o;
    }(Draw.DialogViewTool);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.CommentTool = function(i) {
        function o() {
            return this.onKeyDown = e(this.onKeyDown, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.CURSOR = "default", o.prototype.deactivatesActiveTool = !1, 
        o.prototype.initialize = function(t) {
            return o.__super__.initialize.call(this, t);
        }, o.prototype.onKeyDown = function(t) {
            var e, i, n;
            return i = this._generateKeyCombo(t), e = this.document.hotkeys.get(i), n = this.getKey(t), 
            "escape" === n ? (this.trigger("escape"), !1) :"enter" === n && (t.modifiers.control || t.modifiers.option) ? (this.trigger("submit"), 
            !1) :!0;
        }, o;
    }(Draw.KeyboardTool);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.CommentModeTool = function(i) {
        function o() {
            return this.onKeyDown = e(this.onKeyDown, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.CURSOR = "default", o.prototype.deactivatesActiveTool = !1, 
        o.prototype.initialize = function(t) {
            return o.__super__.initialize.call(this, t);
        }, o.prototype.onKeyDown = function(t) {
            var e, i, n;
            return i = this._generateKeyCombo(t), e = this.document.hotkeys.get(i), n = this.getKey(t), 
            "escape" === n ? (this.trigger("escape"), !1) :"help" === e ? (this.trigger("help"), 
            !1) :"preview" === e ? (this.document.preview(), !1) :"commentMode" === e ? (this.trigger("toggleCommentMode"), 
            !1) :!0;
        }, o;
    }(Draw.KeyboardTool);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.PreviewTool = function(i) {
        function o() {
            return this.onKeyUp = e(this.onKeyUp, this), this.onKeyDown = e(this.onKeyDown, this), 
            t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.CURSOR = "default", o.prototype.deactivatesActiveTool = !1, 
        o.prototype.initialize = function(t) {
            return o.__super__.initialize.call(this, t);
        }, o.prototype.onKeyDown = function(t) {
            var e, i, n;
            return i = this._generateKeyCombo(t), e = this.document.hotkeys.get(i), n = this.getKey(t), 
            "escape" === n || "preview" === e ? (this.getOutOfPreview(), !1) :"editMode" === e ? (this.trigger("edit"), 
            !1) :"commentMode" === e ? (this.trigger("toggleCommentMode"), !1) :"help" === e ? (this.trigger("help"), 
            !1) :("shift" === n && this.trigger("clicktargets:show"), !0);
        }, o.prototype.onKeyUp = function(t) {
            var e;
            return e = this.getKey(t), "shift" === e && this.trigger("clicktargets:hide"), !0;
        }, o.prototype.getOutOfPreview = function() {
            return this.document.preview();
        }, o;
    }(Draw.KeyboardTool);
}.call(this), function() {
    var t = {}.hasOwnProperty, e = function(e, i) {
        function n() {
            this.constructor = e;
        }
        for (var o in i) t.call(i, o) && (e[o] = i[o]);
        return n.prototype = i.prototype, e.prototype = new n(), e.__super__ = i.prototype, 
        e;
    };
    Draw.Demo = {
        runDemo:function(t, i, n, o, r) {
            var s, a, l, c, h, u;
            return null == r && (r = {}), a = Draw.Demo[i], l = a.documentJSON, this.updateTweetButton(a.tweet), 
            Draw.Demo.clearCurrentDemo(), l && r.fromJSON !== !1 && t.fromJSON(l), APP.view.sensiblyCenter(), 
            r.showSymbols !== !1 && (c = function() {
                return t.toggleDialogSymbols(), APP.view.sensiblyCenter(!0);
            }, setTimeout(c, 1e3)), s = function(t) {
                function i() {
                    return u = i.__super__.constructor.apply(this, arguments);
                }
                return e(i, t), i.prototype.template = n, i.prototype.events = {
                    "click a.cta":"onClickGo"
                }, i.prototype.onClickGo = function() {
                    return this.hide(), !1;
                }, i.prototype.onShow = function() {
                    return this._hasShown = !0;
                }, i.prototype.onHide = function() {
                    return this._hasShown && _.isFunction(o) ? o() :void 0;
                }, i;
            }(Draw.EmbedPane), h = new s({
                document:t
            }), n = new Draw.ModalOverlay({
                pane:h,
                document:t
            }), n.show(), !1;
        },
        clearCurrentDemo:function() {
            return Draw.LocalStorage.unset("current_demo");
        },
        getCurrentDemo:function() {
            return Draw.LocalStorage.get("current_demo", !0);
        },
        getCurrentDemoDoc:function(t, e, i) {
            var n;
            return n = Draw.Demo.getCurrentDemo(), n && n.demo_name === t && n.version === e && n.json ? n.json :i;
        },
        saveAsCurrentDemo:function(t) {
            var e, i;
            return i = t.getDemoName(), e = Draw.Demo[i], Draw.LocalStorage.set("current_demo", {
                demo_type:t.get("demo_type"),
                demo_name:i,
                version:e.documentVersion,
                json:t.toJSON(!0),
                thumbnail_url:e.documentThumbnail,
                tooltip_text:e.documentTooltip
            }, !0);
        },
        loadDocument:function(t, e, i) {
            var n, o;
            return null == i && (i = {}), o = Draw.Demo[e], i.useSavedDocument === !1 ? t.fromJSON(o.documentJSON) :(n = Draw.Demo.getCurrentDemoDoc(e, o.documentVersion, o.documentJSON), 
            t.fromJSON(n), i.clearCurrentDemo !== !1 ? Draw.Demo.clearCurrentDemo() :void 0);
        },
        updateTweetButton:function(t) {
            var e, i;
            if (t) return e = {
                source:"tweetbutton",
                via:"easelapp"
            }, e = _.extend(e, t), e.original_referer = e.url, e = Util.serializeUrlParams(e), 
            i = "https://twitter.com/intent/tweet?" + e, $(".tweet-link").attr("href", i);
        }
    };
}.call(this), function() {
    Draw.Demo.Bootstrap = {
        documentVersion:1,
        documentJSON:{
            sz:{
                w:1170,
                h:2379
            },
            background_color:{
                R:255,
                G:255,
                B:255,
                A:1
            },
            background_image:null,
            background_repeat:"repeat",
            background_position:"top left",
            "toggle:background_image":!1,
            "toggle:background_cover":!1,
            use_padding_top:!0,
            version:"1.0",
            symbols:[],
            document:[ {
                children:[ {
                    t:"bscontainer",
                    override:[ "padding_top", "padding_right", "padding_bottom", "padding_left", "border_top_width", "border_top_color", "border_top_style", "border_bottom_width", "border_bottom_color", "border_bottom_style", "border_left_width", "border_left_color", "border_left_style", "border_right_width", "border_right_color", "border_right_style", "fill_color" ],
                    html:'<div class="bsc container-fluid" id="dom-elem-17">                                                          <div class="child-place child-place-0"></div></div>',
                    css:"",
                    pos:{
                        x:0,
                        y:0
                    },
                    sz:{
                        w:1170,
                        h:243
                    },
                    is_locked:!1,
                    snapped:!0,
                    auto_height:!0,
                    auto_width:!0,
                    padding_top:"40px",
                    padding_right:"20px",
                    padding_bottom:"0px",
                    padding_left:"20px",
                    fill:{
                        R:223,
                        G:237,
                        B:186,
                        A:.388235
                    },
                    layout_type:"container-fluid",
                    border_top_color:{
                        R:223,
                        G:237,
                        B:186,
                        A:1
                    },
                    border_top_style:"solid",
                    border_top_width:1,
                    border_right_color:{
                        R:223,
                        G:237,
                        B:186,
                        A:1
                    },
                    border_right_style:"solid",
                    border_right_width:1,
                    border_bottom_color:{
                        R:223,
                        G:237,
                        B:186,
                        A:1
                    },
                    border_bottom_style:"solid",
                    border_bottom_width:1,
                    border_left_color:{
                        R:223,
                        G:237,
                        B:186,
                        A:1
                    },
                    border_left_style:"solid",
                    border_left_width:1,
                    id:"",
                    classes:"",
                    children:[ {
                        t:"bscontainer",
                        override:[],
                        html:'<div class="bsc container" id="dom-elem-18">                                   <div class="child-place child-place-0"></div></div>',
                        css:"",
                        pos:{
                            x:115,
                            y:40
                        },
                        sz:{
                            w:940,
                            h:263
                        },
                        is_locked:!1,
                        snapped:!0,
                        auto_height:!0,
                        auto_width:!0,
                        layout_type:"container",
                        id:"",
                        classes:"",
                        children:[ {
                            t:"bsherounit",
                            override:[ "fill_color", "padding_top", "padding_right", "padding_bottom", "padding_left" ],
                            html:'<div class="hero-unit" id="dom-elem-71">\n  <div class="child-place child-place-0"></div>\n  <div class="child-place child-place-1"></div>\n  <div class="btns">\n    \n                </div>\n</div>',
                            css:"",
                            pos:{
                                x:80,
                                y:42
                            },
                            sz:{
                                w:940,
                                h:171
                            },
                            is_locked:!1,
                            snapped:!0,
                            auto_height:!0,
                            auto_width:!0,
                            padding_top:"10px",
                            padding_right:"60px",
                            padding_bottom:"30px",
                            padding_left:"60px",
                            fill:{
                                R:0,
                                G:0,
                                B:0,
                                A:0
                            },
                            id:"",
                            classes:"",
                            children:[ {
                                t:"bsheading",
                                override:[ "_webkit-box-shadow", "_moz-box-shadow", "font_face_size", "alignment", "line_height" ],
                                html:'<h1 class="heading editable-element" id="dom-elem-15">Easel + Bootstrap =                                                                                             <div class="child-place child-place-0"></div></h1>',
                                css:"",
                                pos:{
                                    x:116,
                                    y:97
                                },
                                sz:{
                                    w:820,
                                    h:72
                                },
                                is_locked:!1,
                                snapped:!0,
                                edited_color:!0,
                                auto_height:!0,
                                auto_width:!0,
                                tag_type:"h1",
                                pull:"",
                                a:"center",
                                h:"71px",
                                id:"",
                                classes:"",
                                children:[ {
                                    t:"ficon",
                                    override:[ "font_face_size", "text_color", "font_size", "margin_top", "margin_right", "margin_bottom", "margin_left" ],
                                    html:'<i class="icon icon-heart" id="dom-elem-16"></i>',
                                    css:".icon{\n}",
                                    pos:{
                                        x:834,
                                        y:132
                                    },
                                    sz:{
                                        w:61,
                                        h:54
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    edited_color:!0,
                                    text_color:{
                                        R:217,
                                        G:70,
                                        B:20,
                                        A:1
                                    },
                                    font_size:"54px",
                                    margin_top:"11px",
                                    margin_right:"0px",
                                    margin_bottom:"0px",
                                    margin_left:"0px",
                                    pull:"",
                                    id:"",
                                    classes:"",
                                    children:[]
                                } ]
                            }, {
                                t:"bsparagraph",
                                override:[ "font_face_size", "padding_top", "padding_right", "padding_bottom", "padding_left", "font_size", "alignment", "line_height" ],
                                html:'<div class="dom-body-text editable-element paragraph" id="dom-elem-17"><p>Design with bootstrap elements, style them to your hearts content, then export to code.</p></div>',
                                css:"",
                                pos:{
                                    x:116,
                                    y:159
                                },
                                sz:{
                                    w:671,
                                    h:30
                                },
                                is_locked:!1,
                                snapped:!0,
                                edited_color:!0,
                                auto_height:!0,
                                auto_width:!0,
                                padding_top:"10px",
                                padding_right:"0px",
                                padding_bottom:"0px",
                                padding_left:"0px",
                                pull:"",
                                font_size:"19px",
                                a:"center",
                                h:"29px",
                                id:"",
                                classes:"",
                                children:[]
                            } ]
                        } ]
                    } ]
                }, {
                    t:"bsnavbar",
                    override:[],
                    html:'<div class="navbar navbar-fixed-top" id="dom-elem-13">\n  <div class="navbar-inner">\n    <div class="child-place child-place-0"></div>\n    <ul class="nav">\n      \n      <div class="child-place child-place-1"></div>\n      \n      </ul>\n  </div>\n</div>',
                    css:"",
                    pos:{
                        x:0,
                        y:0
                    },
                    sz:{
                        w:1170,
                        h:42
                    },
                    is_locked:!1,
                    snapped:!0,
                    auto_height:!0,
                    auto_width:!0,
                    colors:"",
                    positioning:"navbar-fixed-top",
                    id:"",
                    classes:"",
                    children:[ {
                        t:"bsbrand",
                        override:[],
                        html:'<a class="brand editable-element" href="#" id="dom-elem-13">Easel Demo</a>',
                        css:"",
                        pos:{
                            x:10,
                            y:10
                        },
                        sz:{
                            w:144,
                            h:40
                        },
                        is_locked:!1,
                        snapped:!0,
                        edited_color:!0,
                        auto_height:!0,
                        auto_width:!0,
                        id:"",
                        classes:"",
                        children:[]
                    }, {
                        t:"bsnavlink",
                        override:[],
                        html:'<li id="dom-elem-15"><a href="#" class=""><span class="editable-element">Tour<br></span></a></li>',
                        css:"",
                        pos:{
                            x:222,
                            y:10
                        },
                        sz:{
                            w:57,
                            h:40
                        },
                        is_locked:!1,
                        snapped:!0,
                        edited_color:!0,
                        auto_height:!0,
                        auto_width:!0,
                        state:"active",
                        is_divider:"",
                        id:"",
                        classes:"",
                        children:[]
                    } ]
                }, {
                    t:"bscontainer",
                    override:[ "padding_top", "padding_right", "padding_bottom", "padding_left" ],
                    html:'<div class="bsc container" id="dom-elem-23">           <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div>  <div class="child-place child-place-2"></div> <div class="child-place child-place-3"></div>                 </div>',
                    css:"",
                    pos:{
                        x:20,
                        y:262
                    },
                    sz:{
                        w:940,
                        h:310
                    },
                    is_locked:!1,
                    snapped:!0,
                    auto_height:!0,
                    auto_width:!0,
                    padding_top:"10px",
                    padding_right:"0px",
                    padding_bottom:"30px",
                    padding_left:"0px",
                    layout_type:"container",
                    id:"",
                    classes:"",
                    children:[ {
                        t:"bspageheading",
                        override:[ "margin_top", "margin_right", "margin_bottom", "margin_left" ],
                        html:'<div class="page-header" id="dom-elem-22">\n  <h1>\n    <span class="editable-element">Try it out</span>\n   </h1>\n</div>',
                        css:"",
                        pos:{
                            x:20,
                            y:292
                        },
                        sz:{
                            w:940,
                            h:60
                        },
                        is_locked:!1,
                        snapped:!0,
                        edited_color:!0,
                        auto_height:!0,
                        auto_width:!0,
                        margin_top:"10px",
                        margin_right:"0px",
                        margin_bottom:"30px",
                        margin_left:"0px",
                        pull:"",
                        id:"",
                        classes:"",
                        children:[]
                    }, {
                        t:"bsparagraph",
                        override:[],
                        html:'<div class="dom-body-text editable-element paragraph" id="dom-elem-23"><p>Open the left sidebar and drag some things into the red box below! Open the sidebar by clicking the &gt;&gt; icon.</p></div>',
                        css:"",
                        pos:{
                            x:20,
                            y:372
                        },
                        sz:{
                            w:940,
                            h:20
                        },
                        is_locked:!1,
                        snapped:!0,
                        edited_color:!0,
                        auto_height:!0,
                        auto_width:!0,
                        pull:"",
                        id:"",
                        classes:"",
                        children:[]
                    }, {
                        t:"bsrow",
                        override:[],
                        html:'<div class="row-fluid" id="dom-elem-97"> <div class="child-place child-place-0"></div> </div>',
                        css:"",
                        pos:{
                            x:20,
                            y:402
                        },
                        sz:{
                            w:940,
                            h:60
                        },
                        is_locked:!1,
                        snapped:!0,
                        auto_height:!0,
                        auto_width:!0,
                        id:"",
                        classes:"",
                        children:[ {
                            t:"bscolumn",
                            override:[],
                            html:'<span class="column span12 container-empty" id="dom-elem-30">      </span>',
                            css:"",
                            pos:{
                                x:33,
                                y:396
                            },
                            sz:{
                                w:1170,
                                h:60
                            },
                            is_locked:!1,
                            snapped:!0,
                            auto_height:!0,
                            auto_width:!0,
                            column_span:"span12",
                            offset_span:"",
                            id:"",
                            classes:"",
                            children:[]
                        } ]
                    }, {
                        t:"bsrow",
                        override:[],
                        html:'<div class="row-fluid" id="dom-elem-97"> <div class="child-place child-place-0"></div> </div>',
                        css:"",
                        pos:{
                            x:20,
                            y:462
                        },
                        sz:{
                            w:940,
                            h:69
                        },
                        is_locked:!1,
                        snapped:!0,
                        auto_height:!0,
                        auto_width:!0,
                        id:"",
                        classes:"",
                        children:[ {
                            t:"bscolumn",
                            override:[],
                            html:'<span class="column span12" id="dom-elem-33">                 <div class="child-place child-place-1"></div> <div class="child-place child-place-0"></div>                 </span>',
                            css:"",
                            pos:{
                                x:20,
                                y:459
                            },
                            sz:{
                                w:940,
                                h:69
                            },
                            is_locked:!1,
                            snapped:!0,
                            auto_height:!0,
                            auto_width:!0,
                            column_span:"span12",
                            offset_span:"",
                            id:"",
                            classes:"",
                            children:[ {
                                t:"bsbuttontoolbar",
                                override:[],
                                html:'<div class="btn-toolbar" id="dom-elem-28"> <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div>                  </div>',
                                css:"",
                                pos:{
                                    x:20,
                                    y:482
                                },
                                sz:{
                                    w:940,
                                    h:30
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                pull:"",
                                id:"",
                                classes:"",
                                children:[ {
                                    t:"bsbuttongroup",
                                    override:[],
                                    html:'<div class="btn-group" id="dom-elem-29">  <div class="child-place child-place-0"></div>  <div class="child-place child-place-1"></div></div>',
                                    css:"",
                                    pos:{
                                        x:97,
                                        y:500
                                    },
                                    sz:{
                                        w:268,
                                        h:30
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    pull:"",
                                    id:"",
                                    classes:"",
                                    children:[ {
                                        t:"bsbutton",
                                        override:[],
                                        html:'<button class="btn" id="dom-elem-30">      <span class="editable-element">Primary Button</span></button>',
                                        css:"",
                                        pos:{
                                            x:71,
                                            y:0
                                        },
                                        sz:{
                                            w:121,
                                            h:30
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        btn_type:"btn-primary",
                                        btn_size:"",
                                        pull:"",
                                        id:"",
                                        classes:"",
                                        children:[ {
                                            t:"ficon",
                                            override:[ "font_face_size", "font_size", "text_color" ],
                                            html:'<i class="icon icon-star-empty" id="dom-elem-31"></i>',
                                            css:"",
                                            pos:{
                                                x:203,
                                                y:480
                                            },
                                            sz:{
                                                w:14,
                                                h:14
                                            },
                                            is_locked:!1,
                                            snapped:!0,
                                            edited_color:!0,
                                            text_color:{
                                                R:255,
                                                G:255,
                                                B:255,
                                                A:1
                                            },
                                            font_size:"14px",
                                            pull:"",
                                            id:"",
                                            classes:"",
                                            children:[]
                                        } ]
                                    }, {
                                        t:"bsbutton",
                                        override:[],
                                        html:'<button class="btn" id="dom-elem-32"><span class="editable-element">Button two</span></button>',
                                        css:"",
                                        pos:{
                                            x:318,
                                            y:483
                                        },
                                        sz:{
                                            w:95,
                                            h:30
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        btn_type:"",
                                        btn_size:"",
                                        pull:"",
                                        id:"",
                                        classes:"",
                                        children:[]
                                    } ]
                                }, {
                                    t:"bsbuttongroup",
                                    override:[],
                                    html:'<div class="btn-group" id="dom-elem-110"> <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div></div>',
                                    css:"",
                                    pos:{
                                        x:245,
                                        y:500
                                    },
                                    sz:{
                                        w:173,
                                        h:30
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    pull:"",
                                    id:"",
                                    classes:"",
                                    children:[ {
                                        t:"bsbutton",
                                        override:[],
                                        html:'<button class="btn" id="dom-elem-34"><span class="editable-element">Another</span></button>',
                                        css:"",
                                        pos:{
                                            x:0,
                                            y:0
                                        },
                                        sz:{
                                            w:76,
                                            h:30
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        btn_type:"",
                                        btn_size:"",
                                        pull:"",
                                        id:"",
                                        classes:"",
                                        children:[]
                                    }, {
                                        t:"bsbutton",
                                        override:[],
                                        html:'<button class="btn" id="dom-elem-35"><span class="editable-element">And again</span></button>',
                                        css:"",
                                        pos:{
                                            x:71,
                                            y:0
                                        },
                                        sz:{
                                            w:90,
                                            h:30
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        btn_type:"",
                                        btn_size:"",
                                        pull:"",
                                        id:"",
                                        classes:"",
                                        children:[]
                                    } ]
                                } ]
                            }, {
                                t:"bsparagraph",
                                override:[ "margin_top", "margin_right", "margin_bottom", "margin_left" ],
                                html:'<div class="dom-body-text editable-element paragraph" id="dom-elem-36"><p>Maybe try some buttons like these. You can use icons and snap them into the buttons.</p></div>',
                                css:"",
                                pos:{
                                    x:72,
                                    y:605
                                },
                                sz:{
                                    w:940,
                                    h:20
                                },
                                is_locked:!1,
                                snapped:!0,
                                edited_color:!0,
                                auto_height:!0,
                                auto_width:!0,
                                margin_top:"10px",
                                margin_right:"0px",
                                margin_bottom:"10px",
                                margin_left:"0px",
                                pull:"",
                                id:"",
                                classes:"",
                                children:[]
                            } ]
                        } ]
                    } ]
                }, {
                    t:"bscontainer",
                    override:[ "padding_top", "padding_right", "padding_bottom", "padding_left", "border_top_width", "border_top_color", "border_top_style", "border_bottom_width", "border_bottom_color", "border_bottom_style", "border_left_width", "border_left_color", "border_left_style", "border_right_width", "border_right_color", "border_right_style", "fill_color" ],
                    html:'<div class="bsc container-fluid" id="dom-elem-53">                              <div class="child-place child-place-0"></div></div>',
                    css:"",
                    pos:{
                        x:0,
                        y:552
                    },
                    sz:{
                        w:1170,
                        h:272
                    },
                    is_locked:!1,
                    snapped:!0,
                    auto_height:!0,
                    auto_width:!0,
                    padding_top:"10px",
                    padding_right:"20px",
                    padding_bottom:"30px",
                    padding_left:"20px",
                    fill:{
                        R:248,
                        G:248,
                        B:248,
                        A:1
                    },
                    layout_type:"container-fluid",
                    border_top_color:{
                        R:230,
                        G:230,
                        B:230,
                        A:1
                    },
                    border_top_style:"solid",
                    border_top_width:1,
                    border_right_color:{
                        R:230,
                        G:230,
                        B:230,
                        A:1
                    },
                    border_right_style:"solid",
                    border_right_width:1,
                    border_bottom_color:{
                        R:230,
                        G:230,
                        B:230,
                        A:1
                    },
                    border_bottom_style:"solid",
                    border_bottom_width:1,
                    border_left_color:{
                        R:230,
                        G:230,
                        B:230,
                        A:1
                    },
                    border_left_style:"solid",
                    border_left_width:1,
                    id:"",
                    classes:"",
                    children:[ {
                        t:"bscontainer",
                        override:[],
                        html:'<div class="bsc container" id="dom-elem-19">           <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div>           </div>',
                        css:"",
                        pos:{
                            x:115,
                            y:552
                        },
                        sz:{
                            w:940,
                            h:240
                        },
                        is_locked:!1,
                        snapped:!0,
                        auto_height:!0,
                        auto_width:!0,
                        layout_type:"container",
                        id:"",
                        classes:"",
                        children:[ {
                            t:"bspageheading",
                            override:[ "margin_top", "margin_right", "margin_bottom", "margin_left" ],
                            html:'<div class="page-header" id="dom-elem-54">\n  <h1 class="">\n    <span class="editable-element">Responsive</span> <div class="child-place child-place-0"></div>\n    </h1>\n</div>',
                            css:"",
                            pos:{
                                x:77,
                                y:614
                            },
                            sz:{
                                w:940,
                                h:60
                            },
                            is_locked:!1,
                            snapped:!0,
                            edited_color:!0,
                            auto_height:!0,
                            auto_width:!0,
                            margin_top:"10px",
                            margin_right:"0px",
                            margin_bottom:"30px",
                            margin_left:"0px",
                            pull:"",
                            id:"",
                            classes:"",
                            children:[ {
                                t:"bssubheading",
                                override:[],
                                html:'<small class="editable-element" id="dom-elem-40">Use bootstrap layouts and containers</small>',
                                css:"",
                                pos:{
                                    x:282,
                                    y:291
                                },
                                sz:{
                                    w:419,
                                    h:29
                                },
                                is_locked:!1,
                                snapped:!0,
                                edited_color:!0,
                                auto_height:!0,
                                auto_width:!0,
                                id:"",
                                classes:"",
                                children:[]
                            } ]
                        }, {
                            t:"bsrow",
                            override:[],
                            html:'<div class="row-fluid" id="dom-elem-88"> <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div></div>',
                            css:"",
                            pos:{
                                x:77,
                                y:694
                            },
                            sz:{
                                w:940,
                                h:130
                            },
                            is_locked:!1,
                            snapped:!0,
                            auto_height:!0,
                            auto_width:!0,
                            id:"",
                            classes:"",
                            children:[ {
                                t:"bscolumn",
                                override:[],
                                html:'<span class="column span3" id="dom-elem-89">       <div class="child-place child-place-0"></div></span>',
                                css:"",
                                pos:{
                                    x:65,
                                    y:349
                                },
                                sz:{
                                    w:373,
                                    h:110
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                column_span:"span4",
                                offset_span:"",
                                id:"",
                                classes:"",
                                children:[ {
                                    t:"bsparagraph",
                                    override:[],
                                    html:'<div class="dom-body-text editable-element paragraph" id="dom-elem-43"><p>Select one of the columns to the right and <b>drag it\'s resize handles</b> to resize it.</p><p><b>Right click</b> to add more columns.&nbsp;</p><p>This page is responsive. Resize it to see things reflow!</p></div>',
                                    css:"",
                                    pos:{
                                        x:20,
                                        y:392
                                    },
                                    sz:{
                                        w:300,
                                        h:120
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    edited_color:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    pull:"",
                                    id:"",
                                    classes:"",
                                    children:[]
                                } ]
                            }, {
                                t:"bscolumn",
                                override:[],
                                html:'<span class="column span8" id="dom-elem-90">        <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div>        </span>',
                                css:"",
                                pos:{
                                    x:385,
                                    y:349
                                },
                                sz:{
                                    w:772,
                                    h:90
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                column_span:"span8",
                                offset_span:"",
                                id:"",
                                classes:"",
                                children:[ {
                                    t:"bsrow",
                                    override:[],
                                    html:'<div class="row-fluid" id="dom-elem-92"> <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div></div>',
                                    css:"",
                                    pos:{
                                        x:260,
                                        y:392
                                    },
                                    sz:{
                                        w:620,
                                        h:60
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    id:"",
                                    classes:"",
                                    children:[ {
                                        t:"bscolumn",
                                        override:[],
                                        html:'<span class="span6 column"></span>',
                                        css:"",
                                        pos:{
                                            x:435,
                                            y:712
                                        },
                                        sz:{
                                            w:573,
                                            h:60
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        column_span:"span6",
                                        offset_span:"",
                                        id:"",
                                        classes:"",
                                        children:[]
                                    }, {
                                        t:"bscolumn",
                                        override:[],
                                        html:'<span class="span6 column"></span>',
                                        css:"",
                                        pos:{
                                            x:808,
                                            y:406
                                        },
                                        sz:{
                                            w:573,
                                            h:60
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        column_span:"span6",
                                        offset_span:"",
                                        id:"",
                                        classes:"",
                                        children:[]
                                    } ]
                                }, {
                                    t:"bsparagraph",
                                    override:[ "padding_top", "padding_right", "padding_bottom", "padding_left", "font_size", "alignment", "text_color", "line_height" ],
                                    html:'<div class="dom-body-text editable-element paragraph" id="dom-elem-48"><p>The red borders mean it\'s empty. Drag something in there!<br></p></div>',
                                    css:"",
                                    pos:{
                                        x:340,
                                        y:452
                                    },
                                    sz:{
                                        w:620,
                                        h:29
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    edited_color:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    padding_top:"10px",
                                    padding_right:"0px",
                                    padding_bottom:"0px",
                                    padding_left:"0px",
                                    pull:"",
                                    font_size:"15px",
                                    a:"center",
                                    text_color:{
                                        R:153,
                                        G:153,
                                        B:153,
                                        A:1
                                    },
                                    h:"19px",
                                    id:"",
                                    classes:"",
                                    children:[]
                                } ]
                            } ]
                        } ]
                    } ]
                }, {
                    t:"bscontainer",
                    override:[ "padding_top", "padding_right", "padding_bottom", "padding_left" ],
                    html:'<div class="bsc container" id="dom-elem-67">            <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div>                         </div>',
                    css:"",
                    pos:{
                        x:115,
                        y:874
                    },
                    sz:{
                        w:940,
                        h:309
                    },
                    is_locked:!1,
                    snapped:!0,
                    auto_height:!0,
                    auto_width:!0,
                    padding_top:"10px",
                    padding_right:"0px",
                    padding_bottom:"30px",
                    padding_left:"0px",
                    layout_type:"container",
                    id:"",
                    classes:"",
                    children:[ {
                        t:"bspageheading",
                        override:[ "margin_top", "margin_right", "margin_bottom", "margin_left" ],
                        html:'<div class="page-header" id="dom-elem-95">\n  <h1>\n    <span class="editable-element">Tables!</span>\n   <div class="child-place child-place-0"></div></h1>\n</div>',
                        css:"",
                        pos:{
                            x:115,
                            y:934
                        },
                        sz:{
                            w:940,
                            h:60
                        },
                        is_locked:!1,
                        snapped:!0,
                        edited_color:!0,
                        auto_height:!0,
                        auto_width:!0,
                        margin_top:"10px",
                        margin_right:"0px",
                        margin_bottom:"30px",
                        margin_left:"0px",
                        pull:"",
                        id:"",
                        classes:"",
                        children:[ {
                            t:"bssubheading",
                            override:[],
                            html:'<small class="editable-element" id="dom-elem-51">Quickly layout tabular data</small>',
                            css:"",
                            pos:{
                                x:235,
                                y:923
                            },
                            sz:{
                                w:299,
                                h:29
                            },
                            is_locked:!1,
                            snapped:!0,
                            edited_color:!0,
                            auto_height:!0,
                            auto_width:!0,
                            id:"",
                            classes:"",
                            children:[]
                        } ]
                    }, {
                        t:"bsrow",
                        override:[],
                        html:'<div class="row-fluid" id="dom-elem-97"> <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div></div>',
                        css:"",
                        pos:{
                            x:115,
                            y:1014
                        },
                        sz:{
                            w:940,
                            h:149
                        },
                        is_locked:!1,
                        snapped:!0,
                        auto_height:!0,
                        auto_width:!0,
                        id:"",
                        classes:"",
                        children:[ {
                            t:"bscolumn",
                            override:[],
                            html:'<span class="column span4" id="dom-elem-59">          <div class="child-place child-place-0"></div></span>',
                            css:"",
                            pos:{
                                x:125,
                                y:1008
                            },
                            sz:{
                                w:373,
                                h:50
                            },
                            is_locked:!1,
                            snapped:!0,
                            auto_height:!0,
                            auto_width:!0,
                            column_span:"span4",
                            offset_span:"",
                            id:"",
                            classes:"",
                            children:[ {
                                t:"bsparagraph",
                                override:[],
                                html:'<div class="dom-body-text editable-element paragraph" id="dom-elem-54"><p>Select a cell and<b> right click</b> to add/remove rows and columns.<br></p></div>',
                                css:"",
                                pos:{
                                    x:20,
                                    y:632
                                },
                                sz:{
                                    w:300,
                                    h:40
                                },
                                is_locked:!1,
                                snapped:!0,
                                edited_color:!0,
                                auto_height:!0,
                                auto_width:!0,
                                pull:"",
                                id:"",
                                classes:"",
                                children:[]
                            } ]
                        }, {
                            t:"bscolumn",
                            override:[],
                            html:'<span class="column span8" id="dom-elem-99">        <div class="child-place child-place-0"></div></span>',
                            css:"",
                            pos:{
                                x:445,
                                y:1008
                            },
                            sz:{
                                w:772,
                                h:149
                            },
                            is_locked:!1,
                            snapped:!0,
                            auto_height:!0,
                            auto_width:!0,
                            column_span:"span8",
                            offset_span:"",
                            id:"",
                            classes:"",
                            children:[ {
                                t:"bstable",
                                override:[],
                                html:'<table class="table table-striped table-bordered" id="dom-elem-61">\n  <thead> <tr class="child-place child-place-0"></tr></thead>\n  <tbody class=""> <tr class="child-place child-place-1"></tr>  <tr class="child-place child-place-2"></tr> <tr class="child-place child-place-3"></tr> </tbody>\n</table>',
                                css:"",
                                pos:{
                                    x:340,
                                    y:572
                                },
                                sz:{
                                    w:620,
                                    h:149
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                stripe_rows:"table-striped",
                                border_rows:"table-bordered",
                                condensed:"",
                                pull:"",
                                id:"",
                                classes:"",
                                children:[ {
                                    t:"bstableheadrow",
                                    override:[],
                                    html:'<tr class="bs-head" id="dom-elem-36">\n  \n  \n  \n <td class="child-place child-place-0"></td> <td class="child-place child-place-1"></td> <td class="child-place child-place-2"></td></tr>',
                                    css:"",
                                    pos:{
                                        x:354,
                                        y:602
                                    },
                                    sz:{
                                        w:1169,
                                        h:36
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    id:"",
                                    classes:"",
                                    children:[ {
                                        t:"bstableheadcell",
                                        override:[],
                                        html:'<th class="bs-head-cell editable-element" id="dom-elem-63">Is it</th>',
                                        css:"",
                                        pos:{
                                            x:0,
                                            y:0
                                        },
                                        sz:{
                                            w:164,
                                            h:36
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        id:"",
                                        classes:"",
                                        children:[]
                                    }, {
                                        t:"bstableheadcell",
                                        override:[],
                                        html:'<th class="bs-head-cell editable-element" id="dom-elem-64">Easel</th>',
                                        css:"",
                                        pos:{
                                            x:64,
                                            y:0
                                        },
                                        sz:{
                                            w:140,
                                            h:36
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        id:"",
                                        classes:"",
                                        children:[]
                                    }, {
                                        t:"bstableheadcell",
                                        override:[],
                                        html:'<th class="bs-head-cell editable-element" id="dom-elem-65">Code By Hand</th>',
                                        css:"",
                                        pos:{
                                            x:128,
                                            y:0
                                        },
                                        sz:{
                                            w:303,
                                            h:36
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        id:"",
                                        classes:"",
                                        children:[]
                                    } ]
                                }, {
                                    t:"bstablerow",
                                    override:[],
                                    html:'<tr class="bs-body" id="dom-elem-40">\n  \n  \n  \n <td class="child-place child-place-0"></td> <td class="child-place child-place-1"></td> <td class="child-place child-place-2"></td></tr>',
                                    css:"",
                                    pos:{
                                        x:354,
                                        y:638
                                    },
                                    sz:{
                                        w:1169,
                                        h:37
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    id:"",
                                    classes:"",
                                    children:[ {
                                        t:"bstablecell",
                                        override:[],
                                        html:'<td class="bs-cell" id="dom-elem-67"><span class="editable-element">Visual?<br></span>         </td>',
                                        css:"",
                                        pos:{
                                            x:0,
                                            y:0
                                        },
                                        sz:{
                                            w:167,
                                            h:37
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        id:"",
                                        classes:"",
                                        children:[]
                                    }, {
                                        t:"bstablecell",
                                        override:[],
                                        html:'<td class="bs-cell" id="dom-elem-68"><span class="editable-element">Yes</span></td>',
                                        css:"",
                                        pos:{
                                            x:108,
                                            y:0
                                        },
                                        sz:{
                                            w:144,
                                            h:37
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        id:"",
                                        classes:"",
                                        children:[]
                                    }, {
                                        t:"bstablecell",
                                        override:[],
                                        html:'<td class="bs-cell" id="dom-elem-69"><span class="editable-element">No</span></td>',
                                        css:"",
                                        pos:{
                                            x:146,
                                            y:0
                                        },
                                        sz:{
                                            w:303,
                                            h:37
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        id:"",
                                        classes:"",
                                        children:[]
                                    } ]
                                }, {
                                    t:"bstablerow",
                                    override:[],
                                    html:'<tr class="bs-body" id="dom-elem-44">\n  \n  \n  \n <td class="child-place child-place-0"></td> <td class="child-place child-place-1"></td> <td class="child-place child-place-2"></td></tr>',
                                    css:"",
                                    pos:{
                                        x:354,
                                        y:675
                                    },
                                    sz:{
                                        w:1169,
                                        h:37
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    id:"",
                                    classes:"",
                                    children:[ {
                                        t:"bstablecell",
                                        override:[],
                                        html:'<td class="bs-cell" id="dom-elem-71">  <span class="editable-element">Easy?</span> </td>',
                                        css:"",
                                        pos:{
                                            x:0,
                                            y:0
                                        },
                                        sz:{
                                            w:171,
                                            h:37
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        id:"",
                                        classes:"",
                                        children:[]
                                    }, {
                                        t:"bstablecell",
                                        override:[],
                                        html:'<td class="bs-cell" id="dom-elem-72"><span class="editable-element">Yes</span></td>',
                                        css:"",
                                        pos:{
                                            x:108,
                                            y:0
                                        },
                                        sz:{
                                            w:144,
                                            h:37
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        id:"",
                                        classes:"",
                                        children:[]
                                    }, {
                                        t:"bstablecell",
                                        override:[],
                                        html:'<td class="bs-cell" id="dom-elem-73"><span class="editable-element"><span>No</span><br></span></td>',
                                        css:"",
                                        pos:{
                                            x:146,
                                            y:0
                                        },
                                        sz:{
                                            w:303,
                                            h:37
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        id:"",
                                        classes:"",
                                        children:[]
                                    } ]
                                }, {
                                    t:"bstablerow",
                                    override:[],
                                    html:'<tr class="bs-body" id="dom-elem-48">\n  \n  \n  \n <td class="child-place child-place-0"></td> <td class="child-place child-place-1"></td> <td class="child-place child-place-2"></td></tr>',
                                    css:"",
                                    pos:{
                                        x:354,
                                        y:712
                                    },
                                    sz:{
                                        w:1169,
                                        h:37
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    id:"",
                                    classes:"",
                                    children:[ {
                                        t:"bstablecell",
                                        override:[],
                                        html:'<td class="bs-cell" id="dom-elem-75"> <span class="editable-element">Fast?</span> </td>',
                                        css:"",
                                        pos:{
                                            x:0,
                                            y:0
                                        },
                                        sz:{
                                            w:171,
                                            h:37
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        id:"",
                                        classes:"",
                                        children:[]
                                    }, {
                                        t:"bstablecell",
                                        override:[],
                                        html:'<td class="bs-cell" id="dom-elem-76"><span class="editable-element">Yes<br></span></td>',
                                        css:"",
                                        pos:{
                                            x:108,
                                            y:0
                                        },
                                        sz:{
                                            w:145,
                                            h:37
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        id:"",
                                        classes:"",
                                        children:[]
                                    }, {
                                        t:"bstablecell",
                                        override:[],
                                        html:'<td class="bs-cell" id="dom-elem-77"><span class="editable-element">No<br></span></td>',
                                        css:"",
                                        pos:{
                                            x:146,
                                            y:0
                                        },
                                        sz:{
                                            w:303,
                                            h:37
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        id:"",
                                        classes:"",
                                        children:[]
                                    } ]
                                } ]
                            } ]
                        } ]
                    } ]
                }, {
                    t:"bscontainer",
                    override:[ "padding_top", "padding_right", "padding_bottom", "padding_left", "border_top_width", "border_top_color", "border_top_style", "border_bottom_width", "border_bottom_color", "border_bottom_style", "border_left_width", "border_left_color", "border_left_style", "border_right_width", "border_right_color", "border_right_style", "fill_color" ],
                    html:'<div class="bsc container-fluid" id="dom-elem-94">                  <div class="child-place child-place-0"></div></div>',
                    css:"",
                    pos:{
                        x:115,
                        y:1183
                    },
                    sz:{
                        w:1170,
                        h:464
                    },
                    is_locked:!1,
                    snapped:!0,
                    auto_height:!0,
                    auto_width:!0,
                    padding_top:"10px",
                    padding_right:"20px",
                    padding_bottom:"30px",
                    padding_left:"20px",
                    fill:{
                        R:248,
                        G:248,
                        B:248,
                        A:1
                    },
                    layout_type:"container-fluid",
                    border_top_color:{
                        R:230,
                        G:230,
                        B:230,
                        A:1
                    },
                    border_top_style:"solid",
                    border_top_width:1,
                    border_right_color:{
                        R:230,
                        G:230,
                        B:230,
                        A:1
                    },
                    border_right_style:"solid",
                    border_right_width:1,
                    border_bottom_color:{
                        R:230,
                        G:230,
                        B:230,
                        A:1
                    },
                    border_bottom_style:"solid",
                    border_bottom_width:1,
                    border_left_color:{
                        R:230,
                        G:230,
                        B:230,
                        A:1
                    },
                    border_left_style:"solid",
                    border_left_width:1,
                    id:"",
                    classes:"",
                    children:[ {
                        t:"bscontainer",
                        override:[],
                        html:'<div class="bsc container" id="dom-elem-98">          <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div>        </div>',
                        css:"",
                        pos:{
                            x:115,
                            y:1183
                        },
                        sz:{
                            w:940,
                            h:365
                        },
                        is_locked:!1,
                        snapped:!0,
                        auto_height:!0,
                        auto_width:!0,
                        layout_type:"container",
                        id:"",
                        classes:"",
                        children:[ {
                            t:"bspageheading",
                            override:[ "margin_top", "margin_right", "margin_bottom", "margin_left" ],
                            html:'<div class="page-header" id="dom-elem-89">\n  <h1 class="">\n    <span class="editable-element">Forms</span> <div class="child-place child-place-0"></div>\n         </h1>\n</div>',
                            css:"",
                            pos:{
                                x:115,
                                y:1233
                            },
                            sz:{
                                w:940,
                                h:60
                            },
                            is_locked:!1,
                            snapped:!0,
                            edited_color:!0,
                            auto_height:!0,
                            auto_width:!0,
                            margin_top:"10px",
                            margin_right:"0px",
                            margin_bottom:"30px",
                            margin_left:"0px",
                            pull:"",
                            id:"",
                            classes:"",
                            children:[ {
                                t:"bssubheading",
                                override:[],
                                html:'<small class="editable-element" id="dom-elem-76">Make forms fast</small>',
                                css:"",
                                pos:{
                                    x:263,
                                    y:1219
                                },
                                sz:{
                                    w:179,
                                    h:29
                                },
                                is_locked:!1,
                                snapped:!0,
                                edited_color:!0,
                                auto_height:!0,
                                auto_width:!0,
                                id:"",
                                classes:"",
                                children:[]
                            } ]
                        }, {
                            t:"bsrow",
                            override:[],
                            html:'<div class="row-fluid" id="dom-elem-115"> <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div></div>',
                            css:"",
                            pos:{
                                x:115,
                                y:1313
                            },
                            sz:{
                                w:940,
                                h:255
                            },
                            is_locked:!1,
                            snapped:!0,
                            auto_height:!0,
                            auto_width:!0,
                            id:"",
                            classes:"",
                            children:[ {
                                t:"bscolumn",
                                override:[],
                                html:'<span class="column span4" id="dom-elem-116">                  <div class="child-place child-place-0"></div></span>',
                                css:"",
                                pos:{
                                    x:122,
                                    y:1293
                                },
                                sz:{
                                    w:373,
                                    h:80
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                column_span:"span4",
                                offset_span:"",
                                id:"",
                                classes:"",
                                children:[ {
                                    t:"bsparagraph",
                                    override:[],
                                    html:'<div class="dom-body-text editable-element paragraph" id="dom-elem-79"><p>Easel helps you make bootstrap forms look good.</p><p>Add in real text elements, dropdown boxes, checkboxes and more.&nbsp;</p></div>',
                                    css:"",
                                    pos:{
                                        x:20,
                                        y:1191
                                    },
                                    sz:{
                                        w:300,
                                        h:90
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    edited_color:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    pull:"",
                                    id:"",
                                    classes:"",
                                    children:[]
                                } ]
                            }, {
                                t:"bscolumn",
                                override:[],
                                html:'<span class="column span8" id="dom-elem-117">                                                 <div class="child-place child-place-0"></div>          </span>',
                                css:"",
                                pos:{
                                    x:520,
                                    y:1293
                                },
                                sz:{
                                    w:772,
                                    h:255
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                column_span:"span8",
                                offset_span:"",
                                id:"",
                                classes:"",
                                children:[ {
                                    t:"bsform",
                                    override:[],
                                    html:'<form class="bs-form form-horizontal" action="#" id="dom-elem-95">      <div class="child-place child-place-0"></div>           <div class="child-place child-place-1"></div>               <div class="child-place child-place-2"></div>                             <div class="child-place child-place-4"></div> <div class="child-place child-place-3"></div>            </form>',
                                    css:"",
                                    pos:{
                                        x:340,
                                        y:1191
                                    },
                                    sz:{
                                        w:620,
                                        h:235
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    form_type:"form-horizontal",
                                    pull:"",
                                    id:"",
                                    classes:"",
                                    children:[ {
                                        t:"bscontrolgroup",
                                        override:[],
                                        html:'<div class="control-group" id="dom-elem-119">\n  <div class="child-place child-place-0"></div>\n  <div class="controls">\n         <div class="child-place child-place-1"></div></div>\n</div>',
                                        css:"",
                                        pos:{
                                            x:340,
                                            y:1531
                                        },
                                        sz:{
                                            w:444,
                                            h:30
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        id:"",
                                        classes:"",
                                        children:[ {
                                            t:"bslabel",
                                            override:[],
                                            html:'<label class="control-label editable-element" id="dom-elem-83">Name</label>',
                                            css:"",
                                            pos:{
                                                x:367,
                                                y:1539
                                            },
                                            sz:{
                                                w:160,
                                                h:25
                                            },
                                            is_locked:!1,
                                            snapped:!0,
                                            edited_color:!0,
                                            auto_height:!0,
                                            auto_width:!0,
                                            id:"",
                                            classes:"",
                                            children:[]
                                        }, {
                                            t:"bstextinput",
                                            override:[],
                                            html:'<input type="text" id="dom-elem-84" class="">',
                                            css:"",
                                            pos:{
                                                x:500,
                                                y:1191
                                            },
                                            sz:{
                                                w:284,
                                                h:30
                                            },
                                            is_locked:!1,
                                            snapped:!0,
                                            edited_color:!0,
                                            auto_height:!0,
                                            auto_width:!0,
                                            size_class:"input-xlarge",
                                            input_type:"text",
                                            query_type:"",
                                            placeholder:"Bob Reynolds",
                                            pull:"",
                                            id:"",
                                            classes:"",
                                            children:[]
                                        } ]
                                    }, {
                                        t:"bscontrolgroup",
                                        override:[],
                                        html:'<div class="control-group" id="dom-elem-122">\n  <div class="child-place child-place-0"></div>\n  <div class="controls">\n          <div class="child-place child-place-1"></div>                       </div>\n</div>',
                                        css:"",
                                        pos:{
                                            x:350,
                                            y:1251
                                        },
                                        sz:{
                                            w:444,
                                            h:50
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        id:"",
                                        classes:"",
                                        children:[ {
                                            t:"bslabel",
                                            override:[],
                                            html:'<label class="control-label editable-element" id="dom-elem-86">Thoughts?</label>',
                                            css:"",
                                            pos:{
                                                x:340,
                                                y:1241
                                            },
                                            sz:{
                                                w:160,
                                                h:25
                                            },
                                            is_locked:!1,
                                            snapped:!0,
                                            edited_color:!0,
                                            auto_height:!0,
                                            auto_width:!0,
                                            id:"",
                                            classes:"",
                                            children:[]
                                        }, {
                                            t:"bstextarea",
                                            override:[],
                                            html:'<textarea id="dom-elem-87" class=""></textarea>',
                                            css:"",
                                            pos:{
                                                x:595,
                                                y:1366
                                            },
                                            sz:{
                                                w:284,
                                                h:57
                                            },
                                            is_locked:!1,
                                            snapped:!0,
                                            edited_color:!0,
                                            auto_height:!1,
                                            auto_width:!0,
                                            size_class:"input-xlarge",
                                            placeholder:"Put your thoughts here.",
                                            pull:"",
                                            id:"",
                                            classes:"",
                                            children:[]
                                        } ]
                                    }, {
                                        t:"bscontrolgroup",
                                        override:[],
                                        html:'<div class="control-group" id="dom-elem-138">\n  <div class="child-place child-place-0"></div>\n  <div class="controls">\n           <div class="child-place child-place-1"></div>                          </div>\n</div>',
                                        css:"",
                                        pos:{
                                            x:350,
                                            y:1321
                                        },
                                        sz:{
                                            w:444,
                                            h:30
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        id:"",
                                        classes:"",
                                        children:[ {
                                            t:"bslabel",
                                            override:[],
                                            html:'<label class="control-label editable-element" id="dom-elem-89">I like&nbsp;</label>',
                                            css:"",
                                            pos:{
                                                x:340,
                                                y:1311
                                            },
                                            sz:{
                                                w:160,
                                                h:25
                                            },
                                            is_locked:!1,
                                            snapped:!0,
                                            edited_color:!0,
                                            auto_height:!0,
                                            auto_width:!0,
                                            id:"",
                                            classes:"",
                                            children:[]
                                        }, {
                                            t:"bsselect",
                                            override:[],
                                            html:'<select id="dom-elem-90"><option value="Turtles">Turtles</option><option value="Robots">Robots</option><option value="Ninjas">Ninjas</option><option value="Pirates">Pirates</option><option value="All of the above">All of the above</option></select>',
                                            css:"",
                                            pos:{
                                                x:500,
                                                y:1361
                                            },
                                            sz:{
                                                w:220,
                                                h:30
                                            },
                                            is_locked:!1,
                                            snapped:!0,
                                            edited_color:!0,
                                            auto_height:!0,
                                            auto_width:!1,
                                            options:"Turtles\r\nRobots\r\nNinjas\r\nPirates\r\nAll of the above",
                                            pull:"",
                                            id:"",
                                            classes:"",
                                            children:[]
                                        } ]
                                    }, {
                                        t:"bsformactions",
                                        override:[],
                                        html:'<div class="form-actions" id="dom-elem-146"> <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div></div>',
                                        css:"",
                                        pos:{
                                            x:390,
                                            y:1485
                                        },
                                        sz:{
                                            w:620,
                                            h:70
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        pull:"",
                                        id:"",
                                        classes:"",
                                        children:[ {
                                            t:"bsbutton",
                                            override:[],
                                            html:'<button class="btn btn-primary"><span class="editable-element">Save</span></button>',
                                            css:"",
                                            pos:{
                                                x:583,
                                                y:1469
                                            },
                                            sz:{
                                                w:58,
                                                h:30
                                            },
                                            is_locked:!1,
                                            snapped:!0,
                                            edited_color:!0,
                                            auto_height:!0,
                                            auto_width:!0,
                                            btn_type:"btn-primary",
                                            btn_size:"",
                                            pull:"",
                                            id:"",
                                            classes:"",
                                            children:[]
                                        }, {
                                            t:"bsbutton",
                                            override:[],
                                            html:'<button class="btn"><span class="editable-element">Cancel</span></button>',
                                            css:"",
                                            pos:{
                                                x:649,
                                                y:1469
                                            },
                                            sz:{
                                                w:71,
                                                h:30
                                            },
                                            is_locked:!1,
                                            snapped:!0,
                                            edited_color:!0,
                                            auto_height:!0,
                                            auto_width:!0,
                                            btn_type:"",
                                            btn_size:"",
                                            pull:"",
                                            id:"",
                                            classes:"",
                                            children:[]
                                        } ]
                                    }, {
                                        t:"bscontrolgroup",
                                        override:[],
                                        html:'<div class="control-group" id="dom-elem-135">\n  \n  <div class="controls">\n        <div class="child-place child-place-0"></div></div>\n</div>',
                                        css:"",
                                        pos:{
                                            x:435,
                                            y:1637
                                        },
                                        sz:{
                                            w:444,
                                            h:35
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        id:"",
                                        classes:"",
                                        children:[ {
                                            t:"bscheckbox",
                                            override:[],
                                            html:'<label class="checkbox" id="dom-elem-95">\n  <input type="checkbox" value="">\n  <span class="editable-element">I agree!</span>\n</label>',
                                            css:"",
                                            pos:{
                                                x:595,
                                                y:1535
                                            },
                                            sz:{
                                                w:440,
                                                h:25
                                            },
                                            is_locked:!1,
                                            snapped:!0,
                                            edited_color:!0,
                                            auto_height:!0,
                                            auto_width:!0,
                                            is_checked:"false",
                                            pull:"",
                                            id:"",
                                            classes:"",
                                            children:[]
                                        } ]
                                    } ]
                                } ]
                            } ]
                        } ]
                    } ]
                }, {
                    t:"bscontainer",
                    override:[ "padding_top", "padding_right", "padding_bottom", "padding_left" ],
                    html:'<div class="bsc container" id="dom-elem-110">     <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div>                </div>',
                    css:"",
                    pos:{
                        x:115,
                        y:1606
                    },
                    sz:{
                        w:940,
                        h:430
                    },
                    is_locked:!1,
                    snapped:!0,
                    auto_height:!0,
                    auto_width:!0,
                    padding_top:"10px",
                    padding_right:"0px",
                    padding_bottom:"0px",
                    padding_left:"0px",
                    layout_type:"container",
                    id:"",
                    classes:"",
                    children:[ {
                        t:"bspageheading",
                        override:[ "margin_top", "margin_right", "margin_bottom", "margin_left" ],
                        html:'<div class="page-header" id="dom-elem-127">\n  <h1 class="">\n    <span class="editable-element">Extras</span> \n    </h1>\n</div>',
                        css:"",
                        pos:{
                            x:115,
                            y:1626
                        },
                        sz:{
                            w:940,
                            h:60
                        },
                        is_locked:!1,
                        snapped:!0,
                        edited_color:!0,
                        auto_height:!0,
                        auto_width:!0,
                        margin_top:"10px",
                        margin_right:"0px",
                        margin_bottom:"30px",
                        margin_left:"0px",
                        pull:"",
                        id:"",
                        classes:"",
                        children:[]
                    }, {
                        t:"bsrow",
                        override:[],
                        html:'<div class="row-fluid" id="dom-elem-17"> <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div></div>',
                        css:"",
                        pos:{
                            x:115,
                            y:1706
                        },
                        sz:{
                            w:940,
                            h:196
                        },
                        is_locked:!1,
                        snapped:!0,
                        auto_height:!0,
                        auto_width:!0,
                        id:"",
                        classes:"",
                        children:[ {
                            t:"bscolumn",
                            override:[],
                            html:'<span class="column span3" id="dom-elem-23">                                                                                                                                            <div class="child-place child-place-0"></div>                                                                                                                              </span>',
                            css:"",
                            pos:{
                                x:115,
                                y:1718
                            },
                            sz:{
                                w:373,
                                h:118
                            },
                            is_locked:!1,
                            snapped:!0,
                            auto_height:!0,
                            auto_width:!0,
                            column_span:"span4",
                            offset_span:"",
                            id:"",
                            classes:"",
                            children:[ {
                                t:"bsnav",
                                override:[],
                                html:'<ul class="nav">\n  <li class="child-place child-place-0"></li>\n  <li class="child-place child-place-1"></li>\n  <li class="child-place child-place-2"></li>\n</ul>',
                                css:"",
                                pos:{
                                    x:20,
                                    y:1441
                                },
                                sz:{
                                    w:300,
                                    h:118
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                nav_type:"nav-list",
                                is_stacked:"",
                                pull:"",
                                id:"",
                                classes:"well",
                                children:[ {
                                    t:"bsnavlink",
                                    override:[],
                                    html:'<li id="dom-elem-25" class="active"><a href="#" class=""><span class="editable-element">Supports</span></a></li>',
                                    css:"",
                                    pos:{
                                        x:42,
                                        y:1433
                                    },
                                    sz:{
                                        w:268,
                                        h:26
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    edited_color:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    state:"active",
                                    is_divider:"",
                                    id:"",
                                    classes:"",
                                    children:[]
                                }, {
                                    t:"bsnavlink",
                                    override:[],
                                    html:'<li id="dom-elem-26"><a href="#" class=""><span class="editable-element">Side Nav</span></a></li>',
                                    css:"",
                                    pos:{
                                        x:42,
                                        y:1459
                                    },
                                    sz:{
                                        w:268,
                                        h:26
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    edited_color:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    state:"",
                                    is_divider:"",
                                    id:"",
                                    classes:"",
                                    children:[]
                                }, {
                                    t:"bsnavlink",
                                    override:[],
                                    html:'<li id="dom-elem-27"><a href="#" class=""><span class="editable-element">Elements</span></a></li>',
                                    css:"",
                                    pos:{
                                        x:42,
                                        y:1485
                                    },
                                    sz:{
                                        w:268,
                                        h:26
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    edited_color:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    state:"",
                                    is_divider:"",
                                    id:"",
                                    classes:"",
                                    children:[]
                                } ]
                            } ]
                        }, {
                            t:"bscolumn",
                            override:[],
                            html:'<span class="column span9" id="dom-elem-39">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <div class="child-place child-place-2"></div> <div class="child-place child-place-1"></div>                       <div class="child-place child-place-0"></div>                                                       <table class="table dom-placeholder"></table>                                                                                                                                                                                                                                                                                                                                      </span>',
                            css:"",
                            pos:{
                                x:427,
                                y:1671
                            },
                            sz:{
                                w:772,
                                h:196
                            },
                            is_locked:!1,
                            snapped:!0,
                            auto_height:!0,
                            auto_width:!0,
                            column_span:"span8",
                            offset_span:"",
                            id:"",
                            classes:"",
                            children:[ {
                                t:"bsthumbnailgrid",
                                override:[],
                                html:'<ul class="thumbnails">\n  <div class="child-place child-place-0"></div>\n  <div class="child-place child-place-1"></div>\n  <div class="child-place child-place-2"></div>\n</ul>',
                                css:"",
                                pos:{
                                    x:435,
                                    y:1885
                                },
                                sz:{
                                    w:640,
                                    h:120
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                id:"",
                                classes:"",
                                children:[ {
                                    t:"bsthumbnail",
                                    override:[],
                                    html:'<li class="bs-thumb span4" id="dom-elem-118">\n  <div class="thumbnail">\n                  <div class="child-place child-place-0"></div>             <div class="child-place child-place-1"></div>                                                                                                   \n                  </div>\n</li>',
                                    css:"",
                                    pos:{
                                        x:301,
                                        y:519
                                    },
                                    sz:{
                                        w:300,
                                        h:40
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    column_span:"span4",
                                    id:"",
                                    classes:"",
                                    children:[ {
                                        t:"dimg",
                                        name:"400.jpeg",
                                        config:{
                                            border_top_left_radius:".dom-image",
                                            border_bottom_left_radius:".dom-image",
                                            border_top_right_radius:".dom-image",
                                            border_bottom_right_radius:".dom-image",
                                            margin_top:".dom-image",
                                            margin_right:".dom-image",
                                            margin_bottom:".dom-image",
                                            margin_left:".dom-image",
                                            opacity:".dom-image",
                                            box_shadow:".dom-image",
                                            pull:{
                                                node:".dom-image",
                                                type:"custom_class",
                                                options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                                            },
                                            id:{
                                                node:".dom-image",
                                                type:"custom_string_id"
                                            },
                                            classes:{
                                                node:".dom-image",
                                                type:"custom_string_class",
                                                base_classes:"dom-image"
                                            }
                                        },
                                        root:".dom-image",
                                        override_styles:!1,
                                        can_edit:!1,
                                        watch_size:!0,
                                        override:[],
                                        html:'<img class="dom-image">',
                                        css:"",
                                        pos:{
                                            x:150,
                                            y:2057
                                        },
                                        sz:{
                                            w:0,
                                            h:0
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        border_top_left_radius:"0px",
                                        border_bottom_left_radius:"0px",
                                        border_top_right_radius:"0px",
                                        border_bottom_right_radius:"0px",
                                        margin_top:"0px",
                                        margin_right:"0px",
                                        margin_bottom:"0px",
                                        margin_left:"0px",
                                        opacity:1,
                                        box_shadow:"none",
                                        pull:"",
                                        id:"dom-image-107",
                                        classes:"",
                                        url:"http://placekitten.com/g/300/200"
                                    }, {
                                        t:"bsparagraph",
                                        override:[ "margin_top", "margin_right", "margin_bottom", "margin_left" ],
                                        html:'<div class="dom-body-text editable-element paragraph" id="dom-elem-108"><p>Kitten One</p></div>',
                                        css:"",
                                        pos:{
                                            x:265,
                                            y:797
                                        },
                                        sz:{
                                            w:188,
                                            h:20
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        margin_top:"5px",
                                        margin_right:"0px",
                                        margin_bottom:"5px",
                                        margin_left:"0px",
                                        pull:"",
                                        id:"",
                                        classes:"",
                                        children:[]
                                    } ]
                                }, {
                                    t:"bsthumbnail",
                                    override:[],
                                    html:'<li class="bs-thumb span4" id="dom-elem-122">\n  <div class="thumbnail">\n                                                                                                    \n                   <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div>                                  </div>\n</li>',
                                    css:"",
                                    pos:{
                                        x:621,
                                        y:519
                                    },
                                    sz:{
                                        w:300,
                                        h:40
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    column_span:"span4",
                                    id:"",
                                    classes:"",
                                    children:[ {
                                        t:"dimg",
                                        name:"600.jpeg",
                                        config:{
                                            border_top_left_radius:".dom-image",
                                            border_bottom_left_radius:".dom-image",
                                            border_top_right_radius:".dom-image",
                                            border_bottom_right_radius:".dom-image",
                                            margin_top:".dom-image",
                                            margin_right:".dom-image",
                                            margin_bottom:".dom-image",
                                            margin_left:".dom-image",
                                            opacity:".dom-image",
                                            box_shadow:".dom-image",
                                            pull:{
                                                node:".dom-image",
                                                type:"custom_class",
                                                options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                                            },
                                            id:{
                                                node:".dom-image",
                                                type:"custom_string_id"
                                            },
                                            classes:{
                                                node:".dom-image",
                                                type:"custom_string_class",
                                                base_classes:"dom-image"
                                            }
                                        },
                                        root:".dom-image",
                                        override_styles:!1,
                                        can_edit:!1,
                                        watch_size:!0,
                                        override:[],
                                        html:'<img class="dom-image">',
                                        css:"",
                                        pos:{
                                            x:450,
                                            y:2057
                                        },
                                        sz:{
                                            w:0,
                                            h:0
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        border_top_left_radius:"0px",
                                        border_bottom_left_radius:"0px",
                                        border_top_right_radius:"0px",
                                        border_bottom_right_radius:"0px",
                                        margin_top:"0px",
                                        margin_right:"0px",
                                        margin_bottom:"0px",
                                        margin_left:"0px",
                                        opacity:1,
                                        box_shadow:"none",
                                        pull:"",
                                        id:"dom-image-110",
                                        classes:"",
                                        url:"http://placekitten.com/g/600/400"
                                    }, {
                                        t:"bsparagraph",
                                        override:[ "margin_top", "margin_right", "margin_bottom", "margin_left" ],
                                        html:'<div class="dom-body-text editable-element paragraph" id="dom-elem-111"><p>Kitten Two</p></div>',
                                        css:"",
                                        pos:{
                                            x:651,
                                            y:2010
                                        },
                                        sz:{
                                            w:188,
                                            h:20
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        margin_top:"5px",
                                        margin_right:"0px",
                                        margin_bottom:"5px",
                                        margin_left:"0px",
                                        pull:"",
                                        id:"",
                                        classes:"",
                                        children:[]
                                    } ]
                                }, {
                                    t:"bsthumbnail",
                                    override:[],
                                    html:'<li class="bs-thumb span4" id="dom-elem-126">\n  <div class="thumbnail">\n                        \n               <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div>              </div>\n</li>',
                                    css:"",
                                    pos:{
                                        x:301,
                                        y:742
                                    },
                                    sz:{
                                        w:300,
                                        h:40
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    column_span:"span4",
                                    id:"",
                                    classes:"",
                                    children:[ {
                                        t:"dimg",
                                        name:"200.jpeg",
                                        config:{
                                            border_top_left_radius:".dom-image",
                                            border_bottom_left_radius:".dom-image",
                                            border_top_right_radius:".dom-image",
                                            border_bottom_right_radius:".dom-image",
                                            margin_top:".dom-image",
                                            margin_right:".dom-image",
                                            margin_bottom:".dom-image",
                                            margin_left:".dom-image",
                                            opacity:".dom-image",
                                            box_shadow:".dom-image",
                                            pull:{
                                                node:".dom-image",
                                                type:"custom_class",
                                                options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                                            },
                                            id:{
                                                node:".dom-image",
                                                type:"custom_string_id"
                                            },
                                            classes:{
                                                node:".dom-image",
                                                type:"custom_string_class",
                                                base_classes:"dom-image"
                                            }
                                        },
                                        root:".dom-image",
                                        override_styles:!1,
                                        can_edit:!1,
                                        watch_size:!0,
                                        override:[],
                                        html:'<img class="dom-image">',
                                        css:"",
                                        pos:{
                                            x:750,
                                            y:2057
                                        },
                                        sz:{
                                            w:0,
                                            h:0
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        border_top_left_radius:"0px",
                                        border_bottom_left_radius:"0px",
                                        border_top_right_radius:"0px",
                                        border_bottom_right_radius:"0px",
                                        margin_top:"0px",
                                        margin_right:"0px",
                                        margin_bottom:"0px",
                                        margin_left:"0px",
                                        opacity:1,
                                        box_shadow:"none",
                                        pull:"",
                                        id:"dom-image-113",
                                        classes:"",
                                        url:"http://placekitten.com/g/900/600"
                                    }, {
                                        t:"bsparagraph",
                                        override:[ "margin_top", "margin_right", "margin_bottom", "margin_left" ],
                                        html:'<div class="dom-body-text editable-element paragraph" id="dom-elem-114"><p>Kitten Three</p></div>',
                                        css:"",
                                        pos:{
                                            x:862,
                                            y:2010
                                        },
                                        sz:{
                                            w:188,
                                            h:20
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        margin_top:"5px",
                                        margin_right:"0px",
                                        margin_bottom:"5px",
                                        margin_left:"0px",
                                        pull:"",
                                        id:"",
                                        classes:"",
                                        children:[]
                                    } ]
                                } ]
                            }, {
                                t:"bsalert",
                                override:[],
                                html:'<div class="alert" id="dom-elem-52">\n  <div class="child-place child-place-0"></div>\n  <span class="editable-element"><b>Kittens up ahead! </b>Bootstrap has neat thumbnails widgets. So we put kittens in them.<br></span>\n</div>',
                                css:"",
                                pos:{
                                    x:260,
                                    y:888
                                },
                                sz:{
                                    w:620,
                                    h:38
                                },
                                is_locked:!1,
                                snapped:!0,
                                edited_color:!0,
                                auto_height:!0,
                                auto_width:!0,
                                size_type:"",
                                message:"",
                                pull:"",
                                id:"",
                                classes:"",
                                children:[ {
                                    t:"bsbutton",
                                    override:[ "font_face_size", "font_size" ],
                                    html:'<button type="button" class="btn close">x</button>',
                                    css:"",
                                    pos:{
                                        x:939,
                                        y:380
                                    },
                                    sz:{
                                        w:8,
                                        h:20
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    btn_type:"close",
                                    btn_size:"",
                                    pull:"",
                                    font_size:"11pt",
                                    id:"",
                                    classes:"",
                                    children:[]
                                } ]
                            }, {
                                t:"bsnav",
                                override:[ "border_top_width", "border_top_color", "border_top_style", "border_bottom_width", "border_bottom_color", "border_bottom_style", "border_left_width", "border_left_color", "border_left_style", "border_right_width", "border_right_color", "border_right_style" ],
                                html:'<ul class="nav">\n  <li class="child-place child-place-0"></li>\n  <li class="child-place child-place-1"></li>\n  <li class="child-place child-place-2"></li>\n</ul>',
                                css:"",
                                pos:{
                                    x:260,
                                    y:1751
                                },
                                sz:{
                                    w:620,
                                    h:37
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                nav_type:"nav-tabs",
                                is_stacked:"",
                                pull:"",
                                border_top_color:{
                                    R:51,
                                    G:51,
                                    B:51,
                                    A:1
                                },
                                border_top_style:"solid",
                                border_top_width:0,
                                border_right_color:{
                                    R:51,
                                    G:51,
                                    B:51,
                                    A:1
                                },
                                border_right_style:"solid",
                                border_right_width:0,
                                border_bottom_color:{
                                    R:51,
                                    G:51,
                                    B:51,
                                    A:1
                                },
                                border_bottom_style:"solid",
                                border_bottom_width:0,
                                border_left_color:{
                                    R:51,
                                    G:51,
                                    B:51,
                                    A:1
                                },
                                border_left_style:"solid",
                                border_left_width:0,
                                id:"",
                                classes:"",
                                children:[ {
                                    t:"bsnavlink",
                                    override:[],
                                    html:'<li id="dom-elem-131" class="active"><a href="#"><span class="editable-element">And<br></span></a></li>',
                                    css:"",
                                    pos:{
                                        x:315,
                                        y:1408
                                    },
                                    sz:{
                                        w:53,
                                        h:38
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    edited_color:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    state:"active",
                                    is_divider:"",
                                    id:"",
                                    classes:"",
                                    children:[]
                                }, {
                                    t:"bsnavlink",
                                    override:[],
                                    html:'<li id="dom-elem-132"><a href="#"><span class="editable-element">Tabs</span></a></li>',
                                    css:"",
                                    pos:{
                                        x:315,
                                        y:1428
                                    },
                                    sz:{
                                        w:57,
                                        h:38
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    edited_color:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    state:"",
                                    is_divider:"",
                                    id:"",
                                    classes:"",
                                    children:[]
                                }, {
                                    t:"bsnavlink",
                                    override:[],
                                    html:'<li id="dom-elem-133"><a href="#"><span class="editable-element">Too</span></a></li>',
                                    css:"",
                                    pos:{
                                        x:315,
                                        y:1448
                                    },
                                    sz:{
                                        w:50,
                                        h:38
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    edited_color:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    state:"",
                                    is_divider:"",
                                    id:"",
                                    classes:"",
                                    children:[]
                                } ]
                            } ]
                        } ]
                    } ]
                }, {
                    t:"bscontainer",
                    override:[ "padding_top", "padding_right", "padding_bottom", "padding_left", "border_top_width", "border_top_color", "border_top_style", "border_bottom_width", "border_bottom_color", "border_bottom_style", "border_left_width", "border_left_color", "border_left_style", "border_right_width", "border_right_color", "border_right_style", "fill_color" ],
                    html:'<div class="bsc container-fluid" id="dom-elem-135">              <div class="child-place child-place-0"></div></div>',
                    css:"",
                    pos:{
                        x:0,
                        y:2065
                    },
                    sz:{
                        w:1170,
                        h:252
                    },
                    is_locked:!1,
                    snapped:!0,
                    auto_height:!0,
                    auto_width:!0,
                    padding_top:"10px",
                    padding_right:"20px",
                    padding_bottom:"30px",
                    padding_left:"20px",
                    fill:{
                        R:248,
                        G:248,
                        B:248,
                        A:1
                    },
                    layout_type:"container-fluid",
                    border_top_color:{
                        R:230,
                        G:230,
                        B:230,
                        A:1
                    },
                    border_top_style:"solid",
                    border_top_width:1,
                    border_right_color:{
                        R:230,
                        G:230,
                        B:230,
                        A:1
                    },
                    border_right_style:"solid",
                    border_right_width:1,
                    border_bottom_color:{
                        R:230,
                        G:230,
                        B:230,
                        A:1
                    },
                    border_bottom_style:"solid",
                    border_bottom_width:1,
                    border_left_color:{
                        R:230,
                        G:230,
                        B:230,
                        A:1
                    },
                    border_left_style:"solid",
                    border_left_width:1,
                    id:"",
                    classes:"",
                    children:[ {
                        t:"bscontainer",
                        override:[],
                        html:'<div class="bsc container" id="dom-elem-136">          <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div>                   </div>',
                        css:"",
                        pos:{
                            x:115,
                            y:2125
                        },
                        sz:{
                            w:940,
                            h:220
                        },
                        is_locked:!1,
                        snapped:!0,
                        auto_height:!0,
                        auto_width:!0,
                        layout_type:"container",
                        id:"",
                        classes:"",
                        children:[ {
                            t:"bspageheading",
                            override:[ "margin_top", "margin_right", "margin_bottom", "margin_left" ],
                            html:'<div class="page-header" id="dom-elem-137">\n        <h1 class="">\n    <span class="editable-element">Export</span> <div class="child-place child-place-0"></div> \n             </h1>\n</div>',
                            css:"",
                            pos:{
                                x:115,
                                y:2095
                            },
                            sz:{
                                w:940,
                                h:60
                            },
                            is_locked:!1,
                            snapped:!0,
                            edited_color:!0,
                            auto_height:!0,
                            auto_width:!0,
                            margin_top:"10px",
                            margin_right:"0px",
                            margin_bottom:"30px",
                            margin_left:"0px",
                            pull:"",
                            id:"",
                            classes:"",
                            children:[ {
                                t:"bssubheading",
                                override:[],
                                html:'<small class="editable-element" id="dom-elem-124"><span>Export the whole page or just the piece you need</span></small>',
                                css:"",
                                pos:{
                                    x:422,
                                    y:2096
                                },
                                sz:{
                                    w:546,
                                    h:29
                                },
                                is_locked:!1,
                                snapped:!0,
                                edited_color:!0,
                                auto_height:!0,
                                auto_width:!0,
                                id:"",
                                classes:"",
                                children:[]
                            } ]
                        }, {
                            t:"bsrow",
                            override:[],
                            html:'<div class="row-fluid" id="dom-elem-138"> <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div></div>',
                            css:"",
                            pos:{
                                x:115,
                                y:2176
                            },
                            sz:{
                                w:940,
                                h:110
                            },
                            is_locked:!1,
                            snapped:!0,
                            auto_height:!0,
                            auto_width:!0,
                            id:"",
                            classes:"",
                            children:[ {
                                t:"bscolumn",
                                override:[],
                                html:'<span class="span6 column" id="dom-elem-139">          <div class="child-place child-place-0"></div></span>',
                                css:"",
                                pos:{
                                    x:115,
                                    y:2166
                                },
                                sz:{
                                    w:373,
                                    h:60
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                column_span:"span4",
                                offset_span:"",
                                id:"",
                                classes:"",
                                children:[ {
                                    t:"bsparagraph",
                                    override:[],
                                    html:'<div class="dom-body-text editable-element paragraph" id="dom-elem-127"><p>Export the whole page by clicking the menu</p><p><b>File -&gt; Generate All HTML/CSS</b>.<br></p></div>',
                                    css:"",
                                    pos:{
                                        x:115,
                                        y:2176
                                    },
                                    sz:{
                                        w:300,
                                        h:50
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    edited_color:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    pull:"",
                                    id:"",
                                    classes:"",
                                    children:[]
                                } ]
                            }, {
                                t:"bscolumn",
                                override:[],
                                html:'<span class="column span8" id="dom-elem-143">             <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div>                         </span>',
                                css:"",
                                pos:{
                                    x:602,
                                    y:2145
                                },
                                sz:{
                                    w:772,
                                    h:110
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                column_span:"span8",
                                offset_span:"",
                                id:"",
                                classes:"",
                                children:[ {
                                    t:"bsparagraph",
                                    override:[],
                                    html:'<div class="dom-body-text editable-element paragraph" id="dom-elem-129"><p>Or export just a piece of it.&nbsp;</p></div>',
                                    css:"",
                                    pos:{
                                        x:435,
                                        y:2176
                                    },
                                    sz:{
                                        w:620,
                                        h:20
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    edited_color:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    pull:"",
                                    id:"",
                                    classes:"",
                                    children:[]
                                }, {
                                    t:"bswell",
                                    override:[ "fill_color" ],
                                    html:'<div class="well" id="dom-elem-145">                    <div class="child-place child-place-0"></div> <span class="editable-element">&nbsp;I\'m a well! Select me, <b>right click</b> and select <b>Export to HTML/CSS</b>.</span>    </div>',
                                    css:"",
                                    pos:{
                                        x:435,
                                        y:2218
                                    },
                                    sz:{
                                        w:620,
                                        h:60
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    fill:{
                                        R:255,
                                        G:255,
                                        B:255,
                                        A:1
                                    },
                                    pull:"",
                                    id:"",
                                    classes:"",
                                    children:[ {
                                        t:"bsbadgelabel",
                                        override:[],
                                        html:'<span class="label editable-element" id="dom-elem-131">Export me!</span>',
                                        css:"",
                                        pos:{
                                            x:914,
                                            y:2218
                                        },
                                        sz:{
                                            w:69,
                                            h:18
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        label_type:"label-success",
                                        pull:"",
                                        id:"",
                                        classes:"",
                                        children:[]
                                    } ]
                                } ]
                            } ]
                        } ]
                    } ]
                }, {
                    t:"bscontainer",
                    override:[ "padding_top", "padding_right", "padding_bottom", "padding_left", "fill_color" ],
                    html:'<div class="bsc container-fluid" id="dom-elem-139">         <div class="child-place child-place-0"></div></div>',
                    css:"",
                    pos:{
                        x:0,
                        y:2415
                    },
                    sz:{
                        w:1170,
                        h:60
                    },
                    is_locked:!1,
                    snapped:!0,
                    auto_height:!0,
                    auto_width:!0,
                    padding_top:"20px",
                    padding_right:"20px",
                    padding_bottom:"10px",
                    padding_left:"20px",
                    fill:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    layout_type:"container-fluid",
                    id:"",
                    classes:"",
                    children:[ {
                        t:"bscontainer",
                        override:[],
                        html:'<div class="bsc container container-empty" id="dom-elem-140"> <div class="child-place child-place-0"></div></div>',
                        css:"",
                        pos:{
                            x:115,
                            y:2425
                        },
                        sz:{
                            w:940,
                            h:30
                        },
                        is_locked:!1,
                        snapped:!0,
                        auto_height:!0,
                        auto_width:!0,
                        layout_type:"container",
                        id:"",
                        classes:"",
                        children:[ {
                            t:"bsrow",
                            override:[],
                            html:'<div class="row-fluid" id="dom-elem-141">  <div class="child-place child-place-0"></div></div>',
                            css:"",
                            pos:{
                                x:183,
                                y:2450
                            },
                            sz:{
                                w:940,
                                h:30
                            },
                            is_locked:!1,
                            snapped:!0,
                            auto_height:!0,
                            auto_width:!0,
                            id:"",
                            classes:"",
                            children:[ {
                                t:"bscolumn",
                                override:[],
                                html:'<span class="column span12" id="dom-elem-143">                               <div class="child-place child-place-0"></div></span>',
                                css:"",
                                pos:{
                                    x:480,
                                    y:0
                                },
                                sz:{
                                    w:1170,
                                    h:30
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                column_span:"span12",
                                offset_span:"",
                                id:"",
                                classes:"",
                                children:[ {
                                    t:"bsparagraph",
                                    override:[ "text_color" ],
                                    html:'<div class="dom-body-text editable-element paragraph" id="dom-elem-136"><p>@easelapp</p></div>',
                                    css:"",
                                    pos:{
                                        x:115,
                                        y:2445
                                    },
                                    sz:{
                                        w:940,
                                        h:20
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    edited_color:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    pull:"",
                                    text_color:{
                                        R:255,
                                        G:255,
                                        B:255,
                                        A:1
                                    },
                                    id:"",
                                    classes:"",
                                    children:[]
                                } ]
                            } ]
                        } ]
                    } ]
                } ],
                t:"layer"
            } ],
            grid:{
                grid:20,
                off:{
                    x:0,
                    y:0
                },
                enabled:!1,
                v:!1,
                c:{
                    R:237,
                    G:0,
                    B:7,
                    A:.15
                }
            },
            gs:{
                enabled:!1,
                v:!1,
                c:{
                    R:0,
                    G:255,
                    B:255,
                    A:.8
                },
                column_color:{
                    R:255,
                    G:0,
                    B:9,
                    A:.1
                },
                gutter_width:20,
                effective_size:null,
                document_size:1170,
                columns:12
            },
            guides:{
                x_guides:[],
                y_guides:[],
                enabled:!1,
                v:!1,
                c:{
                    R:0,
                    G:255,
                    B:255,
                    A:1
                }
            }
        },
        documentLoad:function(t, e) {
            return Draw.Demo.loadDocument(t, "Bootstrap", {
                clearCurrentDemo:e
            });
        },
        documentRun:function(t) {
            var e, i;
            return e = function() {
                return APP.view.getSize().width < 1450 ? t.setSize(new paper.Size(980, 2260)) :void 0;
            }, setTimeout(e, 10), i = '<div class="modal info-modal">\n  <div class="modal-header">\n    <h3>Welcome to Easel!</h3>\n  </div>\n\n  <div class="modal-body">\n    <p>Easel is an <strong>in-browser web design application</strong> targeted at small teams.\n    This demo will show you how to use Twitter Bootstrap with Easel!\n      <a href="http://blog.easel.io/blog/2012/11/07/use-bootstrap-to-create-production-ready-html/">Check out the blog post</a>\n      or watch the video:\n    </p>\n\n    <p>\n      <iframe src="http://player.vimeo.com/video/52770620" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>\n    </p>\n  </div>\n\n  <div class="modal-footer">\n    <a href="#" class="cta btn btn-info btn-large pull-left" title="Yeah!">Let me play with it!</a>\n  </div>\n</div>', 
            Draw.Demo.runDemo(t, "Bootstrap", i);
        },
        tweet:{
            text:"Whoa, @easelapp added bootstrap support and it is awesome!",
            url:"http://easel.io/bootstrap"
        }
    };
}.call(this), function() {
    Draw.Demo.Default = {
        documentVersion:1,
        documentJSON:{
            sz:{
                w:1050,
                h:2198
            },
            background_color:{
                R:239,
                G:237,
                B:232,
                A:1
            },
            background_image:null,
            background_repeat:"repeat",
            background_position:"top left",
            "toggle:background_image":!1,
            "toggle:background_cover":!1,
            use_padding_top:!0,
            version:"1.0",
            symbols:[],
            document:[ {
                children:[ {
                    t:"bscontainer",
                    override:[ "padding_top", "padding_right", "padding_bottom", "padding_left", "margin_top" ],
                    html:'<div class="bsc container" id="dom-elem-12">                                                                  <div class="child-place child-place-0"></div>                                      </div>',
                    css:"",
                    pos:{
                        x:20,
                        y:0
                    },
                    sz:{
                        w:940,
                        h:391
                    },
                    is_locked:!1,
                    snapped:!0,
                    auto_height:!0,
                    auto_width:!0,
                    padding_top:"40px",
                    padding_right:"0px",
                    padding_bottom:"30px",
                    padding_left:"0px",
                    margin_top:"1045px",
                    layout_type:"container",
                    id:"",
                    classes:"",
                    children:[ {
                        t:"bsrow",
                        override:[],
                        html:'<div class="row-fluid" id="dom-elem-63"> <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div></div>',
                        css:"",
                        pos:{
                            x:20,
                            y:1155
                        },
                        sz:{
                            w:940,
                            h:320
                        },
                        is_locked:!1,
                        snapped:!0,
                        auto_height:!0,
                        auto_width:!0,
                        id:"",
                        classes:"",
                        children:[ {
                            t:"bscolumn",
                            override:[ "padding_top", "padding_right", "padding_bottom", "padding_left" ],
                            html:'<span class="column span6" id="dom-elem-47">           <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div>  <div class="child-place child-place-2"></div>              </span>',
                            css:"",
                            pos:{
                                x:68,
                                y:1065
                            },
                            sz:{
                                w:460,
                                h:260
                            },
                            is_locked:!1,
                            snapped:!0,
                            auto_height:!0,
                            auto_width:!0,
                            padding_top:"10px",
                            padding_right:"0px",
                            padding_bottom:"0px",
                            padding_left:"0px",
                            column_span:"span6",
                            offset_span:"",
                            id:"",
                            classes:"",
                            children:[ {
                                t:"bsheading",
                                override:[ "font_face_size", "font_face", "font_weight", "font_size" ],
                                html:'<h2 class="heading">\n  <span class="editable-element">Responsive</span>\n         </h2>',
                                css:"",
                                pos:{
                                    x:100,
                                    y:1065
                                },
                                sz:{
                                    w:460,
                                    h:40
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                tag_type:"h2",
                                pull:"",
                                font:"oswald",
                                fw:"400",
                                font_size:"23pt",
                                id:"",
                                classes:"",
                                children:[]
                            }, {
                                t:"bsparagraph",
                                override:[ "font_face_size", "font_face", "font_size", "line_height" ],
                                html:'<div class="dom-body-text editable-element" id="dom-elem-16"><p>Create responsive designs with twitter bootstrap\'s containers. Check out the form to the right. <b>The page from here on down is responsive.</b></p><p>Drag elements into the red box. Wheee!</p></div>',
                                css:"",
                                pos:{
                                    x:100,
                                    y:1115
                                },
                                sz:{
                                    w:460,
                                    h:110
                                },
                                is_locked:!1,
                                snapped:!0,
                                edited_color:!0,
                                auto_height:!0,
                                auto_width:!0,
                                pull:"",
                                font:"droid sans",
                                font_size:"12pt",
                                h:"25px",
                                id:"",
                                classes:"",
                                children:[]
                            }, {
                                t:"bsrow",
                                override:[ "margin_top", "margin_right", "margin_bottom", "margin_left" ],
                                html:'<div class="row-fluid" id="dom-elem-69"> <div class="child-place child-place-0"></div> </div>',
                                css:"",
                                pos:{
                                    x:100,
                                    y:1235
                                },
                                sz:{
                                    w:460,
                                    h:60
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                margin_top:"20px",
                                margin_right:"0px",
                                margin_bottom:"0px",
                                margin_left:"0px",
                                id:"",
                                classes:"",
                                children:[ {
                                    t:"bscolumn",
                                    override:[],
                                    html:'<span class="column span11" id="dom-elem-48">             </span>',
                                    css:"",
                                    pos:{
                                        x:106,
                                        y:1212
                                    },
                                    sz:{
                                        w:421,
                                        h:60
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    column_span:"span11",
                                    offset_span:"",
                                    id:"",
                                    classes:"",
                                    children:[]
                                } ]
                            } ]
                        }, {
                            t:"bscolumn",
                            override:[],
                            html:'<span class="column span6" id="dom-elem-54">                      <div class="child-place child-place-0"></div></span>',
                            css:"",
                            pos:{
                                x:466,
                                y:1065
                            },
                            sz:{
                                w:460,
                                h:320
                            },
                            is_locked:!1,
                            snapped:!0,
                            auto_height:!0,
                            auto_width:!0,
                            column_span:"span6",
                            offset_span:"",
                            id:"",
                            classes:"",
                            children:[ {
                                t:"bswell",
                                override:[ "padding_top", "padding_right", "padding_bottom", "padding_left" ],
                                html:'<div class="well" id="dom-elem-50">                <div class="child-place child-place-0"></div>         <div class="child-place child-place-1"></div>                   </div>',
                                css:"",
                                pos:{
                                    x:498,
                                    y:1107
                                },
                                sz:{
                                    w:460,
                                    h:301
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                padding_top:"25px",
                                padding_right:"19px",
                                padding_bottom:"5px",
                                padding_left:"19px",
                                pull:"",
                                id:"",
                                classes:"",
                                children:[ {
                                    t:"bsform",
                                    override:[],
                                    html:'<form class="bs-form" action="#" id="dom-elem-51">                                              <div class="child-place child-place-0"></div>         <div class="child-place child-place-1"></div>               <div class="child-place child-place-2"></div>                                                                  </form>',
                                    css:"",
                                    pos:{
                                        x:520,
                                        y:1121
                                    },
                                    sz:{
                                        w:420,
                                        h:178
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    form_type:"",
                                    pull:"",
                                    id:"",
                                    classes:"",
                                    children:[ {
                                        t:"bscontrolgroup",
                                        override:[],
                                        html:'<div class="control-group" id="dom-elem-627">\n  <div class="child-place child-place-0"></div>\n  <div class="controls">\n         <div class="child-place child-place-1"></div></div>\n</div>',
                                        css:"",
                                        pos:{
                                            x:545,
                                            y:1110
                                        },
                                        sz:{
                                            w:420,
                                            h:64
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        id:"",
                                        classes:"",
                                        children:[ {
                                            t:"bslabel",
                                            override:[ "font_face_size", "font_face", "font_size" ],
                                            html:'<label class="control-label editable-element" id="dom-elem-23">Name</label>',
                                            css:"",
                                            pos:{
                                                x:545,
                                                y:1130
                                            },
                                            sz:{
                                                w:420,
                                                h:20
                                            },
                                            is_locked:!1,
                                            snapped:!0,
                                            edited_color:!0,
                                            auto_height:!0,
                                            auto_width:!0,
                                            font:"droid sans",
                                            font_size:"10pt",
                                            id:"",
                                            classes:"",
                                            children:[]
                                        }, {
                                            t:"bstextinput",
                                            override:[ "font_face_size", "font_face", "font_size" ],
                                            html:'<input type="text" id="dom-elem-24" class="input-large">',
                                            css:"",
                                            pos:{
                                                x:678,
                                                y:1125
                                            },
                                            sz:{
                                                w:224,
                                                h:30
                                            },
                                            is_locked:!1,
                                            snapped:!0,
                                            edited_color:!0,
                                            auto_height:!0,
                                            auto_width:!0,
                                            font:"droid sans",
                                            font_size:"10pt",
                                            size_class:"input-large",
                                            input_type:"text",
                                            query_type:"",
                                            placeholder:"Jimbob Jones",
                                            pull:"",
                                            id:"",
                                            classes:"",
                                            children:[]
                                        } ]
                                    }, {
                                        t:"bscontrolgroup",
                                        override:[],
                                        html:'<div class="control-group" id="dom-elem-632">\n  <div class="child-place child-place-0"></div>\n  <div class="controls">\n          <div class="child-place child-place-1"></div>                </div>\n</div>',
                                        css:"",
                                        pos:{
                                            x:545,
                                            y:1184
                                        },
                                        sz:{
                                            w:420,
                                            h:64
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        id:"",
                                        classes:"",
                                        children:[ {
                                            t:"bslabel",
                                            override:[ "font_face_size", "font_face", "font_size" ],
                                            html:'<label class="control-label editable-element" id="dom-elem-26">I like&nbsp;</label>',
                                            css:"",
                                            pos:{
                                                x:541,
                                                y:1182
                                            },
                                            sz:{
                                                w:420,
                                                h:20
                                            },
                                            is_locked:!1,
                                            snapped:!0,
                                            edited_color:!0,
                                            auto_height:!0,
                                            auto_width:!0,
                                            font:"droid sans",
                                            font_size:"10pt",
                                            id:"",
                                            classes:"",
                                            children:[]
                                        }, {
                                            t:"bsselect",
                                            override:[ "font_face_size", "font_face", "font_size" ],
                                            html:'<select id="dom-elem-27"><option value="Turtles">Turtles</option><option value="Robots">Robots</option><option value="Ninjas">Ninjas</option><option value="Pirates">Pirates</option><option value="All of them">All of them</option></select>',
                                            css:"",
                                            pos:{
                                                x:414,
                                                y:1210
                                            },
                                            sz:{
                                                w:247,
                                                h:30
                                            },
                                            is_locked:!1,
                                            snapped:!0,
                                            edited_color:!0,
                                            auto_height:!0,
                                            auto_width:!1,
                                            font:"droid sans",
                                            font_size:"10pt",
                                            options:"Turtles\r\nRobots\r\nNinjas\r\nPirates\r\nAll of them",
                                            pull:"",
                                            id:"",
                                            classes:"",
                                            children:[]
                                        } ]
                                    }, {
                                        t:"bscontrolgroup",
                                        override:[],
                                        html:'<div class="control-group" id="dom-elem-638">\n  \n  <div class="controls">\n           <div class="child-place child-place-0"></div>                        </div>\n</div>',
                                        css:"",
                                        pos:{
                                            x:545,
                                            y:1268
                                        },
                                        sz:{
                                            w:420,
                                            h:30
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        id:"",
                                        classes:"",
                                        children:[ {
                                            t:"bscheckbox",
                                            override:[ "font_face_size", "font_face", "font_size" ],
                                            html:'<label class="checkbox" id="dom-elem-29">\n  <input type="checkbox" value="">\n  <span class="editable-element">I use the internet<br></span>\n</label>',
                                            css:"",
                                            pos:{
                                                x:705,
                                                y:1278
                                            },
                                            sz:{
                                                w:420,
                                                h:25
                                            },
                                            is_locked:!1,
                                            snapped:!0,
                                            edited_color:!0,
                                            auto_height:!0,
                                            auto_width:!0,
                                            font:"droid sans",
                                            font_size:"10pt",
                                            is_checked:"true",
                                            pull:"",
                                            id:"",
                                            classes:"",
                                            children:[]
                                        } ]
                                    } ]
                                }, {
                                    t:"bsformactions",
                                    override:[ "padding_top", "padding_right", "padding_bottom", "padding_left" ],
                                    html:'<div class="form-actions" id="dom-elem-91"> <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div></div>',
                                    css:"",
                                    pos:{
                                        x:520,
                                        y:1419
                                    },
                                    sz:{
                                        w:420,
                                        h:50
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    padding_top:"19px",
                                    padding_right:"20px",
                                    padding_bottom:"0px",
                                    padding_left:"20px",
                                    pull:"",
                                    id:"",
                                    classes:"",
                                    children:[ {
                                        t:"bsbutton",
                                        override:[ "font_face_size", "border_top_width", "border_top_color", "border_top_style", "border_bottom_width", "border_bottom_color", "border_bottom_style", "border_left_width", "border_left_color", "border_left_style", "border_right_width", "border_right_color", "border_right_style", "font_face" ],
                                        html:'<button class="btn btn-primary"><span class="editable-element">Save</span></button>',
                                        css:"",
                                        pos:{
                                            x:586,
                                            y:1328
                                        },
                                        sz:{
                                            w:55,
                                            h:30
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        btn_type:"btn-primary",
                                        btn_size:"",
                                        pull:"",
                                        font:"droid sans",
                                        border_top_color:{
                                            R:0,
                                            G:0,
                                            B:0,
                                            A:.0980392
                                        },
                                        border_top_style:"solid",
                                        border_top_width:1,
                                        border_right_color:{
                                            R:0,
                                            G:0,
                                            B:0,
                                            A:.0980392
                                        },
                                        border_right_style:"solid",
                                        border_right_width:1,
                                        border_bottom_color:{
                                            R:0,
                                            G:0,
                                            B:0,
                                            A:.0980392
                                        },
                                        border_bottom_style:"solid",
                                        border_bottom_width:1,
                                        border_left_color:{
                                            R:0,
                                            G:0,
                                            B:0,
                                            A:.0980392
                                        },
                                        border_left_style:"solid",
                                        border_left_width:1,
                                        id:"",
                                        classes:"",
                                        children:[]
                                    }, {
                                        t:"bsbutton",
                                        override:[ "font_face_size", "border_top_width", "border_top_color", "border_top_style", "border_bottom_width", "border_bottom_color", "border_bottom_style", "border_left_width", "border_left_color", "border_left_style", "border_right_width", "border_right_color", "border_right_style", "font_face" ],
                                        html:'<button class="btn"><span class="editable-element">Cancel</span></button>',
                                        css:"",
                                        pos:{
                                            x:652,
                                            y:1327
                                        },
                                        sz:{
                                            w:68,
                                            h:30
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        btn_type:"",
                                        btn_size:"",
                                        pull:"",
                                        font:"droid sans",
                                        border_top_color:{
                                            R:0,
                                            G:0,
                                            B:0,
                                            A:.14902
                                        },
                                        border_top_style:"solid",
                                        border_top_width:1,
                                        border_right_color:{
                                            R:0,
                                            G:0,
                                            B:0,
                                            A:.14902
                                        },
                                        border_right_style:"solid",
                                        border_right_width:1,
                                        border_bottom_color:{
                                            R:0,
                                            G:0,
                                            B:0,
                                            A:.14902
                                        },
                                        border_bottom_style:"solid",
                                        border_bottom_width:1,
                                        border_left_color:{
                                            R:0,
                                            G:0,
                                            B:0,
                                            A:.14902
                                        },
                                        border_left_style:"solid",
                                        border_left_width:1,
                                        id:"",
                                        classes:"",
                                        children:[]
                                    } ]
                                } ]
                            } ]
                        } ]
                    } ]
                }, {
                    t:"drect",
                    override:[],
                    html:'<div class="dom-rect"></div>',
                    css:"",
                    pos:{
                        x:0,
                        y:-5
                    },
                    sz:{
                        w:1059,
                        h:65
                    },
                    is_locked:!1,
                    fill:{
                        R:255,
                        G:255,
                        B:255,
                        A:.73
                    },
                    box_shadow:"none",
                    border_top_left_radius:"0px",
                    border_top_right_radius:"0px",
                    border_bottom_left_radius:"2px",
                    border_bottom_right_radius:"2px",
                    margin_top:"0px",
                    margin_bottom:"0px",
                    margin_right:"0px",
                    margin_left:"0px",
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"bswell",
                    override:[ "margin_top", "margin_right", "margin_bottom", "margin_left" ],
                    html:'<div class="well" id="dom-elem-12">                                          <div class="child-place child-place-0"></div>                                                                    <div class="child-place child-place-1"></div>             <span class="editable-element"><br></span>                                                                                                                                                        </div>',
                    css:"",
                    pos:{
                        x:535,
                        y:443
                    },
                    sz:{
                        w:460,
                        h:241
                    },
                    is_locked:!1,
                    auto_height:!0,
                    auto_width:!0,
                    margin_top:"0px",
                    margin_right:"0px",
                    margin_bottom:"0px",
                    margin_left:"0px",
                    pull:"",
                    id:"",
                    classes:"",
                    children:[ {
                        t:"bsform",
                        override:[],
                        html:'<form class="bs-form form-inline" action="#" id="dom-elem-13">                            <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div>                             </form>',
                        css:"",
                        pos:{
                            x:511,
                            y:462
                        },
                        sz:{
                            w:420,
                            h:30
                        },
                        is_locked:!1,
                        snapped:!0,
                        auto_height:!0,
                        auto_width:!0,
                        form_type:"form-inline",
                        pull:"",
                        id:"",
                        classes:"",
                        children:[ {
                            t:"bstextinput",
                            override:[ "font_face_size", "font_size", "font_face" ],
                            html:'<input type="text" id="dom-elem-36">',
                            css:"",
                            pos:{
                                x:576,
                                y:501
                            },
                            sz:{
                                w:224,
                                h:30
                            },
                            is_locked:!1,
                            snapped:!0,
                            edited_color:!0,
                            auto_height:!0,
                            auto_width:!0,
                            font:"droid sans",
                            font_size:"11pt",
                            size_class:"",
                            input_type:"text",
                            query_type:"",
                            placeholder:"I'm a textbox!",
                            pull:"",
                            id:"",
                            classes:"",
                            children:[]
                        }, {
                            t:"bsbutton",
                            override:[ "font_face_size", "font_size", "border_top_width", "border_top_color", "border_top_style", "border_bottom_width", "border_bottom_color", "border_bottom_style", "border_left_width", "border_left_color", "border_left_style", "border_right_width", "border_right_color", "border_right_style", "font_face" ],
                            html:'<button class="btn"><span class="editable-element">Button</span></button>',
                            css:"",
                            pos:{
                                x:576,
                                y:510
                            },
                            sz:{
                                w:76,
                                h:30
                            },
                            is_locked:!1,
                            snapped:!0,
                            edited_color:!0,
                            auto_height:!0,
                            auto_width:!0,
                            btn_type:"",
                            btn_size:"",
                            pull:"",
                            font:"droid sans",
                            font_size:"11pt",
                            border_top_color:{
                                R:0,
                                G:0,
                                B:0,
                                A:.14902
                            },
                            border_top_style:"solid",
                            border_top_width:1,
                            border_right_color:{
                                R:0,
                                G:0,
                                B:0,
                                A:.14902
                            },
                            border_right_style:"solid",
                            border_right_width:1,
                            border_bottom_color:{
                                R:0,
                                G:0,
                                B:0,
                                A:.14902
                            },
                            border_bottom_style:"solid",
                            border_bottom_width:1,
                            border_left_color:{
                                R:0,
                                G:0,
                                B:0,
                                A:.14902
                            },
                            border_left_style:"solid",
                            border_left_width:1,
                            id:"",
                            classes:"",
                            children:[]
                        } ]
                    }, {
                        t:"bstable",
                        override:[],
                        html:'<table class="table table-bordered table-condensed" id="dom-elem-640">\n  <thead> <tr class="child-place child-place-0"></tr></thead>\n  <tbody class=""> <tr class="child-place child-place-1"></tr> <tr class="child-place child-place-2"></tr>  <tr class="child-place child-place-3"></tr></tbody>\n</table>',
                        css:"",
                        pos:{
                            x:511,
                            y:512
                        },
                        sz:{
                            w:420,
                            h:117
                        },
                        is_locked:!1,
                        snapped:!0,
                        auto_height:!0,
                        auto_width:!0,
                        stripe_rows:"table-striped",
                        border_rows:"table-bordered",
                        condensed:"table-condensed",
                        pull:"",
                        id:"",
                        classes:"",
                        children:[ {
                            t:"bstableheadrow",
                            override:[],
                            html:'<tr class="bs-head" id="dom-elem-641">\n  \n  \n  \n <td class="child-place child-place-0"></td> <td class="child-place child-place-1"></td> </tr>',
                            css:"",
                            pos:{
                                x:584,
                                y:497
                            },
                            sz:{
                                w:979,
                                h:36
                            },
                            is_locked:!1,
                            snapped:!0,
                            auto_height:!0,
                            auto_width:!0,
                            id:"",
                            classes:"",
                            children:[ {
                                t:"bstableheadcell",
                                override:[ "font_face_size", "font_size" ],
                                html:'<th class="bs-head-cell editable-element" id="dom-elem-31">Does Easel Support?                                                        </th>',
                                css:"",
                                pos:{
                                    x:0,
                                    y:0
                                },
                                sz:{
                                    w:282,
                                    h:28
                                },
                                is_locked:!1,
                                snapped:!0,
                                edited_color:!0,
                                auto_height:!0,
                                auto_width:!0,
                                font_size:"11pt",
                                id:"",
                                classes:"",
                                children:[]
                            }, {
                                t:"bstableheadcell",
                                override:[ "font_face_size", "font_size" ],
                                html:'<th class="bs-head-cell editable-element" id="dom-elem-643"><br></th>',
                                css:"",
                                pos:{
                                    x:64,
                                    y:0
                                },
                                sz:{
                                    w:137,
                                    h:28
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                font_size:"11pt",
                                id:"",
                                classes:"",
                                children:[]
                            } ]
                        }, {
                            t:"bstablerow",
                            override:[],
                            html:'<tr class="bs-body" id="dom-elem-645">\n  \n  \n  \n <td class="child-place child-place-0"></td> <td class="child-place child-place-1"></td> </tr>',
                            css:"",
                            pos:{
                                x:584,
                                y:533
                            },
                            sz:{
                                w:979,
                                h:37
                            },
                            is_locked:!1,
                            snapped:!0,
                            auto_height:!0,
                            auto_width:!0,
                            id:"",
                            classes:"",
                            children:[ {
                                t:"bstablecell",
                                override:[ "font_face_size", "font_size" ],
                                html:'<td class="bs-cell" id="dom-elem-646"><span class="editable-element">Tables</span></td>',
                                css:"",
                                pos:{
                                    x:0,
                                    y:0
                                },
                                sz:{
                                    w:282,
                                    h:29
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                font_size:"11pt",
                                id:"",
                                classes:"",
                                children:[]
                            }, {
                                t:"bstablecell",
                                override:[ "font_face_size", "font_size" ],
                                html:'<td class="bs-cell" id="dom-elem-647"><span class="editable-element">Yep</span></td>',
                                css:"",
                                pos:{
                                    x:444,
                                    y:489
                                },
                                sz:{
                                    w:137,
                                    h:29
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                font_size:"11pt",
                                id:"",
                                classes:"",
                                children:[]
                            } ]
                        }, {
                            t:"bstablerow",
                            override:[],
                            html:'<tr class="bs-body" id="dom-elem-649">\n  \n  \n  \n <td class="child-place child-place-0"></td> <td class="child-place child-place-1"></td> </tr>',
                            css:"",
                            pos:{
                                x:584,
                                y:570
                            },
                            sz:{
                                w:979,
                                h:37
                            },
                            is_locked:!1,
                            snapped:!0,
                            auto_height:!0,
                            auto_width:!0,
                            id:"",
                            classes:"",
                            children:[ {
                                t:"bstablecell",
                                override:[ "font_face_size", "font_size" ],
                                html:'<td class="bs-cell" id="dom-elem-650"><span class="editable-element">Forms</span></td>',
                                css:"",
                                pos:{
                                    x:0,
                                    y:0
                                },
                                sz:{
                                    w:282,
                                    h:29
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                font_size:"11pt",
                                id:"",
                                classes:"",
                                children:[]
                            }, {
                                t:"bstablecell",
                                override:[ "font_face_size", "font_size" ],
                                html:'<td class="bs-cell" id="dom-elem-651"><span class="editable-element">Yep<br></span></td>',
                                css:"",
                                pos:{
                                    x:108,
                                    y:0
                                },
                                sz:{
                                    w:137,
                                    h:29
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                font_size:"11pt",
                                id:"",
                                classes:"",
                                children:[]
                            } ]
                        }, {
                            t:"bstablerow",
                            override:[],
                            html:'<tr class="bs-body" id="dom-elem-657"> <td class="child-place child-place-0"></td> <td class="child-place child-place-1"></td></tr>',
                            css:"",
                            pos:{
                                x:584,
                                y:607
                            },
                            sz:{
                                w:979,
                                h:37
                            },
                            is_locked:!1,
                            snapped:!0,
                            auto_height:!0,
                            auto_width:!0,
                            id:"",
                            classes:"",
                            children:[ {
                                t:"bstablecell",
                                override:[ "font_face_size", "font_size" ],
                                html:'<td class="bs-cell" id="dom-elem-658"><span class="editable-element">Kitten Pictures</span></td>',
                                css:"",
                                pos:{
                                    x:0,
                                    y:0
                                },
                                sz:{
                                    w:282,
                                    h:29
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                font_size:"11pt",
                                id:"",
                                classes:"",
                                children:[]
                            }, {
                                t:"bstablecell",
                                override:[ "font_face_size", "font_size" ],
                                html:'<td class="bs-cell" id="dom-elem-659"><span class="editable-element">Obviously</span></td>',
                                css:"",
                                pos:{
                                    x:108,
                                    y:0
                                },
                                sz:{
                                    w:137,
                                    h:29
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                font_size:"11pt",
                                id:"",
                                classes:"",
                                children:[]
                            } ]
                        } ]
                    } ]
                }, {
                    t:"drect",
                    override:[],
                    html:'<div class="dom-rect"></div>',
                    css:"",
                    pos:{
                        x:-47,
                        y:228
                    },
                    sz:{
                        w:1114,
                        h:185
                    },
                    is_locked:!1,
                    fill:{
                        R:104,
                        G:190,
                        B:167,
                        A:1
                    },
                    box_shadow:"none",
                    border_top_left_radius:"0px",
                    border_top_right_radius:"0px",
                    border_bottom_left_radius:"0px",
                    border_bottom_right_radius:"0px",
                    margin_top:"0px",
                    margin_bottom:"0px",
                    margin_right:"0px",
                    margin_left:"0px",
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"drect",
                    override:[],
                    html:'<div class="dom-rect"></div>',
                    css:"",
                    pos:{
                        x:-24,
                        y:720
                    },
                    sz:{
                        w:1080,
                        h:325
                    },
                    is_locked:!1,
                    snapped:!1,
                    fill:{
                        R:245,
                        G:250,
                        B:255,
                        A:1
                    },
                    background_repeat:"repeat",
                    background_position:"0% 0%",
                    background_size:"auto",
                    box_shadow:"none",
                    border_top_left_radius:"0px",
                    border_top_right_radius:"0px",
                    border_bottom_left_radius:"0px",
                    border_bottom_right_radius:"0px",
                    margin_top:"0px",
                    margin_bottom:"0px",
                    margin_right:"0px",
                    margin_left:"0px",
                    border_top_color:{
                        R:222,
                        G:220,
                        B:215,
                        A:1
                    },
                    border_top_style:"solid",
                    border_top_width:1,
                    border_right_color:{
                        R:222,
                        G:220,
                        B:215,
                        A:1
                    },
                    border_right_style:"solid",
                    border_right_width:1,
                    border_bottom_color:{
                        R:222,
                        G:220,
                        B:215,
                        A:1
                    },
                    border_bottom_style:"solid",
                    border_bottom_width:1,
                    border_left_color:{
                        R:222,
                        G:220,
                        B:215,
                        A:1
                    },
                    border_left_style:"solid",
                    border_left_width:1,
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"bsparagraph",
                    override:[ "font_face_size", "margin_top", "margin_right", "margin_bottom", "margin_left", "font_face", "font_size", "alignment", "line_height" ],
                    html:'<div class="dom-body-text editable-element" id="dom-elem-53"><p>Easel is an <b>in-browser web design</b> tool that lets you mockup, collaborate and implement ideas with ease.<br></p></div>',
                    css:"",
                    pos:{
                        x:55,
                        y:126
                    },
                    sz:{
                        w:940,
                        h:30
                    },
                    is_locked:!1,
                    snapped:!1,
                    edited_color:!0,
                    auto_height:!0,
                    auto_width:!0,
                    margin_top:"0px",
                    margin_right:"0px",
                    margin_bottom:"10px",
                    margin_left:"0px",
                    pull:"",
                    font:"droid sans",
                    font_size:"14pt",
                    a:"center",
                    h:"29px",
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"bsparagraph",
                    override:[ "font_face_size", "margin_top", "margin_right", "margin_bottom", "margin_left", "font_face", "font_size", "line_height" ],
                    html:'<div class="dom-body-text editable-element" id="dom-elem-54"><p>No need to start from scratch. Easel comes with<b> reusable elements</b> like text boxes, buttons, and even tables. Easel integrates the <b>Twitter Bootstrap</b> library, plus icons and a few extra elements.&nbsp;</p><p>Drag a few elements in from the<b> left sidebar</b>.</p></div>',
                    css:"",
                    pos:{
                        x:55,
                        y:521
                    },
                    sz:{
                        w:460,
                        h:139
                    },
                    is_locked:!1,
                    snapped:!1,
                    edited_color:!0,
                    auto_height:!0,
                    auto_width:!0,
                    margin_top:"0px",
                    margin_right:"0px",
                    margin_bottom:"10px",
                    margin_left:"0px",
                    pull:"",
                    font:"droid sans",
                    font_size:"12pt",
                    h:"25px",
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"bsparagraph",
                    override:[ "font_face_size", "margin_top", "margin_right", "margin_bottom", "margin_left", "font_face", "font_size", "line_height" ],
                    html:'<div class="dom-body-text editable-element" id="dom-elem-55"><p>All the elements can be styled to fit your design. With web fonts and the browser\'s rendering engine,&nbsp;<span>your creation is rendered exactly as it will on your website.&nbsp;</span></p><p>Here are a few buttons that have been styled. Select one and change it up!</p></div>',
                    css:"",
                    pos:{
                        x:535,
                        y:840
                    },
                    sz:{
                        w:460,
                        h:148
                    },
                    is_locked:!1,
                    edited_color:!0,
                    auto_height:!0,
                    auto_width:!0,
                    margin_top:"0px",
                    margin_right:"0px",
                    margin_bottom:"10px",
                    margin_left:"0px",
                    pull:"",
                    font:"droid sans",
                    font_size:"12pt",
                    h:"25px",
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"drect",
                    override:[],
                    html:'<div class="dom-rect"></div>',
                    css:"",
                    pos:{
                        x:45,
                        y:761
                    },
                    sz:{
                        w:470,
                        h:242
                    },
                    is_locked:!1,
                    fill:{
                        R:245,
                        G:245,
                        B:245,
                        A:1
                    },
                    background_repeat:"repeat",
                    background_position:"0% 0%",
                    background_size:"auto",
                    box_shadow:"none",
                    border_top_left_radius:"4px",
                    border_top_right_radius:"4px",
                    border_bottom_left_radius:"4px",
                    border_bottom_right_radius:"4px",
                    margin_top:"0px",
                    margin_bottom:"0px",
                    margin_right:"0px",
                    margin_left:"0px",
                    border_top_color:{
                        R:227,
                        G:227,
                        B:227,
                        A:1
                    },
                    border_top_style:"solid",
                    border_top_width:1,
                    border_right_color:{
                        R:227,
                        G:227,
                        B:227,
                        A:1
                    },
                    border_right_style:"solid",
                    border_right_width:1,
                    border_bottom_color:{
                        R:227,
                        G:227,
                        B:227,
                        A:1
                    },
                    border_bottom_style:"solid",
                    border_bottom_width:1,
                    border_left_color:{
                        R:227,
                        G:227,
                        B:227,
                        A:1
                    },
                    border_left_style:"solid",
                    border_left_width:1,
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"bsparagraph",
                    override:[ "font_face_size", "margin_top", "margin_right", "margin_bottom", "margin_left", "font_face", "text_color", "line_height", "font_size" ],
                    html:'<div class="dom-body-text editable-element" id="dom-elem-57"><p><span>The current web design process is broken. People use image editing tools for creation, share screenshots over email, and spend more time than necessary manually translating the design into a working product. We believe the future of application design is in the browser with tools that understand the medium and the process.</span><br></p></div>',
                    css:"",
                    pos:{
                        x:135,
                        y:282
                    },
                    sz:{
                        w:780,
                        h:77
                    },
                    is_locked:!1,
                    edited_color:!0,
                    auto_height:!0,
                    auto_width:!0,
                    margin_top:"0px",
                    margin_right:"0px",
                    margin_bottom:"10px",
                    margin_left:"0px",
                    pull:"",
                    font:"droid sans",
                    font_size:"15px",
                    text_color:{
                        R:255,
                        G:255,
                        B:255,
                        A:1
                    },
                    h:"25px",
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"bsbutton",
                    override:[ "font_face_size", "margin_top", "margin_right", "margin_bottom", "margin_left", "fill_color", "text_shadow", "box_shadow", "font_face", "font_size", "text_color", "border_top_left_radius", "border_top_right_radius", "border_bottom_right_radius", "border_bottom_left_radius" ],
                    html:'<button class="btn" id="dom-elem-37">   <span class="editable-element">FLAT BUTTON<br></span> </button>',
                    css:"",
                    pos:{
                        x:177,
                        y:793
                    },
                    sz:{
                        w:220,
                        h:35
                    },
                    is_locked:!1,
                    edited_color:!0,
                    auto_height:!0,
                    auto_width:!0,
                    margin_top:"0px",
                    margin_right:"0px",
                    margin_bottom:"0px",
                    margin_left:"0px",
                    fill:{
                        R:104,
                        G:190,
                        B:167,
                        A:1
                    },
                    box_shadow:"none",
                    btn_type:"",
                    btn_size:"",
                    pull:"",
                    text_shadow:"none",
                    font:"oswald",
                    font_size:"11pt",
                    text_color:{
                        R:255,
                        G:255,
                        B:255,
                        A:1
                    },
                    border_top_left_radius:"3px",
                    border_top_right_radius:"3px",
                    border_bottom_left_radius:"3px",
                    border_bottom_right_radius:"3px",
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"bsheading",
                    override:[ "font_face_size", "margin_top", "margin_right", "margin_bottom", "margin_left", "font_face", "font_weight", "font_size" ],
                    html:'<h2 class="heading">\n  <span class="editable-element">Move quickly</span>\n</h2>',
                    css:"",
                    pos:{
                        x:55,
                        y:466
                    },
                    sz:{
                        w:300,
                        h:42
                    },
                    is_locked:!1,
                    auto_height:!0,
                    auto_width:!0,
                    margin_top:"0px",
                    margin_right:"0px",
                    margin_bottom:"0px",
                    margin_left:"0px",
                    tag_type:"h2",
                    pull:"",
                    font:"oswald",
                    fw:"400",
                    font_size:"23pt",
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"bsheading",
                    override:[ "font_face_size", "margin_top", "margin_right", "margin_bottom", "margin_left", "font_face", "font_weight", "font_size" ],
                    html:'<h2 class="heading">\n  <span class="editable-element">Style at will</span>\n         </h2>',
                    css:"",
                    pos:{
                        x:535,
                        y:784
                    },
                    sz:{
                        w:300,
                        h:42
                    },
                    is_locked:!1,
                    auto_height:!0,
                    auto_width:!0,
                    margin_top:"0px",
                    margin_right:"0px",
                    margin_bottom:"0px",
                    margin_left:"0px",
                    tag_type:"h2",
                    pull:"",
                    font:"oswald",
                    fw:"400",
                    font_size:"23pt",
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"bsbutton",
                    override:[ "font_face_size", "margin_top", "margin_right", "margin_bottom", "margin_left", "fill_color", "font_face", "font_size", "text_color", "border_top_left_radius", "border_top_right_radius", "border_bottom_right_radius", "border_bottom_left_radius", "text_shadow", "box_shadow" ],
                    html:'<button class="btn" id="dom-elem-40">   <span class="editable-element">ROUND BUTTON</span> </button>',
                    css:"",
                    pos:{
                        x:180,
                        y:860
                    },
                    sz:{
                        w:220,
                        h:35
                    },
                    is_locked:!1,
                    edited_color:!0,
                    auto_height:!0,
                    auto_width:!0,
                    margin_top:"0px",
                    margin_right:"0px",
                    margin_bottom:"0px",
                    margin_left:"0px",
                    fill:{
                        g:{
                            t:"linear",
                            stops:[ {
                                r:0,
                                c:{
                                    R:104,
                                    G:190,
                                    B:167,
                                    A:1
                                }
                            }, {
                                r:1,
                                c:{
                                    R:55,
                                    G:163,
                                    B:148,
                                    A:1
                                }
                            } ]
                        },
                        o:{
                            x:290,
                            y:854
                        },
                        d:{
                            x:290,
                            y:889
                        }
                    },
                    box_shadow:"0px 2px 2px 0px #335249",
                    btn_type:"",
                    btn_size:"",
                    pull:"",
                    text_shadow:"none",
                    font:"oswald",
                    font_size:"11pt",
                    text_color:{
                        R:255,
                        G:255,
                        B:255,
                        A:1
                    },
                    border_top_left_radius:"20px",
                    border_top_right_radius:"20px",
                    border_bottom_left_radius:"20px",
                    border_bottom_right_radius:"20px",
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"bsbutton",
                    override:[ "font_face_size", "margin_top", "margin_right", "margin_bottom", "margin_left", "fill_color", "font_face", "font_size", "text_color", "border_top_left_radius", "border_top_right_radius", "border_bottom_right_radius", "border_bottom_left_radius", "border_top_width", "border_top_color", "border_top_style", "border_bottom_width", "border_bottom_color", "border_bottom_style", "border_left_width", "border_left_color", "border_left_style", "border_right_width", "border_right_color", "border_right_style", "text_shadow", "box_shadow" ],
                    html:'<button class="btn" id="dom-elem-62">   <span class="editable-element">THICK BUTTON<br></span> </button>',
                    css:"",
                    pos:{
                        x:180,
                        y:927
                    },
                    sz:{
                        w:220,
                        h:35
                    },
                    is_locked:!1,
                    edited_color:!0,
                    auto_height:!0,
                    auto_width:!0,
                    margin_top:"0px",
                    margin_right:"0px",
                    margin_bottom:"0px",
                    margin_left:"0px",
                    fill:{
                        R:104,
                        G:190,
                        B:167,
                        A:1
                    },
                    box_shadow:"inset 0px 0px 15px 0px rgba(255, 255, 255, 0.490196), 0px 9px 0px 0px #346155, 0px 10px 4px 0px rgba(0, 0, 0, 0.6)",
                    btn_type:"",
                    btn_size:"",
                    pull:"",
                    text_shadow:"none",
                    font:"oswald",
                    font_size:"15px",
                    text_color:{
                        R:255,
                        G:255,
                        B:255,
                        A:1
                    },
                    border_top_left_radius:"3px",
                    border_top_right_radius:"3px",
                    border_bottom_left_radius:"3px",
                    border_bottom_right_radius:"3px",
                    border_top_color:{
                        R:59,
                        G:99,
                        B:95,
                        A:1
                    },
                    border_top_style:"solid",
                    border_top_width:1,
                    border_right_color:{
                        R:59,
                        G:99,
                        B:95,
                        A:1
                    },
                    border_right_style:"solid",
                    border_right_width:1,
                    border_bottom_color:{
                        R:59,
                        G:99,
                        B:95,
                        A:1
                    },
                    border_bottom_style:"solid",
                    border_bottom_width:1,
                    border_left_color:{
                        R:59,
                        G:99,
                        B:95,
                        A:1
                    },
                    border_left_style:"solid",
                    border_left_width:1,
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"bscontainer",
                    override:[ "fill_color", "border_top_width", "border_top_color", "border_top_style", "border_bottom_width", "border_bottom_color", "border_bottom_style", "border_left_width", "border_left_color", "border_left_style", "border_right_width", "border_right_color", "border_right_style" ],
                    html:'<div class="bsc container-fluid" id="dom-elem-66">          <div class="child-place child-place-0"></div></div>',
                    css:"",
                    pos:{
                        x:0,
                        y:1373
                    },
                    sz:{
                        w:1050,
                        h:319
                    },
                    is_locked:!1,
                    snapped:!0,
                    auto_height:!0,
                    auto_width:!0,
                    fill:{
                        R:245,
                        G:250,
                        B:255,
                        A:1
                    },
                    layout_type:"container-fluid",
                    border_top_color:{
                        R:222,
                        G:220,
                        B:215,
                        A:1
                    },
                    border_top_style:"solid",
                    border_top_width:1,
                    border_right_color:{
                        R:222,
                        G:220,
                        B:215,
                        A:1
                    },
                    border_right_style:"solid",
                    border_right_width:1,
                    border_bottom_color:{
                        R:222,
                        G:220,
                        B:215,
                        A:1
                    },
                    border_bottom_style:"solid",
                    border_bottom_width:1,
                    border_left_color:{
                        R:222,
                        G:220,
                        B:215,
                        A:1
                    },
                    border_left_style:"solid",
                    border_left_width:1,
                    id:"",
                    classes:"",
                    children:[ {
                        t:"bscontainer",
                        override:[ "padding_top", "padding_right", "padding_bottom", "padding_left" ],
                        html:'<div class="bsc container container-empty" id="dom-elem-67"> <div class="child-place child-place-0"></div></div>',
                        css:"",
                        pos:{
                            x:20,
                            y:1383
                        },
                        sz:{
                            w:940,
                            h:317
                        },
                        is_locked:!1,
                        snapped:!0,
                        auto_height:!0,
                        auto_width:!0,
                        padding_top:"40px",
                        padding_right:"0px",
                        padding_bottom:"30px",
                        padding_left:"0px",
                        layout_type:"container",
                        id:"",
                        classes:"",
                        children:[ {
                            t:"bsrow",
                            override:[],
                            html:'<div class="row-fluid" id="dom-elem-68"> <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div></div>',
                            css:"",
                            pos:{
                                x:63,
                                y:1396
                            },
                            sz:{
                                w:940,
                                h:250
                            },
                            is_locked:!1,
                            snapped:!0,
                            auto_height:!0,
                            auto_width:!0,
                            id:"",
                            classes:"",
                            children:[ {
                                t:"bscolumn",
                                override:[],
                                html:'<span class="column span6" id="dom-elem-69">           <div class="child-place child-place-0"></div></span>',
                                css:"",
                                pos:{
                                    x:0,
                                    y:0
                                },
                                sz:{
                                    w:460,
                                    h:250
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                column_span:"span6",
                                offset_span:"",
                                id:"",
                                classes:"",
                                children:[ {
                                    t:"bswell",
                                    override:[],
                                    html:'<div class="well" id="dom-elem-72">                     <div class="child-place child-place-1"></div>           <div class="child-place child-place-0"></div> <div class="child-place child-place-2"></div>                 <div class="child-place child-place-3"></div></div>',
                                    css:"",
                                    pos:{
                                        x:101,
                                        y:1396
                                    },
                                    sz:{
                                        w:460,
                                        h:230
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    pull:"",
                                    id:"",
                                    classes:"",
                                    children:[ {
                                        t:"bsparagraph",
                                        override:[ "font_face_size", "font_face", "font_size", "line_height" ],
                                        html:'<div class="dom-body-text editable-element" id="dom-elem-68"><p>Select any element on this page,&nbsp;<b>right click -&gt; Export to HTML/CSS</b></p></div>',
                                        css:"",
                                        pos:{
                                            x:121,
                                            y:1443
                                        },
                                        sz:{
                                            w:940,
                                            h:20
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        pull:"",
                                        font:"droid sans",
                                        font_size:"11pt",
                                        h:"19px",
                                        id:"",
                                        classes:"",
                                        children:[]
                                    }, {
                                        t:"bsheading",
                                        override:[ "font_face_size", "font_face", "font_weight", "font_size", "text_color" ],
                                        html:'<h3 class="heading" id="dom-elem-75">\n  <span class="editable-element">Export just what you need<br></span>\n</h3>',
                                        css:"",
                                        pos:{
                                            x:121,
                                            y:1503
                                        },
                                        sz:{
                                            w:420,
                                            h:40
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        tag_type:"h3",
                                        pull:"",
                                        font:"oswald",
                                        fw:"300",
                                        font_size:"15pt",
                                        text_color:{
                                            R:71,
                                            G:71,
                                            B:71,
                                            A:1
                                        },
                                        id:"",
                                        classes:"",
                                        children:[]
                                    }, {
                                        t:"bsheading",
                                        override:[ "font_face_size", "font_face", "font_weight", "font_size", "text_color" ],
                                        html:'<h3 class="heading" id="dom-elem-76">\n  <span class="editable-element">Or, export the whole thing<br></span>\n</h3>',
                                        css:"",
                                        pos:{
                                            x:121,
                                            y:1563
                                        },
                                        sz:{
                                            w:420,
                                            h:40
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        tag_type:"h3",
                                        pull:"",
                                        font:"oswald",
                                        fw:"300",
                                        font_size:"15pt",
                                        text_color:{
                                            R:71,
                                            G:71,
                                            B:71,
                                            A:1
                                        },
                                        id:"",
                                        classes:"",
                                        children:[]
                                    }, {
                                        t:"bsparagraph",
                                        override:[ "font_face_size", "font_face", "font_size", "line_height" ],
                                        html:'<div class="dom-body-text editable-element" id="dom-elem-71"><p>Click <b>File -&gt; Generate All HTML/CSS</b></p></div>',
                                        css:"",
                                        pos:{
                                            x:131,
                                            y:1603
                                        },
                                        sz:{
                                            w:940,
                                            h:20
                                        },
                                        is_locked:!1,
                                        snapped:!0,
                                        edited_color:!0,
                                        auto_height:!0,
                                        auto_width:!0,
                                        pull:"",
                                        font:"droid sans",
                                        font_size:"11pt",
                                        h:"19px",
                                        id:"",
                                        classes:"",
                                        children:[]
                                    } ]
                                } ]
                            }, {
                                t:"bscolumn",
                                override:[ "padding_top", "padding_right", "padding_bottom", "padding_left" ],
                                html:'<span class="column span5" id="dom-elem-70">        <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div>     </span>',
                                css:"",
                                pos:{
                                    x:480,
                                    y:0
                                },
                                sz:{
                                    w:460,
                                    h:185
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                padding_top:"40px",
                                padding_right:"0px",
                                padding_bottom:"0px",
                                padding_left:"0px",
                                column_span:"span6",
                                offset_span:"",
                                id:"",
                                classes:"",
                                children:[ {
                                    t:"bsheading",
                                    override:[ "font_face_size", "font_face", "font_weight", "font_size" ],
                                    html:'<h2 class="heading">\n  <span class="editable-element">Export to HTML/CSS</span>\n         </h2>',
                                    css:"",
                                    pos:{
                                        x:501,
                                        y:1394
                                    },
                                    sz:{
                                        w:460,
                                        h:40
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    tag_type:"h2",
                                    pull:"",
                                    font:"oswald",
                                    fw:"400",
                                    font_size:"23pt",
                                    id:"",
                                    classes:"",
                                    children:[]
                                }, {
                                    t:"bsparagraph",
                                    override:[ "font_face_size", "font_face", "font_size", "line_height" ],
                                    html:'<div class="dom-body-text editable-element" id="dom-elem-74"><p><span>Easel makes implementation easier by exporting the whole page or just single elements to HTML/CSS. No more eyeballing shadows and gradients! Just get the code.</span></p></div>',
                                    css:"",
                                    pos:{
                                        x:501,
                                        y:1444
                                    },
                                    sz:{
                                        w:460,
                                        h:75
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    edited_color:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    pull:"",
                                    font:"droid sans",
                                    font_size:"12pt",
                                    h:"25px",
                                    id:"",
                                    classes:"",
                                    children:[]
                                } ]
                            } ]
                        } ]
                    } ]
                }, {
                    t:"bscontainer",
                    override:[],
                    html:'<div class="bsc container" id="dom-elem-79">          <div class="child-place child-place-0"></div></div>',
                    css:"",
                    pos:{
                        x:20,
                        y:1764
                    },
                    sz:{
                        w:940,
                        h:362
                    },
                    is_locked:!1,
                    snapped:!0,
                    auto_height:!0,
                    auto_width:!0,
                    layout_type:"container",
                    id:"",
                    classes:"",
                    children:[ {
                        t:"bsrow",
                        override:[ "padding_top", "padding_right", "padding_bottom", "padding_left" ],
                        html:'<div class="row-fluid" id="dom-elem-80"> <div class="child-place child-place-0"></div>  <div class="child-place child-place-1"></div></div>',
                        css:"",
                        pos:{
                            x:20,
                            y:1714
                        },
                        sz:{
                            w:940,
                            h:362
                        },
                        is_locked:!1,
                        snapped:!0,
                        auto_height:!0,
                        auto_width:!0,
                        padding_top:"40px",
                        padding_right:"0px",
                        padding_bottom:"30px",
                        padding_left:"0px",
                        id:"",
                        classes:"",
                        children:[ {
                            t:"bscolumn",
                            override:[ "padding_top", "padding_right", "padding_bottom", "padding_left" ],
                            html:'<span class="column span6" id="dom-elem-77">                                <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div>                           </span>',
                            css:"",
                            pos:{
                                x:100,
                                y:1734
                            },
                            sz:{
                                w:460,
                                h:188
                            },
                            is_locked:!1,
                            snapped:!0,
                            auto_height:!0,
                            auto_width:!0,
                            padding_top:"33px",
                            padding_right:"0px",
                            padding_bottom:"0px",
                            padding_left:"0px",
                            column_span:"span6",
                            offset_span:"",
                            id:"",
                            classes:"",
                            children:[ {
                                t:"bsheading",
                                override:[ "font_face_size", "font_face", "font_weight", "font_size" ],
                                html:'<h2 class="heading">\n  <span class="editable-element">Collaborate</span>\n         </h2>',
                                css:"",
                                pos:{
                                    x:100,
                                    y:1839
                                },
                                sz:{
                                    w:460,
                                    h:40
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                tag_type:"h2",
                                pull:"",
                                font:"oswald",
                                fw:"400",
                                font_size:"23pt",
                                id:"",
                                classes:"",
                                children:[]
                            }, {
                                t:"bsparagraph",
                                override:[ "font_face_size", "font_face", "font_size", "line_height" ],
                                html:'<div class="dom-body-text editable-element" id="dom-elem-79"><p>Tie it all together with <b>clickable prototypes</b> and <b>commenting</b> features.</p><p><span>Sign up to try out clickable prototypes and commenting.</span></p></div>',
                                css:"",
                                pos:{
                                    x:100,
                                    y:1804
                                },
                                sz:{
                                    w:460,
                                    h:85
                                },
                                is_locked:!1,
                                snapped:!0,
                                edited_color:!0,
                                auto_height:!0,
                                auto_width:!0,
                                pull:"",
                                font:"droid sans",
                                font_size:"12pt",
                                h:"25px",
                                id:"",
                                classes:"",
                                children:[]
                            } ]
                        }, {
                            t:"bscolumn",
                            override:[],
                            html:'<span class="column span5" id="dom-elem-83">          <div class="child-place child-place-0"></div></span>',
                            css:"",
                            pos:{
                                x:320,
                                y:1734
                            },
                            sz:{
                                w:460,
                                h:292
                            },
                            is_locked:!1,
                            snapped:!0,
                            auto_height:!0,
                            auto_width:!0,
                            column_span:"span6",
                            offset_span:"",
                            id:"",
                            classes:"",
                            children:[ {
                                t:"bswell",
                                override:[],
                                html:'<div class="well" id="dom-elem-81">                                                   <div class="child-place child-place-0"></div></div>',
                                css:"",
                                pos:{
                                    x:500,
                                    y:1756
                                },
                                sz:{
                                    w:460,
                                    h:272
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                pull:"",
                                id:"",
                                classes:"",
                                children:[ {
                                    t:"dimg",
                                    name:"commenting.png",
                                    config:{
                                        border_top_left_radius:".dom-image",
                                        border_bottom_left_radius:".dom-image",
                                        border_top_right_radius:".dom-image",
                                        border_bottom_right_radius:".dom-image",
                                        margin_top:".dom-image",
                                        margin_right:".dom-image",
                                        margin_bottom:".dom-image",
                                        margin_left:".dom-image",
                                        opacity:".dom-image",
                                        box_shadow:".dom-image",
                                        pull:{
                                            node:".dom-image",
                                            type:"custom_class",
                                            options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                                        },
                                        id:{
                                            node:".dom-image",
                                            type:"custom_string_id"
                                        },
                                        classes:{
                                            node:".dom-image",
                                            type:"custom_string_class",
                                            base_classes:"dom-image"
                                        }
                                    },
                                    root:".dom-image",
                                    override_styles:!1,
                                    can_edit:!1,
                                    watch_size:!0,
                                    override:[],
                                    html:'<img class="dom-image">',
                                    css:"",
                                    pos:{
                                        x:460,
                                        y:1908
                                    },
                                    sz:{
                                        w:420,
                                        h:232
                                    },
                                    is_locked:!1,
                                    snapped:!0,
                                    auto_height:!0,
                                    auto_width:!0,
                                    border_top_left_radius:"2px",
                                    border_bottom_left_radius:"2px",
                                    border_top_right_radius:"2px",
                                    border_bottom_right_radius:"2px",
                                    margin_top:"0px",
                                    margin_right:"0px",
                                    margin_bottom:"0px",
                                    margin_left:"0px",
                                    opacity:1,
                                    box_shadow:"none",
                                    pull:"",
                                    id:"dom-image-82",
                                    classes:"",
                                    url:"https://www.easel.io/images/7b19882888b1db65/source.png"
                                } ]
                            } ]
                        } ]
                    } ]
                }, {
                    t:"drect",
                    override:[],
                    html:'<div class="dom-rect"></div>',
                    css:"",
                    pos:{
                        x:55,
                        y:-2
                    },
                    sz:{
                        w:60,
                        h:68
                    },
                    is_locked:!1,
                    fill:{
                        R:255,
                        G:255,
                        B:255,
                        A:1
                    },
                    box_shadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.15)",
                    border_top_left_radius:"0px",
                    border_top_right_radius:"0px",
                    border_bottom_left_radius:"2px",
                    border_bottom_right_radius:"2px",
                    margin_top:"0px",
                    margin_bottom:"0px",
                    margin_right:"0px",
                    margin_left:"0px",
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"bsheading",
                    override:[ "font_face_size", "margin_top", "margin_right", "margin_bottom", "margin_left", "font_face", "font_weight", "font_size" ],
                    html:'<h1 class="heading" id="dom-elem-84">\n  <span class="editable-element">EASEL</span>\n</h1>',
                    css:"",
                    pos:{
                        x:129,
                        y:12
                    },
                    sz:{
                        w:300,
                        h:42
                    },
                    is_locked:!1,
                    edited_color:!0,
                    auto_height:!0,
                    auto_width:!0,
                    margin_top:"0px",
                    margin_right:"0px",
                    margin_bottom:"0px",
                    margin_left:"0px",
                    tag_type:"h1",
                    pull:"",
                    font:"oswald",
                    fw:"normal",
                    font_size:"17pt",
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"bscontainer",
                    override:[ "padding_top", "padding_right", "padding_bottom", "padding_left", "fill_color" ],
                    html:'<div class="bsc container-fluid" id="dom-elem-86">                                                                              <div class="child-place child-place-0"></div></div>',
                    css:"",
                    pos:{
                        x:0,
                        y:2072
                    },
                    sz:{
                        w:1050,
                        h:80
                    },
                    is_locked:!1,
                    snapped:!0,
                    auto_height:!0,
                    auto_width:!0,
                    padding_top:"20px",
                    padding_right:"20px",
                    padding_bottom:"20px",
                    padding_left:"20px",
                    fill:{
                        R:54,
                        G:55,
                        B:56,
                        A:1
                    },
                    layout_type:"container-fluid",
                    id:"",
                    classes:"",
                    children:[ {
                        t:"bsrow",
                        override:[],
                        html:'<div class="row-fluid" id="dom-elem-87"> <div class="child-place child-place-0"></div>  </div>',
                        css:"",
                        pos:{
                            x:20,
                            y:2063
                        },
                        sz:{
                            w:1010,
                            h:40
                        },
                        is_locked:!1,
                        snapped:!0,
                        auto_height:!0,
                        auto_width:!0,
                        id:"",
                        classes:"",
                        children:[ {
                            t:"bscolumn",
                            override:[],
                            html:'<span class="column span12" id="dom-elem-88">                                                                                                                                                                                                                 <div class="child-place child-place-1"></div> <div class="child-place child-place-0"></div>                                    </span>',
                            css:"",
                            pos:{
                                x:31,
                                y:2055
                            },
                            sz:{
                                w:1010,
                                h:40
                            },
                            is_locked:!1,
                            snapped:!0,
                            auto_height:!0,
                            auto_width:!0,
                            column_span:"span12",
                            offset_span:"",
                            id:"",
                            classes:"",
                            children:[ {
                                t:"bsparagraph",
                                override:[ "font_face_size", "padding_top", "padding_right", "padding_bottom", "padding_left", "font_face", "font_size", "text_color", "line_height" ],
                                html:'<div class="dom-body-text editable-element" id="dom-elem-88"><p>@easelapp</p></div>',
                                css:"",
                                pos:{
                                    x:20,
                                    y:1924
                                },
                                sz:{
                                    w:940,
                                    h:30
                                },
                                is_locked:!1,
                                snapped:!0,
                                edited_color:!0,
                                auto_height:!0,
                                auto_width:!0,
                                padding_top:"10px",
                                padding_right:"0px",
                                padding_bottom:"0px",
                                padding_left:"0px",
                                pull:"",
                                font:"droid sans",
                                font_size:"11pt",
                                text_color:{
                                    R:255,
                                    G:255,
                                    B:255,
                                    A:1
                                },
                                h:"19px",
                                id:"",
                                classes:"",
                                children:[]
                            }, {
                                t:"dimg",
                                name:"white_invert_30x40.png",
                                config:{
                                    border_top_left_radius:".dom-image",
                                    border_bottom_left_radius:".dom-image",
                                    border_top_right_radius:".dom-image",
                                    border_bottom_right_radius:".dom-image",
                                    margin_top:".dom-image",
                                    margin_right:".dom-image",
                                    margin_bottom:".dom-image",
                                    margin_left:".dom-image",
                                    opacity:".dom-image",
                                    box_shadow:".dom-image",
                                    pull:{
                                        node:".dom-image",
                                        type:"custom_class",
                                        options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                                    },
                                    id:{
                                        node:".dom-image",
                                        type:"custom_string_id"
                                    },
                                    classes:{
                                        node:".dom-image",
                                        type:"custom_string_class",
                                        base_classes:"dom-image"
                                    }
                                },
                                root:".dom-image",
                                override_styles:!1,
                                can_edit:!1,
                                watch_size:!0,
                                override:[],
                                html:'<img class="dom-image">',
                                css:"",
                                pos:{
                                    x:940,
                                    y:2175
                                },
                                sz:{
                                    w:0,
                                    h:0
                                },
                                is_locked:!1,
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                border_top_left_radius:"0px",
                                border_bottom_left_radius:"0px",
                                border_top_right_radius:"0px",
                                border_bottom_right_radius:"0px",
                                margin_top:"0px",
                                margin_right:"0px",
                                margin_bottom:"0px",
                                margin_left:"0px",
                                opacity:.2,
                                box_shadow:"none",
                                pull:"pull-right",
                                id:"dom-image-89",
                                classes:"",
                                url:"https://www.easel.io/images/2241a35efed3b813/source.png"
                            } ]
                        } ]
                    } ]
                }, {
                    t:"dimg",
                    name:"black_invert_30x40.png",
                    config:{
                        border_top_left_radius:".dom-image",
                        border_bottom_left_radius:".dom-image",
                        border_top_right_radius:".dom-image",
                        border_bottom_right_radius:".dom-image",
                        margin_top:".dom-image",
                        margin_right:".dom-image",
                        margin_bottom:".dom-image",
                        margin_left:".dom-image",
                        opacity:".dom-image",
                        box_shadow:".dom-image",
                        pull:{
                            node:".dom-image",
                            type:"custom_class",
                            options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                        },
                        id:{
                            node:".dom-image",
                            type:"custom_string_id"
                        },
                        classes:{
                            node:".dom-image",
                            type:"custom_string_class",
                            base_classes:"dom-image"
                        }
                    },
                    root:".dom-image",
                    override_styles:!1,
                    can_edit:!1,
                    watch_size:!0,
                    override:[],
                    html:'<img class="dom-image">',
                    css:"",
                    pos:{
                        x:70,
                        y:12
                    },
                    sz:{
                        w:30,
                        h:40
                    },
                    is_locked:!1,
                    auto_height:!0,
                    auto_width:!0,
                    border_top_left_radius:"0px",
                    border_bottom_left_radius:"0px",
                    border_top_right_radius:"0px",
                    border_bottom_right_radius:"0px",
                    margin_top:"0px",
                    margin_right:"0px",
                    margin_bottom:"0px",
                    margin_left:"0px",
                    opacity:.8999999761581421,
                    box_shadow:"none",
                    pull:"",
                    id:"dom-image-90",
                    classes:"",
                    url:"https://www.easel.io/images/0d3ec6d494f50816/source.png"
                } ],
                t:"layer"
            } ],
            grid:{
                grid:20,
                off:{
                    x:0,
                    y:0
                },
                enabled:!1,
                v:!1,
                c:{
                    R:237,
                    G:0,
                    B:7,
                    A:.15
                }
            },
            gs:{
                enabled:!1,
                v:!1,
                c:{
                    R:0,
                    G:255,
                    B:255,
                    A:.8
                },
                column_color:{
                    R:255,
                    G:0,
                    B:9,
                    A:.1
                },
                gutter_width:20,
                effective_size:null,
                document_size:1050,
                columns:12
            },
            guides:{
                x_guides:[],
                y_guides:[],
                enabled:!1,
                v:!1,
                c:{
                    R:0,
                    G:255,
                    B:255,
                    A:1
                }
            }
        },
        documentLoad:function(t) {
            return t.fromJSON(Draw.Demo.Default.documentJSON);
        },
        documentRun:function(t) {
            var e;
            return e = '<div class="modal">\n  <div class="modal-header">\n    <h3>Welcome to Easel!</h3>\n  </div>\n\n  <div class="modal-body">\n    <p>Easel is an in-browser web design application targeted at small teams.</p>\n\n    <p>This demo will show you some of Easel\'s features.</p>\n\n    <p>Please give us feedback! Just hit the <strong>Help/Feedback</strong> link on the menu bar.</p>\n  </div>\n\n  <div class="modal-footer">\n    <a href="#" class="cta btn btn-info btn-large pull-left" title="Yeah!">Let me play with it!</a>\n  </div>\n</div>', 
            Draw.Demo.runDemo(t, "Default", e);
        }
    };
}.call(this), function() {
    Draw.Demo.PersistentTest = {
        documentVersion:1,
        documentJSON:{
            sz:{
                w:980,
                h:1e3
            },
            background_color:{
                R:255,
                G:255,
                B:255,
                A:1
            },
            background_image:null,
            background_repeat:"repeat",
            background_position:"top center",
            "toggle:background_image":!1,
            "toggle:background_cover":!1,
            use_padding_top:!0,
            version:"1.0",
            symbols:[],
            document:[ {
                children:[ {
                    t:"drect",
                    override:[],
                    html:'<div class="dom-rect"></div>',
                    css:"",
                    pos:{
                        x:141,
                        y:180
                    },
                    sz:{
                        w:177,
                        h:94
                    },
                    is_locked:!1,
                    fill:{
                        R:128,
                        G:204,
                        B:255,
                        A:1
                    },
                    background_repeat:"repeat",
                    background_position:"0% 0%",
                    background_size:"auto",
                    box_shadow:"none",
                    border_top_left_radius:"0px",
                    border_top_right_radius:"0px",
                    border_bottom_left_radius:"0px",
                    border_bottom_right_radius:"0px",
                    margin_top:"0px",
                    margin_bottom:"0px",
                    margin_right:"0px",
                    margin_left:"0px",
                    border_top_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_top_style:"none",
                    border_top_width:0,
                    border_right_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_right_style:"none",
                    border_right_width:0,
                    border_bottom_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_bottom_style:"none",
                    border_bottom_width:0,
                    border_left_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_left_style:"none",
                    border_left_width:0,
                    id:"",
                    classes:"",
                    children:[]
                } ],
                t:"layer"
            } ],
            grid:{
                grid:20,
                off:{
                    x:0,
                    y:0
                },
                enabled:!1,
                v:!1,
                c:{
                    R:237,
                    G:0,
                    B:7,
                    A:.15
                }
            },
            gs:{
                enabled:!1,
                v:!1,
                c:{
                    R:0,
                    G:255,
                    B:255,
                    A:.8
                },
                column_color:{
                    R:255,
                    G:0,
                    B:9,
                    A:.1
                },
                gutter_width:20,
                effective_size:null,
                document_size:980,
                columns:12
            },
            guides:{
                x_guides:[],
                y_guides:[],
                enabled:!1,
                v:!1,
                c:"#0ff"
            }
        },
        documentThumbnail:Asset.DEFAULT_DEMO_THUMBNAIL,
        documentTooltip:"Here is the PersistentTest document you just made!",
        documentLoad:function(t, e) {
            return Draw.Demo.loadDocument(t, "PersistentTest", {
                clearCurrentDemo:e
            });
        },
        documentRun:function(t) {
            var e;
            return Draw.Demo.loadDocument(t, "PersistentTest", {
                useSavedDocument:!1
            }), Draw.Demo.clearCurrentDemo(), e = function() {
                var e, i, n;
                return i = {
                    content:"<p>Draw some things. When you click Next, the\ncurrent state of the document will be saved into localStorage.\nWhen you make a new account, it will save this document to your account.</p>",
                    nextButton:!0,
                    container:$(".viewable-viewport"),
                    target:[ 1e3, 1020 ],
                    my:"right top",
                    at:"left top"
                }, e = {
                    content:"<p>Ok, it's been saved.</p>",
                    nextButton:!0,
                    container:$(".viewable-viewport"),
                    target:[ 1e3, 1020 ],
                    my:"right top",
                    at:"left top",
                    setup:function() {
                        return Draw.Demo.saveAsCurrentDemo(t);
                    },
                    teardown:function() {
                        return t.signup("<p>Ok!</p>");
                    }
                }, n = new Tourist.Tour({
                    steps:[ i ],
                    successStep:e
                }), n.start();
            }, setTimeout(e, 100), Draw.Demo.updateTweetButton(Draw.Demo.PersistentTest.tweet);
        },
        tweet:{
            text:"Yeah, persistence demo!!",
            url:"http://easel.io/whatev"
        }
    };
}.call(this), function() {
    Draw.Demo.Simple = {
        documentVersion:1,
        documentJSON:{
            sz:{
                w:980,
                h:1e3
            },
            background_color:{
                R:255,
                G:255,
                B:255,
                A:1
            },
            background_image:null,
            background_repeat:"repeat",
            background_position:"top center",
            "toggle:background_image":!1,
            "toggle:background_cover":!1,
            use_padding_top:!0,
            version:"1.0",
            symbols:[],
            document:[ {
                children:[ {
                    t:"drect",
                    override:[],
                    html:'<div class="dom-rect"></div>',
                    css:"",
                    pos:{
                        x:136,
                        y:82
                    },
                    sz:{
                        w:223,
                        h:141
                    },
                    is_locked:!1,
                    fill:"#80ccff",
                    background_repeat:"repeat",
                    background_position:"0% 0%",
                    background_size:"auto",
                    box_shadow:"none",
                    border_top_left_radius:"0px",
                    border_top_right_radius:"0px",
                    border_bottom_left_radius:"0px",
                    border_bottom_right_radius:"0px",
                    margin_top:"0px",
                    margin_bottom:"0px",
                    margin_right:"0px",
                    margin_left:"0px",
                    border_top_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_top_style:"none",
                    border_top_width:0,
                    border_right_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_right_style:"none",
                    border_right_width:0,
                    border_bottom_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_bottom_style:"none",
                    border_bottom_width:0,
                    border_left_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_left_style:"none",
                    border_left_width:0,
                    id:"",
                    classes:"",
                    children:[]
                } ],
                t:"layer"
            } ],
            grid:{
                grid:20,
                off:{
                    x:0,
                    y:0
                },
                enabled:!1,
                v:!1,
                c:{
                    R:237,
                    G:0,
                    B:7,
                    A:.15
                }
            },
            gs:{
                enabled:!1,
                v:!1,
                c:{
                    R:0,
                    G:255,
                    B:255,
                    A:.8
                },
                column_color:{
                    R:255,
                    G:0,
                    B:9,
                    A:.1
                },
                gutter_width:20,
                effective_size:null,
                document_size:980,
                columns:12
            },
            guides:{
                x_guides:[],
                y_guides:[],
                enabled:!1,
                v:!1,
                c:"#0ff"
            }
        },
        documentLoad:function(t) {
            return t.fromJSON(Draw.Demo.Simple.documentJSON);
        },
        documentRun:function(t) {
            return Draw.Demo.Simple.documentLoad(t);
        }
    };
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.Demo.Tour = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        return i(n, e), n.prototype.scrollToBootstrapElement = function(t, e) {
            var i, n, o, r;
            return n = e.dialogManager.dialogs.symbols, n.show(), n.pane.tabber.selectPane(1), 
            i = n.pane.tabber.paneObjects[1], i.selectPane(0), o = i.paneObjects[0].el.parent(), 
            r = i.paneObjects[0].el.find('[data-id="' + t + '"]'), o.scrollTo(r, {
                offsetTop:195,
                duration:0
            }), r;
        }, n.prototype.getPointForCanvasElement = function(t, e, i) {
            var n, o, r, s;
            return null == i && (i = {
                side:"bottom"
            }), o = {
                checkIfInView:!0,
                animate:!0
            }, i.moveObjectsIntoView !== !1 && e.viewport.moveObjectsIntoView(t, o), n = t.getBounds(), 
            s = n.y, "bottom" === i.side && (s += n.height), r = new paper.Point(n.center.x, s), 
            e.viewport.transformToContentPoint(r);
        }, n.prototype.targetInspector = function(t, e, i) {
            var n, o = this;
            return n = function() {
                var n, r;
                return n = i.dialogManager.dialogs.properties.pane.el, r = n.find(t), n.scrollTo(r, {
                    offsetTop:100,
                    duration:0
                }), o.view.setTarget(r, e), o.view.show(), r.findAndSelf("input").focus();
            }, setTimeout(n, 100);
        }, n;
    }(Tourist.Tour);
}.call(this), function() {
    var t, e, i, n, o, r = {}.hasOwnProperty, s = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var n in e) r.call(e, n) && (t[n] = e[n]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    e = [ {
        content:'<p>Create a responsive design by starting with a <em>Layout</em>.</p>\n<p class="action"><strong>Drag a <em>Layout</em> onto the page.</strong></p>',
        highlightTarget:!0,
        closeButton:!0,
        bind:[ "onChangeState", "onChangeSnapped" ],
        zIndex:2e3,
        setup:function(t, e) {
            var i, n = this;
            return o(this), e.document.bind("change:state", this.onChangeState), i = t.scrollToBootstrapElement("bslayout", e), 
            setTimeout(function() {
                return t.view.setTarget(i, n), t.view.show();
            }, 200), {};
        },
        onChangeState:function(t, e, i, n, o, r, s) {
            return "change:hierarchy" === i && o instanceof Draw.BootstrapContainer ? "add" === s.operation ? (e.container = o, 
            o.bind("change:snapped", this.onChangeSnapped), t.view.hide()) :(o.unbind("change:snapped", this.onChangeSnapped), 
            t.view.show()) :void 0;
        },
        onChangeSnapped:function(t, e, i, n) {
            return setTimeout(function() {
                return n && e.container.parent ? t.next() :void 0;
            }, 50);
        },
        teardown:function(t, e) {
            return e.document.unbind("change:state", this.onChangeState), e.container ? e.container.unbind("change:snapped", this.onChangeSnapped) :void 0;
        }
    }, {
        content:"<p>A <em>Layout</em> consists of a <em>Container</em>, a <em>Row</em>, and two <em>Columns</em>.</p>\n<p>Notice that the <em>Container</em> snapped to the top of the page. We'll adjust it in the next step.</p>",
        closeButton:!0,
        nextButton:!0,
        setup:function(t, e) {
            var i, n;
            return o(this), e.document.selectionModel.setLocked(!0, !0), n = e.document.selectionModel.getOneSelected(), 
            i = t.getPointForCanvasElement(n, e), n ? {
                my:"top center",
                at:"bottom center",
                target:[ i.x, i.y ],
                container:e.viewport.el
            } :{};
        },
        teardown:function(t, e) {
            return e.document.selectionModel.setLocked(!1);
        }
    }, {
        content:'<p>Lets move the top of the <em>Container</em> away from the top of the page.</p>\n<p class="action"><strong>Click</strong> in the top margin edit box, type 10 and press enter.</p>\n<p>You can use the up and down arrow keys to nudge the margin.</p>',
        highlightTarget:!0,
        closeButton:!0,
        skipButton:!0,
        bind:[ "onChangeMarginTop" ],
        zIndex:2e3,
        setup:function(t, e) {
            var i, n;
            return o(this), e.document.selectionModel.setSelected(e.container), e.document.selectionModel.setLocked(!0, !0), 
            e.container.bind("change:margin_top", this.onChangeMarginTop), i = e.dialogManager.dialogs.properties.pane.el, 
            n = i.find(".property-margin_top input.textbox"), i.scrollTo(n, {
                offsetTop:100,
                duration:0
            }), {
                my:"right center",
                at:"left center",
                target:n,
                viewport:$(window)
            };
        },
        onChangeMarginTop:function(t, e, i, n) {
            return parseInt(n) > 1 ? t.next() :void 0;
        },
        teardown:function(t, e) {
            return e.document.selectionModel.setLocked(!1), e.container.unbind("change:margin_top", this.onChangeMarginTop);
        }
    }, {
        content:'<p>Now, lets add a new <em>Column</em>.</p>\n<p class="action"><strong>Click</strong> in this red box, <strong>right click</strong>, and choose <strong>Insert Column After.</strong></p>',
        closeButton:!0,
        bind:[ "onChangeState" ],
        setup:function(t, e) {
            var i;
            return o(this), e.document.bind("change:state", this.onChangeState), i = t.getPointForCanvasElement(e.container.children[0].children[0], e), 
            {
                my:"top center",
                at:"bottom center",
                target:[ i.x, i.y ],
                container:e.viewport.el
            };
        },
        onChangeState:function(t, e, i, n, o, r, s) {
            return "change:hierarchy" === i && o instanceof Draw.BootstrapColumn ? "add" !== s.operation || e.column ? void 0 :(e.column = o, 
            setTimeout(function() {
                return t.next();
            }, 100)) :void 0;
        },
        teardown:function(t, e) {
            return e.document.unbind("change:state", this.onChangeState);
        }
    }, {
        content:'<p>You can resize the new <em>Column</em> by dragging the handles (little blue squares).</p>\n<p class="action">Give one of those little blue squares a drag.</p>',
        closeButton:!0,
        skipButton:!0,
        bind:[ "onChangeColSpan" ],
        setup:function(t, e) {
            var i;
            return o(this), e.document.selectionModel.setSelected(e.column), e.document.selectionModel.setLocked(!0, !0), 
            e.column.bind("change:column_span", this.onChangeColSpan), i = t.getPointForCanvasElement(e.column, e), 
            {
                my:"top center",
                at:"bottom center",
                target:[ i.x, i.y ],
                container:e.viewport.el
            };
        },
        onChangeColSpan:function(t) {
            return t.next();
        },
        teardown:function(t, e) {
            return e.document.selectionModel.setLocked(!1), e.column.unbind("change:column_span", this.onChangeColSpan);
        }
    }, {
        content:"<p>Alternatively, you can edit the number of columns in the <strong>Column Span</strong> property.</p>",
        highlightTarget:!0,
        closeButton:!0,
        nextButton:!0,
        zIndex:2e3,
        setup:function(t, e) {
            var i, n;
            return o(this), e.document.selectionModel.setLocked(!0, !0), i = e.dialogManager.dialogs.properties.pane.el, 
            n = i.find(".property-column_span .dropdown-box"), i.scrollTo(n, {
                offsetTop:100,
                duration:0
            }), {
                my:"top right",
                at:"bottom center",
                target:n,
                viewport:$(window)
            };
        },
        teardown:function(t, e) {
            return e.document.selectionModel.setLocked(!1);
        }
    }, {
        content:"<p>The containers have red borders because they are empty. Let's put something in there.</p>",
        closeButton:!0,
        nextButton:!0,
        setup:function(t, e) {
            var i;
            return o(this), i = t.getPointForCanvasElement(e.column, e), {
                my:"top center",
                at:"bottom center",
                target:[ i.x, i.y ],
                container:e.viewport.el
            };
        }
    }, {
        content:'<p class="action">Drag a heading into one of the red containers.</p>\n<p>The containers that can accept the heading will turn blue.</p>',
        highlightTarget:!0,
        closeButton:!0,
        bind:[ "onChangeState", "onChangeSnapped" ],
        zIndex:2e3,
        setup:function(t, e) {
            var i, n = this;
            return o(this), e.document.bind("change:state", this.onChangeState), i = t.scrollToBootstrapElement("bsheading", e), 
            setTimeout(function() {
                return t.view.setTarget(i, n), t.view.show();
            }, 200), {};
        },
        onChangeState:function(t, e, i, n, o, r, s) {
            return "change:hierarchy" === i && o instanceof Draw.BootstrapHeading ? "add" === s.operation ? (e.heading = o, 
            o.bind("change:snapped", this.onChangeSnapped), t.view.hide()) :(o.unbind("change:snapped", this.onChangeSnapped), 
            t.view.show()) :void 0;
        },
        onChangeSnapped:function(t, e, i, n) {
            return setTimeout(function() {
                return n && e.heading.parent ? t.next() :void 0;
            }, 50);
        },
        teardown:function(t, e) {
            return e.document.unbind("change:state", this.onChangeState), e.heading ? e.heading.unbind("change:snapped", this.onChangeSnapped) :void 0;
        }
    }, {
        content:'<p>Now, we\'re going to export just part of the page &mdash; the <em>Layout</em>.</p>\n<p class="action"><strong>Click BootstrapContainer</strong> here on the <em>Breadcrumb</em> to select the entire Container.</p>',
        highlightTarget:!0,
        closeButton:!0,
        bind:[ "onChangeSelection" ],
        zIndex:2e3,
        setup:function(t, e) {
            var i;
            return o(this), e.document.selectionModel.bind("change:selected", this.onChangeSelection), 
            i = $("#breadcrumb a:eq(0)"), {
                my:"top center",
                at:"bottom center",
                target:i,
                viewport:$(window)
            };
        },
        onChangeSelection:function(t, e) {
            var i;
            return i = e.document.selectionModel.getOneSelected(), i instanceof Draw.BootstrapContainer ? t.next() :void 0;
        },
        teardown:function(t, e) {
            return e.document.selectionModel.unbind("change:selected", this.onChangeSelection);
        }
    }, {
        content:'<p class="action">Now <strong>right click</strong> and select <strong>Export to HTML/CSS</strong>.</p>',
        closeButton:!0,
        bind:[ "onCodeExport" ],
        setup:function(t, e) {
            var i;
            return o(this), e.document.selectionModel.setLocked(!0, !0), e.document.bind("prompt:codeexport", this.onCodeExport), 
            i = t.getPointForCanvasElement(e.container, e), {
                my:"top center",
                at:"bottom center",
                target:[ i.x, i.y ],
                container:e.viewport.el
            };
        },
        onCodeExport:function(t) {
            return setTimeout(function() {
                return t.next();
            }, 100);
        },
        teardown:function(t, e) {
            return e.document.selectionModel.setLocked(!1), e.document.unbind("prompt:codeexport", this.onCodeExport);
        }
    }, {
        content:"<p>\n  When you're done with the code, just click the X here.\n</p>",
        closeButton:!0,
        nextButton:!0,
        bind:[ "onCodeDialogHide" ],
        zIndex:2500,
        setup:function(t, e) {
            var i;
            return o(this), i = $(".code-export").parents(".modal").find(".modal-header button"), 
            e.prompter.codeDialog.bind("hide", this.onCodeDialogHide), {
                my:"right top",
                at:"left center",
                target:i
            };
        },
        onCodeDialogHide:function(t) {
            return t.next();
        },
        teardown:function(t, e) {
            return e.prompter.codeDialog.unbind("hide", this.onCodeDialogHide), e.prompter.codeDialog.hide();
        }
    }, {
        content:'<p>You can also export the entire page.</p>\n<p class="action">Click <strong>Export the Document\'s HTML/CSS</strong>.</p>',
        highlightTarget:!0,
        closeButton:!0,
        bind:[ "onCodeExport" ],
        zIndex:2500,
        setup:function(t, e) {
            var i, n;
            return o(this), e.document.bind("prompt:codeexport", this.onCodeExport), i = e.menu.menu.items[0], 
            n = i.childPane.items[4].el, i.showChildren(), {
                my:"left top",
                at:"right center",
                target:n,
                viewport:$(window)
            };
        },
        onCodeExport:function(t, e, i, n) {
            if (n) return setTimeout(function() {
                return t.next();
            }, 100);
        },
        teardown:function(t, e) {
            return e.document.unbind("prompt:codeexport", this.onCodeExport);
        }
    }, {
        content:"<p>\n  To download all the code, just click on the 'Download as zip file' button.\n</p>",
        closeButton:!0,
        nextButton:!0,
        bind:[ "onCodeDialogHide" ],
        zIndex:2500,
        setup:function(t, e) {
            var i;
            return o(this), i = $(".code-export").parents(".modal").find(".modal-footer .download-as-zip"), 
            e.prompter.codeDialog.bind("hide", this.onCodeDialogHide), {
                my:"bottom center",
                at:"top center",
                target:i
            };
        },
        onCodeDialogHide:function(t) {
            return t.next();
        },
        teardown:function(t, e) {
            return e.prompter.codeDialog.unbind("hide", this.onCodeDialogHide), e.prompter.codeDialog.hide();
        }
    } ], i = {
        content:"<p><strong>Great job!</strong></p>\n<p>If you have any questions or concerns you can reach us here.</p>\n<p>Have fun!</p>",
        highlightTarget:!0,
        okButton:!0,
        zIndex:2e3,
        setup:function(t, e) {
            var i, n;
            return o(this, "Success"), i = e.menu.menu.items[4], n = i.childPane.items[2].el, 
            i.showChildren(), {
                my:"left top",
                target:n,
                viewport:$(window)
            };
        }
    }, t = {
        content:"<p>You can always get back to the tour from here.</p>\n<p>And you can send us feedback from this menu as well.</p>\n<p><strong>Have fun!</strong></p>",
        okButton:!0,
        setup:function(t, e) {
            var i, n;
            return o(this, "Cancel"), i = e.menu.menu.items[4], n = i.childPane.items[0].el, 
            i.showChildren(), {
                my:"left top",
                target:n,
                viewport:$(window)
            };
        }
    }, n = 1, o = function(t, e) {
        var i;
        if (window.mixpanel) return i = t.index + 1, e && (i = e), mixpanel.track("Tour:Container:" + i, {
            version:n
        });
    }, Draw.Demo.Tour.Container = function(n) {
        function o(n) {
            var r;
            null == n && (n = {}), r = {
                stepOptions:n,
                steps:e,
                cancelStep:t,
                successStep:i,
                tipOptions:{
                    showEffect:"slidein"
                }
            }, o.__super__.constructor.call(this, r);
        }
        return s(o, n), o;
    }(Draw.Demo.Tour);
}.call(this), function() {
    var t, e, i, n = {}.hasOwnProperty, o = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var o in e) n.call(e, o) && (t[o] = e[o]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.Demo.LandingPageTour = {
        documentVersion:2,
        documentJSON:{
            sz:{
                w:768,
                h:740
            },
            background_color:{
                R:255,
                G:255,
                B:255,
                A:1
            },
            background_image:"/images/aa962a7851e994b8/source.jpg",
            background_repeat:"no-repeat",
            background_position:"top center",
            "toggle:background_image":!0,
            "toggle:background_cover":!0,
            use_padding_top:!0,
            version:"1.0",
            symbols:[],
            document:[ {
                children:[ {
                    t:"bsnavbar",
                    override:[ "border_top_width", "border_top_color", "border_top_style", "border_bottom_width", "border_bottom_color", "border_bottom_style", "border_left_width", "border_left_color", "border_left_style", "border_right_width", "border_right_color", "border_right_style", "fill_color", "box_shadow" ],
                    html:'<div class="navbar">\n  <div class="navbar-inner">\n    <div class="child-place child-place-0"></div>\n    <div class="child-place child-place-1"></div>\n  </div>\n</div>',
                    css:"",
                    pos:{
                        x:0,
                        y:0
                    },
                    sz:{
                        w:768,
                        h:52
                    },
                    snapped:!0,
                    auto_height:!0,
                    auto_width:!0,
                    fill:{
                        R:255,
                        G:255,
                        B:255,
                        A:.278431
                    },
                    box_shadow:"0px 1px 3px 0px rgba(0, 0, 0, 0.0666667)",
                    colors:"",
                    positioning:"navbar-fixed-top",
                    border_top_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_top_style:"solid",
                    border_top_width:0,
                    border_right_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_right_style:"solid",
                    border_right_width:0,
                    border_bottom_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_bottom_style:"solid",
                    border_bottom_width:0,
                    border_left_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_left_style:"solid",
                    border_left_width:0,
                    id:"nav-bar",
                    classes:"",
                    children:[ {
                        t:"bsbrand",
                        override:[ "text_shadow", "text_color", "font_size", "font_weight" ],
                        html:'<a class="brand" href="#" id="dom-elem-13">             <div class="child-place child-place-0"></div> <span class="editable-element">AwesomeCo.<br></span>                 </a>',
                        css:"",
                        pos:{
                            x:23,
                            y:151
                        },
                        sz:{
                            w:145,
                            h:41
                        },
                        snapped:!0,
                        edited_color:!0,
                        auto_height:!0,
                        auto_width:!0,
                        text_shadow:"none",
                        fw:"bold",
                        font_size:"16px",
                        text_color:{
                            R:255,
                            G:255,
                            B:255,
                            A:1
                        },
                        id:"",
                        classes:"",
                        children:[ {
                            t:"ficon",
                            override:[ "margin_top", "margin_right", "margin_bottom", "margin_left", "font_size" ],
                            html:'<i class="icon icon-bolt" id="dom-elem-14"></i>',
                            css:"",
                            pos:{
                                x:25,
                                y:16
                            },
                            sz:{
                                w:14,
                                h:14
                            },
                            is_locked:!1,
                            snapped:!0,
                            edited_color:!0,
                            font_size:"14px",
                            margin_top:"2px",
                            margin_right:"0px",
                            margin_bottom:"0px",
                            margin_left:"-7px",
                            pull:"",
                            id:"",
                            classes:"",
                            children:[]
                        } ]
                    }, {
                        t:"bsnav",
                        override:[],
                        html:'<ul class="nav" id="dom-elem-14">\n  \n  \n  <div class="child-place child-place-0"></div>\n</ul>',
                        css:"",
                        pos:{
                            x:99,
                            y:151
                        },
                        sz:{
                            w:168,
                            h:40
                        },
                        snapped:!0,
                        auto_height:!0,
                        auto_width:!0,
                        nav_type:"",
                        is_stacked:"",
                        pull:"pull-right",
                        id:"",
                        classes:"",
                        children:[ {
                            t:"bsnavlink",
                            override:[ "text_shadow", "text_color", "line_height" ],
                            html:'<li id="dom-elem-15"><a href="#"><span class="editable-element">Login<br></span></a></li>',
                            css:"",
                            pos:{
                                x:0,
                                y:0
                            },
                            sz:{
                                w:65,
                                h:42
                            },
                            snapped:!0,
                            edited_color:!0,
                            auto_height:!0,
                            auto_width:!0,
                            state:"",
                            is_divider:"",
                            text_shadow:"none",
                            text_color:{
                                R:255,
                                G:255,
                                B:255,
                                A:1
                            },
                            h:"22px",
                            id:"",
                            classes:"",
                            children:[]
                        } ]
                    } ]
                }, {
                    t:"bscontainer",
                    override:[ "padding_top", "padding_right", "padding_bottom", "padding_left" ],
                    html:'<div class="bsc" id="dom-elem-18">                  <div class="child-place child-place-0"></div>            <div class="child-place child-place-1"></div>                                          </div>',
                    css:"",
                    pos:{
                        x:22,
                        y:63
                    },
                    sz:{
                        w:724,
                        h:230
                    },
                    snapped:!0,
                    auto_height:!0,
                    auto_width:!0,
                    padding_top:"60px",
                    padding_right:"0px",
                    padding_bottom:"60px",
                    padding_left:"0px",
                    layout_type:"container",
                    id:"hero-container",
                    classes:"",
                    children:[ {
                        t:"bsheading",
                        override:[ "text_shadow", "font_size", "alignment", "text_color" ],
                        html:'<h1 class="heading" id="title">\n  <span class="editable-element">You can move mountains</span>\n</h1>',
                        css:"",
                        pos:{
                            x:20,
                            y:52
                        },
                        sz:{
                            w:724,
                            h:40
                        },
                        snapped:!0,
                        edited_color:!0,
                        auto_height:!0,
                        auto_width:!0,
                        tag_type:"h1",
                        pull:"",
                        text_shadow:"0px 1px 2px rgba(0, 0, 0, 0.129412)",
                        font_size:"50px",
                        a:"center",
                        text_color:{
                            R:255,
                            G:255,
                            B:255,
                            A:1
                        },
                        id:"title",
                        classes:"",
                        children:[]
                    }, {
                        t:"bsheading",
                        override:[ "font_size", "alignment", "font_weight", "text_color", "text_shadow" ],
                        html:'<h2 class="heading" id="dom-elem-18">\n  <span class="editable-element">We take care of it so you can focus on the important things.</span>\n</h2>',
                        css:"",
                        pos:{
                            x:20,
                            y:102
                        },
                        sz:{
                            w:724,
                            h:40
                        },
                        snapped:!0,
                        edited_color:!0,
                        auto_height:!0,
                        auto_width:!0,
                        tag_type:"h2",
                        pull:"",
                        text_shadow:"0px 1px 2px rgba(0, 0, 0, 0.168627)",
                        fw:"normal",
                        font_size:"20px",
                        a:"center",
                        text_color:{
                            R:240,
                            G:240,
                            B:240,
                            A:1
                        },
                        id:"subtitle",
                        classes:"",
                        children:[]
                    } ]
                }, {
                    t:"bscontainer",
                    override:[],
                    html:'<div class="bsc container"></div>',
                    css:"",
                    pos:{
                        x:20,
                        y:152
                    },
                    sz:{
                        w:940,
                        h:60
                    },
                    snapped:!0,
                    auto_height:!0,
                    auto_width:!0,
                    layout_type:"container",
                    id:"",
                    classes:"",
                    children:[ {
                        t:"bsrow",
                        override:[],
                        html:'<div class="row-fluid" id="dom-elem-31"> <div class="child-place child-place-0"></div> </div>',
                        css:"",
                        pos:{
                            x:128,
                            y:273
                        },
                        sz:{
                            w:940,
                            h:60
                        },
                        snapped:!0,
                        auto_height:!0,
                        auto_width:!0,
                        id:"signup-form-container",
                        classes:"",
                        children:[ {
                            t:"bscolumn",
                            override:[],
                            html:'<span class="column" id="dom-elem-32">                              <div class="child-place child-place-0"></div>                                                                                                                                                                     </span>',
                            css:"",
                            pos:{
                                x:0,
                                y:0
                            },
                            sz:{
                                w:460,
                                h:60
                            },
                            snapped:!0,
                            auto_height:!0,
                            auto_width:!0,
                            column_span:"span6",
                            offset_span:"offset3",
                            id:"",
                            classes:"",
                            children:[ {
                                t:"bsform",
                                override:[ "border_top_left_radius", "border_top_right_radius", "border_bottom_right_radius", "border_bottom_left_radius", "fill_color", "margin_top", "margin_right", "margin_bottom", "margin_left", "box_shadow" ],
                                html:'<form class="bs-form" id="signup-form" action="#">                                                                                                                                                                                                                                                                                                                                                                    </form>',
                                css:"",
                                pos:{
                                    x:261,
                                    y:153
                                },
                                sz:{
                                    w:352,
                                    h:80
                                },
                                snapped:!0,
                                auto_height:!0,
                                auto_width:!0,
                                margin_top:"0px",
                                margin_right:"0px",
                                margin_bottom:"60px",
                                margin_left:"0px",
                                fill:{
                                    g:{
                                        t:"linear",
                                        stops:[ {
                                            r:0,
                                            c:{
                                                R:255,
                                                G:255,
                                                B:255,
                                                A:.227451
                                            }
                                        }, {
                                            r:1,
                                            c:{
                                                R:191,
                                                G:191,
                                                B:191,
                                                A:.329412
                                            }
                                        } ]
                                    },
                                    o:{
                                        x:437,
                                        y:153
                                    },
                                    d:{
                                        x:437,
                                        y:233
                                    }
                                },
                                box_shadow:"inset 0px 1px 0px 0px rgba(255, 255, 255, 0.7), 0px 1px 2px 0px rgba(0, 0, 0, 0.27)",
                                form_type:"form-horizontal",
                                pull:"",
                                action:"",
                                border_top_left_radius:"3px",
                                border_top_right_radius:"3px",
                                border_bottom_left_radius:"3px",
                                border_bottom_right_radius:"3px",
                                id:"signup-form",
                                classes:"",
                                children:[]
                            } ]
                        } ]
                    } ]
                }, {
                    t:"bscontainer",
                    override:[],
                    html:'<div class="bsc container"></div>',
                    css:"",
                    pos:{
                        x:22,
                        y:370
                    },
                    sz:{
                        w:724,
                        h:60
                    },
                    snapped:!0,
                    auto_height:!0,
                    auto_width:!0,
                    layout_type:"container",
                    id:"image-container",
                    classes:"",
                    children:[]
                } ],
                t:"layer"
            } ],
            grid:{
                grid:20,
                off:{
                    x:0,
                    y:0
                },
                enabled:!1,
                v:!1,
                c:{
                    R:237,
                    G:0,
                    B:7,
                    A:.15
                }
            },
            gs:{
                enabled:!1,
                v:!1,
                c:{
                    R:0,
                    G:255,
                    B:255,
                    A:.8
                },
                column_color:{
                    R:255,
                    G:0,
                    B:9,
                    A:.1
                },
                gutter_width:20,
                effective_size:null,
                document_size:768,
                columns:12
            },
            guides:{
                x_guides:[],
                y_guides:[],
                enabled:!1,
                v:!1,
                c:{
                    R:0,
                    G:255,
                    B:255,
                    A:1
                }
            }
        },
        documentThumbnail:Asset.DEFAULT_TOUR_THUMBNAIL,
        documentTooltip:"This is a tour! It'll walk you through creating a simple landing page.",
        documentLoad:function(t, e) {
            return Draw.Demo.loadDocument(t, "LandingPageTour", {
                clearCurrentDemo:e
            });
        },
        documentRun:function(t, e) {
            var i, n, o, r;
            return null == e && (e = {}), r = Draw.Demo.LandingPageTour, o = '<div class="modal info-modal">\n  <div class="modal-header">\n    <h3>Welcome to Easel!</h3>\n  </div>\n\n  <div class="modal-body">\n    <p>Easel is an <strong>in-browser web design application</strong>\n    targeted at small teams.</p>\n\n    <p>Easel is best learned by doing, so let’s create a\n    simple landing page with a signup form. </p>\n  </div>\n\n  <div class="modal-footer">\n    <a href="#" class="cta btn btn-info btn-large pull-left">Start the tour</a>\n  </div>\n</div>', 
            i = function() {
                var e, i;
                return i = new Draw.Demo.Tour.LandingPage({
                    document:t,
                    viewport:APP.view,
                    menu:APP.menu,
                    dialogManager:APP.dialogManager,
                    prompter:APP.prompter
                }), e = function() {
                    return i.start();
                }, setTimeout(e, 300);
            }, e.fromJSON !== !1 && (n = t.isPersisted() ? Draw.Demo.getCurrentDemoDoc("LandingPageTour", r.documentVersion, r.documentJSON) :r.documentJSON, 
            t.fromJSON(n)), r._isEmpty(t) && Draw.Demo.runDemo(t, "LandingPageTour", o, i, {
                showSymbols:!1,
                fromJSON:!1
            }), !1;
        },
        documentRerun:function(t) {
            var e;
            return e = Draw.Demo.LandingPageTour, t.state && t.state.shareDoc && t.state.shareDoc.created === !1 ? e._isEmpty(t) ? (window.mixpanel && mixpanel.track("Tour:Demo:Restart", {
                location:"document"
            }), e.documentRun(t, {
                fromJSON:!1
            })) :void 0 :void 0;
        },
        projectCss:"#hero-container, #signup-form input, #signup-form button, #nav-bar.brand {\n  font-family: 'proxima-nova', 'Helvetica Neue', Helvetica, Arial;\n}\n#signup-form {\n  padding: 20px 15px;\n  position: relative;\n  min-height: 28px;\n}\n#signup-form input {\n  position: absolute;\n  left: 15px;\n  right: 100px;\n  width: auto;\n}\n#signup-form button {\n  float: right;\n}",
        projectRun:function(t) {
            var e;
            return e = t.getStyleSheet(0), e.update(Draw.Demo.LandingPageTour.projectCss);
        },
        _isEmpty:function(t) {
            var e;
            return "demo" !== t.id && "LandingPageTour" !== t.getDemoName() || (e = paper.project.filterItems(function(t) {
                var e;
                return t.get && ("signup-form" === (e = t.get("id")) || "image-container" === e) && !t.children.length;
            }), 2 !== e.length) ? !1 :!0;
        }
    }, e = [ {
        content:"<p>First, we'll edit this heading. Text is editable by double clicking.</p>\n<p class=\"action\">\n  <strong>Double click on the 'You can move...' text</strong> and edit it.\n  When finished, click out of the text.\n</p>",
        bind:[ "onChangeHtml" ],
        setup:function(t, e) {
            var i, n, o;
            return t.track(this), i = e.document.getProject().filterItems(function(t) {
                return t instanceof Draw.BootstrapHeading && "h1" === t.get("tag_type");
            }), o = e.heading = i[0], o.bind("change:html", this.onChangeHtml), n = t.getPointForCanvasElement(o, e), 
            o ? {
                my:"top center",
                at:"bottom center",
                target:[ n.x, n.y ],
                container:e.viewport.el
            } :{};
        },
        onChangeHtml:function(t) {
            return t.next();
        },
        teardown:function(t, e) {
            return e.heading.unbind("change:html", this.onChangeHtml);
        }
    }, {
        content:'<p>Easel allows you to style elements with the panel to the right.\nWe call this panel the <em>Inspector</em>.</p>\n<p class="action">\n  With the heading selected, <strong>change the font</strong> with the font dropdown.\n  <strong>Raleway</strong> is a good choice.\n</p>',
        highlightTarget:!0,
        skipButton:!0,
        bind:[ "onChangeFontFace" ],
        zIndex:2050,
        setup:function(t, e) {
            var i, n;
            return t.track(this), e.document.selectionModel.setLocked(!0, !0), e.heading.bind("change:font_face", this.onChangeFontFace), 
            i = e.dialogManager.dialogs.properties.pane.el, n = i.find(".property-font_face"), 
            i.scrollTo(n, {
                offsetTop:100,
                duration:0
            }), {
                my:"right top",
                at:"left center",
                target:n
            };
        },
        onChangeFontFace:function(t) {
            return t.next();
        },
        teardown:function(t, e) {
            return e.heading.unbind("change:font_face", this.onChangeFontFace), e.document.selectionModel.setLocked(!1);
        }
    }, {
        content:'<p>\n  Easel lets you export just the elements you need.\n  We\'ll export the heading with your new font.\n</p>\n<p class="action">\n  With the heading selected, <strong>right click</strong>\n  and select <strong>Export to HTML/CSS</strong>.\n</p>',
        closeButton:!0,
        bind:[ "onCodeExport" ],
        setup:function(t, e) {
            var i;
            return t.track(this), e.document.selectionModel.setLocked(!0, !0), e.document.bind("prompt:codeexport", this.onCodeExport), 
            i = t.getPointForCanvasElement(e.heading, e), {
                my:"top center",
                at:"bottom center",
                target:[ i.x, i.y ],
                container:e.viewport.el
            };
        },
        onCodeExport:function(t) {
            return setTimeout(function() {
                return t.next();
            }, 100);
        },
        teardown:function(t, e) {
            return e.document.selectionModel.setLocked(!1), e.document.unbind("prompt:codeexport", this.onCodeExport);
        }
    }, {
        content:"<p>\n  When you're done, just click the X here.\n</p>",
        nextButton:!0,
        bind:[ "onCodeDialogHide" ],
        zIndex:2050,
        setup:function(t, e) {
            var i;
            return t.track(this), i = $(".code-export").parents(".modal").find(".modal-header button"), 
            e.prompter.codeDialog.bind("hide", this.onCodeDialogHide), {
                my:"right top",
                at:"left center",
                target:i
            };
        },
        onCodeDialogHide:function(t) {
            return t.next();
        },
        teardown:function(t, e) {
            return e.prompter.codeDialog.unbind("hide", this.onCodeDialogHide), e.prompter.codeDialog.hide();
        }
    }, {
        content:'<p>Now let\'s bring in an image.</p>\n<p class="action">\n  Either <strong>click</strong> this menu item\n  or <strong>drag</strong> an image onto the canvas.\n</p>',
        highlightTarget:!0,
        closeButton:!0,
        bind:[ "onChangeState" ],
        zIndex:2050,
        setup:function(t, e) {
            var i, n;
            return t.track(this), e.document.bind("change:state", this.onChangeState), i = e.menu.menu.items[0], 
            n = i.childPane.items[0].el, i.showChildren(), {
                my:"left top",
                at:"right center",
                target:n,
                viewport:$(window)
            };
        },
        onChangeState:function(t, e, i, n, o, r, s) {
            return "change:hierarchy" === i && o instanceof Draw.DomImage ? "add" === s.operation ? (e.image = o, 
            setTimeout(function() {
                return t.next();
            }, 100)) :void 0 :void 0;
        },
        teardown:function(t, e) {
            var i;
            return e.document.unbind("change:state", this.onChangeState), i = e.menu.menu.items[0], 
            i.hideChildren();
        }
    }, {
        content:'<p>\n  Elements can be <em>snapped</em> into other elements.\n  Let\'s snap this image into the first container.\n</p>\n<p class="action">\n  <strong>Drag the image</strong> into the bottom red-outlined box. You will see\n  a green bar in the box, then <strong>drop</strong> the image.\n</p>',
        closeButton:!0,
        bind:[ "onChangeSnapped", "onChangePosition", "showTourBubble" ],
        setup:function(t, e) {
            var i;
            return t.track(this), this.showDelay = new Debouncer(300, this.showTourBubble), 
            e.image.bind("change:position", this.onChangePosition), e.image.bind("change:snapped", this.onChangeSnapped), 
            i = t.getPointForCanvasElement(e.image, e), {
                my:"top center",
                at:"bottom center",
                target:[ i.x, i.y ],
                container:e.viewport.el
            };
        },
        onChangeSnapped:function(t) {
            return t.next();
        },
        onChangePosition:function(t) {
            return t.view.hide(), this.showDelay.update();
        },
        showTourBubble:function(t, e) {
            var i;
            return i = t.getPointForCanvasElement(e.image, e, {
                moveObjectsIntoView:!1
            }), t.view.setTarget([ i.x, i.y ], this), t.view.show();
        },
        teardown:function(t, e) {
            return this.showDelay.stop(), e.image.unbind("change:snapped", this.onChangeSnapped), 
            e.image.unbind("change:position", this.onChangePosition);
        }
    }, {
        content:"<p>\n  Nice job! The image would look better centered, don't you think? Let's center it.\n</p>\n<p class=\"action\">\n  Select <strong>Center</strong> from the dropdown menu\n</p>",
        highlightTarget:!0,
        closeButton:!0,
        skipButton:!0,
        bind:[ "onChangePull" ],
        zIndex:2050,
        setup:function(t, e) {
            var i, n, o = this;
            return t.track(this), e.document.selectionModel.setLocked(!0, !0), e.image.bind("change:pull", this.onChangePull), 
            i = e.dialogManager.dialogs.properties.pane.el, n = i.find(".property-pull .dropdown-box"), 
            i.scrollTo(n, {
                offsetTop:100,
                duration:0
            }), setTimeout(function() {
                return t.view.setTarget(n, o), t.view.show();
            }, 100), {
                my:"right top",
                at:"left center"
            };
        },
        onChangePull:function(t, e, i, n) {
            return "pull-center" === n ? t.next() :void 0;
        },
        teardown:function(t, e) {
            return e.image.unbind("change:pull", this.onChangePull), e.document.selectionModel.setLocked(!1);
        }
    }, {
        content:'<p>\n  Easel provides a variety of common elements from Twitter Bootstrap, like input fields.\n</p>\n<p class="action">\n  <strong>Drag</strong> a <em>Text Input</em> into the form (red outlined box in the center of the document).\n</p>',
        highlightTarget:!0,
        closeButton:!0,
        bind:[ "onChangeState", "onChangeSnapped" ],
        zIndex:2050,
        setup:function(t, e) {
            var i, n = this;
            return t.track(this), e.document.bind("change:state", this.onChangeState), i = t.scrollToBootstrapElement("bstextinput", e), 
            setTimeout(function() {
                return t.view.setTarget(i, n), t.view.show();
            }, 250), {};
        },
        onChangeState:function(t, e, i, n, o, r, s) {
            return "change:hierarchy" === i && o instanceof Draw.BootstrapTextInput ? "add" === s.operation ? (e.textinput = o, 
            o.bind("change:snapped", this.onChangeSnapped), t.view.hide()) :(o.unbind("change:snapped", this.onChangeSnapped), 
            t.view.show()) :void 0;
        },
        onChangeSnapped:function(t, e, i, n) {
            var o;
            return o = i.owner || i, n && o.parent instanceof Draw.BootstrapForm ? t.next() :void 0;
        },
        teardown:function(t, e) {
            return e.document.unbind("change:state", this.onChangeState), e.textinput ? e.textinput.unbind("change:snapped", this.onChangeSnapped) :void 0;
        }
    }, {
        content:'<p>\n  Now let\'s add a submit button.\n</p>\n<p class="action">\n  <strong>Drag</strong> a <em>Button</em> into the form.\n</p>',
        highlightTarget:!0,
        closeButton:!0,
        bind:[ "onChangeState", "onChangeSnapped" ],
        zIndex:2050,
        setup:function(t, e) {
            var i, n = this;
            return t.track(this), e.document.bind("change:state", this.onChangeState), i = t.scrollToBootstrapElement("bsbutton", e), 
            setTimeout(function() {
                return t.view.setTarget(i, n), t.view.show();
            }, 250), {};
        },
        onChangeState:function(t, e, i, n, o, r, s) {
            return "change:hierarchy" === i && o instanceof Draw.BootstrapButton ? "add" === s.operation ? (e.button = o, 
            o.bind("change:snapped", this.onChangeSnapped), t.view.hide()) :(o.unbind("change:snapped", this.onChangeSnapped), 
            t.view.show()) :void 0;
        },
        onChangeSnapped:function(t, e, i, n) {
            var o;
            return o = i.owner || i, n && o.parent instanceof Draw.BootstrapForm ? t.next() :void 0;
        },
        teardown:function(t, e) {
            return e.document.unbind("change:state", this.onChangeState), e.button ? e.button.unbind("change:snapped", this.onChangeSnapped) :void 0;
        }
    }, {
        content:"<p>We're all done! Let's export the entire page.</p>\n<p class=\"action\">Click <strong>Export this Document's HTML/CSS</strong>.</p>",
        highlightTarget:!0,
        closeButton:!0,
        bind:[ "onCodeExport" ],
        zIndex:2050,
        setup:function(t, e) {
            var i, n, o = this;
            return t.track(this), e.document.bind("prompt:codeexport", this.onCodeExport), i = e.menu.menu.items[0], 
            n = i.childPane.items[4].el, i.showChildren(), setTimeout(function() {
                return t.view.setTarget(n, o), t.view.show();
            }, 200), {
                my:"left top",
                at:"right center",
                viewport:$(window)
            };
        },
        onCodeExport:function(t, e, i, n) {
            if (n) return setTimeout(function() {
                return t.next();
            }, 100);
        },
        teardown:function(t, e) {
            return e.document.unbind("prompt:codeexport", this.onCodeExport);
        }
    }, {
        content:"<p>\n  To download all the code, just click on the 'Download as zip file' button.\n</p>",
        nextButton:!0,
        bind:[ "onCodeDialogHide" ],
        zIndex:2050,
        setup:function(t, e) {
            var i;
            return t.track(this), i = $(".code-export").parents(".modal").find(".modal-footer .download-as-zip"), 
            e.prompter.codeDialog.bind("hide", this.onCodeDialogHide), {
                my:"bottom center",
                at:"top center",
                target:i
            };
        },
        onCodeDialogHide:function(t) {
            return t.next();
        },
        teardown:function(t, e) {
            return e.prompter.codeDialog.unbind("hide", this.onCodeDialogHide), e.prompter.codeDialog.hide();
        }
    } ], i = function(t, e) {
        var i;
        return t.track(this, "Success"), Draw.Demo.saveAsCurrentDemo(e.document), i = "<p>\n  You’ve created your first page with Easel!\n</p>\n<p>\n  The only step left is to create your own free account.\n</p>", 
        e.document.signup(i);
    }, t = function(t, e) {
        var i;
        return t.track(this, "Cancel"), Draw.Demo.saveAsCurrentDemo(e.document), i = "<p>Sign up so you can start designing with Easel!</p>", 
        e.document.signup(i);
    }, Draw.Demo.Tour.LandingPage = function(n) {
        function r(n) {
            var o;
            null == n && (n = {}), o = {
                stepOptions:n,
                steps:e,
                cancelStep:t,
                successStep:i,
                tipOptions:{
                    showEffect:"slidein"
                }
            }, r.__super__.constructor.call(this, o);
        }
        var s;
        return o(r, n), s = 1, r.prototype.track = function(t, e) {
            var i;
            if (window.mixpanel) return i = e, i || (i = t.index + 1), mixpanel.track("Tour:Demo:" + i, {
                version:s,
                location:this._getLocation()
            });
        }, r.prototype._getLocation = function() {
            var t;
            return t = this.options.stepOptions.document, "demo" === this.options.stepOptions.document.id ? "demo" :"document";
        }, r;
    }(Draw.Demo.Tour);
}.call(this), function() {
    var t, e, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.Demo.SettingTypeTour = {
        documentVersion:1,
        documentJSON:{
            sz:{
                w:980,
                h:1e3
            },
            background_color:{
                R:255,
                G:254,
                B:243,
                A:1
            },
            background_image:null,
            background_repeat:"repeat",
            background_position:"top center",
            "toggle:background_image":!1,
            "toggle:background_cover":!1,
            use_padding_top:!0,
            version:"1.0",
            symbols:[],
            document:[ {
                children:[ {
                    t:"bscontainer",
                    override:[],
                    html:'<div class="bsc" id="dom-elem-11">                                 <div class="child-place child-place-0"></div></div>',
                    css:"",
                    pos:{
                        x:20,
                        y:0
                    },
                    sz:{
                        w:940,
                        h:60
                    },
                    snapped:!0,
                    auto_height:!0,
                    auto_width:!0,
                    layout_type:"container",
                    id:"",
                    classes:"",
                    children:[ {
                        t:"div",
                        override:[],
                        html:'<div class="dom-div" id="dom-elem-12">                                                  <div class="child-place child-place-0"></div> <div class="child-place child-place-1"></div>             </div>',
                        css:"",
                        pos:{
                            x:20,
                            y:0
                        },
                        sz:{
                            w:940,
                            h:292
                        },
                        snapped:!0,
                        auto_height:!0,
                        auto_width:!0,
                        pull:"",
                        id:"",
                        classes:"",
                        children:[ {
                            t:"dhead",
                            override:[ "margin_top", "margin_right", "margin_bottom", "margin_left", "line_height", "font_face", "font_weight", "font_size", "text_color", "border_bottom_width", "border_bottom_color", "border_bottom_style" ],
                            html:'<h1 class="dom-heading editable-element" id="dom-elem-14">Setting Type</h1>',
                            css:"",
                            pos:{
                                x:40,
                                y:-25
                            },
                            sz:{
                                w:940,
                                h:29
                            },
                            is_locked:!1,
                            snapped:!0,
                            auto_height:!0,
                            auto_width:!0,
                            text_color:{
                                R:68,
                                G:68,
                                B:68,
                                A:1
                            },
                            font:"raleway",
                            fw:"normal",
                            font_size:"22px",
                            h:"1.2",
                            margin_top:"0px",
                            margin_right:"0px",
                            margin_bottom:"0px",
                            margin_left:"0px",
                            tag_type:"h1",
                            border_bottom_color:{
                                R:136,
                                G:111,
                                B:55,
                                A:.07
                            },
                            border_bottom_style:"solid",
                            border_bottom_width:3,
                            id:"",
                            classes:"",
                            children:[]
                        }, {
                            t:"bsparagraph",
                            override:[ "line_height", "font_face", "margin_top", "margin_right", "margin_bottom", "margin_left", "text_color" ],
                            html:'<div class="paragraph editable-element" id="dom-elem-15"><p>Call me Ishmael. Some years ago—never mind how long precisely—having little or no money in my purse, and nothing particular to interest me on shore, I thought I would sail about a little and see the watery part of the world. It is a way I have of driving off the spleen and regulating the circulation. Whenever I find myself growing grim about the mouth; whenever it is a damp, drizzly November in my soul; whenever I find myself involuntarily pausing before coffin warehouses, and bringing up the rear of every funeral I meet; and especially whenever my hypos get such an upper hand of me, that it requires a strong moral principle to prevent me from deliberately stepping into the street, and methodically knocking people\'s hats off—then, I account it high time to get to sea as soon as I can. This is my substitute for pistol and ball. With a philosophical flourish Cato throws himself upon his sword; I quietly take to the ship. There is nothing surprising in this. If they but knew it, almost all men in their degree, some time or other, cherish very nearly the same feelings towards the ocean with me.</p><p><br>There now is your insular city of the Manhattoes, belted round by wharves as Indian isles by coral reefs—commerce surrounds it with her surf. Right and left, the streets take you waterward. Its extreme downtown is the battery, where that noble mole is washed by waves, and cooled by breezes, which a few hours previous were out of sight of land. Look at the crowds of water-gazers there.</p></div>',
                            css:"",
                            pos:{
                                x:20,
                                y:40
                            },
                            sz:{
                                w:940,
                                h:178
                            },
                            snapped:!0,
                            auto_height:!0,
                            auto_width:!0,
                            margin_top:"0px",
                            margin_right:"0px",
                            margin_bottom:"0px",
                            margin_left:"0px",
                            pull:"",
                            font:"museo-sans",
                            text_color:{
                                R:68,
                                G:68,
                                B:68,
                                A:1
                            },
                            h:"1",
                            id:"",
                            classes:"",
                            children:[]
                        } ]
                    } ]
                } ],
                t:"layer"
            } ],
            grid:{
                grid:20,
                off:{
                    x:0,
                    y:0
                },
                enabled:!1,
                v:!1,
                c:{
                    R:237,
                    G:0,
                    B:7,
                    A:.15
                }
            },
            gs:{
                enabled:!1,
                v:!1,
                c:{
                    R:0,
                    G:255,
                    B:255,
                    A:.8
                },
                column_color:{
                    R:255,
                    G:0,
                    B:9,
                    A:.1
                },
                gutter_width:20,
                effective_size:null,
                document_size:980,
                columns:12
            },
            guides:{
                x_guides:[],
                y_guides:[],
                enabled:!1,
                v:!1,
                c:{
                    R:0,
                    G:255,
                    B:255,
                    A:1
                }
            }
        },
        documentThumbnail:Asset.SETTING_TYPE_TOUR_THUMBNAIL,
        documentLoad:function(t, e) {
            return Draw.Demo.loadDocument(t, "SettingTypeTour", {
                clearCurrentDemo:e
            });
        },
        documentRun:function(t, e) {
            var i, n;
            return null == e && (e = {}), n = '<div class="modal">\n  <div class="modal-header">\n    <h3>Setting Type</h3>\n  </div>\n\n  <div class="modal-body">\n\n    <p>Typography is the foundation of design on the web. Stripped to its\n    core, the web is really just text on a page, so it’s important to get\n    it right.</p>\n\n    <p>Easier said than done if you don\'t know where to start; that\'s\n    why we\'ve created this tutorial. By following a few simple guidelines,\n    you can make better typographic choices and improve the readability\n    and visual appeal of your work.</p>\n\n    <p>In this tutorial, we’ll start with a block of text and show you what’s\n    important and how to go about choosing appropriate values. If you want\n    to read ahead, go ahead and open these articles:</p>\n\n    <ul>\n      <li>\n        <a target="_blank" href="http://jessicahische.is/talkingtype">\n          Talking Type\n        </a> - a discusson on choosing a typeface\n      </li>\n      <li>\n        <a target="_blank" href="http://alistapart.com/article/more-meaningful-typography">\n          More Meaningful Typography\n        </a> - an article on setting type\n      </li>\n      <li>\n        <a target="_blank" href="http://modularscale.com/scale/?px1=16&px2=80&ra1=1.62&ra2=0">\n          Our modular scale\n        </a> - the modular scale we’ll be using\n      </li>\n    </ul>\n\n  </div>\n\n  <div class="modal-footer">\n    <a href="#" class="cta btn btn-info btn-large pull-left" title="Yeah!">Let\'s go!</a>\n  </div>\n</div>', 
            i = function() {
                var e;
                return window.tour = new Draw.Demo.Tour.SettingType({
                    document:t,
                    viewport:APP.view,
                    menu:APP.menu,
                    dialogManager:APP.dialogManager,
                    prompter:APP.prompter
                }), e = function() {
                    return tour.start();
                }, setTimeout(e, 300);
            }, Draw.Demo.runDemo(t, "SettingTypeTour", n, i, {
                showSymbols:!1
            });
        },
        tweet:{
            text:"Typography is the foundation of web design, improve your typesetting with Easel's tutorial",
            url:"http://easel.io/tutorials/setting_type"
        }
    }, e = [ {
        content:"<p>Look at this mass of text! It's not very readable\nand more generally, looks like a hot mess. <strong>Let's fix it!</strong></p>",
        nextButton:!0,
        setup:function(t, e) {
            var i, n, o, r;
            return t.track(this), n = e.document.getProject().filterItems(function(t) {
                return t instanceof Draw.DivContainer;
            }), e.container = n[0], i = e.document.getProject().filterItems(function(t) {
                return t instanceof Draw.DomHeading;
            }), e.heading = i[0], r = e.document.getProject().filterItems(function(t) {
                return t instanceof Draw.BootstrapParagraph;
            }), e.body = r[0], o = t.getPointForCanvasElement(e.container, e), {
                my:"top center",
                at:"bottom center",
                target:[ o.x, o.y ],
                container:e.viewport.el
            };
        }
    }, {
        content:'<p>We\'ve already chosen two typefaces to keep things simple.</p>\n<p>If you\'re interested in learning more, check out\n<a href="http://jessicahische.is/talkingtype" target="_blank">Talking Type</a>,\nan excellent article on the topic.\n</p>',
        nextButton:!0,
        setup:function(t, e) {
            var i;
            return t.track(this), i = t.getPointForCanvasElement(e.container, e), {
                my:"top center",
                at:"bottom center",
                target:[ i.x, i.y ],
                container:e.viewport.el
            };
        }
    }, {
        content:'<p>\n  We’re going to use a <strong>modular scale</strong> to choose different\n  measurements of the design (font size, line height, etc.).\n</p>\n<p>\n  Take a second to read about modular scales in\n  <a target="_blank" href="http://alistapart.com/article/more-meaningful-typography">\n    Tim Brown’s article</a>.\n</p>',
        nextButton:!0,
        setup:function(t, e) {
            var i;
            return t.track(this), i = t.getPointForCanvasElement(e.container, e), {
                my:"top center",
                at:"bottom center",
                target:[ i.x, i.y ],
                container:e.viewport.el
            };
        }
    }, {
        content:"<p>\n  Using Tim's calculator, we'll anchor on <strong>16px</strong>\n  because our body font, Museo Sans, looks good at 16px. We'll use\n  the golden ratio, <strong>1.62</strong>, for our scale because\n  it's very common. Take a look at our\n  <a target=\"_blank\" href=\"http://modularscale.com/scale/?px1=16&px2=80&ra1=1.62&ra2=0\">\n    modular scale</a>.\n</p>\n<p>\n  Based on this, we'll choose <strong>16px</strong> for the body text\n  and <strong>80px</strong> for our heading.\n</p>",
        nextButton:!0,
        setup:function(t, e) {
            var i;
            return t.track(this), i = t.getPointForCanvasElement(e.container, e), {
                my:"top center",
                at:"bottom center",
                target:[ i.x, i.y ],
                container:e.viewport.el
            };
        }
    }, {
        content:'<p>The heading has been selected.</p>\n<p class="action">Change the font size to <strong>80px</strong>.</p>',
        my:"right center",
        at:"left center",
        highlightTarget:!0,
        bind:[ "onChangeFontSize" ],
        zIndex:2e3,
        setup:function(t, e) {
            return t.track(this), e.document.selectionModel.setSelected(e.heading), e.document.selectionModel.setLocked(!0, !0), 
            e.heading.bind("change:font_size", this.onChangeFontSize), t.targetInspector(".property-font_size", this, e), 
            {};
        },
        teardown:function(t, e) {
            return e.heading.unbind("change:font_size", this.onChangeFontSize), e.document.selectionModel.setLocked(!1);
        },
        onChangeFontSize:function(t, e, i, n) {
            return "80px" === n ? t.next() :void 0;
        }
    }, {
        content:'<p>Now, the body text has been selected.</p>\n<p class="action">Change the font size to <strong>16px</strong>.</p>',
        my:"right center",
        at:"left center",
        highlightTarget:!0,
        bind:[ "onChangeFontSize" ],
        zIndex:2e3,
        setup:function(t, e) {
            return t.track(this), e.document.selectionModel.setSelected(e.body), e.document.selectionModel.setLocked(!0, !0), 
            e.body.bind("change:font_size", this.onChangeFontSize), t.targetInspector(".property-font_size", this, e), 
            {};
        },
        teardown:function(t, e) {
            return e.body.unbind("change:font_size", this.onChangeFontSize);
        },
        onChangeFontSize:function(t, e, i, n) {
            return "16px" === n ? t.next() :void 0;
        }
    }, {
        content:"<p>Let's fix the body text line height. We'll use the\nratio we've chosen for the modular scale: <strong>1.62</strong>.</p>\n\n<p class=\"action\">Change the line height to <strong>1.62</strong>.</p>",
        my:"right center",
        at:"left center",
        highlightTarget:!0,
        bind:[ "onChangeLineHeight" ],
        zIndex:2e3,
        setup:function(t, e) {
            var i, n = this;
            return t.track(this), e.body.bind("change:line_height", this.onChangeLineHeight), 
            i = function() {
                var i, o;
                return i = e.dialogManager.dialogs.properties.pane.el, o = i.find(".property-line_height"), 
                i.scrollTo(o, {
                    offsetTop:100,
                    duration:0
                }), t.view.setTarget(o, n), t.view.show(), o.find("input").focus();
            }, setTimeout(i, 100), {};
        },
        teardown:function(t, e) {
            return e.body.unbind("change:font_size", this.onChangeLineHeight), e.document.selectionModel.setLocked(!1);
        },
        onChangeLineHeight:function(t, e, i, n) {
            return "1.62" === n ? t.next() :void 0;
        }
    }, {
        content:'<p>\n  It\'s starting to look good! Next we notice that there are\n  too many words per line. We\'re going to set the width of the text. This width is called the\n  <a target="_blank" href="http://en.wikipedia.org/wiki/Measure_(typography)">\n    measure</a>.\n</p>\n\n<p>\n  Measure is important for rhythm and so the reader doesn\'t get lost.\n  A rule of thumb is to only have 45 - 75 characters per line.\n</p>\n\n<p>\n  Based on our\n  <a target="_blank" href="http://modularscale.com/scale/?px1=16&px2=80&ra1=1.62&ra2=0">\n    modular scale</a>,\n  we\'ll choose <strong>550px</strong> for the width of our text.\n  This will give us about 60-70 characters per line.\n</p>',
        nextButton:!0,
        setup:function(t, e) {
            var i;
            return t.track(this), e.document.selectionModel.setSelected(e.container), e.document.selectionModel.setLocked(!0, !0), 
            i = t.getPointForCanvasElement(e.container, e), {
                my:"top center",
                at:"bottom center",
                target:[ i.x, i.y - 200 ],
                container:e.viewport.el
            };
        }
    }, {
        content:'<p>We\'re changing the width of the text block.</p>\n\n<p class="action">Change the width <strong>550</strong>.</p>',
        my:"right center",
        at:"left center",
        highlightTarget:!0,
        bind:[ "onChangeSize" ],
        zIndex:2e3,
        setup:function(t, e) {
            return t.track(this), e.container.set("auto_width", !1), e.container.bind("change:size", this.onChangeSize), 
            t.targetInspector(".property-size .width", this, e), {};
        },
        teardown:function(t, e) {
            return e.container.unbind("change:size", this.onChangeSize);
        },
        onChangeSize:function(t, e, i, n) {
            return 550 === n.width ? t.next() :void 0;
        }
    }, {
        content:"<p>Let's make a couple of aesthetic changes. First we'll center the text.</p>\n\n<p class=\"action\">Change this pull dropdown to <strong>Center</strong>.</p>",
        my:"right center",
        at:"left center",
        highlightTarget:!0,
        bind:[ "onChange" ],
        zIndex:2e3,
        setup:function(t, e) {
            return t.track(this), e.container.bind("change:pull", this.onChange), t.targetInspector(".property-pull .dropdown-box", this, e), 
            {};
        },
        teardown:function(t, e) {
            return e.container.unbind("change:pull", this.onChange), e.document.selectionModel.setLocked(!1);
        },
        onChange:function(t, e, i, n) {
            return "pull-center" === n ? t.next() :void 0;
        }
    }, {
        content:'<p>Next we\'ll center the heading.</p>\n\n<p class="action">Click the center alignment button <strong>Center</strong>.</p>',
        my:"right center",
        at:"left center",
        highlightTarget:!0,
        bind:[ "onChange" ],
        zIndex:2e3,
        setup:function(t, e) {
            return t.track(this), e.document.selectionModel.setSelected(e.heading), e.document.selectionModel.setLocked(!0, !0), 
            e.heading.bind("change:alignment", this.onChange), t.targetInspector(".property-alignment .center", this, e), 
            {};
        },
        teardown:function(t, e) {
            return e.heading.unbind("change:alignment", this.onChange);
        },
        onChange:function(t, e, i, n) {
            return "center" === n ? t.next() :void 0;
        }
    }, {
        content:"<p>The heading looks a bit suffocated. We'll adjust\nthe padding and margins on the heading. Again, we'll use the\nmodular scale values.</p>\n\n<p class=\"action\">Change the heading's top padding to <strong>80</strong>.</p>",
        my:"right center",
        at:"left center",
        highlightTarget:!0,
        bind:[ "onChange" ],
        zIndex:2e3,
        setup:function(t, e) {
            return t.track(this), e.heading.bind("change:padding_top", this.onChange), t.targetInspector(".property-padding_top .textbox", this, e), 
            {};
        },
        teardown:function(t, e) {
            return e.heading.unbind("change:padding_top", this.onChange);
        },
        onChange:function(t, e, i, n) {
            return "80px" === n ? t.next() :void 0;
        }
    }, {
        content:"<p>We'll give it a little room between the heading and the border.</p>\n<p class=\"action\">Change the heading's bottom padding to <strong>30</strong>.</p>",
        my:"right center",
        at:"left center",
        highlightTarget:!0,
        bind:[ "onChange" ],
        zIndex:2e3,
        setup:function(t, e) {
            return t.track(this), e.heading.bind("change:padding_bottom", this.onChange), t.targetInspector(".property-padding_bottom .textbox", this, e), 
            {};
        },
        teardown:function(t, e) {
            return e.heading.unbind("change:padding_bottom", this.onChange);
        },
        onChange:function(t, e, i, n) {
            return "30px" === n ? t.next() :void 0;
        }
    }, {
        content:"<p>And now we'll try to match the space between the border and the body text.</p>\n<p class=\"action\">Change the heading's bottom margin to <strong>42</strong>.</p>",
        my:"right center",
        at:"left center",
        highlightTarget:!0,
        bind:[ "onChange" ],
        zIndex:2e3,
        setup:function(t, e) {
            return t.track(this), e.heading.bind("change:margin_bottom", this.onChange), t.targetInspector(".property-margin_bottom .textbox", this, e), 
            {};
        },
        teardown:function(t, e) {
            return e.heading.unbind("change:margin_bottom", this.onChange), e.document.selectionModel.setLocked(!1);
        },
        onChange:function(t, e, i, n) {
            return "42px" === n ? t.next() :void 0;
        }
    }, {
        content:'<p>We\'re all done! It’s a vast improvement over where we started and we\ngot there by just following a few simple steps! To recap:</p>\n\n<ul>\n  <li>\n    We chose complementary fonts according to\n    <a target="_blank" href="http://jessicahische.is/talkingtype">\n      Talking Type\n    </a>\n  </li>\n  <li>\n    We learned about modular scales from\n    <a target="_blank" href="http://alistapart.com/article/more-meaningful-typography">\n      More Meaningful Typography\n    </a>\n  </li>\n  <li>\n    We setup a\n    <a target="_blank" href="http://modularscale.com/scale/?px1=16&px2=80&ra1=1.62&ra2=0">\n      modular scale\n    </a>\n    anchored on 16px body text size with a golden ratio (1.62) scale\n  </li>\n  <li>\n    We chose sizes and padding based on values from the modular scale\n  </li>\n</ul>',
        nextButton:!0,
        setup:function(t, e) {
            var i, n;
            return t.track(this), e.document.selectionModel.setSelected(null), e.viewport.moveObjectsIntoView(e.container, {
                checkIfInView:!0,
                animate:!0
            }), i = e.container.getBounds(), n = e.viewport.transformToContentPoint(i.topLeft), 
            {
                my:"right top",
                at:"left top",
                target:[ n.x, n.y + 100 ],
                container:e.viewport.el
            };
        }
    } ], t = function(t, e) {
        var i;
        return t.track(this, "Success"), Draw.Demo.saveAsCurrentDemo(e.document), i = "<p>\n  Easel is a web design tool for individuals and small teams. Easel helps\n  you design your next web project faster and more accurately than\n  conventional design tools.\n</p>\n<p>\n  Signup and we'll save this display of your typography skills to your account!\n</p>", 
        e.document.signup(i);
    }, Draw.Demo.Tour.SettingType = function(i) {
        function o(i) {
            var n;
            null == i && (i = {}), n = {
                stepOptions:i,
                steps:e,
                successStep:t,
                tipOptions:{
                    showEffect:"slidein"
                }
            }, o.__super__.constructor.call(this, n);
        }
        var r;
        return n(o, i), r = 1, o.prototype.track = function(t, e) {
            var i;
            if (window.mixpanel) return i = e, i || (i = t.index + 1), mixpanel.track("Tutorial:SettingTypeTour:" + i, {
                version:r,
                location:"setting_type"
            });
        }, o;
    }(Draw.Demo.Tour);
}.call(this), function() {
    var t, e, i, n, o, r, s, a, l, c, h, u, d, p, f = {}.hasOwnProperty, g = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var n in e) f.call(e, n) && (t[n] = e[n]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.Demo.ShadowsTour = {
        documentVersion:1,
        documentJSON:{
            sz:{
                w:980,
                h:2350
            },
            background_color:{
                R:44,
                G:61,
                B:69,
                A:1
            },
            background_image:null,
            background_repeat:"repeat",
            background_position:"top center",
            "toggle:background_image":!1,
            "toggle:background_cover":!1,
            use_padding_top:!0,
            version:"1.0",
            symbols:[],
            document:[ {
                children:[ {
                    t:"dhead",
                    override:[ "alignment", "line_height", "text_color", "font_weight", "font_face" ],
                    html:'<h1 class="dom-heading editable-element" id="dom-elem-32">Let\'s explore text shadows</h1>',
                    css:"",
                    pos:{
                        x:1,
                        y:246
                    },
                    sz:{
                        w:979,
                        h:35
                    },
                    is_locked:!1,
                    auto_height:!0,
                    auto_width:!0,
                    text_color:{
                        R:255,
                        G:255,
                        B:255,
                        A:1
                    },
                    font:"museo-sans",
                    fw:"normal",
                    a:"center",
                    h:"1",
                    tag_type:"h1",
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"drect",
                    override:[],
                    html:'<div class="dom-rect"></div>',
                    css:"",
                    pos:{
                        x:0,
                        y:613
                    },
                    sz:{
                        w:490,
                        h:331
                    },
                    is_locked:!1,
                    fill:{
                        R:230,
                        G:110,
                        B:81,
                        A:1
                    },
                    background_repeat:"repeat",
                    background_position:"0% 0%",
                    background_size:"auto",
                    box_shadow:"none",
                    border_top_left_radius:"0px",
                    border_top_right_radius:"0px",
                    border_bottom_left_radius:"0px",
                    border_bottom_right_radius:"0px",
                    margin_top:"0px",
                    margin_bottom:"0px",
                    margin_right:"0px",
                    margin_left:"0px",
                    border_top_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_top_style:"none",
                    border_top_width:0,
                    border_right_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_right_style:"none",
                    border_right_width:0,
                    border_bottom_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_bottom_style:"none",
                    border_bottom_width:0,
                    border_left_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_left_style:"none",
                    border_left_width:0,
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"dhead",
                    override:[ "font_size", "alignment", "line_height", "text_shadow", "font_face", "font_weight", "text_color" ],
                    html:'<h1 class="dom-heading editable-element" id="dom-elem-12">Letterpress</h1>',
                    css:"",
                    pos:{
                        x:0,
                        y:725
                    },
                    sz:{
                        w:490,
                        h:78
                    },
                    is_locked:!1,
                    auto_height:!0,
                    auto_width:!0,
                    text_color:{
                        R:206,
                        G:90,
                        B:61,
                        A:1
                    },
                    font:"lobster",
                    fw:"normal",
                    font_size:"78px",
                    a:"center",
                    h:"1",
                    text_shadow:"0px 1px 0px rgba(255, 255, 255, 0.14902), 0px -1px 0px rgba(0, 0, 0, 0.329412)",
                    tag_type:"h1",
                    id:"letterpress-example",
                    classes:"",
                    children:[]
                }, {
                    t:"dhead",
                    override:[ "text_color", "font_face", "font_size", "alignment", "line_height", "text_shadow" ],
                    html:'<h1 class="dom-heading editable-element" id="dom-elem-49">WELCOME!</h1>',
                    css:"",
                    pos:{
                        x:0,
                        y:115
                    },
                    sz:{
                        w:980,
                        h:109
                    },
                    is_locked:!1,
                    auto_height:!0,
                    auto_width:!0,
                    text_color:{
                        R:255,
                        G:255,
                        B:255,
                        A:1
                    },
                    font:"brandon-grotesque",
                    font_size:"110px",
                    a:"center",
                    h:"1",
                    text_shadow:"2px 2px 0px #444444, 4px 4px 0px #e66e51",
                    tag_type:"h1",
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"drect",
                    override:[],
                    html:'<div class="dom-rect"></div>',
                    css:"",
                    pos:{
                        x:490,
                        y:613
                    },
                    sz:{
                        w:490,
                        h:331
                    },
                    is_locked:!1,
                    fill:{
                        R:240,
                        G:123,
                        B:94,
                        A:1
                    },
                    background_repeat:"repeat",
                    background_position:"0% 0%",
                    background_size:"auto",
                    box_shadow:"none",
                    border_top_left_radius:"0px",
                    border_top_right_radius:"0px",
                    border_bottom_left_radius:"0px",
                    border_bottom_right_radius:"0px",
                    margin_top:"0px",
                    margin_bottom:"0px",
                    margin_right:"0px",
                    margin_left:"0px",
                    border_top_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_top_style:"none",
                    border_top_width:0,
                    border_right_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_right_style:"none",
                    border_right_width:0,
                    border_bottom_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_bottom_style:"none",
                    border_bottom_width:0,
                    border_left_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_left_style:"none",
                    border_left_width:0,
                    id:"letterpress-background",
                    classes:"",
                    children:[]
                }, {
                    t:"dhead",
                    override:[ "font_size", "alignment", "line_height", "font_face", "font_weight", "text_color" ],
                    html:'<h1 class="dom-heading editable-element" id="dom-elem-12">Letterpress</h1>',
                    css:"",
                    pos:{
                        x:490,
                        y:725
                    },
                    sz:{
                        w:490,
                        h:78
                    },
                    is_locked:!1,
                    auto_height:!0,
                    auto_width:!0,
                    text_color:{
                        R:206,
                        G:90,
                        B:61,
                        A:1
                    },
                    font:"lobster",
                    fw:"normal",
                    font_size:"78px",
                    a:"center",
                    h:"1",
                    tag_type:"h1",
                    id:"letterpress-demo",
                    classes:"",
                    children:[]
                }, {
                    t:"drect",
                    override:[],
                    html:'<div class="dom-rect"></div>',
                    css:"",
                    pos:{
                        x:0,
                        y:401
                    },
                    sz:{
                        w:980,
                        h:212
                    },
                    is_locked:!1,
                    fill:{
                        R:219,
                        G:101,
                        B:72,
                        A:1
                    },
                    background_repeat:"repeat",
                    background_position:"0% 0%",
                    background_size:"auto",
                    box_shadow:"none",
                    border_top_left_radius:"0px",
                    border_top_right_radius:"0px",
                    border_bottom_left_radius:"0px",
                    border_bottom_right_radius:"0px",
                    margin_top:"0px",
                    margin_bottom:"0px",
                    margin_right:"0px",
                    margin_left:"0px",
                    border_top_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_top_style:"none",
                    border_top_width:0,
                    border_right_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_right_style:"none",
                    border_right_width:0,
                    border_bottom_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_bottom_style:"none",
                    border_bottom_width:0,
                    border_left_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_left_style:"none",
                    border_left_width:0,
                    id:"letterpress-section",
                    classes:"",
                    children:[]
                }, {
                    t:"bsparagraph",
                    override:[ "font_face", "font_size", "alignment", "text_color", "line_height" ],
                    html:'<div class="paragraph editable-element" id="dom-elem-18"><p style="text-align: center ; color: rgb( 255 , 255 , 255 ) ; font-size: 16px ; line-height: 1.5">Shadows are often used to simulate depth. One example is the letterpress effect.&nbsp;The letterpress effect is achieved by <strong>adding a sharp dark shadow&nbsp;above of the text, and a sharp light shadow below the text</strong>. In CSS, these shadows are actually outer shadows, but because of the sharpness, they look like inner shadows.</p></div>',
                    css:"",
                    pos:{
                        x:85,
                        y:471
                    },
                    sz:{
                        w:810,
                        h:74
                    },
                    auto_height:!0,
                    auto_width:!0,
                    pull:"",
                    font:"museo-sans",
                    font_size:"16px",
                    a:"center",
                    text_color:{
                        R:255,
                        G:255,
                        B:255,
                        A:1
                    },
                    h:"1.5",
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"bsheading",
                    override:[ "font_face", "font_weight", "font_size", "alignment", "text_color" ],
                    html:'<h1 class="heading" id="dom-elem-135">\n  <span class="editable-element">SHADOWS ARE USED TO: <strong>SIMULATE DEPTH</strong></span>\n</h1>',
                    css:"",
                    pos:{
                        x:226.5,
                        y:401
                    },
                    sz:{
                        w:526.5,
                        h:42
                    },
                    auto_height:!0,
                    auto_width:!0,
                    tag_type:"h1",
                    pull:"",
                    font:"brandon-grotesque",
                    fw:"normal",
                    font_size:"16px",
                    a:"center",
                    text_color:{
                        R:153,
                        G:68,
                        B:46,
                        A:1
                    },
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"bsheading",
                    override:[ "font_face", "font_size", "alignment", "text_color" ],
                    html:'<h1 class="heading" id="dom-elem-136">\n  <span class="editable-element">EXAMPLE</span>\n</h1>',
                    css:"",
                    pos:{
                        x:2,
                        y:612
                    },
                    sz:{
                        w:488,
                        h:42
                    },
                    auto_height:!0,
                    auto_width:!0,
                    tag_type:"h1",
                    pull:"",
                    font:"brandon-grotesque",
                    font_size:"16px",
                    a:"center",
                    text_color:{
                        R:192,
                        G:89,
                        B:63,
                        A:1
                    },
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"bsheading",
                    override:[ "font_face", "font_size", "alignment", "text_color" ],
                    html:'<h1 class="heading" id="dom-elem-137">\n  <span class="editable-element">GIVE IT A SHOT!</span>\n</h1>',
                    css:"",
                    pos:{
                        x:490,
                        y:612
                    },
                    sz:{
                        w:488,
                        h:42
                    },
                    auto_height:!0,
                    auto_width:!0,
                    tag_type:"h1",
                    pull:"",
                    font:"brandon-grotesque",
                    font_size:"16px",
                    a:"center",
                    text_color:{
                        R:192,
                        G:89,
                        B:63,
                        A:1
                    },
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"drect",
                    override:[],
                    html:'<div class="dom-rect"></div>',
                    css:"",
                    pos:{
                        x:0,
                        y:942
                    },
                    sz:{
                        w:980,
                        h:330
                    },
                    is_locked:!1,
                    fill:{
                        R:39,
                        G:49,
                        B:54,
                        A:1
                    },
                    background_repeat:"repeat",
                    background_position:"0% 0%",
                    background_size:"auto",
                    box_shadow:"none",
                    border_top_left_radius:"0px",
                    border_top_right_radius:"0px",
                    border_bottom_left_radius:"0px",
                    border_bottom_right_radius:"0px",
                    margin_top:"0px",
                    margin_bottom:"0px",
                    margin_right:"0px",
                    margin_left:"0px",
                    border_top_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_top_style:"none",
                    border_top_width:0,
                    border_right_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_right_style:"none",
                    border_right_width:0,
                    border_bottom_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_bottom_style:"none",
                    border_bottom_width:0,
                    border_left_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_left_style:"none",
                    border_left_width:0,
                    id:"attention-section",
                    classes:"",
                    children:[]
                }, {
                    t:"bsheading",
                    override:[ "font_face", "font_size", "alignment", "text_color" ],
                    html:'<h1 class="heading" id="dom-elem-148">\n  <span class="editable-element">SHADOWS ARE ALSO USED TO</span>\n</h1>',
                    css:"",
                    pos:{
                        x:226.5,
                        y:942
                    },
                    sz:{
                        w:527,
                        h:42
                    },
                    auto_height:!0,
                    auto_width:!0,
                    tag_type:"h1",
                    pull:"",
                    font:"brandon-grotesque",
                    font_size:"16px",
                    a:"center",
                    text_color:{
                        R:86,
                        G:99,
                        B:105,
                        A:1
                    },
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"dhead",
                    override:[ "text_color", "font_face", "alignment", "line_height", "text_shadow", "font_size" ],
                    html:'<h1 class="dom-heading editable-element" id="dom-elem-152">DRAW ATTENTION</h1>',
                    css:"",
                    pos:{
                        x:0,
                        y:1066
                    },
                    sz:{
                        w:980,
                        h:79
                    },
                    is_locked:!1,
                    auto_height:!0,
                    auto_width:!0,
                    text_color:{
                        R:255,
                        G:255,
                        B:255,
                        A:1
                    },
                    font:"brandon-grotesque",
                    font_size:"80px",
                    a:"center",
                    h:"1",
                    text_shadow:"2px 2px 0px #444444, 4px 4px 0px #e66e51",
                    tag_type:"h1",
                    id:"attention-example",
                    classes:"",
                    children:[]
                }, {
                    t:"dhead",
                    override:[ "text_color", "font_face", "font_size", "alignment", "line_height" ],
                    html:'<h1 class="dom-heading editable-element" id="dom-elem-153">DRAW ATTENTION</h1>',
                    css:"",
                    pos:{
                        x:0,
                        y:1393
                    },
                    sz:{
                        w:980,
                        h:76
                    },
                    is_locked:!1,
                    auto_height:!0,
                    auto_width:!0,
                    text_color:{
                        R:255,
                        G:255,
                        B:255,
                        A:1
                    },
                    font:"brandon-grotesque",
                    font_size:"80px",
                    a:"center",
                    h:"1",
                    tag_type:"h1",
                    id:"attention-demo",
                    classes:"",
                    children:[]
                }, {
                    t:"bsheading",
                    override:[ "font_face", "font_size", "alignment", "text_color" ],
                    html:'<h1 class="heading" id="dom-elem-154">\n  <span class="editable-element">GIVE IT A SHOT!</span>\n</h1>',
                    css:"",
                    pos:{
                        x:226.5,
                        y:1272
                    },
                    sz:{
                        w:527,
                        h:42
                    },
                    auto_height:!0,
                    auto_width:!0,
                    tag_type:"h1",
                    pull:"",
                    font:"brandon-grotesque",
                    font_size:"16px",
                    a:"center",
                    text_color:{
                        R:86,
                        G:99,
                        B:105,
                        A:1
                    },
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"drect",
                    override:[],
                    html:'<div class="dom-rect"></div>',
                    css:"",
                    pos:{
                        x:0,
                        y:1605
                    },
                    sz:{
                        w:980,
                        h:536
                    },
                    is_locked:!1,
                    fill:{
                        R:81,
                        G:230,
                        B:180,
                        A:1
                    },
                    background_repeat:"repeat",
                    background_position:"0% 0%",
                    background_size:"auto",
                    box_shadow:"none",
                    border_top_left_radius:"0px",
                    border_top_right_radius:"0px",
                    border_bottom_left_radius:"0px",
                    border_bottom_right_radius:"0px",
                    margin_top:"0px",
                    margin_bottom:"0px",
                    margin_right:"0px",
                    margin_left:"0px",
                    border_top_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_top_style:"none",
                    border_top_width:0,
                    border_right_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_right_style:"none",
                    border_right_width:0,
                    border_bottom_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_bottom_style:"none",
                    border_bottom_width:0,
                    border_left_color:{
                        R:51,
                        G:51,
                        B:51,
                        A:1
                    },
                    border_left_style:"none",
                    border_left_width:0,
                    id:"readability-section",
                    classes:"",
                    children:[]
                }, {
                    t:"bsheading",
                    override:[ "font_face", "font_weight", "font_size", "alignment", "text_color" ],
                    html:'<h1 class="heading" id="dom-elem-168">\n  <span class="editable-element">SHADOWS ARE OFTEN USED FOR: <strong>READABILITY</strong></span>\n</h1>',
                    css:"",
                    pos:{
                        x:226.5,
                        y:1605
                    },
                    sz:{
                        w:527,
                        h:42
                    },
                    auto_height:!0,
                    auto_width:!0,
                    tag_type:"h1",
                    pull:"",
                    font:"brandon-grotesque",
                    fw:"normal",
                    font_size:"16px",
                    a:"center",
                    text_color:{
                        R:34,
                        G:142,
                        B:106,
                        A:1
                    },
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"bsparagraph",
                    override:[ "margin_top", "margin_right", "margin_bottom", "margin_left", "font_face", "font_size", "alignment", "text_color", "line_height" ],
                    html:'<div class="paragraph editable-element" id="dom-elem-29"><p style="text-align: center ; line-height: 1.5 ; font-size: 18px ; color: rgb( 255 , 255 , 255 )">Sometimes it\'s hard to read text on a similarly colored background. Note this white text on green background. A very subtle drop&nbsp;shadow solves this and looks good doing it. Win Win.</p></div>',
                    css:"",
                    pos:{
                        x:94.5,
                        y:1683
                    },
                    sz:{
                        w:791,
                        h:50
                    },
                    auto_height:!0,
                    auto_width:!0,
                    margin_top:"0px",
                    margin_right:"0px",
                    margin_bottom:"10px",
                    margin_left:"0px",
                    pull:"",
                    font:"museo-sans",
                    font_size:"18px",
                    a:"center",
                    text_color:{
                        R:255,
                        G:255,
                        B:255,
                        A:1
                    },
                    h:"1.5",
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"dimg",
                    name:"Kitten!",
                    config:{
                        border_top_left_radius:".dom-image",
                        border_bottom_left_radius:".dom-image",
                        border_top_right_radius:".dom-image",
                        border_bottom_right_radius:".dom-image",
                        margin_top:".dom-image",
                        margin_right:".dom-image",
                        margin_bottom:".dom-image",
                        margin_left:".dom-image",
                        opacity:".dom-image",
                        box_shadow:".dom-image",
                        pull:{
                            node:".dom-image",
                            type:"custom_class",
                            options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                        },
                        id:{
                            node:".dom-image",
                            type:"custom_string_id"
                        },
                        classes:{
                            node:".dom-image",
                            type:"custom_string_class",
                            base_classes:"dom-image"
                        }
                    },
                    root:".dom-image",
                    override_styles:!0,
                    can_edit:!1,
                    watch_size:!0,
                    override:[ "opacity" ],
                    html:'<img class="dom-image">',
                    css:"",
                    pos:{
                        x:0,
                        y:1814
                    },
                    sz:{
                        w:490,
                        h:327
                    },
                    is_locked:!1,
                    auto_height:!0,
                    auto_width:!0,
                    border_top_left_radius:"0px",
                    border_bottom_left_radius:"0px",
                    border_top_right_radius:"0px",
                    border_bottom_right_radius:"0px",
                    margin_top:"0px",
                    margin_right:"0px",
                    margin_bottom:"0px",
                    margin_left:"0px",
                    opacity:.9,
                    box_shadow:"none",
                    pull:"",
                    id:"",
                    classes:"",
                    url:"http://placekitten.com/g/600/400"
                }, {
                    t:"dimg",
                    name:"Kitten!",
                    config:{
                        border_top_left_radius:".dom-image",
                        border_bottom_left_radius:".dom-image",
                        border_top_right_radius:".dom-image",
                        border_bottom_right_radius:".dom-image",
                        margin_top:".dom-image",
                        margin_right:".dom-image",
                        margin_bottom:".dom-image",
                        margin_left:".dom-image",
                        opacity:".dom-image",
                        box_shadow:".dom-image",
                        pull:{
                            node:".dom-image",
                            type:"custom_class",
                            options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                        },
                        id:{
                            node:".dom-image",
                            type:"custom_string_id"
                        },
                        classes:{
                            node:".dom-image",
                            type:"custom_string_class",
                            base_classes:"dom-image"
                        }
                    },
                    root:".dom-image",
                    override_styles:!0,
                    can_edit:!1,
                    watch_size:!0,
                    override:[ "opacity" ],
                    html:'<img class="dom-image">',
                    css:"",
                    pos:{
                        x:490,
                        y:1814
                    },
                    sz:{
                        w:490,
                        h:327
                    },
                    is_locked:!1,
                    auto_height:!0,
                    auto_width:!0,
                    border_top_left_radius:"0px",
                    border_bottom_left_radius:"0px",
                    border_top_right_radius:"0px",
                    border_bottom_right_radius:"0px",
                    margin_top:"0px",
                    margin_right:"0px",
                    margin_bottom:"0px",
                    margin_left:"0px",
                    opacity:.9,
                    box_shadow:"none",
                    pull:"",
                    id:"readability-kitten",
                    classes:"",
                    url:"http://placekitten.com/g/600/400"
                }, {
                    t:"bsheading",
                    override:[ "font_face", "font_size", "text_color", "alignment", "text_shadow" ],
                    html:'<h1 class="heading" id="dom-elem-181">\n  <span class="editable-element">The internet is for kittens</span>\n</h1>',
                    css:"",
                    pos:{
                        x:0,
                        y:2080
                    },
                    sz:{
                        w:490,
                        h:42
                    },
                    auto_height:!0,
                    auto_width:!0,
                    tag_type:"h1",
                    pull:"",
                    text_shadow:"0px 1px 3px rgba(0, 0, 0, 0.921569)",
                    font:"museo-sans",
                    font_size:"33px",
                    a:"center",
                    text_color:{
                        R:255,
                        G:255,
                        B:255,
                        A:1
                    },
                    id:"readability-example",
                    classes:"",
                    children:[]
                }, {
                    t:"bsheading",
                    override:[ "font_face", "font_size", "text_color", "alignment" ],
                    html:'<h1 class="heading" id="dom-elem-191">\n  <span class="editable-element">The internet is for kittens</span>\n</h1>',
                    css:"",
                    pos:{
                        x:490,
                        y:2080
                    },
                    sz:{
                        w:490,
                        h:42
                    },
                    auto_height:!0,
                    auto_width:!0,
                    tag_type:"h1",
                    pull:"",
                    font:"museo-sans",
                    font_size:"33px",
                    a:"center",
                    text_color:{
                        R:255,
                        G:255,
                        B:255,
                        A:1
                    },
                    id:"readability-demo",
                    classes:"",
                    children:[]
                }, {
                    t:"bsheading",
                    override:[ "text_shadow", "font_face", "font_size", "alignment", "text_color" ],
                    html:'<h1 class="heading" id="dom-elem-192">\n  <span class="editable-element">EXAMPLE</span>\n</h1>',
                    css:"",
                    pos:{
                        x:0,
                        y:1814
                    },
                    sz:{
                        w:490,
                        h:42
                    },
                    auto_height:!0,
                    auto_width:!0,
                    tag_type:"h1",
                    pull:"",
                    text_shadow:"0px 1px 2px rgba(0, 0, 0, 0.44)",
                    font:"brandon-grotesque",
                    font_size:"16px",
                    a:"center",
                    text_color:{
                        R:255,
                        G:255,
                        B:255,
                        A:1
                    },
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"bsheading",
                    override:[ "text_shadow", "font_face", "font_size", "alignment", "text_color" ],
                    html:'<h1 class="heading" id="dom-elem-193">\n  <span class="editable-element">GIVE IT A SHOT!</span>\n</h1>',
                    css:"",
                    pos:{
                        x:490,
                        y:1814
                    },
                    sz:{
                        w:490,
                        h:42
                    },
                    auto_height:!0,
                    auto_width:!0,
                    tag_type:"h1",
                    pull:"",
                    text_shadow:"0px 1px 2px rgba(0, 0, 0, 0.439216)",
                    font:"brandon-grotesque",
                    font_size:"16px",
                    a:"center",
                    text_color:{
                        R:255,
                        G:255,
                        B:255,
                        A:1
                    },
                    id:"",
                    classes:"",
                    children:[]
                }, {
                    t:"dimg",
                    name:"Easel Mark",
                    config:{
                        border_top_left_radius:".dom-image",
                        border_bottom_left_radius:".dom-image",
                        border_top_right_radius:".dom-image",
                        border_bottom_right_radius:".dom-image",
                        margin_top:".dom-image",
                        margin_right:".dom-image",
                        margin_bottom:".dom-image",
                        margin_left:".dom-image",
                        opacity:".dom-image",
                        box_shadow:".dom-image",
                        pull:{
                            node:".dom-image",
                            type:"custom_class",
                            options:[ [ "", "None" ], [ "pull-left", "Left" ], [ "pull-center", "Center" ], [ "pull-right", "Right" ] ]
                        },
                        id:{
                            node:".dom-image",
                            type:"custom_string_id"
                        },
                        classes:{
                            node:".dom-image",
                            type:"custom_string_class",
                            base_classes:"dom-image"
                        }
                    },
                    root:".dom-image",
                    override_styles:!0,
                    can_edit:!1,
                    watch_size:!0,
                    override:[ "opacity" ],
                    html:'<img class="dom-image">',
                    css:"",
                    pos:{
                        x:474,
                        y:2228
                    },
                    sz:{
                        w:32,
                        h:42
                    },
                    is_locked:!1,
                    auto_height:!0,
                    auto_width:!0,
                    border_top_left_radius:"0px",
                    border_bottom_left_radius:"0px",
                    border_top_right_radius:"0px",
                    border_bottom_right_radius:"0px",
                    margin_top:"0px",
                    margin_right:"0px",
                    margin_bottom:"0px",
                    margin_left:"0px",
                    opacity:.4,
                    box_shadow:"none",
                    pull:"",
                    id:"",
                    classes:"",
                    url:"https://s3.amazonaws.com/easel-production-static/mark-white.png"
                } ],
                t:"layer"
            } ],
            grid:{
                grid:20,
                off:{
                    x:0,
                    y:0
                },
                enabled:!1,
                v:!1,
                c:{
                    R:237,
                    G:0,
                    B:7,
                    A:.15
                }
            },
            gs:{
                enabled:!1,
                v:!1,
                c:{
                    R:0,
                    G:255,
                    B:255,
                    A:.8
                },
                column_color:{
                    R:255,
                    G:0,
                    B:9,
                    A:.1
                },
                gutter_width:20,
                effective_size:null,
                document_size:980,
                columns:12
            },
            guides:{
                x_guides:[],
                y_guides:[],
                enabled:!1,
                v:!1,
                c:{
                    R:0,
                    G:255,
                    B:255,
                    A:1
                }
            }
        },
        documentThumbnail:Asset.SHADOWS_TOUR_THUMBNAIL,
        documentLoad:function(t, e) {
            return Draw.Demo.loadDocument(t, "ShadowsTour", {
                clearCurrentDemo:e
            });
        },
        documentRun:function(t, e) {
            var i, n;
            return null == e && (e = {}), n = '<div class="modal">\n  <div class="modal-header">\n    <h3>Shadow exploration</h3>\n  </div>\n\n  <div class="modal-body">\n    <p>\n      Shadows are a great way to bring more life to your designs,\n      draw attention, and improve legibility.\n    </p>\n\n    <p>\n      In this tour we’ll cover three different scenarios which illustrate the flexibility of\n      shadows and demonstrate exactly how you can use them within Easel.\n    </p>\n  </div>\n\n  <div class="modal-footer">\n    <a href="#" class="cta btn btn-info btn-large pull-left" title="Yeah!">Let\'s go!</a>\n  </div>\n</div>', 
            i = function() {
                var e;
                return window.tour = new Draw.Demo.Tour.Shadows({
                    document:t,
                    viewport:APP.view,
                    menu:APP.menu,
                    dialogManager:APP.dialogManager,
                    prompter:APP.prompter
                }), e = function() {
                    return tour.start();
                }, setTimeout(e, 300);
            }, Draw.Demo.runDemo(t, "ShadowsTour", n, i, {
                showSymbols:!1
            });
        },
        tweet:{
            text:"...",
            url:"http://easel.io/tutorials/shadows"
        }
    }, h = function(t) {
        return {
            content:t,
            my:"right bottom",
            at:"left center",
            zIndex:2e3,
            highlightTarget:!0,
            bind:[ "onClick" ],
            setup:function(t, e) {
                return t.track(this), t.targetInspector(".section-items.effects .action-pane", this, e), 
                $(".section-items.effects .action-pane a").on("click", this.onClick), {};
            },
            onClick:function(t) {
                return $(".section-items.effects .action-pane a").off("click", this.onClick), t.next();
            }
        };
    }, a = function(t, e, i) {
        return {
            content:e,
            my:"right center",
            at:"left center",
            highlightTarget:!0,
            bind:[ "onClick" ],
            setup:function(e) {
                var i = this;
                return e.track(this), setTimeout(function() {
                    var n;
                    return n = $(t).on("click", i.onClick), e.view.setTarget(n, i), e.view.show();
                }, 30), {};
            },
            onClick:function(e, n) {
                return $(t).off("click", this.onClick), setTimeout(function() {
                    return i && n.prompter.shadowPane.hide(), e.next();
                }, 10);
            }
        };
    }, u = function(t) {
        return {
            content:t,
            my:"top center",
            at:"bottom center",
            zIndex:3050,
            highlightTarget:!0,
            bind:[ "onClick" ],
            setup:function(t) {
                var e = this;
                return t.track(this), setTimeout(function() {
                    var i;
                    return i = $(".shadow-dialog .shadow-props .color").on("click", e.onClick), t.view.setTarget(i, e), 
                    t.view.show();
                }, 30), {};
            },
            onClick:function(t) {
                return $(".shadow-dialog .shadow-props .color").off("click", this.onClick), t.next();
            }
        };
    }, l = function(t, e) {
        return {
            content:t,
            my:"left center",
            at:"right center",
            zIndex:3050,
            bind:[ "onUnfocus" ],
            setup:function(t, e) {
                var i = this;
                return t.track(this), setTimeout(function() {
                    return e.prompter.colorPane.bind("unfocus", i.onUnfocus), t.view.setTarget($(".color-dialog .color-picker canvas"), i), 
                    t.view.show();
                }, 30), {};
            },
            onUnfocus:function(t, i) {
                return i.prompter.colorPane.unbind("unfocus", this.onUnfocus), e && i.prompter.shadowPane.hide(), 
                t.next();
            }
        };
    }, c = function(t, e, i, n) {
        return null == n && (n = 0), {
            content:i,
            my:"top center",
            at:"bottom center",
            zIndex:3050,
            bind:[ "onChange" ],
            setup:function(e, i) {
                var o = this;
                return e.track(this), i.shadow = i.dialogManager.dialogs.properties.pane.effects.effects.at(n), 
                i.shadow.bind("change:" + t, this.onChange), setTimeout(function() {
                    var i;
                    return i = $(".shadow-dialog .shadow-props .property-" + t + " .textbox"), e.view.setTarget(i.focus(), o), 
                    e.view.show();
                }, 10), {};
            },
            onChange:function(i, n, o, r) {
                return r === e ? (n.shadow.unbind("change:" + t, this.onChange), i.next()) :void 0;
            }
        };
    }, o = {
        centerX:!0,
        offsetTop:65,
        takeSidebarIntoAccount:!0,
        animate:!0
    }, i = [ {
        content:"<p>First, we'll make this text look letterpressed &mdash; like the text to the left.</p>",
        nextButton:!0,
        my:"bottom center",
        at:"top center",
        setup:function(t, e) {
            return t.track(this), e.letterpress = e.document.getElementById("letterpress-demo"), 
            e.letterpressSection = e.document.getElementById("letterpress-section"), e.document.selectionModel.setSelected(e.letterpress), 
            e.document.selectionModel.setLocked(!0, !0), setTimeout(function() {
                var i;
                return e.viewport.scrollToObject(e.letterpressSection, o), i = t.getPointForCanvasElement(e.letterpress, e, {
                    moveObjectsIntoView:!1,
                    side:"top"
                }), t.view.setTarget([ i.x, i.y ], !0), t.view.show();
            }, 100), {
                container:e.viewport.el
            };
        }
    }, {
        content:"<p>\n  Notice that the example looks indented. Why? Due to the shadows, you\n  perceive a light source coming from the top of your screen. So we will\n  add a dark shadow above the text, and a light one below the text.\n</p>",
        nextButton:!0,
        my:"bottom center",
        at:"top center",
        setup:function(t, e) {
            var i;
            return t.track(this), i = t.getPointForCanvasElement(e.letterpress, e, {
                moveObjectsIntoView:!1,
                side:"top"
            }), {
                target:[ i.x, i.y ],
                container:e.viewport.el
            };
        }
    }, h('<p>We\'re going to add the dark shadow at the top of the text.</p>\n<p class="action">Click the <strong>Add Shadow</strong> button.</p>'), a(".new-shadows .text-shadows .inner-shadow", '<p class="action">Now choose <strong>Letterpress Shadow</strong>.</p>'), {
        content:"<p>\n  Take a look at the shadow's properties. It's a\n  <strong>semi-transparent black</strong> shadow,\n  with blur of <strong>0</strong>, offset <strong>1px</strong>\n  above the text.\n</p>",
        nextButton:!0,
        my:"right center",
        at:"left center",
        bind:[ "onUnfocus" ],
        setup:function(t, e) {
            var i, n, r = this;
            return t.track(this), e.prompter.shadowPane.bind("unfocus", this.onUnfocus), i = e.document.getElementById("letterpress-background"), 
            n = _.clone(o), n.offsetTop += e.letterpressSection.getSize().height, e.viewport.scrollToObject(i, n), 
            setTimeout(function() {
                var e;
                return e = $(".shadow-dialog .shadow-props"), t.view.setTarget(e, r), t.view.show();
            }, 10);
        },
        teardown:function(t, e) {
            return e.prompter.shadowPane.unbind("unfocus", this.onUnfocus), e.prompter.shadowPane.hide();
        },
        onUnfocus:function(t) {
            return t.next();
        }
    }, h('<p>Great! Now, we\'ll add a highlight to the bottom of the text.</p>\n<p class="action">Click the <strong>Add Shadow</strong> button again.</p>'), a(".new-shadows .text-shadows .letterpress-highlight", '<p class="action">Choose <strong>Letterpress Highlight</strong>.</p>'), u("<p>\n  Notice the highlight is just a little too strong. We'll tone it down by\n  adjusting the opacity.\n</p>\n\n<p class=\"action\">Click the <strong>Shadow's Color</strong> here to edit it.</p>"), l('<p>\n  This slider is the opacity slider.\n</p>\n\n<p class="action">\n  <strong>Adjust it</strong> until you\'re happy,\n  then click ok on the color dialog.\n</p>'), {
        content:"<p>\n  Take a look at the highlight's properties. It's a\n  <strong>semi-transparent white</strong> shadow,\n  with blur of <strong>0</strong>, offset <strong>1px below</strong>\n  the text.\n</p>",
        nextButton:!0,
        my:"right center",
        at:"left center",
        bind:[ "onUnfocus" ],
        setup:function(t, e) {
            var i = this;
            return t.track(this), e.prompter.shadowPane.bind("unfocus", this.onUnfocus), setTimeout(function() {
                var e;
                return e = $(".shadow-dialog .shadow-props"), t.view.setTarget(e, i), t.view.show();
            }, 10);
        },
        teardown:function(t, e) {
            return e.prompter.shadowPane.unbind("unfocus", this.onUnfocus), e.prompter.shadowPane.hide();
        },
        onUnfocus:function(t) {
            return t.next();
        }
    }, {
        content:"<p>Great, you've made your text letterpressed!</p>\n\n<p>\n  Click <strong>Next step</strong> see how shadows can draw attention.\n</p>",
        okButton:!0,
        nextButton:!0,
        setup:function(t, e) {
            var i;
            return t.track(this), e.viewport.scrollToObject(e.letterpressSection, o), e.document.selectionModel.setLocked(!1), 
            e.document.selectionModel.setSelected(null), i = t.getPointForCanvasElement(e.letterpress, e, {
                moveObjectsIntoView:!1,
                side:"top"
            }), {
                my:"bottom center",
                at:"top center",
                target:[ i.x, i.y ],
                container:e.viewport.el
            };
        }
    } ], t = [ {
        content:"<p>\n  We'll add a couple shadows to make this heading stand out just like the text above.\n</p>",
        nextButton:!0,
        my:"bottom center",
        at:"top center",
        setup:function(t, e) {
            var i = this;
            return t.track(this), e.attention = e.document.getElementById("attention-demo"), 
            e.attentionExample = e.document.getElementById("attention-example"), e.attentionSection = e.document.getElementById("attention-section"), 
            e.document.selectionModel.setSelected(e.attention), e.document.selectionModel.setLocked(!0, !0), 
            setTimeout(function() {
                var n;
                return e.viewport.scrollToObject(e.attentionSection, o), n = t.getPointForCanvasElement(e.attention, e, {
                    moveObjectsIntoView:!1,
                    side:"top"
                }), t.view.setTarget([ n.x, n.y ], i), t.view.show();
            }, 100), {
                container:e.viewport.el
            };
        }
    }, h("<p>\n  To get this effect, we'll add an orange shadow, and another shadow that\n  is the same color as the background. We've used orange because it is a\n  complimentary color to blue.\n</p>\n<p>First we'll add the orange shadow.</p>\n<p class=\"action\">Click the <strong>Add Shadow</strong> button.</p>"), a(".new-shadows .text-shadows .outer-shadow", '<p class="action">Now choose <strong>Text Shadow</strong>.</p>'), c("angle", -45, '<p class="action">\n  We\'ll move this shadow to the bottom right. Set the angle to <strong>-45</strong>&deg;.\n</p>'), c("distance", 6, '<p class="action">\n  We\'ll stick it out a bit. Set distance to <strong>6</strong>px.\n</p>'), c("blur", 0, '<p class="action">\n  These shadows will be sharp, so set blur to <strong>0</strong>px.\n</p>'), u("<p>\n  Now we're ready to set the color.\n</p>\n\n<p class=\"action\">Click the <strong>Shadow's Color</strong> here to edit it.</p>"), l("<p>\n  Now we're going to choose an orange color.\n</p>\n<p class=\"action\">\n  <strong>Choose an orange color</strong> you're happy with, <strong>then click\n  ok</strong> on the color dialog. We've used <strong>#e66e51</strong> in the example\n  above.\n</p>", !0), h('<p>\n  Now we\'ll add a background colored shadow to make the orange shadow appear offset.\n</p>\n<p class="action">Click the <strong>Add Shadow</strong> button again.</p>'), a(".new-shadows .text-shadows .outer-shadow", '<p class="action">Now choose <strong>Text Shadow</strong>.</p>'), c("angle", -45, '<p>\n  Like the last, we\'ll move this shadow to the bottom right.\n</p>\n<p class="action">\n  Set the angle to <strong>-45</strong>&deg;.\n</p>'), c("distance", 3, '<p>\n  This shadow sticks out less than the first.\n</p>\n<p class="action">\n  Set distance to <strong>3</strong>px.\n</p>'), c("blur", 0, '<p class="action">\n  And this shadow is again sharp, so set blur to <strong>0</strong>px.\n</p>'), u('<p class="action">Click the <strong>Shadow\'s Color</strong> here to edit it.</p>'), l('<p class="action">\n  Set the color to <strong>#2c3d45</strong>. This is the color of the background.\n  <strong>Then click ok</strong>.\n</p>', !0), {
        content:"<p>\n  Yay! You've made this heading 'pop'!\n</p>\n<p>\n  The next tutorial is quick and will show you how to make\n  text more readable on similarly-colored backgrounds.\n</p>",
        okButton:!0,
        nextButton:!0,
        setup:function(t, e) {
            var i;
            return t.track(this), i = t.getPointForCanvasElement(e.attention, e, {
                side:"top"
            }), e.document.selectionModel.setLocked(!1), e.document.selectionModel.setSelected(null), 
            {
                my:"bottom center",
                at:"top center",
                target:[ i.x, i.y ],
                container:e.viewport.el
            };
        }
    } ], n = [ {
        content:"<p>\n  Note this white text over the kitten. The word 'for'\n  is almost unreadable. Let's fix it with a shadow!\n</p>",
        nextButton:!0,
        my:"bottom center",
        at:"top center",
        setup:function(t, e) {
            return t.track(this), e.readability = e.document.getElementById("readability-demo"), 
            e.readabilityKitten = e.document.getElementById("readability-kitten"), e.readabilitySection = e.document.getElementById("readability-section"), 
            e.document.selectionModel.setSelected(e.readability), e.document.selectionModel.setLocked(!0, !0), 
            setTimeout(function() {
                var i;
                return e.viewport.scrollToObject(e.readabilitySection, o), i = t.getPointForCanvasElement(e.readability, e, {
                    moveObjectsIntoView:!1,
                    side:"top"
                }), t.view.setTarget([ i.x, i.y ], !0), t.view.show();
            }, 100), {
                container:e.viewport.el
            };
        }
    }, h('<p>\n  We\'re simply going to add a shadow.\n</p>\n<p class="action">Click the <strong>Add Shadow</strong> button.</p>'), a(".new-shadows .text-shadows .outer-shadow", '<p class="action">Now choose <strong>Text Shadow</strong>.</p>', !0), {
        content:"<p>\n  That's it! I hope you'll agree it's much more readable.\n</p>",
        nextButton:!0,
        setup:function(t, e) {
            var i;
            return t.track(this), e.document.selectionModel.setLocked(!1), e.document.selectionModel.setSelected(null), 
            e.viewport.scrollToObject(e.readabilitySection, o), i = t.getPointForCanvasElement(e.readability, e, {
                moveObjectsIntoView:!1,
                side:"top"
            }), {
                my:"bottom center",
                at:"top center",
                target:[ i.x, i.y ],
                container:e.viewport.el
            };
        }
    } ], r = i.concat(t, n), d = function(t, e, i) {
        var n;
        return t.track(this, i), Draw.Demo.saveAsCurrentDemo(e.document), n = "<p>\n  Easel is a web design tool for individuals and small teams. Easel helps\n  you design your next web project faster and more accurately than\n  conventional design tools.\n</p>\n<p>\n  Signup and we'll save this page to your account!\n</p>", 
        e.document.signup(n);
    }, s = function(t, e) {
        return d(t, e, "Success");
    }, e = function(t, e) {
        return d(t, e, "Cancel");
    }, Tourist.Tip.ShadowsTour = function(t) {
        function e() {
            return p = e.__super__.constructor.apply(this, arguments);
        }
        return g(e, t), e.prototype.okButtonTemplate = '<button class="btn btn-small tour-close">I\'m done</button>', 
        e;
    }(Tourist.Tip.Bootstrap), Draw.Demo.Tour.Shadows = function(t) {
        function i(t) {
            var n;
            null == t && (t = {}), n = {
                stepOptions:t,
                steps:r,
                successStep:s,
                cancelStep:e,
                tipClass:"ShadowsTour",
                tipOptions:{
                    showEffect:"slidein"
                }
            }, i.__super__.constructor.call(this, n);
        }
        var n;
        return g(i, t), n = 1, i.prototype.track = function(t, e) {
            var i;
            if (window.mixpanel) return i = e, i || (i = t.index + 1), mixpanel.track("Tutorial:ShadowsTour:" + i, {
                version:n,
                location:"shadows"
            });
        }, i;
    }(Draw.Demo.Tour);
}.call(this), function() {
    Draw.Properties = {
        KEY_NAMES:{
            fill_color:"Fill",
            stroke_color:"Stroke",
            text_color:"Color",
            font_face:"Font",
            distance:"Offset",
            input_name:"Name",
            link_href:"Href"
        },
        CLASSES:{
            custom_class:"CustomOptionsProperty",
            custom_prop:"CustomOptionsProperty",
            tag_name:"CustomOptionsProperty",
            multiline_text:"TextAreaProperty",
            custom_string_class:"TextProperty",
            custom_string_id:"TextProperty",
            custom_string_prop:"TextProperty"
        },
        ORDER:[ "custom_options" ],
        SNAP_ONLY_PROPERTIES:[ "pull" ]
    };
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.ObjectInspector = function(i) {
        function o() {
            return this._bindToModel = e(this._bindToModel, this), this.generatePropertyView = e(this.generatePropertyView, this), 
            this.removePropertyViews = e(this.removePropertyViews, this), this.generatePropertyViews = e(this.generatePropertyViews, this), 
            this.setObject = e(this.setObject, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.propertiesSelector = ".pairs", o.prototype.initialize = function(t) {
            var e;
            return e = {
                useWrapper:!0,
                wrapperClass:Draw.ObjectPropertyContainer,
                propertyOptions:{},
                propertyClasses:Draw.Properties.CLASSES,
                undo:!0
            }, this.options = _.extend({}, e, t), o.__super__.initialize.call(this, this.options), 
            this.order = this.options.order || this.order || [], this.$(this.propertiesSelector).length || $(this.el).append($("<div/>", {
                "class":this.propertiesSelector.replace(".", "")
            })), this._generatedProperties = [], this._propertyViews = {}, this._object = null, 
            this._bindToModel(), this._setupPropertyClasses(), this.tool = new Draw.DialogViewTool(this.document);
        }, o.prototype.getTool = function() {
            return this.tool;
        }, o.prototype.doSecondaryAction = function() {
            return !1;
        }, o.prototype.doPrimaryAction = function() {
            return !1;
        }, o.prototype.getObjectInspector = function() {
            return this._object.get();
        }, o.prototype.getPropertyClasses = function() {
            return this.options.propertyClasses;
        }, o.prototype.getPropertyOrder = function() {
            return this.order;
        }, o.prototype.getObject = function() {
            return this._object;
        }, o.prototype.setObject = function(t) {
            var e, i, n;
            this.removePropertyViews(), this._object = t, n = this._propertyViews;
            for (e in n) i = n[e], i.setModel && i.setModel(t);
            return this.generatePropertyViews();
        }, o.prototype.generatePropertyViews = function() {
            var t, e, i, n, o, r, s, a;
            if (this._object) {
                for (i = this.getObjectInspector(), e = this.getPropertyClasses(), s = this.getPropertyOrder(), 
                a = [], o = 0, r = s.length; r > o; o++) t = s[o], t in i ? (n = this.generatePropertyView(t, i[t], this._object, e), 
                n ? a.push(this.$(this.propertiesSelector).append(n.el)) :a.push(void 0)) :a.push(void 0);
                return a;
            }
        }, o.prototype.removePropertyViews = function() {
            var t, e, i, n;
            for (this._focused = null, n = this._generatedProperties, e = 0, i = n.length; i > e; e++) t = n[e], 
            this.removePropertyView(t);
            return this._generatedProperties = [];
        }, o.prototype.generatePropertyView = function(t, e, i, n) {
            var o;
            if (n[t] && !_.isString(n[t])) return o = new n[t](_.extend({}, this.options.propertyOptions, {
                key:t,
                model:i
            })), this.options.useWrapper && (o = new this.options.wrapperClass(_.extend({}, this.options.propertyOptions, {
                key:t,
                property:o,
                model:i
            }))), this._generatedProperties.push(t), this.addPropertyView(t, o);
        }, o.prototype.addPropertyView = function(t, e) {
            return this._propertyViews[t] = e, this.bindPassThruEvents(e), this.options.undo && this.document && this.document.undoIgnore && (e.bind("undo:ignore", this.document.undoIgnore), 
            e.bind("undo:resume", this.document.undoResume), e.bind("undo:add", this.document.undoAdd)), 
            e.render();
        }, o.prototype.removePropertyView = function(t) {
            var e;
            if (t in this._propertyViews) return e = this._propertyViews[t], this.unbindPassThruEvents(e), 
            this.options.undo && this.document && this.document.undoIgnore && (e.unbind("undo:ignore", this.document.undoIgnore), 
            e.unbind("undo:resume", this.document.undoResume), e.unbind("undo:add", this.document.undoAdd)), 
            e.remove(), delete this._propertyViews[t];
        }, o.prototype.getPropertyView = function(t) {
            return this._propertyViews[t];
        }, o.prototype._setupPropertyClasses = function() {
            var t, e, i, n;
            t = this.options.propertyClasses, n = [];
            for (e in t) i = t[e], _.isString(i) && _.isFunction(Draw[i]) ? n.push(t[e] = Draw[i]) :n.push(void 0);
            return n;
        }, o.prototype._bindToModel = function() {
            return this.model ? (this._object = this.model, this.generatePropertyViews()) :void 0;
        }, o;
    }(Draw.EmbedPane);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    }, o = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.ObjectProperty = function(i) {
        function r() {
            return this._unfocus = e(this._unfocus, this), this._focus = e(this._focus, this), 
            this.onChangeModel = e(this.onChangeModel, this), this.blur = e(this.blur, this), 
            this.focus = e(this.focus, this), this.hasFocus = e(this.hasFocus, this), this.setKey = e(this.setKey, this), 
            this.setModel = e(this.setModel, this), this.update = e(this.update, this), this.initialize = e(this.initialize, this), 
            t = r.__super__.constructor.apply(this, arguments);
        }
        return n(r, i), r.prototype._focused = !1, r.prototype.initialize = function(t) {
            return this.options = null != t ? t :{}, this.el = $(this.el), this.key = this.options.key, 
            this.template = this.options.template || this.template, $(this.el).attr("id", _.uniqueId("prop_")), 
            $(this.el).addClass("property-" + this.key), this.setModel(this.options.model);
        }, r.prototype.update = function() {
            return null;
        }, r.prototype.focusInput = function() {
            return null;
        }, r.prototype.supportsModel = function(t) {
            var e;
            return t ? (e = this.key, o.call(t.supportedProperties(), e) >= 0) :!1;
        }, r.prototype.setModel = function(t) {
            return this.model && this._unbindFromModel(this.model), this.supportsModel(t) ? (this.model = this.options.model = t, 
            this.model ? (this._bindToModel(this.model), this.update(t.get(this.key), !0)) :void 0) :void 0;
        }, r.prototype.setKey = function(t) {
            return this.model && this._unbindFromModel(this.model), this.key = this.options.key = t, 
            this.model ? (this._bindToModel(this.model), this.update(this.model.get(this.key), !0)) :void 0;
        }, r.prototype.setValue = function(t, e, i) {
            return i = i || this.key, this.model ? this.model.set(i, t, e) :void 0;
        }, r.prototype.getValue = function(t) {
            return t = t || this.key, this.model ? this.model.get(t) :void 0;
        }, r.prototype.render = function() {
            return r.__super__.render.call(this, this.options), this.model && this.key && this.update(this.model.get(this.key)), 
            this;
        }, r.prototype.hide = function() {
            return this.el.hide();
        }, r.prototype.show = function() {
            return this.el.show();
        }, r.prototype.startUndo = function() {
            var t;
            return this.undoIgnore(), this._undoBatch = new Draw.MultiPropertyUndoBatch(), t = [ this.model ], 
            this.model instanceof Draw.PropertyProxy && (t = _.clone(this.model.objects)), this._undoBatch.setObjects(t);
        }, r.prototype.cancelUndo = function() {
            return this._undoBatch && (this._undoBatch.finish(), this._undoBatch.undo()), this._undoBatch = null;
        }, r.prototype.endUndo = function() {
            return this._undoBatch && (this._undoBatch.isNoop() || this.undoAdd(this._undoBatch), 
            this._undoBatch.finish()), this._undoBatch = null, this.undoResume();
        }, r.prototype.undoIgnore = function() {
            return this.trigger("undo:ignore");
        }, r.prototype.undoResume = function() {
            return this.trigger("undo:resume");
        }, r.prototype.undoAdd = function(t, e) {
            return this.trigger("undo:add", t, e);
        }, r.prototype.hasFocus = function() {
            return this._focused;
        }, r.prototype.focus = function() {
            return this.focusInput();
        }, r.prototype.blur = function() {
            return this._unfocus();
        }, r.prototype.remove = function() {
            return this.setModel(null), r.__super__.remove.call(this);
        }, r.prototype.onChangeModel = function(t, e) {
            return this.trigger("change", this, t, e), this.update(e);
        }, r.prototype._bindToModel = function(t) {
            return t.bind("change:" + this.key, this.onChangeModel);
        }, r.prototype._unbindFromModel = function(t) {
            return t.unbind("change:" + this.key, this.onChangeModel);
        }, r.prototype._focus = function() {
            return this.hasFocus() ? void 0 :(this.el.addClass("focused"), this._focused = !0, 
            this.trigger("focus", this, this.key));
        }, r.prototype._unfocus = function() {
            return this.hasFocus() ? (this.el.removeClass("focused"), this._focused = !1, this.trigger("unfocus", this, this.key)) :void 0;
        }, r;
    }(Backbone.View);
}.call(this), function() {
    var t, e, i = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, n = {}.hasOwnProperty, o = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var o in e) n.call(e, o) && (t[o] = e[o]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.TextProperty = function(e) {
        function n() {
            return this.onUnfocusInput = i(this.onUnfocusInput, this), this.onFocusInput = i(this.onFocusInput, this), 
            this.update = i(this.update, this), this.handleForm = i(this.handleForm, this), 
            this.submit = i(this.submit, this), this.cancel = i(this.cancel, this), this.render = i(this.render, this), 
            this.blur = i(this.blur, this), t = n.__super__.constructor.apply(this, arguments);
        }
        return o(n, e), n.prototype.tagName = "div", n.prototype.className = "text-property", 
        n.prototype.template = '<form class="text-wrapper">\n  <input class="textbox" type="text" name="text" />\n  <input type="submit" class="submit"/>\n</form>', 
        n.prototype.events = {
            "focus input":"onFocusInput",
            "blur input":"onUnfocusInput"
        }, n.prototype.focusInput = function() {
            return this.$("input:eq(0)").focus();
        }, n.prototype.blur = function() {
            var t;
            return t = this.$(":focus"), t.length ? t.blur() :void 0;
        }, n.prototype.render = function() {
            var t = this;
            return n.__super__.render.call(this), this._issetup || (this._issetup = !0, this.form = this.$("form").submit(this.submit), 
            this.$('input[type="text"], textarea').change(this.submit).keyup(function(e) {
                return 27 === e.keyCode ? t.cancel() :void 0;
            })), this.model && this.update(this.model.get(this.key)), this;
        }, n.prototype.cancel = function() {
            return this.model && this.update(this.model.get(this.key)), this.blur();
        }, n.prototype.submit = function() {
            return this.handleForm(this.form.serializeObject(), !0), !1;
        }, n.prototype.handleForm = function(t, e) {
            return this.setValue(t.text), e ? this.blur() :void 0;
        }, n.prototype.update = function(t) {
            return this.$(".textbox").val(t);
        }, n.prototype.onFocusInput = function() {
            return this.startUndo(), this._focus(this);
        }, n.prototype.onUnfocusInput = function() {
            return this._unfocus(this), this.endUndo();
        }, n;
    }(Draw.ObjectProperty), Draw.TextAreaProperty = function(t) {
        function n() {
            return this.submitWithoutBlur = i(this.submitWithoutBlur, this), this.render = i(this.render, this), 
            e = n.__super__.constructor.apply(this, arguments);
        }
        return o(n, t), n.prototype.tagName = "div", n.prototype.className = "text-area-property", 
        n.prototype.events = {
            "focus textarea":"onFocusInput",
            "blur textarea":"onUnfocusInput"
        }, n.prototype.template = '<form class="text-wrapper">\n  <textarea class="textbox" name="text"></textarea>\n  <input type="submit" class="submit"/>\n</form>', 
        n.prototype.initialize = function(t) {
            return n.__super__.initialize.call(this, t), this._delay = new Debouncer(100, this.submitWithoutBlur);
        }, n.prototype.render = function() {
            var t = this;
            return n.__super__.render.call(this), this.$("textarea").keyup(function() {
                return t._delay.update();
            }), this;
        }, n.prototype.submitWithoutBlur = function() {
            return this.handleForm(this.form.serializeObject(), !1);
        }, n;
    }(Draw.TextProperty);
}.call(this), function() {
    var t, e, i = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, n = {}.hasOwnProperty, o = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var o in e) n.call(e, o) && (t[o] = e[o]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.OptionsProperty = function(e) {
        function n() {
            return this.update = i(this.update, this), this.onChange = i(this.onChange, this), 
            this.render = i(this.render, this), t = n.__super__.constructor.apply(this, arguments);
        }
        return o(n, e), n.prototype.tagName = "div", n.prototype.className = "options-property", 
        n.prototype.template = '<form class="text-wrapper"><select name="opts"></select></form>', 
        n.prototype.optionPairs = [], n.prototype.render = function() {
            var t, e, i, o, r;
            if (n.__super__.render.call(this, this.options), !this.dropdown) {
                for (i = this.$("select"), e = this.options.optionPairs || this.optionPairs, o = 0, 
                r = e.length; r > o; o++) t = e[o], i.append($("<option/>", {
                    value:t[0],
                    text:t[1]
                }));
                this.dropdown = new Widget.DropdownBox({
                    el:i,
                    model:Draw.G.document
                }), Draw.G.focus.register(this.dropdown.flyout), this.dropdown.bind("selected", this.onChange);
            }
            return this.model && this.update(this.model.get(this.key)), this;
        }, n.prototype.remove = function() {
            return Draw.G.focus.unregister(this.dropdown.flyout), this.dropdown.unbind("selected", this.onChange), 
            n.__super__.remove.call(this);
        }, n.prototype.onChange = function(t, e) {
            return this.startUndo(), this.setValue(e), this.endUndo();
        }, n.prototype.update = function(t) {
            return this.dropdown ? this.dropdown.setSelected(t && t.toLowerCase() || t, {
                silent:!0
            }) :void 0;
        }, n;
    }(Draw.ObjectProperty), Draw.CustomOptionsProperty = function(t) {
        function n() {
            return this.render = i(this.render, this), e = n.__super__.constructor.apply(this, arguments);
        }
        return o(n, t), n.prototype.render = function() {
            var t;
            return t = this.model.getPropertyConfig(this.key), this.optionPairs = t.options, 
            n.__super__.render.call(this);
        }, n;
    }(Draw.OptionsProperty);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.LinkOptionsProperty = function(i) {
        function o() {
            return this.update = e(this.update, this), this.render = e(this.render, this), this.onClickLink = e(this.onClickLink, this), 
            t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.tagName = "div", o.prototype.className = "link-options-property", 
        o.prototype.template = "", o.prototype.linkTemplate = '<a href="#" rel="{{ key }}" class="{{ key }}">{{ value }}</a>', 
        o.prototype.optionPairs = [], o.prototype.events = {
            "click a":"onClickLink"
        }, o.prototype.onClickLink = function(t) {
            var e;
            return e = $(t.target), e.is("a") || (e = e.parent()), this.startUndo(), this.setValue(e.attr("rel")), 
            this.endUndo(), !1;
        }, o.prototype.render = function() {
            var t, e, i, n;
            for (o.__super__.render.call(this), e = this.options.optionPairs || this.optionPairs, 
            i = 0, n = e.length; n > i; i++) t = e[i], this.el.append(this.renderTemplate(this.linkTemplate, {
                key:t[0],
                value:t[1]
            }));
            return this.model && this.update(this.model.get(this.key)), this;
        }, o.prototype.update = function(t) {
            var e;
            return e = this.options.optionPairs || this.optionPairs, t = t || e[0][0], this.$("a").removeClass("selected"), 
            this.$("." + t).addClass("selected");
        }, o;
    }(Draw.ObjectProperty);
}.call(this), function() {
    var t, e, i = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, n = {}.hasOwnProperty, o = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var o in e) n.call(e, o) && (t[o] = e[o]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    }, r = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.ObjectPropertyContainer = function(e) {
        function n() {
            return this.focusInput = i(this.focusInput, this), this.hasFocus = i(this.hasFocus, this), 
            this.focus = i(this.focus, this), this.remove = i(this.remove, this), this.render = i(this.render, this), 
            this.setModel = i(this.setModel, this), this.checkVisibility = i(this.checkVisibility, this), 
            this.initialize = i(this.initialize, this), t = n.__super__.constructor.apply(this, arguments);
        }
        return o(n, e), n.prototype.tagName = "div", n.prototype.className = "object-property-container", 
        n.prototype.template = '<div class="object-wrapper">\n  <label>{{label}}</label>\n  <div class="object-property"></div>\n  <div style="clear:left"></div>\n</div>', 
        n.prototype.initialize = function(t) {
            return this.options = null != t ? t :{}, n.__super__.initialize.call(this, t), this.key = this.options.key, 
            this.options.key && !this.options.label && (this.options.label = Draw.Properties.KEY_NAMES[this.options.key] || _.titlize(this.options.key)), 
            this.properties = [], this.options.property && this.registerProperty(this.options.property), 
            this.options.model ? this.setModel(this.options.model) :void 0;
        }, n.prototype.registerProperty = function(t) {
            return this.bindPassThruEvents(t), this.properties.push(t);
        }, n.prototype.checkVisibility = function(t) {
            var e;
            return t && (t = t.owner || t), e = this.supportsModel(t), e ? this.show() :this.hide(), 
            this._checkSectionVisibility(), e;
        }, n.prototype.supportsModel = function(t) {
            var e, i, n, o, r;
            if (!t) return !1;
            for (i = !0, r = this.properties, n = 0, o = r.length; o > n; n++) e = r[n], i && (i = e.supportsModel(t));
            return i;
        }, n.prototype.setModel = function(t) {
            var e, i, n, o;
            for (this._unbindFromModel(this.model), this.model = t, this.checkVisibility(t), 
            o = this.properties, i = 0, n = o.length; n > i; i++) e = o[i], e.setModel(t);
            return this._bindToModel(this.model);
        }, n.prototype.destroy = function() {
            var t, e, i, n, o;
            for (n = this.properties, o = [], e = 0, i = n.length; i > e; e++) t = n[e], o.push(t.destroy());
            return o;
        }, n.prototype.render = function(t) {
            var e, i, o, r;
            if (n.__super__.render.call(this, t || this.options), this.key && this.el.addClass("" + this.key + "-container"), 
            this.$(".object-property").length) for (r = this.properties, i = 0, o = r.length; o > i; i++) e = r[i], 
            this.$(".object-property").append(e.render().el);
            return this;
        }, n.prototype.remove = function() {
            var t, e, i, o, r;
            for (n.__super__.remove.call(this), o = this.properties, r = [], e = 0, i = o.length; i > e; e++) t = o[e], 
            this.unbindPassThruEvents(t), r.push(t.remove());
            return r;
        }, n.prototype.submit = function() {
            var t, e, i, n, o;
            for (n = this.properties, o = [], e = 0, i = n.length; i > e; e++) t = n[e], t.submit ? o.push(t.submit()) :o.push(void 0);
            return o;
        }, n.prototype.blur = function() {
            var t, e, i, n, o;
            for (n = this.properties, o = [], e = 0, i = n.length; i > e; e++) t = n[e], t.blur ? o.push(t.blur()) :o.push(void 0);
            return o;
        }, n.prototype.focus = function(t) {
            var e, i, n, o, r;
            for (o = this.properties, r = [], i = 0, n = o.length; n > i; i++) e = o[i], r.push(e.focus(t));
            return r;
        }, n.prototype.hasFocus = function() {
            var t, e, i, n, o;
            for (t = !1, o = this.properties, i = 0, n = o.length; n > i; i++) e = o[i], t || (t = e.hasFocus());
            return t;
        }, n.prototype.focusInput = function(t) {
            var e, i, n, o, r;
            for (o = this.properties, r = [], i = 0, n = o.length; n > i; i++) e = o[i], e.focusInput ? r.push(e.focusInput(t)) :r.push(void 0);
            return r;
        }, n.prototype.hide = function() {
            return this.el.hide(), this.el.removeClass("visible");
        }, n.prototype.show = function() {
            return this.el.show(), this.el.addClass("visible");
        }, n.prototype.createTooltip = function(t) {
            var e;
            return e = t.qtip({
                style:{
                    classes:"qtip-easel",
                    tip:{
                        width:12,
                        height:8
                    }
                },
                position:{
                    my:"right center",
                    at:"left center",
                    viewport:$(window),
                    adjust:{
                        x:-10,
                        method:"shift"
                    }
                }
            });
        }, n.prototype._checkSectionVisibility = function() {
            var t, e;
            return e = this.el.parents(".section").show(), t = e.find(".visible"), t.length > 0 ? e.show() :e.hide();
        }, n.prototype._bindToModel = function() {}, n.prototype._unbindFromModel = function() {}, 
        n;
    }(Draw.EmbedPane), Draw.CustomPropertyContainer = function(t) {
        function i() {
            return e = i.__super__.constructor.apply(this, arguments);
        }
        return o(i, t), i.prototype.initialize = function(t) {
            var e;
            return null == t && (t = {}), this.snapOnly = (e = t.key, r.call(Draw.Properties.SNAP_ONLY_PROPERTIES, e) >= 0), 
            i.__super__.initialize.call(this, t);
        }, i.prototype.supportsModel = function(t) {
            var e;
            return t ? this.snapOnly ? t.get("snapped") && (e = this.key, r.call(t.supportedProperties(), e) >= 0) :i.__super__.supportsModel.call(this, t) :!1;
        }, i.prototype._bindToModel = function(t) {
            return t ? t.bind("change:snapped", this.checkVisibility) :void 0;
        }, i.prototype._unbindFromModel = function(t) {
            return t ? t.unbind("change:snapped", this.checkVisibility) :void 0;
        }, i;
    }(Draw.ObjectPropertyContainer);
}.call(this), function() {
    var t, e, i, n, o, r = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, s = {}.hasOwnProperty, a = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var n in e) s.call(e, n) && (t[n] = e[n]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.IntProperty = function(e) {
        function i() {
            return this.render = r(this.render, this), t = i.__super__.constructor.apply(this, arguments);
        }
        return a(i, e), i.prototype.boxClass = Forms.IntBox, i.prototype.propParams = {
            increment:1,
            largeIncrement:10,
            min:0,
            max:1e4
        }, i.prototype.render = function() {
            var t, e;
            return i.__super__.render.call(this), e = this.options.propParams || _.clone(this.propParams), 
            e = _.extend(e, _.extract(this.options, _.keys(e)), {
                el:this.form.find(".textbox")
            }), t = new this.boxClass(e), e.min < 0 && (t.ACCEPT = /^(-)?([0-9]*)$/), this;
        }, i.prototype.handleForm = function(t, e) {
            var i;
            return i = parseInt(t.text), isNaN(i) || this.setValue(i), e ? this.blur() :void 0;
        }, i;
    }(Draw.TextProperty), Draw.IntToTextProperty = function(t) {
        function i() {
            return this.update = r(this.update, this), e = i.__super__.constructor.apply(this, arguments);
        }
        return a(i, t), i.prototype.propParams = {
            increment:1,
            largeIncrement:10,
            min:-1e4,
            max:1e4
        }, i.prototype.update = function(t) {
            return this.$(".textbox").val(parseInt(t));
        }, i.prototype.handleForm = function(t, e) {
            var i;
            return i = t.text + "px", this.setValue(i), e ? this.blur() :void 0;
        }, i;
    }(Draw.IntProperty), Draw.DegreeProperty = function(t) {
        function e() {
            return i = e.__super__.constructor.apply(this, arguments);
        }
        return a(e, t), e.prototype.boxClass = Forms.DegreeBox, e.prototype.propParams = {
            maxDigits:4,
            min:-360,
            max:360,
            increment:1,
            largeIncrement:10
        }, e;
    }(Draw.IntProperty), Draw.DecimalProperty = function(t) {
        function e() {
            return this.handleForm = r(this.handleForm, this), this.update = r(this.update, this), 
            n = e.__super__.constructor.apply(this, arguments);
        }
        return a(e, t), e.prototype.boxClass = Forms.DecimalBox, e.prototype.propParams = {
            increment:1,
            largeIncrement:10,
            min:0,
            max:100,
            round:10
        }, e.prototype.format = "decimal(1)", e.prototype.update = function(t) {
            return t = Util.DataFormatters.get(this.format, t), e.__super__.update.call(this, t);
        }, e.prototype.handleForm = function(t, e) {
            var i;
            return i = parseFloat(t.text), isNaN(i) || this.setValue(i), e ? this.blur() :void 0;
        }, e;
    }(Draw.IntProperty), Draw.TinyDecimalProperty = function(t) {
        function e() {
            return o = e.__super__.constructor.apply(this, arguments);
        }
        return a(e, t), e.prototype.propParams = {
            increment:.1,
            largeIncrement:.2,
            min:0,
            max:1,
            round:10
        }, e;
    }(Draw.DecimalProperty);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    }, o = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.AggregateProperty = function(i) {
        function r() {
            return this.onUnfocusInput = e(this.onUnfocusInput, this), this.onFocusInput = e(this.onFocusInput, this), 
            this.update = e(this.update, this), t = r.__super__.constructor.apply(this, arguments);
        }
        return n(r, i), r.prototype.className = "aggregate-property", r.prototype.propParams = {
            increment:1,
            largeIncrement:10,
            min:-1e4,
            max:1e4
        }, r.prototype.template = '<form class="text-wrapper">\n  <input class="textbox" type="text" name="text" placeholder="N/A"/>\n  <input type="submit" class="submit"/>\n</form>', 
        r.prototype.initialize = function(t) {
            return null == t && (t = {}), r.__super__.initialize.call(this, t), this.options.key = this.key = this.options.keys[0];
        }, r.prototype.setKeys = function(t) {
            return this.options.keys = t;
        }, r.prototype.handleForm = function(t, e) {
            var i, n, o, r, s;
            for (i = t.text + "px", s = this.options.keys, o = 0, r = s.length; r > o; o++) n = s[o], 
            this.setValue(i, {}, n);
            return e ? this.blur() :void 0;
        }, r.prototype.update = function(t) {
            var e, i, n, o, r;
            for (i = parseInt(t), r = this.options.keys, n = 0, o = r.length; o > n; n++) if (e = r[n], 
            this.model.get(e) !== t) {
                i = "";
                break;
            }
            return this.$(".textbox").val(i);
        }, r.prototype.supportsModel = function(t) {
            var e;
            return t ? (e = this.options.keys[0], o.call(t.supportedProperties(), e) >= 0) :!1;
        }, r.prototype.onFocusInput = function() {
            return this._focus(this);
        }, r.prototype.onUnfocusInput = function() {
            return this._unfocus(this);
        }, r.prototype._bindToModel = function(t) {
            var e, i, n, o, r;
            for (o = this.options.keys, r = [], i = 0, n = o.length; n > i; i++) e = o[i], r.push(t.bind("change:" + e, this.onChangeModel));
            return r;
        }, r.prototype._unbindFromModel = function(t) {
            var e, i, n, o, r;
            for (o = this.options.keys, r = [], i = 0, n = o.length; n > i; i++) e = o[i], r.push(t.unbind("change:" + e, this.onChangeModel));
            return r;
        }, r;
    }(Draw.IntProperty);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    }, o = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.AngleProperty = function(i) {
        function r() {
            return this.onDialUpdate = e(this.onDialUpdate, this), this.onModelChange = e(this.onModelChange, this), 
            this.render = e(this.render, this), this.setModel = e(this.setModel, this), t = r.__super__.constructor.apply(this, arguments);
        }
        return n(r, i), r.prototype.className = "angle-property no-move", r.prototype.template = '<div class="angle-picker"></div>', 
        r.prototype.initialize = function(t) {
            return r.__super__.initialize.call(this, t), this.angleInput = new Draw.DegreeProperty({
                key:this.key,
                model:this.model
            }), this.dial = new Draw.AnglePicker({
                callback:this.onDialUpdate
            }), this.registerProperty(this.angleInput), this.setModel(this.model);
        }, r.prototype.setModel = function(t) {
            return this.model && this.model.unbind("change:angle", this.onModelChange), o.call(t.supportedProperties(), "angle") < 0 ? void 0 :(this.model = t, 
            this.model.bind("change:angle", this.onModelChange), r.__super__.setModel.call(this, t));
        }, r.prototype.blur = function() {
            return this.angleInput.blur();
        }, r.prototype.submit = function() {
            return this.angleInput.submit();
        }, r.prototype.render = function() {
            return r.__super__.render.call(this), this.$(".angle-picker").append(this.dial.el), 
            $(this.el).append(this.angleInput.render().el), this.onModelChange(), this;
        }, r.prototype.onModelChange = function() {
            return this.dial.setAngle(this.model.get("angle"), !0);
        }, r.prototype.onDialUpdate = function(t) {
            return t = Math.round(t), this.angleInput.setValue(t);
        }, r;
    }(Draw.ObjectPropertyContainer);
}.call(this), function() {
    var t, e, i, n, o, r, s, a = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, l = {}.hasOwnProperty, c = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var n in e) l.call(e, n) && (t[n] = e[n]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    }, h = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    i = function(t) {
        function e() {
            return this.render = a(this.render, this), this.update = a(this.update, this), this.handleForm = a(this.handleForm, this), 
            n = e.__super__.constructor.apply(this, arguments);
        }
        return c(e, t), e.prototype.template = '<form class="text-pair-wrapper">\n  <input class="textbox one" type="text" name="one" />\n  <input class="textbox two" type="text" name="two" />\n  <input type="submit" class="submit"/>\n</form>', 
        e.prototype.handleForm = function(t, e) {
            return this.setValue("" + t.one + " " + t.two), e ? this.blur() :void 0;
        }, e.prototype.update = function(t) {
            var e;
            return e = (t || "").split(" "), e.length < 2 && (e = [ e[0], e[0] ]), this.one && this.two ? (this.one.val(e[0].trim()), 
            this.two.val(e[1].trim())) :void 0;
        }, e.prototype.render = function() {
            return e.__super__.render.call(this), this.one = this.form.find(".one"), this.two = this.form.find(".two"), 
            new Forms.IncrementingTextBox({
                el:this.one
            }), new Forms.IncrementingTextBox({
                el:this.two
            }), this.model && this.update(this.model.get(this.key)), this;
        }, e;
    }(Draw.TextProperty), e = function(t) {
        function e() {
            return this.onClickRemove = a(this.onClickRemove, this), this.onUploaded = a(this.onUploaded, this), 
            this.update = a(this.update, this), o = e.__super__.constructor.apply(this, arguments);
        }
        return c(e, t), e.prototype.template = '<a class="upload-image input" href="#" title="upload a background image for this object">\n  <i class="icon icon-picture"></i> Upload\n  <form>\n    <input type="file" name="file" />\n  </form>\n</a>\n\n<div class="bg-image input"></div>\n\n<a class="remove-image" href="#" title="Remove the background image">\n  <i class="icon icon-remove-sign"></i>\n</a>', 
        e.prototype.update = function(t) {
            var e;
            return e = t ? {
                background:"transparent url(" + t + ") top left repeat"
            } :{
                background:"transparent"
            }, this.$(".bg-image").css(e);
        }, e.prototype.render = function() {
            return e.__super__.render.call(this), this.options.document.setupUploader(this.$("input"), this.onUploaded), 
            this.$(".remove-image").click(this.onClickRemove), this;
        }, e.prototype.setUrl = function(t) {
            return this.startUndo(), this.setValue(t), this.trigger("change:url", t), this.endUndo();
        }, e.prototype.onUploaded = function(t, e) {
            return t && !e ? this.setUrl(t.url) :void 0;
        }, e.prototype.onClickRemove = function() {
            return confirm("Are you sure you want to remove this background image?") && this.setUrl(null), 
            !1;
        }, e;
    }(Draw.ObjectProperty), t = function(t) {
        function e() {
            return this.update = a(this.update, this), r = e.__super__.constructor.apply(this, arguments);
        }
        return c(e, t), e.prototype.tagName = "div", e.prototype.className = "checkbox-property", 
        e.prototype.template = '<label for="cover" title="Makes the background image scale to cover the element">\n  <input type="checkbox" class="check" name="cover"/>\n  Cover element\n</label>', 
        e.prototype.events = {
            "click label":"onClickCheckbox"
        }, e.prototype.onClickCheckbox = function() {
            var t;
            return t = this.model.get(this.options.key), this.setValue("cover" !== t ? "cover" :"auto"), 
            null;
        }, e.prototype.update = function(t) {
            var e;
            return e = this.$(".check"), e.length ? e[0].checked = "cover" === t :void 0;
        }, e;
    }(Draw.ObjectProperty), Draw.BackgroundProperty = function(n) {
        function o() {
            return this.onChangeUrl = a(this.onChangeUrl, this), this.render = a(this.render, this), 
            s = o.__super__.constructor.apply(this, arguments);
        }
        return c(o, n), o.prototype.tagName = "div", o.prototype.className = "background-property", 
        o.prototype.template = '<label class="top-label">Background\n  <a href="http://help.easel.io/guide/editor-reference#background-control" class="help-icon" target="_blank" title="More information">\n    <i class="icon icon-question-sign"></i>\n  </a>\n</label>\n<div class="object-wrapper"></div>\n<div style="clear:left"></div>', 
        o.prototype.initialize = function(n) {
            return o.__super__.initialize.call(this, n), this.color = new Draw.ColorProperty({
                key:"fill_color"
            }), this.image = new e({
                key:"background_image",
                document:n.document
            }), this.repeat = new Draw.OptionsProperty({
                key:"background_repeat",
                optionPairs:[ [ "repeat", "Repeat" ], [ "repeat-x", "Repeat X" ], [ "repeat-y", "Repeat Y" ], [ "no-repeat", "No Repeat" ] ]
            }), this.offsets = new i({
                key:"background_position"
            }), this.cover = new t({
                key:"background_size"
            }), this.image.bind("change:url", this.onChangeUrl), this.registerProperty(this.color), 
            this.registerProperty(this.image), this.registerProperty(this.repeat), this.registerProperty(this.offsets), 
            this.registerProperty(this.cover);
        }, o.prototype.render = function() {
            return o.__super__.render.call(this), this.$(".object-wrapper").append(this.color.render().el), 
            this.$(".object-wrapper").append(this.image.render().el), this.$(".object-wrapper").append(this.repeat.render().el), 
            this.$(".object-wrapper").append(this.offsets.render().el), this.$(".object-wrapper").append(this.cover.render().el), 
            this.createTooltip(this.$(".help-icon")), this;
        }, o.prototype.supportsModel = function(t) {
            return t ? h.call(t.supportedProperties(), "fill_color") >= 0 :!1;
        }, o.prototype.checkBgImageVisibility = function(t) {
            return t && h.call(t.supportedProperties(), "background_image") >= 0 && t.get("background_image") ? this.el.addClass("has-image") :this.el.removeClass("has-image");
        }, o.prototype.checkVisibility = function(t) {
            return o.__super__.checkVisibility.call(this, t), this.checkBgImageVisibility(t), 
            h.call(t.supportedProperties(), "background_image") >= 0 ? this.image.show() :this.image.hide();
        }, o.prototype.onChangeUrl = function(t) {
            var e;
            return this.checkBgImageVisibility(this.model), t && (this.model.get("background_repeat") || this.model.set("background_repeat", "repeat"), 
            e = this.model.get("background_position"), "0% 0%" === e || !e) ? this.model.set("background_position", "0px 0px") :void 0;
        }, o;
    }(Draw.ObjectPropertyContainer);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.BoolProperty = function(i) {
        function o() {
            return this.update = e(this.update, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.tagName = "div", o.prototype.className = "bool-property", 
        o.prototype.template = '<a href="#" rel="{{ key }}" class="{{ key }}">{{text}}</a>', 
        o.prototype.events = {
            "click a":"onClickLink"
        }, o.prototype.initialize = function(t) {
            var e;
            return e = {
                text:""
            }, o.__super__.initialize.call(this, _.extend(e, t));
        }, o.prototype.onClickLink = function() {
            var t;
            return t = this.model.get(this.options.key), this.setValue(!t), !1;
        }, o.prototype.update = function(t) {
            return t && this.$("a").addClass("selected"), t ? void 0 :this.$("a").removeClass("selected");
        }, o;
    }(Draw.ObjectProperty);
}.call(this), function() {
    var t, e, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.ButtonClassProperty = function(e) {
        function i() {
            return t = i.__super__.constructor.apply(this, arguments);
        }
        return n(i, e), i.prototype.optionPairs = [ [ "", "Default" ], [ "btn-primary", "Primary" ], [ "btn-info", "Info" ], [ "btn-success", "Success" ], [ "btn-warning", "Warning" ], [ "btn-danger", "Danger" ], [ "btn-inverse", "Inverse" ], [ "btn-link", "Link" ] ], 
        i;
    }(Draw.OptionsProperty), Draw.ButtonSizeProperty = function(t) {
        function i() {
            return e = i.__super__.constructor.apply(this, arguments);
        }
        return n(i, t), i.prototype.optionPairs = [ [ "", "Normal" ], [ "btn-large", "Large" ], [ "btn-small", "Small" ], [ "btn-mini", "Mini" ] ], 
        i;
    }(Draw.OptionsProperty);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    }, o = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.BorderProperty = function(i) {
        function r() {
            return this._updateToolTip = e(this._updateToolTip, this), this.onSetBorderWidth = e(this.onSetBorderWidth, this), 
            this.render = e(this.render, this), t = r.__super__.constructor.apply(this, arguments);
        }
        return n(r, i), r.prototype.tagName = "div", r.prototype.className = "border-property", 
        r.prototype.template = '<span class="info-block" title=".">\n  <i class="icon icon-info-sign"></i>\n</span>\n<label class="top-label">Border\n  <a href="http://help.easel.io/guide/editor-reference#border-control" class="help-icon" target="_blank" title="More information">\n    <i class="icon icon-question-sign"></i>\n  </a>\n</label>\n<div class="object-wrapper"></div>\n<div class="border-select">\n  <a href="#" rel="right" class="border-select-right" title="Edit right border">right</a>\n  <a href="#" rel="bottom" class="border-select-bottom" title="Edit bottom border">bottom</a>\n  <a href="#" rel="top" class="border-select-top" title="Edit top border">top</a>\n  <a href="#" rel="left" class="border-select-left" title="Edit left border">left</a>\n\n  <a href="#" rel="" class="border-select-all selected" title="Edit ALL borders">all</a>\n</div>', 
        r.prototype.events = {
            "click .border-select a":"onClickBorderSelect"
        }, r.prototype.initialize = function(t) {
            var e, i = this;
            return r.__super__.initialize.call(this, t), this.color = new Draw.ColorProperty({
                key:"border_color"
            }), this.width = new Draw.IntProperty({
                key:"border_width"
            }), this.style = new Draw.OptionsProperty({
                key:"border_style",
                optionPairs:[ [ "solid", "Solid" ], [ "dashed", "Dashed" ], [ "dotted", "Dotted" ] ]
            }), this.registerProperty(this.color), this.registerProperty(this.width), this.registerProperty(this.style), 
            this.updateDelay = new Debouncer(100, this._updateToolTip), e = function() {
                return i.updateDelay.update();
            }, this.color.bind("change", e), this.width.bind("change", e), this.style.bind("change", e), 
            this.width.bind("change", this.onSetBorderWidth);
        }, r.prototype.render = function() {
            return r.__super__.render.call(this), this.$(".object-wrapper").append(this.color.render().el), 
            this.$(".object-wrapper").append(this.width.render().el), this.$(".object-wrapper").append(this.style.render().el), 
            this.infoTip = this.createTooltip(this.$(".info-block")), this.createTooltip(this.$(".help-icon")), 
            this;
        }, r.prototype.supportsModel = function(t) {
            return t ? o.call(t.supportedProperties(), "border_color") >= 0 :!1;
        }, r.prototype.checkVisibility = function(t) {
            return r.__super__.checkVisibility.call(this, t), this._updateToolTip();
        }, r.prototype.onSetBorderWidth = function(t) {
            var e;
            return t.getValue() && (e = this.style.getValue(), "none" === e || !e) ? this.style.setValue("solid") :void 0;
        }, r.prototype.onClickBorderSelect = function(t) {
            var e, i, n;
            return n = $(t.target), e = n.attr("rel"), e !== this.currentBorder && (this.$(".border-select a").removeClass("selected"), 
            n.addClass("selected"), i = e && e + "_" || "", this.color.setKey("border_" + i + "color"), 
            this.width.setKey("border_" + i + "width"), this.style.setKey("border_" + i + "style"), 
            this.$(".top-label").text("Border " + _.titlize(e)), this.currentBorder = e, this._updateToolTip()), 
            !1;
        }, r.prototype._updateToolTip = function() {
            var t, e;
            return this.model && !this.currentBorder ? (t = null, this.model.splitBorders && (t = this.model.splitBorders()), 
            t ? (e = "Some borders have different settings.\nChanging the settings below will apply the changes to all borders.", 
            this.infoTip.show(), this.infoTip.qtip("option", "content.text", e)) :this.infoTip.hide()) :this.infoTip.hide();
        }, r;
    }(Draw.ObjectPropertyContainer);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    }, o = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.BorderRadiusProperty = function(i) {
        function r() {
            return this.render = e(this.render, this), t = r.__super__.constructor.apply(this, arguments);
        }
        return n(r, i), r.prototype.tagName = "div", r.prototype.className = "border-radius-property", 
        r.prototype.template = '<label class="top-label">Roundness\n  <a href="http://help.easel.io/guide/editor-reference#roundness-control" class="help-icon" target="_blank" title="More information">\n    <i class="icon icon-question-sign"></i>\n  </a>\n</label>\n<div class="object-wrapper"></div>', 
        r.prototype.initialize = function(t) {
            var e;
            return r.__super__.initialize.call(this, t), e = {
                increment:1,
                largeIncrement:10,
                min:0,
                max:1e4
            }, this.ag = new Draw.AggregateProperty({
                propParams:e,
                keys:[ "border_top_left_radius", "border_top_right_radius", "border_bottom_right_radius", "border_bottom_left_radius" ]
            }), this.tl = new Draw.IntToTextProperty({
                propParams:e,
                key:"border_top_left_radius"
            }), this.tr = new Draw.IntToTextProperty({
                propParams:e,
                key:"border_top_right_radius"
            }), this.br = new Draw.IntToTextProperty({
                propParams:e,
                key:"border_bottom_right_radius"
            }), this.bl = new Draw.IntToTextProperty({
                propParams:e,
                key:"border_bottom_left_radius"
            }), this.registerProperty(this.ag), this.registerProperty(this.tl), this.registerProperty(this.tr), 
            this.registerProperty(this.br), this.registerProperty(this.bl);
        }, r.prototype.render = function() {
            return r.__super__.render.call(this), this.$(".object-wrapper").append(this.ag.render().el).append(this.tl.render().el).append(this.tr.render().el).append(this.bl.render().el).append(this.br.render().el), 
            this.createTooltip(this.$(".help-icon")), this;
        }, r.prototype.supportsModel = function(t) {
            return t ? o.call(t.supportedProperties(), "border_top_left_radius") >= 0 :!1;
        }, r;
    }(Draw.ObjectPropertyContainer);
}.call(this), function() {
    var t, e, i = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, n = {}.hasOwnProperty, o = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var o in e) n.call(e, o) && (t[o] = e[o]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.ColorProperty = function(e) {
        function n() {
            return this.update = i(this.update, this), this.prompt = i(this.prompt, this), this.setupObjects = i(this.setupObjects, this), 
            this.unfocus = i(this.unfocus, this), this.focus = i(this.focus, this), t = n.__super__.constructor.apply(this, arguments);
        }
        return o(n, e), n.prototype.tagName = "div", n.prototype.className = "color-property no-hide", 
        n.prototype.template = '<div class="color-wrapper dont-hide-flyout no-move input"><div class="color no-move input"></div></div>', 
        n.prototype.events = {
            "click .color":"focus"
        }, n.prototype.focusInput = function() {
            return this.focus();
        }, n.prototype.focus = function() {
            return this._focused ? void 0 :(this._focused = !0, this.onPickerShow(), this.prompt());
        }, n.prototype.unfocus = function() {
            return this._focused ? (Draw.G.prompt.hideColor(), this._focused = !1, this.trigger("unfocus", this, this.key), 
            this.onPickerHide()) :void 0;
        }, n.prototype.startUndo = function() {
            return this.undoIgnore(), this._undoBatch = new Draw.MultiObjectUndoBatch({
                commandClass:Draw.SetPropertyCommand,
                property:this.key
            }), this._undoModels = [ this.model ], this.model instanceof Draw.PropertyProxy && (this._undoModels = this.model.objects), 
            this._undoBatch.setInitialState(this._undoModels);
        }, n.prototype.cancelUndo = function() {
            return this._undoBatch && this._undoBatch.undo(), this._undoBatch = null, this._undoModels = null;
        }, n.prototype.endUndo = function() {
            return this._undoBatch && (this._undoBatch.setEndState(this._undoModels), this._undoBatch.isNoop() || this.undoAdd(this._undoBatch)), 
            this._undoBatch = null, this._undoModels = null, this.undoResume();
        }, n.prototype.setupObjects = function() {
            return this.el.addClass("c-" + this.key);
        }, n.prototype.onPickerShow = function() {
            return this._success = !0, this.startUndo(), this.trigger("picker:show", this);
        }, n.prototype.onPickerCancel = function() {
            return this._success = !1, this.cancelUndo();
        }, n.prototype.onPickerHide = function() {
            return this.trigger("picker:hide", this, {
                success:this._success
            }), this.endUndo();
        }, n.prototype.prompt = function() {
            var t, e, i, n, o;
            return o = this, t = this.model.acceptGradient ? this.model.acceptGradient() :!0, 
            this.options.acceptGradient === !1 && (t = !1), e = this.model.get(this.options.key), 
            t || (e = Color.solid(e)), e instanceof paper.GradientColor && this.setValue(e.gradient), 
            this.trigger("focus", this, this.key), n = function() {
                return o.hasFocus() ? o.unfocus() :void 0;
            }, i = function(t, e) {
                var i;
                return t && o.model && (i = o.model.get(o.options.key), i instanceof paper.GradientColor && e instanceof paper.GradientColor && (o.update(e), 
                e = e.gradient), o.model.set(o.options.key, e), e = o.model.get(o.options.key), 
                Draw.G.document && e instanceof paper.GradientColor && Draw.G.document.setSelectedStop(e.gradient.stops[0])), 
                t ? void 0 :o.onPickerCancel();
            }, Draw.G.prompt.getColor(i, e, {
                acceptGradient:t,
                referenceEl:this.el,
                cancelCallback:n,
                my:this.options.my || "right center",
                at:this.options.at || "left center"
            });
        }, n.prototype.update = function(t) {
            var e, i;
            return t = Color.normalize(t), e = this.$(".color"), t ? (i = Draw.Export.CSS.toCssString(t), 
            e.removeClass("no-color"), i.indexOf("background") > -1 ? e.attr("style", i) :e.css({
                background:i
            })) :e.addClass("no-color");
        }, n;
    }(Draw.ObjectProperty), Draw.FillColorProperty = function(t) {
        function n() {
            return this.initialize = i(this.initialize, this), e = n.__super__.constructor.apply(this, arguments);
        }
        return o(n, t), n.prototype.initialize = function(t) {
            return t.acceptGradient = !1, n.__super__.initialize.call(this, t);
        }, n;
    }(Draw.ColorProperty);
}.call(this), function() {
    var t, e, i, n, o, r, s, a = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, l = {}.hasOwnProperty, c = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var n in e) l.call(e, n) && (t[n] = e[n]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    }, h = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    e = '<form class="text-pair-wrapper">\n  <input class="textbox one" type="text" name="one" />\n  <input class="textbox two" type="text" name="two" />\n  <input type="submit" class="submit"/>\n</form>', 
    Draw.SizeProperty = function(t) {
        function n() {
            return this.render = a(this.render, this), this.update = a(this.update, this), this.handleForm = a(this.handleForm, this), 
            i = n.__super__.constructor.apply(this, arguments);
        }
        return c(n, t), n.prototype.template = e, n.prototype.handleForm = function(t, e) {
            var i;
            return i = new paper.Size(parseInt(t.one), parseInt(t.two)), this.setValue(i), e ? this.blur() :void 0;
        }, n.prototype.update = function(t) {
            return this.form && this.one && this.two ? (this.one.val(t.width), this.two.val(t.height)) :void 0;
        }, n.prototype.render = function() {
            return n.__super__.render.call(this), this.one = this.form.find(".one"), this.two = this.form.find(".two"), 
            new Forms.IntBox({
                el:this.one,
                min:1
            }), new Forms.IntBox({
                el:this.two,
                min:1
            }), this.model && this.update(this.model.get(this.key)), this;
        }, n;
    }(Draw.TextProperty), Draw.PointProperty = function(t) {
        function i() {
            return this.render = a(this.render, this), this.update = a(this.update, this), this.handleForm = a(this.handleForm, this), 
            n = i.__super__.constructor.apply(this, arguments);
        }
        return c(i, t), i.prototype.template = e, i.prototype.handleForm = function(t, e) {
            var i;
            return i = new paper.Point(parseInt(t.one), parseInt(t.two)), this.setValue(i), 
            e ? this.blur() :void 0;
        }, i.prototype.update = function(t) {
            return this.form && this.one && this.two ? (this.one.val(t.x), this.two.val(t.y)) :void 0;
        }, i.prototype.render = function() {
            return i.__super__.render.call(this), this.one = this.form.find(".one"), this.two = this.form.find(".two"), 
            new Forms.IntBox({
                el:this.width,
                min:-1e4
            }), new Forms.IntBox({
                el:this.two,
                min:-1e4
            }), this.model && this.update(this.model.get(this.key)), this;
        }, i;
    }(Draw.TextProperty), t = function(t) {
        function e() {
            return this.triggerSnapped = a(this.triggerSnapped, this), o = e.__super__.constructor.apply(this, arguments);
        }
        return c(e, t), e.prototype.triggerSnapped = function(t, e) {
            return this.trigger.call(this, "snapped", t, e);
        }, e.prototype._bindToModel = function(t) {
            return e.__super__._bindToModel.call(this, t), t ? t.bind("change:snapped", this.triggerSnapped) :void 0;
        }, e.prototype._unbindFromModel = function(t) {
            return e.__super__._unbindFromModel.call(this, t), t ? t.unbind("change:snapped", this.triggerSnapped) :void 0;
        }, e;
    }(Draw.PointProperty), Draw.PositionProperty = function(e) {
        function i() {
            return this.onSnapped = a(this.onSnapped, this), r = i.__super__.constructor.apply(this, arguments);
        }
        return c(i, e), i.prototype.initialize = function(e) {
            return i.__super__.initialize.call(this, e), this.position = new t({
                key:e.key
            }), this.position.bind("snapped", this.onSnapped), this.registerProperty(this.position);
        }, i.prototype.supportsModel = function(t) {
            return t ? h.call(t.supportedProperties(), "position") >= 0 && !t.get("snapped") :!1;
        }, i.prototype.onSnapped = function(t) {
            return this.supportsModel(t.owner || t) ? this.show() :this.hide();
        }, i;
    }(Draw.ObjectPropertyContainer), Draw.ElementSizeProperty = function(t) {
        function e() {
            return this.onChangeAutoSizing = a(this.onChangeAutoSizing, this), this.onClickRemove = a(this.onClickRemove, this), 
            this.onClickBox = a(this.onClickBox, this), this.render = a(this.render, this), 
            this.update = a(this.update, this), this.handleForm = a(this.handleForm, this), 
            s = e.__super__.constructor.apply(this, arguments);
        }
        return c(e, t), e.prototype.template = '<form class="text-pair-wrapper">\n  <input class="textbox width" type="text" name="width"/>\n  <input class="textbox height" type="text" name="height"/>\n\n  <a class="remove-width" href="#" title="Remove width override" data-property="auto_width">\n    <i class="icon icon-remove-sign"></i>\n  </a>\n  <a class="remove-height" href="#" title="Remove height override" data-property="auto_height">\n    <i class="icon icon-remove-sign"></i>\n  </a>\n\n  <div class="cover-width" data-property="auto_width"></div>\n  <div class="cover-height" data-property="auto_height"></div>\n\n  <input type="submit" class="submit"/>\n</form>\n<p class="auto-message">Manually adjust element size with the \'auto\' links.</p>', 
        e.prototype.handleForm = function(t, e) {
            var i;
            return i = new paper.Size(parseInt(t.width), parseInt(t.height)), this.setValue(i), 
            e ? this.blur() :void 0;
        }, e.prototype.update = function(t, e) {
            return this.form && this.width && this.height && this.model ? (this._updateInput(this.width, t.width, "width", e), 
            this._updateInput(this.height, t.height, "height", e)) :void 0;
        }, e.prototype.render = function() {
            return this._shouldBeAutoCache = {}, e.__super__.render.call(this), this.width = this.form.find(".width").click(this.onClickBox), 
            this.height = this.form.find(".height").click(this.onClickBox), new Forms.IntBox({
                el:this.width,
                min:1
            }), new Forms.IntBox({
                el:this.height,
                min:1
            }), this.form.find(".cover-width").click(this.onClickBox), this.form.find(".cover-height").click(this.onClickBox), 
            this.form.find(".remove-width").click(this.onClickRemove), this.form.find(".remove-height").click(this.onClickRemove), 
            this.model && this.update(this.model.get(this.key)), this;
        }, e.prototype.onClickBox = function(t) {
            var e, i;
            return e = $(t.target), this.model && this.model.canEditAutoSizing() && (i = e.attr("data-property"), 
            i && this.setValue(!1, {}, i)), !1;
        }, e.prototype.onClickRemove = function(t) {
            var e, i;
            return e = $(t.target).parentsAndSelf("a"), this.model && this.model.canEditAutoSizing() && (i = e.attr("data-property"), 
            i && this.setValue(!0, {}, i)), !1;
        }, e.prototype.onChangeAutoSizing = function() {
            return this.update(this.model.get(this.options.key), !0);
        }, e.prototype._updateInput = function(t, e, i, n) {
            var o, r, s;
            return o = "auto_" + i, s = this.model.get("snapped") && this.model.get(o), r = n || this._shouldBeAutoCache[i] !== s, 
            s ? r && (t.val("auto"), this._updateInputBoxElements([ i ], !0, this.model.canEditAutoSizing())) :(t.val(e), 
            r && this._updateInputBoxElements([ i ], !1, this.model.canEditAutoSizing())), r && this._updateMessage(), 
            this._shouldBeAutoCache[i] = s;
        }, e.prototype._updateMessage = function() {
            return this.model.get("snapped") && this.model.canEditAutoSizing() && (this.model.get("auto_width") || this.model.get("auto_height")) ? this.$(".auto-message").show() :this.$(".auto-message").hide();
        }, e.prototype._updateInputBoxElements = function(t, e, i) {
            var n, o, r, s, a, l, c;
            for (i ? this.el.addClass("auto-size-editable") :this.el.removeClass("auto-size-editable"), 
            c = [], a = 0, l = t.length; l > a; a++) o = t[a], r = this[o], e ? (r[0].disabled = !0, 
            r.attr("title", "Click to explicitly set the size."), s = this.$(".remove-" + o).hide(), 
            c.push(n = this.$(".cover-" + o).show())) :(r[0].disabled = !1, r.removeAttr("title"), 
            this.model.get("snapped") && i ? this.$(".remove-" + o).show() :this.$(".remove-" + o).hide(), 
            c.push(this.$(".cover-" + o).hide()));
            return c;
        }, e.prototype._bindToModel = function(t) {
            return e.__super__._bindToModel.call(this, t), t ? (t.bind("change:auto_width", this.onChangeAutoSizing), 
            t.bind("change:auto_height", this.onChangeAutoSizing), t.bind("change:snapped", this.onChangeAutoSizing)) :void 0;
        }, e.prototype._unbindFromModel = function(t) {
            return e.__super__._unbindFromModel.call(this, t), t ? (t.unbind("change:auto_width", this.onChangeAutoSizing), 
            t.unbind("change:auto_height", this.onChangeAutoSizing), t.unbind("change:snapped", this.onChangeAutoSizing)) :void 0;
        }, e;
    }(Draw.TextProperty);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.DrawableInspector = function(i) {
        function o() {
            return this._bindToModel = e(this._bindToModel, this), this._selectedObject = e(this._selectedObject, this), 
            this.selectedObject = e(this.selectedObject, this), this.initialize = e(this.initialize, this), 
            t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.order = Draw.Properties.ORDER, o.prototype.NAME_MAP = {
            Oval:"Ellipse",
            DomOval:"Ellipse",
            EventedGroup:"Group",
            PlacedSymbol:"Element",
            TextArea:"Text Area",
            PropertyProxy:"Multiple Objects",
            DomImage:"Image",
            DomRectangle:"Rectangle",
            DomHeading:"Heading",
            DomBodyText:"Body Text"
        }, o.prototype.initialize = function(t) {
            return t.useWrapper = !0, t.wrapperClass = Draw.CustomPropertyContainer, o.__super__.initialize.call(this, t), 
            this._objProxy = new Draw.PropertyProxy(), this._initializeSections(), this._initializeStickyProperties();
        }, o.prototype.getPropertyClasses = function() {
            var t, e, i, n;
            if (t = o.__super__.getPropertyClasses.call(this), i = this._getObjectCustomProperties()) {
                t = _.clone(this.options.propertyClasses);
                for (e in i) n = i[e], t[e] = Draw.Properties.CLASSES[n];
            }
            return t;
        }, o.prototype.getPropertyOrder = function() {
            var t, e;
            return t = o.__super__.getPropertyOrder.call(this), e = this._getObjectCustomProperties(), 
            e && (t = _.toArray(t).concat(_.keys(e))), t;
        }, o.prototype.setObject = function(t) {
            var e;
            return o.__super__.setObject.call(this, t), e = t.NAME || t.TYPE, t.getGroup && (e = t.getGroup().NAME || t.getGroup().TYPE), 
            this.trigger("change:title", this.NAME_MAP[e] || e), this.effects.setObject(t), 
            this._hideEmptySections();
        }, o.prototype.selectedObject = function() {
            return this._selectDelay || (this._selectDelay = new Debouncer(50, this._selectedObject)), 
            this._selectDelay.update();
        }, o.prototype._selectedObject = function() {
            var t, e;
            return t = this.model.selectionModel.getSelected(), this.removePropertyViews(), 
            e = _.size(t), this._forcePropertySync(t), 1 === e ? (this.setObject(_.values(t)[0]), 
            this.trigger("show")) :e > 1 ? (this._objProxy.setObjects(t), this.setObject(this._objProxy), 
            this.trigger("show")) :this.trigger("hide");
        }, o.prototype._forcePropertySync = function(t) {
            var e, i, n, o, r;
            for (o = _.values(t), r = [], i = 0, n = o.length; n > i; i++) e = o[i], e.syncCssToProperties ? r.push(e.syncCssToProperties()) :r.push(void 0);
            return r;
        }, o.prototype._getObjectCustomProperties = function() {
            var t;
            return this._object.customProperties && (t = this._object.customProperties(), t && _.size(t)) ? t :null;
        }, o.prototype._bindToModel = function() {
            return this.model.selectionModel ? this.model.selectionModel.bind("change:selected", this.selectedObject) :void 0;
        }, o.prototype._hideEmptySections = function() {
            return this.$(".section-items").each(function() {
                var t, e;
                return e = $(this).parents(".section").show(), t = $(this).find(".visible"), t.length > 0 ? e.show() :e.hide();
            });
        }, o.prototype._initializeSections = function() {
            return this.$(".section-bar").toggler();
        }, o.prototype._initializeStickyProperties = function() {
            var t, e, i, n, o, r, s, a, l, c, h, u, d, p;
            return t = new Draw.ObjectActionsPane({
                model:this.document,
                el:this.$(".action-pane")
            }), this.addPropertyView("actions", t), this.effects = new Draw.EffectsPropertiesPane({
                model:this.document,
                el:this.$(".effects")
            }), this.addPropertyView("effects", this.effects), a = new Draw.PositionProperty({
                key:"position"
            }), this.addPropertyView("position", a), c = new Draw.ElementSizeProperty({
                key:"size"
            }), c = new Draw.ObjectPropertyContainer({
                key:"size",
                property:c
            }), this.addPropertyView("size", c), p = new Draw.IntProperty({
                key:"width",
                min:1
            }), p = new Draw.ObjectPropertyContainer({
                key:"width",
                property:p
            }), this.addPropertyView("width", p), this.$(".dimensions").append(a.el).append(c.el).append(p.el), 
            e = new Draw.BackgroundProperty({
                document:this.document
            }), this.addPropertyView("background", e), i = new Draw.BorderProperty(), this.addPropertyView("border", i), 
            l = new Draw.BorderRadiusProperty(), this.addPropertyView("roundness", l), r = new Draw.OpacityProperty(), 
            this.addPropertyView("opacity", r), this.$(".section-box .section-items").append(e.el).append(i.el).append(l.el).append(r.el), 
            s = new Draw.PaddingProperty(), this.addPropertyView("padding", s), o = new Draw.MarginProperty(), 
            this.addPropertyView("margin", o), this.$(".section-positioning .section-items").append(s.el).append(o.el), 
            h = new Draw.FontAndSizeProperty(), this.addPropertyView("text", h), d = new Draw.TextStyleProperty(), 
            this.addPropertyView("textstyle", d), u = new Draw.TextColorProperty(), this.addPropertyView("textcolor", u), 
            n = new Draw.LineHeightProperty(), this.addPropertyView("line_height", n), this.$(".section-text .section-items").append(h.el).append(d.el).append(u.el).append(n.el);
        }, o;
    }(Draw.ObjectInspector);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.EffectsPropertiesPane = function(i) {
        function o() {
            return this.updateEffectColorViews = e(this.updateEffectColorViews, this), this.onRemove = e(this.onRemove, this), 
            this.onAdd = e(this.onAdd, this), this.onInsert = e(this.onInsert, this), this.onChange = e(this.onChange, this), 
            this.onReset = e(this.onReset, this), this.onClickEffect = e(this.onClickEffect, this), 
            this.onClickColor = e(this.onClickColor, this), this.onClickRemove = e(this.onClickRemove, this), 
            this.onClickVisibility = e(this.onClickVisibility, this), this.onSort = e(this.onSort, this), 
            this.onUpdateObject = e(this.onUpdateObject, this), this.updateObject = e(this.updateObject, this), 
            this.resetEffects = e(this.resetEffects, this), this.setObject = e(this.setObject, this), 
            this.hide = e(this.hide, this), this.show = e(this.show, this), this.initialize = e(this.initialize, this), 
            t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.propertyTemplate = "#effects-property-template", o.prototype.template = "#effects-properties-template", 
        o.prototype.effectsSelector = ".effect-list", o.prototype.shadowDisplaySelector = ".shadow-dot", 
        o.prototype.events = {
            "click .visibility":"onClickVisibility",
            "click .remove":"onClickRemove",
            "click .shadow-dot":"onClickColor",
            click:"onClickEffect",
            "click .add":"onClickAdd",
            "focus .name input":"setFocus",
            "blur .name input":"resetFocus"
        }, o.prototype.initialize = function(t) {
            return o.__super__.initialize.call(this, t), this._bindEvents(), this.render(), 
            this._createEffects(), this.effectUpdateDelay = new Debouncer(1e3, this.updateEffectColorViews), 
            this.objectUpdateDelay = new Debouncer(10, this.updateObject), this.effectProperties = {}, 
            this.colorProperty = new Draw.ColorProperty({
                key:"color",
                model:null,
                value:null
            }), this.colorProperty.bind("focus", this.setFocus), this.colorProperty.bind("unfocus", this.resetFocus);
        }, o.prototype.render = function() {
            return o.__super__.render.call(this), this.$(this.effectsSelector).sortable({
                stop:this.onSort
            }), this.$(this.effectsSelector).disableSelection(), this.newShadowPane = new Draw.NewShadowPane({
                model:this.document
            }), this.newShadowFlyout = new Draw.Flyout({
                model:this.document,
                pane:this.newShadowPane,
                my:"bottom center",
                at:"top center"
            }), this.newShadowFlyout.setTarget($(".add").parent());
        }, o.prototype.show = function() {
            return o.__super__.show.call(this), this.$(".action-pane").addClass("visible");
        }, o.prototype.hide = function() {
            return o.__super__.hide.call(this), this.$(".action-pane").removeClass("visible");
        }, o.prototype.doAccept = function() {
            return this.hasFocus() ? (this.$(".name form").submit(), !0) :void 0;
        }, o.prototype.setObject = function(t) {
            var e;
            return this._unbindObjectEvents(this.object), this.object = t, e = [], t && t.supportedEffects && (e = t.supportedEffects()), 
            this.object && e.length ? (this._bindObjectEvents(t), this.resetEffects(), this.show()) :(this.removeEffectViews(), 
            this.hide());
        }, o.prototype.resetEffects = function() {
            var t, e, i, n, o, r;
            if (this.object) {
                for (n = this.object.supportedEffects(), i = [], o = 0, r = n.length; r > o; o++) t = n[o], 
                e = Draw.Shadow.fromCss(this.object.get(t), t.replace("_shadow", "")), i = i.concat(e);
                return this.effects.reset(i);
            }
        }, o.prototype.updateObject = function(t) {
            var e;
            return null == t && (t = {
                undo:!1
            }), this.object ? (e = this.effects.toCss(), e["text-shadow"] && (e.text_shadow = e["text-shadow"]), 
            delete e["text-shadow"], e["box-shadow"] && (e.box_shadow = e["box-shadow"]), delete e["box-shadow"], 
            t.undo && this._startUndo(), this.object.set(e, {
                originator:"effectsPanel"
            }), t.undo ? this._flushUndo() :void 0) :void 0;
        }, o.prototype.onUpdateObject = function(t, e, i) {
            return null == i && (i = {}), "effectsPanel" !== i.originator ? this.resetEffects() :void 0;
        }, o.prototype.onClickAdd = function() {
            var t = this;
            return this.object ? (this._startUndo(), this.newShadowPane.prompt(this.object, {
                effects:this.effects,
                callback:function(e) {
                    return "primary" === e ? t._flushUndo() :t._cancelUndo();
                }
            }), !1) :!1;
        }, o.prototype.onSort = function(t, e) {
            var i, n, o, r, s;
            if (this.object && (o = e.item[0].id, r = function() {
                var t, e, n, o;
                for (n = this.$(this.effectsSelector).children(), o = [], t = 0, e = n.length; e > t; t++) i = n[t], 
                o.push(i.id);
                return o;
            }.call(this), s = _.indexOf(r, o), n = this.effects.get(e.item[0].id), n && s > -1)) return this.effects.insert(n, s);
        }, o.prototype.onClickVisibility = function(t) {
            var e;
            return e = this._getEffect(t), e && e.setVisible(!e.getVisible(), {
                delay:!1
            }), !1;
        }, o.prototype.onClickRemove = function(t) {
            var e;
            return e = this._getEffect(t), e && this.effects.remove(e), !1;
        }, o.prototype.onClickColor = function(t) {
            var e;
            return e = this._getEffect(t), this.colorProperty.el = $(t.target), this.colorProperty.setModel(e), 
            this.colorProperty.focus(), !1;
        }, o.prototype.onClickEffect = function(t) {
            var e, i, n = this;
            return i = $(t.target), i.is(".effect, .name") ? (e = this._getEffect(t), Draw.G && Draw.G.prompt ? (this._startUndo(), 
            Draw.G.prompt.promptShadow(e, {
                callback:function(t) {
                    return "primary" === t ? n._flushUndo() :n._cancelUndo();
                }
            })) :void 0) :void 0;
        }, o.prototype.onReset = function() {
            return this.removeEffectViews(), this.object ? this.generateEffectViews(this.object) :void 0;
        }, o.prototype.onChange = function(t, e) {
            return this.updateEffectView(t, this.$("#" + t.id)), this.effectUpdateDelay.update(), 
            e && e.delay === !1 ? this.updateObject({
                undo:!0
            }) :this.objectUpdateDelay.update();
        }, o.prototype.onInsert = function(t, e, i) {
            var n, o, r, s;
            return r = this.findEffectView(t), n = this.$(this.effectsSelector), o = n.find(".effect"), 
            i.index === o.length ? n.append(r) :(s = o.eq(i.index), s[0].id !== r[0].id && r.insertBefore(s)), 
            this.updateObject({
                undo:"newshadow" !== i.originator
            });
        }, o.prototype.onAdd = function(t) {
            var e;
            if (this.object) return e = this.findEffectView(t), this.$(this.effectsSelector).append(e), 
            this.updateObject({
                undo:!1
            });
        }, o.prototype.onRemove = function(t) {
            return this.object ? (this.$("#" + t.id).remove(), this.updateObject({
                undo:!0
            })) :void 0;
        }, o.prototype.updateEffectView = function(t, e) {
            var i, n, o;
            return i = "visible-" + t.getVisible(), n = "visible-" + !t.getVisible(), o = e.find(".visibility"), 
            o.addClass(i), o.removeClass(n), e.find(".name").text(t.getName());
        }, o.prototype.updateEffectColorView = function(t, e) {
            var i, n;
            if (t && e) return i = t.getFillColor && Color.NORMALIZE_FILL(e.getColor()) || new paper.RGBColor("#229DDF"), 
            n = this.$("#" + e.id + " " + this.shadowDisplaySelector), n.css({
                background:i && i.toCssString() || "#000"
            });
        }, o.prototype.updateEffectColorViews = function() {
            var t = this;
            if (this.object) return this.effects.each(function(e) {
                return t.updateEffectColorView(t.object, e);
            });
        }, o.prototype.findEffectView = function(t) {
            var e, i;
            return i = t.id, e = this.$("#" + i), e.length ? e :this.generateEffectView(t);
        }, o.prototype.generateEffectView = function(t) {
            var e, i, n, o, r;
            return e = t.get(), e.type = t.TYPE, n = $($.parseHTML(this.renderTemplate(this.propertyTemplate, e))), 
            n[0] && n.attr("id", t.id), this.updateEffectView(t, n), r = function() {
                var t;
                return t = n.find(".name"), t.css({
                    "white-space":"auto"
                }), n.removeClass("editing"), t.css({
                    "white-space":"nowrap"
                });
            }, o = {
                event:"click",
                type:"text",
                submit:"",
                onedit:function() {
                    return n.addClass("editing");
                },
                onreset:r,
                onsubmit:r,
                onerror:r
            }, i = function(e) {
                return t.setName(e), e;
            }, n;
        }, o.prototype.generateEffectViews = function() {
            var t, e = this;
            return t = this.$(this.effectsSelector), this.effects.each(function(i) {
                return t.append(e.generateEffectView(i));
            }), this.updateEffectColorViews();
        }, o.prototype.removeEffectViews = function() {
            return this.$(this.effectsSelector).html("");
        }, o.prototype._createEffects = function() {
            return this.effects = new Draw.EffectCollection(), this.effects.bind("add", this.onAdd), 
            this.effects.bind("insert", this.onInsert), this.effects.bind("remove", this.onRemove), 
            this.effects.bind("change", this.onChange), this.effects.bind("reset", this.onReset);
        }, o.prototype._bindEvents = function() {
            var t = this;
            return this.bind("hide", function() {
                return t.el.hide();
            }), this.bind("show", function() {
                return t.el.show();
            });
        }, o.prototype._bindObjectEvents = function(t) {
            return t ? (t.bind("change:box_shadow", this.onUpdateObject), t.bind("change:text_shadow", this.onUpdateObject)) :void 0;
        }, o.prototype._unbindObjectEvents = function(t) {
            return t ? (t.unbind("change:box_shadow", this.onUpdateObject), t.unbind("change:text_shadow", this.onUpdateObject)) :void 0;
        }, o.prototype._startUndo = function() {
            return this.batch ? this.batch :(this.document.undoIgnore(), this.batch = new Draw.MultiPropertyUndoBatch(), 
            this.batch.setObjects([ this.object ]), this.batch);
        }, o.prototype._flushUndo = function() {
            return this.batch ? (this.batch.finish(), this.batch.isNoop() || this.document.undoAdd(this.batch), 
            this.document.undoResume(), this.batch = null) :void 0;
        }, o.prototype._cancelUndo = function() {
            return this.batch ? (this.batch.finish(), this.batch.undo(), this.document.undoResume(), 
            this.batch = null) :void 0;
        }, o.prototype._getEffect = function(t) {
            var e, i, n;
            return this.object ? (n = $(t.target), e = n, n.is(".effect") || (e = n.parents(".effect")), 
            i = e[0].id, this.effects.get(i)) :null;
        }, o;
    }(Draw.EmbedPane);
}.call(this), function() {
    var t, e, i, n, o, r, s, a, l, c, h, u = {}.hasOwnProperty, d = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var n in e) u.call(e, n) && (t[n] = e[n]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    }, p = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, f = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    t = function(t) {
        function e() {
            return n = e.__super__.constructor.apply(this, arguments);
        }
        return d(e, t), e.prototype.PREFIX = "([0-9]+)", e.prototype.SUFFIX = "[pxtem]*", 
        e;
    }(Forms.NumberSuffixBox), e = function(e) {
        function i() {
            return this.render = p(this.render, this), o = i.__super__.constructor.apply(this, arguments);
        }
        return d(i, e), i.prototype.propParams = {
            maxDigits:7,
            min:0,
            max:5e5,
            suffixOptions:{
                px:{
                    format:"integer",
                    increment:1,
                    largeIncrement:10
                },
                em:{
                    format:"integer",
                    increment:1,
                    largeIncrement:10
                },
                pt:{
                    format:"integer",
                    increment:1,
                    largeIncrement:10
                }
            }
        }, i.prototype.render = function() {
            var e;
            return i.__super__.render.call(this), e = _.clone(this.propParams), e.el = this.form.find(".textbox"), 
            new t(e), this;
        }, i;
    }(Draw.TextProperty), Draw.FontAndSizeProperty = function(t) {
        function i() {
            return this.render = p(this.render, this), r = i.__super__.constructor.apply(this, arguments);
        }
        return d(i, t), i.prototype.tagName = "div", i.prototype.className = "font-family-property", 
        i.prototype.template = "", i.prototype.initialize = function(t) {
            return i.__super__.initialize.call(this, t), this.font = new Draw.FontProperty({
                key:"font_face"
            }), this.size = new e({
                key:"font_size"
            }), this.alignment = new Draw.LinkOptionsProperty({
                key:"alignment",
                optionPairs:[ [ "left", '<i class="icon-align-left icon-white"></i>' ], [ "center", '<i class="icon-align-center icon-white"></i>' ], [ "right", '<i class="icon-align-right icon-white"></i>' ] ]
            }), this.registerProperty(this.font), this.registerProperty(this.size), this.registerProperty(this.alignment);
        }, i.prototype.render = function() {
            return this.el.append(this.font.render().el), this.el.append(this.size.render().el), 
            this.el.append(this.alignment.render().el), this;
        }, i.prototype.supportsModel = function(t) {
            return t ? f.call(t.supportedProperties(), "font_face") >= 0 :!1;
        }, i;
    }(Draw.ObjectPropertyContainer), Draw.TextStyleProperty = function(t) {
        function e() {
            return this.render = p(this.render, this), s = e.__super__.constructor.apply(this, arguments);
        }
        return d(e, t), e.prototype.tagName = "div", e.prototype.className = "text-style-property", 
        e.prototype.template = "", e.prototype.initialize = function(t) {
            return e.__super__.initialize.call(this, t), this.weight = new Draw.OptionsProperty({
                key:"font_weight",
                optionPairs:[ [ "normal", "Normal" ], [ "bold", "Bold" ], [ "100", "100" ], [ "200", "200" ], [ "300", "300" ], [ "400", "400" ], [ "500", "500" ], [ "600", "600" ], [ "700", "700" ], [ "800", "800" ], [ "900", "900" ] ]
            }), this.italic = new Draw.BoolProperty({
                key:"is_italic",
                text:"I"
            }), this.underline = new Draw.BoolProperty({
                key:"is_underlined",
                text:"U"
            }), this.strike = new Draw.BoolProperty({
                key:"is_strikethrough",
                text:"S"
            }), this.registerProperty(this.weight), this.registerProperty(this.italic), this.registerProperty(this.underline);
        }, e.prototype.render = function() {
            return this.el.append(this.weight.render().el), this.el.append(this.italic.render().el), 
            this.el.append(this.underline.render().el), this;
        }, e.prototype.supportsModel = function(t) {
            return t ? f.call(t.supportedProperties(), "font_weight") >= 0 :!1;
        }, e;
    }(Draw.ObjectPropertyContainer), Draw.TextColorProperty = function(t) {
        function e() {
            return this.render = p(this.render, this), a = e.__super__.constructor.apply(this, arguments);
        }
        return d(e, t), e.prototype.tagName = "div", e.prototype.className = "text-color-property", 
        e.prototype.template = '<label class="top-label">Color</label>\n<div class="object-wrapper"></div>', 
        e.prototype.initialize = function(t) {
            return e.__super__.initialize.call(this, t), this.color = new Draw.ColorProperty({
                key:"text_color"
            }), this.registerProperty(this.color);
        }, e.prototype.render = function() {
            return e.__super__.render.call(this), this.$(".object-wrapper").append(this.color.render().el), 
            this;
        }, e.prototype.supportsModel = function(t) {
            return t ? f.call(t.supportedProperties(), "text_color") >= 0 :!1;
        }, e;
    }(Draw.ObjectPropertyContainer), i = function(t) {
        function e() {
            return this.render = p(this.render, this), l = e.__super__.constructor.apply(this, arguments);
        }
        return d(e, t), e.prototype.render = function() {
            return e.__super__.render.call(this), new Forms.NumberSuffixBox({
                el:this.form.find(".textbox")
            }), this;
        }, e;
    }(Draw.TextProperty), Draw.LineHeightProperty = function(t) {
        function e() {
            return this.render = p(this.render, this), c = e.__super__.constructor.apply(this, arguments);
        }
        return d(e, t), e.prototype.tagName = "div", e.prototype.className = "line-height-property", 
        e.prototype.template = '<label class="top-label">Line Height</label>\n<div class="object-wrapper"></div>', 
        e.prototype.initialize = function(t) {
            return e.__super__.initialize.call(this, t), this.lineheight = new i({
                key:"line_height"
            }), this.registerProperty(this.lineheight);
        }, e.prototype.render = function() {
            return e.__super__.render.call(this), this.$(".object-wrapper").append(this.lineheight.render().el), 
            this;
        }, e.prototype.supportsModel = function(t) {
            return t ? f.call(t.supportedProperties(), "line_height") >= 0 :!1;
        }, e;
    }(Draw.ObjectPropertyContainer), Draw.FontProperty = function(t) {
        function e() {
            return this.update = p(this.update, this), this.prompt = p(this.prompt, this), h = e.__super__.constructor.apply(this, arguments);
        }
        return d(e, t), e.prototype.tagName = "div", e.prototype.className = "font-property", 
        e.prototype.template = "#dropdown-template", e.prototype.events = {
            "click .dropdown-box":"prompt"
        }, e.prototype.prompt = function() {
            var t, e = this;
            return t = function(t, i) {
                return t && e.model ? (e.startUndo(), e.setValue(i), e.endUndo()) :void 0;
            }, Draw.G.prompt.getFont(t, this.model.get(this.options.key), this.el);
        }, e.prototype.update = function(t) {
            var e;
            return e = this.$(".dropdown-current"), t && (t = Draw.G.fonts.getFamily(t)), t ? e.text(t.get("description")) :void 0;
        }, e.prototype.render = function() {
            return e.__super__.render.call(this), this.el.addClass("dont-hide-flyout"), this;
        }, e;
    }(Draw.ObjectProperty);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    }, o = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.MarginProperty = function(i) {
        function r() {
            return this.onChangePull = e(this.onChangePull, this), this.onChangeSnapped = e(this.onChangeSnapped, this), 
            this.checkVisibility = e(this.checkVisibility, this), this.render = e(this.render, this), 
            t = r.__super__.constructor.apply(this, arguments);
        }
        return n(r, i), r.prototype.tagName = "div", r.prototype.className = "margin-property", 
        r.prototype.template = '<label class="top-label">Margin\n  <a href="http://help.easel.io/guide/editor-reference#margin-control" class="help-icon" target="_blank" title="More information">\n    <i class="icon icon-question-sign"></i>\n  </a>\n</label>\n<div class="object-wrapper"></div>', 
        r.prototype.ALL_KEYS = [ "margin_top", "margin_right", "margin_bottom", "margin_left" ], 
        r.prototype.TOP_AND_BOTTOM_KEYS = [ "margin_top", "margin_bottom" ], r.prototype.initialize = function(t) {
            return r.__super__.initialize.call(this, t), this.ag = new Draw.AggregateProperty({
                keys:this.ALL_KEYS
            }), this.top = new Draw.IntToTextProperty({
                key:"margin_top"
            }), this.right = new Draw.IntToTextProperty({
                key:"margin_right"
            }), this.bottom = new Draw.IntToTextProperty({
                key:"margin_bottom"
            }), this.left = new Draw.IntToTextProperty({
                key:"margin_left"
            }), this.registerProperty(this.ag), this.registerProperty(this.top), this.registerProperty(this.left), 
            this.registerProperty(this.right), this.registerProperty(this.bottom);
        }, r.prototype.render = function() {
            return r.__super__.render.call(this), this.$(".object-wrapper").append(this.ag.render().el).append(this.top.render().el).append(this.left.render().el).append(this.right.render().el).append(this.bottom.render().el), 
            this.createTooltip(this.$(".help-icon")), this;
        }, r.prototype.checkVisibility = function(t) {
            var e;
            return e = r.__super__.checkVisibility.call(this, t), e && (o.call(t.supportedProperties(), "margin_left") >= 0 ? (this.el.removeClass("top-and-bottom"), 
            this.ag.setKeys(this.ALL_KEYS), this.left.el.show(), this.right.el.show()) :(this.el.addClass("top-and-bottom"), 
            this.ag.setKeys(this.TOP_AND_BOTTOM_KEYS), this.left.el.hide(), this.right.el.hide())), 
            e;
        }, r.prototype.supportsModel = function(t) {
            return t ? t.get("snapped") && o.call(t.supportedProperties(), "margin_top") >= 0 :!1;
        }, r.prototype.onChangeSnapped = function() {
            return this.checkVisibility(this.model);
        }, r.prototype.onChangePull = function() {
            return this.checkVisibility(this.model), print(this.model.get("margin_left"), this.model.get("margin_right")), 
            this.left.update(this.model.get("margin_left")), this.right.update(this.model.get("margin_right"));
        }, r.prototype._bindToModel = function(t) {
            return t ? (t.bind("change:snapped", this.onChangeSnapped), t.bind("change:pull", this.onChangePull)) :void 0;
        }, r.prototype._unbindFromModel = function(t) {
            return t ? (t.unbind("change:snapped", this.onChangeSnapped), t.unbind("change:pull", this.onChangePull)) :void 0;
        }, r;
    }(Draw.ObjectPropertyContainer);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.ObjectActionsPane = function(i) {
        function o() {
            return this._updateLockAction = e(this._updateLockAction, this), this._updateLinkAction = e(this._updateLinkAction, this), 
            this._updateResetAction = e(this._updateResetAction, this), this.setModel = e(this.setModel, this), 
            this.initialize = e(this.initialize, this), t = o.__super__.constructor.apply(this, arguments);
        }
        var r, s;
        return n(o, i), o.prototype.template = "#object-actions-template", o.prototype.events = {
            "click .action":"onClickAction"
        }, o.prototype.ALL_ACTIONS = [ "lock", "symbol", "group", "ungroup", "break", "duplicate", "export", "remove", "reset" ], 
        r = [ "lock", "duplicate", "export", "remove", "reset" ], s = [ "lock", "duplicate", "export", "remove", "reset" ], 
        o.prototype.ACTION_MAP = {
            Oval:s,
            TextArea:s,
            Text:s,
            DomRectangle:s,
            Path:s,
            EventedGroup:[ "lock", "ungroup", "duplicate", "export", "remove" ],
            PlacedSymbol:[ "lock", "break", "duplicate", "export", "remove", "reset" ],
            PropertyProxy:[ "lock", "group", "duplicate", "export", "remove" ]
        }, o.prototype.ACTION_TO_FN = {
            symbol:"smartGroup",
            group:"group",
            ungroup:"ungroup",
            "break":"ungroup",
            duplicate:"duplicateSelected",
            "export":"exportCode",
            remove:"removeSelected",
            link:"linkToDocument",
            lock:"lockSelected",
            reset:"resetSelectedToBaseStyles"
        }, o.prototype.initialize = function(t) {
            return o.__super__.initialize.call(this, t), this.render(), this.document = this.model, 
            this.model = null;
        }, o.prototype.doAction = function(t) {
            return this.document[this.ACTION_TO_FN[t]]("down");
        }, o.prototype.render = function() {
            return o.__super__.render.call(this), this.$(".action").qtip({
                show:{
                    delay:1e3
                },
                style:{
                    classes:"qtip-easel",
                    tip:{
                        width:10,
                        height:4
                    }
                },
                position:{
                    my:"top center",
                    at:"bottom center",
                    viewport:$(window),
                    adjust:{
                        y:10,
                        method:"shift"
                    }
                }
            }), this.el.hide(), this;
        }, o.prototype.setModel = function(t) {
            var e, i, n, o;
            for (this._unbindModel(this.model), this._bindModel(t), this.model = t, t && this.el.show(), 
            t || this.el.hide(), t instanceof Draw.PropertyProxy ? i = this.ACTION_MAP.PropertyProxy :(i = this.ACTION_MAP[t.TYPE] || r, 
            i = [ "link" ].concat(i)), this.$(".action").hide(), n = 0, o = i.length; o > n; n++) e = i[n], 
            e = this.$(".action." + e).show();
            return this._updateLinkAction(t), this._updateLockAction(t), this._updateResetAction(t);
        }, o.prototype.onClickAction = function(t) {
            var e, i;
            return i = $(t.target), i = i.is(".action") && i || i.parents(".action"), i.hasClass("disabled") || (e = i.attr("data-action"), 
            this.doAction(e)), !1;
        }, o.prototype._bindModel = function(t) {
            return t ? (t.bind("change:override", this._updateResetAction), t.bind("change:is_locked", this._updateLockAction), 
            t.bind("change:href", this._updateLinkAction)) :void 0;
        }, o.prototype._unbindModel = function(t) {
            return t ? (t.unbind("change:override", this._updateResetAction), t.unbind("change:is_locked", this._updateLockAction), 
            t.unbind("change:href", this._updateLinkAction)) :void 0;
        }, o.prototype._updateResetAction = function(t) {
            var e, i;
            return t = t.owner || t, i = this.$(".action.reset"), t.options && t.options.override_styles ? (e = t.get("override"), 
            e && e.length ? (i.removeClass("disabled"), i.qtip("enable"), i.qtip("option", "hide.delay", 300), 
            i.qtip("option", "hide.fixed", !0), i.qtip("option", "content.text", 'Reset element to base styles.<br/>\n<a target="_blank" href="http://easelapp.uservoice.com/knowledgebase/articles/162789-using-the-reset-styles-button">read more here</a>')) :(i.qtip("hide"), 
            i.addClass("disabled"), i.qtip("disable"))) :i.hide();
        }, o.prototype._updateLinkAction = function(t) {
            var e, i, n, o;
            if (t) return n = this.$(".action.link").removeClass("selected"), i = t.get("href"), 
            i ? (o = this.document.getEaselProject(), o && (e = o.documents.get(i)), e && n.attr("title", "Linked to " + e.get("name")), 
            n.addClass("selected")) :n.attr("title", "Link to a document");
        }, o.prototype._updateLockAction = function(t) {
            var e, i, n, o;
            if (t) return t = t.owner || t, i = this.$(".action.lock"), e = this.$(".action.lock .icon"), 
            n = t.get("is_locked"), t.isParentLocked && (o = t.isParentLocked()), n || o ? (e.removeClass("icon-unlock").addClass("icon-lock"), 
            o ? (i.addClass("disabled"), i.attr("title", "Parent is locked")) :(i.removeClass("disabled"), 
            i.addClass("selected"), i.attr("title", "Unlock"))) :(i.removeClass("disabled"), 
            i.attr("title", "Lock"), i.removeClass("selected"), e.removeClass("icon-lock").addClass("icon-unlock"));
        }, o;
    }(Draw.EmbedPane);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    }, o = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.OpacityProperty = function(i) {
        function r() {
            return this.render = e(this.render, this), t = r.__super__.constructor.apply(this, arguments);
        }
        return n(r, i), r.prototype.tagName = "div", r.prototype.className = "opacity-property single-editor-property", 
        r.prototype.template = '<label class="top-label">Opacity</label>\n<div class="object-wrapper"></div>', 
        r.prototype.initialize = function(t) {
            return r.__super__.initialize.call(this, t), this.opacity = new Draw.TinyDecimalProperty({
                key:"opacity"
            }), this.registerProperty(this.opacity);
        }, r.prototype.render = function() {
            return r.__super__.render.call(this), this.$(".object-wrapper").append(this.opacity.render().el), 
            this;
        }, r.prototype.supportsModel = function(t) {
            return t ? o.call(t.supportedProperties(), "opacity") >= 0 :!1;
        }, r;
    }(Draw.ObjectPropertyContainer);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    }, o = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.PaddingProperty = function(i) {
        function r() {
            return this.render = e(this.render, this), t = r.__super__.constructor.apply(this, arguments);
        }
        return n(r, i), r.prototype.tagName = "div", r.prototype.className = "padding-property", 
        r.prototype.template = '<label class="top-label">Padding\n  <a href="http://help.easel.io/guide/editor-reference#padding-control" class="help-icon" target="_blank" title="More information">\n    <i class="icon icon-question-sign"></i>\n  </a>\n</label>\n<div class="object-wrapper"></div>', 
        r.prototype.initialize = function(t) {
            return r.__super__.initialize.call(this, t), this.ag = new Draw.AggregateProperty({
                keys:[ "padding_top", "padding_right", "padding_bottom", "padding_left" ]
            }), this.top = new Draw.IntToTextProperty({
                key:"padding_top"
            }), this.right = new Draw.IntToTextProperty({
                key:"padding_right"
            }), this.bottom = new Draw.IntToTextProperty({
                key:"padding_bottom"
            }), this.left = new Draw.IntToTextProperty({
                key:"padding_left"
            }), this.registerProperty(this.ag), this.registerProperty(this.top), this.registerProperty(this.left), 
            this.registerProperty(this.right), this.registerProperty(this.bottom);
        }, r.prototype.render = function() {
            return r.__super__.render.call(this), this.$(".object-wrapper").append(this.ag.render().el).append(this.top.render().el).append(this.left.render().el).append(this.right.render().el).append(this.bottom.render().el), 
            this.createTooltip(this.$(".help-icon")), this;
        }, r.prototype.supportsModel = function(t) {
            return t ? o.call(t.supportedProperties(), "padding_left") >= 0 :!1;
        }, r;
    }(Draw.ObjectPropertyContainer);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.ShadowPropertiesPane = function(i) {
        function o() {
            return this.onHide = e(this.onHide, this), this.onShow = e(this.onShow, this), this.prompt = e(this.prompt, this), 
            this.initialize = e(this.initialize, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.template = "#shadow-properties-template", o.prototype.initialize = function(t) {
            return o.__super__.initialize.call(this, t), this.render();
        }, o.prototype.render = function() {
            return o.__super__.render.call(this), Draw.Properties.KEY_NAMES.distance = "Offset", 
            this.properties = new Draw.ObjectInspector({
                el:this.$(".shadow-props"),
                model:null,
                document:this.document,
                order:[ "color", "blur", "distance", "angle" ],
                undo:!1,
                propertyClasses:{
                    blur:Draw.IntProperty,
                    distance:Draw.DecimalProperty,
                    angle:Draw.AngleProperty,
                    color:Draw.FillColorProperty
                }
            });
        }, o.prototype.getTool = function() {
            return this.properties.getTool();
        }, o.prototype.prompt = function(t, e) {
            return this.shadow && t.id === this.shadow.id ? (this.trigger("hide"), void 0) :(this._cancelProps = t.get(), 
            this.promptOptions = e, this.shadow = t, this.properties.setObject(t), this.hasFocus() ? void 0 :this.trigger("show"));
        }, o.prototype.doAccept = function() {
            return this.properties.doAccept(!0);
        }, o.prototype.doPrimaryAction = function() {
            return this.promptOptions && this.promptOptions.callback ? this.promptOptions.callback("primary", this.shadow, this.promptOptions) :void 0;
        }, o.prototype.doSecondaryAction = function() {
            return this.properties.doSecondaryAction(), this.shadow.set(this._cancelProps), 
            this.hide(), this.promptOptions && this.promptOptions.callback ? this.promptOptions.callback("secondary", this.shadow, this.promptOptions) :void 0;
        }, o.prototype.onDocClick = function(t) {
            var e;
            return e = $(t.target), e.parentsAndSelf(".effect").length ? !1 :e.parentsAndSelf(".color-dialog").length ? !1 :!0;
        }, o.prototype.onShow = function() {
            return this.setFocus();
        }, o.prototype.onHide = function() {
            return this.shadow = null, this.resetFocus();
        }, o;
    }(Draw.EmbedPane);
}.call(this), function() {
    window.ViewUtil = {
        Point:paper.Point,
        Matrix:paper.Matrix,
        clamp:_.clamp,
        XY:window.ActiveXObject ? function(t) {
            return {
                x:t.clientX + document.documentElement.scrollLeft,
                y:t.clientY + document.documentElement.scrollTop
            };
        } :function(t) {
            return {
                x:t.pageX,
                y:t.pageY
            };
        },
        XYInObject:function(t, e) {
            var i = e.offset();
            return {
                x:t.clientX - i.left,
                y:t.clientY - i.top
            };
        },
        abPos:function(t) {
            t = "object" == typeof t ? t :$(t);
            for (var e = {
                x:0,
                y:0
            }; null != t; ) e.x += t.offsetLeft - t.scrollLeft, e.y += t.offsetTop - t.scrollTop, 
            t = t.offsetParent;
            return e;
        },
        dragElement:function(t) {
            function e(e, i) {
                "undefined" == typeof i && (i = "move");
                var n = ViewUtil.XY(e);
                switch (t.type) {
                  case "difference":
                    t.callback({
                        x:n.x + r - c,
                        y:n.y + s - h
                    }, i);
                    break;

                  case "relative":
                    t.callback({
                        x:n.x - r,
                        y:n.y - s
                    }, i);
                    break;

                  default:
                    t.callback({
                        x:n.x,
                        y:n.y
                    }, i);
                }
            }
            function i(t) {
                window.removeEventListener("mousemove", e, !1), window.removeEventListener("mouseup", i, !1), 
                e(t, "up");
            }
            var n = t.element, o = ViewUtil.abPos(n), r = o.x, s = o.y, a = t.event, l = ViewUtil.XY(a), c = l.x, h = l.y;
            window.addEventListener("mousemove", e, !1), window.addEventListener("mouseup", i, !1), 
            e(a, "down");
        }
    };
}(), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.AnglePicker = function(i) {
        function o() {
            return this.onDrag = e(this.onDrag, this), this.render = e(this.render, this), this.initialize = e(this.initialize, this), 
            t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.tagName = "div", o.prototype.template = "<canvas></canvas>", 
        o.prototype.initialize = function(t) {
            var e, i;
            return e = {
                size:75,
                pointerSize:10,
                callback:function() {},
                parent:document.body,
                snapTolerance:4
            }, o.__super__.initialize.call(this, _.extend({}, e, t)), this.angle = 0, this._refpoint = new ViewUtil.Point(this.options.size / 2, this.options.pointerSize / 2), 
            this._center = new ViewUtil.Point(this.options.size / 2, this.options.size / 2), 
            i = 1, this._points = [ new ViewUtil.Point(this.options.size - i, this.options.size / 2), new ViewUtil.Point(this.options.size - i - this.options.pointerSize + 1, this.options.size / 2 + this.options.pointerSize / 2), new ViewUtil.Point(this.options.size - i - this.options.pointerSize + 1, this.options.size / 2 - this.options.pointerSize / 2) ], 
            this.render();
        }, o.prototype.render = function() {
            var t;
            return o.__super__.render.call(this), this.el = $(this.el), t = this, this.el[0].onmousemove = this.el[0].onmousedown = function(e) {
                var i;
                return i = "mousedown" === e.type, t.onDrag(e, i);
            }, this.canvas = this.$("canvas")[0], this.el[0].id = _.uniqueId("radial-picker-"), 
            this.el.css({
                position:"relative",
                width:this.options.size,
                height:this.options.size
            }), this.canvas.width = this.options.size, this.canvas.height = this.options.size, 
            this.draw();
        }, o.prototype.onDrag = function(t, e) {
            var i;
            return this.el.css({
                cursor:"crosshair !important"
            }), i = this, e ? ViewUtil.dragElement({
                type:"relative",
                event:t,
                element:this.canvas,
                callback:function(t) {
                    var e, n, o;
                    return n = ViewUtil.clamp(t.x, 0, i.size), o = ViewUtil.clamp(t.y, 0, i.size), e = new ViewUtil.Point(t.x, t.y).subtract(i._center), 
                    i.setAngle(-e.angle);
                }
            }) :void 0;
        }, o.prototype._callback = function(t) {
            return t ? void 0 :_.isFunction(this.options.callback) ? this.options.callback.call(this, this.getAngle()) :void 0;
        }, o.prototype.setAngle = function(t, e) {
            return this.angle = t % 360, Math.abs(this.angle) > 180 && (t = 360 - Math.abs(this.angle), 
            this.angle > 0 && (t = -t), this.angle = t), this._callback(e), this.draw();
        }, o.prototype.getAngle = function() {
            return this.angle;
        }, o.prototype.draw = function() {
            var t;
            return t = this.canvas.getContext("2d"), t.clearRect(0, 0, this.options.size, this.options.size), 
            this.drawBackground(t), this.drawPointer(t);
        }, o.prototype.getDrawPosition = function() {
            var t;
            return t = this._refpoint.subtract(this._center), t.setAngle(-this.angle), new ViewUtil.Point(t.x + this._center.x, t.y + this._center.y);
        }, o.prototype._drawTriangle = function(t) {
            var e, i;
            return t.moveTo(this._points[0].x, this._points[0].y), t.lineTo(this._points[1].x, this._points[1].y), 
            e = this._points[2].x, i = this._points[2].y, t.quadraticCurveTo(e - 2, i + this.options.pointerSize / 2, e, i), 
            t.closePath();
        }, o.prototype.drawPointer = function(t) {
            var e, i;
            return e = ViewUtil.Matrix.getRotateInstance(-this.angle, this._center.x, this._center.y), 
            t.save(), e.applyToContext(t), t.beginPath(), this._drawTriangle(t), t.fillStyle = "#23a1cc", 
            t.shadowColor = "rgba(0,0,0,1)", t.shadowBlur = 2, t.shadowOffsetX = 0, t.shadowOffsetY = 2, 
            t.fill(), t.beginPath(), this._drawTriangle(t), t.clip(), i = new paper.Rectangle(this._points[0], this._points[1]), 
            i = i.include(this._points[2]), i = i.include(new ViewUtil.Point(this._points[0].x - 12, this._points[0].y)), 
            t.beginPath(), t.moveTo(i.x, i.y), t.lineTo(i.x, i.y + i.height), t.lineTo(i.x + i.width, i.y + i.height), 
            t.lineTo(i.x + i.width, i.y), t.lineTo(i.x, i.y), t.shadowColor = "rgba(25, 225, 255, .7)", 
            t.shadowBlur = 2, t.shadowOffsetX = 0, t.shadowOffsetY = 2, t.fillStyle = "#39d1e5", 
            this._drawTriangle(t), t.fill(), t.restore();
        }, o.prototype.drawBackground = function() {}, o;
    }(Draw.EmbedPane);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.App = function(i) {
        function o() {
            return this.setupReady = e(this.setupReady, this), this.setupInterface = e(this.setupInterface, this), 
            this.onViewCreated = e(this.onViewCreated, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype._module = "App", o.prototype.initialize = function(t) {
            return this.options = t, this.startTiming(), this.setupApp(t);
        }, o.prototype.setupApp = function() {
            return document.onselectstart = function() {
                return !1;
            }, $.log.level = 0, $.log.enabled = !0, Draw.isProduction() && ($.log.enabled = !1), 
            $.log.DEBUG_MODULES.length > 0 && ($.log.enabled = !0), this.projId = window.__proj && window.__proj.eid || "demo", 
            this.docId = window.__doc && window.__doc.eid || "demo", window.User = this.user = new Easel.User(window.__user), 
            window.__o && window.User.set({
                is_paid:window.__o.is_paid
            }), this.docId && "demo" !== this.docId || (this.demoName = this._getUrlHash().replace("#", "") || window.__defaultExample || "LandingPageTour"), 
            this.demoName && (this.demoType = _.variablize(this.demoName, "_", !0)), window.__doc || (window.__doc = {
                eid:"demo",
                name:"demo",
                demo_type:this.demoType
            }), window.__projDocs || (window.__projDocs = [ window.__doc ]), window.__proj || (window.__proj = {
                eid:"demo",
                demo_type:this.demoType
            }), window.__proj.documents = window.__projDocs, this.urlParams = Util.getCurrentUrlParams(), 
            this.mode = window.__mode || this.urlParams.mode || "edit", this.rawMode = this.mode, 
            this.realtime = !0, this.scaleToFit = !0, "preview" === this.rawMode ? (this.mode = "read", 
            this.scaleToFit = !1) :"screenshot" === this.rawMode && (this.scaleToFit = !1, this.realtime = !1, 
            this.mode = "read"), pds(this, "mode", this.mode, this.urlParams), this.hotkeys = new Draw.Hotkeys({}, {
                mode:this.mode
            }), this.symbols = new Draw.SymbolCollection(), this.colors = new Draw.Colors({
                max:5
            }), this.setupFonts(), Draw.Storage.setServer(window.__node), this.state = new Draw.AggregateDocumentState(), 
            this.printTime("After Setup App");
        }, o.prototype.loadDocuments = function() {
            var t, e, i, n;
            return this.printTime("Into loadDocuments"), this.projectDocument = new Draw.ProjectDocument({
                id:this.projId,
                state:this.state,
                metaJSON:window.__proj,
                demo_type:window.__doc.demo_type,
                runDemo:!!this.demoName,
                realtime:this.realtime
            }), this.projectDocument.state.fetch(), n = {
                projectDocument:this.projectDocument
            }, e = {
                id:this.docId,
                metaJSON:window.__doc,
                size:new paper.Size(980, 1e3),
                tool:"edit" === this.mode && "pointer" || "keyboard",
                fonts:this.fonts,
                fontLoader:this.fontLoader,
                hotkeys:this.hotkeys,
                symbols:this.symbols,
                runDemo:!!this.demoName,
                realtime:this.realtime,
                thumbSaver:"edit" === this.mode
            }, i = Draw.DocumentFactory.createInstance({
                state:this.state,
                projectDocument:this.projectDocument
            }), t = i.getOrCreate(this.docId, e, n), this.document = t.document, t.waitViewCreated(this.onViewCreated), 
            this.printTime("End loadDocuments");
        }, o.prototype.onViewCreated = function(t) {
            var e = this;
            return this.docView = t.view, this.docView.waitReady(function() {
                return e.projectDocument.state.load();
            }), this.setupInterface();
        }, o.prototype.setupInterface = function() {
            var t, e, i = this;
            return this.printTime("Into setupInterface"), this.el = $("body"), this.hideAddressBarForMobile(), 
            this.setupConnectionState(), "screenshot" !== this.rawMode && this.setupFocusManager(), 
            paper.install(window), "edit" === this.mode && (this.setupExportView(), this.setupLoadingDialog(), 
            this.setupMenuManager()), this.printTime("Post menu and focus setup"), Draw.G = {
                colors:this.colors,
                fonts:this.fonts,
                document:this.document,
                focus:this.focusManager,
                symbols:this.symbols
            }, this.setupViewport(), this.printTime("Post viewport setup"), "edit" === this.mode ? this.setupForEdit() :"read" === this.mode && this.setupForRead(), 
            ("preview" === (t = this.rawMode) || "screenshot" === t) && (this.view.preview(!0, "screenshot" === this.rawMode), 
            this.setupReady()), "screenshot" === (e = this.rawMode) && setTimeout(function() {
                return i.checkReady() ? Err.notify({
                    message:"Screenshot Watchdog: " + i.checkReady()
                }, "document", "show", {
                    readyCriteria:i.readyCriteria
                }) :void 0;
            }, 3e4), this.printTime("Post setupInterface");
        }, o.prototype.setupExportView = function() {
            return new Draw.ExportView({
                model:this.document,
                user:this.user,
                projectDocument:this.projectDocument
            });
        }, o.prototype.setupFonts = function() {
            return window.Fonts = this.fonts = new Draw.Fonts(), window.FontLoader = this.fontLoader = new Draw.FontLoader({
                typekit:{
                    id:window.__tk
                },
                google:{
                    families:window.__gf
                }
            }, {
                fontModel:Fonts
            });
        }, o.prototype.setupConnectionState = function() {
            var t;
            return t = $("#connection-label"), this.document.state.connection ? new Draw.ConnectionView({
                el:$("#connection-label"),
                connection:this.document.state.connection,
                document:this.document
            }) :$("#connection-label").hide();
        }, o.prototype.setupLoadingDialog = function() {
            var t, e;
            return t = new Draw.EmbedPane({
                template:"#loading-overlay-template",
                document:this.document
            }), e = new Draw.ModalOverlay({
                pane:t,
                document:this.document
            }), t.show(), this.state.waitLoad(function() {
                return t.hide();
            });
        }, o.prototype.setupFocusManager = function() {
            return this.focusManager = Draw.FocusManager.createInstance({
                document:this.document,
                hotkeys:this.hotkeys
            }), this.document.setFocusManager(this.focusManager);
        }, o.prototype.setupMenuManager = function() {
            return this.menu = new Draw.MenuManager({
                document:this.document,
                mode:this.mode,
                items:Draw.Menu.Main,
                focusManager:this.focusManager
            }), $("#header #menu").append(this.menu.getEl());
        }, o.prototype.setupViewport = function() {
            return this.view = new Draw.Viewport({
                projectDocument:this.projectDocument,
                model:this.document,
                mode:this.mode,
                view:this.docView,
                contextMenu:this.menu ? this.menu.getContextMenu() :null,
                focusManager:this.focusManager
            });
        }, o.prototype.setupForRead = function() {
            return $("#loading-label-container").remove(), this.urlParams.c ? this.view.showComment(this.urlParams.c) :void 0;
        }, o.prototype.setupForEdit = function() {
            return this.setupPrompter(), this.setupElementManager(), this.setupSymbolManager(), 
            this.setupImageManager(), this.setupDialogManager(), this.setupEditorViews();
        }, o.prototype.setupPrompter = function() {
            return this.prompter = new Draw.Prompter({
                document:this.document,
                projectDocument:this.projectDocument,
                colors:this.colors,
                fonts:this.fonts,
                focusManager:this.focusManager,
                user:window.User
            }), Draw.G.prompt = this.prompter;
        }, o.prototype.setupImageManager = function() {
            return this.imageManager = new Draw.ImageManager({
                document:this.document,
                doUpload:this.document.isPersisted()
            });
        }, o.prototype.setupElementManager = function() {
            return this.elements = new Draw.ElementManager({
                global:window.__el || [],
                user:window.__s
            });
        }, o.prototype.setupSymbolManager = function() {
            var t;
            return this.document.isPersisted() ? (t = this.projectDocument.easelProject, this.symbolManager = new Draw.SymbolManager({
                document:this.document,
                symbols:this.symbols,
                userElements:this.elements.getUserCollections().All,
                org:t ? t.get("organization") :null,
                server:window.__node
            })) :this.symbolManager = new Draw.DemoSymbolManager({
                document:this.document,
                symbols:this.symbols,
                userElements:this.elements.getUserCollections().All
            });
        }, o.prototype.setupDialogManager = function() {
            return this.dialogManager = new Draw.DialogManager({
                document:this.document,
                elements:this.elements,
                focusManager:this.focusManager
            }), Draw.G.dialogs = this.dialogManager;
        }, o.prototype.setupEditorViews = function() {
            var t, e, i = this;
            return this.zoom = new Draw.ZoomView({
                model:this.document,
                el:$("#zoom-status")
            }), $("#help-link").click(this.document.help), e = this.view.getPreview().getBasePreviewDocument(), 
            e && (t = new Easel.CommentsView({
                controller:e.comments.commentsController,
                el:$("#header .show-comments")
            }), t.bind("click", function() {
                return i.document.commentMode();
            })), this.ricons = new Draw.ResponsiveIconsView({
                el:$("#header"),
                document:this.document,
                viewport:this.view
            }), new Draw.BreadcrumbView({
                el:$("#breadcrumb"),
                document:this.document
            }), new Draw.SidebarHelpView({
                el:$(".symbols-dialog"),
                document:this.document,
                dialogManager:this.dialogManager,
                viewport:this.view,
                prompter:this.prompter,
                menu:this.menu
            }), new Draw.MouseTracker({
                model:this.document
            }), $("#loading-label-container").remove(), this.document.isPersisted() ? this.setupForRealDocumentEdit() :this.setupForExampleEdit();
        }, o.prototype.setupForExampleEdit = function() {
            var t, e, i = this;
            return $("#container-learn-tour").hide(), Draw.G.symbols = this.symbols, this.elements.options.symbols = this.symbols, 
            e = "Signup to use this feature!", this.menu.menu.items[0].childPane.items[2].disable(e), 
            this.menu.menu.items[0].childPane.items[3].disable(e), this.menu.menu.items[0].childPane.items[5].disable(e), 
            this.menu.menu.items[4].childPane.items[0].disable(e), Draw.Document.prototype.smartGroup = function() {}, 
            new Draw.SignupView({
                el:$("#header"),
                document:this.document,
                user:window.User
            }), t = function() {
                return i.document.redraw(Draw.LAYER_ALL);
            }, setTimeout(t, 20);
        }, o.prototype.setupForRealDocumentEdit = function() {
            var t = this;
            return this.dupe = new Draw.DocumentDuplicator({
                document:this.document
            }), new Draw.SaveMessageView({
                el:$("#save-message"),
                document:this.document
            }), new Draw.UnloadMessageView({
                document:this.document,
                imageManager:this.imageManager
            }), this.state.waitLoad(function(e, i) {
                return t.document.cacheCurrentColors(), i = i[t.document.state.id], e && i.shareDoc && (t.document.redraw(Draw.LAYER_ALL), 
                t.scaleToFit ? t.view.fitDocument() :t.view.sensiblyCenter(), t.document.rerunDemo(), 
                new Draw.ConnectionErrorView({
                    document:t.document
                })), t.printTime("All loaded");
            });
        }, o.prototype.setupReady = function() {
            var t, e, i = this;
            return t = this.fontLoader, this.readyCriteria = {
                loaded:this.state.isLoaded(),
                images:!1,
                fonts:t ? t.get("fontsLoaded") :!0
            }, e = function() {
                var t, e, n, o, r, s;
                for (n = i.document.getImages(), n = function() {
                    var e, i, o;
                    for (o = [], e = 0, i = n.length; i > e; e++) t = n[e], o.push(this._createImageLoader(t));
                    return o;
                }.call(i), i.readyCriteria.images = function() {
                    var e, i, o;
                    for (o = [], e = 0, i = n.length; i > e; e++) t = n[e], o.push(t.getServerUrl());
                    return o;
                }(), s = [], o = 0, r = n.length; r > o; o++) e = n[o], s.push(e.onLoad(function(t, e, n) {
                    return pds(i, "image loaded", n && "error!" || "no error", e.complete, e.src, e), 
                    i.readyCriteria.images = _.without(i.readyCriteria.images, t.getServerUrl()), i.checkReady();
                }));
                return s;
            }, this.state.waitLoad(function() {
                return e(), i.readyCriteria.loaded = !0, i.checkReady();
            }), this.state.loaded && e(), t && t.bind("active", function() {
                return i.readyCriteria.fonts = !0, i.checkReady();
            }), this.checkReady();
        }, o.prototype.checkReady = function() {
            return pds(this, "checking ready..."), this.readyCriteria.loaded ? this.readyCriteria.fonts ? !this.readyCriteria.images || this.readyCriteria.images.length ? (pds(this, "waiting on images", this.readyCriteria.images), 
            "waiting on images " + this.readyCriteria.images) :(this.printTime("ALL READY"), 
            window.easelReady = !0, null != window.postMessage && window.postMessage({
                type:"trigger",
                options:{
                    canvas_width:this.document.getSize().width,
                    canvas_height:this.document.getSize().height
                }
            }, "*"), !1) :(pds(this, "waiting on fonts to load"), "waiting on fonts to load") :(pds(this, "waiting on doc to load"), 
            "waiting on doc to load");
        }, o.prototype._createImageLoader = function(t) {
            return new Draw.Export.Image(t);
        }, o.prototype._getUrlHash = function() {
            return window.location.hash;
        }, o.prototype.hideAddressBarForMobile = function() {
            return navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i) ? $(window).load(function() {
                return setTimeout(function() {
                    return window.scrollTo(0, 1);
                }, 1);
            }) :void 0;
        }, o.prototype.startTiming = function() {
            return this._startTime = new Date().getTime(), pds(this, "TIMING:", "Start Timing", this._startTime);
        }, o.prototype.printTime = function(t) {
            return t = t || "Took", this._endTime = new Date().getTime(), pds(this, "TIMING:", t, this._endTime - this._startTime + "ms");
        }, o.prototype.canv = function() {
            return $("canvas.helper").toggle();
        }, o.prototype.selected = function() {
            return _.values(this.document.selectionModel.getSelected())[0];
        }, o.prototype.getrules = function() {
            var t, e, i, n, o, r;
            for (i = this.selected(), print("root", i.options.root), e = Import.CSS.split(i.getCss()), 
            r = [], n = 0, o = e.length; o > n; n++) t = e[n], r.push(print(t[0]));
            return r;
        }, o.prototype.setconfig = function(t) {
            var e;
            return e = this.selected(), e.setConfig(t), e.set({
                position:e.getPosition()
            }), this.document.selectionModel.setSelected(null), this.document.selectionModel.setSelected(e);
        }, o.prototype.setnames = function(t) {
            var e, i, n, o, r;
            for (e = this.elements.getUserCollections().All, r = [], i = n = 0, o = e.length; o >= 0 ? o > n :n > o; i = o >= 0 ? ++n :--n) e.at(i).set({
                name:t[i]
            }), r.push(e.at(i).save());
            return r;
        }, o.prototype.synccss = function() {
            var t, e, i, n, o;
            for (n = _.values(this.document.selectionModel.getSelected()), o = [], e = 0, i = n.length; i > e; e++) t = n[e], 
            t.syncCss ? o.push(t.syncCss()) :o.push(void 0);
            return o;
        }, o.prototype.replacedoc = function(t) {
            return Draw.Storage.replaceDocument(this.document.state.shareDoc, t, function(t, e) {
                return console.log("callback; error: ", t, ", op", e);
            });
        }, o;
    }(Backbone.View);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    }, o = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.BreadcrumbView = function(i) {
        function r() {
            return this._select = e(this._select, this), this.onMouseleave = e(this.onMouseleave, this), 
            this.onMouseenter = e(this.onMouseenter, this), this.onClick = e(this.onClick, this), 
            this.onToggleSymbolDialog = e(this.onToggleSymbolDialog, this), this.onObjectChanged = e(this.onObjectChanged, this), 
            this.onSelected = e(this.onSelected, this), t = r.__super__.constructor.apply(this, arguments);
        }
        return n(r, i), r.prototype.template = '<a href="#" class="element" rel="{{id}}">{{name}}</a>', 
        r.prototype.className = "breadcrumb", r.prototype.tagName = "div", r.prototype.events = {
            "click a":"onClick",
            "mouseenter a":"onMouseenter",
            "mouseleave a":"onMouseleave"
        }, r.prototype.initialize = function(t) {
            var e;
            return this.el = $(this.el), e = {
                document:null
            }, this.options = _.extend(e, t), this.document = this.options.document, this.document.selectionModel.bind("change:selected", this.onSelected), 
            this.document.selectionModel.bind("change:object", this.onObjectChanged), this.document.bind("change:toggle:dialog_symbols", this.onToggleSymbolDialog), 
            this.hide();
        }, r.prototype.render = function() {
            return this;
        }, r.prototype.show = function() {
            return this.el.show();
        }, r.prototype.hide = function() {
            return this.el.hide();
        }, r.prototype.renderBreadcrumb = function(t) {
            return t ? (this._renderBreadcrumb(t), !0) :!1;
        }, r.prototype.onSelected = function(t) {
            return this.selected = t.getOneSelected(!0), this.renderBreadcrumb(this.selected) ? void 0 :this.hide();
        }, r.prototype.onObjectChanged = function(t, e, i) {
            return (o.call(i, "snapped") >= 0 || o.call(i, "id") >= 0 || o.call(i, "classes") >= 0) && !this.renderBreadcrumb(this.selected) ? this.hide() :void 0;
        }, r.prototype.onToggleSymbolDialog = function(t, e) {
            return e && this.el.addClass("open"), e ? void 0 :this.el.removeClass("open");
        }, r.prototype.onClick = function(t) {
            return this._select(t, !1);
        }, r.prototype.onMouseenter = function(t) {
            return this._select(t, !0);
        }, r.prototype.onMouseleave = function() {
            return this.document.selectionModel.setPreselected(null);
        }, r.prototype._getName = function(t) {
            var e, i, n, o, r;
            return t.get("name") ? t.get("name") :(n = t.NAME || t.TYPE, i = t.get("classes"), 
            o = t.get("id"), i && (i = i.trim()), o && (o = o.trim()), r = "", o && (r += "#" + o), 
            i && (r += "." + function() {
                var t, n, o, r;
                for (o = i.split(" "), r = [], t = 0, n = o.length; n > t; t++) e = o[t], e.trim() && r.push(e.trim());
                return r;
            }().join(".")), r || n);
        }, r.prototype._renderBreadcrumb = function(t) {
            var e, i;
            return i = [], this._iterateParents(t, function(t) {
                return i.push(t);
            }), i.reverse(), i = function() {
                var t, n, o;
                for (o = [], t = 0, n = i.length; n > t; t++) e = i[t], o.push(this.renderTemplate(this.template, {
                    name:this._getName(e),
                    id:e.id
                }));
                return o;
            }.call(this), this.el.html(i.join("")), this.show();
        }, r.prototype._iterateParents = function(t, e) {
            var i;
            if (i = t, e(i) !== !1) {
                for (;i.parent instanceof Draw.DomContainer; ) {
                    if (e(i.parent) === !1) return;
                    i = i.parent;
                }
                return null;
            }
        }, r.prototype._select = function(t, e) {
            var i, n, o, r = this;
            return o = $(t.target), i = parseInt(o.attr("rel")), n = this.document.selectionModel.getOneSelected(!0), 
            n && this._iterateParents(n, function(t) {
                return t.id === i ? (r.document.selectionModel[e ? "setPreselected" :"setSelected"](t), 
                !1) :void 0;
            }), !1;
        }, r;
    }(Backbone.View);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.ClipboardView = function(i) {
        function o() {
            return this.build = e(this.build, this), this._object = e(this._object, this), this._text = e(this._text, this), 
            this.update = e(this.update, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.template = "#clipboard-template", o.prototype.fns = {
            "text/plain":"_text",
            "json/object":"_text",
            object:"_object"
        }, o.prototype.initialize = function() {
            return this.model.bind("change", this.update), this.el = $(this.el), this.template = $(this.template).html(), 
            this.update(this.model);
        }, o.prototype.update = function(t) {
            var e, i, n, o;
            this.el.html(""), this.el.hide(), n = t.attributes, o = [];
            for (e in n) i = n[e], o.push(this.el.append(this.build(e, i)));
            return o;
        }, o.prototype._text = function(t) {
            return t;
        }, o.prototype._object = function(t) {
            var e, i;
            return e = function() {
                var e, n, o;
                for (o = [], e = 0, n = t.length; n > e; e++) i = t[e], o.push(i.toString());
                return o;
            }(), e.join(", ");
        }, o.prototype.build = function(t, e) {
            var i;
            return i = {
                type:t,
                value:this[this.fns[t]](e)
            }, _.template(this.template, i);
        }, o;
    }(Backbone.View);
}.call(this), function() {
    Color.Picker = function(i) {
        function o() {
            var t = document.createElement("canvas");
            t.width = 40, t.height = 5;
            for (var e = t.getContext("2d"), i = 3, n = 5, o = 9, r = -o / 4, s = 1, a = 0; 20 > a; a++) e.beginPath(), 
            e.fillStyle = "#FFF", e.moveTo(s + o / 4, o / 2 + r), e.lineTo(s, o / 4 + r), e.lineTo(s, o / 4 * 3 + r), 
            e.fill();
            return e.translate(i, n), e.rotate(180 * Math.PI / 180), e.drawImage(t, -29, 0), 
            e.translate(-i, -n), t;
        }
        "undefined" == typeof i && (i = {}), this.callback = i.callback, this.hue = i.hue || 0, 
        this.sat = i.sat || 0, this.val = i.val || 100, this.alpha = void 0 == i.alpha ? 1 :i.alpha, 
        this.element = i.element || document.body, this.image = i.image || "//127.0.0.1/easel/assets/core/transparent_picker-3610afa98c22ec1fcab6cd01ee121b0e.gif", 
        this.size = 165, this.margin = 16, this.offset = 5, this.hueWidth = 36, this.alphaWidth = 36, 
        this._cachedColor = null;
        var r = this, s = new Image(), a = !1;
        s.onload = function() {
            a = !0, r.drawSample(!0);
        }, s.src = this.image;
        var l = document.createElement("div");
        l.id = "colorjack_square";
        var c = o(), h = document.createElement("canvas");
        h.width = 10, h.height = 10, function() {
            var t = h.getContext("2d");
            t.lineWidth = 1, t.beginPath();
            var e = h.width / 2, i = h.width / 2;
            t.arc(e, i, 4.5, 0, 2 * Math.PI, !0), t.strokeStyle = "#000", t.stroke(), t.beginPath(), 
            t.arc(e, i, 3.5, 0, 2 * Math.PI, !0), t.strokeStyle = "#FFF", t.stroke();
        }();
        var u = document.createElement("canvas"), d = u.getContext("2d");
        return u.width = this.size + this.hueWidth + this.margin + this.alphaWidth, u.height = this.size + 10, 
        l.appendChild(u), l.onmousemove = l.onmousedown = function(i) {
            {
                var o = "mousedown" == i.type, s = r.margin / 2, a = n(u), c = i.pageX - a.x - s, h = i.pageY - a.y - s, d = e(c, 0, u.width);
                e(h, 0, r.size);
            }
            return d <= r.size ? (l.style.cursor = "crosshair", o && t({
                type:"relative",
                event:i,
                element:u,
                callback:function(t) {
                    r._cachedColor = null;
                    var i = e(t.x - r.offset, 0, r.size), n = e(t.y - r.offset, 0, r.size);
                    r.sat = i / r.size * 100, r.val = 100 - n / r.size * 100, r.drawSample();
                }
            })) :d > r.size + r.margin && d <= r.size + r.hueWidth ? (l.style.cursor = "crosshair", 
            o && t({
                type:"relative",
                event:i,
                element:u,
                callback:function(t) {
                    r._cachedColor = null;
                    var i = e(t.y - r.offset, 0, r.size);
                    r.hue = 360 * Math.min(1, i / r.size), r.drawSample();
                }
            })) :d > r.size + r.margin + r.hueWidth && d <= r.size + r.hueWidth + r.alphaWidth ? (l.style.cursor = "crosshair", 
            o && t({
                type:"relative",
                event:i,
                element:u,
                callback:function(t) {
                    var i = e(t.y - r.offset, 0, r.size);
                    r.alpha = 1 - i / r.size, r.drawSample();
                }
            })) :l.style.cursor = "default", !1;
        }, this.element.appendChild(l), this.el = l, this.drawSample = function(t) {
            d.clearRect(0, 0, u.width, u.height), r.drawSquare(), r.drawHue(), r.drawAlpha();
            var e = {
                H:r.hue,
                S:r.sat,
                V:r.val
            }, i = Color.HSV_HEX(e), n = r.hue / 362 * r.size - 2;
            d.drawImage(c, r.size + r.offset + r.margin - 6, Math.round(n) + r.offset);
            var n = (1 - r.alpha) * r.size - 2;
            d.drawImage(c, r.size + r.offset + r.hueWidth + r.margin - 6, Math.round(n) + r.offset);
            var o = r.sat / 100 * r.size, n = (1 - r.val / 100) * r.size;
            o -= h.width / 2, n -= h.height / 2, d.drawImage(h, Math.round(o) + r.offset, Math.round(n) + r.offset), 
            r.callback && !t && r.callback(i, r.alpha);
        }, this.setColor = function(t, e) {
            void 0 != t.R && (r._cachedColor = t, t = Color.RGB_HSV(t)), r.hue = t.H, r.sat = t.S, 
            r.val = t.V, r.alpha = t.A, r.drawSample(e);
        }, this.getColor = function(t) {
            if (!t && r._cachedColor) return r._cachedColor.A = r.alpha, r._cachedColor;
            var e = {
                H:r.hue,
                S:r.sat,
                V:r.val,
                A:r.alpha
            };
            return t ? e :Color.HSV_RGB(e);
        }, this.drawSquare = function() {
            var t = Color.HSV_RGB({
                H:r.hue,
                S:100,
                V:100
            }), e = r.offset, i = r.size;
            d.save(), d.beginPath(), d.rect(e, e, i, i), d.clip();
            var n = 20, o = i / n + 1;
            if (a) for (var l = 0; o > l; l++) d.drawImage(s, e + l * n, e, n, i);
            d.restore(), d.fillStyle = "rgba(" + [ t.R, t.G, t.B, r.alpha ].join(",") + ")", 
            d.fillRect(e, e, i, i);
            var c = d.createLinearGradient(e, e, i + e, 0);
            c.addColorStop(0, "rgba(255, 255, 255, " + r.alpha + ")"), c.addColorStop(1, "rgba(255, 255, 255, 0)"), 
            d.fillStyle = c, d.fillRect(e, e, i, i);
            var c = d.createLinearGradient(e, e, 0, i + e);
            c.addColorStop(0, "rgba(0, 0, 0, 0)"), c.addColorStop(1, "rgba(0, 0, 0, " + r.alpha + ")"), 
            d.fillStyle = c, d.fillRect(e, e, i, i);
        }, this.drawHue = function() {
            var t = r.size + r.margin + r.offset, e = d.createLinearGradient(0, 0, 0, r.size);
            e.addColorStop(0, "rgba(255, 0, 0, 1)"), e.addColorStop(.15, "rgba(255, 255, 0, 1)"), 
            e.addColorStop(.3, "rgba(0, 255, 0, 1)"), e.addColorStop(.5, "rgba(0, 255, 255, 1)"), 
            e.addColorStop(.65, "rgba(0, 0, 255, 1)"), e.addColorStop(.8, "rgba(255, 0, 255, 1)"), 
            e.addColorStop(1, "rgba(255, 0, 0, 1)"), d.fillStyle = e, d.fillRect(t, r.offset, 20, r.size);
        }, this.drawAlpha = function() {
            var t = r.size + 2 * r.margin + 20 + r.offset;
            a && d.drawImage(s, t, r.offset, 20, r.size);
            var e = d.createLinearGradient(0, 0, 0, r.size);
            e.addColorStop(0, "rgba(0, 0, 0, 1)"), e.addColorStop(1, "rgba(0, 0, 0, 0)"), d.fillStyle = e, 
            d.fillRect(t, r.offset, 20, r.size);
        }, this.destory = function() {
            document.body.removeChild(l);
            for (var t in r) delete r[t];
        }, this.drawSample(), this;
    };
    var t = function(t) {
        function e(e, n) {
            "undefined" == typeof n && (n = "move");
            var o = i(e);
            switch (t.type) {
              case "difference":
                t.callback({
                    x:o.x + a - u,
                    y:o.y + l - d
                }, n);
                break;

              case "relative":
                t.callback({
                    x:o.x - a,
                    y:o.y - l
                }, n);
                break;

              default:
                t.callback({
                    x:o.x,
                    y:o.y
                }, n);
            }
        }
        function o(t) {
            window.removeEventListener("mousemove", e, !1), window.removeEventListener("mouseup", o, !1), 
            e(t, "up");
        }
        var r = t.element, s = n(r), a = s.x, l = s.y, c = t.event, h = i(c), u = h.x, d = h.y;
        window.addEventListener("mousemove", e, !1), window.addEventListener("mouseup", o, !1), 
        e(c, "down");
    }, e = function(t, e, i) {
        return e > t ? e :t > i ? i :t;
    }, i = window.ActiveXObject ? function(t) {
        return {
            x:t.clientX + document.documentElement.scrollLeft,
            y:t.clientY + document.documentElement.scrollTop
        };
    } :function(t) {
        return {
            x:t.pageX,
            y:t.pageY
        };
    }, n = function(t) {
        t = "object" == typeof t ? t :$(t);
        for (var e = {
            x:0,
            y:0
        }; null != t; ) e.x += t.offsetLeft - t.scrollLeft, e.y += t.offsetTop - t.scrollTop, 
        t = t.offsetParent;
        return e;
    };
}(), function() {
    var t, e, i, n = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, o = {}.hasOwnProperty, r = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var n in e) o.call(e, n) && (t[n] = e[n]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.ColorView = function(e) {
        function i() {
            return this.clickColor = n(this.clickColor, this), this.render = n(this.render, this), 
            t = i.__super__.constructor.apply(this, arguments);
        }
        return r(i, e), i.prototype.template = "#color-template", i.prototype.className = "color-wrapper", 
        i.prototype.events = {
            "click a":"clickColor"
        }, i.prototype.render = function() {
            var t;
            return t = Draw.Export.CSS.toCssString(this.model), Draw.ColorView.__super__.render.call(this, {
                color:t
            }), this;
        }, i.prototype.clickColor = function() {
            return this.trigger("color", this.model), !1;
        }, i;
    }(Backbone.View), Draw.ColorPaletteView = function(t) {
        function i() {
            return this.clickColor = n(this.clickColor, this), this.show = n(this.show, this), 
            this.hide = n(this.hide, this), this.update = n(this.update, this), this.render = n(this.render, this), 
            this.remove = n(this.remove, this), e = i.__super__.constructor.apply(this, arguments);
        }
        return r(i, t), i.prototype.template = "#palette-template", i.prototype.colorsSelector = ".colors", 
        i.prototype.initialize = function(t) {
            return this.key = t.key, this.colorViews = [], this.model.bind("change:" + this.key, this.update), 
            this.render(), this.update();
        }, i.prototype.remove = function() {
            return this.model.unbind("change:" + this.key, this.update), this.removeColors(), 
            Draw.ColorPaletteView.__super__.remove.call(this);
        }, i.prototype.removeColors = function() {
            var t, e, i, n;
            for (n = this.colorViews, e = 0, i = n.length; i > e; e++) t = n[e], t.unbind("color", this.clickColor), 
            t.remove();
            return this.colorViews = [];
        }, i.prototype.render = function() {
            return $(this.el).addClass("" + this.key + "-palette"), Draw.ColorPaletteView.__super__.render.call(this, {
                key:this.key
            }), this.colors = this.$(this.colorsSelector), this;
        }, i.prototype.update = function() {
            var t, e, i, n, o, r;
            if (e = this.model.get(this.key), this.removeColors(), e) {
                for (r = [], n = 0, o = e.length; o > n; n++) t = e[n], i = new Draw.ColorView({
                    model:t
                }).render(), i.bind("color", this.clickColor), this.colorViews.push(i), r.push(this.colors.append(i.el));
                return r;
            }
        }, i.prototype.hide = function() {
            return $(this.el).hide();
        }, i.prototype.show = function() {
            return $(this.el).show();
        }, i.prototype.clickColor = function(t) {
            return this.trigger("color", t);
        }, i;
    }(Backbone.View), Draw.ColorsView = function(t) {
        function e() {
            return this.onHide = n(this.onHide, this), this.onShow = n(this.onShow, this), this.clickColor = n(this.clickColor, this), 
            this.callbackWithCurrentColor = n(this.callbackWithCurrentColor, this), this.callbackToPrompter = n(this.callbackToPrompter, this), 
            this.prompt = n(this.prompt, this), this.onDroppedColor = n(this.onDroppedColor, this), 
            this.onUserChoseColor = n(this.onUserChoseColor, this), this.onClickModeChange = n(this.onClickModeChange, this), 
            this.changeMode = n(this.changeMode, this), this._setMode = n(this._setMode, this), 
            this._guessMode = n(this._guessMode, this), this._generateColor = n(this._generateColor, this), 
            this._generateGradientColor = n(this._generateGradientColor, this), this._deactivateGradientTool = n(this._deactivateGradientTool, this), 
            this._activateGradientTool = n(this._activateGradientTool, this), this.onSelectStop = n(this.onSelectStop, this), 
            this.onClickPaletteIcon = n(this.onClickPaletteIcon, this), this.onDocClick = n(this.onDocClick, this), 
            this.render = n(this.render, this), this.setColor = n(this.setColor, this), this.remove = n(this.remove, this), 
            this.onToolDeactivated = n(this.onToolDeactivated, this), this.doSecondaryAction = n(this.doSecondaryAction, this), 
            this.doPrimaryAction = n(this.doPrimaryAction, this), this.doAccept = n(this.doAccept, this), 
            i = e.__super__.constructor.apply(this, arguments);
        }
        return r(e, t), e.prototype.template = "#colors-template", e.prototype.paletteIconTemplate = "#palette-icon-template", 
        e.prototype.tagName = "div", e.prototype.className = "dialog-content color-view", 
        e.prototype.palettesSelector = ".palettes", e.prototype.paletteIconSelector = ".palette-icons", 
        e.prototype.pickerSelector = ".picker", e.prototype.gradientSelector = ".gradient", 
        e.prototype.MODE_FILL = "fill", e.prototype.MODE_GRADIENT = "gradient", e.prototype.MODE_NONE = "none", 
        e.prototype.events = {
            "click .color-types a":"onClickModeChange",
            "click a.palette-icon":"onClickPaletteIcon"
        }, e.prototype.initialize = function(t) {
            return Draw.ColorsView.__super__.initialize.call(this, t), this.paletteViews = {}, 
            this.colorPicker = new Draw.ColorPickerPane({
                model:this.document
            }), this.colorPicker.bind("color", this.setColor), this.gradientPicker = new Draw.GradientPane({
                width:256,
                model:this.document
            }), this.acceptGradient = !0, this.render(), this.document && this.document.tools && (this.document.bind("change:selected_stop", this.onSelectStop), 
            this.gradientTool = this.document.tools.gradient, this.tool = new Draw.ColorViewTool(this.document, this.gradientTool), 
            this.tool.bind("color", this.onDroppedColor), this.tool.bind("click:nothing", this.hide), 
            this.tool.bind("deactivate", this.onToolDeactivated)), this._setMode(this.MODE_FILL);
        }, e.prototype.getTool = function() {
            return this.tool;
        }, e.prototype.doAccept = function() {
            return this.colorPicker.doAccept();
        }, e.prototype.doPrimaryAction = function() {
            return this.colorPicker.doPrimaryAction();
        }, e.prototype.doSecondaryAction = function() {
            var t;
            return t = this.callback, this.callback = null, t && t(!1, null), !0;
        }, e.prototype.onToolDeactivated = function() {
            return this.hasFocus() ? this.trigger("hide") :void 0;
        }, e.prototype.remove = function() {
            var t, e, i;
            i = this.paletteViews;
            for (t in i) e = i[t], e.unbind("color", this.clickColor), e.remove();
            return Draw.ColorsView.__super__.remove.call(this);
        }, e.prototype.setColor = function(t) {
            return this.color = t;
        }, e.prototype.render = function() {
            var t, e, i, n, o, r, s, a, l;
            for (this.el = $(this.el), Draw.ColorView.__super__.render.call(this, {}), r = this.$(this.palettesSelector), 
            n = this.$(this.paletteIconSelector), o = Draw.Colors.supportedProperties(), e = o[o.length - 1], 
            a = 0, l = o.length; l > a; a++) t = o[a], i = new Draw.ColorPaletteView({
                model:this.model,
                key:t
            }), i.bind("color", this.clickColor), this.paletteViews[t] = i, r.append(i.el), 
            i.hide(), s = $($.parseHTML(this.renderTemplate(this.paletteIconTemplate, {
                key:t
            }))), n.append(s), t !== e && n.append($("<div/>", {
                "class":"palette-separator"
            }));
            return this.togglePalette(o[0], "show"), this.$(this.pickerSelector).append(this.colorPicker.el), 
            this.$(this.gradientSelector).append(this.gradientPicker.el), this;
        }, e.prototype.onDocClick = function(t) {
            var e;
            return e = $(t.target), e.is("canvas") || e.parentsAndSelf(".cke").length ? !1 :void 0;
        }, e.prototype.togglePalette = function(t, e) {
            var i;
            return i = this.$("." + t + "-palette-icon"), this.paletteViews[t][e](), "show" === e ? i.addClass("active") :i.removeClass("active");
        }, e.prototype.onClickPaletteIcon = function(t) {
            var e, i;
            return i = $(t.target), e = i.attr("rel"), this.togglePalette(e, i.hasClass("active") ? "hide" :"show"), 
            !1;
        }, e.prototype.onSelectStop = function(t, e) {
            return e && this.mode === this.MODE_GRADIENT && this.gradient ? (this.stop = e, 
            this.color = this.stop.color, this.colorPicker.setColor(this.color)) :this.stop = null;
        }, e.prototype._activateGradientTool = function(t) {
            var e;
            return this.document && (e = this.document.selectionModel.getSelected(), e && 1 === _.size(e)) ? (this.gradientPicker.tool.activate(), 
            this.tool.activateGradient(t)) :void 0;
        }, e.prototype._deactivateGradientTool = function() {
            return this.tool.deactivateGradient();
        }, e.prototype._generateGradientColor = function(t) {
            var e;
            return e = this.document.selectionModel.getOneSelected(), this.gradientColor = paper.Color.generateGradientColor(t, e), 
            this.gradientColor;
        }, e.prototype._generateColor = function(t) {
            var e, i, n;
            return e = null, t === this.MODE_GRADIENT ? (this.color || (this.color = this.colorPicker.getColor() || Color.normalize("white")), 
            this.gradient ? e = this.gradient :this.color && (i = paper.Color.generateGradient(this.color), 
            n = this._generateGradientColor(i), this.callbackToPrompter(n), e = i)) :t === this.MODE_FILL ? (this.color || (this.color = this.colorPicker.getColor()), 
            this.callbackToPrompter(this.color)) :t === this.MODE_NONE && (e = null, this.callbackToPrompter(e)), 
            e;
        }, e.prototype._guessMode = function(t, e) {
            var i;
            return e ? (t instanceof paper.GradientColor && (this.gradientColor = t), t = Color.normalize(t), 
            i = t instanceof paper.Gradient ? this.MODE_GRADIENT :t ? this.MODE_FILL :this.MODE_NONE) :(t = t || Color.normalize("rgba(0,0,0,0)"), 
            i = this.MODE_FILL), this.acceptGradient = e, this.changeMode(i, t);
        }, e.prototype._setMode = function(t) {
            var e;
            return this.mode = t, t === this.MODE_NONE && this.colorPicker.setColor(null), t === this.MODE_GRADIENT && this.gradientTool ? (this._activateGradientTool(this.gradientColor), 
            this.document.redraw(Draw.LAYER_TOOL)) :this.gradientTool && (this._deactivateGradientTool(), 
            this.document.redraw(Draw.LAYER_TOOL)), this.acceptGradient ? this.$(".color-types").show() :this.$(".color-types").hide(), 
            this.$(".color-types a").removeClass("btn-selected"), this.$(".type-" + t).addClass("btn-selected"), 
            e = this.$(this.gradientSelector), t === this.MODE_GRADIENT ? e.show() :e.hide();
        }, e.prototype.changeMode = function(t, e) {
            return t === this.MODE_GRADIENT ? (this.gradient = e || this._generateColor(t), 
            this._setMode(t), this.gradientPicker.setGradient(this.gradient), this.document.setSelectedStop(null), 
            this.document.setSelectedStop(this.gradient.stops[0])) :(this.color = e || this._generateColor(t), 
            this.stop = null, this.gradient = null, this._setMode(t));
        }, e.prototype.onClickModeChange = function(t) {
            var e;
            return e = $(t.target).attr("rel"), this.changeMode(e), !1;
        }, e.prototype.onUserChoseColor = function(t, e) {
            var i;
            if (t) return this.color = Color.normalize(e), (i = this.mode) !== this.MODE_GRADIENT && i !== this.MODE_FILL || this.color ? this.mode === this.MODE_NONE && this.color ? (this.changeMode(this.MODE_FILL, this.color), 
            this.callbackToPrompter(this.color)) :this.mode === this.MODE_GRADIENT && this.stop ? this.stop.setColor(this.color) :this.callback ? this.callbackToPrompter(this.color) :void 0 :(this.changeMode(this.MODE_NONE, null), 
            this.callbackToPrompter(this.color));
        }, e.prototype.onDroppedColor = function(t) {
            return this.colorPicker.setColor(Color.NORMALIZED_RGB(t)), this.onUserChoseColor(!0, t);
        }, e.prototype.prompt = function(t, e, i) {
            return this.callbackWithCurrentColor(), this._cleanup(), this.el.is(":visible") && this.resetFocus(), 
            this._guessMode(e, i), this.colorPicker.prompt(this.onUserChoseColor, this.color, !1), 
            this.callback = t, this.trigger("show");
        }, e.prototype.callbackToPrompter = function(t) {
            return this.callback ? this.callback(!0, t) :void 0;
        }, e.prototype.callbackWithCurrentColor = function() {
            var t;
            return this.mode === this.MODE_GRADIENT && this.gradient ? (t = this._generateGradientColor(this.gradient), 
            t && this.callbackToPrompter(t), this.trigger("color", this.gradient)) :this.color ? (this.callbackToPrompter(this.color), 
            this.trigger("color", this.color)) :void 0;
        }, e.prototype.clickColor = function(t) {
            return t instanceof paper.Gradient ? (t = this._generateGradientColor(t.clone()), 
            this.callbackToPrompter(t), this.mode !== this.MODE_GRADIENT && this.changeMode(this.MODE_GRADIENT, t.gradient), 
            this.colorPicker.setColor(t.gradient.stops[0].color)) :(this.onUserChoseColor(!!t, t), 
            this.colorPicker.setColor(t));
        }, e.prototype._cleanup = function() {
            return this.mode === this.MODE_GRADIENT && this.gradientTool ? (this._deactivateGradientTool(), 
            this.gradient && this.model.addToRecent(this.gradient.clone())) :this.color && this.model.addToRecent(this.color), 
            this.callback = null;
        }, e.prototype.onShow = function(t) {
            return this.setFocus(), this.colorPicker.onShow ? this.colorPicker.onShow(t) :void 0;
        }, e.prototype.onHide = function(t) {
            return this.callbackWithCurrentColor(), this._cleanup(), this.resetFocus(), this.colorPicker.onHide ? this.colorPicker.onHide(t) :void 0;
        }, e;
    }(Draw.EmbedPane), Draw.ColorsView.COLORS_CLASS = "color-view";
}.call(this), function() {
    var t, e, i = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, n = {}.hasOwnProperty, o = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var o in e) n.call(e, o) && (t[o] = e[o]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.Comments = function(e) {
        function n() {
            return this.closeCurrentThread = i(this.closeCurrentThread, this), this.resetCommentFocus = i(this.resetCommentFocus, this), 
            this.setCommentFocus = i(this.setCommentFocus, this), this.toggleEnabled = i(this.toggleEnabled, this), 
            this.onSelectionMoved = i(this.onSelectionMoved, this), this.onChangeCurrentThread = i(this.onChangeCurrentThread, this), 
            this.onEscape = i(this.onEscape, this), this._showThread = i(this._showThread, this), 
            t = n.__super__.constructor.apply(this, arguments);
        }
        return o(n, e), mixin(n, $.ui.mouse), n.prototype._module = "Comments", n.prototype.widgetName = "comments", 
        n.prototype.focusType = Draw.FOCUS_COMMENTS, n.prototype.events = {
            mouseup:"onMouseUp",
            "focus .qtip textarea":"setCommentFocus",
            "blur .qtip textarea":"resetCommentFocus"
        }, n.prototype.initialize = function(t) {
            var e, i = this;
            return e = {
                enabled:!1
            }, this.options = _.extend(e, this.options, t), this.document = this.options.document, 
            this.element = this.el, this.selection = new Draw.DomSelection(), this.el.append(this.selection.el), 
            this.comments = new Easel.Comments(this.options.comments || [], {
                document_id:this.document.id
            }), Easel.Comments.SYNC && window.User && window.User.canViewComments() && !this.options.comments && this.comments.fetch(), 
            this.commentsController = new Easel.CommentsController({
                model:this.comments
            }), this.commentsController.bind("ready", function() {
                return i.trigger("refresh", i, i.comments);
            }), this.threadsView = new Easel.ThreadsView({
                model:this.commentsController.rootComments,
                parent:this.comments,
                el:this.el
            }), this.commentsController.bind("thread:destroy", this.onThreadDestroy), this.threadsView.bind("change:current", this.onChangeCurrentThread), 
            this.threadsView.bind("new:thread", this.commentsController.registerThread), this.selection.setBounds(30, 40, 100, 50), 
            this.selection.bind("drag:stop", this.onSelectionMoved), this.selection.bind("resize:stop", this.onSelectionMoved), 
            this.selection.hide(), this.id = _.uniqueId("comment-view-"), this._enabled = null, 
            this.options.enabled ? this.enable() :this.disable();
        }, n.prototype._bindEvents = function() {
            return this._mouseInit(), this.document.pushFocus ? this.document.pushFocus(this) :void 0;
        }, n.prototype._unbindEvents = function() {
            return this._mouseDestroy(), this.document.popFocus ? this.document.popFocus(this) :void 0;
        }, n.prototype._getFlyout = function() {
            var t;
            return this.flyout || (this.flyout = new Draw.CommentFlyout({
                target:this.selection.el,
                document:this.document
            }), this.flyout.setContainer(this.el), this.flyout.setViewport($("body")), this.flyout.render(!1), 
            this.flyout.bind("cancel", this.closeCurrentThread), t = Draw.FocusManager.instance(), 
            t && t.register(this.flyout)), this.flyout;
        }, n.prototype._showThread = function(t, e) {
            var i, n;
            return i = this._getFlyout(), t && i.setContent(t), e && this.selection.setBounds(e.get("x"), e.get("y"), e.get("w"), e.get("h")), 
            t && (n = null, t.getRoot() && (n = t.getRoot().get("number")), this.selection.setMarkerNumber(n)), 
            this.selection.show(), i.show();
        }, n.prototype._hideThread = function() {
            return this._getFlyout().hide(), this.selection.hide();
        }, n.prototype.onEscape = function() {
            return this.closeCurrentThread() ? void 0 :this.trigger("escape", this);
        }, n.prototype.onMouseUp = function(t) {
            var e;
            return e = $(t.target), e.is(".comment-canvas") ? (this.closeCurrentThread(), !1) :void 0;
        }, n.prototype.onThreadDestroy = function(t, e) {
            return this.threadsView.current && this.threadsView.current.id === e.id ? this._hideThread() :void 0;
        }, n.prototype.onChangeCurrentThread = function(t, e) {
            return t ? this._showThread(t, e) :this._hideThread();
        }, n.prototype.onSelectionMoved = function() {
            return this.sendSelectionToCurrentThread(), this._showThread();
        }, n.prototype._mouseStart = function(t) {
            var e;
            return e = $(t.target), e.is(".comment-canvas") && User.canComment() ? (this._start = ViewUtil.XYInObject(t, e), 
            this.rect = new paper.Rectangle(0, 0, 10, 10), this.selection.setMarkerNumber(null), 
            this.selection.show()) :void 0;
        }, n.prototype._mouseDrag = function(t) {
            var e;
            if (this._start) return e = ViewUtil.XYInObject(t, this.el), e = new paper.Point(e.x, e.y), 
            this.rect.initialize(this._start, e), this.selection.setBounds(this.rect.x, this.rect.y, this.rect.width, this.rect.height);
        }, n.prototype._mouseStop = function() {
            var t;
            if (this._start) return t = this.selection.getBounds(), t.w > 10 && t.h > 10 ? (this.threadsView.newThread(), 
            this.sendSelectionToCurrentThread()) :(this.closeCurrentThread(), this.selection.hide()), 
            this._start = null;
        }, n.prototype.getId = function() {
            return this.id;
        }, n.prototype.getTool = function() {
            var t = this;
            return this._tool || (this._tool = new Draw.CommentModeTool(this.document), this._tool.bind("escape", this.onEscape), 
            this._tool.bind("toggleCommentMode", this.toggleEnabled), this._tool.bind("help", function() {
                return t.trigger("help");
            })), this._tool;
        }, n.prototype.areResolvedShowing = function() {
            return this.threadsView.areResolvedShowing();
        }, n.prototype.showResolved = function(t) {
            return this.threadsView.showResolved(t);
        }, n.prototype.showComment = function(t) {
            var e;
            return this.enable(), e = this.commentsController.getComment(t), this.threadsView.open(e);
        }, n.prototype.isEnabled = function() {
            return this._enabled;
        }, n.prototype.toggleEnabled = function() {
            return this._enabled ? this.disable() :this.enable();
        }, n.prototype.enable = function() {
            return User.canViewComments() && !this._enabled ? (this._enabled = !0, this.el.show(), 
            this.comments.startPollingForChanges(), this._bindEvents(), this.trigger("change:enable", this, !0)) :void 0;
        }, n.prototype.disable = function() {
            return this._enabled !== !1 ? (this.closeCurrentThread(), this.el.hide(), this.comments.stopPollingForChanges(), 
            this._unbindEvents(), this._enabled = !1, this.trigger("change:enable", this, !1)) :void 0;
        }, n.prototype.setCommentFocus = function() {
            return this.flyout ? this.flyout.setFocus() :void 0;
        }, n.prototype.resetCommentFocus = function() {
            return this.flyout ? this.flyout.resetFocus() :void 0;
        }, n.prototype.closeCurrentThread = function() {
            var t;
            return t = null != this.threadsView.currentThread, this.threadsView.close(), t;
        }, n.prototype.sendSelectionToCurrentThread = function() {
            var t;
            return this.threadsView.currentThread ? (t = this.selection.getBounds(), t.document_id = this.document.id, 
            this.threadsView.currentThread.setData(t)) :void 0;
        }, n.prototype.setSize = function(t, e) {
            return this.el.width(t), this.el.height(e);
        }, n;
    }(Backbone.View), Draw.DomSelection = function(t) {
        function i() {
            return e = i.__super__.constructor.apply(this, arguments);
        }
        return o(i, t), i.prototype._module = "Comments", i.prototype.className = "dom-selection", 
        i.prototype.template = '<div class="thread-marker placed"></div>', i.prototype.initialize = function(t) {
            var e;
            return e = {}, this.options = _.extend(e, t), this.render();
        }, i.prototype.show = function() {
            return this.el.show();
        }, i.prototype.hide = function() {
            return this.el.hide();
        }, i.prototype.setBounds = function(t, e, i, n) {
            return this.setPosition(t, e), this.setSize(i, n);
        }, i.prototype.getBounds = function() {
            return {
                x:parseInt(this.el.css("left")),
                y:parseInt(this.el.css("top")),
                w:parseInt(this.el.width()),
                h:parseInt(this.el.height())
            };
        }, i.prototype.setPosition = function(t, e) {
            return this.el.css({
                top:e,
                left:t
            });
        }, i.prototype.setSize = function(t, e) {
            return this.el.width(t), this.el.height(e);
        }, i.prototype.setMarkerNumber = function(t) {
            var e;
            return e = this.$(".thread-marker"), t ? e.show().text(t) :e.hide();
        }, i.prototype.render = function() {
            var t, e = this;
            return t = i.__super__.render.call(this), this.el.draggable({
                start:function() {
                    return print("start drag"), e.trigger("drag:start");
                },
                stop:function() {
                    return print("stop drag"), e.trigger("drag:stop");
                }
            }).resizable({
                handles:"n, e, s, w, ne, se, sw, nw",
                start:function() {
                    return print("start resize"), e.trigger("resize:start");
                },
                stop:function() {
                    return print("stop resize"), e.trigger("resize:stop");
                }
            }), t;
        }, i;
    }(Backbone.View);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.CommentFlyout = function(i) {
        function o() {
            return this.onCancel = e(this.onCancel, this), this.onEscape = e(this.onEscape, this), 
            this.onSubmit = e(this.onSubmit, this), this.unbindDocClick = e(this.unbindDocClick, this), 
            this.bindDocClick = e(this.bindDocClick, this), this.onClickTooltip = e(this.onClickTooltip, this), 
            this.render = e(this.render, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.idBase = "comment-flyout-", o.prototype.className = "draw-dialog comment-flyout", 
        o.prototype.wrapper = '  <div>    <div class="content"></div>  </div>  ', o.prototype.tagName = "div", 
        o.prototype.focusType = "focus_textbox", o.prototype.noHideSelector = ".dont-hide-flyout", 
        o.prototype.DEFAULTS = {
            pane:null,
            my:"left top",
            at:"right top",
            hideOnUnfocus:!0
        }, o.prototype.QTIP_DEFAULTS = {
            content:{
                text:".."
            },
            show:{
                ready:!1,
                delay:0,
                effect:!1,
                event:"click"
            },
            hide:{
                event:null,
                delay:0,
                effect:!1
            },
            position:{
                adjust:{
                    method:"flip shift",
                    scroll:!1,
                    x:10
                }
            },
            style:{
                classes:"ui-flyout ui-comment-flyout ui-flyout-light",
                tip:!1
            },
            events:{}
        }, o.prototype.render = function(t) {
            return o.__super__.render.call(this, t), this.qtip.elements.tooltip.click(this.onClickTooltip);
        }, o.prototype.getReplyBox = function() {
            return this.qtip.elements.tooltip.find("textarea");
        }, o.prototype.getTool = function() {
            return this._tool || (this._tool = new Draw.CommentTool(this.options.document), 
            this._tool.bind("escape", this.onEscape), this._tool.bind("submit", this.onSubmit)), 
            this._tool;
        }, o.prototype.onClickTooltip = function(t) {
            var e;
            return e = $(t.target), e.is("textarea") ? void 0 :this.getReplyBox().blur();
        }, o.prototype.setFocusOnShow = function() {}, o.prototype.resetFocusOnHide = function() {}, 
        o.prototype.bindDocClick = function() {
            return $("body").bind("mousedown", this.onDocClick);
        }, o.prototype.unbindDocClick = function() {
            return $("body").unbind("mousedown", this.onDocClick);
        }, o.prototype.onSubmit = function() {
            return this.pane && this.pane.submitFocused ? this.pane.submitFocused() :void 0;
        }, o.prototype.onEscape = function() {
            return this.onCancel(this.pane);
        }, o.prototype.onCancel = function(t) {
            return this.trigger("cancel", t);
        }, o.prototype._unbindPane = function(t) {
            return t ? (o.__super__._unbindPane.call(this, t), t.unbind("cancel", this.onCancel)) :void 0;
        }, o.prototype._bindPane = function(t) {
            return t ? (o.__super__._bindPane.call(this, t), t.bind("cancel", this.onCancel)) :void 0;
        }, o;
    }(Draw.Flyout);
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    Draw.ConnectionView = function() {
        function e(e) {
            this._setMessage = t(this._setMessage, this), this.show = t(this.show, this), this.hide = t(this.hide, this), 
            this.onChange = t(this.onChange, this), this.onNotify = t(this.onNotify, this);
            var i, n, o, r;
            i = {
                connection:null,
                el:null,
                speed:200
            }, this.options = _.extend(i, e), r = this.STATES;
            for (n in r) o = r[n], this.register(n);
            this.document = this.options.document, this.document.bind("notify:status", this.onNotify), 
            this.el = this.options.el, this.top = parseInt(this.el.css("top")), this.height = this.el.height(), 
            this.reposition(), this.onChange(this.options.connection.state);
        }
        return e.prototype.STATES = {
            ok:[ "success", "Online" ],
            connecting:[ "warning", "Connecting..." ],
            handshaking:[ "warning", "Connecting..." ],
            disconnected:[ "important", "Offline" ],
            stopped:[ "important", "Error" ]
        }, e.prototype.reposition = function() {
            return this.el.css({
                left:$(document).width() / 2 - this.el.width() / 2
            });
        }, e.prototype.register = function(t) {
            var e;
            return e = this.options, e.connection.on(t, _.bind(this.onChange, this, t));
        }, e.prototype.onNotify = function(t, e) {
            return this._setMessage(t, e);
        }, e.prototype.onChange = function(t) {
            var e, i, n;
            return n = this.STATES[t], e = n[0], i = n[1], this._setMessage(i, e);
        }, e.prototype.hide = function() {
            return this.options.el.stop().animate({
                top:this.top - 2 * this.height
            }, this.options.speed);
        }, e.prototype.show = function() {
            return this.reposition(), this.options.el.stop().animate({
                top:this.top
            }, this.options.speed);
        }, e.prototype._setMessage = function(t, e) {
            return this.el[0].className = e, this.el.html(t), this.show(), this.timeout && clearTimeout(this.timeout), 
            "success" === e ? this.timeout = setTimeout(this.hide, 1e3) :void 0;
        }, e;
    }();
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.ConnectionErrorView = function() {
        function e(e) {
            this.onUpgradeJSON = t(this.onUpgradeJSON, this), this.onReconnect = t(this.onReconnect, this), 
            this.onDisconnect = t(this.onDisconnect, this);
            var i;
            i = {
                document:null
            }, this.options = _.extend(i, e), this.document = this.options.document, this.state = this.document.getDocumentState(), 
            this.state.bind("disconnect", this.onDisconnect), this.state.bind("reconnect", this.onReconnect), 
            this.state.bind("upgrade:json", this.onUpgradeJSON);
        }
        return e.prototype.onDisconnect = function() {
            return this._lockedOverlay || (this._lockedOverlay = new Draw.ModalOverlay({
                pane:new Draw.EmbedPane({
                    template:'<div class="offline-message">\n  <h1>Easel is Offline :(</h1>\n  <p style="margin-bottom: 0;">This message will go away when the internet comes back.</p>\n</div>',
                    document:this.document
                }),
                document:this.document
            })), this._lockedOverlay.show();
        }, e.prototype.onReconnect = function() {
            return this._lockedOverlay ? this._lockedOverlay.hide() :void 0;
        }, e.prototype.onUpgradeJSON = function() {
            var t;
            return t = this._createUpgradeOverlay(), t.show();
        }, e.prototype._createUpgradeOverlay = function() {
            var e, n, o, r, s, a;
            return this._upgradeOverlay ? this._upgradeOverlay :(o = '<div class="modal upgrade-message">\n  <div class="modal-header">\n    <h3>Updated!</h3>\n  </div>\n\n  <div class="modal-body">\n    <p>Easel has been updated and this browser window needs to be reloaded!</p>\n  </div>\n\n  <div class="modal-footer">\n    <a href="#" class="cta btn btn-primary pull-left">Reload</a>\n  </div>\n</div>', 
            e = function(e) {
                function n() {
                    return this.onKeyDown = t(this.onKeyDown, this), s = n.__super__.constructor.apply(this, arguments);
                }
                return i(n, e), n.prototype.onKeyDown = function(t) {
                    var e;
                    return e = this.getKey(t), "escape" === e ? !1 :!0;
                }, n;
            }(Draw.BasicViewTool), n = function(t) {
                function e() {
                    return a = e.__super__.constructor.apply(this, arguments);
                }
                return i(e, t), e.prototype.template = o, e.prototype.events = {
                    "click a.cta":"onClickGo"
                }, e.prototype.onClickGo = function() {
                    return window.location.reload(), !1;
                }, e;
            }(Draw.EmbedPane), r = new n({
                document:this.document
            }), this._upgradeOverlay = new Draw.ModalOverlay({
                pane:r,
                document:this.document,
                tool:new e(this.document)
            }), this._upgradeOverlay);
        }, e;
    }();
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.FixedDialog = function(i) {
        function o() {
            return this.hide = e(this.hide, this), this.show = e(this.show, this), this.onWindowResize = e(this.onWindowResize, this), 
            this.setTitle = e(this.setTitle, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.template = "", o.prototype.toolsTemplate = _.template('<div class="tools-container">\n  <div class="tools">\n  </div>\n  <a href="#" class="collapser"><i class="icon"></i></a>\n</div>'), 
        o.prototype.className = "fixed-dialog", o.prototype.scrollableClass = ".scrollable", 
        o.prototype.events = {
            "click .collapser":"onClickCollapser",
            "mouseenter .collapser":"onEnterCollapser",
            "mouseleave .collapser":"onLeaveCollapser",
            mouseleave:"onLeaveDialog"
        }, o.prototype.initialize = function(t) {
            return o.__super__.initialize.call(this, t), this.resizeDelay = new Debouncer(200, this.onWindowResize), 
            this.render();
        }, o.prototype.render = function() {
            var t = this;
            return this.options.tools && (this.template = this.toolsTemplate), o.__super__.render.call(this), 
            this.options.tools && this.$(".tools").append(this.options.tools.el), $(window).resize(function() {
                return t.resizeDelay.update();
            }), this.setContent(this.options.pane), $("body").append(this.el), this.showDelay = new Debouncer(1e3, _.bind(this.show, this, {
                hoverShow:!0
            })), this.hideDelay = new Debouncer(500, this.hide), this.options.show && this.show(), 
            this.onWindowResize();
        }, o.prototype.setTitle = function(t) {
            return t = this.$(".title").html(t), t ? t.parent().css("display", "") :t.parent().css("display", "none");
        }, o.prototype.setContent = function(t) {
            return o.__super__.setContent.call(this, t), this.onWindowResize();
        }, o.prototype.onWindowResize = function() {
            var t, e, i, n, o;
            return i = $(".viewable-viewport").height(), this.options.tools && (o = this.$(".tools-container"), 
            e = o.height(), o.css({
                top:i / 2 - e / 2 - 20
            })), n = 0, t = this.$(this.scrollableClass).each(function() {
                var t;
                return t = $(this), n = Math.max(n, t.offset().top);
            }), t.css({
                height:i - n
            });
        }, o.prototype.onClickCollapser = function() {
            return this._visible ? this.hide() :(this.show(), this.clickOpen = !0), !1;
        }, o.prototype.onEnterCollapser = function() {
            return this._visible ? void 0 :this.showDelay.update();
        }, o.prototype.onLeaveCollapser = function() {
            return this.showDelay.stop();
        }, o.prototype.onLeaveDialog = function() {
            return this._visible && this.hoverShow ? (this.hideDelay.update(), !1) :void 0;
        }, o.prototype.show = function(t) {
            return t = t || {}, this._visible ? void 0 :(this.hoverShow = t.hoverShow, this.el.addClass("open"), 
            this._visible = !0, this.trigger("show", this), this.pane && this.pane.onShow && this.pane.onShow(), 
            this.$(this.scrollableClass).chromeScrollBug());
        }, o.prototype.hide = function() {
            return this._visible ? (this.hoverShow = null, this.el.removeClass("open"), this._visible = !1, 
            this.trigger("hide", this), this.pane && this.pane.onHide && this.pane.onHide(), 
            this.$(this.scrollableClass).chromeScrollBug()) :void 0;
        }, o.prototype._bindPane = function(t) {
            return t && t.bind ? (o.__super__._bindPane.call(this, t), t.bind("change:title", this.setTitle)) :void 0;
        }, o.prototype._unbindPane = function(t) {
            return t && t.bind ? (o.__super__._unbindPane.call(this, t), t.unbind("change:title", this.setTitle)) :void 0;
        }, o.prototype._setContent = function(t) {
            return this.el.append(t);
        }, o;
    }(Draw.DialogBase);
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    }, n = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.DialogManager = function() {
        function e(e) {
            this._createUndo = t(this._createUndo, this), this._createSymbols = t(this._createSymbols, this), 
            this._createProperties = t(this._createProperties, this), this._initDialogs = t(this._initDialogs, this), 
            this._getDialogOptions = t(this._getDialogOptions, this), this.onNotifyVideo = t(this.onNotifyVideo, this), 
            this.onNotifyDialog = t(this.onNotifyDialog, this), this.toggleDialogs = t(this.toggleDialogs, this), 
            this.toggleDialogUndo = t(this.toggleDialogUndo, this), this.toggleDialogSymbols = t(this.toggleDialogSymbols, this);
            var i, n, o, r, s, a, l;
            for (i = {
                dialogs:this.DIALOGS,
                dialogOptions:{}
            }, this.options = _.extend({}, i, e), this.document = e.document, this.focusManager = this.options.focusManager, 
            this.document.bind("toggle:dialogs", this.toggleDialogs), this.document.bind("notify:dialog", this.onNotifyDialog), 
            this.document.bind("notify:video", this.onNotifyVideo), l = this.options.dialogs, 
            s = 0, a = l.length; a > s; s++) r = l[s], o = _.camelize("toggle_dialog_" + r), 
            n = "toggle:dialog_" + r, this[o] && this.document.bind(n, this[o]);
            this._initDialogs(), this.notifyDocument("toggle:dialogs", !0);
        }
        return e.prototype.DIALOGS = [ "properties", "symbols", "undo" ], e.prototype.LAZY_LOAD = [ "undo" ], 
        e.prototype.DIALOG_DEFAULTS = {
            properties:{
                position:{
                    top:60,
                    right:20
                }
            },
            symbols:{
                show:!1,
                position:{
                    bottom:20,
                    left:20
                }
            },
            undo:{
                show:!1,
                position:{
                    bottom:20,
                    right:20
                }
            }
        }, e.prototype.VIDEO_TEMPLATE = '<div class="modal info-modal video-dialog">\n  <div class="modal-header">\n    <h3>{{title}}</h3>\n  </div>\n\n  <div class="modal-body">\n    <- if(description){ ->\n      <div class="description">\n        {{description}}\n      </div>\n    <- } ->\n\n    <p>\n      <iframe src="http://player.vimeo.com/video/{{videoid}}" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>\n    </p>\n\n    <- if(permalink){ ->\n      <p>\n        <a href="{{permalink}}" target="_blank">Open in a new window &rarr;</a>\n      </p>\n    <- } ->\n  </div>\n\n  <div class="modal-footer">\n    <button href="#" class="btn btn-large">I\'m Done</button>\n  </div>\n</div>', 
        e.prototype.notifyToggle = function(t, e) {
            return this.notifyDocument(this._getEventName(t), e);
        }, e.prototype.notifyDocument = function(t, e) {
            return this.document.set(t, e);
        }, e.prototype.toggleDialogSymbols = function() {
            return this._dialogToggler("symbols");
        }, e.prototype.toggleDialogUndo = function() {
            return this._dialogToggler("undo");
        }, e.prototype.toggleDialogs = function() {
            var t, e, i, n, o, r, s;
            if (this.document.getFocus() === Draw.FOCUS_CANVAS) {
                if (this._lastOptions) {
                    for (r = this.options.dialogs, e = 0, n = r.length; n > e; e++) t = r[e], this.dialogs[t] && (this._lastOptions[t].show ? this.dialogs[t].show() :this.dialogs[t].hide());
                    return this._lastOptions = null, this.notifyDocument("toggle:dialogs", !0);
                }
                for (this._lastOptions = this._getDialogOptions(), s = this.options.dialogs, i = 0, 
                o = s.length; o > i; i++) t = s[i], this.dialogs[t] && this.dialogs[t].hide();
                return this.notifyDocument("toggle:dialogs", !1);
            }
        }, e.prototype.onNotifyDialog = function(t, e, n) {
            var o, r, s, a;
            return o = function(t) {
                function n() {
                    return a = n.__super__.constructor.apply(this, arguments);
                }
                return i(n, t), n.prototype.template = e, n.prototype.events = {
                    "click a.cta":"onClickGo",
                    "click button.btn":"onClickGo",
                    "click a.link":"onClickLink"
                }, n.prototype.onClickGo = function() {
                    return this.hide(), !1;
                }, n.prototype.onClickLink = function() {
                    return this.hide(), !0;
                }, n;
            }(Draw.EmbedPane), s = new o({
                document:t
            }), r = new Draw.ModalOverlay({
                pane:s,
                document:t
            }), r.bind("hide", function() {
                return r.remove(), _.isFunction(n) ? n() :void 0;
            }), r.show();
        }, e.prototype.onNotifyVideo = function(t, e, i, n, o) {
            var r, s;
            return r = {
                title:e,
                videoid:i,
                permalink:n,
                description:o
            }, s = _.template(this.VIDEO_TEMPLATE, r), window.TESTING && (s = s.replace(/iframe/gi, "div")), 
            this.onNotifyDialog(t, s);
        }, e.prototype._dialogToggler = function(t) {
            return !this.dialogs[t] && n.call(this.LAZY_LOAD, t) >= 0 && this._initDialog(t), 
            this.dialogs[t] ? this.dialogs[t].isVisible() ? this.dialogs[t].hide() :this.dialogs[t].show() :void 0;
        }, e.prototype._getEventName = function(t) {
            return "toggle:dialog_" + t;
        }, e.prototype._getDialogOptions = function() {
            var t, e, i, n, o, r;
            if (this._lastOptions) return this._lastOptions;
            for (i = {}, r = this.options.dialogs, n = 0, o = r.length; o > n; n++) e = r[n], 
            t = this.dialogs[e], t && (i[e] = {
                show:t.isVisible()
            }, t.getPosition && (i[e].position = t.getPosition()));
            return i;
        }, e.prototype._initDialogs = function() {
            var t, e, i, n, o;
            for (this.dialogs = {}, t = _.difference(this.options.dialogs, this.LAZY_LOAD), 
            o = [], i = 0, n = t.length; n > i; i++) e = t[i], o.push(this._initDialog(e));
            return o;
        }, e.prototype._initDialog = function(t) {
            var e, i, n;
            return e = this.options.dialogOptions, i = "_" + _.camelize("create_" + t), _.isFunction(this[i]) ? (n = _.extend({}, this.DIALOG_DEFAULTS[t], e[t]), 
            this.dialogs[t] = this[i](n)) :$.log("missing create dialog fn for", t), this.dialogs[t] ? (this.notifyToggle(t, this.dialogs[t].isVisible() || !1), 
            this.dialogs[t].bind("show", _.bind(this.notifyToggle, this, t, !0)), this.dialogs[t].bind("hide", _.bind(this.notifyToggle, this, t, !1))) :void 0;
        }, e.prototype._createProperties = function(t) {
            var e, i = this;
            return e = function() {
                var n, o;
                return i.document.selectionModel.unbind("change:selected", e), o = new Draw.DrawableInspector({
                    model:i.document,
                    el:$("#properties")
                }), n = new Draw.FixedDialog(_.extend({}, {
                    model:i.document,
                    pane:o,
                    className:"fixed-dialog properties-dialog"
                }, t)), i.focusManager && i.focusManager.register(n), o.selectedObject.apply(o, arguments), 
                i.dialogs.properties = n;
            }, this.document.selectionModel.bind("change:selected", e), null;
        }, e.prototype._createSymbols = function(t) {
            var e, i, n, o = this;
            return n = new Draw.ToolsView({
                model:this.document,
                el:$("#tools")
            }), e = new Draw.FixedDialog(_.extend({}, {
                model:this.document,
                tools:n,
                pane:null,
                className:"fixed-dialog symbols-dialog"
            }, t)), i = function() {
                var t;
                return e.unbind("show", i), t = new Draw.SymbolsContainer({
                    model:o.document,
                    elements:o.options.elements
                }), e.setContent(t);
            }, e.bind("show", i), e;
        }, e.prototype._createUndo = function(t) {
            var e, i;
            if (this.document.state && this.document.state.undo) return i = new Draw.UndoPane({
                document:this.document,
                undo:this.document.state.undo
            }), e = new Draw.Dialog(_.extend({}, {
                title:"Undo, bro",
                model:this.document,
                pane:i,
                closeButton:!0
            }, t)), this.focusManager && this.focusManager.register(e), e;
        }, e;
    }();
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.DocumentView = function(i) {
        function o() {
            return this._setDocumentSize = e(this._setDocumentSize, this), this._redrawLayer = e(this._redrawLayer, this), 
            this._redrawUserLayer = e(this._redrawUserLayer, this), this._paperEv = e(this._paperEv, this), 
            this._paperKeyEv = e(this._paperKeyEv, this), this.onPreviewEnd = e(this.onPreviewEnd, this), 
            this.onPreviewStart = e(this.onPreviewStart, this), this.onDCMouseup = e(this.onDCMouseup, this), 
            this.onDCMousedown = e(this.onDCMousedown, this), this.onDCKeyup = e(this.onDCKeyup, this), 
            this.onDCKeypress = e(this.onDCKeypress, this), this.onDCKeydown = e(this.onDCKeydown, this), 
            this.onRedraw = e(this.onRedraw, this), this.onChangeSelection = e(this.onChangeSelection, this), 
            this.onChangeDocState = e(this.onChangeDocState, this), this.onChangeBackgroundCss = e(this.onChangeBackgroundCss, this), 
            this.onChangeDocumentCursor = e(this.onChangeDocumentCursor, this), this.onChangeDocumentZoom = e(this.onChangeDocumentZoom, this), 
            this.onChangeDocumentSize = e(this.onChangeDocumentSize, this), this.setRedrawEnable = e(this.setRedrawEnable, this), 
            this.getDocumentSize = e(this.getDocumentSize, this), this.getScale = e(this.getScale, this), 
            this._initializeReadyRequired = e(this._initializeReadyRequired, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.events = {}, o.prototype.template = "#document-template", 
        o.prototype.className = "viewport", Destructor.mixin(o), o.prototype.initialize = function(t) {
            var e;
            return e = {
                domCanvas:".dom-canvas",
                initiallyAttachStyleSheets:!1
            }, this.options = t = _.extend({}, e, t), this.id = _.uniqueId("view-"), this.options.el || (this.render({
                id:this.model.id
            }), $("body").append(this.el)), window.TESTING || (this.frame = this.$(".dom-frame"), 
            this.frame.length && (this.frame[0].contentWindow.onerror = window.onerror)), this.documentEl = this.$(".document"), 
            this._redrawEnable = !0, this.redrawDelay = new Debouncer(3, this._redrawUserLayer), 
            this._requestCounts = {}, this._requestCounts[Draw.LAYER_USER] = 0, this._requestCounts[Draw.LAYER_TOOL] = 0, 
            this._requestCounts[Draw.LAYER_BOTTOM_TOOL] = 0, this.renderModels = {}, this.renderModels[Draw.LAYER_USER] = new Draw.RenderModel(), 
            this.renderModels[Draw.LAYER_TOOL] = new Draw.RenderModel(), this.model.bind("redraw", this.onRedraw), 
            this.model.bind("change:size", this.onChangeDocumentSize), this.model.bind("change:zoom", this.onChangeDocumentZoom), 
            this.model.bind("change:cursor", this.onChangeDocumentCursor), this.model.bind("change:state", this.onChangeDocState), 
            this.model.bind("change:background_color", this.onChangeBackgroundCss), this.model.bind("change:background_image", this.onChangeBackgroundCss), 
            this.model.bind("change:toggle:background_image", this.onChangeBackgroundCss), this.model.bind("change:toggle:background_cover", this.onChangeBackgroundCss), 
            this.model.bind("change:background_repeat", this.onChangeBackgroundCss), this.model.bind("change:background_position", this.onChangeBackgroundCss), 
            this.model.selectionModel && (this.model.selectionModel.bind("change:selected", this.onChangeSelection), 
            this.model.selectionModel.bind("change:preselected", this.onChangeSelection), this.model.selectionModel.bind("remove:selected", this.onChangeSelection), 
            this.model.selectionModel.bind("remove:preselected", this.onChangeSelection)), this.waitReady(this._initializeReadyRequired), 
            this.options.mode && this.setMode(this.options.mode), Draw.DocumentView._cacheObject(this);
        }, o.prototype.destroy = function() {
            return this.model.unbind("redraw", this.onRedraw), this.model.unbind("change:size", this.onChangeDocumentSize), 
            this.model.unbind("change:zoom", this.onChangeDocumentZoom), this.model.unbind("change:cursor", this.onChangeDocumentCursor), 
            this.model.unbind("change:state", this.onChangeDocState), this.model.unbind("change:background_color", this.onChangeBackgroundCss), 
            this.model.unbind("change:background_image", this.onChangeBackgroundCss), this.model.unbind("change:toggle:background_image", this.onChangeBackgroundCss), 
            this.model.unbind("change:toggle:background_cover", this.onChangeBackgroundCss), 
            this.model.unbind("change:background_repeat", this.onChangeBackgroundCss), this.model.unbind("change:background_position", this.onChangeBackgroundCss), 
            this.model.selectionModel && (this.model.selectionModel.unbind("change:selected", this.onChangeSelection), 
            this.model.selectionModel.unbind("change:preselected", this.onChangeSelection), 
            this.model.selectionModel.unbind("remove:selected", this.onChangeSelection), this.model.selectionModel.unbind("remove:preselected", this.onChangeSelection)), 
            this.domCanvas = null, this.frame = null, this.documentEl = null, this.el.remove(), 
            this.el = null;
        }, o.prototype.toString = function() {
            return "DocumentView " + this.id;
        }, o.prototype.$$ = function(t) {
            return this.frameDoc ? this.frameDoc.find(t) :this.el.find(t);
        }, o.prototype.isReady = function() {
            return !(!window.TESTING && !this._ready);
        }, o.prototype.waitReady = function(t) {
            var e, i, n = this;
            return this.isReady() ? t(this) :(i = function() {
                return n._ready = !0, n.frame.off("load", i), n.frame.off("error", e), t(n);
            }, e = function() {
                return n.frame.off("load", i), n.frame.off("error", e), pd("iframe load error");
            }, this.frame.on("load", i), this.frame.on("error", e));
        }, o.prototype._initializeReadyRequired = function() {
            var t = this;
            return this.frame && (this.frameDoc = this.frame.contents()), this.domCanvas = this.$$(this.options.domCanvas), 
            this.options.initiallyAttachStyleSheets && this.options.projectDocument && this.options.projectDocument.attachStyleSheetsToDocument(this.getHTMLDocument()), 
            this.options.projectDocument && this.options.projectDocument.bind("load", function() {
                return t.options.projectDocument.attachStyleSheetsToDocument(t.getHTMLDocument());
            }), this.onChangeDocumentSize(this.model, !1), this.onChangeBackgroundCss(this.model), 
            this._initDomCanvasEvents(), this._preventDefaultSubmit();
        }, o.prototype.getHTMLDocument = function() {
            return this.frameDoc ? this.frameDoc :window.document;
        }, o.prototype.setMode = function(t) {
            var e, i = this;
            return e = this.options.mode, this.options.mode = t, this.waitReady(function() {
                return e && i.domCanvas.removeClass(e), i.options.mode ? i.domCanvas.addClass(i.options.mode) :void 0;
            });
        }, o.prototype.getScale = function() {
            return this.model.get("zoom") / 100;
        }, o.prototype.getDocumentSize = function(t) {
            var e;
            return e = this.model.get("size"), t && (e = e.multiply(new paper.Size(t, t))), 
            e;
        }, o.prototype.setRedrawEnable = function(t) {
            return this._redrawEnable = t, this.redrawDelay.stop();
        }, o.prototype.onChangeDocumentSize = function() {
            var t, e;
            return t = this.getScale(), e = this.getDocumentSize(t), this._setDocumentSize(e);
        }, o.prototype.onChangeDocumentZoom = function() {
            var t, e;
            return t = this.getScale(), e = this.getDocumentSize(t), this._setDocumentSize(e, !0);
        }, o.prototype.onChangeDocumentCursor = function(t, e) {
            return e = t.get("cursor"), this.$("canvas").css("cursor", e || "default"), this.documentEl.css("cursor", e || "default");
        }, o.prototype.onChangeBackgroundCss = function() {
            var t, e, i, n, o;
            return t = this.domCanvas.parents("html"), e = Color.normalize(this.model.getBackgroundColor()), 
            e ? (t.removeClass("transparent"), t.css("background-color", e.toCssString())) :(t.css("background-color", ""), 
            t.addClass("transparent")), i = this.model.get("toggle:background_image"), n = this.model.get("background_image"), 
            i && n ? t.css("background-image", "url(" + n + ")") :t.css("background-image", "none"), 
            t.css("background-repeat", this.model.get("background_repeat")), t.css("background-position", this.model.get("background_position")), 
            o = "auto", this.model.get("toggle:background_cover") && (o = "cover"), t.css({
                "-webkit-background-size":o,
                "-moz-background-size":o,
                "-o-background-size":o,
                "background-size":o
            });
        }, o.prototype.onChangeDocState = function(t, e, i, n, o) {
            return this._redrawEnable && "change:config" !== t ? (pds(this, "doc state changed", arguments), 
            o.ignore ? (pds(this, "Ignoring change for redraw", arguments), void 0) :(this.renderModels[Draw.LAYER_USER].add(i), 
            this.renderModels[Draw.LAYER_USER].getRectangle() || $.warn("WTF no render model rect!", t, e, i, n, o), 
            $.log.enabled && pds(this, "added item to render model", i + "", this.renderModels[Draw.LAYER_USER].getRectangle() + "", "; request count", this._requestCounts[Draw.LAYER_USER]), 
            this._requestCounts[Draw.LAYER_USER] ? void 0 :this._redrawUserLayer())) :void 0;
        }, o.prototype.onChangeSelection = function(t, e) {
            var i, n, o, r;
            if (this._redrawEnable && e && (e = e instanceof paper.Item ? [ e ] :_.values(e), 
            e.length)) {
                for (o = 0, r = e.length; r > o; o++) n = e[o], i = !0, n.getSegments && (i = !!n.getSegments().length), 
                i && this.renderModels[Draw.LAYER_TOOL].add(n);
                return this._redrawLayer(Draw.LAYER_TOOL);
            }
        }, o.prototype.onRedraw = function(t, e, i, n) {
            return this._redrawEnable ? this._redrawLayer(e, n) :void 0;
        }, o.prototype.onDCKeydown = function(t) {
            return this._paperKeyEv(t, "keydown");
        }, o.prototype.onDCKeypress = function(t) {
            return this._paperKeyEv(t, "keypress");
        }, o.prototype.onDCKeyup = function(t) {
            return this._paperKeyEv(t, "keyup");
        }, o.prototype.onDCMousedown = function(t) {
            return this._paperEv(t, "mousedown", {
                cache:!0
            });
        }, o.prototype.onDCMouseup = function(t) {
            return this._paperEv(t, "mouseup", {
                useCache:!0
            });
        }, o.prototype.onPreviewStart = function() {
            return this.options.mode ? this.domCanvas.removeClass(this.options.mode) :void 0;
        }, o.prototype.onPreviewEnd = function() {
            return this.options.mode ? this.domCanvas.addClass(this.options.mode) :void 0;
        }, o.prototype._preventDefaultSubmit = function() {
            var t = this;
            return this.body = $("body"), this.domCanvas.on("click", "a", function() {
                return t.body.hasClass("preview") ? void 0 :!1;
            }), this.domCanvas.on("submit", "form", function() {
                return !1;
            });
        }, o.prototype._initDomCanvasEvents = function() {
            return this.frame ? (this.domCanvas.bind("mousedown", this.onDCMousedown).bind("mouseup", this.onDCMouseup).bind("keydown", this.onDCKeydown).bind("keypress", this.onDCKeypress).bind("keyup", this.onDCKeyup), 
            this.$$("body").bind("mousedown", this.onDCMousedown).bind("mouseup", this.onDCMouseup).bind("keydown", this.onDCKeydown).bind("keypress", this.onDCKeypress).bind("keyup", this.onDCKeyup)) :void 0;
        }, o.prototype._paperKeyEv = function(t, e) {
            var i;
            return (i = paper.Key.events[e])(t);
        }, o.prototype._paperEv = function(t, e, i) {
            var n, o;
            return i = i || {}, o = this.frame.offset(), t.pageX = t.pageX + o.left, t.pageY = t.pageY + o.top, 
            i.cache && (this._eventCache = t), i.useCache && (t = this._eventCache || t), (n = paper.View[e] || APP.view.paperView._events[e])(t);
        }, o.prototype._redrawUserLayer = function() {
            return this._redrawLayer(Draw.LAYER_USER);
        }, o.prototype._redrawLayer = function(t, e) {
            var i, n, o, r, s, a, l = this;
            if (this._redrawEnable) {
                if (!t || _.isString(t)) return i = function(t) {
                    var e;
                    return l._requestCounts[t] += 1, e = function() {
                        var e;
                        return e = l.renderModels[t], e && (e && (e = e.clone()), l.renderModels[t].clear()), 
                        (!e || e.getRectangle()) && l.trigger("draw", !1, t, e), l._requestCounts[t] -= 1;
                    }, window.RAWDRAW ? e() :requestAnimFrame(e);
                }, r = this.renderModels[t], e && r && r.add(e), i(t);
                for (o = s = 0, a = t.length; a > s; o = ++s) n = t[o], this._redrawLayer(n, o);
            }
        }, o.prototype._setDocumentSize = function(t) {
            var e;
            return this.frame && (this.frame.width(t.width), this.frame.height(t.height)), e = this.getScale(), 
            e = 1 !== e ? "scale(" + e + ")" :"", this.domCanvas.css({
                zoom:this.model.get("zoom") + "%",
                "-moz-transform-origin":"top left",
                "-o-transform-origin":"top left",
                "-moz-transform":e,
                "-o-transform":e
            }), this.documentEl.width(t.width), this.documentEl.height(t.height);
        }, o;
    }(Backbone.View);
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.ExportView = function(e) {
        function n(e) {
            this.options = null != e ? e :{}, this.onFinished = t(this.onFinished, this), this.onExportProject = t(this.onExportProject, this), 
            this.onExportThumbnail = t(this.onExportThumbnail, this), this.model = e.model, 
            this.model.bind("export:project", this.onExportProject), this.model.bind("export:thumbnail", this.onExportThumbnail), 
            this.model.bind("exported:thumbnail", this.onFinished), this.render();
        }
        return i(n, e), n.prototype.projectTemplate = '<form method="POST" action="/api/v1/packages/" id="project-download-form">\n</form>', 
        n.prototype.notPayingDialog = '<div class="modal info-modal">\n  <div class="modal-header">\n    <h3>Project Export</h3>\n  </div>\n\n  <div class="modal-body">\n    <p>\n      Project Export is limited to paying users.\n      Please upgrade to take advantage of this feature.\n    </p>\n  </div>\n\n  <div class="modal-footer">\n    <a href="/#plans/update" target="_blank" class="btn btn-large btn-info link">Upgrade</a>\n    <button href="#" target="_blank" class="btn btn-large">Not yet</button>\n  </div>\n</div>', 
        n.prototype.messageTemplate = _.template('<img src="{{path}}"/> {{message}}'), n.prototype.render = function() {
            return this.projectExportForm = this.el = $(this.projectTemplate), this;
        }, n.prototype.onExportThumbnail = function() {
            return this._showMessage("Exporting to PNG");
        }, n.prototype.onExportProject = function() {
            var t, e, i, n = this;
            if (e = this.options.projectDocument, t = e.easelProject.documents.length, t > 20) alert("You have a lot of documents to export, this might take a bit..."); else if (t > 30) return alert("You have too many documents to export. Please contact support@easel.io."), 
            void 0;
            return this.options.user.get("is_paid") ? (this._showMessage("Exporting to HTML and CSS"), 
            i = new Draw.Export.Project(e.easelProject, e, this.options.user.get("preferences")), 
            i["export"](this.projectExportForm, function() {
                return n.projectExportForm.submit(), n.onFinished();
            })) :this._showNotPayingDialog();
        }, n.prototype.onFinished = function() {
            return Draw.Growl.hide();
        }, n.prototype._showNotPayingDialog = function() {
            return this.model.dialogNotify(this.notPayingDialog);
        }, n.prototype._showMessage = function(t) {
            return Draw.Growl.notify(this._renderMessage(t), !1);
        }, n.prototype._renderMessage = function(t) {
            return this.messageTemplate({
                path:Asset.LOADING_URL_WHITE,
                message:t
            });
        }, n;
    }(Backbone.View);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.ExportProjectApp = function(i) {
        function o() {
            return this.onReady = e(this.onReady, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype._module = "ProjectExportApp", o.prototype.initialize = function(t) {
            return this.options = t, this.setupApp(t);
        }, o.prototype.setupApp = function() {
            return $.log.level = 0, $.log.enabled = !0, Draw.Storage.setServer(window.__node), 
            window.__proj.documents = window.__projDocs, this.user = new Easel.User(window.__user), 
            this.projId = window.__proj && window.__proj.eid || "demo", this.state = new Draw.AggregateDocumentState();
        }, o.prototype.loadDocuments = function() {
            var t, e = this;
            return this.projectDocument = new Draw.ProjectDocument({
                id:this.projId,
                state:this.state,
                metaJSON:window.__proj,
                realtime:!1
            }), this.projectDocument.state.fetch(), t = Draw.DocumentFactory.createInstance({
                state:this.state,
                projectDocument:this.projectDocument
            }), $(function() {
                return print("dom ready"), e.projectDocument.state.waitLoad(e.onReady), e.projectDocument.state.load();
            });
        }, o.prototype.onReady = function() {
            var t;
            return print("state loaded, creating export project"), t = new Draw.Export.Project(this.projectDocument.easelProject, this.projectDocument, this.user.get("preferences")), 
            t["export"]($("#export-data"), function() {
                return window.data = $("#export-data").serialize(), print("data ready"), $("#user-actions .length").text(window.data.length), 
                $("#user-actions .btn").prop("disabled", !1), $("#user-actions .btn").click(function() {
                    return $("form").submit();
                });
            });
        }, o;
    }(Backbone.View);
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, e = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.FocusManager = function() {
        function i(e) {
            this.popFocus = t(this.popFocus, this), this.pushFocus = t(this.pushFocus, this), 
            this.onUnfocusObject = t(this.onUnfocusObject, this), this.onFocusObject = t(this.onFocusObject, this), 
            this.doHotkey = t(this.doHotkey, this), this.doKeyCombo = t(this.doKeyCombo, this), 
            this.options = e || {}, this.document = e.document, this.objects = {}, this._focusStack = [], 
            this._focusType = Draw.FOCUS_CANVAS, this._focusObject = this.document, this.hotkeys = this.options.hotkeys, 
            this.hotkeys && this.hotkeys.bind("hotkey", this.doHotkey);
        }
        return i.prototype._module = "FocusManager", mixin(i, Backbone.Events), i.prototype.doKeyCombo = function(t) {
            var e, i, n, o, r, s, a, l;
            if (e = function(e) {
                return e && e.onKeyCombo ? e.onKeyCombo(t) :!1;
            }, r = this._lastFocusObj || [], o = this.getFocusObject(), i = e(o), !i) {
                for (l = [], n = s = a = r.length - 1; s >= 0 && (o = r[n], !e(o)); n = s += -1) l.push(void 0);
                return l;
            }
        }, i.prototype.doHotkey = function(t, i, n) {
            var o, r, s, a, l;
            return pds(this, "handling hotkey", t, i, n), this.trigger("hotkey:" + t, n), s = Draw.HotkeyFocusScope[t], 
            r = null, o = this.getFocusObject(), s && (a = Draw.FOCUS_DOCUMENT, e.call(s, a) >= 0) ? r = this.document :(!s || (l = o.focusType, 
            e.call(s, l) >= 0)) && (r = o), r && _.isFunction(r[t]) ? r[t].call(r, n) :void 0;
        }, i.prototype.register = function(t) {
            var e;
            return e = this._getObjectId(t), e ? t.bind && t.unbind && t.focusType ? e in this.objects ? (pds(this, "already registered:", e, t), 
            !1) :(this.objects[e] = t, t.bind("focus", this.onFocusObject), t.bind("unfocus", this.onUnfocusObject)) :(pds(this, "must have bind, unbind, and focusType", t), 
            !1) :(pds(this, "cant register: no id:", t), !1);
        }, i.prototype.unregister = function(t) {
            return t in this.objects && (delete this.objects[t.getId()], _removeFromFocus(t), 
            t.unbind) ? (t.unbind("focus", this.onFocusObject), t.unbind("unfocus", this.onUnfocusObject)) :void 0;
        }, i.prototype.onFocusObject = function(t) {
            return this.pushFocus(t);
        }, i.prototype.onUnfocusObject = function(t) {
            return this.popFocus(t);
        }, i.prototype._getObjectId = function(t) {
            return t.getId && t.getId() || t;
        }, i.prototype._removeFromFocus = function(t) {
            return this._focusStack = this._focusStack || [], this._focusStack = _.without(this._focusStack, this._getObjectId(t));
        }, i.prototype._popFocus = function() {
            return this._focusStack = this._focusStack || [], this._focusStack.pop();
        }, i.prototype._pushFocus = function(t) {
            var i;
            return i = this._getObjectId(t), i in this.objects || this.register(t), this._focusStack = this._focusStack || [], 
            e.call(this._focusStack, i) >= 0 && (this._focusStack = _.without(this._focusStack, i)), 
            this._focusStack.push(i), i;
        }, i.prototype._activateCurrentTool = function() {
            var t;
            return t = this.document.tools[this.document.getTool()], pds(this, "Activating user tool " + t, t), 
            t.activate();
        }, i.prototype._setFocus = function(t) {
            var e;
            return this._focusType = t && t.focusType || Draw.FOCUS_CANVAS, this._focusObject = t || this.document, 
            e = _.isFunction(this._focusObject.getTool) && this._focusObject.getTool() || null, 
            e instanceof Draw.Tool ? e.activate({
                type:"focus"
            }) :this._activateCurrentTool();
        }, i.prototype.peekId = function() {
            return this._focusStack[this._focusStack.length - 1];
        }, i.prototype.peek = function() {
            return this.objects[this.peekId()];
        }, i.prototype.getFocusType = function() {
            return this._focusType || Draw.FOCUS_CANVAS;
        }, i.prototype.getFocusObject = function() {
            return this._focusObject || this.document;
        }, i.prototype.testIds = 0, i.prototype.pushFocusForTests = function(t) {
            var e;
            return e = {
                _id:this.testIds++,
                focusType:t,
                getId:function() {
                    return "test" + this.id;
                },
                bind:function() {},
                unbind:function() {}
            }, this.register(e), this.pushFocus(e), e;
        }, i.prototype.pushFocus = function(t) {
            var e;
            return e = this._pushFocus(t), e ? (pds(this, "PUSH focus " + e, t, this.objects[e], this.objects), 
            this._setFocus(this.objects[e])) :void 0;
        }, i.prototype.popFocus = function(t) {
            var e, i;
            return e = this._getObjectId(t), this._removeFromFocus(t), this._focusStack.length ? (i = this._focusStack[this._focusStack.length - 1], 
            pds(this, "POP focus", e, "; setting to", i), this._setFocus(this.objects[i])) :this._setFocus(null), 
            pds(this, "FOCUS now:", this._focusType, this._focusObject);
        }, i.createInstance = function(t) {
            return this._instance || (this._instance = new Draw.FocusManager(t)), this._instance;
        }, i.instance = function() {
            return this._instance;
        }, i;
    }();
}.call(this), function() {
    var t, e, i = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, n = {}.hasOwnProperty, o = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var o in e) n.call(e, o) && (t[o] = e[o]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.FontView = function(e) {
        function n() {
            return this.clickFont = i(this.clickFont, this), this.render = i(this.render, this), 
            t = n.__super__.constructor.apply(this, arguments);
        }
        return o(n, e), n.prototype.template = "#font-template", n.prototype.className = "font-wrapper", 
        n.prototype.events = {
            click:"clickFont"
        }, n.prototype.render = function() {
            return n.__super__.render.call(this, this.model.attributes), this.el.addClass("font-" + this.model.get("uid")), 
            this.el.css("font-family", this.model.get("family")), this;
        }, n.prototype.clickFont = function() {
            return this.trigger("font", this, this.model), !1;
        }, n;
    }(Backbone.View), Draw.FontsView = function(t) {
        function n() {
            return this.onHide = i(this.onHide, this), this.onShow = i(this.onShow, this), this.callbackToPrompter = i(this.callbackToPrompter, this), 
            this.showItem = i(this.showItem, this), this.accept = i(this.accept, this), this.cancel = i(this.cancel, this), 
            this.clickFont = i(this.clickFont, this), this.highlightItem = i(this.highlightItem, this), 
            this.prompt = i(this.prompt, this), this.onAdd = i(this.onAdd, this), this.render = i(this.render, this), 
            this.remove = i(this.remove, this), this.removeFonts = i(this.removeFonts, this), 
            this.refresh = i(this.refresh, this), e = n.__super__.constructor.apply(this, arguments);
        }
        return o(n, t), n.prototype.template = "#fonts-template", n.prototype.tagName = "div", 
        n.prototype.className = "dialog-content fonts-view", n.prototype.containerSelector = ".fonts-container", 
        n.prototype.originTemplate = '<div class="origin origin-{{ origin }}">{{ str }}</div>', 
        n.prototype.ORIGIN_STR = {
            "native":"Native",
            typekit:"Typekit",
            google:"Google",
            local:"Your Computer"
        }, n.prototype.initialize = function(t) {
            return n.__super__.initialize.call(this, t), this.addDelay = new Debouncer(4e3, this.refresh), 
            this.views = [], this.model.bind("add", this.onAdd), this.render();
        }, n.prototype.refresh = function() {
            var t, e, i, n, o, r, s;
            for (this._added = !1, this.removeFonts(), i = null, r = this.model.models, s = [], 
            n = 0, o = r.length; o > n; n++) t = r[n], i !== t.get("origin") && (i = t.get("origin"), 
            this.container.append(this.renderTemplate(this.originTemplate, {
                origin:i,
                str:this.ORIGIN_STR[i]
            }))), e = new Draw.FontView({
                model:t
            }), e.bind("font", this.clickFont), this.views.push(e), s.push(this.container.append(e.render().el));
            return s;
        }, n.prototype.removeFonts = function() {
            var t, e, i, n;
            for (n = this.views, e = 0, i = n.length; i > e; e++) t = n[e], t.unbind("font", this.clickFont), 
            t.remove();
            return this.container.html(""), this.views = [];
        }, n.prototype.remove = function() {
            return this.removeFonts(), this.model.unbind("add", this.onAdd), n.__super__.remove.call(this);
        }, n.prototype.render = function() {
            return Draw.EmbedPane.prototype.render.call(this, {}), this.container = this.$(this.containerSelector), 
            this.refresh(), this;
        }, n.prototype._getFontUid = function(t) {
            var e, i;
            return e = this.model.getFamily(t || "Arial"), i = null, e && (i = e.get("uid")), 
            i;
        }, n.prototype.onAdd = function() {
            return this.addDelay.update();
        }, n.prototype.prompt = function(t, e) {
            return this.callback = t, this.highlightItem(e), this._original = this._selected = this.model.get(e.toLowerCase()), 
            this.trigger("show"), this.showItem(e);
        }, n.prototype.highlightItem = function(t) {
            var e;
            return this.$("." + Draw.FontView.prototype.className).removeClass("selected"), 
            e = this._getFontUid(t), e ? this.$(".font-" + e).addClass("selected") :void 0;
        }, n.prototype.selectItem = function(t) {
            var e;
            return e = t.get("family"), this.highlightItem(e), this._selected = t, this.callbackToPrompter(e);
        }, n.prototype.clickFont = function(t, e) {
            return this.selectItem(e), this.hide();
        }, n.prototype.inc = function(t) {
            var e, i;
            if (this._selected) return i = this.model.indexOf(this._selected), i = _.clamp(i + t, 0, this.model.length - 1), 
            e = this.model.at(i), this.selectItem(e), this.showItem(e.get("family"));
        }, n.prototype.cancel = function() {
            return this.selectItem(this._original), this.hide();
        }, n.prototype.accept = function() {
            return this.hide();
        }, n.prototype.showItem = function(t) {
            var e, i;
            return i = this._getFontUid(t), i ? (e = this.$(".font-" + i), n.__super__.showItem.call(this, e)) :void 0;
        }, n.prototype.callbackToPrompter = function(t) {
            return this.callback ? this.callback(!0, t) :void 0;
        }, n.prototype.onShow = function() {
            return this.container.chromeScrollBug();
        }, n.prototype.onHide = function() {}, n;
    }(Draw.DropdownEmbedPane);
}.call(this), function() {
    var t, e, i;
    Draw.Menu = {}, Draw.Menu.KEYS = {
        command:"⌘",
        control:"ctrl",
        escape:"esc",
        option:"⌥",
        shift:"⇧",
        up:"↑",
        down:"↓",
        left:"←",
        right:"→"
    }, Draw.Menu.toHotkeyString = function(t) {
        var e, i, n, o, r, s;
        for (n = [], i = t.split(" "), r = 0, s = i.length; s > r; r++) e = i[r], o = Draw.Menu.KEYS[e], 
        n.push(o || e.toUpperCase());
        return n.join("");
    }, Draw.Menu.generateGridMenu = function(t) {
        return new Draw.ObjectInspector({
            undo:!1,
            useWrapper:!0,
            wrapperClass:Draw.ObjectPropertyMenuItem,
            document:t.document,
            model:t.document.getGrid(),
            order:[ "color", "grid", "offset" ],
            propertyOptions:_.extend({
                scope:"grid",
                my:"left center",
                at:"right center"
            }, t),
            propertyClasses:{
                color:Draw.FillColorProperty,
                grid:Draw.IntProperty,
                offset:Draw.PointProperty
            }
        });
    }, Draw.Menu.generateGridSystemMenu = function(t) {
        return new Draw.ObjectInspector({
            undo:!1,
            useWrapper:!0,
            wrapperClass:Draw.ObjectPropertyMenuItem,
            document:t.document,
            model:t.document.getGridSystem(),
            order:[ "column_color", "columns", "gutter_width" ],
            propertyOptions:_.extend({
                scope:"grid_system",
                my:"left center",
                at:"right center"
            }, t),
            propertyClasses:{
                column_color:Draw.FillColorProperty,
                columns:Draw.IntProperty,
                gutter_width:Draw.IntProperty
            }
        });
    }, Draw.Menu.generateDocMenu = function(t) {
        return new Draw.ObjectInspector({
            undo:!1,
            useWrapper:!0,
            wrapperClass:Draw.ObjectPropertyMenuItem,
            document:t.document,
            model:t.document,
            order:[ "size", "background_color" ],
            propertyOptions:_.extend({
                scope:"document",
                my:"left center",
                at:"right center"
            }, t),
            propertyClasses:{
                background_color:Draw.FillColorProperty,
                size:Draw.SizeProperty
            }
        });
    }, Draw.Menu.ItemStrings = {
        grid:{
            color:"Grid Color",
            grid:"Grid Size",
            offset:"Grid Offset"
        },
        grid_system:{
            column_color:"Column Color",
            columns:"Number of Columns",
            gutter_width:"Gutter Width"
        },
        document:{
            background_color:"Background Color",
            size:"Canvas Size"
        }
    }, t = Draw.Menu.ON_CHANGE = "CHANGE", i = Draw.Menu.ON_SELECTION = "SELECTION", 
    e = Draw.Menu.ON_MULTIPLE_SELECTION = "MULTIPLE_SELECTION", Draw.Menu[Draw.Menu.ON_CHANGE] = [], 
    Draw.Menu[Draw.Menu.ON_SELECTION] = [], Draw.Menu[Draw.Menu.ON_MULTIPLE_SELECTION] = [], 
    Draw.Menu.ACTIONS = [ "enable", "disable", "show", "hide" ], Draw.Menu.Main = [ {
        k:"file",
        t:"File",
        children:[ {
            k:"importImage",
            t:"Import Image...",
            c:"UploadImageMenuItem",
            i:"icon-white icon-picture"
        }, {
            k:"importImageUrl",
            t:"Import Image From Url...",
            i:"icon-white icon-picture"
        }, {
            k:"duplicate",
            t:"Make a Copy...",
            i:"icon-white icon-file"
        }, {
            k:"downloadAsPNG",
            t:"Download as PNG",
            i:"icon-white icon-download"
        }, {
            k:"exportAllCode",
            t:"Export the Document's HTML/CSS",
            i:"img-icon-white icon-markup"
        }, {
            k:"exportProject",
            t:"Export the Project's HTML/CSS",
            i:"img-icon-white icon-markup"
        } ]
    }, {
        k:"edit",
        t:"Edit",
        children:[ {
            k:"editCode",
            t:"Edit Project CSS"
        }, "--", {
            k:"undo",
            t:"Undo",
            i:"icon-white icon-undo"
        }, {
            k:"redo",
            t:"Redo",
            i:"icon-white icon-redo"
        }, "--", {
            k:"duplicateSelected",
            t:"Duplicate",
            i:"img-icon-white icon-duplicate",
            enable:[ i ]
        }, {
            k:"copy",
            t:"Copy",
            i:"icon-white icon-copy",
            enable:[ i ]
        }, {
            k:"paste",
            t:"Paste",
            i:"icon-white icon-paste"
        }, {
            k:"cut",
            t:"Cut",
            i:"img-icon-white icon-cut1",
            enable:[ i ]
        }, "--", {
            k:"moveSelectedUp",
            t:"Move Forward",
            i:"icon-white icon-chevron-up",
            enable:[ i ]
        }, {
            k:"moveSelectedDown",
            t:"Move Backward",
            i:"icon-white icon-chevron-down",
            enable:[ i ]
        }, {
            k:"moveSelectedToTop",
            t:"Move to Front",
            enable:[ i ]
        }, {
            k:"moveSelectedToBottom",
            t:"Move to Back",
            enable:[ i ]
        }, "--", {
            k:"align",
            t:"Align",
            hover:!0,
            enable:[ e ],
            children:[ {
                k:"alignLeft",
                t:"Left",
                enable:[ e ]
            }, {
                k:"alignRight",
                t:"Right",
                enable:[ e ]
            }, {
                k:"alignTop",
                t:"Top",
                enable:[ e ]
            }, {
                k:"alignBottom",
                t:"Bottom",
                enable:[ e ]
            }, {
                k:"alignHorizCenter",
                t:"Horizontal Centers",
                enable:[ e ]
            }, {
                k:"alignVertCenter",
                t:"Vertical Centers",
                enable:[ e ]
            } ]
        }, {
            k:"distribute",
            t:"Distribute",
            hover:!0,
            enable:[ e ],
            children:[ {
                k:"distributeHorizCenter",
                t:"Horizontal Centers",
                enable:[ e ]
            }, {
                k:"distributeVertCenter",
                t:"Vertical Centers",
                enable:[ e ]
            }, {
                k:"distributeHorizEdge",
                t:"Horizontal Edges",
                enable:[ e ]
            }, {
                k:"distributeVertEdge",
                t:"Vertical Edges",
                enable:[ e ]
            } ]
        }, "--", {
            k:"lockSelected",
            t:"Lock",
            i:"icon-white icon-lock",
            c:"LockMenuItem",
            enable:[ i, t ]
        }, {
            k:"group",
            t:"Group",
            i:"img-icon-white icon-group-elements",
            show:[ e ]
        }, {
            k:"ungroup",
            t:"Ungroup",
            i:"img-icon-white icon-ungroup-elements",
            c:"UngroupItem",
            show:[ i ]
        }, {
            k:"exportCode",
            t:"Export to HTML/CSS",
            i:"img-icon-white icon-markup",
            enable:[ i ]
        }, "--", {
            k:"removeSelected",
            t:"Remove",
            i:"img-icon-white img-icon-trash",
            enable:[ i ]
        } ]
    }, {
        k:"doc",
        t:"Document",
        children:[ {
            k:"preview",
            t:"Enable Preview mode"
        }, {
            k:"commentMode",
            t:"Enable Comment mode"
        }, {
            k:"share",
            t:"Share this Document"
        }, "--", {
            k:"docProps",
            c:Draw.Menu.generateDocMenu
        }, "--", {
            k:"uploadBgImage",
            t:"Upload Background Image",
            alt:"Update Background Image",
            c:"UploadImageMenuItemWithFeedback"
        }, {
            k:"toggleBackgroundImage",
            t:"Show Background Image",
            c:"ToggleMenuItem"
        }, {
            k:"toggleBackgroundRepeat",
            t:"Repeat Background Image",
            c:"ToggleMenuItem"
        }, {
            k:"toggleBackgroundCover",
            t:"Fullpage Background",
            c:"ToggleMenuItem"
        } ]
    }, {
        k:"grid",
        t:"Grid",
        children:[ {
            k:"toggleGrids",
            t:"Show All Grids",
            c:"ToggleMenuItem",
            f:[ "read" ]
        }, "Grid", {
            k:"toggleGrid",
            t:"Show Grid",
            c:"ToggleMenuItem",
            f:[ "read" ]
        }, {
            k:"gridProps",
            c:Draw.Menu.generateGridMenu
        }, "Grid System", {
            k:"toggleGridSystem",
            t:"Show Grid System",
            c:"ToggleMenuItem",
            f:[ "read" ]
        }, {
            k:"gridSystemProps",
            c:Draw.Menu.generateGridSystemMenu
        } ]
    }, {
        k:"mnuhelp",
        t:"Help & Feedback",
        children:[ {
            k:"startContainerTour",
            t:"Tour making a Responsive layout",
            i:"icon icon-star"
        }, "--", {
            t:"Browse the Help Docs...",
            i:"icon icon-question-sign",
            c:"LinkMenuItem",
            href:"http://help.easel.io",
            target:"_blank"
        }, {
            k:"callSupport",
            t:"Get help or send us feedback",
            i:"icon icon-comments"
        } ]
    } ], Draw.Menu.Context = [ {
        k:"addColumn",
        t:"Add Column",
        c:"TableContextItem",
        types:[ "BootstrapTable", "BootstrapRow" ],
        show:[ i ]
    }, {
        k:"addRow",
        t:"Add Row",
        c:"TableContextItem",
        types:[ "BootstrapTable" ],
        show:[ i ]
    }, {
        k:"removeColumn",
        t:"Delete Column",
        c:"TableContextItem",
        types:[ "BootstrapTableHeadCell", "BootstrapTableCell", "BootstrapColumn" ],
        show:[ i ]
    }, {
        k:"insertColumnBefore",
        t:"Insert Column Before",
        c:"TableContextItem",
        types:[ "BootstrapTableHeadCell", "BootstrapTableCell", "BootstrapColumn" ],
        show:[ i ]
    }, {
        k:"insertColumnAfter",
        t:"Insert Column After",
        c:"TableContextItem",
        types:[ "BootstrapTableHeadCell", "BootstrapTableCell", "BootstrapColumn" ],
        show:[ i ]
    }, {
        k:"removeRow",
        t:"Delete Row",
        c:"TableContextItem",
        types:[ "BootstrapTableHeadCell", "BootstrapTableCell", "BootstrapTableHeadRow", "BootstrapTableRow" ],
        show:[ i ]
    }, {
        k:"insertRowBefore",
        t:"Insert Row Before",
        c:"TableContextItem",
        types:[ "BootstrapTableHeadCell", "BootstrapTableCell", "BootstrapTableHeadRow", "BootstrapTableRow" ],
        show:[ i ]
    }, {
        k:"insertRowAfter",
        t:"Insert Row After",
        c:"TableContextItem",
        types:[ "BootstrapTableHeadCell", "BootstrapTableCell", "BootstrapTableHeadRow", "BootstrapTableRow" ],
        show:[ i ]
    }, "--", {
        k:"duplicateSelected",
        t:"Duplicate",
        i:"img-icon-white icon-duplicate",
        enable:[ i ]
    }, {
        k:"copy",
        t:"Copy",
        i:"icon-white icon-copy",
        enable:[ i ]
    }, {
        k:"paste",
        t:"Paste",
        i:"icon-white icon-paste"
    }, {
        k:"cut",
        t:"Cut",
        i:"img-icon-white icon-cut1",
        enable:[ i ]
    }, "--", {
        k:"moveSelectedUp",
        t:"Move Forward",
        i:"icon-white icon-chevron-up",
        enable:[ i ]
    }, {
        k:"moveSelectedDown",
        t:"Move Backward",
        i:"icon-white icon-chevron-down",
        enable:[ i ]
    }, {
        k:"moveSelectedToTop",
        t:"Move to Front",
        enable:[ i ]
    }, {
        k:"moveSelectedToBottom",
        t:"Move to Back",
        enable:[ i ]
    }, "--", {
        k:"lockSelected",
        t:"Lock",
        i:"icon-white icon-lock",
        c:"LockMenuItem",
        enable:[ i, t ]
    }, {
        k:"group",
        t:"Group",
        i:"img-icon-white icon-group-elements",
        show:[ e ]
    }, {
        k:"ungroup",
        t:"Ungroup",
        i:"img-icon-white icon-ungroup-elements",
        c:"UngroupItem",
        show:[ i ]
    }, {
        k:"exportCode",
        t:"Export to HTML/CSS",
        i:"img-icon-white icon-markup",
        enable:[ i ]
    } ];
}.call(this), function() {
    var t, e, i = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, n = {}.hasOwnProperty, o = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var o in e) n.call(e, o) && (t[o] = e[o]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.MenuFlyout = function(e) {
        function n() {
            return this.unbindDocClick = i(this.unbindDocClick, this), this.bindDocClick = i(this.bindDocClick, this), 
            t = n.__super__.constructor.apply(this, arguments);
        }
        return o(n, e), n.prototype.idBase = "menu-flyout-", n.prototype.wrapper = '  <div>    <div class="content"></div>  </div>  ', 
        n.prototype.tagName = "div", n.prototype.focusType = "focus_menu", n.prototype.noHideSelector = ".dont-hide-flyout, .color-dialog", 
        n.prototype.DEFAULTS = {
            pane:null,
            my:"left top",
            at:"left bottom",
            hideOnUnfocus:!0
        }, n.prototype.QTIP_DEFAULTS = {
            content:{
                text:".."
            },
            show:{
                ready:!1,
                delay:0,
                effect:!1,
                event:"click"
            },
            hide:{
                event:null,
                delay:0,
                effect:!1
            },
            position:{
                adjust:{
                    method:"flip none",
                    scroll:!1,
                    y:5
                }
            },
            style:{
                classes:"ui-flyout",
                tip:!1
            },
            events:{},
            zindex:2e3
        }, n.prototype.setFocusOnShow = function() {}, n.prototype.resetFocusOnHide = function() {}, 
        n.prototype.bindDocClick = function() {
            return $("body").bind("mousedown", this.onDocClick);
        }, n.prototype.unbindDocClick = function() {
            return $("body").unbind("mousedown", this.onDocClick);
        }, n;
    }(Draw.Flyout), Draw.ChildMenuFlyout = function(t) {
        function i() {
            return e = i.__super__.constructor.apply(this, arguments);
        }
        return o(i, t), i.prototype.DEFAULTS = {
            pane:null,
            my:"left top",
            at:"right top",
            hideOnUnfocus:!0
        }, i.prototype.QTIP_DEFAULTS = {
            content:{
                text:".."
            },
            show:{
                ready:!1,
                delay:0,
                effect:!1,
                event:"mouseenter"
            },
            hide:{
                event:"mouseleave",
                delay:0,
                effect:!1
            },
            position:{
                adjust:{
                    method:"flip shift",
                    scroll:!1,
                    x:5
                }
            },
            style:{
                classes:"ui-flyout",
                tip:!1
            },
            events:{}
        }, i;
    }(Draw.MenuFlyout);
}.call(this), function() {
    var t, e, i, n = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, o = {}.hasOwnProperty, r = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var n in e) o.call(e, n) && (t[n] = e[n]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.MenuItem = function(e) {
        function i() {
            return this.onHideChildren = n(this.onHideChildren, this), this.onShowChildren = n(this.onShowChildren, this), 
            t = i.__super__.constructor.apply(this, arguments);
        }
        return r(i, e), i.prototype.template = _.template('<span class="icon {{icon_class}}"></span>\n<span class="text">{{text}}</span>\n<span class="hotkey">\n  {{hotkey}}\n  <i class="icon-white icon-caret-right flyout-icon"></i>\n</span>'), 
        i.prototype.className = "menu-item", i.prototype.childrenOpenClassName = "open", 
        i.prototype.DISABLED_TIP_OPTIONS = {
            style:{
                classes:"qtip-easel",
                tip:{
                    width:12,
                    height:8
                }
            },
            position:{
                my:"left center",
                at:"right center",
                viewport:$(window),
                adjust:{
                    x:10,
                    method:"shift"
                }
            }
        }, i.prototype.events = {
            mousedown:"onClick",
            mouseenter:"onMouseenter"
        }, i.prototype.initialize = function(t) {
            var e, i, n, o, r, s, a, l;
            for (this.id = _.uniqueId("menu-item-"), this.el = $(this.el), this.options = t, 
            a = Draw.Menu.ACTIONS, n = 0, r = a.length; r > n; n++) if (e = a[n], this.options[e]) for (l = this.options[e], 
            o = 0, s = l.length; s > o; o++) i = l[o], Draw.Menu[i].push([ e, this ]);
            return this.render(), this.initChildren(), this._childrenOpen = !1, this._openOnMouseover = !1, 
            this.enabled = !0;
        }, i.prototype.getId = function() {
            return this.id;
        }, i.prototype.toString = function() {
            return "MenuItem @" + this.id;
        }, i.prototype.getKey = function() {
            return this.options.k;
        }, i.prototype.disable = function(t) {
            return t && (this.disabledTip = this.el.qtip(_.extend({
                target:this.el,
                content:t
            }, this.DISABLED_TIP_OPTIONS))), this.enabled = !1, this.el.addClass("disabled");
        }, i.prototype.enable = function() {
            return this.disabledTip && (this.disabledTip.qtip("destroy"), this.disabledTip = null), 
            this.enabled = !0, this.el.removeClass("disabled");
        }, i.prototype.isEnabled = function() {
            return this.enabled;
        }, i.prototype.hide = function() {
            return this.el.hide();
        }, i.prototype.show = function() {
            return this.el.show();
        }, i.prototype.initChildren = function() {
            return this.options.children ? (this.childPane = new Draw.MenuPane({
                document:this.options.document,
                items:this.options.children,
                mode:this.options.mode,
                child:!0
            }), this.flyout = this.options.hover ? new Draw.ChildMenuFlyout({
                pane:this.childPane,
                target:this.el
            }) :new Draw.MenuFlyout({
                pane:this.childPane,
                target:this.el
            }), this.flyout.bind("show", this.onShowChildren), this.flyout.bind("hide", this.onHideChildren), 
            this.options.focusManager && this.options.focusManager.register(this.flyout), this.flyout.render(!1)) :void 0;
        }, i.prototype.areChildrenOpen = function() {
            return this._childrenOpen;
        }, i.prototype.showChildrenOnMouseover = function(t) {
            return this._openOnMouseover = t;
        }, i.prototype.getMenuItem = function(t) {
            return this.childPane ? this.childPane.getMenuItem(t) :null;
        }, i.prototype.hideChildren = function() {
            return this.flyout && this.areChildrenOpen() ? (this.flyout.hide(), this.childPane ? this.childPane.hideChildren() :void 0) :void 0;
        }, i.prototype.showChildren = function() {
            return this.flyout && !this.areChildrenOpen() ? this.flyout.show() :void 0;
        }, i.prototype.onShowChildren = function() {
            return this._childrenOpen = !0, this.el.addClass(this.childrenOpenClassName), this.trigger("children:open", this);
        }, i.prototype.onHideChildren = function() {
            return this._childrenOpen = !1, this.el.removeClass(this.childrenOpenClassName), 
            this.trigger("children:close", this);
        }, i.prototype.onClick = function() {
            return this.enabled ? this.childPane ? this.showChildren() :(this.options.document[this.options.k]("menu"), 
            this.trigger("selected", this)) :void 0;
        }, i.prototype.onMouseenter = function() {
            return this.enabled ? (this.trigger("mouseenter", this, this.options.hover), this.flyout && (this._openOnMouseover || this.options.hover) ? this.flyout.show() :void 0) :void 0;
        }, i.prototype.updateForAction = function(t, e, i) {
            switch (t) {
              case "enable":
                return i.value ? this.enable() :this.disable();

              case "disable":
                return i.value ? this.disable() :this.enable();

              case "show":
                return i.value ? this.show() :this.hide();

              case "hide":
                return i.value ? this.hide() :this.show();
            }
        }, i.prototype.getIconClass = function() {
            return this.options.i || "no-icon";
        }, i.prototype.getHotkey = function() {
            var t, e;
            return t = this.options.document.hotkeys.getInverse(), e = t[this.options.k], e ? Draw.Menu.toHotkeyString(e) :null;
        }, i.prototype.getRenderData = function() {
            var t;
            return t = {
                icon_class:this.getIconClass(),
                text:this.options.t,
                hotkey:this.getHotkey()
            };
        }, i.prototype.render = function() {
            return i.__super__.render.call(this, this.getRenderData()), this.options.hover ? this.el.addClass("flyout-item") :void 0;
        }, i;
    }(Backbone.View), Draw.SeparatorMenuItem = function(t) {
        function i() {
            return e = i.__super__.constructor.apply(this, arguments);
        }
        return r(i, t), i.prototype.template = _.template("<span class=\"text {{(separator && separator.indexOf('-') < 0) ? 'has-text' : 'no-text'}}\">{{separator}}</span>"), 
        i.prototype.className = "separator-menu-item", i.prototype.initialize = function() {
            return this.render();
        }, i;
    }(Backbone.View), Draw.LinkMenuItem = function(t) {
        function e() {
            return i = e.__super__.constructor.apply(this, arguments);
        }
        return r(e, t), e.prototype.template = _.template('<span class="icon {{icon_class}}"></span>\n<span class="text">{{text}}</span>\n<span class="hotkey">\n  {{hotkey}}\n  <i class="icon-white icon-caret-right flyout-icon"></i>\n</span>'), 
        e.prototype.tagName = "a", e.prototype.className = "menu-item link-menu-item", e.prototype.render = function() {
            return e.__super__.render.call(this, this.getRenderData()), this.el.attr("href", this.options.href), 
            this.options.target && this.el.attr("target", this.options.target), this;
        }, e.prototype.onClick = function() {
            return !0;
        }, e;
    }(Draw.MenuItem);
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    }, n = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.LockMenuItem = function(e) {
        function o() {
            return t = o.__super__.constructor.apply(this, arguments);
        }
        return i(o, e), o.prototype.ICON_LOCK = "icon-white icon-lock", o.prototype.ICON_UNLOCK = "icon-white icon-unlock", 
        o.prototype.updateForAction = function(t, e, i) {
            switch (t) {
              case "enable":
                this.update(e, i.selection, i.value);
            }
            return null;
        }, o.prototype.update = function(t, e, i) {
            var o, r, s, a, l;
            if (!(t === Draw.Menu.ON_CHANGE && n.call(i, "is_locked") < 0)) return 0 === _.size(e) ? this.disable() :(this.enable(), 
            a = _.values(e), r = a[0].get("is_locked"), a[0].isParentLocked && (s = a[0].isParentLocked()), 
            l = this.$(".text"), o = this.$(".icon").removeClass(this.ICON_LOCK).removeClass(this.ICON_UNLOCK), 
            s ? (this.disable(), o.addClass(this.ICON_LOCK), l.text("Parent is locked")) :r ? (o.addClass(this.ICON_UNLOCK), 
            l.text("Unlock")) :(o.addClass(this.ICON_LOCK), l.text("Lock")));
        }, o;
    }(Draw.MenuItem);
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    Draw.MenuManager = function() {
        function e(e) {
            this.onSelectionAction = t(this.onSelectionAction, this), this.onMultipleSelection = t(this.onMultipleSelection, this), 
            this.onSelection = t(this.onSelection, this), this.onChange = t(this.onChange, this), 
            this.onChangeObject = t(this.onChangeObject, this), this.onChangeSelected = t(this.onChangeSelected, this), 
            this.options = e, this.menu = new Draw.MenuPane(this.options), this.context = new Draw.MenuPane({
                document:this.options.document,
                items:Draw.Menu.Context,
                mode:this.options.mode
            }), this.setupActionFunctions(), this.setupActionTriggers();
        }
        return e.prototype.ACTION_FUNCTIONS = [ [ Draw.Menu.ON_CHANGE, "onChange" ], [ Draw.Menu.ON_SELECTION, "onSelection" ], [ Draw.Menu.ON_MULTIPLE_SELECTION, "onMultipleSelection" ] ], 
        e.prototype.getEl = function() {
            return this.menu.el;
        }, e.prototype.getContextMenu = function() {
            return this.context;
        }, e.prototype.getMenuItem = function(t) {
            return this.menu.getMenuItem(t);
        }, e.prototype.setupActionFunctions = function() {
            var t, e, i, n, o, r, s;
            for (this.actionTypes = new Backbone.Model({}), r = this.ACTION_FUNCTIONS, s = [], 
            n = 0, o = r.length; o > n; n++) e = r[n], t = e[0], i = e[1], s.push(this.actionTypes.bind("change:" + t, this[i]));
            return s;
        }, e.prototype.setupActionTriggers = function() {
            var t;
            return t = this.options.document.selectionModel, t.bind("change:selected", this.onChangeSelected), 
            t.bind("change:object", this.onChangeObject), this.onChangeSelected(), this.onChangeObject(t, null, [], t.getSelected());
        }, e.prototype.onChangeSelected = function() {
            var t, e, i;
            return e = this.options.document.selectionModel.getSelected(), i = {}, i[Draw.Menu.ON_SELECTION] = !1, 
            i[Draw.Menu.ON_MULTIPLE_SELECTION] = !1, _.size(e) > 1 ? (t = _.keys(e), i[Draw.Menu.ON_SELECTION] = t, 
            i[Draw.Menu.ON_MULTIPLE_SELECTION] = t) :1 === _.size(e) && (i[Draw.Menu.ON_SELECTION] = _.keys(e)[0]), 
            this.actionTypes.set(i);
        }, e.prototype.onChangeObject = function(t, e, i) {
            var n;
            return _.isEqual(this.actionTypes.get(Draw.Menu.ON_CHANGE), i) ? this.actionTypes.trigger("change:" + Draw.Menu.ON_CHANGE) :(n = {}, 
            n[Draw.Menu.ON_CHANGE] = i, this.actionTypes.set(n));
        }, e.prototype.onChange = function() {
            return this.onSelectionAction(Draw.Menu.ON_CHANGE);
        }, e.prototype.onSelection = function() {
            return this.onSelectionAction(Draw.Menu.ON_SELECTION);
        }, e.prototype.onMultipleSelection = function() {
            return this.onSelectionAction(Draw.Menu.ON_MULTIPLE_SELECTION);
        }, e.prototype.onSelectionAction = function(t, e) {
            var i;
            return i = this.options.document.selectionModel.getSelected(), this.updateForActionType(t, _.extend({
                selection:i,
                value:this.actionTypes.get(t)
            }, e));
        }, e.prototype.updateForActionType = function(t, e) {
            var i, n, o, r, s, a, l;
            for (a = Draw.Menu[t], l = [], r = 0, s = a.length; s > r; r++) n = a[r], i = n[0], 
            o = n[1], l.push(o.updateForAction(i, t, e));
            return l;
        }, e;
    }();
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.ObjectPropertyMenuItem = function(i) {
        function o() {
            return this.onPickerHide = e(this.onPickerHide, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.template = _.template('<span class="icon {{icon_class}}"></span>\n<span class="text">{{text}}</span>\n<div class="object-property"></div>'), 
        o.prototype.className = "menu-item object-property-menu-item", o.prototype.events = {
            click:"onClick"
        }, o.prototype.initialize = function(t) {
            var e, i, n, r, s;
            for (t.text = Draw.Menu.ItemStrings[t.scope][t.key], t.icon_class = t.i, o.__super__.initialize.call(this, t), 
            r = this.properties, s = [], i = 0, n = r.length; n > i; i++) e = r[i], s.push(e.bind("picker:hide", this.onPickerHide));
            return s;
        }, o.prototype.remove = function() {
            var t, e, i, n;
            for (n = this.properties, e = 0, i = n.length; i > e; e++) t = n[e], t.unbind("picker:hide", this.onPickerHide);
            return o.__super__.remove.call(this);
        }, o.prototype.onPickerHide = function() {
            return this.trigger("selected", this);
        }, o.prototype.onClick = function(t) {
            return $(t.target).is("input") ? !0 :(t.stopPropagation(), this.properties[0].focusInput(), 
            !1);
        }, o;
    }(Draw.ObjectPropertyContainer);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    }, o = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.MenuPane = function(i) {
        function r() {
            return this.onMouseEnterOfItem = e(this.onMouseEnterOfItem, this), this.onChildrenClose = e(this.onChildrenClose, this), 
            this.onChildrenOpen = e(this.onChildrenOpen, this), this.onResetItemFocus = e(this.onResetItemFocus, this), 
            this.onSetItemFocus = e(this.onSetItemFocus, this), this.doAccept = e(this.doAccept, this), 
            t = r.__super__.constructor.apply(this, arguments);
        }
        return n(r, i), r.prototype.className = "menu-pane", r.prototype.initialize = function(t) {
            return this.items = [], this.currentItem = null, this._openChildCounter = 0, r.__super__.initialize.call(this, t);
        }, r.prototype.getTool = function() {
            return this.currentItem && this.currentItem.getTool && this.currentItem.getTool() || null;
        }, r.prototype.doAccept = function() {
            return this.currentItem && this.currentItem.doAccept(), this.hide();
        }, r.prototype.onSetItemFocus = function(t, e, i, n) {
            var o;
            return o = this.getTool(), this.currentItem = n, this.trigger("change:tool", this, o, this.getTool()), 
            this.setFocus();
        }, r.prototype.onResetItemFocus = function() {
            var t;
            return t = this.getTool(), this.currentItem = null, this.trigger("change:tool", this, t, this.getTool()), 
            this.resetFocus();
        }, r.prototype.notifyItemsOfMouseover = function(t, e) {
            var i, n, o, r, s;
            for (r = this.items, s = [], n = 0, o = r.length; o > n; n++) i = r[n], i.showChildrenOnMouseover ? (i.showChildrenOnMouseover(this.areChildrenOpen()), 
            e && i.getId() !== t.getId() ? s.push(i.hideChildren()) :s.push(void 0)) :s.push(void 0);
            return s;
        }, r.prototype.hideChildren = function() {
            var t, e, i, n, o;
            for (n = this.items, o = [], e = 0, i = n.length; i > e; e++) t = n[e], t.hideChildren ? o.push(t.hideChildren()) :o.push(void 0);
            return o;
        }, r.prototype.areChildrenOpen = function() {
            return !!this._openChildCounter;
        }, r.prototype.onChildrenOpen = function(t) {
            return this._openChildCounter++, this.notifyItemsOfMouseover(t, !0);
        }, r.prototype.onChildrenClose = function(t) {
            return this._openChildCounter--, this._openChildCounter = _.clamp(this._openChildCounter, 0, 20), 
            this.notifyItemsOfMouseover(t, !1);
        }, r.prototype.onMouseEnterOfItem = function(t) {
            return this.options.child ? this.onChildrenOpen(t) :void 0;
        }, r.prototype.createMenuItem = function(t) {
            var e, i, n;
            return _.isString(t) ? new Draw.SeparatorMenuItem({
                separator:t
            }) :(i = t.c, n = _.extend({
                document:this.document,
                focusManager:this.options.focusManager,
                mode:this.options.mode
            }, t), _.isString(i) || !i ? (i || (i = "MenuItem"), e = new Draw[i](n)) :_.isFunction(i) && (e = i.call(this, n)), 
            e);
        }, r.prototype.getMenuItem = function(t) {
            var e, i, n, o, r;
            for (r = this.items, n = 0, o = r.length; o > n; n++) {
                if (i = r[n], i.getKey() === t) return i;
                if (e = i.getMenuItem(t)) return e;
            }
            return null;
        }, r.prototype.render = function() {
            var t, e, i, n, r, s;
            for (r = this.options.items, i = 0, n = r.length; n > i; i++) t = r[i], e = "edit" === this.options.mode || t.f && (s = this.options.mode, 
            o.call(t.f, s) >= 0), e && (t = this.createMenuItem(t), t && this.el.append(t.el), 
            t instanceof Draw.EmbedPane && (t.bind("focus", this.onSetItemFocus), t.bind("unfocus", this.onResetItemFocus)), 
            t.bind("selected", this.hide), t.bind("children:open", this.onChildrenOpen), t.bind("children:close", this.onChildrenClose), 
            t.bind("mouseenter", this.onMouseEnterOfItem), this.items.push(t));
            return this;
        }, r.prototype.hideUnnecessarySeparators = function() {
            var t, e, i, n, o, r, s, a, l, c;
            for (r = this.$(".menu-item, .separator-menu-item"), n = [], s = 0, l = r.length; l > s; s++) i = r[s], 
            i = $(i), (i.isVisible() || i.is(".separator-menu-item")) && n.push(i);
            for (o = void 0, t = function(t) {
                return null == o ? t.hide() :o ? t.hide() :t.show();
            }, a = 0, c = n.length; c > a; a++) i = n[a], e = i.is(".separator-menu-item"), 
            e && t(i), o = e;
            return e ? i.hide() :void 0;
        }, r.prototype.onShow = function() {
            return this.hideUnnecessarySeparators();
        }, r;
    }(Draw.RenderedEmbedPane);
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    }, n = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.TableContextItem = function(e) {
        function o() {
            return t = o.__super__.constructor.apply(this, arguments);
        }
        return i(o, e), o.prototype.render = function() {
            var t;
            return t = o.__super__.render.call(this), this.hide(), t;
        }, o.prototype.updateForAction = function(t, e, i) {
            switch (t) {
              case "show":
                this.update(e, i.selection, i.value);
            }
            return null;
        }, o.prototype.update = function(t, e) {
            var i;
            if (t === Draw.Menu.ON_SELECTION) return _.size(e) && (i = _.values(e)[0].TYPE, 
            n.call(this.options.types, i) >= 0) ? this.show() :this.hide();
        }, o;
    }(Draw.MenuItem);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.ToggleMenuItem = function(i) {
        function o() {
            return this.onToggle = e(this.onToggle, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.ICON_ON = "toggle-icon-on icon-white icon-ok", o.prototype.ICON_OFF = "toggle-icon-off", 
        o.prototype.initialize = function(t) {
            return this.options.toggleKey = this.generateToggleKey(), o.__super__.initialize.call(this, t), 
            this.options.document.bind("change:" + this.options.toggleKey, this.onToggle);
        }, o.prototype.generateToggleKey = function() {
            var t;
            return t = this.options.k.replace("toggle", ""), "toggle:" + _.variablize([ t[0].toLowerCase(), t.slice(1) ].join(""));
        }, o.prototype._getIconClass = function(t) {
            return t && this.ICON_ON || this.ICON_OFF;
        }, o.prototype.getIconClass = function() {
            return this._getIconClass(this.options.document.get(this.options.toggleKey));
        }, o.prototype.onToggle = function(t, e) {
            return this.$(".icon").removeClass(this.ICON_OFF).removeClass(this.ICON_ON).addClass(this._getIconClass(e));
        }, o;
    }(Draw.MenuItem);
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.UngroupItem = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        return i(n, e), n.prototype.render = function() {
            var t;
            return t = n.__super__.render.call(this), this.hide(), t;
        }, n.prototype.updateForAction = function(t, e, i) {
            switch (t) {
              case "show":
                this.update(e, i.selection, i.value);
            }
            return null;
        }, n.prototype.update = function(t, e) {
            return t === Draw.Menu.ON_SELECTION && 1 === _.size(e) ? _.values(e)[0] instanceof Draw.EventedGroup ? this.show() :this.hide() :void 0;
        }, n;
    }(Draw.MenuItem);
}.call(this), function() {
    var t, e, i, n = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, o = {}.hasOwnProperty, r = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var n in e) o.call(e, n) && (t[n] = e[n]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.UploadImageMenuItem = function(e) {
        function i() {
            return this.onUploadedImage = n(this.onUploadedImage, this), t = i.__super__.constructor.apply(this, arguments);
        }
        return r(i, e), i.prototype.template = _.template('<span class="icon {{icon_class}}"></span>\n<span class="text">{{text}}</span>\n<form>\n  <input class="{{input_class}}" type="file" name="file" />\n</form>'), 
        i.prototype.className = "menu-item upload-image-menu-item", i.prototype.inputClassName = "import-image", 
        i.prototype.getRenderData = function() {
            var t;
            return t = i.__super__.getRenderData.call(this), t.input_class = this.inputClassName, 
            t;
        }, i.prototype.render = function() {
            var t = this;
            return i.__super__.render.call(this), this.$("input").bind("change", function() {
                return t.trigger("selected", t);
            }), this;
        }, i.prototype.onClick = function() {
            return !0;
        }, i.prototype.onUploadedImage = function(t) {
            return t ? this.options.document.setBackgroundImage(t.url) :void 0;
        }, i;
    }(Draw.MenuItem), Draw.UploadFileMenuItem = function(t) {
        function i() {
            return e = i.__super__.constructor.apply(this, arguments);
        }
        return r(i, t), i.prototype.inputClassName = "import-file", i;
    }(Draw.UploadImageMenuItem), Draw.UploadImageMenuItemWithFeedback = function(t) {
        function e() {
            return this.onChangeBackgroundImage = n(this.onChangeBackgroundImage, this), this.onUploadedImage = n(this.onUploadedImage, this), 
            this.onAddedImage = n(this.onAddedImage, this), i = e.__super__.constructor.apply(this, arguments);
        }
        return r(e, t), e.prototype.template = _.template('<span class="icon {{icon_class}}"></span>\n<span class="text">{{text}}</span>\n<span class="preview"></span>\n<form>\n  <input class="{{input_class}}" type="file" name="file" />\n</form>'), 
        e.prototype.inputClassName = "upload-background", e.prototype.className = "menu-item upload-image-menu-item upload-image-menu-item-feedback", 
        e.prototype.inputClassName = "upload-background", e.prototype.initialize = function(t) {
            var i;
            return i = {
                property:"background_image"
            }, e.__super__.initialize.call(this, _.extend(i, t)), this.options.document.bind("change:" + this.options.property, this.onChangeBackgroundImage), 
            this.loader = new Widget.Loader({
                el:this.el,
                image:Widget.Loader.WHITE,
                location:{
                    position:"absolute",
                    top:"4px",
                    left:"4px"
                }
            }), this.update();
        }, e.prototype.render = function() {
            var t = this;
            return e.__super__.render.call(this), this.options.document.bind("load", function() {
                return t.options.document.setupUploader(t.$("." + t.inputClassName), t.onUploadedImage, t.onAddedImage);
            }), this;
        }, e.prototype.update = function() {
            var t;
            return t = this.options.document.get(this.options.property), t && this.$(".text").text(this.options.alt), 
            t || this.$(".text").text(this.options.t), this.updateImage();
        }, e.prototype.updateImage = function() {
            var t;
            return t = this.options.document.get(this.options.property), t ? this.$(".preview").css({
                "background-image":"url(" + t + ")"
            }) :void 0;
        }, e.prototype.onAddedImage = function() {
            return this.loader.startLoading();
        }, e.prototype.onUploadedImage = function(t) {
            return this.loader.stopLoading(), t ? this.options.document.setBackgroundImage(t.url) :void 0;
        }, e.prototype.onChangeBackgroundImage = function() {
            return this.options.document.set("toggle:" + this.options.property, !0), this.update(), 
            this.trigger("selected", this);
        }, e;
    }(Draw.UploadImageMenuItem);
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    Draw.MouseTracker = function() {
        function e(e) {
            this.onPreselect = t(this.onPreselect, this), this.options = e, this.model = e.model, 
            this.model.selectionModel.bind("change:preselected", this.onPreselect), this.body = $("body"), 
            this._setupTracker();
        }
        return e.prototype._setupTracker = function() {
            var t;
            return t = $(".viewable-viewport").qtip({
                content:"OMG WOW",
                position:{
                    my:"top left",
                    target:"mouse",
                    viewport:$(".viewable-viewport"),
                    adjust:{
                        x:10,
                        y:10
                    }
                },
                show:{
                    ready:!1,
                    delay:0,
                    effect:!1,
                    event:"mouseenter"
                },
                hide:{
                    delay:0,
                    effect:!1
                },
                style:{
                    classes:"qtip-preview ui-mouse-tracker",
                    tip:!1
                }
            }), this.qtip = t.qtip("api");
        }, e.prototype.setContent = function(t) {
            return _.isString(t) || (t = this._getContent(t)), this.content = t, this.content ? this.qtip.set("content.text", this.content) :void 0;
        }, e.prototype.show = function() {
            return this._show ? void 0 :(this.body.addClass("show-mouse-tracker"), this.qtip.set("content.text", this.content), 
            this._show = !0);
        }, e.prototype.hide = function() {
            return this._show ? (this.body.removeClass("show-mouse-tracker"), this._show = !1) :void 0;
        }, e.prototype._getContent = function(t) {
            var e, i, n, o;
            return _.isString(t) ? t :t && t.get ? (e = null, n = t.get("href"), o = this.model.getEaselProject(), 
            n && o && (i = o.documents.get(n), i && (e = '<i class="icon-white icon-link"></i>  ' + i.get("name"))), 
            e) :null;
        }, e.prototype.onPreselect = function(t, e) {
            return this.setContent(e), this.content ? this.show() :this.hide();
        }, e;
    }();
}.call(this), function() {
    var t, e, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    }, o = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    Draw.ChooseDocument = function(e) {
        function i() {
            return t = i.__super__.constructor.apply(this, arguments);
        }
        return n(i, e), i.prototype.template = "#choose-document-template", i.prototype.className = "document", 
        i.prototype.events = {
            click:"onClick"
        }, i.prototype.render = function() {
            return i.__super__.render.call(this, this.model.attributes);
        }, i.prototype.setAsSelected = function(t) {
            return t ? this.el.addClass("selected") :this.el.removeClass("selected");
        }, i.prototype.onClick = function(t) {
            return this.model.trigger("click", this.model, this, t), !1;
        }, i;
    }(Backbone.View), Draw.ChooseDocumentPane = function(t) {
        function i() {
            return this.doPrimaryAction = o(this.doPrimaryAction, this), this.selectNone = o(this.selectNone, this), 
            this.onClickDocument = o(this.onClickDocument, this), this.onAddDocument = o(this.onAddDocument, this), 
            this.onClickNewDocument = o(this.onClickNewDocument, this), this.updateSelected = o(this.updateSelected, this), 
            this.onFetchSuccess = o(this.onFetchSuccess, this), e = i.__super__.constructor.apply(this, arguments);
        }
        return n(i, t), i.prototype.template = "#choose-document-dialog-template", i.prototype.className = "choose-document padded-content", 
        i.prototype.projectUrl = "/api/v1/project/", i.prototype.removeLink = ".no-document", 
        i.prototype.events = {
            "click .new-document":"onClickNewDocument",
            "click .no-document":"selectNone"
        }, i.prototype.initialize = function(t) {
            return i.__super__.initialize.call(this, t), this.model instanceof Draw.Document && (this.model = null), 
            this._docsRendered = !1, this.render(), this.setupModel();
        }, i.prototype.setupModel = function() {
            return this.model ? this.model instanceof Backbone.Collection ? this.renderDocuments() :(this.model = new Easel.Documents(this.model), 
            this.renderDocuments()) :(this.project = this.document.get("easel_project"), this.project ? this.onFetchSuccess() :this.fetchDocuments());
        }, i.prototype.fetchDocuments = function() {
            return this.project = new Easel.Project({
                eid:this.document.getProjectId()
            }), this.project.fetch({
                success:this.onFetchSuccess
            });
        }, i.prototype.onFetchSuccess = function() {
            return this.model = this.project.documents, this.renderDocuments();
        }, i.prototype._createView = function(t) {
            var e;
            return e = new Draw.ChooseDocument({
                model:t
            }), this.views.push(e), e;
        }, i.prototype.renderDocuments = function() {
            var t, e, i, n, o, r;
            for (this._docsRendered = !0, this.views = [], t = this.$(".documents"), this.model.bind("click", this.onClickDocument), 
            this.model.bind("add", this.onAddDocument), r = this.model.models, n = 0, o = r.length; o > n; n++) e = r[n], 
            i = this._createView(e), t.append(i.render().el);
            return this.trigger("render:docs", this);
        }, i.prototype.updateSelected = function(t, e) {
            var i, n, o, r, s;
            for (this.selected = void 0, s = this.views, o = 0, r = s.length; r > o; o++) n = s[o], 
            n.setAsSelected(n.model.id === t), n.model.id === t && (this.selected = n.model);
            return i = this.$(this.removeLink), this.selected ? i.show() :i.hide(), e ? this.selected ? (this.$(".linked-to-message").show(), 
            this.$(".linked-to").text(this.selected.get("name"))) :this.$(".linked-to-message").hide() :void 0;
        }, i.prototype.prompt = function(t, e) {
            var i = this;
            return this._docsRendered ? this.updateSelected(t, !0) :this.bind("render:docs", function() {
                return i.updateSelected(t, !0);
            }), this.callback = e, this.show();
        }, i.prototype.onClickNewDocument = function() {
            var t, e;
            return e = prompt("Enter the name of your new document"), e && (t = this.document.toJSON(), 
            t.document[0].children = [], this.model.createNew({
                name:e,
                project:this.document.getProjectId(),
                content:t
            })), !1;
        }, i.prototype.onAddDocument = function(t) {
            var e;
            return e = this._createView(t), this.$(".documents").prepend(e.render().el), this.onClickDocument(t, e);
        }, i.prototype.onClickDocument = function(t) {
            return this.updateSelected(t.id), this.selected = t;
        }, i.prototype.selectNone = function() {
            return this.updateSelected(null), this.selected = null;
        }, i.prototype.doPrimaryAction = function() {
            return void 0 !== this.selected && this.callback && this.callback(this.selected ? this.selected.id :null), 
            this.callback = null, !0;
        }, i;
    }(Draw.EmbedPane);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.CodeEditPane = function(i) {
        function o() {
            return this.onParseError = e(this.onParseError, this), this.onUpdateStyle = e(this.onUpdateStyle, this), 
            this.onChangeStyle = e(this.onChangeStyle, this), this.updateCode = e(this.updateCode, this), 
            this.pullCode = e(this.pullCode, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.template = '<div class="editor-container no-move">\n</div>\n<div class="editor-status"></div>\n<div class="message">\n  <p class="subtle">CSS edited here will be applied to all documents in the project.</p>\n</div>', 
        o.prototype.className = "code-edit", o.prototype.initialize = function(t) {
            return o.__super__.initialize.call(this, t), this.id = "css-edit", this.document.getFocusManager().register(this), 
            this.render();
        }, o.prototype.focusType = Draw.FOCUS_DIALOG, o.prototype.getId = function() {
            return this.id;
        }, o.prototype.getTool = function() {
            return this.tool || (this.tool = new Draw.BasicViewTool(this.document)), this.tool;
        }, o.prototype.pullCode = function() {
            var t, e;
            return this._ignoreEditor = !0, t = this.editor.getCursor("anchor"), e = this.editor.getCursor("head"), 
            this.editor.setValue(this.sheet.getCssText()), (t || e) && this.editor.setSelection(t, e), 
            this._ignoreEditor = !1;
        }, o.prototype.updateCode = function() {
            return this.$(".editor-status").hide(), this.sheet.update(this.editor.getValue(), {
                originator:"cssedit"
            });
        }, o.prototype.prompt = function() {
            var t, e = this;
            return t = this.options.projectDocument.getStyleSheet(0), this.sheet || this._setStyleSheet(t), 
            this.show(), this.editor ? void 0 :(this.editorPullDelay = new Debouncer(200, this.pullCode), 
            this.editorUpdateCodeDelay = new Debouncer(200, this.updateCode), this.editor = CodeMirror(this.$(".editor-container")[0], {
                theme:"easel",
                lineNumbers:!0,
                value:t.getCssText(),
                mode:"css"
            }), this.editor.on("change", function() {
                return e._ignoreEditor ? void 0 :e.editorUpdateCodeDelay.update();
            }), this.editor.on("focus", this.setFocus), this.editor.on("blur", this.resetFocus));
        }, o.prototype.onChangeStyle = function(t, e) {
            return "cssedit" !== e.originator ? (pds(this, "Change from:", e.originator), this.editorPullDelay.update()) :void 0;
        }, o.prototype.onUpdateStyle = function() {
            return pds(this, "UPDATED");
        }, o.prototype.onParseError = function(t, e, i) {
            return this.$(".editor-status").text("parse error: " + i.message).show();
        }, o.prototype._setStyleSheet = function(t) {
            return this.sheet && this._unbindStyleSheet(this.sheet), t && this._bindStyleSheet(t), 
            this.sheet = t;
        }, o.prototype._bindStyleSheet = function(t) {
            return t.bind("change", this.onChangeStyle), t.bind("update", this.onUpdateStyle), 
            t.bind("parseerror", this.onParseError);
        }, o.prototype._unbindStyleSheet = function(t) {
            return t.unbind("change", this.onChangeStyle), t.unbind("update", this.onUpdateStyle), 
            t.unbind("parseerror", this.onParseError);
        }, o;
    }(Draw.EmbedPane);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.CodeExportPane = function(i) {
        function o() {
            return this.doPrimaryAction = e(this.doPrimaryAction, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.template = '<div class="css-container">\n  <h2>\n    Style\n    <span id="css_clip_container" class="clip_container">\n      <span id="css_clip_button" class="clip_button btn btn-small btn-light">Copy to Clipboard</span>\n      <span class="clip-message">copied!</span>\n    </span>\n  </h2>\n\n  <ul class="nav nav-tabs">\n    <li><a href="#css-code-tab" class="active" title="The generated CSS specific to the document">Document</a>\n    </li>\n    <li><a href="#project-css-code-tab" title="The CSS that applies to the whole project">Project</a>\n    </li>\n  </ul>\n  <div class="tab-content">\n    <div class="tab-pane active" id="css-code-tab">\n      <div id="css-code"></div>\n    </div>\n    <div class="tab-pane" id="project-css-code-tab">\n      <div id="project-css-code"></div>\n    </div>\n  </div>\n</div>\n\n<div class="image-container">\n  <h2>Images</h2>\n  <div class="images"></div>\n</div>\n\n<div class="html-container">\n  <h2>\n    Markup\n    <span id="html_clip_container" class="clip_container">\n      <span id="html_clip_button" class="clip_button btn btn-small btn-light">Copy to Clipboard</span>\n      <span class="clip-message">copied!</span>\n    </span>\n  </h2>\n  <div id="html-code"></div>\n</div>\n\n<div class="clear"></div>\n<form method="POST" action="/api/v1/packages/" class="download-form">\n</form>', 
        o.prototype.imageTemplate = '<div class="image">\n  <a class="image-wrapper raised-container" href="{{url}}?download={{cssClass}}" title="Right click, save as or click to download">\n    <img src="{{url}}"/>\n    <span class="name">{{name}}</span>\n  </a>\n</div>', 
        o.prototype.className = "code-export", o.prototype.buttons = {
            primary:"Download as zip file"
        }, o.prototype.buttonTemplate = '<button class="download-as-zip btn btn-large btn-info pull-center">\n  <i class="icon-white icon-download-alt"></i>\n  &nbsp; {{text}}\n</button>', 
        o.prototype.initialize = function(t) {
            return o.__super__.initialize.call(this, t), this.render();
        }, o.prototype.render = function() {
            var t = this;
            return o.__super__.render.call(this), this._callOnTab = {}, this.$(".nav-tabs a").click(function() {
                return $(this).tab("show"), !1;
            }).on("shown", function(e) {
                var i;
                return i = $(e.target).attr("href"), t._callOnTab[i] && (t._callOnTab[i](), delete t._callOnTab[i]), 
                window.TESTING ? void 0 :t._setupCssClipCopy("#css-code-tab" === i ? t.css :t.projectCss);
            }), this;
        }, o.prototype.renderImages = function(t) {
            var e, i, n, o, r, s;
            for (i = this.$(".images"), i.html(""), r = 0, s = t.length; s > r; r++) o = t[r], 
            e = o.getData(), n = this.renderTemplate(this.imageTemplate, e), i.append(n);
            return !!t.length;
        }, o.prototype.renderHtml = function(t) {
            return this.htmlDisplay || (this.htmlDisplay = this._colorize(this.$("#html-code"), "html")), 
            this.htmlDisplay.setValue(t), !!t.length;
        }, o.prototype.renderProjectCss = function() {
            var t, e, i = this;
            return e = this.options.projectDocument.getStyleSheet(0), t = e.getCssText(), t ? (this.el.addClass("feature-code-edit"), 
            this.projectCss = t, this.projectCssDisplay ? this.projectCssDisplay.setValue(t || "") :this._colorize(this.$("#project-css-code"), "css", {
                renderOnTab:"#project-css-code-tab",
                callback:function(e) {
                    return i.projectCssDisplay = e, i.projectCssDisplay.setValue(t || "");
                }
            })) :this.el.removeClass("feature-code-edit"), !!t;
        }, o.prototype.renderCss = function(t) {
            var e;
            return e = this.renderProjectCss(), this.css = t, this.cssDisplay || (this.cssDisplay = this._colorize(this.$("#css-code"), "css")), 
            this.$(".nav-tabs a:first").tab("show"), this.cssDisplay.setValue(t), !!t.length || e;
        }, o.prototype.prompt = function(t, e) {
            var i, n, o, r, s, a = this;
            return null == e && (e = {}), e.all || t && _.size(t) ? (r = !1, this.options.projectDocument && (s = this.options.projectDocument.getStyleSheet(0), 
            r = !!s.getCssText()), o = this.document.get("easel_project"), o && (n = o.documents), 
            e = _.extend({}, e, {
                projectDocument:r ? this.options.projectDocument :null,
                exportAll:e.all,
                processor:e.all ? "FullPage" :"Identity",
                objects:t
            }), i = new Draw.Export.Document(n.get(this.document.id), o, e), i.exportRaw(function(t, e) {
                var n, o, r;
                return i.generateZipForm(a.$(".download-form")), a.tree = e, a.show(), r = a.renderImages(t.images), 
                n = a.renderCss(t.css), o = a.renderHtml(t.html), a._setupWidth(r, o, n), window.TESTING || a._setupClipCopy(t.html, t.css), 
                a.trigger("resize", a);
            }), i) :!0;
        }, o.prototype.onCopy = function() {
            var t;
            return t = this.parent().find(".clip-message"), t.stop().show().fadeOut(500);
        }, o.prototype.doPrimaryAction = function() {
            return this.$(".download-form").submit(), !1;
        }, o.prototype._colorize = function(t, e, i) {
            var n;
            return null == i && (i = {}), n = function() {
                var n;
                return n = CodeMirror(t[0], {
                    readOnly:!0,
                    theme:"easel",
                    lineNumbers:!0,
                    mode:"css" === e ? "css" :"htmlmixed"
                }), i.callback && i.callback(n), n;
            }, i.renderOnTab ? (this._callOnTab[i.renderOnTab] = n, null) :n();
        }, o.prototype._setupClipCopy = function(t, e) {
            return this._setupHtmlClipCopy(t), this._setupCssClipCopy(e);
        }, o.prototype._setupCssClipCopy = function(t) {
            return this.cssClient = this._setupClipButton(this.cssClient, t, "css_clip_button", "css_clip_container");
        }, o.prototype._setupHtmlClipCopy = function(t) {
            return this.htmlClient = this._setupClipButton(this.htmlClient, t, "html_clip_button", "html_clip_container");
        }, o.prototype._setupClipButton = function(t, e, i) {
            var n;
            return t && t.destroy(), ZeroClipboard.config({
                moviePath:"/assets/ZeroClipboard.swf",
                forceHandCursor:!0
            }), n = $("#" + i), t = new ZeroClipboard(n), t.on("mousedown", this.onCopy.bind(n)), 
            t.on("datarequested", function() {
                return t.setText(e);
            }), t;
        }, o.prototype._setupWidth = function(t, e, i) {
            var n, o, r, s, a, l;
            return n = 22, a = parseInt(this.$(".images").css("width")), s = parseInt(this.$(".html-container").css("width")), 
            o = parseInt(this.$(".css-container").css("width")), l = 0, r = function(t, e, i) {
                return t ? (l += e + n, i.show()) :i.hide();
            }, r(t, a, this.$(".image-container")), r(i, o, this.$(".css-container")), r(e, s, this.$(".html-container")), 
            this.el.css({
                width:l + "px"
            });
        }, o;
    }(Draw.EmbedPane);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.ColorPickerPane = function(i) {
        function o() {
            return this._updateInterface = e(this._updateInterface, this), this._triggerColor = e(this._triggerColor, this), 
            this._setupForm = e(this._setupForm, this), this._onSubmit = e(this._onSubmit, this), 
            this.onColorPick = e(this.onColorPick, this), this.getColorHex = e(this.getColorHex, this), 
            this.getColor = e(this.getColor, this), this.setColor = e(this.setColor, this), 
            this.prompt = e(this.prompt, this), this.handleForm = e(this.handleForm, this), 
            this.doPrimaryAction = e(this.doPrimaryAction, this), this.render = e(this.render, this), 
            this.initialize = e(this.initialize, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.tagName = "div", o.prototype.className = "color-picker", 
        o.prototype.pickerSelector = ".picker", o.prototype.displaySelector = ".display", 
        o.prototype.colorSelector = ".color-display", o.prototype.template = '<form class="no-move">\n  <div class="display">\n    <div class="color-display-transparent"></div>\n    <div class="color-display"></div>\n  </div>\n  <input type="text" name="hex" class="hex textbox" />\n  <input type="hidden" name="alpha" class="alpha" />\n  <input type="submit" class="submit" />\n</form>\n\n<div class="picker no-move">\n</div>', 
        o.prototype.HEX_RE = new RegExp("^None|([a-fA-F0-9]{3})|([a-fA-F0-9]{6})$", "i"), 
        o.prototype.events = {
            "focus .hex":"onFocusHex"
        }, o.prototype.initialize = function(t) {
            return this.picker = new Color.Picker({
                callback:this.onColorPick
            }), this.render(), o.__super__.initialize.call(this, t);
        }, o.prototype.render = function() {
            return this.el = $(this.el), Draw.ColorPickerPane.__super__.render.call(this), this.$(this.pickerSelector).append(this.picker.el), 
            this.color = this.$(this.colorSelector);
        }, o.prototype.doPrimaryAction = function() {
            return this.form.submit(), !0;
        }, o.prototype.handleForm = function(t) {
            var e, i;
            return 0 === t.hex.length || this.HEX_RE.test(t.hex) ? 0 === t.hex.length || "none" === t.hex.toLowerCase() ? (this.setColor(null), 
            this._triggerColor(null)) :(e = parseInt(t.alpha), (isNaN(e) || !_.isNumber(e)) && (e = 100), 
            e = _.clamp(e, 0, 100), i = new paper.RGBColor("#" + t.hex.replace(/#/g, "")), i.setAlpha(e / 100), 
            this.setColor(i), this._triggerColor(i)) :void 0;
        }, o.prototype.prompt = function(t, e) {
            return this.setColor(e), this.callback = t, this.trigger("show");
        }, o.prototype.setColor = function(t) {
            return this.currentColor = Color.normalize(t), this.picker.setColor(Color.NORMALIZED_RGB(this.currentColor) || {
                R:0,
                G:0,
                B:0,
                A:0
            }, !0), this._updateInterface();
        }, o.prototype.getColor = function() {
            return this.currentColor;
        }, o.prototype.getColorHex = function(t) {
            var e;
            return t = t || this.getColor(), e = {
                R:Math.round(255 * t._red),
                G:Math.round(255 * t._green),
                B:Math.round(255 * t._blue)
            }, Color.HEX_STRING(Color.RGB_HEX(e));
        }, o.prototype.onColorPick = function() {
            return this.picker && (this.currentColor = Color.normalize(this.picker.getColor()), 
            this.currentColor) ? this._triggerColor(this.currentColor) :void 0;
        }, o.prototype.onShow = function() {
            return this._selectHexBox();
        }, o.prototype.onFocusHex = function() {
            return this._selectHexBox();
        }, o.prototype._onSubmit = function() {
            return this.handleForm(this.form.val()), !1;
        }, o.prototype._setupForm = function() {
            return o.__super__._setupForm.call(this), this.hex = new Forms.HexColorBox({
                el:this.$(".hex")
            }), this._updateInterface();
        }, o.prototype._selectHexBox = function() {
            var t = this;
            return setTimeout(function() {
                return t.$(".hex").select();
            }, 5);
        }, o.prototype._triggerColor = function(t) {
            return this.callback && this.callback(!0, t), this._updateInterface(), this.trigger("color", t);
        }, o.prototype._updateInterface = function() {
            var t;
            return t = this.currentColor, this.color && this.form ? (t ? (this.color.css({
                background:t.toCssString()
            }), this.color.removeClass("no-color")) :(this.color.addClass("no-color"), this.color.css({
                background:"none"
            })), this.form.val("hex", t && this.getColorHex(t) || "None"), this.form.val("alpha", t && null != t.alpha ? 100 * t.alpha :"100")) :void 0;
        }, o;
    }(Draw.FormEmbedPane);
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.FileExportPane = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        return i(n, e), n.prototype.template = "#file-export-template", n.prototype.className = "file-export", 
        n.prototype.initialize = function(t) {
            return n.__super__.initialize.call(this, t), this.render();
        }, n.prototype.setupClipCopy = function(t) {
            var e, i = this;
            return this.htmlClient && this.htmlClient.destroy(), ZeroClipboard.config({
                forceHandCursor:!0,
                moviePath:"/assets/ZeroClipboard.swf"
            }), e = $("#json_clip_button"), this.htmlClient = new ZeroClipboard(e), this.htmlClient.on("mousedown", this.onCopy.bind(e)), 
            this.htmlClient.on("datarequested", function() {
                return i.htmlClient.setText(t);
            });
        }, n.prototype.onCopy = function() {
            var t;
            return t = this.parent().find(".clip-message"), t.stop().show().fadeOut(500);
        }, n.prototype.onShow = function() {
            return document.onselectstart = null;
        }, n.prototype.onHide = function() {
            return document.onselectstart = function() {
                return !1;
            };
        }, n.prototype.prompt = function(t) {
            var e;
            return t = t.replace("'", "\\'"), e = this.$("#json-dump"), e.text(t), this.show(), 
            this.setupClipCopy(t), !0;
        }, n;
    }(Draw.EmbedPane);
}.call(this), function() {
    var t, e, i, n = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, o = {}.hasOwnProperty, r = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var n in e) o.call(e, n) && (t[n] = e[n]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    Draw.GradientPaneEditor = function(e) {
        function i() {
            return this.initialize = n(this.initialize, this), t = i.__super__.constructor.apply(this, arguments);
        }
        return r(i, e), i.prototype.initialize = function(t, e, n) {
            return this.options = n, i.__super__.initialize.call(this, t, e);
        }, i.prototype.drawPaths = function() {
            var t;
            return t = new paper.Rectangle(this.options.xMargin, this.options.gradientHeight, this.options.width - 2 * this.options.xMargin, Draw.GradientEditor.STOP_TRACK_WIDTH), 
            this.stopTrack = new Draw.Rectangle(t), this.stopTrack.set({
                fill_color:new paper.RGBColor(0, 0, 0, .1)
            }), this.group.addChildren([ this.stopTrack ]), this.drawStops();
        }, i.prototype.updatePaths = function(t) {
            return this.updateStops(t);
        }, i.prototype.drawStops = function(t) {
            var e;
            return e = i.__super__.drawStops.call(this, t), this.stopGroup || (this.stopGroup = new paper.Group(), 
            this.addChild(this.stopGroup)), this.stopGroup.addChildren(e), this.scaleSelectedStop();
        }, i.prototype.updateStops = function(t) {
            var e, n;
            return i.__super__.updateStops.call(this, t), this.scaleSelectedStop(), n = -Draw.GradientEditor.WIDTH / 2, 
            e = paper.Matrix.getTranslateInstance(n, 0), this.stopGroup.transform(e), e = paper.Matrix.getRotateInstance(-90, this.options.xMargin, this.options.gradientHeight), 
            this.stopGroup.transform(e), e = new paper.Matrix(1, 0, 0, -1, 0, 2 * this.options.gradientHeight), 
            this.stopGroup.transform(e);
        }, i;
    }(Draw.GradientEditor), Draw.GradientPaneTool = function(t) {
        function i() {
            return this.onMouseDrag = n(this.onMouseDrag, this), this.deactivate = n(this.deactivate, this), 
            this.activate = n(this.activate, this), this.processMouseMoveHit = n(this.processMouseMoveHit, this), 
            this._hit = n(this._hit, this), this.redraw = n(this.redraw, this), this.setGradient = n(this.setGradient, this), 
            this.initialize = n(this.initialize, this), e = i.__super__.constructor.apply(this, arguments);
        }
        return r(i, t), i.prototype.initialize = function(t, e, n) {
            return i.__super__.initialize.call(this, t), this.options = n, this.project = e;
        }, i.prototype.setGradient = function(t) {
            return this.gradientEditor && this.gradientEditor.remove(), this.gradientEditor = new Draw.GradientPaneEditor(paper.project, t, this.options);
        }, i.prototype.redraw = function() {
            return this.trigger("redraw", Draw.LAYER_USER);
        }, i.prototype._hit = function(t) {
            var e;
            return e = this.project.hitTest(t.point, this.hitOptions), e && (e.toolItem = e.item), 
            e;
        }, i.prototype.processMouseMoveHit = function(t, e) {
            if (this.trigger("cursor", this.CURSOR), e && this.gradientEditor) {
                if (e.toolItem instanceof Draw.GradientStop) return this.trigger("cursor", this.STOP_CURSOR);
                if (e.toolItem === this.gradientEditor.stopTrack) return this.trigger("cursor", this.ADD_STOP_CURSOR);
            }
        }, i.prototype.activate = function() {
            return paper.Tool.prototype.activate.call(this);
        }, i.prototype.deactivate = function() {
            return paper.Tool.prototype.deactivate.call(this);
        }, i.prototype.onMouseDrag = function(t) {
            return this._wasDragging = !0, this._toolItem instanceof Draw.GradientStop ? i.__super__.onMouseDrag.call(this, t) :void 0;
        }, i.prototype.onMouseUp = function(t) {
            return this._wasDragging || this._toolItem instanceof Draw.GradientStop || this.gradientEditor && this._toolItem === this.gradientEditor.stopTrack ? i.__super__.onMouseUp.call(this, t) :void 0;
        }, i;
    }(Draw.GradientTool), Draw.GradientPane = function(t) {
        function e() {
            return this.render = n(this.render, this), this.setGradient = n(this.setGradient, this), 
            this.setCursor = n(this.setCursor, this), this.onChangeGradient = n(this.onChangeGradient, this), 
            this.redraw = n(this.redraw, this), this.initialize = n(this.initialize, this), 
            i = e.__super__.constructor.apply(this, arguments);
        }
        return r(e, t), e.prototype.tagName = "div", e.prototype.className = "gradient-picker", 
        e.prototype.template = '<div class="transparent"></div><canvas></canvas>', e.prototype.initialize = function(t) {
            var i, n;
            return i = {
                width:250,
                height:40,
                xMargin:8,
                gradientHeight:20
            }, e.__super__.initialize.call(this, _.extend({}, i, t)), this.render(), n = window.paper, 
            this.scope = new paper.PaperScope(), this.scope.setup(this.canvas[0]), this.scope.view.setViewSize(new this.scope.Size(this.options.width, this.options.height)), 
            this.tool = new Draw.GradientPaneTool(this.model, this.scope.project, this.options), 
            this.tool.bind("cursor", this.setCursor), this.tool.bind("redraw", this.redraw), 
            this.tool.activate(), window.paper = n, this.options.gradient ? this.setGradient(this.options.gradient) :void 0;
        }, e.prototype.redraw = function(t) {
            return this.scope.view.draw(!1, t || Draw.LAYER_ALL);
        }, e.prototype.onChangeGradient = function() {
            return this.redraw(Draw.LAYER_ALL);
        }, e.prototype.setCursor = function(t) {
            return this.el.css("cursor", t);
        }, e.prototype.setGradient = function(t) {
            var e;
            return e = window.paper, window.paper = this.scope, this.gradient && this.gradient.unbind("change", this.onChangeGradient), 
            this.gradient = Color.normalize(t), this.gradient.bind("change", this.onChangeGradient), 
            this.gradientColor = new paper.GradientColor(this.gradient, new this.scope.Point(this.options.xMargin, this.options.gradientHeight), new this.scope.Point(this.options.width - this.options.xMargin, this.options.gradientHeight)), 
            this.path && this.path.remove(), this.path = new this.scope.Path.Rectangle(new this.scope.Rectangle(this.options.xMargin, 0, this.options.width - 2 * this.options.xMargin, this.options.gradientHeight)), 
            this.path.setLocked(!0), this.path.setFillColor(this.gradientColor), this.tool.setGradient(this.gradientColor), 
            this.redraw(Draw.LAYER_ALL), window.paper = e;
        }, e.prototype.render = function() {
            return this.el = $(this.el), e.__super__.render.call(this, {}), this.canvas = this.$("canvas"), 
            this.canvas.attr("id", "gradient-canvas-" + Draw.GradientPane._id++);
        }, e;
    }(Draw.EmbedPane), Draw.GradientPane._id = 0;
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.HelpPane = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        return i(n, e), n.prototype.template = '<div class="modal help-overlay">\n  <div class="modal-header">\n    <h3>Keyboard Shortcuts</h3>\n  </div>\n\n  <div class="modal-body">\n    <div class="commands"></div>\n    <div class="clear"></div>\n  </div>\n\n  <div class="modal-footer">\n    <a href="#" class="cta btn btn-info btn-large pull-left">Okay!</a>\n  </div>\n</div>', 
        n.prototype.section = '<div class="key-section">\n  <h3>{{title}}</h3>\n  <table></table>\n</div>', 
        n.prototype.line = '<tr class="key-line">\n  <td>{{keys}}</td>\n  <td>{{description}}</td>\n</tr>', 
        n.prototype.key = '<div class="key-light key-{{key}}">\n  {{text}}\n</div>', n.prototype.className = "help-pane", 
        n.prototype.KEYS = {
            command:"⌘",
            control:"⌘",
            escape:"esc",
            option:"option",
            shift:"shift",
            up:"↑",
            down:"↓",
            left:"←",
            right:"→"
        }, n.prototype.HOTKEYS = {
            Zooming:[ "=", "-", "1" ],
            "Copy Pasta":[ "control x", "control c", "control v" ],
            Hierarchy:[ "control up", "control down", "control shift up", "control shift down" ],
            Grouping:[ "control y", "control shift y", "control g", "control shift g" ],
            Misc:[ "?", "tab", "escape", "control '", "control shift e" ]
        }, n.prototype.events = {
            "click a":"onClickGo"
        }, n.prototype.render = function() {
            var t, e, i, o, r, s, a, l, c, h;
            n.__super__.render.call(this), window.ui && "Mac OS X" !== window.ui.os && (this.KEYS.command = "ctrl", 
            this.KEYS.control = "ctrl"), c = this.HOTKEYS, h = [];
            for (l in c) e = c[l], r = $($.parseHTML(this.renderTemplate(this.section, {
                title:l
            }))), this.$(".commands").append(r), i = r.find("table"), h.push(function() {
                var n, l, c;
                for (c = [], n = 0, l = e.length; l > n; n++) a = e[n], t = Draw.DefaultHotkeys[a], 
                a = a.split(" "), o = Draw.HotkeyDescription[t], a = function() {
                    var t, e, i;
                    for (i = [], t = 0, e = a.length; e > t; t++) s = a[t], i.push(this.renderTemplate(this.key, {
                        key:s,
                        text:this.KEYS[s] || s
                    }));
                    return i;
                }.call(this), r = this.renderTemplate(this.line, {
                    keys:a.join(""),
                    description:o
                }), c.push(i.append(r));
                return c;
            }.call(this));
            return h;
        }, n.prototype.events = {
            "click a":"ok"
        }, n.prototype.ok = function() {
            return this.hide(), !1;
        }, n;
    }(Draw.EmbedPane);
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.IconsPane = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        return i(n, e), n.prototype.template = "#icons-template", n.prototype.iconTemplate = "#icon-template", 
        n.prototype.className = "icons-pane", n.prototype.events = {
            "click a.icon":"onClickIcon"
        }, n.prototype.initialize = function(t) {
            return n.__super__.initialize.call(this, t), this.render();
        }, n.prototype.prompt = function(t) {
            var e, i = this;
            return this.callback = t, this.trigger("show"), this.$(".icons").css({
                opacity:.9
            }), e = function() {
                return i.$(".icons").css({
                    opacity:1
                });
            }, setTimeout(e, 100), !0;
        }, n.prototype.render = function() {
            var t, e, i, o;
            n.__super__.render.call(this), o = Draw.Icon;
            for (t in o) i = o[t], e = this.renderTemplate(this.iconTemplate, {
                icon:t,
                value:i
            }), this.$(".icons").append(e);
            return this;
        }, n.prototype.onClickIcon = function(t) {
            return this.callback(!0, $(t.target).attr("rel")), this.hide(), !1;
        }, n;
    }(Draw.EmbedPane);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    }, o = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.NewShadowPane = function(i) {
        function r() {
            return this.onHide = e(this.onHide, this), this.onClickShadow = e(this.onClickShadow, this), 
            this.prompt = e(this.prompt, this), this.initialize = e(this.initialize, this), 
            t = r.__super__.constructor.apply(this, arguments);
        }
        return n(r, i), r.prototype.className = "new-shadows", r.prototype.template = "#new-shadow-template", 
        r.prototype.pathSelector = ".path-shadows", r.prototype.textSelector = ".text-shadows", 
        r.prototype.events = {
            "click .shadow":"onClickShadow"
        }, r.prototype.initialize = function(t) {
            return r.__super__.initialize.call(this, t), this.render();
        }, r.prototype.prompt = function(t, e) {
            var i;
            return null == e && (e = {}), this.object = t, this.promptOptions = e, i = t.supportedEffects(), 
            this.$(this.pathSelector + ", " + this.textSelector).hide(), this.$(".separator").hide(), 
            o.call(i, "text_shadow") >= 0 && this.$(this.textSelector).show(), o.call(i, "box_shadow") >= 0 && this.$(this.pathSelector).show(), 
            o.call(i, "text_shadow") >= 0 && o.call(i, "box_shadow") >= 0 && this.$(".separator").show(), 
            this.trigger("show");
        }, r.prototype.onDocClick = function() {
            return !0;
        }, r.prototype.onClickShadow = function(t) {
            var e, i, n;
            return i = $(t.target), n = i.attr("data-type"), e = JSON.parse(i.attr("rel")), 
            this._addShadow(this._createShadow(n, e)), !1;
        }, r.prototype.onHide = function() {
            return this.object = null;
        }, r.prototype._addShadow = function(t) {
            return t && this.object && (this.promptOptions.effects.insert(t, 0, {
                originator:"newshadow"
            }), Draw.G && Draw.G.prompt && Draw.G.prompt.promptShadow(t, this.promptOptions)), 
            this.trigger("hide");
        }, r.prototype._createShadow = function(t, e) {
            var i;
            return i = null, t in Draw && (i = new Draw[t](), e.color && (e.color = Color.normalize(e.color)), 
            i.set(e)), i;
        }, r;
    }(Draw.EmbedPane);
}.call(this), function() {
    var t, e = {}.hasOwnProperty, i = function(t, i) {
        function n() {
            this.constructor = t;
        }
        for (var o in i) e.call(i, o) && (t[o] = i[o]);
        return n.prototype = i.prototype, t.prototype = new n(), t.__super__ = i.prototype, 
        t;
    };
    Draw.SharePane = function(e) {
        function n() {
            return t = n.__super__.constructor.apply(this, arguments);
        }
        return i(n, e), n.prototype.className = "share-pane", n.prototype.template = '<p class="is-public">This link is viewable by anyone you give it to.</p>\n<p class="is-private">This link is viewable only by people you\'ve invited to <strong>{{project}}</strong>.</p>\n\n<form>\n  <div class="control-group share-mode-group">\n    <div class="controls">\n      <input type="checkbox" class="inline share-comment-mode" name="commentmode"/>\n      <label for="commentmode" class="inline">link opens in comment mode</label>\n    </div>\n  </div>\n\n  <div class="control-group">\n    <div class="controls">\n      <input type="text" value="" class="link"/>\n      <span id="share_clip_container" class="clip_container">\n        <span id="share_clip_button" class="clip_button btn btn-large btn-info">Copy</span>\n        <span class="clip-message">copied!</span>\n      </span>\n    </div>\n  </div>\n\n</form>', 
        n.prototype.events = {
            "change .share-comment-mode":"onChangeShareComments"
        }, n.prototype.initialize = function(t) {
            return n.__super__.initialize.call(this, t), this.render({
                project:this._getProjectName()
            });
        }, n.prototype._getProjectName = function() {
            var t, e;
            return e = this.document.getEaselProject(), e && (t = e.get("name")), t || "your project";
        }, n.prototype._generateShareUrl = function() {
            var t;
            return t = "" + location.protocol + "//" + location.host + "/documents/" + this.document.id + "?mode=preview", 
            this.$(".share-comment-mode").is(":checked") && (t += "&c=t"), t;
        }, n.prototype.render = function(t) {
            return n.__super__.render.call(this, t), this.el.addClass("has-comments"), this;
        }, n.prototype.setupClipCopy = function(t) {
            var e, i = this;
            if (!window.TESTING) return this.shareClient && this.shareClient.destroy(), ZeroClipboard.config({
                forceHandCursor:!0,
                moviePath:"/assets/ZeroClipboard.swf"
            }), e = $("#share_clip_button"), this.shareClient = new ZeroClipboard(e), this.shareClient.on("mousedown", this.onCopy.bind(e)), 
            this.shareClient.on("datarequested", function() {
                return i.shareClient.setText(t);
            });
        }, n.prototype.onChangeShareComments = function() {
            return this.updateUrl(!1);
        }, n.prototype.onCopy = function() {
            var t;
            return t = this.parent().find(".clip-message"), t.stop().show().fadeOut(500);
        }, n.prototype.onShow = function() {
            return document.onselectstart = null;
        }, n.prototype.onHide = function() {
            return document.onselectstart = function() {
                return !1;
            };
        }, n.prototype.updateUrl = function(t) {
            var e;
            return e = this._generateShareUrl(), this.$(".link").val(e), this.updateMessage(), 
            t && this.show(), this.setupClipCopy(e);
        }, n.prototype.updateMessage = function() {
            var t, e, i, n;
            return "" === this.document.getAccessibility() ? (i = [ "is-public", "is-private" ], 
            t = i[0], e = i[1]) :(n = [ "is-private", "is-public" ], t = n[0], e = n[1]), this.$("." + t).hide(), 
            this.$("." + e).show();
        }, n.prototype.prompt = function() {
            return this.updateUrl(!0), !0;
        }, n;
    }(Draw.EmbedPane);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.SupportPane = function(i) {
        function o() {
            return this.onSubmitSearch = e(this.onSubmitSearch, this), this.onContactResult = e(this.onContactResult, this), 
            this.onSubmitContact = e(this.onSubmitContact, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.template = _.template('<div class="modal" id="support-dialog">\n  <div class="modal-header">\n    <h3>Help</h3>\n  </div>\n\n  <div class="modal-body">\n\n    <div class="support-section" id="support-section-search">\n      <h3 class="support-heading">Search the help docs</h3>\n\n      <form class="form-horizontal form-search" action="/api/v1/search">\n        <input class="full-width" type="text" name="q" placeholder="eg. adding a background">\n        <button class="btn pull-right btn-absolute">Go</button>\n      </form>\n\n      <div class="search-results">\n      </div>\n\n      <div class="default-results">\n        <div class="result">\n          <a class="title" href="http://help.easel.io/guide/common-tasks" target="_blank">\n            Common Tasks\n            <i class="icon icon-external-link"></i>\n          </a>\n          <p>\n            Outlines many common tasks such as\n            <a href="http://help.easel.io/guide/common-tasks#adding-images" target="_blank">importing images</a>,\n            <a href="http://help.easel.io/guide/common-tasks#add-background-images" target="_blank">using background images</a>, and\n            <a href="http://help.easel.io/guide/common-tasks#use-custom-fonts" target="_blank">using your own fonts</a>.</p>\n        </div>\n        <div class="result">\n          <a class="title" href="http://help.easel.io/guide/using-bootstrap" target="_blank">\n            Getting started with Bootstrap\n            <i class="icon icon-external-link"></i>\n          </a>\n          <p>Outlines the basics of using the Twitter Bootstrap elements in your designs. &nbsp;</p>\n        </div>\n      </div>\n\n    </div>\n\n    <div class="support-section" id="support-section-contact">\n      <form action="/api/v1/email" method="POST" class="form-contact" novalidate>\n        <h3 class="support-heading">Have a Question or Feedback? Let us know.</h3>\n        <div class="control-group email-group">\n          <div class="controls">\n            <input class="textinput full-width" type="text" placeholder="your@email.com" name="email" required>\n          </div>\n        </div>\n        <div class="control-group">\n          <div class="controls">\n            <input class="textinput full-width" type="text" placeholder="Subject" name="subject" required>\n          </div>\n        </div>\n        <div class="control-group">\n          <div class="controls">\n            <textarea name="message" placeholder="Type your message here..." class="full-width full-width-1" required></textarea>\n          </div>\n        </div>\n        <button class="btn pull-right">Contact us</button>\n        <img src="{{loading_image}}" class="loader pull-right" />\n      </form>\n    </div>\n\n    <div class="clear"></div>\n  </div>\n\n  <div class="modal-footer">\n    <a href="#" class="cta btn btn-info btn-large pull-left">Okay!</a>\n  </div>\n</div>'), 
        o.prototype.className = "support-pane", o.prototype.HELP_URL = "http://help.easel.io", 
        o.prototype.resultTemplate = _.template('<div class="result">\n  <a class="title" href="{{path}}" target="_blank">{{title}}</a>\n  <div class="content">{{html}}</div>\n</div>'), 
        o.prototype.noResultsTemplate = _.template('<p class="no-results">No results found for "{{q}}"</p>'), 
        o.prototype.events = {
            "click a.cta":"onClickOk"
        }, o.prototype.render = function() {
            var t, e;
            return o.__super__.render.call(this, {
                loading_image:Asset.LOADING_URL
            }), this.$(".form-search").on("submit", this.onSubmitSearch), this.inputs = this.$(".form-contact").find("input, textarea"), 
            this.inputs.jqBootstrapValidation(), this.$(".form-contact").on("submit", this.onSubmitContact), 
            this.options.user && this.options.user.get("email") && (t = this.options.user.get("email"), 
            e = $('<input type="hidden" name="email" value="' + t + '"/>'), this.$(".form-contact .email-group").replaceWith(e)), 
            this;
        }, o.prototype.onClickOk = function() {
            return this.hide(), !1;
        }, o.prototype.onSubmitContact = function() {
            var t, e;
            return e = this.$(".form-contact"), this.inputs.jqBootstrapValidation("hasErrors") ? void 0 :(t = e.serialize(), 
            e.addClass("submitting").find("input, textarea, button").prop("disabled", !0), $.post(e.attr("action"), t, this.onContactResult), 
            !1);
        }, o.prototype.onContactResult = function() {
            var t;
            return t = this.$(".form-contact").removeClass("submitting"), t.find("input, textarea, button").prop("disabled", !1), 
            t.find('input[name="subject"], textarea[name="message"]').val(""), this.hide(), 
            Draw.Growl.notify("We'll be in touch!", 3e3);
        }, o.prototype.onSubmitSearch = function() {
            var t, e, i, n;
            return e = this.$(".form-search"), t = e.serialize(), n = e.find("[name=q]").val(), 
            $.post(e.attr("action"), t, _.bind(this.onSearchResults, this, n)), i = "" + e.attr("action") + "?q=" + encodeURIComponent(n), 
            window._gaq && _gaq.push([ "_trackPageview", i ]), !1;
        }, o.prototype.onSearchResults = function(t, e) {
            var i, n, o, r, s, a, l, c;
            if (o = this.$(".search-results").html("").show(), i = this.$(".default-results"), 
            0 === e.results.length) return o.html(this.noResultsTemplate({
                q:t
            })), i.show();
            for (i.hide(), l = e.results, c = [], s = 0, a = l.length; a > s; s++) r = l[s], 
            r.path = "" + this.HELP_URL + r.path, r.html = this._replaceHrefs(r.html, r.path), 
            n = $($.parseHTML(this.resultTemplate(r))), c.push(o.append(n));
            return c;
        }, o.prototype._replaceHrefs = function(t, e) {
            return e = e.replace(/#.*/, ""), t.replace(/href="\//gi, 'target="_blank" href="' + this.HELP_URL + "/").replace(/href="#/gi, 'target="_blank" href="' + e + "#");
        }, o;
    }(Draw.EmbedPane);
}.call(this), function() {
    var t, e, i, n, o, r = {}.hasOwnProperty, s = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var n in e) r.call(e, n) && (t[n] = e[n]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    }, a = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    Draw.SymbolsContainer = function(e) {
        function i() {
            return t = i.__super__.constructor.apply(this, arguments);
        }
        return s(i, e), i.prototype.className = "symbols-container", i.prototype.render = function() {
            var t, e, i, n, o, r, s, a = this;
            if (o = this.options.elements.getUserCollections().All, t = new Draw.SymbolsPane({
                model:o,
                document:this.document,
                elements:this.options.elements
            }), this.userPane = new Draw.DropdownTabberPane({
                panes:[ {
                    name:"All",
                    pane:t
                } ]
            }), i = [], this.options.elements) {
                r = this.options.elements.getCollections();
                for (n in r) e = r[n], i.push({
                    name:n,
                    pane:new Draw.ElementsPane({
                        model:e,
                        editable:!1,
                        document:this.document
                    })
                });
                s = this.options.elements.getIconCollections();
                for (n in s) e = s[n], i.push({
                    name:n,
                    pane:new Draw.FontIconsPane({
                        model:e,
                        document:this.document
                    })
                });
            }
            return this.globalPane = new Draw.DropdownTabberPane({
                panes:i
            }), this.tabber = new Draw.SymbolsTabberPane({
                panes:[ {
                    name:"My Elements",
                    pane:this.userPane
                }, {
                    name:"Standard",
                    pane:this.globalPane
                } ]
            }), 0 === o.length && this.tabber.selectPane(1), o.bind("add", function() {
                var t;
                return a.tabber.selectPane(0), t = function() {
                    return a.userPane.scrollToTop();
                }, setTimeout(t, 100);
            }), this.el.append(this.tabber.el), this;
        }, i;
    }(Draw.RenderedEmbedPane), Draw.SymbolsTabberPane = function(t) {
        function i() {
            return e = i.__super__.constructor.apply(this, arguments);
        }
        return s(i, t), i.prototype.template = _.template('<div class="tabs top-tabs"></div>\n<div class="panes"></div>'), 
        i;
    }(Draw.TabberPane), Draw.SymbolsPane = function(t) {
        function e() {
            return this._makeDraggable = a(this._makeDraggable, this), this.onUpdateVisibleSymbols = a(this.onUpdateVisibleSymbols, this), 
            this.onAdd = a(this.onAdd, this), this.onClickEditName = a(this.onClickEditName, this), 
            this.onClickSymbol = a(this.onClickSymbol, this), this.onMouseLeave = a(this.onMouseLeave, this), 
            this.onMouseEnter = a(this.onMouseEnter, this), this.initialize = a(this.initialize, this), 
            i = e.__super__.constructor.apply(this, arguments);
        }
        return s(e, t), e.prototype.tagName = "div", e.prototype.className = "symbols-pane", 
        e.prototype.sectionTemplate = _.template('<div class="symbols-section {{section}}"></h3>\n  <- if(section && section != \'null\'){ ->\n    <h3 class="section-bar">\n      {{section}}\n      <i class="icon icon-plus"></i>\n      <i class="icon icon-minus"></i>\n    </h3>\n  <- } ->\n  <div class="section-items"></div>\n  <- if(description){ ->\n    <div class="section-description">\n      {{description}}\n    </div>\n  <- } ->\n</div>'), 
        e.prototype.itemTemplate = _.template('<div class="symbol" >\n\n  <div class="loading-container">\n    Loading...\n    <img src="/easel/assets/core/loading_white.gif"/>\n  </div>\n\n  <div class="name-container">\n    <div class="actions editable">\n      <a href="/documents/{{eid}}" target="_blank" class="edit" title="edit this element"><i class="icon-white icon-pencil"></i></a>\n      <a href="#" target="_blank" class="edit-name" title="edit this element\'s name"><i class="icon-white icon-pencil"></i></a>\n      <a href="#" class="delete" title="delete this element"><i class="icon-white icon-trash"></i></a>\n    </div>\n\n    <div class="name">{{name}}</div>\n  </div>\n\n  <div class="preview-container">\n    <- if(description){ ->\n      <p class="description">{{description}}</p>\n    <- } ->\n\n    <- if(preview != \'null\'){ ->\n      <div class="preview-background">\n        <img class="preview" src="{{preview}}"/>\n      </div>\n      <div class="no-preview">\n        <p><img src="/easel/assets/core/loading_white.gif"/> Generating preview</p>\n      </div>\n    <- } ->\n  </div>\n\n</div>'), 
        e.prototype.template = _.template('<a href="" class="add-symbol">add symbol</a>\n<div class="symbols"></div>\n<div class="no-symbols">\n  <h2>No elements yet</h2>\n  <p>\n    You can create one by selecting an object and pressing\n    <span class="key-light modifier-key">⌘</span><span class="key-light">Y</span>\n  </p>\n</div>'), 
        e.prototype.itemsSelector = ".symbols", e.prototype.noItemsSelector = ".no-symbols", 
        e.prototype.itemSelector = ".symbol", e.prototype.sectionSelector = ".symbols-section", 
        e.prototype.sectionItemsSelector = ".section-items", e.prototype.TOOLTIPS = {
            noneSelected:"Select an object or two and click this to create a symbol",
            selected:"Create a symbol from the currently selected objects"
        }, e.prototype.UPDATE_DELAY = 100, e.prototype.events = {
            "click .delete":"onClickDelete",
            "click .edit-name":"onClickEditName",
            "mouseenter .name-container":"onMouseEnter",
            "mouseleave .name-container":"onMouseLeave",
            "click .name-container":"onClickSymbol"
        }, e.prototype.initialize = function(t) {
            var i;
            return i = {
                useSections:!0
            }, e.__super__.initialize.call(this, _.extend(i, t));
        }, e.prototype.render = function() {
            return e.__super__.render.call(this), window.ui && "Mac OS X" !== window.ui.os ? this.$(".modifier-key").text("ctrl") :void 0;
        }, e.prototype.getModelAttributes = function(t) {
            var e;
            return e = _.clone(t.attributes), e.eid = e.eid || "", e.preview = e.thumbnail_url, 
            e.description || (e.description = void 0), e;
        }, e.prototype.setModelId = function(t, i) {
            return e.__super__.setModelId.call(this, t, i), t.find(".edit").attr("href", "/documents/" + i);
        }, e.prototype.addToSection = function(t) {
            var e;
            if (this.options.useSections) return e = this.$("" + this.sectionSelector + "." + t.getSubTag()), 
            e.length ? this._addToSection(e, t) :(this._generateItemSections(), this.$(this.noItemsSelector).hide());
        }, e.prototype.instantiateSymbol = function(t, e) {
            var i, n, o;
            return o = t.instantiate(e), i = o[0], n = o[1], i;
        }, e.prototype.setSymbolName = function(t, e) {
            return t.save({
                name:e
            });
        }, e.prototype.setParent = function(t) {
            var i, n, o = this;
            return e.__super__.setParent.call(this, t), t && (i = new Debouncer(300, function() {
                return o.onUpdateVisibleSymbols();
            }), n = function() {
                return i.update();
            }, t.getScrollable().on("scroll", n), $(window).on("resize", n)), setTimeout(this.onUpdateVisibleSymbols, 0);
        }, e.prototype.updateThumbView = function(t, e) {
            var i;
            return i = t.get("thumbnail_url"), i ? (e.find(".no-preview").hide(), e.find(".preview-background img").attr("src", i), 
            e.find(".preview-background").show()) :(e.find(".no-preview").show(), e.find(".preview-background").hide());
        }, e.prototype.updateItemView = function(t, e) {
            var i, n, o;
            if (!window.TESTING) {
                n = this.getModelAttributes(t);
                for (i in n) o = n[i], e.find("." + i).text(o);
                return this.updateThumbView(t, e);
            }
        }, e.prototype.generateItemViews = function() {
            return this.options.useSections && this.model.getElementsBySubtag ? this._generateItemSections() :e.__super__.generateItemViews.call(this);
        }, e.prototype.generateItemView = function(t) {
            var i, n, o = this;
            return n = e.__super__.generateItemView.call(this, t), !t.isLoaded || t.isLoaded() ? this._makeDraggable(n) :(n.addClass("loading"), 
            i = function() {
                return t.unbind("load", i), o._makeDraggable(n);
            }, t.bind("load", i)), this.updateThumbView(t, n), Features.has("edit_elements") || n.find(".edit").hide(), 
            n;
        }, e.prototype.onMouseEnter = function(t) {
            var e;
            return this._hoverTimer || (this._hoverTimer = new Debouncer(1e3, function(t) {
                return t.show();
            })), e = $(t.target).parentsAndSelf(".symbol").find(".preview-container"), this._hoverTimer.update(e);
        }, e.prototype.onMouseLeave = function(t) {
            var e;
            return this._hoverTimer.stop(), e = $(t.target).parentsAndSelf(".symbol").find(".preview-container").hide();
        }, e.prototype.onClickSymbol = function(t) {
            return this._hoverTimer && this._hoverTimer.stop(), $(t.target).parentsAndSelf(".symbol").find(".preview-container").toggle();
        }, e.prototype.onClickEditName = function(t) {
            var e, i, n, o;
            return n = $(t.target), e = this.getModelIdFromElement(n.parents(this.itemSelector)), 
            i = this.model.get(e), o = prompt("What would you like to name your element?", i.get("name")), 
            o && this.setSymbolName(i, o), !1;
        }, e.prototype.onAdd = function(t, i) {
            return this.options.useSections && t.getSubTag ? this.addToSection(t) :(e.__super__.onAdd.call(this, t, i), 
            this.$(this.itemsSelector).scrollTop(99999));
        }, e.prototype.onUpdateVisibleSymbols = function() {
            var t, e, i, n, o, r, s;
            for (n = this.$(".symbol"), e = function() {
                var t, e, o;
                for (o = [], t = 0, e = n.length; e > t; t++) i = n[t], $(i).isVisibleToUser() && o.push(this._getSymbol(i));
                return o;
            }.call(this), s = [], o = 0, r = e.length; r > o; o++) t = e[o], s.push(t.load());
            return s;
        }, e.prototype._getSymbol = function(t) {
            var e;
            return e = $(t.target || t).parentsAndSelf(".symbol"), this.model.get(this.getModelIdFromElement(e));
        }, e.prototype._bindEvents = function() {
            return e.__super__._bindEvents.call(this), this.model.bind("change:placed", this.onChange);
        }, e.prototype._makeDraggable = function(t) {
            var e, i, n;
            return t.removeClass("loading"), i = function(t, e) {
                var i;
                return i = {
                    event:t,
                    modifiers:{},
                    point:e.add(new paper.Point(5, 5))
                };
            }, e = function(t) {
                return paper.view.viewToProject(paper.DomEvent.getOffset(t, paper.view._canvas));
            }, n = this, $(t).draggable({
                cancel:"a",
                revert:!0,
                revertDuration:100,
                containment:"document",
                cursor:"move",
                helper:function(t) {
                    var i, o, r, s;
                    return r = e(t), s = n.model.get(n.getModelIdFromElement($(this))), n.document.moveToPointer(), 
                    n.document.undoIgnore(), n.undoCommand = new Draw.AddObjectCommand({
                        useCurrentParent:!0
                    }), i = n.instantiateSymbol(s, new paper.Point(0, 0)), n.undoCommand.setInitialState(i), 
                    i ? (i && i.setSelected && n.document.selectionModel.setSelected(i), this.instance = i, 
                    o = i.el.clone(), o.css({
                        "z-index":9999,
                        margin:0,
                        padding:0
                    }), $("body").append(o), i.setPosition(r)) :(o = $("<div/>"), $(this).data("draggable").disable()), 
                    o;
                },
                start:function(t) {
                    var o;
                    if (this.instance && !this.instance.get("snapped")) return o = e(t), n.document.tools.pointer.onMouseDown(i(t, o), {
                        undo:!1
                    });
                },
                stop:function(t) {
                    var o;
                    if (this.instance && !this.instance.get("snapped")) return o = e(t), n.document.tools.pointer.onMouseUp(i(t, o), {
                        undo:!1
                    }), $(this).data("draggable").options.revert ? (this.instance.remove(), n.undoCommand = null) :(n.undoCommand.setEndState(this.instance), 
                    n.document.undoAdd(n.undoCommand), n.document.undoResume());
                },
                drag:function(t, o) {
                    var r, s;
                    if (this.instance && !this.instance.get("snapped")) return o.position.left = t.clientX, 
                    o.position.top = t.clientY, s = e(t), n.document.tools.pointer.onMouseDrag(i(t, s), {
                        bufferDrag:!1,
                        undo:!1
                    }), r = t.clientX > n.el.width() && n.document.getBounds().contains(s), $(this).data("draggable").options.revert = !r, 
                    r ? o.helper.hide() :o.helper.show(), null;
                }
            });
        }, e.prototype._addToSection = function(t, e) {
            var i, n;
            return i = t.find(this.sectionItemsSelector), n = this.generateItemView(e), n ? i.append(n) :void 0;
        }, e.prototype._generateItemSections = function() {
            var t, e, i, n, o, r, s;
            r = this.model.getElementsBySubtag(), n = this.$(this.itemsSelector), _.size(r) && this.$(this.noItemsSelector).hide(), 
            s = [];
            for (o in r) t = r[o], e = this.renderTemplate(this.sectionTemplate, {
                section:o,
                description:t[0].get("section_description")
            }), e = $(e), n.append(e), e.find(".section-bar").toggler(), s.push(function() {
                var n, o, r;
                for (r = [], n = 0, o = t.length; o > n; n++) i = t[n], r.push(this._addToSection(e, i));
                return r;
            }.call(this));
            return s;
        }, e;
    }(Draw.CrudPane), Draw.ElementsPane = function(t) {
        function e() {
            return n = e.__super__.constructor.apply(this, arguments);
        }
        return s(e, t), e.prototype.getModelAttributes = function(t) {
            var e;
            return e = t.getAttributes(), e.eid = "", e.description || (e.description = void 0), 
            e;
        }, e.prototype._setElementEnable = function(t, e) {
            var i;
            return i = this.getElementFromModelId(t.KEY), i.draggable(e && "enable" || "disable");
        }, e;
    }(Draw.SymbolsPane), Draw.FontIconsPane = function(t) {
        function e() {
            return this.onSearch = a(this.onSearch, this), o = e.__super__.constructor.apply(this, arguments);
        }
        return s(e, t), e.prototype.itemTemplate = _.template('<div class="symbol-icon" title="{{icon_class}}">\n  <i class="preview {{icon_class}}"></i>\n</div>'), 
        e.prototype.template = _.template('<form action="#" class="icons-search-form">\n  <input name="q" type="text" class="input-medium search-query" placeholder="search for icons">\n</form>\n\n<div class="symbol-icons"></div>'), 
        e.prototype.itemsSelector = ".symbol-icons", e.prototype.itemSelector = ".symbol-icon", 
        e.prototype.initialize = function(t) {
            return t || (t = {}), t.useSections = !1, e.__super__.initialize.call(this, t);
        }, e.prototype.focusType = Draw.FOCUS_DIALOG, e.prototype.getTool = function() {
            return this.tool || (this.tool = new Draw.BasicViewTool(this.document)), this.tool;
        }, e.prototype.render = function() {
            var t = this;
            return e.__super__.render.call(this), this.document.getFocusManager().register(this), 
            this.$("form.icons-search-form .search-query").keyup(this.onSearch).focus(this.setFocus).blur(this.resetFocus), 
            this.form = this.$("form.icons-search-form").submit(function() {
                return t.onSearch(), !1;
            }), this;
        }, e.prototype.getModelAttributes = function(t) {
            var e;
            return e = t.attributes;
        }, e.prototype.instantiateSymbol = function(t, e) {
            return t.instantiate(e);
        }, e.prototype.onSearch = function() {
            var t, e, i;
            return t = this.form.serializeObject(), t.q = t.q && t.q.toLowerCase().trim() || "", 
            print("searching", t), i = function(e) {
                return t.q ? e.attr("title").indexOf(t.q) > -1 :!0;
            }, e = this.$(".symbol-icon"), e.each(function() {
                var t;
                return t = $(this), i(t) ? t.show() :t.hide();
            });
        }, e;
    }(Draw.SymbolsPane);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.UndoPane = function(i) {
        function o() {
            return this.onRedo = e(this.onRedo, this), this.onUndo = e(this.onUndo, this), this.onAddOp = e(this.onAddOp, this), 
            this.onAdd = e(this.onAdd, this), this.append = e(this.append, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.template = '<div id="{{id}}" class="undo-set"><ul>{{data}}</ul></div>', 
        o.prototype.className = "undo-stack", o.prototype.initialize = function(t) {
            return o.__super__.initialize.call(this, t), t.undo.bind("add", this.onAdd), t.undo.bind("undo", this.onUndo), 
            t.undo.bind("redo", this.onRedo);
        }, o.prototype._renderOp = function(t) {
            return "<li>" + t.toString() + "</li>";
        }, o.prototype.append = function(t) {
            var e, i;
            return t.bind("add", this.onAddOp), i = this.renderTemplate(this.template, {
                id:t.id,
                data:function() {
                    var i, n, o, r;
                    for (o = t.batch, r = [], i = 0, n = o.length; n > i; i++) e = o[i], r.push(this._renderOp(e));
                    return r;
                }.call(this).join("<br/>")
            }), this.el.append(i), this.el.scrollTop(9999);
        }, o.prototype.onAdd = function(t) {
            return this.append(t);
        }, o.prototype.onAddOp = function(t, e) {
            return this.$("#" + t.id).append("<br/>" + JSON.stringify(e.operation));
        }, o.prototype.onUndo = function(t, e) {
            return this.$(".undo-set").eq(e).remove();
        }, o.prototype.onRedo = function(t) {
            return this.append(t);
        }, o;
    }(Draw.EmbedPane);
}.call(this), function() {
    var t, e, i = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    e = ".easel-linkable", t = ".easel-click-target", Draw.DocumentPreview = function() {
        function n(t) {
            this.onCommentEvent = i(this.onCommentEvent, this), this.onDocumentChangeSize = i(this.onDocumentChangeSize, this), 
            this.onClickIframe = i(this.onClickIframe, this), this.onClickLink = i(this.onClickLink, this), 
            this.onClickLinkedElement = i(this.onClickLinkedElement, this);
            var e, n, o, r, s = this;
            e = {}, this.options = _.extend(e, t), n = {
                activate:!1,
                realtime:!1
            }, r = {
                initiallyAttachStyleSheets:!0
            }, o = Draw.DocumentFactory.instance(), this.docAndView = o.getOrCreate(this.options.eid, n, r), 
            this.document = this.docAndView.document, this.docAndView.waitViewCreated(function(t) {
                return s.viewport = t.view, s._initializeComments();
            });
        }
        return n.prototype._module = "Preview", mixin(n, Backbone.Events), n.prototype.waitLoad = function(t) {
            return this.document.state ? this.document.state.waitLoad(t) :t();
        }, n.prototype.getContainer = function() {
            return this.viewport.domCanvas;
        }, n.prototype.show = function() {
            return this.viewport.el.addClass("current-preview"), this.getContainer().on("click", e, this.onClickLinkedElement), 
            this.getContainer().on("click", "a", this.onClickLink), this.getContainer().on("click", this.onClickIframe), 
            this.viewport.onPreviewStart();
        }, n.prototype.hide = function() {
            return this.viewport.el.removeClass("current-preview"), this.removeClickTargets(), 
            this.getContainer().off("click", e, this.onClickLinkedElement), this.getContainer().off("click", "a", this.onClickLink), 
            this.getContainer().off("click", this.onClickIframe), this.viewport.onPreviewEnd();
        }, n.prototype.showClickTargets = function() {
            var i, n, o;
            return i = this._getClickTargetContainer(), n = i.find(t), n.length ? n.show() :(o = this, 
            this.getContainer().find(e).each(function() {
                var e, n, r, s;
                return r = $(this), e = $("<div/>", {
                    "class":t.replace(".", "")
                }), n = function(t) {
                    var e, i;
                    return t.is(".dom-group") ? (i = null, t.children().each(function() {
                        var t;
                        return t = n($(this)), i = i ? i.unite(t) :t;
                    }), i) :(e = t.offset(), new paper.Rectangle(e.left + o.viewport.el.scrollLeft(), e.top + o.viewport.el.scrollTop(), t.outerWidth(), t.outerHeight()));
                }, s = n(r), e.css({
                    left:s.x,
                    top:s.y,
                    width:s.width,
                    height:s.height
                }), i.append(e);
            }));
        }, n.prototype.hideClickTargets = function() {
            var e;
            return e = this._getClickTargetContainer(), e.find(t).hide();
        }, n.prototype.removeClickTargets = function() {
            var e;
            return e = this._getClickTargetContainer(), e.find(t).remove();
        }, n.prototype.enableComments = function() {
            return this.comments.enable();
        }, n.prototype.disableComments = function() {
            return this.comments.disable();
        }, n.prototype.showComment = function(t) {
            return this.comments.showComment(t);
        }, n.prototype.showResolved = function(t) {
            return this.comments.showResolved(t);
        }, n.prototype.onClickLinkedElement = function(t) {
            return this.trigger("click:linked", t), !1;
        }, n.prototype.onClickLink = function(t) {
            var i;
            return i = $(t.target), i.is(e) || i.parents(e).length ? void 0 :!1;
        }, n.prototype.onClickIframe = function(t) {
            return $(t.target).is("input, select, textarea") ? void 0 :window.focus();
        }, n.prototype.onDocumentChangeSize = function() {
            var t;
            return t = this.document.getSize(), this.comments ? this.comments.setSize(t.width, t.height) :void 0;
        }, n.prototype.onCommentEvent = function() {
            return this.trigger.apply(this, arguments);
        }, n.prototype._initializeComments = function() {
            return this.document.bind("change:size", this.onDocumentChangeSize), this.commentCanvas = $('<div class="comment-canvas"></div>'), 
            this.comments = new Draw.Comments({
                el:this.commentCanvas,
                document:this.document
            }), this.comments.bind("all", this.onCommentEvent), this.viewport.documentEl.append(this.commentCanvas), 
            this.onDocumentChangeSize();
        }, n.prototype._getClickTargetContainer = function() {
            return this.viewport.el.find(".document");
        }, n;
    }();
}.call(this), function() {
    var t, e, i = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    e = ".easel-linkable", t = ".easel-click-target", Draw.Preview = function() {
        function t(t) {
            var e = this;
            this.options = null != t ? t :{}, this._showHelp = i(this._showHelp, this), this.onChangeShowingResolved = i(this.onChangeShowingResolved, this), 
            this.onChangeCommentEnable = i(this.onChangeCommentEnable, this), this.onToggleComments = i(this.onToggleComments, this), 
            this.onTogglePreview = i(this.onTogglePreview, this), this.onClickTargetAction = i(this.onClickTargetAction, this), 
            this.onClickPreviewClose = i(this.onClickPreviewClose, this), this.onClickPreviewEdit = i(this.onClickPreviewEdit, this), 
            this.onClickPreviewHome = i(this.onClickPreviewHome, this), this.onClickLinkedElement = i(this.onClickLinkedElement, this), 
            this.syncCommentStateWithRouter = i(this.syncCommentStateWithRouter, this), this.showResolved = i(this.showResolved, this), 
            this.toggleComments = i(this.toggleComments, this), this.hideHelp = i(this.hideHelp, this), 
            this.showHelp = i(this.showHelp, this), this.enterEditMode = i(this.enterEditMode, this), 
            this.preview = i(this.preview, this), this.model = this.options.model, this.viewport = this.options.viewport, 
            this.body = $("body"), this.project = this.model.getEaselProject(), this.model.bind("change:toggle:preview", this.onTogglePreview), 
            this.model.bind("change:toggle:comments", this.onToggleComments), this.router = new Draw.PreviewRouter({
                model:this.model
            }), this.router.bind("change:enable", this.onChangeCommentEnable), this.router.bind("change:preview", this.syncCommentStateWithRouter), 
            this.router.bind("click:linked", this.onClickLinkedElement), this.router.bind("help", this.showHelp), 
            this.router.bind("escape", function() {
                return e.model.set("toggle:preview", !1);
            }), this.options.mode && "edit" !== this.options.mode && this.router.bind("document:load", function() {
                return e.showHelp(!0);
            }), this._setupActions(), this._active = !1, this._commentsEnabled = !1;
        }
        return mixin(t, Backbone.Events), t.prototype._module = "Preview", t.prototype.focusType = Draw.FOCUS_PREVIEW, 
        t.prototype.easelLinkable = e, t.prototype.getId = function() {
            return "preview";
        }, t.prototype.getTool = function() {
            return this._tool || (this._tool = new Draw.PreviewTool(this.model), this._tool.bind("clicktargets:toggle", this.router.onToggleClickTargets), 
            this._tool.bind("clicktargets:show", this.router.showClickTargets), this._tool.bind("clicktargets:hide", this.router.hideClickTargets), 
            this._tool.bind("clicktargets:show", this.onClickTargetAction), this._tool.bind("edit", this.enterEditMode), 
            this._tool.bind("toggleCommentMode", this.toggleComments), this._tool.bind("help", this.showHelp)), 
            this._tool;
        }, t.prototype.getBasePreviewDocument = function() {
            return this.router.basePreview;
        }, t.prototype.preview = function(t, e) {
            return t ? this.activate(e) :this.deactivate();
        }, t.prototype.isActive = function() {
            return this._active;
        }, t.prototype.activate = function(t) {
            var e, i = this;
            if (!this._active) return this._active = !0, this.model.pushFocus(this), document.onselectstart = function() {}, 
            t || (window.location && (window.location.hash = ""), this.router.activate(this.model, this.viewport), 
            this._showActions(), e = function() {
                return i.showHelp(!0);
            }, setTimeout(e, 100), this.showPreview(this.model.id), this.syncCommentStateWithRouter()), 
            this._leftCache = this.viewport.el.scrollLeft(), this._topCache = this.viewport.el.scrollTop(), 
            this.body.addClass("preview"), t && this.body.addClass("screenshot"), this.viewport.el.scrollTop(0), 
            this.viewport.el.scrollLeft(0), this._setTitle();
        }, t.prototype.deactivate = function() {
            return this._active ? (this._active = !1, document.onselectstart = function() {
                return !1;
            }, this._resetTitle(), this.router.disableComments(), this.router.deactivate(), 
            this.hideHelp(), this.body.removeClass("preview"), this.body.removeClass("screenshot"), 
            this._leftCache && this.viewport.el.scrollLeft(this._leftCache), this._topCache && this.viewport.el.scrollTop(this._topCache), 
            this.model.popFocus(this)) :void 0;
        }, t.prototype.enterEditMode = function() {
            return this.options.mode !== Draw.MODE_EDIT || this.router.enterEditMode() ? void 0 :this.deactivate();
        }, t.prototype.showPreview = function(t) {
            return window.TESTING ? this.router.showPreview(t) :this.router.navigate(t, !0);
        }, t.prototype.showHelp = function(t) {
            return this._commentsEnabled ? this._showHelp(t, "comment-help") :this._showHelp(t, "preview-help");
        }, t.prototype.hideHelp = function() {
            return this._help && this._help.hide(), this._help = null, !1;
        }, t.prototype.toggleComments = function() {
            return this.model.canComment() && (this._commentsEnabled = !this._commentsEnabled, 
            this.syncCommentStateWithRouter()), !1;
        }, t.prototype.showComment = function(t) {
            return this.activate(!1), this._commentsEnabled = !0, this.syncCommentStateWithRouter(), 
            this.router.showComment(t);
        }, t.prototype.showResolved = function(t) {
            return this._resolvedEnabled = t, this.syncCommentStateWithRouter(), !1;
        }, t.prototype.syncCommentStateWithRouter = function() {
            return this._commentsEnabled ? (this.actions.addClass("comment-mode"), this.actions.find(".preview-comments").addClass("selected"), 
            this.router.enableComments(), this.router.showResolved(this._resolvedEnabled)) :(this.actions.removeClass("comment-mode"), 
            this.actions.find(".preview-comments").removeClass("selected"), this.router.disableComments());
        }, t.prototype.onClickLinkedElement = function(t) {
            var i, n;
            return n = $(t.target), n.is(e) || (n = n.parents(e)), i = n.attr("data-link"), 
            pds(this, "clicked", i), this.showPreview(i), !1;
        }, t.prototype.onClickPreviewHome = function() {
            var t, e;
            return e = null, this.project && (t = this.project.documents.getHomepage()), t && (e = t.id), 
            this.showPreview(e), !1;
        }, t.prototype.onClickPreviewEdit = function() {
            return this.enterEditMode(), !1;
        }, t.prototype.onClickPreviewClose = function() {
            return this.model.set("toggle:preview", !1), !1;
        }, t.prototype.onClickTargetAction = function() {
            return this.hideHelp();
        }, t.prototype.onTogglePreview = function(t, e) {
            return this.preview(e);
        }, t.prototype.onToggleComments = function(t, e) {
            return this._commentsEnabled = e, this.syncCommentStateWithRouter();
        }, t.prototype.onChangeCommentEnable = function(t, e) {
            return e !== this._commentsEnabled ? (this._commentsEnabled = e, this.syncCommentStateWithRouter()) :void 0;
        }, t.prototype.onChangeShowingResolved = function(t, e) {
            return this.showResolved(e);
        }, t.prototype._setupActions = function() {
            var t = this;
            return this.actions = $("#preview-actions"), this.body.append(this.actions), this.actions.on("click", ".preview-close", this.onClickPreviewClose), 
            this.actions.on("click", ".preview-edit", this.onClickPreviewEdit), this.actions.on("click", ".preview-home", this.onClickPreviewHome), 
            this.actions.on("click", ".preview-comments", this.toggleComments), this.actions.on("click", ".preview-help", function() {
                return t.showHelp(), !1;
            }), this.actions.find(".show-resolved-comments").slidingCheckbox({
                onChange:this.onChangeShowingResolved
            }), $("#preview-actions a").qtip({
                style:{
                    classes:"qtip-preview",
                    tip:{
                        width:15,
                        height:8
                    }
                },
                position:{
                    my:"bottom center",
                    at:"top center",
                    viewport:$(window),
                    adjust:{
                        y:-25,
                        method:"shift"
                    }
                }
            }), $(".help-container a.ok").click(this.hideHelp);
        }, t.prototype._showActions = function() {
            var t, e;
            return e = null, t = null, this.options.mode === Draw.MODE_EDIT ? e = ".preview-edit, .preview-close" :t = ".preview-edit, .preview-close", 
            e && (e = this.actions.find(e), e.show()), t ? (t = this.actions.find(t), t.hide()) :void 0;
        }, t.prototype._showHelp = function(t, e) {
            return this._help || t && $.cookie(e) ? void 0 :(this._help = $("#" + e).toggle(), 
            $.cookie(e, !0));
        }, t.prototype._setTitle = function() {
            var t = this;
            return this._fetchProject(function() {
                var e;
                return t._title = document.title, e = t.project.get("name"), document.title = "" + e + " Preview - Easel";
            });
        }, t.prototype._resetTitle = function() {
            return this._title && (document.title = this._title), this._title = null;
        }, t.prototype._fetchProject = function(t) {
            return this.project ? t() :(this.project = new Easel.Project({
                eid:this.model.getProjectId()
            }), this.project.fetch({
                success:t
            }));
        }, t;
    }();
}.call(this), function() {
    var t, e, i, n = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, o = {}.hasOwnProperty, r = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var n in e) o.call(e, n) && (t[n] = e[n]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    e = ".easel-linkable", t = ".easel-click-target", Draw.PreviewRouter = function(t) {
        function o() {
            return this.onLoadDocument = n(this.onLoadDocument, this), this.onToggleClickTargets = n(this.onToggleClickTargets, this), 
            this.onChangeCommentEnable = n(this.onChangeCommentEnable, this), this.onClickLinkedElement = n(this.onClickLinkedElement, this), 
            this.onEscape = n(this.onEscape, this), this.onHelp = n(this.onHelp, this), this.showResolved = n(this.showResolved, this), 
            this.disableComments = n(this.disableComments, this), this.enableComments = n(this.enableComments, this), 
            this.showClickTargets = n(this.showClickTargets, this), this.hideClickTargets = n(this.hideClickTargets, this), 
            i = o.__super__.constructor.apply(this, arguments);
        }
        return r(o, t), o.prototype._module = "Preview", o.prototype.easelLinkable = ".easel-linkable", 
        o.prototype.routes = {
            ":eid":"showPreview"
        }, o.prototype.initialize = function(t) {
            var e;
            return this.options = null != t ? t :{}, e = {
                initiallyCreateBasePreview:!window.TESTING
            }, this.options = _.extend(e, this.options), this.model = this.options.model, this.showingClickTargets = !1, 
            this.documentPreviews = {}, this.options.initiallyCreateBasePreview ? this._createBasePreview() :void 0;
        }, o.prototype.activate = function() {
            var t;
            if (this._active = !0, this.documentPreviews = {}, this.documentPreviews[this.basePreviewId] = this.basePreview, 
            !this._started) {
                this._createBasePreview();
                try {
                    return Backbone.history.start(), this._started = !0;
                } catch (e) {
                    t = e;
                }
            }
        }, o.prototype.deactivate = function() {
            return this.currentPreview && this.currentPreview.hide(), this.currentPreview = null, 
            this._active = !1;
        }, o.prototype.enterEditMode = function() {
            return this.currentPreview ? this.currentPreview.document.id === this.basePreviewId ? !1 :(window.location = "/documents/" + this.currentPreview.document.id, 
            !0) :!1;
        }, o.prototype.hideClickTargets = function() {
            return this.currentPreview ? (this.currentPreview.hideClickTargets(), this.showingClickTargets = !1) :void 0;
        }, o.prototype.showClickTargets = function() {
            return this.currentPreview ? (this.currentPreview.showClickTargets(), this.showingClickTargets = !0) :void 0;
        }, o.prototype.enableComments = function() {
            return this.currentPreview ? this.currentPreview.enableComments() :void 0;
        }, o.prototype.disableComments = function() {
            return this.currentPreview ? this.currentPreview.disableComments() :void 0;
        }, o.prototype.showComment = function(t) {
            return this.currentPreview ? this.currentPreview.showComment(t) :void 0;
        }, o.prototype.showResolved = function(t) {
            return this.currentPreview ? this.currentPreview.showResolved(t) :void 0;
        }, o.prototype.showPreview = function(t) {
            var e, i = this;
            return t = t || "", this._active && (t = t.trim(), t || (t = this.basePreviewId), 
            e = this.documentPreviews[t], pds(this, "want to show preview for", t, e), e || (e = this._fetchDocument(t), 
            pds(this, "preview not found, fetching...", t, e)), e) ? e.waitLoad(function() {
                return i.currentPreview && (i.currentPreview.hide(), i._unbindFromPreview(i.currentPreview)), 
                i.currentPreview = e, i._bindToPreview(i.currentPreview), pds(i, "show preview for", t, e), 
                i._fetchDocuments(e.getContainer()), e.show(), i.trigger("change:preview", i.currentPreview), 
                Draw.TextFocuser.instance().focus(), setTimeout(function() {
                    return window.scrollTo(0, 1);
                }, 1);
            }) :void 0;
        }, o.prototype.onHelp = function() {
            return this.trigger("help");
        }, o.prototype.onEscape = function() {
            return this.trigger("escape");
        }, o.prototype.onClickLinkedElement = function(t) {
            return this.trigger("click:linked", t);
        }, o.prototype.onChangeCommentEnable = function(t, e) {
            return this.trigger("change:enable", t, e);
        }, o.prototype.onToggleClickTargets = function() {
            return this.showingClickTargets ? this.hideClickTargets() :this.showClickTargets();
        }, o.prototype.onLoadDocument = function(t) {
            return t && this.currentPreview && this.currentPreview.document.id === t.id && this.showPreview(t.id), 
            this.trigger("document:load");
        }, o.prototype._createBasePreview = function() {
            return this.basePreview ? void 0 :(this.basePreviewId = this.model.id, this.basePreview = new Draw.DocumentPreview({
                eid:this.basePreviewId
            }), this.documentPreviews[this.model.id] = this.basePreview, this.model.bind("load", this.onLoadDocument));
        }, o.prototype._bindToPreview = function(t) {
            return t.bind("click:linked", this.onClickLinkedElement), t.bind("change:enable", this.onChangeCommentEnable), 
            t.bind("help", this.onHelp), t.bind("escape", this.onEscape);
        }, o.prototype._unbindFromPreview = function(t) {
            return t.unbind("click:linked", this.onClickLinkedElement), t.unbind("change:enable", this.onChangeCommentEnable), 
            t.unbind("help", this.onHelp), t.unbind("escape", this.onEscape);
        }, o.prototype._fetchDocument = function(t) {
            return t && !this.documentPreviews[t] && (this.documentPreviews[t] = new Draw.DocumentPreview({
                eid:t
            }), pds(this, "fetching preview for", t, this.documentPreviews[t])), this.documentPreviews[t];
        }, o.prototype._fetchDocuments = function(t) {
            var i, n;
            return i = t.find(e), pds(this, "found links", i.length, i), n = this, i.each(function() {
                var t;
                return t = $(this).attr("data-link"), pds(this, "found eid", t, this), n._fetchDocument(t);
            });
        }, o;
    }(Backbone.Router);
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    Draw.Prompter = function() {
        function e(e) {
            this.onColorHide = t(this.onColorHide, this), this.onColorShow = t(this.onColorShow, this), 
            this.onDocClick = t(this.onDocClick, this), this.getFont = t(this.getFont, this), 
            this.hideColor = t(this.hideColor, this), this.getColor = t(this.getColor, this), 
            this.support = t(this.support, this), this.help = t(this.help, this), this.promptJson = t(this.promptJson, this), 
            this.promptShare = t(this.promptShare, this), this.promptCodeEdit = t(this.promptCodeEdit, this), 
            this.promptCode = t(this.promptCode, this), this.promptDocument = t(this.promptDocument, this), 
            this.promptShadow = t(this.promptShadow, this), this.hideAll = t(this.hideAll, this), 
            this.options = e, this.document = e.document, this.document.bind("prompt:color", this.getColor), 
            this.document.bind("prompt:codeexport", this.promptCode), this.document.bind("prompt:codeedit", this.promptCodeEdit), 
            this.document.bind("prompt:share", this.promptShare), this.document.bind("prompt:saveas", this.promptJson), 
            this.document.bind("prompt:help", this.help), this.document.bind("prompt:support", this.support), 
            this.document.bind("prompt:document", this.promptDocument), this.colors = e.colors, 
            this.fonts = e.fonts, this.focusManager = e.focusManager, $(document).bind("click", this.onDocClick);
        }
        return e.prototype.hideAll = function() {
            return this.hideColor(), this.fontFlyout.hide();
        }, e.prototype.promptShadow = function(t, e) {
            var i, n, o, r, s;
            return null == e && (e = {}), this.shadowPane || (this.shadowPane = new Draw.ShadowPropertiesPane({
                model:this.document,
                document:this.document
            }), this.shadowDialog = new Draw.Flyout({
                "class":"shadow-dialog",
                model:this.document,
                pane:this.shadowPane,
                delayShow:!1,
                buttons:Draw.OK_CANCEL
            }), this.focusManager.register(this.shadowDialog)), n = e.container || $("body"), 
            s = e.repositionMethod || "shift shift", o = e.my || "right bottom", i = e.at || "left center", 
            r = e.referenceEl || $("#" + t.id), this.shadowDialog.setContainer(n), this.shadowDialog.setTarget(r, o, i), 
            this.shadowDialog.setRepositionMethod(s), this.shadowPane.prompt(t, e), this.shadowPane;
        }, e.prototype.promptDocument = function(t, e) {
            return this.docPane || (this.docPane = new Draw.ChooseDocumentPane({
                model:this.document
            }), this.docDialog = new Draw.ModalDialog({
                document:this.document,
                pane:this.docPane,
                show:!1,
                title:"Choose Document",
                buttons:{
                    primary:"Ok",
                    secondary:"Cancel"
                }
            })), this.docPane.prompt(t, e);
        }, e.prototype.promptCode = function(t, e) {
            var i;
            return this.codePane || (this.codePane = new Draw.CodeExportPane({
                model:this.document,
                projectDocument:this.options.projectDocument
            }), this.codeDialog = new Draw.ModalDialog({
                document:this.document,
                pane:this.codePane,
                show:!1,
                title:"Code Export",
                closeButton:!0
            })), i = _.extend({
                all:e
            }, this.options.user.get("preferences")), this.codePane.prompt(t, i);
        }, e.prototype.promptCodeEdit = function() {
            return this.codeEditPane || (this.codeEditPane = new Draw.CodeEditPane({
                model:this.document,
                projectDocument:this.options.projectDocument
            }), this.codeEditDialog = new Draw.Dialog({
                model:this.document,
                position:{
                    top:60,
                    left:200
                },
                pane:this.codeEditPane,
                closeButton:!0,
                delayShow:!1,
                resizable:!0,
                title:"Edit Project CSS",
                "class":"code-edit-dialog"
            })), this.codeEditPane.prompt();
        }, e.prototype.promptShare = function() {
            return this.sharePane || (this.sharePane = new Draw.SharePane({
                model:this.document
            }), this.shareDialog = new Draw.ModalDialog({
                document:this.document,
                pane:this.sharePane,
                show:!1,
                title:"Share",
                closeButton:!0
            })), this.sharePane.prompt();
        }, e.prototype.promptJson = function(t) {
            return this.jsonPane || (this.jsonPane = new Draw.FileExportPane({
                model:this.document
            }), this.jsonDialog = new Draw.ModalDialog({
                document:this.document,
                pane:this.jsonPane,
                show:!1,
                title:"JSON Export",
                buttons:{
                    primary:"I'm Done"
                }
            })), this.jsonPane.prompt(t);
        }, e.prototype.help = function() {
            return this.helpPane || (this.helpPane = new Draw.HelpPane({
                model:this.document
            }), this.helpOverlay = new Draw.ModalOverlay({
                pane:this.helpPane,
                document:this.document,
                "class":"help-dialog"
            })), this.helpOverlay.isVisible() ? this.helpOverlay.hide() :this.helpOverlay.show(), 
            !1;
        }, e.prototype.support = function() {
            return this.supportPane || (this.supportPane = new Draw.SupportPane({
                model:this.document,
                user:this.options.user
            }), this.supportOverlay = new Draw.ModalOverlay({
                pane:this.supportPane,
                document:this.document,
                "class":"support-dialog"
            })), this.supportOverlay.isVisible() ? this.supportOverlay.hide() :this.supportOverlay.show(), 
            !1;
        }, e.prototype.getColor = function(t, e, i) {
            var n, o;
            return null == i && (i = {}), this._createColorDialog(), this.colorDialog.isVisible() && this.lastReference.attr("id") === i.referenceEl.attr("id") ? (this.hideColor(), 
            void 0) :(this.colorCancelCallback = i.cancelCallback || null, this.lastReference = i.referenceEl, 
            n = i.container || $("body"), o = i.repositionMethod || "shift shift", this.colorDialog.setContainer(n), 
            this.colorDialog.setTarget(i.referenceEl, i.my, i.at), this.colorDialog.setRepositionMethod(o), 
            this.colorPane.prompt(t, e, i.acceptGradient), this.colorPane);
        }, e.prototype.hideColor = function() {
            return this.colorDialog.isVisible() ? this.colorDialog.hide() :void 0;
        }, e.prototype.getFont = function(t, e, i) {
            return this._createFontDialog(), i ? this.fontFlyout.isVisible() && this.lastFontReference.attr("id") === i.attr("id") ? (this.fontFlyout.hide(), 
            void 0) :(this.fontFlyout.setTarget(i), this.lastFontReference = i, this.fontPane.prompt(t, e), 
            this.fontPane) :$.error("fonts in a dialog not supported yet");
        }, e.prototype.onDocClick = function(t) {
            var e;
            if (this.focusManager) return e = this.focusManager.peek(), e && e.onDocClick ? e.onDocClick(t) :!0;
        }, e.prototype.onColorShow = function() {}, e.prototype.onColorHide = function() {
            return this.document.cacheCurrentColors(), this.colorCancelCallback ? (this.colorCancelCallback(), 
            this.colorCancelCallback = null) :void 0;
        }, e.prototype._createColorDialog = function() {
            return this.colorPane ? void 0 :(this.colorPane = new Draw.ColorsView({
                model:this.colors,
                document:this.document
            }), this.colorDialog = new Draw.Flyout({
                model:this.document,
                pane:this.colorPane,
                delayShow:!1,
                buttons:{
                    primary:"Ok",
                    secondary:"Cancel"
                },
                "class":"color-dialog"
            }), this.focusManager && this.focusManager.register(this.colorDialog), this.colorDialog.bind("hide", this.onColorHide), 
            this.colorDialog.bind("show", this.onColorShow));
        }, e.prototype._createFontDialog = function() {
            return this.fonts && !this.fontPane ? (this.fontPane = new Draw.FontsView({
                model:this.fonts,
                document:this.document
            }), this.fontFlyout = new Draw.DropdownFlyout({
                model:this.document,
                pane:this.fontPane
            }), this.focusManager ? this.focusManager.register(this.fontFlyout) :void 0) :void 0;
        }, e;
    }();
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.ResponsiveIconsView = function(i) {
        function o() {
            return this.onClickMobile = e(this.onClickMobile, this), this.onClickTablet = e(this.onClickTablet, this), 
            this.onClickDesktop = e(this.onClickDesktop, this), this.onChangeDocSize = e(this.onChangeDocSize, this), 
            t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.DESKTOP = 980, o.prototype.TABLET = 768, o.prototype.MOBILE = 320, 
        o.prototype.initialize = function(t) {
            var e;
            return e = {}, this.options = _.extend(e, t), this.document = this.options.document, 
            this.viewport = this.options.viewport, this.el = $(this.el), this.currentHeights = {}, 
            this.document.bind("change:size", this.onChangeDocSize), this.onChangeDocSize(this.document, this.document.getSize()), 
            this.$("a.desktop-size").click(this.onClickDesktop).show(), this.$("a.tablet-size").click(this.onClickTablet).show(), 
            this.$("a.mobile-size").click(this.onClickMobile).show();
        }, o.prototype.onChangeDocSize = function(t, e, i) {
            return null == i && (i = {}), "ResponsiveIconsView" !== i.originator && this._saveHeight(), 
            this.$(".size-link").removeClass("current"), this.$("." + this._getCurrentDevice() + "-size").addClass("current");
        }, o.prototype.onClickDesktop = function() {
            return this._setSize(this.DESKTOP);
        }, o.prototype.onClickTablet = function() {
            return this._setSize(this.TABLET);
        }, o.prototype.onClickMobile = function() {
            return this._setSize(this.MOBILE);
        }, o.prototype._saveHeight = function() {
            var t, e;
            return e = this.document.getSize(), t = this._getDevice(e.width), this.currentHeights[t] = e.height;
        }, o.prototype._getCurrentDevice = function() {
            return this._getDevice(this.document.getSize().width);
        }, o.prototype._getDevice = function(t) {
            var e;
            return e = "mobile", t >= this.DESKTOP ? e = "desktop" :t >= this.TABLET && (e = "tablet"), 
            e;
        }, o.prototype._getContentHeight = function() {
            return this.viewport.getView().domCanvas.parent()[0].scrollHeight;
        }, o.prototype._setSize = function(t, e) {
            var i, n, o;
            return o = this.document.getSize(), i = this._getDevice(t), n = this.currentHeights[i], 
            this.document.setSize(new paper.Size(t, e || n || o.height), {
                originator:"ResponsiveIconsView"
            }), this._syncHeight(), !1;
        }, o.prototype._syncHeight = function() {
            var t, e, i;
            return i = this.document.getSize(), t = this._getDevice(i.width), e = Math.max(500, this.currentHeights[t] || i.height), 
            e = Math.max(e, this._getContentHeight()), this.currentHeights[t] = e, this.document.setSize(new paper.Size(i.width, e), {
                originator:"ResponsiveIconsView"
            });
        }, o;
    }(Backbone.View);
}.call(this), function() {
    var t;
    Draw.CKEditor = function() {
        function e() {}
        return e._editors = {}, e.initialized = !1, e.initialize = function() {
            var t, e;
            return CKEDITOR.config.customConfig = void 0, t = {
                "lang/en.js":"//127.0.0.1/easel/assets/ckeditor/lang/en-d263f8d5f074aa504202b6cf841d2392.js",
                "skins/easel/skin.js":"//127.0.0.1/easel/assets/ckeditor/skins/easel/skin-68b3a349e11fc47c5bb7f3f3c469e1af.js",
                "skins/easel/editor.css":"//127.0.0.1/easel/assets/ckeditor/skins/easel/editor-4ddd00d0c67f7a349bd99b9922b54bc5.css"
            }, e = CKEDITOR.getUrl, CKEDITOR.getUrl = function(i) {
                var n, o;
                for (n in t) if (o = t[n], -1 !== i.indexOf(n)) return o;
                return e.apply(CKEDITOR, arguments);
            };
        }, e.enable = function(e) {
            var i, n, o;
            return this.initialized || this.initialize(), CKEDITOR.disableAutoInline = !0, CKEDITOR.dtd.$editable.button = 1, 
            CKEDITOR.dtd.$editable.small = 1, CKEDITOR.dtd.$editable.label = 1, CKEDITOR.dtd.$editable.span = 1, 
            CKEDITOR.dtd.$editable.th = 1, CKEDITOR.dtd.$editable.td = 1, CKEDITOR.dtd.$editable.a = 1, 
            o = e[0].id, o || (o = e[0].id = _.uniqueId("ckedit-")), i = this.BASIC_CONFIG, 
            e.is("div") ? i = this.BODY_CONFIG :e.is("h1, h2, h3, h4, h5, h6, h7") ? i = this.HEADING_CONFIG :e.parentsAndSelf("a").length && (i = this.ANCHOR_CONFIG), 
            this._editors[o] ? void 0 :(e.attr("contenteditable", !0), n = CKEDITOR.inline(e[0], i), 
            this._editors[o] = n, n.on("instanceReady", function() {
                return n.execCommand("selectAll"), t(n, e);
            }), n.on("focus", function() {
                return setTimeout(function() {
                    return t(n, e);
                }, 10);
            }));
        }, e.disable = function(t) {
            var e, i;
            return i = t[0].id, e = this._editors[i], e.destroy(), delete this._editors[i], 
            0 === i.indexOf("ckedit") && t.removeAttr("id"), t.removeAttr("contenteditable"), 
            t.removeClass("cke_focus cke_editable cke_editable_inline cke_contents_ltr");
        }, e.selectAll = function(t) {
            var e, i;
            return i = t[0].id, e = this._editors[i], e ? e.execCommand("selectAll") :void 0;
        }, e.BODY_CONFIG = {
            skin:"easel",
            forcePasteAsPlainText:!0,
            enterMode:1,
            removeButtons:"Subscript,Superscript,Anchor",
            extraPlugins:"easeltextcolor,easelpastefix,easellink,easelselectall,easelenterkey",
            toolbarGroups:[ {
                name:"basicstyles",
                groups:[ "basicstyles", "cleanup" ]
            }, {
                name:"paragraph",
                groups:[ "list", "indent", "blocks", "align" ]
            }, {
                name:"easellinks"
            }, {
                name:"textcolors"
            } ]
        }, e.HEADING_CONFIG = {
            skin:"easel",
            forcePasteAsPlainText:!0,
            enterMode:3,
            removeButtons:"Subscript,Superscript,Anchor",
            extraPlugins:"easeltextcolor,easelpastefix,easellink,easelselectall,easelenterkey",
            toolbarGroups:[ {
                name:"basicstyles",
                groups:[ "basicstyles", "cleanup" ]
            }, {
                name:"easellinks"
            }, {
                name:"textcolors"
            } ]
        }, e.BASIC_CONFIG = {
            skin:"easel",
            forcePasteAsPlainText:!0,
            enterMode:2,
            removeButtons:"Subscript,Superscript,Anchor",
            extraPlugins:"easeltextcolor,easelpastefix,easellink,easelselectall,easelenterkey",
            toolbarGroups:[ {
                name:"basicstyles",
                groups:[ "basicstyles", "cleanup" ]
            }, {
                name:"easellinks"
            }, {
                name:"textcolors"
            } ]
        }, e.ANCHOR_CONFIG = {
            skin:"easel",
            forcePasteAsPlainText:!0,
            enterMode:2,
            removeButtons:"Subscript,Superscript,Anchor,UnsetLink",
            extraPlugins:"easeltextcolor,easelpastefix,easelselectall,easelenterkey",
            toolbarGroups:[ {
                name:"basicstyles",
                groups:[ "basicstyles", "cleanup" ]
            }, {
                name:"textcolors"
            } ]
        }, e;
    }(), t = function(t, e) {
        var i, n;
        return n = $("#cke_" + e[0].id), $(".viewable-viewport .document-container").append(n), 
        i = e.offset(), n.css({
            top:i.top - n.height() - 10 + 1e3,
            left:i.left + 1e3,
            "z-index":2e3
        });
    };
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.SavedView = function(i) {
        function o() {
            return this.update = e(this.update, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.initialize = function() {
            return this.model.bind("saved", this.update), this.el = $(this.el);
        }, o.prototype.update = function() {
            return this.el.stop(!0, !0), this.el.show(), this.el.fadeOut(700);
        }, o;
    }(Backbone.View);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.SaveMessageView = function(i) {
        function o() {
            return this.onSaved = e(this.onSaved, this), this.onSaving = e(this.onSaving, this), 
            t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.messages = {
            saving:"Saving changes",
            saved:"All changes saved"
        }, o.prototype.initialize = function(t) {
            var e;
            return e = {}, this.options = _.extend(e, t), this.document = this.options.document, 
            this.el = $(this.el), this.document.state ? (this.document.state.bind("saving", this.onSaving), 
            this.document.state.bind("saved", this.onSaved)) :void 0;
        }, o.prototype.setMessage = function(t) {
            return this.el.text(this.messages[t]), this.el.removeClass(_.keys(this.messages).join(" ")), 
            this.el.addClass(t);
        }, o.prototype.onSaving = function() {
            return this.setMessage("saving");
        }, o.prototype.onSaved = function() {
            return this.setMessage("saved");
        }, o;
    }(Backbone.View);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    }, o = [].indexOf || function(t) {
        for (var e = 0, i = this.length; i > e; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    Draw.SidebarHelpView = function(i) {
        function r() {
            return this.onTourContainer = e(this.onTourContainer, this), this.onChangeSelectedObject = e(this.onChangeSelectedObject, this), 
            t = r.__super__.constructor.apply(this, arguments);
        }
        return n(r, i), r.prototype.events = {
            "click .show-video":"onClickShowVideo",
            "click #container-learn-tour a":"onClickContainerTour"
        }, r.prototype.initialize = function(t) {
            return this.options = null != t ? t :{}, this.el = $(this.el), this.document = this.options.document, 
            this.document.selectionModel.bind("change:object", this.onChangeSelectedObject), 
            this.document.bind("tour:container", this.onTourContainer), this._createContainerTour();
        }, r.prototype.onClickShowVideo = function(t) {
            var e, i, n, o;
            return i = $(t.target), n = i.attr("title"), o = i.attr("rel"), e = i.attr("data-permalink"), 
            this.document.videoNotify(n, o, e), !1;
        }, r.prototype.onClickContainerTour = function() {
            return this.document.startContainerTour(), !1;
        }, r.prototype.onChangeSelectedObject = function(t, e, i) {
            var n, r;
            return o.call(i, "pull") >= 0 ? (r = this.options.dialogManager.dialogs.properties.pane, 
            n = r.getObject()) :void 0;
        }, r.prototype.onTourContainer = function() {
            return this.tour.stop(), this.tour.start();
        }, r.prototype._createContainerTour = function() {
            return this.tour = new Draw.Demo.Tour.Container({
                document:this.options.document,
                viewport:this.options.viewport,
                dialogManager:this.options.dialogManager,
                prompter:this.options.prompter,
                menu:this.options.menu
            });
        }, r;
    }(Backbone.View);
}.call(this), function() {
    var t, e, i, n, o, r = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, s = {}.hasOwnProperty, a = function(t, e) {
        function i() {
            this.constructor = t;
        }
        for (var n in e) s.call(e, n) && (t[n] = e[n]);
        return i.prototype = e.prototype, t.prototype = new i(), t.__super__ = e.prototype, 
        t;
    };
    e = function(t) {
        function e() {
            return this._onSubmit = r(this._onSubmit, this), this.handleForm = r(this.handleForm, this), 
            i = e.__super__.constructor.apply(this, arguments);
        }
        return a(e, t), e.prototype.title = "Create a free account", e.prototype.template = '<form accept-charset="UTF-8" action="/users" method="post" class="signup-form">\n  <div class="message">\n  </div>\n  <input name="utf8" type="hidden" value="✓">\n  <input name="demo_type" type="hidden">\n  <input id="user_timezone" name="user[timezone]" type="hidden" value="-420">\n\n  <div class="control-group">\n    <div class="controls">\n      <label class="control-label">Name</label>\n      <input name="user[name]" placeholder="Bobby Bobson" type="text">\n    </div>\n  </div>\n\n  <div class="control-group">\n    <div class="controls">\n      <label class="control-label">Email</label>\n      <input name="user[email]" type="email" placeholder="bob@example.com">\n    </div>\n  </div>\n\n  <div class="control-group">\n    <div class="controls">\n      <label class="control-label">Password</label>\n      <input minlength="6" name="user[password]" type="password">\n    </div>\n  </div>\n</form>', 
        e.prototype.setMessage = function(t) {
            var e;
            return e = t || "<p>Let's do this.</p>", this.el.find(".message").html(e);
        }, e.prototype.handleForm = function() {
            return this.form.submit(), !1;
        }, e.prototype.formOptions = function() {
            return {
                disableSubmittersOnSubmit:!0
            };
        }, e.prototype._setDemoType = function() {
            var t;
            return (t = Draw.LocalStorage.get("current_demo", !0)) ? this.el.find('input[name="demo_type"]').val(t.demo_type) :void 0;
        }, e.prototype._onSubmit = function() {
            return this._setDemoType(), this.el.parents(".modal").find(".modal-footer a.btn-primary").attr("disabled", !0), 
            !0;
        }, e;
    }(Draw.FormEmbedPane), t = function(t) {
        function e() {
            return n = e.__super__.constructor.apply(this, arguments);
        }
        return a(e, t), e.prototype.title = "Create a free account", e.prototype.template = '<div class="message">\n  <p>\n  You\'re logged in. Do you want this document saved to your account?\n  </p>\n</div>', 
        e.prototype.setMessage = function(t) {
            return this.el.find(".message").html(t);
        }, e.prototype.doPrimaryAction = function() {
            var t = this;
            return mixpanel.track("DemoShowSignup:IsSignedIn:UserWantsToSave", {
                user:this.options.user.get("email")
            }), this.setMessage("<p>\n  We dont support saving demos yet. But you've notified us that we\n  should! We'll take this feedback into account.\n</p>"), 
            setTimeout(function() {
                return t.hide();
            }, 3e3), this.el.parents(".modal").find("button").prop("disabled", !0), !1;
        }, e;
    }(Draw.FormEmbedPane), Draw.SignupView = function(i) {
        function n() {
            return this.onClickSignup = r(this.onClickSignup, this), this.onPromptSignup = r(this.onPromptSignup, this), 
            o = n.__super__.constructor.apply(this, arguments);
        }
        return a(n, i), n.prototype.initialize = function(t) {
            return this.options = null != t ? t :{}, this.el = $(this.el), this.document = this.options.document, 
            $(document).on("click", ".signup-link", this.onClickSignup), this.document.bind("prompt:signup", this.onPromptSignup), 
            this.setupSignupLinks();
        }, n.prototype.setupSignupLinks = function() {
            return this._isSignedIn() ? $(".signup-link").hide() :void 0;
        }, n.prototype.onPromptSignup = function(t) {
            return this._showDialog(t);
        }, n.prototype.onClickSignup = function() {
            return this._showDialog(), !1;
        }, n.prototype._showDialog = function(t) {
            return this._isSignedIn() ? (mixpanel.track("DemoShowSignup:IsSignedIn", {
                message:t || "clicked signup",
                user:this.options.user.get("email")
            }), this.pane = this._createNotifyDialog()) :this.pane = this._createSignupDialog(t), 
            this.pane.show();
        }, n.prototype._createNotifyDialog = function() {
            return this.pane || (this.pane = new t({
                noTimeout:!0,
                document:this.document,
                user:this.options.user
            }), this.pane.render(), this.dialog = new Draw.ModalDialog({
                title:this.pane.title,
                pane:this.pane,
                document:this.document,
                closeButton:!0,
                dialogClassName:"modal info-modal",
                buttons:{
                    primary:"Yes",
                    secondary:"No"
                }
            })), this.pane;
        }, n.prototype._createSignupDialog = function(t) {
            return this.pane || (this.pane = new e({
                noTimeout:!0,
                document:this.document
            }), this.pane.render(), this.dialog = new Draw.ModalDialog({
                title:this.pane.title,
                pane:this.pane,
                document:this.document,
                closeButton:!0,
                dialogClassName:"modal signup-modal",
                buttons:{
                    primary:"Create"
                }
            })), this.pane.setMessage(t), this.pane.form.reset(), this.pane;
        }, n.prototype._isSignedIn = function() {
            return !(!this.options.user || !this.options.user.get("eid"));
        }, n;
    }(Backbone.View);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.ToolsView = function(i) {
        function o() {
            return this.clickTool = e(this.clickTool, this), this.mouseoutToolStates = e(this.mouseoutToolStates, this), 
            this.mouseoverToolStates = e(this.mouseoverToolStates, this), this.mouseupTool = e(this.mouseupTool, this), 
            this.mousedownTool = e(this.mousedownTool, this), this.openTools = e(this.openTools, this), 
            this.updateToolState = e(this.updateToolState, this), this.updateTool = e(this.updateTool, this), 
            t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.events = {
            "click .tool":"clickTool"
        }, o.prototype.TOOLMAP = {
            node_pointer:"pointer",
            pointer:"pointer"
        }, o.prototype.initialize = function() {
            return this._hidePenToolUnlessEnabled(), this.model.bind("change:tool", this.updateTool), 
            this.model.bind("tool:change:state", this.updateToolState), this.updateTool(this.model), 
            $(document).mousedown(this.mousedownTool), $(document).mouseup(this.mouseupTool), 
            $(document).mouseover(this.mouseoverToolStates), $(document).mouseout(this.mouseoutToolStates), 
            $("body").append($("#tool-states")), this._generateStates(), this.mousedownDelay = new Debouncer(Draw.ToolsView.DELAY, this.openTools);
        }, o.prototype._hidePenToolUnlessEnabled = function() {
            return Features.has("pen_tool") ? void 0 :($("#tool-states .pointer, #tool-states .pen").remove(), 
            this.$(".tool-pen").parent().remove(), this.$(".tool-pointer").removeClass("tool-node_pointer"));
        }, o.prototype._generateStates = function() {
            var t, e, i, n, o;
            this.panes = {}, this.flyouts = {}, n = this.model.tools, o = [];
            for (t in n) i = n[t], e = $("#tool-states ." + t), e.length ? (this.$(".tool-" + t).parent().addClass("has-states"), 
            this.panes[t] = $("#tool-states ." + t), o.push(this.flyouts[t] = new Draw.Flyout({
                model:this.model,
                pane:this.panes[t]
            }))) :o.push(void 0);
            return o;
        }, o.prototype.updateTool = function(t) {
            var e, i, n, o, r;
            return n = t.get("tool"), this.$("li").removeClass("active"), o = this.$(".tool-" + n), 
            o.parent().addClass("active"), o.parent().hasClass("has-states") ? (r = this.model.getTool(), 
            n = this.model.tools[r], n.getState ? (i = n.getState(), e = "") :(i = r, r = this.TOOLMAP[i], 
            e = o.attr("data-state") || ""), this.updateToolState(n, r, i, e)) :void 0;
        }, o.prototype.updateToolState = function(t, e, i, n) {
            var o, r;
            if (this.panes) return o = this.panes[e].find(".state-" + i), r = this.$(".tool-" + e), 
            r.removeClass("state-" + n), r.addClass("state-" + i), r.attr("data-state", i), 
            r.attr("title", o.attr("title")), this.panes[e].find("li").removeClass("active"), 
            o.parent().addClass("active");
        }, o.prototype.openTools = function(t) {
            return this.flyouts[t].show(this.$(".tool-" + t)), this.panes[t].find(".tool-state").parent().removeClass("hover");
        }, o.prototype.mousedownTool = function(t) {
            var e, i, n;
            return e = $(t.target), e.hasClass("tool") ? (n = e.attr("rel"), i = e.attr("data-state"), 
            this.model.set("tool", i in this.model.tools && i || n), this._overFlyout = !1, 
            n in this.flyouts ? (this._overFlyout = !0, this.mousedownDelay.update(n), !1) :void 0) :void 0;
        }, o.prototype.mouseupTool = function(t) {
            var e, i;
            return e = $(t.target), this._overFlyout ? (this._overFlyout = !1, i = this.model.getTool(), 
            this.mousedownDelay.stop(), e.is(".tool.tool-state") ? this.model.setTool(e.attr("rel")) :e.hasClass("tool-state") && this.model.tools[i].setState(e.attr("rel")), 
            this.flyouts[this.TOOLMAP[i] || i].hide()) :void 0;
        }, o.prototype.mouseoverToolStates = function(t) {
            var e;
            return e = $(t.target), this._overFlyout && e.hasClass("tool-state") ? e.parent().addClass("hover") :void 0;
        }, o.prototype.mouseoutToolStates = function(t) {
            var e;
            return e = $(t.target), this._overFlyout && e.hasClass("tool-state") ? e.parent().removeClass("hover") :void 0;
        }, o.prototype.clickTool = function() {
            return !1;
        }, o;
    }(Draw.EmbedPane), Draw.ToolsView.DELAY = 200;
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    };
    Draw.UnloadMessageView = function() {
        function e(e) {
            this.onUploaded = t(this.onUploaded, this), this.onUploading = t(this.onUploading, this), 
            this.onSaved = t(this.onSaved, this), this.onSaving = t(this.onSaving, this), this.onBeforeUnload = t(this.onBeforeUnload, this);
            var i;
            i = {}, this.options = _.extend(i, e), this.document = this.options.document, this.document.state && (this.document.state.bind("saving", this.onSaving), 
            this.document.state.bind("saved", this.onSaved)), this.options.imageManager && (this.options.imageManager.bind("uploading", this.onUploading), 
            this.options.imageManager.bind("uploaded", this.onUploaded)), window.onbeforeunload = this.onBeforeUnload;
        }
        return e.prototype.onBeforeUnload = function() {
            var t, e;
            return e = null, window.TESTING ? e :(t = this.document.selectionModel.getOneSelected(), 
            t && t.inTextMode && t.inTextMode() && (e = "You are editing an element. Are you sure you want to close? You will lose the unsaved changes."), 
            this._saving && this.document.state && "ok" !== this.document.state.shareDoc.connection.state ? e = "There are changes to save and you are offline! Please find internet so you dont lose any work." :this._saving ? e = "There are changes being saved. Are you sure you want to close?" :this._uploading && (e = "There are images uploading. Are you sure you want to close?"), 
            e);
        }, e.prototype.onSaving = function() {
            return this._saving = !0;
        }, e.prototype.onSaved = function() {
            return this._saving = !1;
        }, e.prototype.onUploading = function() {
            return this._uploading = !0;
        }, e.prototype.onUploaded = function() {
            return this._uploading = !1;
        }, e;
    }();
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.Viewport = function(i) {
        function o() {
            return this._transformToContentPoint = e(this._transformToContentPoint, this), this._transformToCanvasPoint = e(this._transformToCanvasPoint, this), 
            this._scaleAndCenterFromRect = e(this._scaleAndCenterFromRect, this), this._computeScaleSizeAndCenter = e(this._computeScaleSizeAndCenter, this), 
            this._scrollToPoint = e(this._scrollToPoint, this), this._scrollToCenter = e(this._scrollToCenter, this), 
            this._setDocumentSize = e(this._setDocumentSize, this), this._getCssInt = e(this._getCssInt, this), 
            this._getPaddingY = e(this._getPaddingY, this), this._getPaddingX = e(this._getPaddingX, this), 
            this.onChangeDocumentSize = e(this.onChangeDocumentSize, this), this.onChangeDocumentZoom = e(this.onChangeDocumentZoom, this), 
            this.onMouseoverDocument = e(this.onMouseoverDocument, this), this.onClickOutOfDocument = e(this.onClickOutOfDocument, this), 
            this.onRightClick = e(this.onRightClick, this), this.onRedraw = e(this.onRedraw, this), 
            this.getContentCenter = e(this.getContentCenter, this), this.getCenter = e(this.getCenter, this), 
            this.getScale = e(this.getScale, this), this.getZoom = e(this.getZoom, this), this.getContentSize = e(this.getContentSize, this), 
            this.getSize = e(this.getSize, this), this.sensiblyCenter = e(this.sensiblyCenter, this), 
            this.fitDocument = e(this.fitDocument, this), this.moveObjectsIntoView = e(this.moveObjectsIntoView, this), 
            this.translateObjectsIntoView = e(this.translateObjectsIntoView, this), this.isViewable = e(this.isViewable, this), 
            this.showComment = e(this.showComment, this), this.preview = e(this.preview, this), 
            t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.template = null, o.prototype.documentContainerSelector = ".document-container", 
        Destructor.mixin(o), o.prototype.initialize = function(t) {
            return this.options = t, this.canvas = $('<canvas class="canvas"></canvas>'), this.paperView = this.options.paperView ? this.options.paperView :new paper.View(this.canvas[0]), 
            paper.View.parentView = this.paperView, this.body = $("body"), (this.options.mode ? this.options.mode :void 0) && this.body.addClass(this.options.mode), 
            this._preview = new Draw.Preview({
                model:this.model,
                viewport:this,
                mode:this.options.mode
            }), this.model.bind("notify", this.onNotify), this.model.bind("notify:flash", this.onFlashNotify), 
            this.setView(this.options.view), this._initContextMenu(), Draw.Viewport._cacheObject(this);
        }, o.prototype.destroy = function() {
            return this.model.unbind("notify", this.onNotify), this.model.unbind("notify:flash", this.onFlashNotify), 
            this.body = null, this.view = null, this.canvas.remove(), $(this.el).remove();
        }, o.prototype.setView = function(t) {
            var e;
            return this.view && (this.view.unbind("draw", this.onRedraw), this._detatchFromView(this.view.el), 
            e = this.view.model, e.unbind("change:zoomModel", this.onChangeDocumentZoom), e.unbind("change:size", this.onChangeDocumentSize), 
            e.unbind("prompt:center", this.sensiblyCenter), e.unbind("translate:objects", this.translateObjectsIntoView), 
            e.unbind("show:objects", this.moveObjectsIntoView)), this.view = t, this.view ? (this.options.mode && this.view.setMode(this.options.mode), 
            this._attachToView(this.view.el), this.view.bind("draw", this.onRedraw), e = this.view.model, 
            e.bind("change:zoomModel", this.onChangeDocumentZoom), e.bind("change:size", this.onChangeDocumentSize), 
            e.bind("prompt:center", this.sensiblyCenter), e.bind("translate:objects", this.translateObjectsIntoView), 
            e.bind("show:objects", this.moveObjectsIntoView), this.onChangeDocumentSize(e), 
            this.sensiblyCenter()) :void 0;
        }, o.prototype.getView = function() {
            return this.view;
        }, o.prototype.preview = function(t, e) {
            return this._preview.preview(t, e);
        }, o.prototype.getPreview = function() {
            return this._preview;
        }, o.prototype.showComment = function(t) {
            return this.model.set("toggle:preview", !0), this._preview.showComment(t);
        }, o.prototype.getDocumentSize = function(t) {
            return this.view ? this.view.getDocumentSize(t) :null;
        }, o.prototype.isViewable = function(t) {
            var e, i, n, o, r, s;
            return r = this.getSize(), o = this.getScale(), i = new paper.Point(this.el.scrollLeft(), this.el.scrollTop()), 
            s = this._transformToCanvasPoint(o, i), e = this._transformToCanvasPoint(o, i.add(new paper.Point(r.width, r.height))), 
            n = new paper.Rectangle(s, e), n.intersects(t.getBounds());
        }, o.prototype.translateObjectsIntoView = function(t, e) {
            var i, n, o, r, s, a, l, c, h, u;
            if (_.isArray(t) || (t = [ t ]), t.length && (i = t[0], a = i.getBounds().size, 
            n = this.model.getSize(), s = this.getScale(), r = this.getContentCenter(), r = this._transformToCanvasPoint(s, r), 
            !e || !this.isViewable(i))) {
                for (r = new paper.Point(_.clamp(r.x - a.width / 2, 10, n.width - a.width - 10), _.clamp(r.y - a.height / 2, 10, n.height - a.height - 10)), 
                l = r.subtract(i.getPosition()), u = [], c = 0, h = t.length; h > c; c++) o = t[c], 
                u.push(o.translate(l));
                return u;
            }
        }, o.prototype.moveObjectsIntoView = function(t, e) {
            var i, n, o, r;
            return null == e && (e = {}), _.isArray(t) || (t = [ t ]), !t.length || (o = t[0], 
            e.checkIfInView && this.isViewable(o)) ? void 0 :(r = this.getSize(), i = o.getBounds(), 
            n = new paper.Point(i.center.x, i.y), n = this._transformToContentPoint(this.getScale(), n), 
            n.set(n.x, n.y + r.height / 2 - 80), this._scrollToCenter(n, _.extend({
                takeSidebarIntoAccount:!1
            }, e)));
        }, o.prototype.scrollToObject = function(t, e) {
            var i, n, o, r, s, a;
            return null == e && (e = {
                offsetTop:66
            }), i = t.getBounds(), r = this._transformToContentPoint(this.getScale(), i.topLeft), 
            s = this.getSize(), e.takeSidebarIntoAccount && (e.offsetLeft || (e.offsetLeft = $(".symbols-dialog.open").width()), 
            e.offsetRight || (e.offsetRight = $(".properties-dialog.open").width())), e.offsetLeft = e.offsetLeft || 0, 
            e.offsetRight = e.offsetRight || 0, o = -e.offsetTop || 0, n = 0, e.centerX && (a = s.width - e.offsetLeft - e.offsetRight, 
            n = n - e.offsetLeft - a / 2 + i.width / 2), this._scrollToPoint(new paper.Point(r.x + n, r.y + o), e);
        }, o.prototype.transformToContentPoint = function(t) {
            return this._transformToContentPoint(this.getScale(), t);
        }, o.prototype.transformToCanvasPoint = function(t) {
            return this._transformToCanvasPoint(this.getScale(), t);
        }, o.prototype.fitDocument = function() {
            return this.zoomToFit(), this.sensiblyCenter();
        }, o.prototype.sensiblyCenter = function(t) {
            var e, i, n, o;
            return n = this.getDocumentSize(this.getZoom() / 100), pds(this, "doc size", n), 
            o = this.getSize(), e = new paper.Point(n.width / 2, o.height / 2 - 60), i = this._transformToContentPoint(1, e), 
            this._scrollToCenter(i, {
                takeSidebarIntoAccount:t
            });
        }, o.prototype.zoomToFit = function() {
            var t, e, i, n, o;
            return n = this.getDocumentSize(), o = this.getSize(), i = Draw.ZOOM_NOTCHES, t = o.width / n.width, 
            t > 1 && n.width > 200 ? void 0 :(e = _.sortedIndex(i, 100 * t), e = i[e] && i[e] === t && e || e - 1, 
            e = _.clamp(e, 0, i.length - 1), this.model.zoom(i[e] / 100));
        }, o.prototype.getSize = function() {
            return new paper.Size(this.el.width(), this.el.height());
        }, o.prototype.getContentSize = function(t) {
            var e, i, n, o;
            return t = t || this.model.get("size"), n = this._getPaddingX(), o = this._getPaddingY(), 
            i = t.width + n, e = t.height + o, new paper.Size(i, e);
        }, o.prototype.getZoom = function() {
            return this.model.get("zoom");
        }, o.prototype.getScale = function() {
            return this.model.get("zoom") / 100;
        }, o.prototype.getCenter = function() {
            var t;
            return t = this.getSize(), new paper.Point(t.width / 2, t.height / 2);
        }, o.prototype.getContentCenter = function() {
            var t;
            return t = this.getCenter(), new paper.Point(this.el.scrollLeft() + t.x, this.el.scrollTop() + t.y);
        }, o.prototype.onRedraw = function() {
            return this.paperView.draw.apply(this.paperView, arguments);
        }, o.prototype.onRightClick = function(t) {
            return this.body.hasClass("preview") ? !0 :this.contextMenu ? ($(t.target).is("canvas") && (this.contextMenu.setTarget([ t.pageX + 10, t.pageY - 20 ]), 
            this.contextMenu.show()), !1) :!1;
        }, o.prototype.onClickOutOfDocument = function(t) {
            var e;
            return $(t.target).is(".document-container") && (e = this.model.getActiveTool()) ? e.onClickOutOfDocument(t) :void 0;
        }, o.prototype.onMouseoverDocument = function(t) {
            return 0 !== this.model.selectionModel.getPreselectedLength() && $(t.target).is(".document-container") ? this.model.selectionModel.clearPreselected() :void 0;
        }, o.prototype.onChangeDocumentZoom = function(t, e) {
            var i, n, o, r;
            return r = this._computeScaleSizeAndCenter(e), n = r[0], o = r[1], i = r[2], this.paperView.setZoom(n), 
            this._setDocumentSize(o, !0), i && this._scrollToCenter(i), this.model.set("zoom", parseInt(100 * n)), 
            this.model.redraw ? (this.model.redraw(Draw.LAYER_TOOL), this.model.redraw(Draw.LAYER_TOOL_BOTTOM)) :void 0;
        }, o.prototype.onChangeDocumentSize = function(t, e) {
            var i, n;
            return i = this.getScale(), n = this.getDocumentSize(i), this._setDocumentSize(n), 
            e && this.model.redraw && this.model.redraw(Draw.LAYER_ALL), "edit" === this.options.mode ? this.sensiblyCenter() :void 0;
        }, o.prototype.onFlashNotify = function(t) {
            return Draw.Growl.notify(t, 300);
        }, o.prototype.onNotify = function(t) {
            return alert(t);
        }, o.prototype._initContextMenu = function() {
            return "edit" === this.options.mode && this.options.contextMenu ? (this.el.bind("contextmenu", this.onRightClick), 
            this.contextMenu = new Draw.MenuFlyout({
                pane:this.options.contextMenu,
                target:!1,
                my:"left top"
            })) :void 0;
        }, o.prototype._getPaddingX = function() {
            return this._getCssInt("padding-left") + this._getCssInt("padding-right");
        }, o.prototype._getPaddingY = function() {
            return this._getCssInt("padding-top") + this._getCssInt("padding-bottom");
        }, o.prototype._getCssInt = function(t) {
            return parseInt(this.documentContainer.css(t)) || 0;
        }, o.prototype._detatchFromView = function() {
            return this.el.removeClass("viewable-viewport"), this.el.find(".document-container").off("click", this.onClickOutOfDocument).off("mouseover", this.onMouseoverDocument);
        }, o.prototype._attachToView = function(t) {
            return this.el = t, this.el.addClass("viewable-viewport"), this.documentContainer = t.find(this.documentContainerSelector), 
            this.documentContainer.append(this.canvas), this.el.find(".document-container").on("click", this.onClickOutOfDocument).on("mouseover", this.onMouseoverDocument), 
            this.paperView.onMove({
                canvas:this.canvas
            });
        }, o.prototype._setDocumentSize = function(t, e) {
            var i, n;
            return i = this.paperView.getCanvas(), e || (n = this.getDocumentSize(1), i.width = n.width, 
            i.height = n.height), $(i).css({
                width:t.width,
                height:t.height
            }), this.paperView._viewSize.set(t.width, t.height, !0), this.paperView.onResize({
                size:t
            }), this.documentContainer.width(t.width), this.documentContainer.height(t.height);
        }, o.prototype._scrollToCenter = function(t, e) {
            var i, n;
            return null == e && (e = {}), n = this.getSize(), i = n.width / 2, e.takeSidebarIntoAccount && (i += $(".symbols-dialog.open").width() / 2), 
            e.takeSidebarIntoAccount && (i -= $(".properties-dialog.open").width() / 2), this._scrollToPoint(new paper.Point(t.x - i, t.y - n.height / 2), e);
        }, o.prototype._scrollToPoint = function(t, e) {
            return null == e && (e = {}), e.animate ? this.el.animate({
                scrollLeft:Math.max(0, t.x),
                scrollTop:Math.max(0, t.y)
            }, 200) :(this.el.scrollLeft(Math.max(0, t.x)), this.el.scrollTop(Math.max(0, t.y)));
        }, o.prototype._computeScaleSizeAndCenter = function(t) {
            var e, i, n, o, r;
            return _.isNumber(t) ? this._computeScaleSizeAndCenter(new Draw.ZoomModel(t)) :(t.rectangle ? (r = this._scaleAndCenterFromRect(t.rectangle), 
            n = r[0], o = r[1], e = r[2]) :t.scale && (n = t.scale, o = this.getDocumentSize(n), 
            t.center ? e = this._transformToContentPoint(n, t.center) :(i = this.model.get("last_zoom") / 100, 
            e = this.getContentCenter(), e = this._transformToCanvasPoint(i, e), e = this._transformToContentPoint(n, e))), 
            [ n, o, e ]);
        }, o.prototype._scaleAndCenterFromRect = function(t) {
            var e, i, n, o;
            return i = this.model.get("size"), n = Math.min(i.width / t.width, i.height / t.height), 
            n = _.clamp(n, Draw.ZOOM_NOTCHES[0] / 100, Draw.ZOOM_NOTCHES[Draw.ZOOM_NOTCHES.length - 1] / 100), 
            o = this.getDocumentSize(n), e = this._transformToContentPoint(n, t.center), [ n, o, e ];
        }, o.prototype._transformToCanvasPoint = function(t, e) {
            var i, n, o, r, s;
            return s = this.getDocumentSize(t), i = this.getContentSize(s), o = (i.width - s.width) / 2, 
            r = (i.height - s.height) / 2, e = new paper.Point(Math.max(0, e.x - o), Math.max(0, e.y - r)), 
            n = new paper.Matrix().scale(1 / t), n.transform(e);
        }, o.prototype._transformToContentPoint = function(t, e) {
            var i, n, o;
            return o = this.getDocumentSize(t), n = new paper.Matrix().scale(t), e = n.transform(e), 
            i = this.getContentSize(o), new paper.Point(e.x + Math.max(0, i.width - o.width) / 2, e.y + Math.max(0, i.height - o.height) / 2);
        }, o;
    }(Backbone.View);
}.call(this), function() {
    var t, e = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Draw.ZoomView = function(i) {
        function o() {
            return this.update = e(this.update, this), t = o.__super__.constructor.apply(this, arguments);
        }
        return n(o, i), o.prototype.initialize = function() {
            return this.model.bind("change:zoom", this.update), this.el = $(this.el), this.update();
        }, o.prototype.update = function() {
            return this.el.text(this.model.getZoom() + "%");
        }, o;
    }(Backbone.View);
}.call(this), function() {
    window.Import = {};
}.call(this), function() {
    Import.CSS = function(t, e) {
        var i, n, o, r, s, a, l, c, h, u;
        for (o = t.split(";"), a = {}, c = 0, h = o.length; h > c; c++) if (n = o[c], u = Util.split(n, ":", 2), 
        n = u[0], l = u[1], n && l) {
            r = Import.CSS.importProperty(n.trim(), l.trim(), a, e);
            for (i in r) s = r[i], (null != a[i] && s || !a[i]) && (a[i] = s);
        }
        return a;
    }, Import.CSS.cssToDict = function(t) {
        var e, i, n, o, r, s, a, l;
        if (!t) return {};
        for (o = {}, n = t.split(/[;\n]/g), s = 0, a = n.length; a > s; s++) i = n[s], l = Util.split(i, ":", 2), 
        e = l[0], r = l[1], e && r && (e = e.trim(), r = r.trim(), e && r && (o[e] = r));
        return o;
    }, Import.CSS.split = function(t) {
        var e, i, n, o, r, s, a, l;
        for (o = [], r = t.split("}"), s = 0, a = r.length; a > s; s++) n = r[s], l = n.split("{"), 
        i = l[0], e = l[1], i && (i = i.trim()), e && (e = e.trim()), i && e && o.push([ i, e ]);
        return o;
    }, Import.CSS.parse = function(t) {
        var e, i, n, o, r, s, a, l, c, h, u, d, p, f, g, m, _;
        for (s = new Lib.EventedObject({}), e = 0, a = 0, c = {}, l = [], g = [], o = !1, 
        r = !1, p = !1, n = m = 0, _ = t.length; _ >= 0 ? _ > m :m > _; n = _ >= 0 ? ++m :--m) if (i = t[n], 
        p) p = !1; else if (r) "\n" === i && (r = !1); else if ("{" === i) {
            if (e++, u = g.join("").trim(), g = [], !u) throw new Error("No selector before {");
            f = l.join("|"), null == c[f] && (c[f] = []), c[f].push(u), l.push(u);
        } else if ("}" === i) e--, h = g.join("").trim(), h && s.set(l, Import.CSS.cssToDict(h)), 
        l.pop(), g = []; else if ("/" !== i || o) if ("*" === i && o) {
            if ("/" === t[n + 1]) {
                o = !1, p = !0;
                continue;
            }
        } else "(" === i ? a++ :")" === i && a--, o || g.push(i); else "*" === t[n + 1] ? o = !0 :"/" === t[n + 1] && 0 === a ? r = !0 :g.push(i);
        if (0 !== e) throw new Error("Unmatched braces");
        for (l in c) d = c[l], l = l ? l.split("|") :[], s.set(l.concat([ "_order" ]), d);
        return s;
    }, Import.CSS.tokenizeDelimitedList = function(t, e) {
        var i, n, o, r, s, a;
        if (e = e || ",", t && t.trim(), !t) return [];
        for (o = [], r = [], n = 0, s = 0, a = t.length; a > s; s++) i = t[s], (0 !== n || i !== e && " " !== i && "	" !== i) && r.push(i), 
        "(" === i && n++, ")" === i && (n--, 0 === n && (o.push(r.join("")), r = []));
        return o;
    };
}.call(this), function() {
    var t, e, i, n, o, r, s, a, l, c, h, u, d, p, f, g, m;
    _.extend(Import.CSS, {
        importGradient:function(t, e) {
            var i, n, o, r, s, a, l, c, h, u;
            for (s = Import.CSS.tokenizeDelimitedList(t), n = null, h = 0, u = s.length; u > h; h++) if (c = s[h], 
            c.indexOf("gradient") > -1) {
                n = c;
                break;
            }
            return n ? (e = e || {}, i = e.bounds || {
                width:100,
                height:50
            }, o = Import.CSS.parseGradient(n, i), l = function() {
                var t, e, i, n;
                for (i = o.colorStops, n = [], t = 0, e = i.length; e > t; t++) a = i[t], n.push([ Color.normalize(a.color), a.stop ]);
                return n;
            }(), 1 === l.length && l.push(_.clone(l[0])), r = new paper.Gradient(l), new paper.GradientColor(r, new paper.Point(o.x0, o.y0), new paper.Point(o.x1, o.y1))) :n;
        }
    }, c = "(?:rgb|rgba)\\(\\d{1,3},\\s\\d{1,3},\\s\\d{1,3}(?:,\\s[0-9\\.]+)?\\)", i = "(#[a-fA-F0-9]+)", n = "(?:#[a-fA-F0-9]+)", o = "(\\d{1,3}%)?", r = "(?:\\d{1,3}%?)", s = "(?:\\s+\\d{1,3}%)", f = "([^,]+)", l = "(?:([^\\(,]+),)?", g = "(?:[a-z0-9\\s]+)", a = "top|bottom|left|right|[0-9]+", e = "" + o + "\\s" + o + ",\\s" + o + "\\s" + o, t = "" + c + "|" + i + "|[a-z]+", u = new RegExp("((" + t + ")" + s + "?)+", "g"), h = new RegExp("(" + t + ")\\s*(\\d{1,3})?(%)?"), p = new RegExp("((?:from|to|color-stop)\\((?:[0-9\\.]+,\\s)?(?:" + t + ")\\))+", "g"), d = new RegExp("(from|to|color-stop)\\(([0-9\\.]+)?(?:,\\s)?(" + t + ")\\)"), m = [ new RegExp("^(-webkit-linear-gradient|-moz-linear-gradient|linear-gradient)\\(" + l + "(.+)\\)"), new RegExp("^(-webkit-gradient|-moz-gradient)\\((linear|radial),(.+)\\)") ], {
        parseGradient:function(t, i) {
            var n, o, r, s, l, c, f, g, v, y, b, w, C, T, D, E, x, S, O, k, I, R, P, N, A, M;
            for (O = 0, P = m.length; P > O && (n = m[O], !(l = t.match(n))); O++) ;
            if (l) switch (l[1]) {
              case "-webkit-linear-gradient":
              case "-moz-linear-gradient":
              case "linear-gradient":
                for (o = {
                    type:"linear",
                    x0:0,
                    y0:0,
                    x1:0,
                    y1:0,
                    colorStops:[]
                }, b = function(t) {
                    var e, n, r;
                    return e = Math.max(i.width, i.height) / 2, t = parseInt(t) * Math.PI / 180, n = _.clamp(Math.round(Math.cos(t) * e), -i.width / 2, i.width / 2), 
                    r = _.clamp(Math.round(Math.sin(t) * e), -i.height / 2, i.height / 2), o.x0 = i.width / 2 - n, 
                    o.y0 = i.height / 2 + r, o.x1 = i.width / 2 + n, o.y1 = i.height / 2 - r;
                }, C = l[2] ? l[2].match(/(?:\w+)|(?:\\d{1,3}%)/g) :null, x = l[3].match(u), C && 1 === C.length && !C[0].match(a) && (x = C.concat(x), 
                C = null), C && 2 === C.length && "to" === C[0] && (v = {
                    top:"bottom",
                    bottom:"top",
                    right:"left",
                    left:"right"
                }, C = [ v[C[1]] ]), C || (C = [ "top" ]), s = k = 0, M = C.length; M >= 0 ? M > k :k > M; s = M >= 0 ? ++k :--k) if (r = C[s], 
                "top" === r) o.y1 = i.height; else if ("right" === r) o.x0 = i.width; else if ("bottom" === r) o.y0 = i.height; else if ("left" === r) o.x1 = i.width; else if (r.indexOf("deg") > -1) b(r); else if (1 === s) for (w = [ [ [ "0", "50" ], 0 ], [ [ "0", "100" ], 45 ], [ [ "50", "100" ], 90 ], [ [ "100", "100" ], 135 ], [ [ "100", "50" ], 180 ], [ [ "100", "0" ], 225 ], [ [ "50", "0" ], 270 ], [ [ "0", "0" ], 315 ] ], 
                I = 0, N = w.length; N > I; I++) if (y = w[I], _.isEqual(C, y[0])) {
                    b(y[1]);
                    break;
                }
                if (x) for (S = x.length, T = 1 / Math.max(S - 1, 1), s = R = 0; S >= 0 ? S > R :R > S; s = S >= 0 ? ++R :--R) E = x[s].match(h), 
                D = parseFloat(E[3]), isNaN(D) ? D = s * T :E[4] && (D /= 100), o.colorStops.push({
                    color:E[1],
                    stop:D
                });
                break;

              case "-webkit-gradient":
              case "-moz-gradient":
                if (o = {
                    type:l[2],
                    x0:0,
                    y0:0,
                    x1:0,
                    y1:0,
                    colorStops:[]
                }, c = l[3].match(e), c && (o.x0 = parseInt(c[1]) * i.width / 100, o.y0 = parseInt(c[2]) * i.height / 100, 
                o.x1 = parseInt(c[3]) * i.width / 100, o.y1 = parseInt(c[4]) * i.height / 100), 
                c = l[3].match(p)) for (f = c.length, s = A = 0; f >= 0 ? f > A :A > f; s = f >= 0 ? ++A :--A) g = c[s].match(d), 
                D = parseFloat(g[2]), "from" === g[1] && (D = 0), "to" === g[1] && (D = 1), o.colorStops.push({
                    color:g[3],
                    stop:D
                });
            }
            return o;
        }
    });
}.call(this), function() {
    Import.CSS.parseBackgroundImage = function(t) {
        var e, i, n, o, r;
        for (e = Import.CSS.tokenizeDelimitedList(t), n = null, o = 0, r = e.length; r > o; o++) if (i = e[o], 
        i.indexOf("url") > -1) {
            n = i;
            break;
        }
        return n ? n.replace("url(", "").replace(/[\(\)'"]+/gi, "") :n;
    };
}.call(this), function() {
    _.extend(Import.CSS, {
        PROPERTY_MAP:{
            fill_color:[ "background-color", "background-image" ],
            font_face:[ "font-family" ],
            font_face_size:[ "font-size" ],
            text_color:[ "color" ],
            alignment:[ "text-align" ],
            is_italic:[ "font-style" ],
            is_underlined:[ "text-decoration" ],
            text_shadow:[ "text-shadow" ],
            box_shadow:[ "box-shadow", "-webkit-box-shadow", "-moz-box-shadow" ]
        },
        _dashToUnderscore:function(t) {
            return t.replace(new RegExp("-", "g"), "_");
        },
        _underscoreToDash:function(t) {
            return t.replace(new RegExp("_", "g"), "-");
        },
        _getCssPropertiesForEaselProperty:function(t) {
            var e;
            return e = Import.CSS.PROPERTY_MAP[t], e || (e = [ this._underscoreToDash(t) ]), 
            e;
        },
        applyToNode:function(t, e, i) {
            var n, o, r, s, a, l, c, h, u, d, p, f;
            for (i = i || {}, l = {}, h = Import.CSS.split(e), u = 0, p = h.length; p > u; u++) if (c = h[u], 
            a = c[0], n = c[1], n = Import.CSS.cssToDict(n)) {
                if (o = t.findAndSelf(a), l[a] = n, i.stripMargins && o[0] === t[0]) for (s = _.keys(n), 
                d = 0, f = s.length; f > d; d++) r = s[d], r.indexOf("margin") > -1 && delete n[r];
                o.css(n);
            }
            return l;
        },
        getComputedStyle:function(t, e, i) {
            var n, o, r, s, a, l, c;
            if (null == i && (i = {
                normalize:!0
            }), !t || !t.length) return {};
            for (s = Draw.Export.CSS.propertyNamesFromCssProperty(e), n = {}, a = t[0].tagName, 
            l = 0, c = s.length; c > l; l++) r = s[l], n[r] = a;
            return s = Import.CSS.importProperties(t, n, i), o = Draw.Export.CSS.propertiesToCss(s), 
            i.normalize && (o = Draw.Export.CSS.normalizeForBrowser(o)), o;
        },
        importProperties:function(t, e, i) {
            var n, o, r, s, a, l, c, h, u, d, p, f, g, m, v, y, b;
            null == i && (i = {}), e = _.clone(e), f = {}, u = {}, r = function(t, e) {
                return _.isArray(u[e]) && (u[e] = t.cascadedStyle({
                    polyfill:!0,
                    replaceInherit:!0,
                    properties:u[e],
                    window:i.window
                })), u[e];
            };
            for (h in e) l = e[h], u[l] || (u[l] = []), u[l] = u[l].concat(this._getCssPropertiesForEaselProperty(h) || []), 
            _.isArray(l) && (e[h] = l[1]);
            for (h in e) if (l = e[h], a = this._getCssPropertiesForEaselProperty(h), a && _.isString(l)) for (o = t.findAndSelf(l), 
            g = r(o, l), v = void 0, n = void 0, y = 0, b = a.length; b > y; y++) if (s = a[y], 
            m = g.getPropertyValue ? g.getPropertyValue(s) :g[s], null != m) {
                i.property = h, d = Import.CSS.importProperty(s, m + "", f, i);
                for (c in d) p = d[c], (null != f[c] && p || !f[c]) && (f[c] = p);
            }
            return f;
        },
        importProperty:function(t, e, i, n) {
            var o, r, s, a, l, c, h;
            return null == i && (i = {}), null == n && (n = {}), c = {}, e && e.trim && (e = e.trim()), 
            e && !e.trim && print(e), l = n.property || this._dashToUnderscore(t), "background-image" === t ? (s = e, 
            l = null, s.indexOf("gradient") > -1 && (l = "fill_color", n.object && (n.bounds = n.object.getSize()), 
            e = Import.CSS.importGradient(e, n), n.object && (a = n.object.getPosition(), r = paper.Matrix.getTranslateInstance(a.x, a.y), 
            e.transform(r))), s.indexOf("url") > -1 && (o = Import.CSS.parseBackgroundImage(s), 
            o && (c.background_image = o)), l && (c[l] = e)) :"background" === t || "background-color" === t ? e = Color.normalize(e) :"color" === t ? e = Color.normalize(e) :"height" === t ? e = parseInt(e) :"width" === t ? e = parseInt(e) :"font-family" === t ? e = e.split(",")[0].trim().replace(/'/g, "").replace(/"/g, "") :"font-weight" === t ? ("400" === e && (e = "normal"), 
            "700" === e && (e = "bold")) :"font-style" === t ? e = "italic" === e :"text-decoration" === t ? e = e && e.indexOf("underline") > -1 :"text-align" === t ? "start" === e && (e = "left") :"font-size" === t ? "font_face_size" === n.property && (h = parseInt(e), 
            e.indexOf("px") > -1 && (h = Math.round(72 * h / 96)), e = h) :/.*box-shadow/.test(t) ? e = Draw.Shadow.normalize(e) :/.*text-shadow/.test(t) ? e = Draw.Shadow.normalize(e) :/border.*-radius/.test(t) ? e.indexOf(" ") > -1 && (e = e.split(" ")[0]) :/border.*-color/.test(t) ? e = Color.normalize(e) :/border.*-width/.test(t) && (e = e && parseInt(e) || 0), 
            l && !i[l] && (c[l] = e), c;
        }
    });
}.call(this), function() {
    Import.HTML = {
        _module:"HTML",
        "import":function(t, e) {
            var i, n, o, r, s, a;
            return n = t.html.trim(), i = t.css.replace("<style>", "").replace("</style>", "").trim(), 
            a = t.allowedUrls, o = $(n), pds(this, i), pds(this, o[0].id, o, n), o.addClass(o[0].id), 
            s = "." + o[0].id, o.removeAttr("id"), n = o.outerHtml(), r = Import.CSS.applyToNode(o, i), 
            this._createCanvasObject(o, s, e, a, n, i, r);
        },
        _createCanvasObject:function(t, e, i, n, o, r) {
            var s, a;
            return r = r.replace("#" + t[0].id, "." + t[0].id), s = this._generateConfig(t, e), 
            a = new Draw.DomElement(new paper.Point(10, 10), {
                html:o,
                css:r,
                root:e,
                store_config:!0,
                override_styles:!1,
                auto_width:!0,
                auto_height:!0,
                config:s
            }), this._replaceImages(a, n, i), a;
        },
        URL_RE:/\.(png|jpg|jpeg|gif)$/i,
        _isUrlAnImage:function(t) {
            return Import.HTML.URL_RE.test(t.trim());
        },
        _replaceImages:function(t, e, i) {
            var n, o, r, s, a = this;
            if (e && e.length) {
                for (s = [], o = 0, r = e.length; r > o; o++) n = e[o], Import.HTML._isUrlAnImage(n) ? s.push(function(e) {
                    return i.uploadImage(e, function(i) {
                        return i && i.url ? (pds(a, "replacing image url on", t, e, i.url), t.replaceImage(e, i.url)) :pds(a, "Cant replace image url on", t, e, i);
                    });
                }(n)) :s.push(void 0);
                return s;
            }
        },
        _generateConfig:function(t, e) {
            var i, n, o, r, s, a;
            for (o = !1, a = t[0].childNodes, r = 0, s = a.length; s > r; r++) i = a[r], 3 === i.nodeType && (o = !0);
            return n = {
                fill_color:e,
                background_image:e,
                background_repeat:e,
                background_position:e,
                background_size:e,
                border:e,
                border_top_left_radius:e,
                border_top_right_radius:e,
                border_bottom_left_radius:e,
                border_bottom_right_radius:e,
                box_shadow:e,
                padding_top:e,
                padding_right:e,
                padding_bottom:e,
                padding_left:e,
                margin_top:e,
                margin_right:e,
                margin_bottom:e,
                margin_left:e
            }, o && _.extend(n, {
                text_shadow:e,
                line_height:e,
                font_face:e,
                font_weight:e,
                font_face_size:e,
                is_italic:e,
                is_underlined:e,
                alignment:e,
                text_color:e
            }), pds(this, "auto config", n), n;
        }
    };
}.call(this), function() {
    var t, e, i = {}.hasOwnProperty, n = function(t, e) {
        function n() {
            this.constructor = t;
        }
        for (var o in e) i.call(e, o) && (t[o] = e[o]);
        return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, 
        t;
    };
    Import.SVG = function(t, e) {
        return fabric.loadSVGFromString(t, function(t, i) {
            var n, o, r, s;
            for (e.setSize(new paper.Size(i.width, i.height)), n = new Import.PaperContext(i), 
            r = 0, s = t.length; s > r; r++) o = t[r], n.createObject(o);
            return print(n.types);
        });
    }, t = function(t) {
        function i() {
            return e = i.__super__.constructor.apply(this, arguments);
        }
        return n(i, t), i.prototype.addToDoc = function() {
            return paper.project.activeLayer.addChild(this);
        }, i.prototype.shouldAdd = function() {
            return !1;
        }, i;
    }(Draw.Path), Import.PaperContext = function() {
        function e(t) {
            this.options = t || {}, this.center = [ t.width / 2, t.height / 2 ], this.types = {};
        }
        return e.prototype.createObject = function(e) {
            switch (e.type in this.types || (this.types[e.type] = 0), this.types[e.type]++, 
            e.type) {
              case "rect":
                this.object = new Draw.Rectangle(new paper.Rectangle(e.left, e.top, e.width, e.height));
                break;

              case "circle":
                this.object = new Draw.DomOval(new paper.Rectangle(e.left, e.top, e.width, e.height));
                break;

              case "ellipse":
                this.object = new Draw.DomOval(new paper.Rectangle(e.left, e.top, e.width, e.height));
                break;

              case "path":
              case "polygon":
                this.object = new t(), this.renderPath(e), this.object.getPosition() && this.object.getSize() && this.object.addToDoc();
                break;

              default:
                this.object = null;
            }
            return this.setProperties(e, this.object);
        }, e.prototype.PROP_MAP = {
            fill:"fill_color",
            stroke:"stroke_color",
            strokeWidth:"stroke_width"
        }, e.prototype.setProperties = function(t, e) {
            var i, n, o, r;
            if (t && e) {
                o = this.PROP_MAP, r = [];
                for (i in o) n = o[i], r.push(e.set(n, t[i]));
                return r;
            }
        }, e.prototype.renderPath = function(t) {
            return this.curSegment = this.cur = null, this.moved = !1, this.started = !1, t._render(this);
        }, e.prototype.adjust = function() {
            var t, e, i, n;
            for (e = [], t = i = 0, n = arguments.length; n >= 0 ? n > i :i > n; t = n >= 0 ? ++i :--i) e.push(arguments[t] + this.center[t % 2]);
            return e;
        }, e.prototype.beginPath = function() {}, e.prototype.fill = function() {}, e.prototype.stroke = function() {}, 
        e.prototype.moveTo = function(t, e) {
            var i;
            return i = this.adjust(t, e), t = i[0], e = i[1], this.cur = new paper.Point(t, e), 
            this.moved = !0, this.started && (this.curSegment = new paper.Segment(this.cur), 
            this.curSegment.setIsMovePoint(!0), this.object.add(this.curSegment)), this.started = !0;
        }, e.prototype.lineTo = function(t, e) {
            var i, n;
            return n = this.adjust(t, e), t = n[0], e = n[1], i = new paper.Point(t, e), this.moved && (this.object.add(new paper.Segment(this.cur)), 
            this.moved = !1), this.curSegment = new paper.Segment(i), this.object.add(this.curSegment), 
            this.cur = i;
        }, e.prototype.bezierCurveTo = function(t, e, i, n, o, r) {
            var s, a, l, c, h;
            return h = this.adjust(t, e, i, n, o, r), t = h[0], e = h[1], i = h[2], n = h[3], 
            o = h[4], r = h[5], l = new paper.Point(t, e), a = new paper.Point(i, n), s = new paper.Point(o, r), 
            this.moved ? (c = new paper.Segment(this.cur), c.setHandleOut(l.subtract(this.cur)), 
            this.object.add(c), this.moved = !1) :this.curSegment && this.curSegment.setHandleOut(l.subtract(this.curSegment.getPoint())), 
            this.curSegment = new paper.Segment(s, a.subtract(s)), this.object.add(this.curSegment), 
            this.cur = s;
        }, e.prototype.closePath = function() {
            return this.object.setClosed(!0);
        }, e;
    }();
}.call(this), function() {
    window.TESTING || (print("booting"), window.requestAnimFrame = function() {
        return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(t) {
            window.setTimeout(t, 10);
        };
    }(), window.APP = new Draw[window.__appClass || "App"](), APP.loadDocuments());
}(), /*
Copyright (c) 2003-2013, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/
function() {
    window.CKEDITOR && window.CKEDITOR.dom || (window.CKEDITOR || (window.CKEDITOR = function() {
        var t = {
            timestamp:"D08E",
            version:"4.0.1.1",
            revision:"270438fe31",
            rnd:Math.floor(900 * Math.random()) + 100,
            _:{
                pending:[]
            },
            status:"unloaded",
            basePath:function() {
                var t = window.CKEDITOR_BASEPATH || "";
                if (!t) for (var e = document.getElementsByTagName("script"), i = 0; i < e.length; i++) {
                    var n = e[i].src.match(/(^|.*[\\\/])ckeditor(?:_basic)?(?:_source)?.js(?:\?.*)?$/i);
                    if (n) {
                        t = n[1];
                        break;
                    }
                }
                if (-1 == t.indexOf(":/") && (t = 0 === t.indexOf("/") ? location.href.match(/^.*?:\/\/[^\/]*/)[0] + t :location.href.match(/^[^\?]*\/(?:)/)[0] + t), 
                !t) throw 'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';
                return t;
            }(),
            getUrl:function(t) {
                return -1 == t.indexOf(":/") && 0 !== t.indexOf("/") && (t = this.basePath + t), 
                this.timestamp && "/" != t.charAt(t.length - 1) && !/[&?]t=/.test(t) && (t += (0 <= t.indexOf("?") ? "&" :"?") + "t=" + this.timestamp), 
                t;
            },
            domReady:function() {
                function t() {
                    try {
                        document.addEventListener ? (document.removeEventListener("DOMContentLoaded", t, !1), 
                        e()) :document.attachEvent && "complete" === document.readyState && (document.detachEvent("onreadystatechange", t), 
                        e());
                    } catch (i) {}
                }
                function e() {
                    for (var t; t = i.shift(); ) t();
                }
                var i = [];
                return function(e) {
                    if (i.push(e), "complete" === document.readyState && setTimeout(t, 1), 1 == i.length) if (document.addEventListener) document.addEventListener("DOMContentLoaded", t, !1), 
                    window.addEventListener("load", t, !1); else if (document.attachEvent) {
                        document.attachEvent("onreadystatechange", t), window.attachEvent("onload", t), 
                        e = !1;
                        try {
                            e = !window.frameElement;
                        } catch (n) {}
                        if (document.documentElement.doScroll && e) {
                            var o = function() {
                                try {
                                    document.documentElement.doScroll("left");
                                } catch (e) {
                                    return setTimeout(o, 1), void 0;
                                }
                                t();
                            };
                            o();
                        }
                    }
                };
            }()
        }, e = window.CKEDITOR_GETURL;
        if (e) {
            var i = t.url;
            t.url = function(n) {
                return e.call(t, n) || i.call(t, n);
            };
        }
        return t;
    }()), CKEDITOR.event || (CKEDITOR.event = function() {}, CKEDITOR.event.implementOn = function(t) {
        var e, i = CKEDITOR.event.prototype;
        for (e in i) void 0 == t[e] && (t[e] = i[e]);
    }, CKEDITOR.event.prototype = function() {
        function t(t) {
            var n = e(this);
            return n[t] || (n[t] = new i(t));
        }
        var e = function(t) {
            return t = t.getPrivate && t.getPrivate() || t._ || (t._ = {}), t.events || (t.events = {});
        }, i = function(t) {
            this.name = t, this.listeners = [];
        };
        return i.prototype = {
            getListenerIndex:function(t) {
                for (var e = 0, i = this.listeners; e < i.length; e++) if (i[e].fn == t) return e;
                return -1;
            }
        }, {
            define:function(e, i) {
                var n = t.call(this, e);
                CKEDITOR.tools.extend(n, i, !0);
            },
            on:function(e, i, n, o, r) {
                function s(t, r, s, l) {
                    return t = {
                        name:e,
                        sender:this,
                        editor:t,
                        data:r,
                        listenerData:o,
                        stop:s,
                        cancel:l,
                        removeListener:a
                    }, i.call(n, t) === !1 ? !1 :t.data;
                }
                function a() {
                    c.removeListener(e, i);
                }
                var l = t.call(this, e);
                if (l.getListenerIndex(i) < 0) {
                    l = l.listeners, n || (n = this), isNaN(r) && (r = 10);
                    var c = this;
                    s.fn = i, s.priority = r;
                    for (var h = l.length - 1; h >= 0; h--) if (l[h].priority <= r) return l.splice(h + 1, 0, s), 
                    {
                        removeListener:a
                    };
                    l.unshift(s);
                }
                return {
                    removeListener:a
                };
            },
            once:function() {
                var t = arguments[1];
                return arguments[1] = function(e) {
                    return e.removeListener(), t.apply(this, arguments);
                }, this.on.apply(this, arguments);
            },
            capture:function() {
                CKEDITOR.event.useCapture = 1;
                var t = this.on.apply(this, arguments);
                return CKEDITOR.event.useCapture = 0, t;
            },
            fire:function() {
                var t = 0, i = function() {
                    t = 1;
                }, n = 0, o = function() {
                    n = 1;
                };
                return function(r, s, a) {
                    var l = e(this)[r], r = t, c = n;
                    if (t = n = 0, l) {
                        var h = l.listeners;
                        if (h.length) for (var u, h = h.slice(0), d = 0; d < h.length; d++) {
                            if (l.errorProof) try {
                                u = h[d].call(this, a, s, i, o);
                            } catch (p) {} else u = h[d].call(this, a, s, i, o);
                            if (u === !1 ? n = 1 :"undefined" != typeof u && (s = u), t || n) break;
                        }
                    }
                    return s = n ? !1 :"undefined" == typeof s ? !0 :s, t = r, n = c, s;
                };
            }(),
            fireOnce:function(t, i, n) {
                return i = this.fire(t, i, n), delete e(this)[t], i;
            },
            removeListener:function(t, i) {
                var n = e(this)[t];
                if (n) {
                    var o = n.getListenerIndex(i);
                    o >= 0 && n.listeners.splice(o, 1);
                }
            },
            removeAllListeners:function() {
                var t, i = e(this);
                for (t in i) delete i[t];
            },
            hasListeners:function(t) {
                return (t = e(this)[t]) && t.listeners.length > 0;
            }
        };
    }()), CKEDITOR.editor || (CKEDITOR.editor = function() {
        CKEDITOR._.pending.push([ this, arguments ]), CKEDITOR.event.call(this);
    }, CKEDITOR.editor.prototype.fire = function(t, e) {
        return t in {
            instanceReady:1,
            loaded:1
        } && (this[t] = !0), CKEDITOR.event.prototype.fire.call(this, t, e, this);
    }, CKEDITOR.editor.prototype.fireOnce = function(t, e) {
        return t in {
            instanceReady:1,
            loaded:1
        } && (this[t] = !0), CKEDITOR.event.prototype.fireOnce.call(this, t, e, this);
    }, CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)), CKEDITOR.env || (CKEDITOR.env = function() {
        var b = navigator.userAgent.toLowerCase(), c = window.opera, a = {
            ie:eval("/*@cc_on!@*/false"),
            opera:!!c && c.version,
            webkit:b.indexOf(" applewebkit/") > -1,
            air:b.indexOf(" adobeair/") > -1,
            mac:b.indexOf("macintosh") > -1,
            quirks:"BackCompat" == document.compatMode,
            mobile:b.indexOf("mobile") > -1,
            iOS:/(ipad|iphone|ipod)/.test(b),
            isCustomDomain:function() {
                if (!this.ie) return !1;
                var t = document.domain, e = window.location.hostname;
                return t != e && t != "[" + e + "]";
            },
            secure:"https:" == location.protocol
        };
        a.gecko = "Gecko" == navigator.product && !a.webkit && !a.opera, a.webkit && (b.indexOf("chrome") > -1 ? a.chrome = !0 :a.safari = !0);
        var f = 0;
        if (a.ie && (f = a.quirks || !document.documentMode ? parseFloat(b.match(/msie (\d+)/)[1]) :document.documentMode, 
        a.ie9Compat = 9 == f, a.ie8Compat = 8 == f, a.ie7Compat = 7 == f, a.ie6Compat = 7 > f || a.quirks), 
        a.gecko) {
            var e = b.match(/rv:([\d\.]+)/);
            e && (e = e[1].split("."), f = 1e4 * e[0] + 100 * (e[1] || 0) + 1 * (e[2] || 0));
        }
        return a.opera && (f = parseFloat(c.version())), a.air && (f = parseFloat(b.match(/ adobeair\/(\d+)/)[1])), 
        a.webkit && (f = parseFloat(b.match(/ applewebkit\/(\d+)/)[1])), a.version = f, 
        a.isCompatible = a.iOS && f >= 534 || !a.mobile && (a.ie && f > 6 || a.gecko && f >= 10801 || a.opera && f >= 9.5 || a.air && f >= 1 || a.webkit && f >= 522 || !1), 
        a.cssClass = "cke_browser_" + (a.ie ? "ie" :a.gecko ? "gecko" :a.opera ? "opera" :a.webkit ? "webkit" :"unknown"), 
        a.quirks && (a.cssClass = a.cssClass + " cke_browser_quirks"), a.ie && (a.cssClass = a.cssClass + (" cke_browser_ie" + (a.quirks || a.version < 7 ? "6" :a.version)), 
        a.quirks && (a.cssClass = a.cssClass + " cke_browser_iequirks")), a.gecko && (10900 > f ? a.cssClass = a.cssClass + " cke_browser_gecko18" :11e3 >= f && (a.cssClass = a.cssClass + " cke_browser_gecko19")), 
        a.air && (a.cssClass = a.cssClass + " cke_browser_air"), a;
    }()), "unloaded" == CKEDITOR.status && function() {
        CKEDITOR.event.implementOn(CKEDITOR), CKEDITOR.loadFullCore = function() {
            if ("basic_ready" != CKEDITOR.status) CKEDITOR.loadFullCore._load = 1; else {
                delete CKEDITOR.loadFullCore;
                var t = document.createElement("script");
                t.type = "text/javascript", t.src = CKEDITOR.basePath + "ckeditor.js", document.getElementsByTagName("head")[0].appendChild(t);
            }
        }, CKEDITOR.loadFullCoreTimeout = 0, CKEDITOR.add = function(t) {
            (this._.pending || (this._.pending = [])).push(t);
        }, function() {
            CKEDITOR.domReady(function() {
                var t = CKEDITOR.loadFullCore, e = CKEDITOR.loadFullCoreTimeout;
                t && (CKEDITOR.status = "basic_ready", t && t._load ? t() :e && setTimeout(function() {
                    CKEDITOR.loadFullCore && CKEDITOR.loadFullCore();
                }, 1e3 * e));
            });
        }(), CKEDITOR.status = "basic_loaded";
    }(), CKEDITOR.dom = {}, function() {
        var t = [], e = CKEDITOR.env.gecko ? "-moz-" :CKEDITOR.env.webkit ? "-webkit-" :CKEDITOR.env.opera ? "-o-" :CKEDITOR.env.ie ? "-ms-" :"";
        CKEDITOR.on("reset", function() {
            t = [];
        }), CKEDITOR.tools = {
            arrayCompare:function(t, e) {
                if (!t && !e) return !0;
                if (!t || !e || t.length != e.length) return !1;
                for (var i = 0; i < t.length; i++) if (t[i] != e[i]) return !1;
                return !0;
            },
            clone:function(t) {
                var e;
                if (t && t instanceof Array) {
                    e = [];
                    for (var i = 0; i < t.length; i++) e[i] = this.clone(t[i]);
                    return e;
                }
                if (null === t || "object" != typeof t || t instanceof String || t instanceof Number || t instanceof Boolean || t instanceof Date || t instanceof RegExp) return t;
                e = new t.constructor();
                for (i in t) e[i] = this.clone(t[i]);
                return e;
            },
            capitalize:function(t) {
                return t.charAt(0).toUpperCase() + t.substring(1).toLowerCase();
            },
            extend:function(t) {
                var e, i, n = arguments.length;
                "boolean" == typeof (e = arguments[n - 1]) ? n-- :"boolean" == typeof (e = arguments[n - 2]) && (i = arguments[n - 1], 
                n -= 2);
                for (var o = 1; n > o; o++) {
                    var r, s = arguments[o];
                    for (r in s) (e === !0 || void 0 == t[r]) && (!i || r in i) && (t[r] = s[r]);
                }
                return t;
            },
            prototypedCopy:function(t) {
                var e = function() {};
                return e.prototype = t, new e();
            },
            isArray:function(t) {
                return !!t && t instanceof Array;
            },
            isEmpty:function(t) {
                for (var e in t) if (t.hasOwnProperty(e)) return !1;
                return !0;
            },
            cssVendorPrefix:function(t, i, n) {
                return n ? e + t + ":" + i + ";" + t + ":" + i :(n = {}, n[t] = i, n[e + t] = i, 
                n);
            },
            cssStyleToDomStyle:function() {
                var t = document.createElement("div").style, e = "undefined" != typeof t.cssFloat ? "cssFloat" :"undefined" != typeof t.styleFloat ? "styleFloat" :"float";
                return function(t) {
                    return "float" == t ? e :t.replace(/-./g, function(t) {
                        return t.substr(1).toUpperCase();
                    });
                };
            }(),
            buildStyleHtml:function(t) {
                for (var e, t = [].concat(t), i = [], n = 0; n < t.length; n++) (e = t[n]) && (/@import|[{}]/.test(e) ? i.push("<style>" + e + "</style>") :i.push('<link type="text/css" rel=stylesheet href="' + e + '">'));
                return i.join("");
            },
            htmlEncode:function(t) {
                return ("" + t).replace(/&/g, "&amp;").replace(/>/g, "&gt;").replace(/</g, "&lt;");
            },
            htmlEncodeAttr:function(t) {
                return t.replace(/"/g, "&quot;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
            },
            getNextNumber:function() {
                var t = 0;
                return function() {
                    return ++t;
                };
            }(),
            getNextId:function() {
                return "cke_" + this.getNextNumber();
            },
            override:function(t, e) {
                var i = e(t);
                return i.prototype = t.prototype, i;
            },
            setTimeout:function(t, e, i, n, o) {
                return o || (o = window), i || (i = o), o.setTimeout(function() {
                    n ? t.apply(i, [].concat(n)) :t.apply(i);
                }, e || 0);
            },
            trim:function() {
                var t = /(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;
                return function(e) {
                    return e.replace(t, "");
                };
            }(),
            ltrim:function() {
                var t = /^[ \t\n\r]+/g;
                return function(e) {
                    return e.replace(t, "");
                };
            }(),
            rtrim:function() {
                var t = /[ \t\n\r]+$/g;
                return function(e) {
                    return e.replace(t, "");
                };
            }(),
            indexOf:function(t, e) {
                if ("function" == typeof e) {
                    for (var i = 0, n = t.length; n > i; i++) if (e(t[i])) return i;
                } else {
                    if (t.indexOf) return t.indexOf(e);
                    for (i = 0, n = t.length; n > i; i++) if (t[i] === e) return i;
                }
                return -1;
            },
            search:function(t, e) {
                var i = CKEDITOR.tools.indexOf(t, e);
                return i >= 0 ? t[i] :null;
            },
            bind:function(t, e) {
                return function() {
                    return t.apply(e, arguments);
                };
            },
            createClass:function(t) {
                var e = t.$, i = t.base, n = t.privates || t._, o = t.proto, t = t.statics;
                if (!e && (e = function() {
                    i && this.base.apply(this, arguments);
                }), n) var r = e, e = function() {
                    var t, e = this._ || (this._ = {});
                    for (t in n) {
                        var i = n[t];
                        e[t] = "function" == typeof i ? CKEDITOR.tools.bind(i, this) :i;
                    }
                    r.apply(this, arguments);
                };
                return i && (e.prototype = this.prototypedCopy(i.prototype), e.prototype.constructor = e, 
                e.base = i, e.baseProto = i.prototype, e.prototype.base = function() {
                    this.base = i.prototype.base, i.apply(this, arguments), this.base = arguments.callee;
                }), o && this.extend(e.prototype, o, !0), t && this.extend(e, t, !0), e;
            },
            addFunction:function(e, i) {
                return t.push(function() {
                    return e.apply(i || this, arguments);
                }) - 1;
            },
            removeFunction:function(e) {
                t[e] = null;
            },
            callFunction:function(e) {
                var i = t[e];
                return i && i.apply(window, Array.prototype.slice.call(arguments, 1));
            },
            cssLength:function() {
                var t, e = /^-?\d+\.?\d*px$/;
                return function(i) {
                    return t = CKEDITOR.tools.trim(i + "") + "px", e.test(t) ? t :i || "";
                };
            }(),
            convertToPx:function() {
                var t;
                return function(e) {
                    return t || (t = CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>', CKEDITOR.document), 
                    CKEDITOR.document.getBody().append(t)), /%$/.test(e) ? e :(t.setStyle("width", e), 
                    t.$.clientWidth);
                };
            }(),
            repeat:function(t, e) {
                return Array(e + 1).join(t);
            },
            tryThese:function() {
                for (var t, e = 0, i = arguments.length; i > e; e++) {
                    var n = arguments[e];
                    try {
                        t = n();
                        break;
                    } catch (o) {}
                }
                return t;
            },
            genKey:function() {
                return Array.prototype.slice.call(arguments).join("-");
            },
            defer:function(t) {
                return function() {
                    var e = arguments, i = this;
                    window.setTimeout(function() {
                        t.apply(i, e);
                    }, 0);
                };
            },
            normalizeCssText:function(t, e) {
                var i, n = [], o = CKEDITOR.tools.parseCssText(t, !0, e);
                for (i in o) n.push(i + ":" + o[i]);
                return n.sort(), n.length ? n.join(";") + ";" :"";
            },
            convertRgbToHex:function(t) {
                return t.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi, function(t, e, i, n) {
                    for (t = [ e, i, n ], e = 0; 3 > e; e++) t[e] = ("0" + parseInt(t[e], 10).toString(16)).slice(-2);
                    return "#" + t.join("");
                });
            },
            parseCssText:function(t, e, i) {
                var n = {};
                return i && (i = new CKEDITOR.dom.element("span"), i.setAttribute("style", t), t = CKEDITOR.tools.convertRgbToHex(i.getAttribute("style") || "")), 
                t && ";" != t ? (t.replace(/&quot;/g, '"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g, function(t, i, o) {
                    e && (i = i.toLowerCase(), "font-family" == i && (o = o.toLowerCase().replace(/["']/g, "").replace(/\s*,\s*/g, ",")), 
                    o = CKEDITOR.tools.trim(o)), n[i] = o;
                }), n) :n;
            }
        };
    }(), CKEDITOR.dtd = function() {
        var t = CKEDITOR.tools.extend, e = function(t, e) {
            for (var i = CKEDITOR.tools.clone(t), n = 1; n < arguments.length; n++) {
                var o, e = arguments[n];
                for (o in e) delete i[o];
            }
            return i;
        }, i = {}, n = {}, o = {
            address:1,
            article:1,
            aside:1,
            blockquote:1,
            details:1,
            div:1,
            dl:1,
            fieldset:1,
            figure:1,
            footer:1,
            form:1,
            h1:1,
            h2:1,
            h3:1,
            h4:1,
            h5:1,
            h6:1,
            header:1,
            hgroup:1,
            hr:1,
            menu:1,
            nav:1,
            ol:1,
            p:1,
            pre:1,
            section:1,
            table:1,
            ul:1
        }, r = {
            command:1,
            link:1,
            meta:1,
            noscript:1,
            script:1,
            style:1
        }, s = {}, a = {
            "#":1
        }, l = {
            center:1,
            dir:1,
            noframes:1
        };
        return t(i, {
            a:1,
            abbr:1,
            area:1,
            audio:1,
            b:1,
            bdi:1,
            bdo:1,
            br:1,
            button:1,
            canvas:1,
            cite:1,
            code:1,
            command:1,
            datalist:1,
            del:1,
            dfn:1,
            em:1,
            embed:1,
            i:1,
            iframe:1,
            img:1,
            input:1,
            ins:1,
            kbd:1,
            keygen:1,
            label:1,
            map:1,
            mark:1,
            meter:1,
            noscript:1,
            object:1,
            output:1,
            progress:1,
            q:1,
            ruby:1,
            s:1,
            samp:1,
            script:1,
            select:1,
            small:1,
            span:1,
            strong:1,
            sub:1,
            sup:1,
            textarea:1,
            time:1,
            u:1,
            "var":1,
            video:1,
            wbr:1
        }, a, {
            acronym:1,
            applet:1,
            basefont:1,
            big:1,
            font:1,
            isindex:1,
            strike:1,
            style:1,
            tt:1
        }), t(n, o, i, l), e = {
            a:e(i, {
                a:1,
                button:1
            }),
            abbr:i,
            address:n,
            area:s,
            article:t({
                style:1
            }, n),
            aside:t({
                style:1
            }, n),
            audio:t({
                source:1,
                track:1
            }, n),
            b:i,
            base:s,
            bdi:i,
            bdo:i,
            blockquote:n,
            body:n,
            br:s,
            button:e(i, {
                a:1,
                button:1
            }),
            canvas:i,
            caption:n,
            cite:i,
            code:i,
            col:s,
            colgroup:{
                col:1
            },
            command:s,
            datalist:t({
                option:1
            }, i),
            dd:n,
            del:i,
            details:t({
                summary:1
            }, n),
            dfn:i,
            div:t({
                style:1
            }, n),
            dl:{
                dt:1,
                dd:1
            },
            dt:n,
            em:i,
            embed:s,
            fieldset:t({
                legend:1
            }, n),
            figcaption:n,
            figure:t({
                figcaption:1
            }, n),
            footer:n,
            form:n,
            h1:i,
            h2:i,
            h3:i,
            h4:i,
            h5:i,
            h6:i,
            head:t({
                title:1,
                base:1
            }, r),
            header:n,
            hgroup:{
                h1:1,
                h2:1,
                h3:1,
                h4:1,
                h5:1,
                h6:1
            },
            hr:s,
            html:t({
                head:1,
                body:1
            }, n, r),
            i:i,
            iframe:a,
            img:s,
            input:s,
            ins:i,
            kbd:i,
            keygen:s,
            label:i,
            legend:i,
            li:n,
            link:s,
            map:n,
            mark:i,
            menu:t({
                li:1
            }, n),
            meta:s,
            meter:e(i, {
                meter:1
            }),
            nav:n,
            noscript:t({
                link:1,
                meta:1,
                style:1
            }, i),
            object:t({
                param:1
            }, i),
            ol:{
                li:1
            },
            optgroup:{
                option:1
            },
            option:a,
            output:i,
            p:i,
            param:s,
            pre:i,
            progress:e(i, {
                progress:1
            }),
            q:i,
            rp:i,
            rt:i,
            ruby:t({
                rp:1,
                rt:1
            }, i),
            s:i,
            samp:i,
            script:a,
            section:t({
                style:1
            }, n),
            select:{
                optgroup:1,
                option:1
            },
            small:i,
            source:s,
            span:i,
            strong:i,
            style:a,
            sub:i,
            summary:i,
            sup:i,
            table:{
                caption:1,
                colgroup:1,
                thead:1,
                tfoot:1,
                tbody:1,
                tr:1
            },
            tbody:{
                tr:1
            },
            td:n,
            textarea:a,
            tfoot:{
                tr:1
            },
            th:n,
            thead:{
                tr:1
            },
            time:e(i, {
                time:1
            }),
            title:a,
            tr:{
                th:1,
                td:1
            },
            track:s,
            u:i,
            ul:{
                li:1
            },
            "var":i,
            video:t({
                source:1,
                track:1
            }, n),
            wbr:s,
            acronym:i,
            applet:t({
                param:1
            }, n),
            basefont:s,
            big:i,
            center:n,
            dialog:s,
            dir:{
                li:1
            },
            font:i,
            isindex:s,
            noframes:n,
            strike:i,
            tt:i
        }, t(e, {
            $block:t({
                audio:1,
                dd:1,
                dt:1,
                li:1,
                video:1
            }, o, l),
            $blockLimit:{
                article:1,
                aside:1,
                audio:1,
                body:1,
                caption:1,
                details:1,
                dir:1,
                div:1,
                dl:1,
                fieldset:1,
                figure:1,
                footer:1,
                form:1,
                header:1,
                hgroup:1,
                menu:1,
                nav:1,
                ol:1,
                section:1,
                table:1,
                td:1,
                th:1,
                tr:1,
                ul:1,
                video:1
            },
            $cdata:{
                script:1,
                style:1
            },
            $editable:{
                address:1,
                article:1,
                aside:1,
                blockquote:1,
                body:1,
                details:1,
                div:1,
                fieldset:1,
                footer:1,
                form:1,
                h1:1,
                h2:1,
                h3:1,
                h4:1,
                h5:1,
                h6:1,
                header:1,
                hgroup:1,
                nav:1,
                p:1,
                pre:1,
                section:1
            },
            $empty:{
                area:1,
                base:1,
                basefont:1,
                br:1,
                col:1,
                command:1,
                dialog:1,
                embed:1,
                hr:1,
                img:1,
                input:1,
                isindex:1,
                keygen:1,
                link:1,
                meta:1,
                param:1,
                source:1,
                track:1,
                wbr:1
            },
            $inline:i,
            $list:{
                dl:1,
                ol:1,
                ul:1
            },
            $listItem:{
                dd:1,
                dt:1,
                li:1
            },
            $nonBodyContent:t({
                body:1,
                head:1,
                html:1
            }, e.head),
            $nonEditable:{
                applet:1,
                audio:1,
                button:1,
                embed:1,
                iframe:1,
                map:1,
                object:1,
                option:1,
                param:1,
                script:1,
                textarea:1,
                video:1
            },
            $object:{
                applet:1,
                audio:1,
                button:1,
                hr:1,
                iframe:1,
                img:1,
                input:1,
                object:1,
                select:1,
                table:1,
                textarea:1,
                video:1
            },
            $removeEmpty:{
                abbr:1,
                acronym:1,
                b:1,
                bdi:1,
                bdo:1,
                big:1,
                cite:1,
                code:1,
                del:1,
                dfn:1,
                em:1,
                font:1,
                i:1,
                ins:1,
                label:1,
                kbd:1,
                mark:1,
                meter:1,
                output:1,
                q:1,
                ruby:1,
                s:1,
                samp:1,
                small:1,
                span:1,
                strike:1,
                strong:1,
                sub:1,
                sup:1,
                time:1,
                tt:1,
                u:1,
                "var":1
            },
            $tabIndex:{
                a:1,
                area:1,
                button:1,
                input:1,
                object:1,
                select:1,
                textarea:1
            },
            $tableContent:{
                caption:1,
                col:1,
                colgroup:1,
                tbody:1,
                td:1,
                tfoot:1,
                th:1,
                thead:1,
                tr:1
            },
            $transparent:{
                a:1,
                audio:1,
                canvas:1,
                del:1,
                ins:1,
                map:1,
                noscript:1,
                object:1,
                video:1
            },
            $intermediate:{
                caption:1,
                colgroup:1,
                dd:1,
                dt:1,
                figcaption:1,
                legend:1,
                li:1,
                optgroup:1,
                option:1,
                rp:1,
                rt:1,
                summary:1,
                tbody:1,
                td:1,
                tfoot:1,
                th:1,
                thead:1,
                tr:1
            }
        }), e;
    }(), CKEDITOR.dom.event = function(t) {
        this.$ = t;
    }, CKEDITOR.dom.event.prototype = {
        getKey:function() {
            return this.$.keyCode || this.$.which;
        },
        getKeystroke:function() {
            var t = this.getKey();
            return (this.$.ctrlKey || this.$.metaKey) && (t += CKEDITOR.CTRL), this.$.shiftKey && (t += CKEDITOR.SHIFT), 
            this.$.altKey && (t += CKEDITOR.ALT), t;
        },
        preventDefault:function(t) {
            var e = this.$;
            e.preventDefault ? e.preventDefault() :e.returnValue = !1, t && this.stopPropagation();
        },
        stopPropagation:function() {
            var t = this.$;
            t.stopPropagation ? t.stopPropagation() :t.cancelBubble = !0;
        },
        getTarget:function() {
            var t = this.$.target || this.$.srcElement;
            return t ? new CKEDITOR.dom.node(t) :null;
        },
        getPhase:function() {
            return this.$.eventPhase || 2;
        },
        getPageOffset:function() {
            var t = this.getTarget().getDocument().$;
            return {
                x:this.$.pageX || this.$.clientX + (t.documentElement.scrollLeft || t.body.scrollLeft),
                y:this.$.pageY || this.$.clientY + (t.documentElement.scrollTop || t.body.scrollTop)
            };
        }
    }, CKEDITOR.CTRL = 1114112, CKEDITOR.SHIFT = 2228224, CKEDITOR.ALT = 4456448, CKEDITOR.EVENT_PHASE_CAPTURING = 1, 
    CKEDITOR.EVENT_PHASE_AT_TARGET = 2, CKEDITOR.EVENT_PHASE_BUBBLING = 3, CKEDITOR.dom.domObject = function(t) {
        t && (this.$ = t);
    }, CKEDITOR.dom.domObject.prototype = function() {
        var t = function(t, e) {
            return function(i) {
                "undefined" != typeof CKEDITOR && t.fire(e, new CKEDITOR.dom.event(i));
            };
        };
        return {
            getPrivate:function() {
                var t;
                return (t = this.getCustomData("_")) || this.setCustomData("_", t = {}), t;
            },
            on:function(e) {
                var i = this.getCustomData("_cke_nativeListeners");
                return i || (i = {}, this.setCustomData("_cke_nativeListeners", i)), i[e] || (i = i[e] = t(this, e), 
                this.$.addEventListener ? this.$.addEventListener(e, i, !!CKEDITOR.event.useCapture) :this.$.attachEvent && this.$.attachEvent("on" + e, i)), 
                CKEDITOR.event.prototype.on.apply(this, arguments);
            },
            removeListener:function(t) {
                if (CKEDITOR.event.prototype.removeListener.apply(this, arguments), !this.hasListeners(t)) {
                    var e = this.getCustomData("_cke_nativeListeners"), i = e && e[t];
                    i && (this.$.removeEventListener ? this.$.removeEventListener(t, i, !1) :this.$.detachEvent && this.$.detachEvent("on" + t, i), 
                    delete e[t]);
                }
            },
            removeAllListeners:function() {
                var t, e = this.getCustomData("_cke_nativeListeners");
                for (t in e) {
                    var i = e[t];
                    this.$.detachEvent ? this.$.detachEvent("on" + t, i) :this.$.removeEventListener && this.$.removeEventListener(t, i, !1), 
                    delete e[t];
                }
            }
        };
    }(), function(t) {
        var e = {};
        CKEDITOR.on("reset", function() {
            e = {};
        }), t.equals = function(t) {
            try {
                return t && t.$ === this.$;
            } catch (e) {
                return !1;
            }
        }, t.setCustomData = function(t, i) {
            var n = this.getUniqueId();
            return (e[n] || (e[n] = {}))[t] = i, this;
        }, t.getCustomData = function(t) {
            var i = this.$["data-cke-expando"];
            return (i = i && e[i]) && t in i ? i[t] :null;
        }, t.removeCustomData = function(t) {
            var i, n, o = this.$["data-cke-expando"], o = o && e[o];
            return o && (i = o[t], n = t in o, delete o[t]), n ? i :null;
        }, t.clearCustomData = function() {
            this.removeAllListeners();
            var t = this.$["data-cke-expando"];
            t && delete e[t];
        }, t.getUniqueId = function() {
            return this.$["data-cke-expando"] || (this.$["data-cke-expando"] = CKEDITOR.tools.getNextNumber());
        }, CKEDITOR.event.implementOn(t);
    }(CKEDITOR.dom.domObject.prototype), CKEDITOR.dom.node = function(t) {
        return t ? new CKEDITOR.dom[t.nodeType == CKEDITOR.NODE_DOCUMENT ? "document" :t.nodeType == CKEDITOR.NODE_ELEMENT ? "element" :t.nodeType == CKEDITOR.NODE_TEXT ? "text" :t.nodeType == CKEDITOR.NODE_COMMENT ? "comment" :t.nodeType == CKEDITOR.NODE_DOCUMENT_FRAGMENT ? "documentFragment" :"domObject"](t) :this;
    }, CKEDITOR.dom.node.prototype = new CKEDITOR.dom.domObject(), CKEDITOR.NODE_ELEMENT = 1, 
    CKEDITOR.NODE_DOCUMENT = 9, CKEDITOR.NODE_TEXT = 3, CKEDITOR.NODE_COMMENT = 8, CKEDITOR.NODE_DOCUMENT_FRAGMENT = 11, 
    CKEDITOR.POSITION_IDENTICAL = 0, CKEDITOR.POSITION_DISCONNECTED = 1, CKEDITOR.POSITION_FOLLOWING = 2, 
    CKEDITOR.POSITION_PRECEDING = 4, CKEDITOR.POSITION_IS_CONTAINED = 8, CKEDITOR.POSITION_CONTAINS = 16, 
    CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype, {
        appendTo:function(t, e) {
            return t.append(this, e), t;
        },
        clone:function(t, e) {
            var i = this.$.cloneNode(t), n = function(i) {
                if (i["data-cke-expando"] && (i["data-cke-expando"] = !1), i.nodeType == CKEDITOR.NODE_ELEMENT && (e || i.removeAttribute("id", !1), 
                t)) for (var i = i.childNodes, o = 0; o < i.length; o++) n(i[o]);
            };
            return n(i), new CKEDITOR.dom.node(i);
        },
        hasPrevious:function() {
            return !!this.$.previousSibling;
        },
        hasNext:function() {
            return !!this.$.nextSibling;
        },
        insertAfter:function(t) {
            return t.$.parentNode.insertBefore(this.$, t.$.nextSibling), t;
        },
        insertBefore:function(t) {
            return t.$.parentNode.insertBefore(this.$, t.$), t;
        },
        insertBeforeMe:function(t) {
            return this.$.parentNode.insertBefore(t.$, this.$), t;
        },
        getAddress:function(t) {
            for (var e = [], i = this.getDocument().$.documentElement, n = this.$; n && n != i; ) {
                var o = n.parentNode;
                o && e.unshift(this.getIndex.call({
                    $:n
                }, t)), n = o;
            }
            return e;
        },
        getDocument:function() {
            return new CKEDITOR.dom.document(this.$.ownerDocument || this.$.parentNode.ownerDocument);
        },
        getIndex:function(t) {
            var e, i = this.$, n = -1;
            if (!this.$.parentNode) return n;
            do (!t || i == this.$ || i.nodeType != CKEDITOR.NODE_TEXT || !e && i.nodeValue) && (n++, 
            e = i.nodeType == CKEDITOR.NODE_TEXT); while (i = i.previousSibling);
            return n;
        },
        getNextSourceNode:function(t, e, i) {
            if (i && !i.call) var n = i, i = function(t) {
                return !t.equals(n);
            };
            var o, t = !t && this.getFirst && this.getFirst();
            if (!t) {
                if (this.type == CKEDITOR.NODE_ELEMENT && i && i(this, !0) === !1) return null;
                t = this.getNext();
            }
            for (;!t && (o = (o || this).getParent()); ) {
                if (i && i(o, !0) === !1) return null;
                t = o.getNext();
            }
            return !t || i && i(t) === !1 ? null :e && e != t.type ? t.getNextSourceNode(!1, e, i) :t;
        },
        getPreviousSourceNode:function(t, e, i) {
            if (i && !i.call) var n = i, i = function(t) {
                return !t.equals(n);
            };
            var o, t = !t && this.getLast && this.getLast();
            if (!t) {
                if (this.type == CKEDITOR.NODE_ELEMENT && i && i(this, !0) === !1) return null;
                t = this.getPrevious();
            }
            for (;!t && (o = (o || this).getParent()); ) {
                if (i && i(o, !0) === !1) return null;
                t = o.getPrevious();
            }
            return !t || i && i(t) === !1 ? null :e && t.type != e ? t.getPreviousSourceNode(!1, e, i) :t;
        },
        getPrevious:function(t) {
            var e, i = this.$;
            do e = (i = i.previousSibling) && 10 != i.nodeType && new CKEDITOR.dom.node(i); while (e && t && !t(e));
            return e;
        },
        getNext:function(t) {
            var e, i = this.$;
            do e = (i = i.nextSibling) && new CKEDITOR.dom.node(i); while (e && t && !t(e));
            return e;
        },
        getParent:function(t) {
            var e = this.$.parentNode;
            return e && (e.nodeType == CKEDITOR.NODE_ELEMENT || t && e.nodeType == CKEDITOR.NODE_DOCUMENT_FRAGMENT) ? new CKEDITOR.dom.node(e) :null;
        },
        getParents:function(t) {
            var e = this, i = [];
            do i[t ? "push" :"unshift"](e); while (e = e.getParent());
            return i;
        },
        getCommonAncestor:function(t) {
            if (t.equals(this)) return this;
            if (t.contains && t.contains(this)) return t;
            var e = this.contains ? this :this.getParent();
            do if (e.contains(t)) return e; while (e = e.getParent());
            return null;
        },
        getPosition:function(t) {
            var e = this.$, i = t.$;
            if (e.compareDocumentPosition) return e.compareDocumentPosition(i);
            if (e == i) return CKEDITOR.POSITION_IDENTICAL;
            if (this.type == CKEDITOR.NODE_ELEMENT && t.type == CKEDITOR.NODE_ELEMENT) {
                if (e.contains) {
                    if (e.contains(i)) return CKEDITOR.POSITION_CONTAINS + CKEDITOR.POSITION_PRECEDING;
                    if (i.contains(e)) return CKEDITOR.POSITION_IS_CONTAINED + CKEDITOR.POSITION_FOLLOWING;
                }
                if ("sourceIndex" in e) return e.sourceIndex < 0 || i.sourceIndex < 0 ? CKEDITOR.POSITION_DISCONNECTED :e.sourceIndex < i.sourceIndex ? CKEDITOR.POSITION_PRECEDING :CKEDITOR.POSITION_FOLLOWING;
            }
            for (var e = this.getAddress(), t = t.getAddress(), i = Math.min(e.length, t.length), n = 0; i - 1 >= n; n++) if (e[n] != t[n]) {
                if (i > n) return e[n] < t[n] ? CKEDITOR.POSITION_PRECEDING :CKEDITOR.POSITION_FOLLOWING;
                break;
            }
            return e.length < t.length ? CKEDITOR.POSITION_CONTAINS + CKEDITOR.POSITION_PRECEDING :CKEDITOR.POSITION_IS_CONTAINED + CKEDITOR.POSITION_FOLLOWING;
        },
        getAscendant:function(t, e) {
            var i, n = this.$;
            for (e || (n = n.parentNode); n; ) {
                if (n.nodeName && (i = n.nodeName.toLowerCase(), "string" == typeof t ? i == t :i in t)) return new CKEDITOR.dom.node(n);
                n = n.parentNode;
            }
            return null;
        },
        hasAscendant:function(t, e) {
            var i = this.$;
            for (e || (i = i.parentNode); i; ) {
                if (i.nodeName && i.nodeName.toLowerCase() == t) return !0;
                i = i.parentNode;
            }
            return !1;
        },
        move:function(t, e) {
            t.append(this.remove(), e);
        },
        remove:function(t) {
            var e = this.$, i = e.parentNode;
            if (i) {
                if (t) for (;t = e.firstChild; ) i.insertBefore(e.removeChild(t), e);
                i.removeChild(e);
            }
            return this;
        },
        replace:function(t) {
            this.insertBefore(t), t.remove();
        },
        trim:function() {
            this.ltrim(), this.rtrim();
        },
        ltrim:function() {
            for (var t; this.getFirst && (t = this.getFirst()); ) {
                if (t.type == CKEDITOR.NODE_TEXT) {
                    var e = CKEDITOR.tools.ltrim(t.getText()), i = t.getLength();
                    if (!e) {
                        t.remove();
                        continue;
                    }
                    e.length < i && (t.split(i - e.length), this.$.removeChild(this.$.firstChild));
                }
                break;
            }
        },
        rtrim:function() {
            for (var t; this.getLast && (t = this.getLast()); ) {
                if (t.type == CKEDITOR.NODE_TEXT) {
                    var e = CKEDITOR.tools.rtrim(t.getText()), i = t.getLength();
                    if (!e) {
                        t.remove();
                        continue;
                    }
                    e.length < i && (t.split(e.length), this.$.lastChild.parentNode.removeChild(this.$.lastChild));
                }
                break;
            }
            CKEDITOR.env.ie || CKEDITOR.env.opera || (t = this.$.lastChild) && 1 == t.type && "br" == t.nodeName.toLowerCase() && t.parentNode.removeChild(t);
        },
        isReadOnly:function() {
            var t = this;
            if (this.type != CKEDITOR.NODE_ELEMENT && (t = this.getParent()), t && "undefined" != typeof t.$.isContentEditable) return !(t.$.isContentEditable || t.data("cke-editable"));
            for (;t && !t.data("cke-editable"); ) {
                if ("false" == t.getAttribute("contentEditable")) return !0;
                if ("true" == t.getAttribute("contentEditable")) break;
                t = t.getParent();
            }
            return !t;
        }
    }), CKEDITOR.dom.window = function(t) {
        CKEDITOR.dom.domObject.call(this, t);
    }, CKEDITOR.dom.window.prototype = new CKEDITOR.dom.domObject(), CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype, {
        focus:function() {
            this.$.focus();
        },
        getViewPaneSize:function() {
            var t = this.$.document, e = "CSS1Compat" == t.compatMode;
            return {
                width:(e ? t.documentElement.clientWidth :t.body.clientWidth) || 0,
                height:(e ? t.documentElement.clientHeight :t.body.clientHeight) || 0
            };
        },
        getScrollPosition:function() {
            var t = this.$;
            return "pageXOffset" in t ? {
                x:t.pageXOffset || 0,
                y:t.pageYOffset || 0
            } :(t = t.document, {
                x:t.documentElement.scrollLeft || t.body.scrollLeft || 0,
                y:t.documentElement.scrollTop || t.body.scrollTop || 0
            });
        },
        getFrame:function() {
            var t = this.$.frameElement;
            return t ? new CKEDITOR.dom.element.get(t) :null;
        }
    }), CKEDITOR.dom.document = function(t) {
        CKEDITOR.dom.domObject.call(this, t);
    }, CKEDITOR.dom.document.prototype = new CKEDITOR.dom.domObject(), CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype, {
        type:CKEDITOR.NODE_DOCUMENT,
        appendStyleSheet:function(t) {
            if (this.$.createStyleSheet) this.$.createStyleSheet(t); else {
                var e = new CKEDITOR.dom.element("link");
                e.setAttributes({
                    rel:"stylesheet",
                    type:"text/css",
                    href:t
                }), this.getHead().append(e);
            }
        },
        appendStyleText:function(t) {
            if (this.$.createStyleSheet) {
                var e = this.$.createStyleSheet("");
                e.cssText = t;
            } else {
                var i = new CKEDITOR.dom.element("style", this);
                i.append(new CKEDITOR.dom.text(t, this)), this.getHead().append(i);
            }
            return e || i.$.sheet;
        },
        createElement:function(t, e) {
            var i = new CKEDITOR.dom.element(t, this);
            return e && (e.attributes && i.setAttributes(e.attributes), e.styles && i.setStyles(e.styles)), 
            i;
        },
        createText:function(t) {
            return new CKEDITOR.dom.text(t, this);
        },
        focus:function() {
            this.getWindow().focus();
        },
        getActive:function() {
            return new CKEDITOR.dom.element(this.$.activeElement);
        },
        getById:function(t) {
            return (t = this.$.getElementById(t)) ? new CKEDITOR.dom.element(t) :null;
        },
        getByAddress:function(t, e) {
            for (var i = this.$.documentElement, n = 0; i && n < t.length; n++) {
                var o = t[n];
                if (e) for (var r = -1, s = 0; s < i.childNodes.length; s++) {
                    var a = i.childNodes[s];
                    if ((e !== !0 || 3 != a.nodeType || !a.previousSibling || 3 != a.previousSibling.nodeType) && (r++, 
                    r == o)) {
                        i = a;
                        break;
                    }
                } else i = i.childNodes[o];
            }
            return i ? new CKEDITOR.dom.node(i) :null;
        },
        getElementsByTag:function(t, e) {
            return (!CKEDITOR.env.ie || document.documentMode > 8) && e && (t = e + ":" + t), 
            new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(t));
        },
        getHead:function() {
            var t = this.$.getElementsByTagName("head")[0];
            return t = t ? new CKEDITOR.dom.element(t) :this.getDocumentElement().append(new CKEDITOR.dom.element("head"), !0);
        },
        getBody:function() {
            return new CKEDITOR.dom.element(this.$.body);
        },
        getDocumentElement:function() {
            return new CKEDITOR.dom.element(this.$.documentElement);
        },
        getWindow:function() {
            var t = new CKEDITOR.dom.window(this.$.parentWindow || this.$.defaultView);
            return (this.getWindow = function() {
                return t;
            })();
        },
        write:function(t) {
            this.$.open("text/html", "replace"), CKEDITOR.env.isCustomDomain() && (this.$.domain = document.domain), 
            this.$.write(t), this.$.close();
        }
    }), CKEDITOR.dom.nodeList = function(t) {
        this.$ = t;
    }, CKEDITOR.dom.nodeList.prototype = {
        count:function() {
            return this.$.length;
        },
        getItem:function(t) {
            return 0 > t || t >= this.$.length ? null :(t = this.$[t]) ? new CKEDITOR.dom.node(t) :null;
        }
    }, CKEDITOR.dom.element = function(t, e) {
        "string" == typeof t && (t = (e ? e.$ :document).createElement(t)), CKEDITOR.dom.domObject.call(this, t);
    }, CKEDITOR.dom.element.get = function(t) {
        return (t = "string" == typeof t ? document.getElementById(t) || document.getElementsByName(t)[0] :t) && (t.$ ? t :new CKEDITOR.dom.element(t));
    }, CKEDITOR.dom.element.prototype = new CKEDITOR.dom.node(), CKEDITOR.dom.element.createFromHtml = function(t, e) {
        var i = new CKEDITOR.dom.element("div", e);
        return i.setHtml(t), i.getFirst().remove();
    }, CKEDITOR.dom.element.setMarker = function(t, e, i, n) {
        var o = e.getCustomData("list_marker_id") || e.setCustomData("list_marker_id", CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"), r = e.getCustomData("list_marker_names") || e.setCustomData("list_marker_names", {}).getCustomData("list_marker_names");
        return t[o] = e, r[i] = 1, e.setCustomData(i, n);
    }, CKEDITOR.dom.element.clearAllMarkers = function(t) {
        for (var e in t) CKEDITOR.dom.element.clearMarkers(t, t[e], 1);
    }, CKEDITOR.dom.element.clearMarkers = function(t, e, i) {
        var n, o = e.getCustomData("list_marker_names"), r = e.getCustomData("list_marker_id");
        for (n in o) e.removeCustomData(n);
        e.removeCustomData("list_marker_names"), i && (e.removeCustomData("list_marker_id"), 
        delete t[r]);
    }, function() {
        function t(t) {
            for (var i = 0, n = 0, o = e[t].length; o > n; n++) i += parseInt(this.getComputedStyle(e[t][n]) || 0, 10) || 0;
            return i;
        }
        CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype, {
            type:CKEDITOR.NODE_ELEMENT,
            addClass:function(t) {
                var e = this.$.className;
                e && (RegExp("(?:^|\\s)" + t + "(?:\\s|$)", "").test(e) || (e += " " + t)), this.$.className = e || t;
            },
            removeClass:function(t) {
                var e = this.getAttribute("class");
                return e && (t = RegExp("(?:^|\\s+)" + t + "(?=\\s|$)", "i"), t.test(e) && ((e = e.replace(t, "").replace(/^\s+/, "")) ? this.setAttribute("class", e) :this.removeAttribute("class"))), 
                this;
            },
            hasClass:function(t) {
                return RegExp("(?:^|\\s+)" + t + "(?=\\s|$)", "").test(this.getAttribute("class"));
            },
            append:function(t, e) {
                return "string" == typeof t && (t = this.getDocument().createElement(t)), e ? this.$.insertBefore(t.$, this.$.firstChild) :this.$.appendChild(t.$), 
                t;
            },
            appendHtml:function(t) {
                if (this.$.childNodes.length) {
                    var e = new CKEDITOR.dom.element("div", this.getDocument());
                    e.setHtml(t), e.moveChildren(this);
                } else this.setHtml(t);
            },
            appendText:function(t) {
                void 0 != this.$.text ? this.$.text = this.$.text + t :this.append(new CKEDITOR.dom.text(t));
            },
            appendBogus:function() {
                for (var t = this.getLast(); t && t.type == CKEDITOR.NODE_TEXT && !CKEDITOR.tools.rtrim(t.getText()); ) t = t.getPrevious();
                t && t.is && t.is("br") || (t = CKEDITOR.env.opera ? this.getDocument().createText("") :this.getDocument().createElement("br"), 
                CKEDITOR.env.gecko && t.setAttribute("type", "_moz"), this.append(t));
            },
            breakParent:function(t) {
                var e = new CKEDITOR.dom.range(this.getDocument());
                e.setStartAfter(this), e.setEndAfter(t), t = e.extractContents(), e.insertNode(this.remove()), 
                t.insertAfterNode(this);
            },
            contains:CKEDITOR.env.ie || CKEDITOR.env.webkit ? function(t) {
                var e = this.$;
                return t.type != CKEDITOR.NODE_ELEMENT ? e.contains(t.getParent().$) :e != t.$ && e.contains(t.$);
            } :function(t) {
                return !!(16 & this.$.compareDocumentPosition(t.$));
            },
            focus:function() {
                function t() {
                    try {
                        this.$.focus();
                    } catch (t) {}
                }
                return function(e) {
                    e ? CKEDITOR.tools.setTimeout(t, 100, this) :t.call(this);
                };
            }(),
            getHtml:function() {
                var t = this.$.innerHTML;
                return CKEDITOR.env.ie ? t.replace(/<\?[^>]*>/g, "") :t;
            },
            getOuterHtml:function() {
                if (this.$.outerHTML) return this.$.outerHTML.replace(/<\?[^>]*>/, "");
                var t = this.$.ownerDocument.createElement("div");
                return t.appendChild(this.$.cloneNode(!0)), t.innerHTML;
            },
            getClientRect:function() {
                var t = CKEDITOR.tools.extend({}, this.$.getBoundingClientRect());
                return !t.width && (t.width = t.right - t.left), !t.height && (t.height = t.bottom - t.top), 
                t;
            },
            setHtml:function() {
                var t = function(t) {
                    return this.$.innerHTML = t;
                };
                return CKEDITOR.env.ie && CKEDITOR.env.version < 9 ? function(t) {
                    try {
                        return this.$.innerHTML = t;
                    } catch (e) {
                        this.$.innerHTML = "";
                        var i = new CKEDITOR.dom.element("body", this.getDocument());
                        for (i.$.innerHTML = t, i = i.getChildren(); i.count(); ) this.append(i.getItem(0));
                        return t;
                    }
                } :t;
            }(),
            setText:function(t) {
                return CKEDITOR.dom.element.prototype.setText = void 0 != this.$.innerText ? function(t) {
                    return this.$.innerText = t;
                } :function(t) {
                    return this.$.textContent = t;
                }, this.setText(t);
            },
            getAttribute:function() {
                var t = function(t) {
                    return this.$.getAttribute(t, 2);
                };
                return CKEDITOR.env.ie && (CKEDITOR.env.ie7Compat || CKEDITOR.env.ie6Compat) ? function(t) {
                    switch (t) {
                      case "class":
                        t = "className";
                        break;

                      case "http-equiv":
                        t = "httpEquiv";
                        break;

                      case "name":
                        return this.$.name;

                      case "tabindex":
                        return t = this.$.getAttribute(t, 2), 0 !== t && 0 === this.$.tabIndex && (t = null), 
                        t;

                      case "checked":
                        return t = this.$.attributes.getNamedItem(t), (t.specified ? t.nodeValue :this.$.checked) ? "checked" :null;

                      case "hspace":
                      case "value":
                        return this.$[t];

                      case "style":
                        return this.$.style.cssText;

                      case "contenteditable":
                      case "contentEditable":
                        return this.$.attributes.getNamedItem("contentEditable").specified ? this.$.getAttribute("contentEditable") :null;
                    }
                    return this.$.getAttribute(t, 2);
                } :t;
            }(),
            getChildren:function() {
                return new CKEDITOR.dom.nodeList(this.$.childNodes);
            },
            getComputedStyle:CKEDITOR.env.ie ? function(t) {
                return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(t)];
            } :function(t) {
                var e = this.getWindow().$.getComputedStyle(this.$, null);
                return e ? e.getPropertyValue(t) :"";
            },
            getDtd:function() {
                var t = CKEDITOR.dtd[this.getName()];
                return this.getDtd = function() {
                    return t;
                }, t;
            },
            getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,
            getTabIndex:CKEDITOR.env.ie ? function() {
                var t = this.$.tabIndex;
                return 0 === t && !CKEDITOR.dtd.$tabIndex[this.getName()] && 0 !== parseInt(this.getAttribute("tabindex"), 10) && (t = -1), 
                t;
            } :CKEDITOR.env.webkit ? function() {
                var t = this.$.tabIndex;
                return void 0 == t && (t = parseInt(this.getAttribute("tabindex"), 10), isNaN(t) && (t = -1)), 
                t;
            } :function() {
                return this.$.tabIndex;
            },
            getText:function() {
                return this.$.textContent || this.$.innerText || "";
            },
            getWindow:function() {
                return this.getDocument().getWindow();
            },
            getId:function() {
                return this.$.id || null;
            },
            getNameAtt:function() {
                return this.$.name || null;
            },
            getName:function() {
                var t = this.$.nodeName.toLowerCase();
                if (CKEDITOR.env.ie && !(document.documentMode > 8)) {
                    var e = this.$.scopeName;
                    "HTML" != e && (t = e.toLowerCase() + ":" + t);
                }
                return (this.getName = function() {
                    return t;
                })();
            },
            getValue:function() {
                return this.$.value;
            },
            getFirst:function(t) {
                var e = this.$.firstChild;
                return (e = e && new CKEDITOR.dom.node(e)) && t && !t(e) && (e = e.getNext(t)), 
                e;
            },
            getLast:function(t) {
                var e = this.$.lastChild;
                return (e = e && new CKEDITOR.dom.node(e)) && t && !t(e) && (e = e.getPrevious(t)), 
                e;
            },
            getStyle:function(t) {
                return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(t)];
            },
            is:function() {
                var t = this.getName();
                if ("object" == typeof arguments[0]) return !!arguments[0][t];
                for (var e = 0; e < arguments.length; e++) if (arguments[e] == t) return !0;
                return !1;
            },
            isEditable:function(t) {
                var e = this.getName();
                return this.isReadOnly() || "none" == this.getComputedStyle("display") || "hidden" == this.getComputedStyle("visibility") || CKEDITOR.dtd.$nonEditable[e] || CKEDITOR.dtd.$empty[e] || this.is("a") && (this.data("cke-saved-name") || this.hasAttribute("name")) && !this.getChildCount() ? !1 :t !== !1 ? (t = CKEDITOR.dtd[e] || CKEDITOR.dtd.span, 
                !(!t || !t["#"])) :!0;
            },
            isIdentical:function(t) {
                var e = this.clone(0, 1), t = t.clone(0, 1);
                if (e.removeAttributes([ "_moz_dirty", "data-cke-expando", "data-cke-saved-href", "data-cke-saved-name" ]), 
                t.removeAttributes([ "_moz_dirty", "data-cke-expando", "data-cke-saved-href", "data-cke-saved-name" ]), 
                e.$.isEqualNode) return e.$.style.cssText = CKEDITOR.tools.normalizeCssText(e.$.style.cssText), 
                t.$.style.cssText = CKEDITOR.tools.normalizeCssText(t.$.style.cssText), e.$.isEqualNode(t.$);
                if (e = e.getOuterHtml(), t = t.getOuterHtml(), CKEDITOR.env.ie && CKEDITOR.env.version < 9 && this.is("a")) {
                    var i = this.getParent();
                    i.type == CKEDITOR.NODE_ELEMENT && (i = i.clone(), i.setHtml(e), e = i.getHtml(), 
                    i.setHtml(t), t = i.getHtml());
                }
                return e == t;
            },
            isVisible:function() {
                var t, e, i = (this.$.offsetHeight || this.$.offsetWidth) && "hidden" != this.getComputedStyle("visibility");
                return i && (CKEDITOR.env.webkit || CKEDITOR.env.opera) && (t = this.getWindow(), 
                !t.equals(CKEDITOR.document.getWindow()) && (e = t.$.frameElement) && (i = new CKEDITOR.dom.element(e).isVisible())), 
                !!i;
            },
            isEmptyInlineRemoveable:function() {
                if (!CKEDITOR.dtd.$removeEmpty[this.getName()]) return !1;
                for (var t = this.getChildren(), e = 0, i = t.count(); i > e; e++) {
                    var n = t.getItem(e);
                    if ((n.type != CKEDITOR.NODE_ELEMENT || !n.data("cke-bookmark")) && (n.type == CKEDITOR.NODE_ELEMENT && !n.isEmptyInlineRemoveable() || n.type == CKEDITOR.NODE_TEXT && CKEDITOR.tools.trim(n.getText()))) return !1;
                }
                return !0;
            },
            hasAttributes:CKEDITOR.env.ie && (CKEDITOR.env.ie7Compat || CKEDITOR.env.ie6Compat) ? function() {
                for (var t = this.$.attributes, e = 0; e < t.length; e++) {
                    var i = t[e];
                    switch (i.nodeName) {
                      case "class":
                        if (this.getAttribute("class")) return !0;

                      case "data-cke-expando":
                        continue;

                      default:
                        if (i.specified) return !0;
                    }
                }
                return !1;
            } :function() {
                var t = this.$.attributes, e = t.length, i = {
                    "data-cke-expando":1,
                    _moz_dirty:1
                };
                return e > 0 && (e > 2 || !i[t[0].nodeName] || 2 == e && !i[t[1].nodeName]);
            },
            hasAttribute:function() {
                function t(t) {
                    return t = this.$.attributes.getNamedItem(t), !(!t || !t.specified);
                }
                return CKEDITOR.env.ie && CKEDITOR.env.version < 8 ? function(e) {
                    return "name" == e ? !!this.$.name :t.call(this, e);
                } :t;
            }(),
            hide:function() {
                this.setStyle("display", "none");
            },
            moveChildren:function(t, e) {
                var i = this.$, t = t.$;
                if (i != t) {
                    var n;
                    if (e) for (;n = i.lastChild; ) t.insertBefore(i.removeChild(n), t.firstChild); else for (;n = i.firstChild; ) t.appendChild(i.removeChild(n));
                }
            },
            mergeSiblings:function() {
                function t(t, e, i) {
                    if (e && e.type == CKEDITOR.NODE_ELEMENT) {
                        for (var n = []; e.data("cke-bookmark") || e.isEmptyInlineRemoveable(); ) if (n.push(e), 
                        e = i ? e.getNext() :e.getPrevious(), !e || e.type != CKEDITOR.NODE_ELEMENT) return;
                        if (t.isIdentical(e)) {
                            for (var o = i ? t.getLast() :t.getFirst(); n.length; ) n.shift().move(t, !i);
                            e.moveChildren(t, !i), e.remove(), o && o.type == CKEDITOR.NODE_ELEMENT && o.mergeSiblings();
                        }
                    }
                }
                return function(e) {
                    (e === !1 || CKEDITOR.dtd.$removeEmpty[this.getName()] || this.is("a")) && (t(this, this.getNext(), !0), 
                    t(this, this.getPrevious()));
                };
            }(),
            show:function() {
                this.setStyles({
                    display:"",
                    visibility:""
                });
            },
            setAttribute:function() {
                var t = function(t, e) {
                    return this.$.setAttribute(t, e), this;
                };
                return CKEDITOR.env.ie && (CKEDITOR.env.ie7Compat || CKEDITOR.env.ie6Compat) ? function(e, i) {
                    return "class" == e ? this.$.className = i :"style" == e ? this.$.style.cssText = i :"tabindex" == e ? this.$.tabIndex = i :"checked" == e ? this.$.checked = i :"contenteditable" == e ? t.call(this, "contentEditable", i) :t.apply(this, arguments), 
                    this;
                } :CKEDITOR.env.ie8Compat && CKEDITOR.env.secure ? function(e, i) {
                    if ("src" == e && i.match(/^http:\/\//)) try {
                        t.apply(this, arguments);
                    } catch (n) {} else t.apply(this, arguments);
                    return this;
                } :t;
            }(),
            setAttributes:function(t) {
                for (var e in t) this.setAttribute(e, t[e]);
                return this;
            },
            setValue:function(t) {
                return this.$.value = t, this;
            },
            removeAttribute:function() {
                var t = function(t) {
                    this.$.removeAttribute(t);
                };
                return CKEDITOR.env.ie && (CKEDITOR.env.ie7Compat || CKEDITOR.env.ie6Compat) ? function(t) {
                    "class" == t ? t = "className" :"tabindex" == t ? t = "tabIndex" :"contenteditable" == t && (t = "contentEditable"), 
                    this.$.removeAttribute(t);
                } :t;
            }(),
            removeAttributes:function(t) {
                if (CKEDITOR.tools.isArray(t)) for (var e = 0; e < t.length; e++) this.removeAttribute(t[e]); else for (e in t) t.hasOwnProperty(e) && this.removeAttribute(e);
            },
            removeStyle:function(t) {
                var e = this.$.style;
                if (e.removeProperty || "border" != t && "margin" != t && "padding" != t) e.removeProperty ? e.removeProperty(t) :e.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(t)), 
                this.$.style.cssText || this.removeAttribute("style"); else {
                    var i, n = [ "top", "left", "right", "bottom" ];
                    "border" == t && (i = [ "color", "style", "width" ]);
                    for (var e = [], o = 0; o < n.length; o++) if (i) for (var r = 0; r < i.length; r++) e.push([ t, n[o], i[r] ].join("-")); else e.push([ t, n[o] ].join("-"));
                    for (t = 0; t < e.length; t++) this.removeStyle(e[t]);
                }
            },
            setStyle:function(t, e) {
                return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(t)] = e, this;
            },
            setStyles:function(t) {
                for (var e in t) this.setStyle(e, t[e]);
                return this;
            },
            setOpacity:function(t) {
                CKEDITOR.env.ie && CKEDITOR.env.version < 9 ? (t = Math.round(100 * t), this.setStyle("filter", t >= 100 ? "" :"progid:DXImageTransform.Microsoft.Alpha(opacity=" + t + ")")) :this.setStyle("opacity", t);
            },
            unselectable:function() {
                if (this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select", "none")), CKEDITOR.env.ie || CKEDITOR.env.opera) {
                    this.setAttribute("unselectable", "on");
                    for (var t, e = this.getElementsByTag("*"), i = 0, n = e.count(); n > i; i++) t = e.getItem(i), 
                    t.setAttribute("unselectable", "on");
                }
            },
            getPositionedAncestor:function() {
                for (var t = this; "html" != t.getName(); ) {
                    if ("static" != t.getComputedStyle("position")) return t;
                    t = t.getParent();
                }
                return null;
            },
            getDocumentPosition:function(t) {
                var e = 0, i = 0, n = this.getDocument(), o = n.getBody(), r = "BackCompat" == n.$.compatMode;
                if (document.documentElement.getBoundingClientRect) {
                    var s = this.$.getBoundingClientRect(), a = n.$.documentElement, l = a.clientTop || o.$.clientTop || 0, c = a.clientLeft || o.$.clientLeft || 0, h = !0;
                    CKEDITOR.env.ie && (h = n.getDocumentElement().contains(this), n = n.getBody().contains(this), 
                    h = r && n || !r && h), h && (e = s.left + (!r && a.scrollLeft || o.$.scrollLeft), 
                    e -= c, i = s.top + (!r && a.scrollTop || o.$.scrollTop), i -= l);
                } else for (o = this, n = null; o && "body" != o.getName() && "html" != o.getName(); ) {
                    for (e += o.$.offsetLeft - o.$.scrollLeft, i += o.$.offsetTop - o.$.scrollTop, o.equals(this) || (e += o.$.clientLeft || 0, 
                    i += o.$.clientTop || 0); n && !n.equals(o); ) e -= n.$.scrollLeft, i -= n.$.scrollTop, 
                    n = n.getParent();
                    n = o, o = (s = o.$.offsetParent) ? new CKEDITOR.dom.element(s) :null;
                }
                return t && (o = this.getWindow(), n = t.getWindow(), !o.equals(n) && o.$.frameElement && (t = new CKEDITOR.dom.element(o.$.frameElement).getDocumentPosition(t), 
                e += t.x, i += t.y)), document.documentElement.getBoundingClientRect || !CKEDITOR.env.gecko || r || (e += this.$.clientLeft ? 1 :0, 
                i += this.$.clientTop ? 1 :0), {
                    x:e,
                    y:i
                };
            },
            scrollIntoView:function(t) {
                var e = this.getParent();
                if (e) do if ((e.$.clientWidth && e.$.clientWidth < e.$.scrollWidth || e.$.clientHeight && e.$.clientHeight < e.$.scrollHeight) && !e.is("body") && this.scrollIntoParent(e, t, 1), 
                e.is("html")) {
                    var i = e.getWindow();
                    try {
                        var n = i.$.frameElement;
                        n && (e = new CKEDITOR.dom.element(n));
                    } catch (o) {}
                } while (e = e.getParent());
            },
            scrollIntoParent:function(t, e, i) {
                function n(e, i) {
                    /body|html/.test(t.getName()) ? t.getWindow().$.scrollBy(e, i) :(t.$.scrollLeft = t.$.scrollLeft + e, 
                    t.$.scrollTop = t.$.scrollTop + i);
                }
                function o(t, e) {
                    var i = {
                        x:0,
                        y:0
                    };
                    if (!t.is(h ? "body" :"html")) {
                        var n = t.$.getBoundingClientRect();
                        i.x = n.left, i.y = n.top;
                    }
                    return n = t.getWindow(), n.equals(e) || (n = o(CKEDITOR.dom.element.get(n.$.frameElement), e), 
                    i.x = i.x + n.x, i.y = i.y + n.y), i;
                }
                function r(t, e) {
                    return parseInt(t.getComputedStyle("margin-" + e) || 0, 10) || 0;
                }
                var s, a, l, c;
                !t && (t = this.getWindow()), l = t.getDocument();
                var h = "BackCompat" == l.$.compatMode;
                t instanceof CKEDITOR.dom.window && (t = h ? l.getBody() :l.getDocumentElement()), 
                l = t.getWindow(), a = o(this, l);
                var u = o(t, l), d = this.$.offsetHeight;
                s = this.$.offsetWidth;
                var p = t.$.clientHeight, f = t.$.clientWidth;
                l = a.x - r(this, "left") - u.x || 0, c = a.y - r(this, "top") - u.y || 0, s = a.x + s + r(this, "right") - (u.x + f) || 0, 
                a = a.y + d + r(this, "bottom") - (u.y + p) || 0, (0 > c || a > 0) && n(0, e === !0 ? c :e === !1 ? a :0 > c ? c :a), 
                i && (0 > l || s > 0) && n(0 > l ? l :s, 0);
            },
            setState:function(t, e, i) {
                switch (e = e || "cke", t) {
                  case CKEDITOR.TRISTATE_ON:
                    this.addClass(e + "_on"), this.removeClass(e + "_off"), this.removeClass(e + "_disabled"), 
                    i && this.setAttribute("aria-pressed", !0), i && this.removeAttribute("aria-disabled");
                    break;

                  case CKEDITOR.TRISTATE_DISABLED:
                    this.addClass(e + "_disabled"), this.removeClass(e + "_off"), this.removeClass(e + "_on"), 
                    i && this.setAttribute("aria-disabled", !0), i && this.removeAttribute("aria-pressed");
                    break;

                  default:
                    this.addClass(e + "_off"), this.removeClass(e + "_on"), this.removeClass(e + "_disabled"), 
                    i && this.removeAttribute("aria-pressed"), i && this.removeAttribute("aria-disabled");
                }
            },
            getFrameDocument:function() {
                var t = this.$;
                try {
                    t.contentWindow.document;
                } catch (e) {
                    t.src = t.src;
                }
                return t && new CKEDITOR.dom.document(t.contentWindow.document);
            },
            copyAttributes:function(t, e) {
                for (var i = this.$.attributes, e = e || {}, n = 0; n < i.length; n++) {
                    var o, r = i[n], s = r.nodeName.toLowerCase();
                    s in e || ("checked" == s && (o = this.getAttribute(s)) ? t.setAttribute(s, o) :(r.specified || CKEDITOR.env.ie && r.nodeValue && "value" == s) && (o = this.getAttribute(s), 
                    null === o && (o = r.nodeValue), t.setAttribute(s, o)));
                }
                "" !== this.$.style.cssText && (t.$.style.cssText = this.$.style.cssText);
            },
            renameNode:function(t) {
                if (this.getName() != t) {
                    var e = this.getDocument(), t = new CKEDITOR.dom.element(t, e);
                    this.copyAttributes(t), this.moveChildren(t), this.getParent() && this.$.parentNode.replaceChild(t.$, this.$), 
                    t.$["data-cke-expando"] = this.$["data-cke-expando"], this.$ = t.$;
                }
            },
            getChild:function() {
                function t(t, e) {
                    var i = t.childNodes;
                    return e >= 0 && e < i.length ? i[e] :void 0;
                }
                return function(e) {
                    var i = this.$;
                    if (e.slice) for (;e.length > 0 && i; ) i = t(i, e.shift()); else i = t(i, e);
                    return i ? new CKEDITOR.dom.node(i) :null;
                };
            }(),
            getChildCount:function() {
                return this.$.childNodes.length;
            },
            disableContextMenu:function() {
                this.on("contextmenu", function(t) {
                    t.data.getTarget().hasClass("cke_enable_context_menu") || t.data.preventDefault();
                });
            },
            getDirection:function(t) {
                return t ? this.getComputedStyle("direction") || this.getDirection() || this.getParent() && this.getParent().getDirection(1) || this.getDocument().$.dir || "ltr" :this.getStyle("direction") || this.getAttribute("dir");
            },
            data:function(t, e) {
                return t = "data-" + t, void 0 === e ? this.getAttribute(t) :(e === !1 ? this.removeAttribute(t) :this.setAttribute(t, e), 
                null);
            },
            getEditor:function() {
                var t, e, i = CKEDITOR.instances;
                for (t in i) if (e = i[t], e.element.equals(this) && e.elementMode != CKEDITOR.ELEMENT_MODE_APPENDTO) return e;
                return null;
            }
        });
        var e = {
            width:[ "border-left-width", "border-right-width", "padding-left", "padding-right" ],
            height:[ "border-top-width", "border-bottom-width", "padding-top", "padding-bottom" ]
        };
        CKEDITOR.dom.element.prototype.setSize = function(e, i, n) {
            "number" == typeof i && (!n || CKEDITOR.env.ie && CKEDITOR.env.quirks || (i -= t.call(this, e)), 
            this.setStyle(e, i + "px"));
        }, CKEDITOR.dom.element.prototype.getSize = function(e, i) {
            var n = Math.max(this.$["offset" + CKEDITOR.tools.capitalize(e)], this.$["client" + CKEDITOR.tools.capitalize(e)]) || 0;
            return i && (n -= t.call(this, e)), n;
        };
    }(), CKEDITOR.dom.documentFragment = function(t) {
        t = t || CKEDITOR.document, this.$ = t.type == CKEDITOR.NODE_DOCUMENT ? t.$.createDocumentFragment() :t;
    }, CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype, CKEDITOR.dom.element.prototype, {
        type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,
        insertAfterNode:function(t) {
            t = t.$, t.parentNode.insertBefore(this.$, t.nextSibling);
        }
    }, !0, {
        append:1,
        appendBogus:1,
        getFirst:1,
        getLast:1,
        getParent:1,
        getNext:1,
        getPrevious:1,
        appendTo:1,
        moveChildren:1,
        insertBefore:1,
        insertAfterNode:1,
        replace:1,
        trim:1,
        type:1,
        ltrim:1,
        rtrim:1,
        getDocument:1,
        getChildCount:1,
        getChild:1,
        getChildren:1
    }), function() {
        function t(t, e) {
            var i = this.range;
            if (this._.end) return null;
            if (!this._.start) {
                if (this._.start = 1, i.collapsed) return this.end(), null;
                i.optimize();
            }
            var n, o = i.startContainer;
            n = i.endContainer;
            var r, s = i.startOffset, a = i.endOffset, l = this.guard, c = this.type, h = t ? "getPreviousSourceNode" :"getNextSourceNode";
            if (!t && !this._.guardLTR) {
                var u = n.type == CKEDITOR.NODE_ELEMENT ? n :n.getParent(), d = n.type == CKEDITOR.NODE_ELEMENT ? n.getChild(a) :n.getNext();
                this._.guardLTR = function(t, e) {
                    return !(e && u.equals(t) || d && t.equals(d) || t.type == CKEDITOR.NODE_ELEMENT && e && t.equals(i.root));
                };
            }
            if (t && !this._.guardRTL) {
                var p = o.type == CKEDITOR.NODE_ELEMENT ? o :o.getParent(), f = o.type == CKEDITOR.NODE_ELEMENT ? s ? o.getChild(s - 1) :null :o.getPrevious();
                this._.guardRTL = function(t, e) {
                    return !(e && p.equals(t) || f && t.equals(f) || t.type == CKEDITOR.NODE_ELEMENT && e && t.equals(i.root));
                };
            }
            var g = t ? this._.guardRTL :this._.guardLTR;
            for (r = l ? function(t, e) {
                return g(t, e) === !1 ? !1 :l(t, e);
            } :g, this.current ? n = this.current[h](!1, c, r) :(t ? n.type == CKEDITOR.NODE_ELEMENT && (n = a > 0 ? n.getChild(a - 1) :r(n, !0) === !1 ? null :n.getPreviousSourceNode(!0, c, r)) :(n = o, 
            n.type != CKEDITOR.NODE_ELEMENT || (n = n.getChild(s)) || (n = r(o, !0) === !1 ? null :o.getNextSourceNode(!0, c, r))), 
            n && r(n) === !1 && (n = null)); n && !this._.end; ) {
                if (this.current = n, this.evaluator && this.evaluator(n) === !1) {
                    if (e && this.evaluator) return !1;
                } else if (!e) return n;
                n = n[h](!1, c, r);
            }
            return this.end(), this.current = null;
        }
        function e(e) {
            for (var i, n = null; i = t.call(this, e); ) n = i;
            return n;
        }
        CKEDITOR.dom.walker = CKEDITOR.tools.createClass({
            $:function(t) {
                this.range = t, this._ = {};
            },
            proto:{
                end:function() {
                    this._.end = 1;
                },
                next:function() {
                    return t.call(this);
                },
                previous:function() {
                    return t.call(this, 1);
                },
                checkForward:function() {
                    return t.call(this, 0, 1) !== !1;
                },
                checkBackward:function() {
                    return t.call(this, 1, 1) !== !1;
                },
                lastForward:function() {
                    return e.call(this);
                },
                lastBackward:function() {
                    return e.call(this, 1);
                },
                reset:function() {
                    delete this.current, this._ = {};
                }
            }
        });
        var i = {
            block:1,
            "list-item":1,
            table:1,
            "table-row-group":1,
            "table-header-group":1,
            "table-footer-group":1,
            "table-row":1,
            "table-column-group":1,
            "table-column":1,
            "table-cell":1,
            "table-caption":1
        };
        CKEDITOR.dom.element.prototype.isBlockBoundary = function(t) {
            return t = t ? CKEDITOR.tools.extend({}, CKEDITOR.dtd.$block, t || {}) :CKEDITOR.dtd.$block, 
            "none" == this.getComputedStyle("float") && i[this.getComputedStyle("display")] || t[this.getName()];
        }, CKEDITOR.dom.walker.blockBoundary = function(t) {
            return function(e) {
                return !(e.type == CKEDITOR.NODE_ELEMENT && e.isBlockBoundary(t));
            };
        }, CKEDITOR.dom.walker.listItemBoundary = function() {
            return this.blockBoundary({
                br:1
            });
        }, CKEDITOR.dom.walker.bookmark = function(t, e) {
            function i(t) {
                return t && t.getName && "span" == t.getName() && t.data("cke-bookmark");
            }
            return function(n) {
                var o, r;
                return o = n && n.type != CKEDITOR.NODE_ELEMENT && (r = n.getParent()) && i(r), 
                o = t ? o :o || i(n), !!(e ^ o);
            };
        }, CKEDITOR.dom.walker.whitespaces = function(t) {
            return function(e) {
                var i;
                return e && e.type == CKEDITOR.NODE_TEXT && (i = !CKEDITOR.tools.trim(e.getText()) || CKEDITOR.env.webkit && "​" == e.getText()), 
                !!(t ^ i);
            };
        }, CKEDITOR.dom.walker.invisible = function(t) {
            var e = CKEDITOR.dom.walker.whitespaces();
            return function(i) {
                return e(i) ? i = 1 :(i.type == CKEDITOR.NODE_TEXT && (i = i.getParent()), i = !i.$.offsetHeight), 
                !!(t ^ i);
            };
        }, CKEDITOR.dom.walker.nodeType = function(t, e) {
            return function(i) {
                return !!(e ^ i.type == t);
            };
        }, CKEDITOR.dom.walker.bogus = function(t) {
            function e(t) {
                return !o(t) && !r(t);
            }
            return function(i) {
                var o = CKEDITOR.env.ie ? i.getText && n.test(i.getText()) :i.is && i.is("br");
                return o && (o = i.getParent(), i = i.getNext(e), o = o.isBlockBoundary() && (!i || i.type == CKEDITOR.NODE_ELEMENT && i.isBlockBoundary())), 
                !!(t ^ o);
            };
        };
        var n = /^[\t\r\n ]*(?:&nbsp;|\xa0)$/, o = CKEDITOR.dom.walker.whitespaces(), r = CKEDITOR.dom.walker.bookmark();
        CKEDITOR.dom.element.prototype.getBogus = function() {
            var t = this;
            do t = t.getPreviousSourceNode(); while (r(t) || o(t) || t.type == CKEDITOR.NODE_ELEMENT && t.getName() in CKEDITOR.dtd.$inline && !(t.getName() in CKEDITOR.dtd.$empty));
            return t && (CKEDITOR.env.ie ? t.getText && n.test(t.getText()) :t.is && t.is("br")) ? t :!1;
        };
    }(), CKEDITOR.dom.range = function(t) {
        this.endOffset = this.endContainer = this.startOffset = this.startContainer = null, 
        this.collapsed = !0;
        var e = t instanceof CKEDITOR.dom.document;
        this.document = e ? t :t.getDocument(), this.root = e ? t.getBody() :t;
    }, function() {
        function t() {
            var t = !1, e = CKEDITOR.dom.walker.whitespaces(), i = CKEDITOR.dom.walker.bookmark(!0), n = CKEDITOR.dom.walker.bogus();
            return function(o) {
                return i(o) || e(o) ? !0 :n(o) && !t ? t = !0 :o.type == CKEDITOR.NODE_TEXT && (o.hasAscendant("pre") || CKEDITOR.tools.trim(o.getText()).length) || o.type == CKEDITOR.NODE_ELEMENT && !o.is(r) ? !1 :!0;
            };
        }
        function e(t) {
            var e = CKEDITOR.dom.walker.whitespaces(), i = CKEDITOR.dom.walker.bookmark(1);
            return function(n) {
                return i(n) || e(n) ? !0 :!t && s(n) || n.type == CKEDITOR.NODE_ELEMENT && n.is(CKEDITOR.dtd.$removeEmpty);
            };
        }
        function i(t) {
            return !a(t) && !l(t);
        }
        var n = function(t) {
            t.collapsed = t.startContainer && t.endContainer && t.startContainer.equals(t.endContainer) && t.startOffset == t.endOffset;
        }, o = function(t, e, i, n) {
            t.optimizeBookmark();
            var o, r, s = t.startContainer, a = t.endContainer, l = t.startOffset, c = t.endOffset;
            a.type == CKEDITOR.NODE_TEXT ? a = a.split(c) :a.getChildCount() > 0 && (c >= a.getChildCount() ? (a = a.append(t.document.createText("")), 
            r = !0) :a = a.getChild(c)), s.type == CKEDITOR.NODE_TEXT ? (s.split(l), s.equals(a) && (a = s.getNext())) :l ? l >= s.getChildCount() ? (s = s.append(t.document.createText("")), 
            o = !0) :s = s.getChild(l).getPrevious() :(s = s.append(t.document.createText(""), 1), 
            o = !0);
            var h, u, d, l = s.getParents(), c = a.getParents();
            for (h = 0; h < l.length && (u = l[h], d = c[h], u.equals(d)); h++) ;
            for (var p, f, g, m = i, _ = h; _ < l.length; _++) {
                for (p = l[_], m && !p.equals(s) && (f = m.append(p.clone())), p = p.getNext(); p && (!p.equals(c[_]) && !p.equals(a)); ) g = p.getNext(), 
                2 == e ? m.append(p.clone(!0)) :(p.remove(), 1 == e && m.append(p)), p = g;
                m && (m = f);
            }
            for (m = i, i = h; i < c.length; i++) {
                if (p = c[i], e > 0 && !p.equals(a) && (f = m.append(p.clone())), !l[i] || p.$.parentNode != l[i].$.parentNode) for (p = p.getPrevious(); p && (!p.equals(l[i]) && !p.equals(s)); ) g = p.getPrevious(), 
                2 == e ? m.$.insertBefore(p.$.cloneNode(!0), m.$.firstChild) :(p.remove(), 1 == e && m.$.insertBefore(p.$, m.$.firstChild)), 
                p = g;
                m && (m = f);
            }
            2 == e ? (u = t.startContainer, u.type == CKEDITOR.NODE_TEXT && (u.$.data = u.$.data + u.$.nextSibling.data, 
            u.$.parentNode.removeChild(u.$.nextSibling)), t = t.endContainer, t.type == CKEDITOR.NODE_TEXT && t.$.nextSibling && (t.$.data = t.$.data + t.$.nextSibling.data, 
            t.$.parentNode.removeChild(t.$.nextSibling))) :(u && d && (s.$.parentNode != u.$.parentNode || a.$.parentNode != d.$.parentNode) && (e = d.getIndex(), 
            o && d.$.parentNode == s.$.parentNode && e--, n && u.type == CKEDITOR.NODE_ELEMENT ? (n = CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>', t.document), 
            n.insertAfter(u), u.mergeSiblings(!1), t.moveToBookmark({
                startNode:n
            })) :t.setStart(d.getParent(), e)), t.collapse(!0)), o && s.remove(), r && a.$.parentNode && a.remove();
        }, r = {
            abbr:1,
            acronym:1,
            b:1,
            bdo:1,
            big:1,
            cite:1,
            code:1,
            del:1,
            dfn:1,
            em:1,
            font:1,
            i:1,
            ins:1,
            label:1,
            kbd:1,
            q:1,
            samp:1,
            small:1,
            span:1,
            strike:1,
            strong:1,
            sub:1,
            sup:1,
            tt:1,
            u:1,
            "var":1
        }, s = CKEDITOR.dom.walker.bogus(), a = new CKEDITOR.dom.walker.whitespaces(), l = new CKEDITOR.dom.walker.bookmark(), c = /^[\t\r\n ]*(?:&nbsp;|\xa0)$/;
        CKEDITOR.dom.range.prototype = {
            clone:function() {
                var t = new CKEDITOR.dom.range(this.root);
                return t.startContainer = this.startContainer, t.startOffset = this.startOffset, 
                t.endContainer = this.endContainer, t.endOffset = this.endOffset, t.collapsed = this.collapsed, 
                t;
            },
            collapse:function(t) {
                t ? (this.endContainer = this.startContainer, this.endOffset = this.startOffset) :(this.startContainer = this.endContainer, 
                this.startOffset = this.endOffset), this.collapsed = !0;
            },
            cloneContents:function() {
                var t = new CKEDITOR.dom.documentFragment(this.document);
                return this.collapsed || o(this, 2, t), t;
            },
            deleteContents:function(t) {
                this.collapsed || o(this, 0, null, t);
            },
            extractContents:function(t) {
                var e = new CKEDITOR.dom.documentFragment(this.document);
                return this.collapsed || o(this, 1, e, t), e;
            },
            createBookmark:function(t) {
                var e, i, n, o, r = this.collapsed;
                return e = this.document.createElement("span"), e.data("cke-bookmark", 1), e.setStyle("display", "none"), 
                e.setHtml("&nbsp;"), t && (n = "cke_bm_" + CKEDITOR.tools.getNextNumber(), e.setAttribute("id", n + (r ? "C" :"S"))), 
                r || (i = e.clone(), i.setHtml("&nbsp;"), t && i.setAttribute("id", n + "E"), o = this.clone(), 
                o.collapse(), o.insertNode(i)), o = this.clone(), o.collapse(!0), o.insertNode(e), 
                i ? (this.setStartAfter(e), this.setEndBefore(i)) :this.moveToPosition(e, CKEDITOR.POSITION_AFTER_END), 
                {
                    startNode:t ? n + (r ? "C" :"S") :e,
                    endNode:t ? n + "E" :i,
                    serializable:t,
                    collapsed:r
                };
            },
            createBookmark2:function(t) {
                var e, i, n = this.startContainer, o = this.endContainer, r = this.startOffset, s = this.endOffset, a = this.collapsed;
                if (!n || !o) return {
                    start:0,
                    end:0
                };
                if (t) {
                    for (n.type == CKEDITOR.NODE_ELEMENT && ((e = n.getChild(r)) && e.type == CKEDITOR.NODE_TEXT && r > 0 && e.getPrevious().type == CKEDITOR.NODE_TEXT && (n = e, 
                    r = 0), e && e.type == CKEDITOR.NODE_ELEMENT && (r = e.getIndex(1))); n.type == CKEDITOR.NODE_TEXT && (i = n.getPrevious()) && i.type == CKEDITOR.NODE_TEXT; ) n = i, 
                    r += i.getLength();
                    if (!a) for (o.type == CKEDITOR.NODE_ELEMENT && ((e = o.getChild(s)) && e.type == CKEDITOR.NODE_TEXT && s > 0 && e.getPrevious().type == CKEDITOR.NODE_TEXT && (o = e, 
                    s = 0), e && e.type == CKEDITOR.NODE_ELEMENT && (s = e.getIndex(1))); o.type == CKEDITOR.NODE_TEXT && (i = o.getPrevious()) && i.type == CKEDITOR.NODE_TEXT; ) o = i, 
                    s += i.getLength();
                }
                return {
                    start:n.getAddress(t),
                    end:a ? null :o.getAddress(t),
                    startOffset:r,
                    endOffset:s,
                    normalized:t,
                    collapsed:a,
                    is2:!0
                };
            },
            moveToBookmark:function(t) {
                if (t.is2) {
                    var e = this.document.getByAddress(t.start, t.normalized), i = t.startOffset, n = t.end && this.document.getByAddress(t.end, t.normalized), t = t.endOffset;
                    this.setStart(e, i), n ? this.setEnd(n, t) :this.collapse(!0);
                } else e = (i = t.serializable) ? this.document.getById(t.startNode) :t.startNode, 
                t = i ? this.document.getById(t.endNode) :t.endNode, this.setStartBefore(e), e.remove(), 
                t ? (this.setEndBefore(t), t.remove()) :this.collapse(!0);
            },
            getBoundaryNodes:function() {
                var t, e = this.startContainer, i = this.endContainer, n = this.startOffset, o = this.endOffset;
                if (e.type == CKEDITOR.NODE_ELEMENT) if (t = e.getChildCount(), t > n) e = e.getChild(n); else if (1 > t) e = e.getPreviousSourceNode(); else {
                    for (e = e.$; e.lastChild; ) e = e.lastChild;
                    e = new CKEDITOR.dom.node(e), e = e.getNextSourceNode() || e;
                }
                if (i.type == CKEDITOR.NODE_ELEMENT) if (t = i.getChildCount(), t > o) i = i.getChild(o).getPreviousSourceNode(!0); else if (1 > t) i = i.getPreviousSourceNode(); else {
                    for (i = i.$; i.lastChild; ) i = i.lastChild;
                    i = new CKEDITOR.dom.node(i);
                }
                return e.getPosition(i) & CKEDITOR.POSITION_FOLLOWING && (e = i), {
                    startNode:e,
                    endNode:i
                };
            },
            getCommonAncestor:function(t, e) {
                var i = this.startContainer, n = this.endContainer, i = i.equals(n) ? t && i.type == CKEDITOR.NODE_ELEMENT && this.startOffset == this.endOffset - 1 ? i.getChild(this.startOffset) :i :i.getCommonAncestor(n);
                return e && !i.is ? i.getParent() :i;
            },
            optimize:function() {
                var t = this.startContainer, e = this.startOffset;
                t.type != CKEDITOR.NODE_ELEMENT && (e ? e >= t.getLength() && this.setStartAfter(t) :this.setStartBefore(t)), 
                t = this.endContainer, e = this.endOffset, t.type != CKEDITOR.NODE_ELEMENT && (e ? e >= t.getLength() && this.setEndAfter(t) :this.setEndBefore(t));
            },
            optimizeBookmark:function() {
                var t = this.startContainer, e = this.endContainer;
                t.is && t.is("span") && t.data("cke-bookmark") && this.setStartAt(t, CKEDITOR.POSITION_BEFORE_START), 
                e && e.is && e.is("span") && e.data("cke-bookmark") && this.setEndAt(e, CKEDITOR.POSITION_AFTER_END);
            },
            trim:function(t, e) {
                var i = this.startContainer, n = this.startOffset, o = this.collapsed;
                if ((!t || o) && i && i.type == CKEDITOR.NODE_TEXT) {
                    if (n) if (n >= i.getLength()) n = i.getIndex() + 1, i = i.getParent(); else {
                        var r = i.split(n), n = i.getIndex() + 1, i = i.getParent();
                        this.startContainer.equals(this.endContainer) ? this.setEnd(r, this.endOffset - this.startOffset) :i.equals(this.endContainer) && (this.endOffset = this.endOffset + 1);
                    } else n = i.getIndex(), i = i.getParent();
                    if (this.setStart(i, n), o) return this.collapse(!0), void 0;
                }
                i = this.endContainer, n = this.endOffset, e || o || !i || i.type != CKEDITOR.NODE_TEXT || (n ? (n >= i.getLength() || i.split(n), 
                n = i.getIndex() + 1) :n = i.getIndex(), i = i.getParent(), this.setEnd(i, n));
            },
            enlarge:function(t, e) {
                switch (t) {
                  case CKEDITOR.ENLARGE_INLINE:
                    var i = 1;

                  case CKEDITOR.ENLARGE_ELEMENT:
                    if (this.collapsed) break;
                    var n, o, r, s, a, l, c, h = this.getCommonAncestor(), u = this.root, d = !1;
                    for (l = this.startContainer, c = this.startOffset, l.type == CKEDITOR.NODE_TEXT ? (c && (l = !CKEDITOR.tools.trim(l.substring(0, c)).length && l, 
                    d = !!l), l && !(s = l.getPrevious()) && (r = l.getParent())) :(c && (s = l.getChild(c - 1) || l.getLast()), 
                    s || (r = l)); r || s; ) {
                        if (r && !s) {
                            if (!a && r.equals(h) && (a = !0), i ? r.isBlockBoundary() :!u.contains(r)) break;
                            d && "inline" == r.getComputedStyle("display") || (d = !1, a ? n = r :this.setStartBefore(r)), 
                            s = r.getPrevious();
                        }
                        for (;s; ) if (l = !1, s.type == CKEDITOR.NODE_COMMENT) s = s.getPrevious(); else {
                            if (s.type == CKEDITOR.NODE_TEXT) c = s.getText(), /[^\s\ufeff]/.test(c) && (s = null), 
                            l = /[\s\ufeff]$/.test(c); else if ((s.$.offsetWidth > 0 || e && s.is("br")) && !s.data("cke-bookmark")) if (d && CKEDITOR.dtd.$removeEmpty[s.getName()]) {
                                if (c = s.getText(), /[^\s\ufeff]/.test(c)) s = null; else for (var p, f = s.$.getElementsByTagName("*"), g = 0; p = f[g++]; ) if (!CKEDITOR.dtd.$removeEmpty[p.nodeName.toLowerCase()]) {
                                    s = null;
                                    break;
                                }
                                s && (l = !!c.length);
                            } else s = null;
                            if (l && (d ? a ? n = r :r && this.setStartBefore(r) :d = !0), s) {
                                if (l = s.getPrevious(), !r && !l) {
                                    r = s, s = null;
                                    break;
                                }
                                s = l;
                            } else r = null;
                        }
                        r && (r = r.getParent());
                    }
                    for (l = this.endContainer, c = this.endOffset, r = s = null, a = d = !1, l.type == CKEDITOR.NODE_TEXT ? (l = !CKEDITOR.tools.trim(l.substring(c)).length && l, 
                    d = !(l && l.getLength()), l && !(s = l.getNext()) && (r = l.getParent())) :(s = l.getChild(c)) || (r = l); r || s; ) {
                        if (r && !s) {
                            if (!a && r.equals(h) && (a = !0), i ? r.isBlockBoundary() :!u.contains(r)) break;
                            d && "inline" == r.getComputedStyle("display") || (d = !1, a ? o = r :r && this.setEndAfter(r)), 
                            s = r.getNext();
                        }
                        for (;s; ) {
                            if (l = !1, s.type == CKEDITOR.NODE_TEXT) c = s.getText(), /[^\s\ufeff]/.test(c) && (s = null), 
                            l = /^[\s\ufeff]/.test(c); else if (s.type == CKEDITOR.NODE_ELEMENT) {
                                if ((s.$.offsetWidth > 0 || e && s.is("br")) && !s.data("cke-bookmark")) if (d && CKEDITOR.dtd.$removeEmpty[s.getName()]) {
                                    if (c = s.getText(), /[^\s\ufeff]/.test(c)) s = null; else for (f = s.$.getElementsByTagName("*"), 
                                    g = 0; p = f[g++]; ) if (!CKEDITOR.dtd.$removeEmpty[p.nodeName.toLowerCase()]) {
                                        s = null;
                                        break;
                                    }
                                    s && (l = !!c.length);
                                } else s = null;
                            } else l = 1;
                            if (l && d && (a ? o = r :this.setEndAfter(r)), s) {
                                if (l = s.getNext(), !r && !l) {
                                    r = s, s = null;
                                    break;
                                }
                                s = l;
                            } else r = null;
                        }
                        r && (r = r.getParent());
                    }
                    n && o && (h = n.contains(o) ? o :n, this.setStartBefore(h), this.setEndAfter(h));
                    break;

                  case CKEDITOR.ENLARGE_BLOCK_CONTENTS:
                  case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:
                    r = new CKEDITOR.dom.range(this.root), u = this.root, r.setStartAt(u, CKEDITOR.POSITION_AFTER_START), 
                    r.setEnd(this.startContainer, this.startOffset), r = new CKEDITOR.dom.walker(r);
                    var m, _, v = CKEDITOR.dom.walker.blockBoundary(t == CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS ? {
                        br:1
                    } :null), y = function(t) {
                        var e = v(t);
                        return e || (m = t), e;
                    }, i = function(t) {
                        var e = y(t);
                        return !e && t.is && t.is("br") && (_ = t), e;
                    };
                    if (r.guard = y, r = r.lastBackward(), m = m || u, this.setStartAt(m, !m.is("br") && (!r && this.checkStartOfBlock() || r && m.contains(r)) ? CKEDITOR.POSITION_AFTER_START :CKEDITOR.POSITION_AFTER_END), 
                    t == CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS) {
                        r = this.clone(), r = new CKEDITOR.dom.walker(r);
                        var b = CKEDITOR.dom.walker.whitespaces(), w = CKEDITOR.dom.walker.bookmark();
                        if (r.evaluator = function(t) {
                            return !b(t) && !w(t);
                        }, (r = r.previous()) && r.type == CKEDITOR.NODE_ELEMENT && r.is("br")) break;
                    }
                    r = this.clone(), r.collapse(), r.setEndAt(u, CKEDITOR.POSITION_BEFORE_END), r = new CKEDITOR.dom.walker(r), 
                    r.guard = t == CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS ? i :y, m = null, r = r.lastForward(), 
                    m = m || u, this.setEndAt(m, !r && this.checkEndOfBlock() || r && m.contains(r) ? CKEDITOR.POSITION_BEFORE_END :CKEDITOR.POSITION_BEFORE_START), 
                    _ && this.setEndAfter(_);
                }
            },
            shrink:function(t, e, i) {
                if (!this.collapsed) {
                    var t = t || CKEDITOR.SHRINK_TEXT, n = this.clone(), o = this.startContainer, r = this.endContainer, s = this.startOffset, a = this.endOffset, l = 1, c = 1;
                    o && o.type == CKEDITOR.NODE_TEXT && (s ? s >= o.getLength() ? n.setStartAfter(o) :(n.setStartBefore(o), 
                    l = 0) :n.setStartBefore(o)), r && r.type == CKEDITOR.NODE_TEXT && (a ? a >= r.getLength() ? n.setEndAfter(r) :(n.setEndAfter(r), 
                    c = 0) :n.setEndBefore(r));
                    var n = new CKEDITOR.dom.walker(n), h = CKEDITOR.dom.walker.bookmark();
                    n.evaluator = function(e) {
                        return e.type == (t == CKEDITOR.SHRINK_ELEMENT ? CKEDITOR.NODE_ELEMENT :CKEDITOR.NODE_TEXT);
                    };
                    var u;
                    return n.guard = function(e, n) {
                        return h(e) ? !0 :t == CKEDITOR.SHRINK_ELEMENT && e.type == CKEDITOR.NODE_TEXT || n && e.equals(u) || i === !1 && e.type == CKEDITOR.NODE_ELEMENT && e.isBlockBoundary() ? !1 :(!n && e.type == CKEDITOR.NODE_ELEMENT && (u = e), 
                        !0);
                    }, l && (o = n[t == CKEDITOR.SHRINK_ELEMENT ? "lastForward" :"next"]()) && this.setStartAt(o, e ? CKEDITOR.POSITION_AFTER_START :CKEDITOR.POSITION_BEFORE_START), 
                    c && (n.reset(), (n = n[t == CKEDITOR.SHRINK_ELEMENT ? "lastBackward" :"previous"]()) && this.setEndAt(n, e ? CKEDITOR.POSITION_BEFORE_END :CKEDITOR.POSITION_AFTER_END)), 
                    !(!l && !c);
                }
            },
            insertNode:function(t) {
                this.optimizeBookmark(), this.trim(!1, !0);
                var e = this.startContainer, i = e.getChild(this.startOffset);
                i ? t.insertBefore(i) :e.append(t), t.getParent() && t.getParent().equals(this.endContainer) && this.endOffset++, 
                this.setStartBefore(t);
            },
            moveToPosition:function(t, e) {
                this.setStartAt(t, e), this.collapse(!0);
            },
            moveToRange:function(t) {
                this.setStart(t.startContainer, t.startOffset), this.setEnd(t.endContainer, t.endOffset);
            },
            selectNodeContents:function(t) {
                this.setStart(t, 0), this.setEnd(t, t.type == CKEDITOR.NODE_TEXT ? t.getLength() :t.getChildCount());
            },
            setStart:function(t, e) {
                t.type == CKEDITOR.NODE_ELEMENT && CKEDITOR.dtd.$empty[t.getName()] && (e = t.getIndex(), 
                t = t.getParent()), this.startContainer = t, this.startOffset = e, this.endContainer || (this.endContainer = t, 
                this.endOffset = e), n(this);
            },
            setEnd:function(t, e) {
                t.type == CKEDITOR.NODE_ELEMENT && CKEDITOR.dtd.$empty[t.getName()] && (e = t.getIndex() + 1, 
                t = t.getParent()), this.endContainer = t, this.endOffset = e, this.startContainer || (this.startContainer = t, 
                this.startOffset = e), n(this);
            },
            setStartAfter:function(t) {
                this.setStart(t.getParent(), t.getIndex() + 1);
            },
            setStartBefore:function(t) {
                this.setStart(t.getParent(), t.getIndex());
            },
            setEndAfter:function(t) {
                this.setEnd(t.getParent(), t.getIndex() + 1);
            },
            setEndBefore:function(t) {
                this.setEnd(t.getParent(), t.getIndex());
            },
            setStartAt:function(t, e) {
                switch (e) {
                  case CKEDITOR.POSITION_AFTER_START:
                    this.setStart(t, 0);
                    break;

                  case CKEDITOR.POSITION_BEFORE_END:
                    t.type == CKEDITOR.NODE_TEXT ? this.setStart(t, t.getLength()) :this.setStart(t, t.getChildCount());
                    break;

                  case CKEDITOR.POSITION_BEFORE_START:
                    this.setStartBefore(t);
                    break;

                  case CKEDITOR.POSITION_AFTER_END:
                    this.setStartAfter(t);
                }
                n(this);
            },
            setEndAt:function(t, e) {
                switch (e) {
                  case CKEDITOR.POSITION_AFTER_START:
                    this.setEnd(t, 0);
                    break;

                  case CKEDITOR.POSITION_BEFORE_END:
                    t.type == CKEDITOR.NODE_TEXT ? this.setEnd(t, t.getLength()) :this.setEnd(t, t.getChildCount());
                    break;

                  case CKEDITOR.POSITION_BEFORE_START:
                    this.setEndBefore(t);
                    break;

                  case CKEDITOR.POSITION_AFTER_END:
                    this.setEndAfter(t);
                }
                n(this);
            },
            fixBlock:function(t, e) {
                var i = this.createBookmark(), n = this.document.createElement(e);
                return this.collapse(t), this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS), this.extractContents().appendTo(n), 
                n.trim(), CKEDITOR.env.ie || n.appendBogus(), this.insertNode(n), this.moveToBookmark(i), 
                n;
            },
            splitBlock:function(t) {
                var e = new CKEDITOR.dom.elementPath(this.startContainer, this.root), i = new CKEDITOR.dom.elementPath(this.endContainer, this.root), n = e.block, o = i.block, r = null;
                return e.blockLimit.equals(i.blockLimit) ? ("br" != t && (n || (n = this.fixBlock(!0, t), 
                o = new CKEDITOR.dom.elementPath(this.endContainer, this.root).block), o || (o = this.fixBlock(!1, t))), 
                t = n && this.checkStartOfBlock(), e = o && this.checkEndOfBlock(), this.deleteContents(), 
                n && n.equals(o) && (e ? (r = new CKEDITOR.dom.elementPath(this.startContainer, this.root), 
                this.moveToPosition(o, CKEDITOR.POSITION_AFTER_END), o = null) :t ? (r = new CKEDITOR.dom.elementPath(this.startContainer, this.root), 
                this.moveToPosition(n, CKEDITOR.POSITION_BEFORE_START), n = null) :(o = this.splitElement(n), 
                !CKEDITOR.env.ie && !n.is("ul", "ol") && n.appendBogus())), {
                    previousBlock:n,
                    nextBlock:o,
                    wasStartOfBlock:t,
                    wasEndOfBlock:e,
                    elementPath:r
                }) :null;
            },
            splitElement:function(t) {
                if (!this.collapsed) return null;
                this.setEndAt(t, CKEDITOR.POSITION_BEFORE_END);
                var e = this.extractContents(), i = t.clone(!1);
                return e.appendTo(i), i.insertAfter(t), this.moveToPosition(t, CKEDITOR.POSITION_AFTER_END), 
                i;
            },
            removeEmptyBlocksAtEnd:function() {
                function t(t) {
                    return function(n) {
                        return e(n) || i(n) || n.type == CKEDITOR.NODE_ELEMENT && n.isEmptyInlineRemoveable() || t.is("table") && n.is("caption") ? !1 :!0;
                    };
                }
                var e = CKEDITOR.dom.walker.whitespaces(), i = CKEDITOR.dom.walker.bookmark(!1);
                return function(e) {
                    for (var i, n = this.createBookmark(), o = this[e ? "endPath" :"startPath"](), r = o.block || o.blockLimit; r && !r.equals(o.root) && !r.getFirst(t(r)); ) i = r.getParent(), 
                    this[e ? "setEndAt" :"setStartAt"](r, CKEDITOR.POSITION_AFTER_END), r.remove(1), 
                    r = i;
                    this.moveToBookmark(n);
                };
            }(),
            startPath:function() {
                return new CKEDITOR.dom.elementPath(this.startContainer, this.root);
            },
            endPath:function() {
                return new CKEDITOR.dom.elementPath(this.endContainer, this.root);
            },
            checkBoundaryOfElement:function(t, i) {
                var n = i == CKEDITOR.START, o = this.clone();
                return o.collapse(n), o[n ? "setStartAt" :"setEndAt"](t, n ? CKEDITOR.POSITION_AFTER_START :CKEDITOR.POSITION_BEFORE_END), 
                o = new CKEDITOR.dom.walker(o), o.evaluator = e(n), o[n ? "checkBackward" :"checkForward"]();
            },
            checkStartOfBlock:function() {
                var e = this.startContainer, i = this.startOffset;
                return CKEDITOR.env.ie && i && e.type == CKEDITOR.NODE_TEXT && (e = CKEDITOR.tools.ltrim(e.substring(0, i)), 
                c.test(e) && this.trim(0, 1)), this.trim(), e = new CKEDITOR.dom.elementPath(this.startContainer, this.root), 
                i = this.clone(), i.collapse(!0), i.setStartAt(e.block || e.blockLimit, CKEDITOR.POSITION_AFTER_START), 
                e = new CKEDITOR.dom.walker(i), e.evaluator = t(), e.checkBackward();
            },
            checkEndOfBlock:function() {
                var e = this.endContainer, i = this.endOffset;
                return CKEDITOR.env.ie && e.type == CKEDITOR.NODE_TEXT && (e = CKEDITOR.tools.rtrim(e.substring(i)), 
                c.test(e) && this.trim(1, 0)), this.trim(), e = new CKEDITOR.dom.elementPath(this.endContainer, this.root), 
                i = this.clone(), i.collapse(!1), i.setEndAt(e.block || e.blockLimit, CKEDITOR.POSITION_BEFORE_END), 
                e = new CKEDITOR.dom.walker(i), e.evaluator = t(), e.checkForward();
            },
            getPreviousNode:function(t, e, i) {
                var n = this.clone();
                return n.collapse(1), n.setStartAt(i || this.root, CKEDITOR.POSITION_AFTER_START), 
                i = new CKEDITOR.dom.walker(n), i.evaluator = t, i.guard = e, i.previous();
            },
            getNextNode:function(t, e, i) {
                var n = this.clone();
                return n.collapse(), n.setEndAt(i || this.root, CKEDITOR.POSITION_BEFORE_END), i = new CKEDITOR.dom.walker(n), 
                i.evaluator = t, i.guard = e, i.next();
            },
            checkReadOnly:function() {
                function t(t, e) {
                    for (;t; ) {
                        if (t.type == CKEDITOR.NODE_ELEMENT) {
                            if ("false" == t.getAttribute("contentEditable") && !t.data("cke-editable")) return 0;
                            if (t.is("html") || "true" == t.getAttribute("contentEditable") && (t.contains(e) || t.equals(e))) break;
                        }
                        t = t.getParent();
                    }
                    return 1;
                }
                return function() {
                    var e = this.startContainer, i = this.endContainer;
                    return !(t(e, i) && t(i, e));
                };
            }(),
            moveToElementEditablePosition:function(t, e) {
                if (t.type == CKEDITOR.NODE_ELEMENT && !t.isEditable(!1)) return this.moveToPosition(t, e ? CKEDITOR.POSITION_AFTER_END :CKEDITOR.POSITION_BEFORE_START), 
                !0;
                for (var n = 0; t; ) {
                    if (t.type == CKEDITOR.NODE_TEXT) {
                        e && this.checkEndOfBlock() && c.test(t.getText()) ? this.moveToPosition(t, CKEDITOR.POSITION_BEFORE_START) :this.moveToPosition(t, e ? CKEDITOR.POSITION_AFTER_END :CKEDITOR.POSITION_BEFORE_START), 
                        n = 1;
                        break;
                    }
                    t.type == CKEDITOR.NODE_ELEMENT && (t.isEditable() ? (this.moveToPosition(t, e ? CKEDITOR.POSITION_BEFORE_END :CKEDITOR.POSITION_AFTER_START), 
                    n = 1) :e && t.is("br") && this.checkEndOfBlock() && this.moveToPosition(t, CKEDITOR.POSITION_BEFORE_START));
                    var o = t, r = n, s = void 0;
                    o.type == CKEDITOR.NODE_ELEMENT && o.isEditable(!1) && (s = o[e ? "getLast" :"getFirst"](i)), 
                    !r && !s && (s = o[e ? "getPrevious" :"getNext"](i)), t = s;
                }
                return !!n;
            },
            moveToElementEditStart:function(t) {
                return this.moveToElementEditablePosition(t);
            },
            moveToElementEditEnd:function(t) {
                return this.moveToElementEditablePosition(t, !0);
            },
            getEnclosedNode:function() {
                var t = this.clone();
                if (t.optimize(), t.startContainer.type != CKEDITOR.NODE_ELEMENT || t.endContainer.type != CKEDITOR.NODE_ELEMENT) return null;
                var t = new CKEDITOR.dom.walker(t), e = CKEDITOR.dom.walker.bookmark(!1, !0), i = CKEDITOR.dom.walker.whitespaces(!0);
                t.evaluator = function(t) {
                    return i(t) && e(t);
                };
                var n = t.next();
                return t.reset(), n && n.equals(t.previous()) ? n :null;
            },
            getTouchedStartNode:function() {
                var t = this.startContainer;
                return this.collapsed || t.type != CKEDITOR.NODE_ELEMENT ? t :t.getChild(this.startOffset) || t;
            },
            getTouchedEndNode:function() {
                var t = this.endContainer;
                return this.collapsed || t.type != CKEDITOR.NODE_ELEMENT ? t :t.getChild(this.endOffset - 1) || t;
            },
            scrollIntoView:function() {
                var t, e, i, n = new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>", this.document), o = this.clone();
                o.optimize(), (i = o.startContainer.type == CKEDITOR.NODE_TEXT) ? (e = o.startContainer.getText(), 
                t = o.startContainer.split(o.startOffset), n.insertAfter(o.startContainer)) :o.insertNode(n), 
                n.scrollIntoView(), i && (o.startContainer.setText(e), t.remove()), n.remove();
            }
        };
    }(), CKEDITOR.POSITION_AFTER_START = 1, CKEDITOR.POSITION_BEFORE_END = 2, CKEDITOR.POSITION_BEFORE_START = 3, 
    CKEDITOR.POSITION_AFTER_END = 4, CKEDITOR.ENLARGE_ELEMENT = 1, CKEDITOR.ENLARGE_BLOCK_CONTENTS = 2, 
    CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS = 3, CKEDITOR.ENLARGE_INLINE = 4, CKEDITOR.START = 1, 
    CKEDITOR.END = 2, CKEDITOR.SHRINK_ELEMENT = 1, CKEDITOR.SHRINK_TEXT = 2, function() {
        function t(t) {
            arguments.length < 1 || (this.range = t, this.forceBrBreak = 0, this.enlargeBr = 1, 
            this.enforceRealBlocks = 0, this._ || (this._ = {}));
        }
        function e(t, e, i) {
            for (t = t.getNextSourceNode(e, null, i); !n(t); ) t = t.getNextSourceNode(e, null, i);
            return t;
        }
        var i = /^[\r\n\t ]+$/, n = CKEDITOR.dom.walker.bookmark(!1, !0), o = CKEDITOR.dom.walker.whitespaces(!0), r = function(t) {
            return n(t) && o(t);
        };
        t.prototype = {
            getNextParagraph:function(t) {
                if (t = t || "p", !CKEDITOR.dtd[this.range.root.getName()][t]) return null;
                var o, s, a, l, c, h;
                if (!this._.started) {
                    if (s = this.range.clone(), s.shrink(CKEDITOR.NODE_ELEMENT, !0), l = s.endContainer.hasAscendant("pre", !0) || s.startContainer.hasAscendant("pre", !0), 
                    s.enlarge(this.forceBrBreak && !l || !this.enlargeBr ? CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS :CKEDITOR.ENLARGE_BLOCK_CONTENTS), 
                    !s.collapsed) {
                        l = new CKEDITOR.dom.walker(s.clone());
                        var u = CKEDITOR.dom.walker.bookmark(!0, !0);
                        l.evaluator = u, this._.nextNode = l.next(), l = new CKEDITOR.dom.walker(s.clone()), 
                        l.evaluator = u, l = l.previous(), this._.lastNode = l.getNextSourceNode(!0), this._.lastNode && this._.lastNode.type == CKEDITOR.NODE_TEXT && !CKEDITOR.tools.trim(this._.lastNode.getText()) && this._.lastNode.getParent().isBlockBoundary() && (u = this.range.clone(), 
                        u.moveToPosition(this._.lastNode, CKEDITOR.POSITION_AFTER_END), u.checkEndOfBlock() && (u = new CKEDITOR.dom.elementPath(u.endContainer, u.root), 
                        this._.lastNode = (u.block || u.blockLimit).getNextSourceNode(!0))), this._.lastNode || (this._.lastNode = this._.docEndMarker = s.document.createText(""), 
                        this._.lastNode.insertAfter(l)), s = null;
                    }
                    this._.started = 1;
                }
                for (u = this._.nextNode, l = this._.lastNode, this._.nextNode = null; u; ) {
                    var d = 0, p = u.hasAscendant("pre"), f = u.type != CKEDITOR.NODE_ELEMENT, g = 0;
                    if (f) u.type == CKEDITOR.NODE_TEXT && i.test(u.getText()) && (f = 0); else {
                        var m = u.getName();
                        if (u.isBlockBoundary(this.forceBrBreak && !p && {
                            br:1
                        })) {
                            if ("br" == m) f = 1; else if (!s && !u.getChildCount() && "hr" != m) {
                                o = u, a = u.equals(l);
                                break;
                            }
                            s && (s.setEndAt(u, CKEDITOR.POSITION_BEFORE_START), "br" != m && (this._.nextNode = u)), 
                            d = 1;
                        } else {
                            if (u.getFirst()) {
                                s || (s = this.range.clone(), s.setStartAt(u, CKEDITOR.POSITION_BEFORE_START)), 
                                u = u.getFirst();
                                continue;
                            }
                            f = 1;
                        }
                    }
                    if (f && !s && (s = this.range.clone(), s.setStartAt(u, CKEDITOR.POSITION_BEFORE_START)), 
                    a = (!d || f) && u.equals(l), s && !d) for (;!u.getNext(r) && !a; ) {
                        if (m = u.getParent(), m.isBlockBoundary(this.forceBrBreak && !p && {
                            br:1
                        })) {
                            d = 1, f = 0, a || m.equals(l), s.setEndAt(m, CKEDITOR.POSITION_BEFORE_END);
                            break;
                        }
                        u = m, f = 1, a = u.equals(l), g = 1;
                    }
                    if (f && s.setEndAt(u, CKEDITOR.POSITION_AFTER_END), u = e(u, g, l), (a = !u) || d && s) break;
                }
                if (!o) {
                    if (!s) return this._.docEndMarker && this._.docEndMarker.remove(), this._.nextNode = null;
                    o = new CKEDITOR.dom.elementPath(s.startContainer, s.root), u = o.blockLimit, d = {
                        div:1,
                        th:1,
                        td:1
                    }, o = o.block, !o && u && !this.enforceRealBlocks && d[u.getName()] && s.checkStartOfBlock() && s.checkEndOfBlock() && !u.equals(s.root) ? o = u :!o || this.enforceRealBlocks && "li" == o.getName() ? (o = this.range.document.createElement(t), 
                    s.extractContents().appendTo(o), o.trim(), s.insertNode(o), c = h = !0) :"li" != o.getName() ? s.checkStartOfBlock() && s.checkEndOfBlock() || (o = o.clone(!1), 
                    s.extractContents().appendTo(o), o.trim(), h = s.splitBlock(), c = !h.wasStartOfBlock, 
                    h = !h.wasEndOfBlock, s.insertNode(o)) :a || (this._.nextNode = o.equals(l) ? null :e(s.getBoundaryNodes().endNode, 1, l));
                }
                return c && (s = o.getPrevious()) && s.type == CKEDITOR.NODE_ELEMENT && ("br" == s.getName() ? s.remove() :s.getLast() && "br" == s.getLast().$.nodeName.toLowerCase() && s.getLast().remove()), 
                h && (s = o.getLast()) && s.type == CKEDITOR.NODE_ELEMENT && "br" == s.getName() && (CKEDITOR.env.ie || s.getPrevious(n) || s.getNext(n)) && s.remove(), 
                this._.nextNode || (this._.nextNode = a || o.equals(l) || !l ? null :e(o, 1, l)), 
                o;
            }
        }, CKEDITOR.dom.range.prototype.createIterator = function() {
            return new t(this);
        };
    }(), CKEDITOR.command = function(t, e) {
        this.uiItems = [], this.exec = function(i) {
            return this.state == CKEDITOR.TRISTATE_DISABLED ? !1 :(this.editorFocus && t.focus(), 
            this.fire("exec") === !1 ? !0 :e.exec.call(this, t, i) !== !1);
        }, this.refresh = function(t, i) {
            return !this.readOnly && t.readOnly ? !0 :this.context && !i.isContextFor(this.context) ? (this.disable(), 
            !0) :(this.enable(), this.fire("refresh", {
                editor:t,
                path:i
            }) === !1 ? !0 :e.refresh && e.refresh.apply(this, arguments) !== !1);
        }, CKEDITOR.tools.extend(this, e, {
            modes:{
                wysiwyg:1
            },
            editorFocus:1,
            contextSensitive:!!e.context,
            state:CKEDITOR.TRISTATE_OFF
        }), CKEDITOR.event.call(this);
    }, CKEDITOR.command.prototype = {
        enable:function() {
            this.state == CKEDITOR.TRISTATE_DISABLED && this.setState(this.preserveState && "undefined" != typeof this.previousState ? this.previousState :CKEDITOR.TRISTATE_OFF);
        },
        disable:function() {
            this.setState(CKEDITOR.TRISTATE_DISABLED);
        },
        setState:function(t) {
            return this.state == t ? !1 :(this.previousState = this.state, this.state = t, this.fire("state"), 
            !0);
        },
        toggleState:function() {
            this.state == CKEDITOR.TRISTATE_OFF ? this.setState(CKEDITOR.TRISTATE_ON) :this.state == CKEDITOR.TRISTATE_ON && this.setState(CKEDITOR.TRISTATE_OFF);
        }
    }, CKEDITOR.event.implementOn(CKEDITOR.command.prototype), CKEDITOR.ENTER_P = 1, 
    CKEDITOR.ENTER_BR = 2, CKEDITOR.ENTER_DIV = 3, CKEDITOR.config = {
        customConfig:"config.js",
        autoUpdateElement:!0,
        language:"",
        defaultLanguage:"en",
        contentsLangDirection:"",
        enterMode:CKEDITOR.ENTER_P,
        forceEnterMode:!1,
        shiftEnterMode:CKEDITOR.ENTER_BR,
        docType:"<!DOCTYPE html>",
        bodyId:"",
        bodyClass:"",
        fullPage:!1,
        height:200,
        extraPlugins:"",
        removePlugins:"",
        protectedSource:[],
        tabIndex:0,
        width:"",
        baseFloatZIndex:1e4,
        blockedKeystrokes:[ CKEDITOR.CTRL + 66, CKEDITOR.CTRL + 73, CKEDITOR.CTRL + 85 ]
    }, function() {
        CKEDITOR.focusManager = function(t) {
            return t.focusManager ? t.focusManager :(this.hasFocus = !1, this.currentActive = null, 
            this._ = {
                editor:t
            }, this);
        }, CKEDITOR.focusManager._ = {
            blurDelay:200
        }, CKEDITOR.focusManager.prototype = {
            focus:function() {
                if (this._.timer && clearTimeout(this._.timer), !this.hasFocus && !this._.locked) {
                    var t = CKEDITOR.currentInstance;
                    t && t.focusManager.blur(1), this.hasFocus = !0, (t = this._.editor.container) && t.addClass("cke_focus"), 
                    this._.editor.fire("focus");
                }
            },
            lock:function() {
                this._.locked = 1;
            },
            unlock:function() {
                delete this._.locked;
            },
            blur:function(t) {
                function e() {
                    if (this.hasFocus) {
                        this.hasFocus = !1;
                        var t = this._.editor.container;
                        t && t.removeClass("cke_focus"), this._.editor.fire("blur");
                    }
                }
                if (!this._.locked) {
                    this._.timer && clearTimeout(this._.timer);
                    var i = CKEDITOR.focusManager._.blurDelay;
                    t || !i ? e.call(this) :this._.timer = CKEDITOR.tools.setTimeout(function() {
                        delete this._.timer, e.call(this);
                    }, i, this);
                }
            },
            add:function(t, e) {
                var i = t.getCustomData("focusmanager");
                if (!i || i != this) {
                    i && i.remove(t);
                    var i = "focus", n = "blur";
                    e && (CKEDITOR.env.ie ? (i = "focusin", n = "focusout") :CKEDITOR.event.useCapture = 1);
                    var o = {
                        blur:function() {
                            t.equals(this.currentActive) && this.blur();
                        },
                        focus:function() {
                            this.currentActive = t, this.focus();
                        }
                    };
                    t.on(i, o.focus, this), t.on(n, o.blur, this), e && (CKEDITOR.event.useCapture = 0), 
                    t.setCustomData("focusmanager", this), t.setCustomData("focusmanager_handlers", o);
                }
            },
            remove:function(t) {
                t.removeCustomData("focusmanager");
                var e = t.removeCustomData("focusmanager_handlers");
                t.removeListener("blur", e.blur), t.removeListener("focus", e.focus);
            }
        };
    }(), CKEDITOR.keystrokeHandler = function(t) {
        return t.keystrokeHandler ? t.keystrokeHandler :(this.keystrokes = {}, this.blockedKeystrokes = {}, 
        this._ = {
            editor:t
        }, this);
    }, function() {
        var t, e = function(e) {
            var e = e.data, i = e.getKeystroke(), n = this.keystrokes[i], o = this._.editor;
            return t = o.fire("key", {
                keyCode:i
            }) === !1, t || (n && (t = o.execCommand(n, {
                from:"keystrokeHandler"
            }) !== !1), t || (t = !!this.blockedKeystrokes[i])), t && e.preventDefault(!0), 
            !t;
        }, i = function(e) {
            t && (t = !1, e.data.preventDefault(!0));
        };
        CKEDITOR.keystrokeHandler.prototype = {
            attach:function(t) {
                t.on("keydown", e, this), (CKEDITOR.env.opera || CKEDITOR.env.gecko && CKEDITOR.env.mac) && t.on("keypress", i, this);
            }
        };
    }(), function() {
        CKEDITOR.lang = {
            languages:{
                af:1,
                ar:1,
                bg:1,
                bn:1,
                bs:1,
                ca:1,
                cs:1,
                cy:1,
                da:1,
                de:1,
                el:1,
                "en-au":1,
                "en-ca":1,
                "en-gb":1,
                en:1,
                eo:1,
                es:1,
                et:1,
                eu:1,
                fa:1,
                fi:1,
                fo:1,
                "fr-ca":1,
                fr:1,
                gl:1,
                gu:1,
                he:1,
                hi:1,
                hr:1,
                hu:1,
                is:1,
                it:1,
                ja:1,
                ka:1,
                km:1,
                ko:1,
                ku:1,
                lt:1,
                lv:1,
                mn:1,
                ms:1,
                nb:1,
                nl:1,
                no:1,
                pl:1,
                "pt-br":1,
                pt:1,
                ro:1,
                ru:1,
                sk:1,
                sl:1,
                "sr-latn":1,
                sr:1,
                sv:1,
                th:1,
                tr:1,
                uk:1,
                vi:1,
                "zh-cn":1,
                zh:1
            },
            load:function(t, e, i) {
                t && CKEDITOR.lang.languages[t] || (t = this.detect(e, t)), this[t] ? i(t, this[t]) :CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/" + t + ".js"), function() {
                    i(t, this[t]);
                }, this);
            },
            detect:function(t, e) {
                var i = this.languages, e = e || navigator.userLanguage || navigator.language || t, n = e.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/), o = n[1], n = n[2];
                return i[o + "-" + n] ? o = o + "-" + n :i[o] || (o = null), CKEDITOR.lang.detect = o ? function() {
                    return o;
                } :function(t) {
                    return t;
                }, o || t;
            }
        };
    }(), CKEDITOR.scriptLoader = function() {
        var t = {}, e = {};
        return {
            load:function(i, n, o, r) {
                var s = "string" == typeof i;
                s && (i = [ i ]), o || (o = CKEDITOR);
                var a = i.length, l = [], c = [], h = function(t) {
                    n && (s ? n.call(o, t) :n.call(o, l, c));
                };
                if (0 === a) h(!0); else {
                    var u = function(t, e) {
                        (e ? l :c).push(t), --a <= 0 && (r && CKEDITOR.document.getDocumentElement().removeStyle("cursor"), 
                        h(e));
                    }, d = function(i, n) {
                        t[i] = 1;
                        var o = e[i];
                        delete e[i];
                        for (var r = 0; r < o.length; r++) o[r](i, n);
                    }, p = function(i) {
                        if (t[i]) u(i, !0); else {
                            var o = e[i] || (e[i] = []);
                            if (o.push(u), !(o.length > 1)) {
                                var r = new CKEDITOR.dom.element("script");
                                r.setAttributes({
                                    type:"text/javascript",
                                    src:i
                                }), n && (CKEDITOR.env.ie ? r.$.onreadystatechange = function() {
                                    ("loaded" == r.$.readyState || "complete" == r.$.readyState) && (r.$.onreadystatechange = null, 
                                    d(i, !0));
                                } :(r.$.onload = function() {
                                    setTimeout(function() {
                                        d(i, !0);
                                    }, 0);
                                }, r.$.onerror = function() {
                                    d(i, !1);
                                })), r.appendTo(CKEDITOR.document.getHead());
                            }
                        }
                    };
                    r && CKEDITOR.document.getDocumentElement().setStyle("cursor", "wait");
                    for (var f = 0; a > f; f++) p(i[f]);
                }
            }
        };
    }(), CKEDITOR.resourceManager = function(t, e) {
        this.basePath = t, this.fileName = e, this.registered = {}, this.loaded = {}, this.externals = {}, 
        this._ = {
            waitingList:{}
        };
    }, CKEDITOR.resourceManager.prototype = {
        add:function(t, e) {
            if (this.registered[t]) throw '[CKEDITOR.resourceManager.add] The resource name "' + t + '" is already registered.';
            var i = this.registered[t] = e || {};
            return i.name = t, i.path = this.getPath(t), CKEDITOR.fire(t + CKEDITOR.tools.capitalize(this.fileName) + "Ready", i), 
            this.get(t);
        },
        get:function(t) {
            return this.registered[t] || null;
        },
        getPath:function(t) {
            var e = this.externals[t];
            return CKEDITOR.getUrl(e && e.dir || this.basePath + t + "/");
        },
        getFilePath:function(t) {
            var e = this.externals[t];
            return CKEDITOR.getUrl(this.getPath(t) + (e && "string" == typeof e.file ? e.file :this.fileName + ".js"));
        },
        addExternal:function(t, e, i) {
            for (var t = t.split(","), n = 0; n < t.length; n++) this.externals[t[n]] = {
                dir:e,
                file:i
            };
        },
        load:function(t, e, i) {
            CKEDITOR.tools.isArray(t) || (t = t ? [ t ] :[]);
            for (var n = this.loaded, o = this.registered, r = [], s = {}, a = {}, l = 0; l < t.length; l++) {
                var c = t[l];
                if (c) if (n[c] || o[c]) a[c] = this.get(c); else {
                    var h = this.getFilePath(c);
                    r.push(h), h in s || (s[h] = []), s[h].push(c);
                }
            }
            CKEDITOR.scriptLoader.load(r, function(t, o) {
                if (o.length) throw '[CKEDITOR.resourceManager.load] Resource name "' + s[o[0]].join(",") + '" was not found at "' + o[0] + '".';
                for (var r = 0; r < t.length; r++) for (var l = s[t[r]], c = 0; c < l.length; c++) {
                    var h = l[c];
                    a[h] = this.get(h), n[h] = 1;
                }
                e.call(i, a);
            }, this);
        }
    }, CKEDITOR.plugins = new CKEDITOR.resourceManager("plugins/", "plugin"), CKEDITOR.plugins.load = CKEDITOR.tools.override(CKEDITOR.plugins.load, function(t) {
        var e = {};
        return function(i, n, o) {
            var r = {}, s = function(i) {
                t.call(this, i, function(t) {
                    CKEDITOR.tools.extend(r, t);
                    var i, a = [];
                    for (i in t) {
                        var l = t[i], c = l && l.requires;
                        if (!e[i]) {
                            if (l.icons) for (var h = l.icons.split(","), u = 0; u < h.length; u++) CKEDITOR.skin.addIcon(h[u], l.path + "icons/" + h[u] + ".png");
                            e[i] = 1;
                        }
                        if (c) for (c.split && (c = c.split(",")), l = 0; l < c.length; l++) r[c[l]] || a.push(c[l]);
                    }
                    if (a.length) s.call(this, a); else {
                        for (i in r) l = r[i], l.onLoad && !l.onLoad._called && (l.onLoad() === !1 && delete r[i], 
                        l.onLoad._called = 1);
                        n && n.call(o || window, r);
                    }
                }, this);
            };
            s.call(this, i);
        };
    }), CKEDITOR.plugins.setLang = function(t, e, i) {
        var n = this.get(t), t = n.langEntries || (n.langEntries = {}), n = n.lang || (n.lang = []);
        n.split && (n = n.split(",")), -1 == CKEDITOR.tools.indexOf(n, e) && n.push(e), 
        t[e] = i;
    }, CKEDITOR.ui = function(t) {
        return t.ui ? t.ui :(this.items = {}, this.instances = {}, this.editor = t, this._ = {
            handlers:{}
        }, this);
    }, CKEDITOR.ui.prototype = {
        add:function(t, e, i) {
            i.name = t.toLowerCase();
            var n = this.items[t] = {
                type:e,
                command:i.command || null,
                args:Array.prototype.slice.call(arguments, 2)
            };
            CKEDITOR.tools.extend(n, i);
        },
        get:function(t) {
            return this.instances[t];
        },
        create:function(t) {
            var e = this.items[t], i = e && this._.handlers[e.type], n = e && e.command && this.editor.getCommand(e.command), i = i && i.create.apply(this, e.args);
            return this.instances[t] = i, n && n.uiItems.push(i), i && !i.type && (i.type = e.type), 
            i;
        },
        addHandler:function(t, e) {
            this._.handlers[t] = e;
        },
        space:function(t) {
            return CKEDITOR.document.getById(this.spaceId(t));
        },
        spaceId:function(t) {
            return this.editor.id + "_" + t;
        }
    }, CKEDITOR.event.implementOn(CKEDITOR.ui), function() {
        function t(t, o, s) {
            if (CKEDITOR.event.call(this), t = t && CKEDITOR.tools.clone(t), void 0 !== o) {
                if (!(o instanceof CKEDITOR.dom.element)) throw Error("Expect element of type CKEDITOR.dom.element.");
                if (!s) throw Error("One of the element mode must be specified.");
                if (CKEDITOR.env.ie && CKEDITOR.env.quirks && s == CKEDITOR.ELEMENT_MODE_INLINE) throw Error("Inline element mode is not supported on IE quirks.");
                if (s == CKEDITOR.ELEMENT_MODE_INLINE && !o.is(CKEDITOR.dtd.$editable) || s == CKEDITOR.ELEMENT_MODE_REPLACE && o.is(CKEDITOR.dtd.$nonBodyContent)) throw Error('The specified element mode is not supported on element: "' + o.getName() + '".');
                this.element = o, this.elementMode = s, this.name = this.elementMode != CKEDITOR.ELEMENT_MODE_APPENDTO && (o.getId() || o.getNameAtt());
            } else this.elementMode = CKEDITOR.ELEMENT_MODE_NONE;
            this._ = {}, this.commands = {}, this.templates = {}, this.name = this.name || e(), 
            this.id = CKEDITOR.tools.getNextId(), this.config = CKEDITOR.tools.prototypedCopy(CKEDITOR.config), 
            this.ui = new CKEDITOR.ui(this), this.focusManager = new CKEDITOR.focusManager(this), 
            this.keystrokeHandler = new CKEDITOR.keystrokeHandler(this), this.on("mode", i), 
            this.on("readOnly", i), this.on("selectionChange", n), this.on("instanceReady", function() {
                this.config.startupFocus && this.focus();
            }), CKEDITOR.fire("instanceCreated", null, this), CKEDITOR.add(this), CKEDITOR.tools.setTimeout(function() {
                r(this, t);
            }, 0, this);
        }
        function e() {
            do var t = "editor" + ++h; while (CKEDITOR.instances[t]);
            return t;
        }
        function i() {
            var t, e = this.commands, i = this.mode;
            if (i) for (var n in e) t = e[n], t[t.startDisabled ? "disable" :this.readOnly && !t.readOnly ? "disable" :t.modes[i] ? "enable" :"disable"]();
        }
        function n(t) {
            var e, i = this.commands, n = t.editor, o = t.data.path;
            for (e in i) t = i[e], t.contextSensitive && t.refresh(n, o);
        }
        function o(t) {
            var e = t.config.customConfig;
            if (!e) return !1;
            var e = CKEDITOR.getUrl(e), i = u[e] || (u[e] = {});
            return i.fn ? (i.fn.call(t, t.config), (CKEDITOR.getUrl(t.config.customConfig) == e || !o(t)) && t.fireOnce("customConfigLoaded")) :CKEDITOR.scriptLoader.load(e, function() {
                i.fn = CKEDITOR.editorConfig ? CKEDITOR.editorConfig :function() {}, o(t);
            }), !0;
        }
        function r(t, e) {
            t.on("customConfigLoaded", function() {
                if (e) {
                    if (e.on) for (var i in e.on) t.on(i, e.on[i]);
                    CKEDITOR.tools.extend(t.config, e, !0), delete t.config.on;
                }
                t.readOnly = !(!t.config.readOnly && !(t.elementMode == CKEDITOR.ELEMENT_MODE_INLINE ? t.element.isReadOnly() :t.elementMode == CKEDITOR.ELEMENT_MODE_REPLACE && t.element.getAttribute("disabled"))), 
                t.blockless = t.elementMode == CKEDITOR.ELEMENT_MODE_INLINE && !CKEDITOR.dtd[t.element.getName()].p, 
                t.tabIndex = t.config.tabIndex || t.element && t.element.getAttribute("tabindex") || 0, 
                t.config.skin && (CKEDITOR.skinName = t.config.skin), t.fireOnce("configLoaded"), 
                t.dataProcessor = new CKEDITOR.htmlDataProcessor(t), s(t);
            }), e && void 0 != e.customConfig && (t.config.customConfig = e.customConfig), o(t) || t.fireOnce("customConfigLoaded");
        }
        function s(t) {
            CKEDITOR.skin.loadPart("editor", function() {
                a(t);
            });
        }
        function a(t) {
            CKEDITOR.lang.load(t.config.language, t.config.defaultLanguage, function(e, i) {
                t.langCode = e, t.lang = CKEDITOR.tools.prototypedCopy(i), CKEDITOR.env.gecko && CKEDITOR.env.version < 10900 && "rtl" == t.lang.dir && (t.lang.dir = "ltr"), 
                t.config.contentsLangDirection || (t.config.contentsLangDirection = t.elementMode == CKEDITOR.ELEMENT_MODE_INLINE ? t.element.getDirection(1) :t.lang.dir), 
                t.fire("langLoaded"), l(t);
            });
        }
        function l(t) {
            var e = t.config, i = e.plugins, n = e.extraPlugins, o = e.removePlugins;
            if (n) var r = RegExp("(?:^|,)(?:" + n.replace(/\s*,\s*/g, "|") + ")(?=,|$)", "g"), i = i.replace(r, ""), i = i + ("," + n);
            if (o) var s = RegExp("(?:^|,)(?:" + o.replace(/\s*,\s*/g, "|") + ")(?=,|$)", "g"), i = i.replace(s, "");
            CKEDITOR.env.air && (i += ",adobeair"), CKEDITOR.plugins.load(i.split(","), function(i) {
                var n = [], o = [], r = [];
                t.plugins = i;
                for (var a in i) {
                    var l, c = i[a], h = c.lang, u = null, d = c.requires;
                    if (CKEDITOR.tools.isArray(d) && (d = d.join(",")), d && (l = d.match(s))) for (;d = l.pop(); ) CKEDITOR.tools.setTimeout(function(t, e) {
                        throw Error('Plugin "' + t.replace(",", "") + '" cannot be removed from the plugins list, because it\'s required by "' + e + '" plugin.');
                    }, 0, null, [ d, a ]);
                    h && !t.lang[a] && (h.split && (h = h.split(",")), CKEDITOR.tools.indexOf(h, t.langCode) >= 0 ? u = t.langCode :(u = t.langCode.replace(/-.*/, ""), 
                    u = u != t.langCode && CKEDITOR.tools.indexOf(h, u) >= 0 ? u :CKEDITOR.tools.indexOf(h, "en") >= 0 ? "en" :h[0]), 
                    c.langEntries && c.langEntries[u] ? (t.lang[a] = c.langEntries[u], u = null) :r.push(CKEDITOR.getUrl(c.path + "lang/" + u + ".js"))), 
                    o.push(u), n.push(c);
                }
                CKEDITOR.scriptLoader.load(r, function() {
                    for (var i = [ "beforeInit", "init", "afterInit" ], r = 0; r < i.length; r++) for (var s = 0; s < n.length; s++) {
                        var a = n[s];
                        0 === r && o[s] && a.lang && a.langEntries && (t.lang[a.name] = a.langEntries[o[s]]), 
                        a[i[r]] && a[i[r]](t);
                    }
                    for (t.fireOnce("pluginsLoaded"), e.keystrokes && t.setKeystroke(t.config.keystrokes), 
                    s = 0; s < t.config.blockedKeystrokes.length; s++) t.keystrokeHandler.blockedKeystrokes[t.config.blockedKeystrokes[s]] = 1;
                    t.fireOnce("loaded"), CKEDITOR.fire("instanceLoaded", null, t);
                });
            });
        }
        function c() {
            var t = this.element;
            if (t && this.elementMode != CKEDITOR.ELEMENT_MODE_APPENDTO) {
                var e = this.getData();
                return this.config.htmlEncodeOutput && (e = CKEDITOR.tools.htmlEncode(e)), t.is("textarea") ? t.setValue(e) :t.setHtml(e), 
                !0;
            }
            return !1;
        }
        t.prototype = CKEDITOR.editor.prototype, CKEDITOR.editor = t;
        var h = 0, u = {};
        CKEDITOR.tools.extend(CKEDITOR.editor.prototype, {
            addCommand:function(t, e) {
                return this.commands[t] = new CKEDITOR.command(this, e);
            },
            destroy:function(t) {
                this.fire("beforeDestroy"), !t && c.call(this), this.editable(null), this.fire("destroy"), 
                this.removeAllListeners(), CKEDITOR.remove(this), CKEDITOR.fire("instanceDestroyed", null, this);
            },
            elementPath:function(t) {
                return (t = t || this.getSelection().getStartElement()) ? new CKEDITOR.dom.elementPath(t, this.editable()) :null;
            },
            createRange:function() {
                var t = this.editable();
                return t ? new CKEDITOR.dom.range(t) :null;
            },
            execCommand:function(t, e) {
                var i = this.getCommand(t), n = {
                    name:t,
                    commandData:e,
                    command:i
                };
                return i && i.state != CKEDITOR.TRISTATE_DISABLED && this.fire("beforeCommandExec", n) !== !0 && (n.returnValue = i.exec(n.commandData), 
                !i.async && this.fire("afterCommandExec", n) !== !0) ? n.returnValue :!1;
            },
            getCommand:function(t) {
                return this.commands[t];
            },
            getData:function(t) {
                !t && this.fire("beforeGetData");
                var e = this._.data;
                return "string" != typeof e && (e = (e = this.element) && this.elementMode == CKEDITOR.ELEMENT_MODE_REPLACE ? e.is("textarea") ? e.getValue() :e.getHtml() :""), 
                e = {
                    dataValue:e
                }, !t && this.fire("getData", e), e.dataValue;
            },
            getSnapshot:function() {
                var t = this.fire("getSnapshot");
                if ("string" != typeof t) {
                    var e = this.element;
                    e && this.elementMode == CKEDITOR.ELEMENT_MODE_REPLACE && (t = e.is("textarea") ? e.getValue() :e.getHtml());
                }
                return t;
            },
            loadSnapshot:function(t) {
                this.fire("loadSnapshot", t);
            },
            setData:function(t, e, i) {
                e && this.on("dataReady", function(t) {
                    t.removeListener(), e.call(t.editor);
                }), t = {
                    dataValue:t
                }, !i && this.fire("setData", t), this._.data = t.dataValue, !i && this.fire("afterSetData", t);
            },
            setReadOnly:function(t) {
                t = void 0 == t || t, this.readOnly != t && (this.readOnly = t, this.editable().setReadOnly(t), 
                this.fire("readOnly"));
            },
            insertHtml:function(t, e) {
                this.fire("insertHtml", {
                    dataValue:t,
                    mode:e
                });
            },
            insertText:function(t) {
                this.fire("insertText", t);
            },
            insertElement:function(t) {
                this.fire("insertElement", t);
            },
            focus:function() {
                this.fire("beforeFocus");
            },
            checkDirty:function() {
                return this._.previousValue !== this.getSnapshot();
            },
            resetDirty:function() {
                this._.previousValue = this.getSnapshot();
            },
            updateElement:function() {
                return c.call(this);
            },
            setKeystroke:function() {
                for (var t, e, i = this.keystrokeHandler.keystrokes, n = CKEDITOR.tools.isArray(arguments[0]) ? arguments[0] :[ [].slice.call(arguments, 0) ], o = n.length; o--; ) t = n[o], 
                e = 0, CKEDITOR.tools.isArray(t) && (e = t[1], t = t[0]), e ? i[t] = e :delete i[t];
            }
        });
    }(), CKEDITOR.ELEMENT_MODE_NONE = 0, CKEDITOR.ELEMENT_MODE_REPLACE = 1, CKEDITOR.ELEMENT_MODE_APPENDTO = 2, 
    CKEDITOR.ELEMENT_MODE_INLINE = 3, CKEDITOR.htmlParser = function() {
        this._ = {
            htmlPartsRegex:RegExp("<(?:(?:\\/([^>]+)>)|(?:!--([\\S|\\s]*?)-->)|(?:([^\\s>]+)\\s*((?:(?:\"[^\"]*\")|(?:'[^']*')|[^\"'>])*)\\/?>))", "g")
        };
    }, function() {
        var t = /([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g, e = {
            checked:1,
            compact:1,
            declare:1,
            defer:1,
            disabled:1,
            ismap:1,
            multiple:1,
            nohref:1,
            noresize:1,
            noshade:1,
            nowrap:1,
            readonly:1,
            selected:1
        };
        CKEDITOR.htmlParser.prototype = {
            onTagOpen:function() {},
            onTagClose:function() {},
            onText:function() {},
            onCDATA:function() {},
            onComment:function() {},
            parse:function(i) {
                for (var n, o, r, s = 0; n = this._.htmlPartsRegex.exec(i); ) if (o = n.index, o > s && (s = i.substring(s, o), 
                r ? r.push(s) :this.onText(s)), s = this._.htmlPartsRegex.lastIndex, !(o = n[1]) || (o = o.toLowerCase(), 
                r && CKEDITOR.dtd.$cdata[o] && (this.onCDATA(r.join("")), r = null), r)) if (r) r.push(n[0]); else if (o = n[3]) {
                    if (o = o.toLowerCase(), !/="/.test(o)) {
                        var a, l = {};
                        n = n[4];
                        var c = !(!n || "/" != n.charAt(n.length - 1));
                        if (n) for (;a = t.exec(n); ) {
                            var h = a[1].toLowerCase();
                            a = a[2] || a[3] || a[4] || "", l[h] = !a && e[h] ? h :a;
                        }
                        this.onTagOpen(o, l, c), !r && CKEDITOR.dtd.$cdata[o] && (r = []);
                    }
                } else (o = n[2]) && this.onComment(o); else this.onTagClose(o);
                i.length > s && this.onText(i.substring(s, i.length));
            }
        };
    }(), CKEDITOR.htmlParser.basicWriter = CKEDITOR.tools.createClass({
        $:function() {
            this._ = {
                output:[]
            };
        },
        proto:{
            openTag:function(t) {
                this._.output.push("<", t);
            },
            openTagClose:function(t, e) {
                e ? this._.output.push(" />") :this._.output.push(">");
            },
            attribute:function(t, e) {
                "string" == typeof e && (e = CKEDITOR.tools.htmlEncodeAttr(e)), this._.output.push(" ", t, '="', e, '"');
            },
            closeTag:function(t) {
                this._.output.push("</", t, ">");
            },
            text:function(t) {
                this._.output.push(t);
            },
            comment:function(t) {
                this._.output.push("<!--", t, "-->");
            },
            write:function(t) {
                this._.output.push(t);
            },
            reset:function() {
                this._.output = [], this._.indent = !1;
            },
            getHtml:function(t) {
                var e = this._.output.join("");
                return t && this.reset(), e;
            }
        }
    }), CKEDITOR.htmlParser.comment = function(t) {
        this.value = t, this._ = {
            isBlockLike:!1
        };
    }, CKEDITOR.htmlParser.comment.prototype = {
        type:CKEDITOR.NODE_COMMENT,
        writeHtml:function(t, e) {
            var i = this.value;
            if (e) {
                if (!(i = e.onComment(i, this))) return;
                if ("string" != typeof i) return i.parent = this.parent, i.writeHtml(t, e), void 0;
            }
            t.comment(i);
        }
    }, function() {
        CKEDITOR.htmlParser.text = function(t) {
            this.value = t, this._ = {
                isBlockLike:!1
            };
        }, CKEDITOR.htmlParser.text.prototype = {
            type:CKEDITOR.NODE_TEXT,
            writeHtml:function(t, e) {
                var i = this.value;
                (!e || (i = e.onText(i, this))) && t.text(i);
            }
        };
    }(), function() {
        CKEDITOR.htmlParser.cdata = function(t) {
            this.value = t;
        }, CKEDITOR.htmlParser.cdata.prototype = {
            type:CKEDITOR.NODE_TEXT,
            writeHtml:function(t) {
                t.write(this.value);
            }
        };
    }(), CKEDITOR.htmlParser.fragment = function() {
        this.children = [], this.parent = null, this._ = {
            isBlockLike:!0,
            hasInlineStarted:!1
        };
    }, function() {
        function t(t) {
            return "a" == t.name && t.attributes.href || CKEDITOR.dtd.$removeEmpty[t.name];
        }
        var e = CKEDITOR.tools.extend({
            table:1,
            ul:1,
            ol:1,
            dl:1
        }, CKEDITOR.dtd.table, CKEDITOR.dtd.ul, CKEDITOR.dtd.ol, CKEDITOR.dtd.dl), i = {
            ol:1,
            ul:1
        }, n = CKEDITOR.tools.extend({}, {
            html:1
        }, CKEDITOR.dtd.html, CKEDITOR.dtd.body, CKEDITOR.dtd.head, {
            style:1,
            script:1
        });
        CKEDITOR.htmlParser.fragment.fromHtml = function(o, r, s) {
            function a(t) {
                var e;
                if (g.length > 0) for (var i = 0; i < g.length; i++) {
                    var n = g[i], o = n.name, r = CKEDITOR.dtd[o], s = _.name && CKEDITOR.dtd[_.name];
                    s && !s[o] || t && r && !r[t] && CKEDITOR.dtd[t] ? o == _.name && (h(_, _.parent, 1), 
                    i--) :(e || (l(), e = 1), n = n.clone(), n.parent = _, _ = n, g.splice(i, 1), i--);
                }
            }
            function l() {
                for (;m.length; ) h(m.shift(), _);
            }
            function c(t) {
                if (t._.isBlockLike && "pre" != t.name && "textarea" != t.name) {
                    var e, i = t.children.length, n = t.children[i - 1];
                    n && n.type == CKEDITOR.NODE_TEXT && ((e = CKEDITOR.tools.rtrim(n.value)) ? n.value = e :t.children.length = i - 1);
                }
            }
            function h(e, i, n) {
                var i = i || _ || f, o = _;
                void 0 === e.previous && (u(i, e) && (_ = i, p.onTagOpen(s, {}), e.returnPoint = i = _), 
                c(e), (!t(e) || e.children.length) && i.add(e), "pre" == e.name && (y = !1), "textarea" == e.name && (v = !1)), 
                e.returnPoint ? (_ = e.returnPoint, delete e.returnPoint) :_ = n ? i :o;
            }
            function u(t, e) {
                if ((t == f || "body" == t.name) && s && (!t.name || CKEDITOR.dtd[t.name][s])) {
                    var i, n;
                    return (i = e.attributes && (n = e.attributes["data-cke-real-element-type"]) ? n :e.name) && i in CKEDITOR.dtd.$inline && !(i in CKEDITOR.dtd.head) && !e.isOrphan || e.type == CKEDITOR.NODE_TEXT;
                }
            }
            function d(t, e) {
                return t in CKEDITOR.dtd.$listItem || t in CKEDITOR.dtd.$tableContent ? t == e || "dt" == t && "dd" == e || "dd" == t && "dt" == e :!1;
            }
            var p = new CKEDITOR.htmlParser(), f = r instanceof CKEDITOR.htmlParser.element ? r :"string" == typeof r ? new CKEDITOR.htmlParser.element(r) :new CKEDITOR.htmlParser.fragment(), g = [], m = [], _ = f, v = "textarea" == f.name, y = "pre" == f.name;
            p.onTagOpen = function(o, r, s, c) {
                if (r = new CKEDITOR.htmlParser.element(o, r), r.isUnknown && s && (r.isEmpty = !0), 
                r.isOptionalClose = c, t(r)) g.push(r); else {
                    if ("pre" == o) y = !0; else {
                        if ("br" == o && y) return _.add(new CKEDITOR.htmlParser.text("\n")), void 0;
                        "textarea" == o && (v = !0);
                    }
                    if ("br" == o) m.push(r); else {
                        for (;c = (s = _.name) ? CKEDITOR.dtd[s] || (_._.isBlockLike ? CKEDITOR.dtd.div :CKEDITOR.dtd.span) :n, 
                        !(r.isUnknown || _.isUnknown || c[o]); ) if (_.isOptionalClose) p.onTagClose(s); else if (o in i && s in i) s = _.children, 
                        (s = s[s.length - 1]) && "li" == s.name || h(s = new CKEDITOR.htmlParser.element("li"), _), 
                        !r.returnPoint && (r.returnPoint = _), _ = s; else if (o in CKEDITOR.dtd.$listItem && !d(o, s)) p.onTagOpen("li" == o ? "ul" :"dl", {}, 0, 1); else if (s in e && !d(o, s)) !r.returnPoint && (r.returnPoint = _), 
                        _ = _.parent; else {
                            if (s in CKEDITOR.dtd.$inline && g.unshift(_), !_.parent) {
                                r.isOrphan = 1;
                                break;
                            }
                            h(_, _.parent, 1);
                        }
                        a(o), l(), r.parent = _, r.isEmpty ? h(r) :_ = r;
                    }
                }
            }, p.onTagClose = function(t) {
                for (var e = g.length - 1; e >= 0; e--) if (t == g[e].name) return g.splice(e, 1), 
                void 0;
                for (var i = [], n = [], o = _; o != f && o.name != t; ) o._.isBlockLike || n.unshift(o), 
                i.push(o), o = o.returnPoint || o.parent;
                if (o != f) {
                    for (e = 0; e < i.length; e++) {
                        var r = i[e];
                        h(r, r.parent);
                    }
                    _ = o, o._.isBlockLike && l(), h(o, o.parent), o == _ && (_ = _.parent), g = g.concat(n);
                }
                "body" == t && (s = !1);
            }, p.onText = function(t) {
                if (_._.hasInlineStarted && !m.length || y || v || (t = CKEDITOR.tools.ltrim(t), 
                0 !== t.length)) {
                    var o = _.name, r = o ? CKEDITOR.dtd[o] || (_._.isBlockLike ? CKEDITOR.dtd.div :CKEDITOR.dtd.span) :n;
                    !v && !r["#"] && o in e ? (p.onTagOpen(o in i ? "li" :"dl" == o ? "dd" :"table" == o ? "tr" :"tr" == o ? "td" :""), 
                    p.onText(t)) :(l(), a(), !y && !v && (t = t.replace(/[\t\r\n ]{2,}|[\t\r\n]/g, " ")), 
                    t = new CKEDITOR.htmlParser.text(t), u(_, t) && this.onTagOpen(s, {}, 0, 1), _.add(t));
                }
            }, p.onCDATA = function(t) {
                _.add(new CKEDITOR.htmlParser.cdata(t));
            }, p.onComment = function(t) {
                l(), a(), _.add(new CKEDITOR.htmlParser.comment(t));
            }, p.parse(o);
            for (l(!CKEDITOR.env.ie && 1); _ != f; ) h(_, _.parent, 1);
            return c(f), f;
        }, CKEDITOR.htmlParser.fragment.prototype = {
            type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,
            add:function(t, e) {
                isNaN(e) && (e = this.children.length);
                var i = e > 0 ? this.children[e - 1] :null;
                if (i) {
                    if (t._.isBlockLike && i.type == CKEDITOR.NODE_TEXT && (i.value = CKEDITOR.tools.rtrim(i.value), 
                    0 === i.value.length)) return this.children.pop(), this.add(t), void 0;
                    i.next = t;
                }
                t.previous = i, t.parent = this, this.children.splice(e, 0, t), this._.hasInlineStarted || (this._.hasInlineStarted = t.type == CKEDITOR.NODE_TEXT || t.type == CKEDITOR.NODE_ELEMENT && !t._.isBlockLike);
            },
            writeHtml:function(t, e) {
                var i;
                this.filterChildren = function() {
                    var t = new CKEDITOR.htmlParser.basicWriter();
                    this.writeChildrenHtml.call(this, t, e), t = t.getHtml(), this.children = new CKEDITOR.htmlParser.fragment.fromHtml(t).children, 
                    i = 1;
                }, e && e.onRoot(this), this.writeChildrenHtml(t, i ? null :e);
            },
            writeChildrenHtml:function(t, e, i) {
                for (i && !this.parent && e && e.onRoot(this), i = 0; i < this.children.length; i++) this.children[i].writeHtml(t, e);
            }
        };
    }(), function() {
        function t(t, e) {
            for (var i = 0; t && i < e.length; i++) var n = e[i], t = t.replace(n[0], n[1]);
            return t;
        }
        function e(t, e, i) {
            "function" == typeof e && (e = [ e ]);
            var n, o;
            o = t.length;
            var r = e && e.length;
            if (r) {
                for (n = 0; o > n && t[n].pri < i; n++) ;
                for (o = r - 1; o >= 0; o--) (r = e[o]) && (r.pri = i, t.splice(n, 0, r));
            }
        }
        function i(t, e, i) {
            if (e) for (var o in e) {
                var r = t[o];
                t[o] = n(r, e[o], i), r || t.$length++;
            }
        }
        function n(t, i, n) {
            return i ? (i.pri = n, t ? (t.splice ? e(t, i, n) :(t = t.pri > n ? [ i, t ] :[ t, i ], 
            t.filter = o), t) :i.filter = i) :void 0;
        }
        function o(t) {
            for (var e = t.type || t instanceof CKEDITOR.htmlParser.fragment, i = 0; i < this.length; i++) {
                if (e) var n = t.type, o = t.name;
                var r = this[i].apply(window, arguments);
                if (r === !1) return r;
                if (e) {
                    if (r && (r.name != o || r.type != n)) return r;
                } else if ("string" != typeof r) return r;
                void 0 != r && (t = r);
            }
            return t;
        }
        CKEDITOR.htmlParser.filter = CKEDITOR.tools.createClass({
            $:function(t) {
                this._ = {
                    elementNames:[],
                    attributeNames:[],
                    elements:{
                        $length:0
                    },
                    attributes:{
                        $length:0
                    }
                }, t && this.addRules(t, 10);
            },
            proto:{
                addRules:function(t, o) {
                    "number" != typeof o && (o = 10), e(this._.elementNames, t.elementNames, o), e(this._.attributeNames, t.attributeNames, o), 
                    i(this._.elements, t.elements, o), i(this._.attributes, t.attributes, o), this._.text = n(this._.text, t.text, o) || this._.text, 
                    this._.comment = n(this._.comment, t.comment, o) || this._.comment, this._.root = n(this._.root, t.root, o) || this._.root;
                },
                onElementName:function(e) {
                    return t(e, this._.elementNames);
                },
                onAttributeName:function(e) {
                    return t(e, this._.attributeNames);
                },
                onText:function(t) {
                    var e = this._.text;
                    return e ? e.filter(t) :t;
                },
                onComment:function(t, e) {
                    var i = this._.comment;
                    return i ? i.filter(t, e) :t;
                },
                onRoot:function(t) {
                    var e = this._.root;
                    return e ? e.filter(t) :t;
                },
                onElement:function(t) {
                    for (var e, i = [ this._.elements["^"], this._.elements[t.name], this._.elements.$ ], n = 0; 3 > n; n++) if (e = i[n]) {
                        if (e = e.filter(t, this), e === !1) return null;
                        if (e && e != t) return this.onNode(e);
                        if (t.parent && !t.name) break;
                    }
                    return t;
                },
                onNode:function(t) {
                    var e = t.type;
                    return e == CKEDITOR.NODE_ELEMENT ? this.onElement(t) :e == CKEDITOR.NODE_TEXT ? new CKEDITOR.htmlParser.text(this.onText(t.value)) :e == CKEDITOR.NODE_COMMENT ? new CKEDITOR.htmlParser.comment(this.onComment(t.value)) :null;
                },
                onAttribute:function(t, e, i) {
                    if (e = this._.attributes[e]) {
                        if (t = e.filter(i, t, this), t === !1) return !1;
                        if ("undefined" != typeof t) return t;
                    }
                    return i;
                }
            }
        });
    }(), function() {
        function t(t, e) {
            function l(t) {
                return t || CKEDITOR.env.ie ? new CKEDITOR.htmlParser.text(" ") :new CKEDITOR.htmlParser.element("br", {
                    "data-cke-bogus":1
                });
            }
            function c(t, e) {
                return function(o) {
                    if (o.type != CKEDITOR.NODE_DOCUMENT_FRAGMENT) {
                        var s, c, u = [], d = i(o);
                        if (d) for (h(d, 1) && u.push(d); d; ) {
                            if (r(d) && (s = n(d)) && h(s)) if ((c = n(s)) && !r(c)) u.push(s); else {
                                var f = s, g = l(p), m = f.parent.children, _ = CKEDITOR.tools.indexOf(m, f);
                                m.splice(_ + 1, 0, g), m = f.next, f.next = g, g.previous = f, g.parent = f.parent, 
                                g.next = m, a(s);
                            }
                            d = d.previous;
                        }
                        for (d = 0; d < u.length; d++) a(u[d]);
                        (u = CKEDITOR.env.opera && !t || ("function" == typeof e ? e(o) !== !1 :e)) && (!p && CKEDITOR.env.ie && o.type == CKEDITOR.NODE_DOCUMENT_FRAGMENT ? u = !1 :!p && CKEDITOR.env.ie && (document.documentMode > 7 || o.name in CKEDITOR.dtd.tr || o.name in CKEDITOR.dtd.$listItem) ? u = !1 :(u = i(o), 
                        u = !u || "form" == o.name && "input" == u.name)), u && o.add(l(t));
                    }
                };
            }
            function h(t, e) {
                if (!(p && CKEDITOR.env.ie || t.type != CKEDITOR.NODE_ELEMENT || "br" != t.name || t.attributes["data-cke-eol"])) return !0;
                var i;
                if (t.type == CKEDITOR.NODE_TEXT && (i = t.value.match(v))) {
                    if (i.index && (s(t, new CKEDITOR.htmlParser.text(t.value.substring(0, i.index))), 
                    t.value = i[0]), CKEDITOR.env.ie && p && (!e || t.parent.name in f)) return !0;
                    if (!p && ((i = t.previous) && "br" == i.name || !i || r(i))) return !0;
                }
                return !1;
            }
            var u, d = {
                elements:{}
            }, p = "html" == e, f = CKEDITOR.tools.extend({}, C);
            for (u in f) "#" in b[u] || delete f[u];
            for (u in f) d.elements[u] = c(p, t.config.fillEmptyBlocks !== !1);
            return d.root = c(p), d.elements.br = function(t) {
                return function(e) {
                    if (e.parent.type != CKEDITOR.NODE_DOCUMENT_FRAGMENT) {
                        var i = e.attributes;
                        if ("data-cke-bogus" in i || "data-cke-eol" in i) delete i["data-cke-bogus"]; else {
                            for (i = e.next; i && o(i); ) i = i.next;
                            var a = n(e);
                            !i && r(e.parent) ? (e = e.parent, i = l(t), a = e.children[e.children.length - 1], 
                            e.children.push(i), i.parent = e, a && (a.next = i, i.previous = a)) :r(i) && a && !r(a) && s(i, l(t));
                        }
                    }
                };
            }(p), d;
        }
        function e(t) {
            return t.enterMode != CKEDITOR.ENTER_BR && t.autoParagraph !== !1 ? t.enterMode == CKEDITOR.ENTER_DIV ? "div" :"p" :!1;
        }
        function i(t) {
            for (t = t.children[t.children.length - 1]; t && o(t); ) t = t.previous;
            return t;
        }
        function n(t) {
            for (t = t.previous; t && o(t); ) t = t.previous;
            return t;
        }
        function o(t) {
            return t.type == CKEDITOR.NODE_TEXT && !CKEDITOR.tools.trim(t.value) || t.type == CKEDITOR.NODE_ELEMENT && t.attributes["data-cke-bookmark"];
        }
        function r(t) {
            return t && (t.type == CKEDITOR.NODE_ELEMENT && t.name in C || t.type == CKEDITOR.NODE_DOCUMENT_FRAGMENT);
        }
        function s(t, e) {
            var i = t.parent.children, n = CKEDITOR.tools.indexOf(i, t);
            i.splice(n, 0, e), i = t.previous, t.previous = e, e.next = t, e.parent = t.parent, 
            i && (e.previous = i, i.next = e);
        }
        function a(t) {
            var e = t.parent.children, i = CKEDITOR.tools.indexOf(e, t), n = t.previous, t = t.next;
            n && (n.next = t), t && (t.previous = n), e.splice(i, 1);
        }
        function l(t) {
            var e = t.parent;
            return e ? CKEDITOR.tools.indexOf(e.children, t) :-1;
        }
        function c(t) {
            t = t.attributes, "false" != t.contenteditable && (t["data-cke-editable"] = t.contenteditable ? "true" :1), 
            t.contenteditable = "false";
        }
        function h(t) {
            switch (t = t.attributes, t["data-cke-editable"]) {
              case "true":
                t.contenteditable = "true";
                break;

              case "1":
                delete t.contenteditable;
            }
        }
        function u(t) {
            return t.replace(x, function(t, e, i) {
                return "<" + e + i.replace(S, function(t, e) {
                    return /^on/.test(e) || -1 != i.indexOf("data-cke-saved-" + e) ? t :" data-cke-saved-" + t + " data-cke-" + CKEDITOR.rnd + "-" + t;
                }) + ">";
            });
        }
        function d(t) {
            return t.replace(O, function(t) {
                return "<cke:encoded>" + encodeURIComponent(t) + "</cke:encoded>";
            });
        }
        function p(t) {
            return t.replace(k, function(t, e) {
                return decodeURIComponent(e);
            });
        }
        function f(t) {
            return t.replace(/<\!--(?!{cke_protected})[\s\S]+?--\>/g, function(t) {
                return "<!--" + y + "{C}" + encodeURIComponent(t).replace(/--/g, "%2D%2D") + "-->";
            });
        }
        function g(t) {
            return t.replace(/<\!--\{cke_protected\}\{C\}([\s\S]+?)--\>/g, function(t, e) {
                return decodeURIComponent(e);
            });
        }
        function m(t, e) {
            var i = e._.dataStore;
            return t.replace(/<\!--\{cke_protected\}([\s\S]+?)--\>/g, function(t, e) {
                return decodeURIComponent(e);
            }).replace(/\{cke_protected_(\d+)\}/g, function(t, e) {
                return i && i[e] || "";
            });
        }
        function _(t, e) {
            for (var i = [], n = e.config.protectedSource, o = e._.dataStore || (e._.dataStore = {
                id:1
            }), r = /<\!--\{cke_temp(comment)?\}(\d*?)--\>/g, n = [ /<script[\s\S]*?<\/script>/gi, /<noscript[\s\S]*?<\/noscript>/gi ].concat(n), t = t.replace(/<\!--[\s\S]*?--\>/g, function(t) {
                return "<!--{cke_tempcomment}" + (i.push(t) - 1) + "-->";
            }), s = 0; s < n.length; s++) t = t.replace(n[s], function(t) {
                return t = t.replace(r, function(t, e, n) {
                    return i[n];
                }), /cke_temp(comment)?/.test(t) ? t :"<!--{cke_temp}" + (i.push(t) - 1) + "-->";
            });
            return t = t.replace(r, function(t, e, n) {
                return "<!--" + y + (e ? "{C}" :"") + encodeURIComponent(i[n]).replace(/--/g, "%2D%2D") + "-->";
            }), t.replace(/(['"]).*?\1/g, function(t) {
                return t.replace(/<\!--\{cke_protected\}([\s\S]+?)--\>/g, function(t, e) {
                    return o[o.id] = decodeURIComponent(e), "{cke_protected_" + o.id++ + "}";
                });
            });
        }
        CKEDITOR.htmlDataProcessor = function(e) {
            var i, n;
            this.editor = e, this.dataFilter = i = new CKEDITOR.htmlParser.filter(), this.htmlFilter = n = new CKEDITOR.htmlParser.filter(), 
            this.writer = new CKEDITOR.htmlParser.basicWriter(), i.addRules(T), i.addRules(t(e, "data")), 
            n.addRules(D), n.addRules(t(e, "html"));
        }, CKEDITOR.htmlDataProcessor.prototype = {
            toHtml:function(t, i, n) {
                var o, t = _(t, this.editor), t = u(t), t = d(t), t = t.replace(I, "$1cke:$2"), t = t.replace(P, "<cke:$1$2></cke:$1>"), t = CKEDITOR.env.opera ? t :t.replace(/(<pre\b[^>]*>)(\r\n|\n)/g, "$1$2$2"), r = this.editor.editable();
                return !i && null !== i && (i = r.getName()), r = i || r.getName(), CKEDITOR.env.ie && CKEDITOR.env.version < 9 && "pre" == r && (r = "div", 
                t = "<pre>" + t + "</pre>", o = 1), r = this.editor.document.createElement(r), r.setHtml("a" + t), 
                t = r.getHtml().substr(1), t = t.replace(RegExp(" data-cke-" + CKEDITOR.rnd + "-", "ig"), " "), 
                o && (t = t.replace(/^<pre>|<\/pre>$/gi, "")), t = t.replace(R, "$1$2"), t = p(t), 
                t = g(t), t = CKEDITOR.htmlParser.fragment.fromHtml(t, i, n === !1 ? !1 :e(this.editor.config)), 
                i = new CKEDITOR.htmlParser.basicWriter(), t.writeChildrenHtml(i, this.dataFilter, 1), 
                t = i.getHtml(!0), t = f(t);
            },
            toDataFormat:function(t) {
                var i = this.editor.editable(), n = this.writer, t = CKEDITOR.htmlParser.fragment.fromHtml(t, i.getName(), e(this.editor.config));
                return n.reset(), t.writeChildrenHtml(n, this.htmlFilter, 1), n = n.getHtml(!0), 
                n = g(n), n = m(n, this.editor);
            }
        };
        var v = /(?:&nbsp;|\xa0)$/, y = "{cke_protected}", b = CKEDITOR.dtd, w = [ "caption", "colgroup", "col", "thead", "tfoot", "tbody" ], C = CKEDITOR.tools.extend({}, b.$blockLimit, b.$block), T = {
            elements:{},
            attributeNames:[ [ /^on/, "data-cke-pa-on" ] ]
        }, D = {
            elementNames:[ [ /^cke:/, "" ], [ /^\?xml:namespace$/, "" ] ],
            attributeNames:[ [ /^data-cke-(saved|pa)-/, "" ], [ /^data-cke-.*/, "" ], [ "hidefocus", "" ] ],
            elements:{
                $:function(t) {
                    var e = t.attributes;
                    if (e) {
                        if (e["data-cke-temp"]) return !1;
                        for (var i, n = [ "name", "href", "src" ], o = 0; o < n.length; o++) i = "data-cke-saved-" + n[o], 
                        i in e && delete e[n[o]];
                    }
                    return t;
                },
                table:function(t) {
                    t.children.slice(0).sort(function(t, e) {
                        var i, n;
                        return t.type == CKEDITOR.NODE_ELEMENT && e.type == t.type && (i = CKEDITOR.tools.indexOf(w, t.name), 
                        n = CKEDITOR.tools.indexOf(w, e.name)), i > -1 && n > -1 && i != n || (i = l(t), 
                        n = l(e)), i > n ? 1 :-1;
                    });
                },
                embed:function(t) {
                    var e = t.parent;
                    if (e && "object" == e.name) {
                        var i = e.attributes.width, e = e.attributes.height;
                        i && (t.attributes.width = i), e && (t.attributes.height = e);
                    }
                },
                param:function(t) {
                    return t.children = [], t.isEmpty = !0, t;
                },
                a:function(t) {
                    return t.children.length || t.attributes.name || t.attributes["data-cke-saved-name"] ? void 0 :!1;
                },
                span:function(t) {
                    "Apple-style-span" == t.attributes["class"] && delete t.name;
                },
                html:function(t) {
                    delete t.attributes.contenteditable, delete t.attributes["class"];
                },
                body:function(t) {
                    delete t.attributes.spellcheck, delete t.attributes.contenteditable;
                },
                style:function(t) {
                    var e = t.children[0];
                    e && e.value && (e.value = CKEDITOR.tools.trim(e.value)), t.attributes.type || (t.attributes.type = "text/css");
                },
                title:function(t) {
                    var e = t.children[0];
                    e && (e.value = t.attributes["data-cke-title"] || "");
                }
            },
            attributes:{
                "class":function(t) {
                    return CKEDITOR.tools.ltrim(t.replace(/(?:^|\s+)cke_[^\s]*/g, "")) || !1;
                }
            }
        };
        CKEDITOR.env.ie && (D.attributes.style = function(t) {
            return t.replace(/(^|;)([^\:]+)/g, function(t) {
                return t.toLowerCase();
            });
        });
        for (var E in {
            input:1,
            textarea:1
        }) T.elements[E] = c, D.elements[E] = h;
        var x = /<(a|area|img|input|source)\b([^>]*)>/gi, S = /\b(on\w+|href|src|name)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi, O = /(?:<style(?=[ >])[^>]*>[\s\S]*<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi, k = /<cke:encoded>([^<]*)<\/cke:encoded>/gi, I = /(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi, R = /(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi, P = /<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi;
    }(), CKEDITOR.htmlParser.element = function(t, e) {
        this.name = t, this.attributes = e || {}, this.children = [];
        var i = t || "", n = i.match(/^cke:(.*)/);
        n && (i = n[1]), i = !!(CKEDITOR.dtd.$nonBodyContent[i] || CKEDITOR.dtd.$block[i] || CKEDITOR.dtd.$listItem[i] || CKEDITOR.dtd.$tableContent[i] || CKEDITOR.dtd.$nonEditable[i] || "br" == i), 
        this.isEmpty = !!CKEDITOR.dtd.$empty[t], this.isUnknown = !CKEDITOR.dtd[t], this._ = {
            isBlockLike:i,
            hasInlineStarted:this.isEmpty || !i
        };
    }, CKEDITOR.htmlParser.cssStyle = function(t) {
        var e = {};
        return ((t instanceof CKEDITOR.htmlParser.element ? t.attributes.style :t) || "").replace(/&quot;/g, '"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g, function(t, i, n) {
            "font-family" == i && (n = n.replace(/["']/g, "")), e[i.toLowerCase()] = n;
        }), {
            rules:e,
            populate:function(t) {
                var e = this.toString();
                e && (t instanceof CKEDITOR.dom.element ? t.setAttribute("style", e) :t instanceof CKEDITOR.htmlParser.element ? t.attributes.style = e :t.style = e);
            },
            toString:function() {
                var t, i = [];
                for (t in e) e[t] && i.push(t, ":", e[t], ";");
                return i.join("");
            }
        };
    }, function() {
        var t = function(t, e) {
            return t = t[0], e = e[0], e > t ? -1 :t > e ? 1 :0;
        };
        CKEDITOR.htmlParser.element.prototype = {
            type:CKEDITOR.NODE_ELEMENT,
            add:CKEDITOR.htmlParser.fragment.prototype.add,
            clone:function() {
                return new CKEDITOR.htmlParser.element(this.name, this.attributes);
            },
            writeHtml:function(e, i) {
                var n, o, r, s, a = this.attributes, l = this, c = l.name;
                if (l.filterChildren = function() {
                    if (!s) {
                        var t = new CKEDITOR.htmlParser.basicWriter();
                        CKEDITOR.htmlParser.fragment.prototype.writeChildrenHtml.call(l, t, i), l.children = new CKEDITOR.htmlParser.fragment.fromHtml(t.getHtml(), l.clone(), 0).children, 
                        s = 1;
                    }
                }, i) {
                    for (this.parent || i.onRoot(this); ;) {
                        if (!(c = i.onElementName(c))) return;
                        if (l.name = c, !(l = i.onElement(l))) return;
                        if (l.parent = this.parent, l.name == c) break;
                        if (l.type != CKEDITOR.NODE_ELEMENT) return l.writeHtml(e, i), void 0;
                        if (c = l.name, !c) {
                            for (var c = 0, h = this.children.length; h > c; c++) this.children[c].parent = l.parent;
                            return this.writeChildrenHtml.call(l, e, s ? null :i), void 0;
                        }
                    }
                    a = l.attributes;
                }
                e.openTag(c, a);
                for (var h = [], u = 0; 2 > u; u++) for (n in a) if (o = n, r = a[n], 1 == u) h.push([ n, r ]); else if (i) {
                    for (;;) {
                        if (!(o = i.onAttributeName(n))) {
                            delete a[n];
                            break;
                        }
                        if (o == n) break;
                        delete a[n], n = o;
                    }
                    o && ((r = i.onAttribute(l, o, r)) === !1 ? delete a[o] :a[o] = r);
                }
                for (e.sortAttributes && h.sort(t), a = h.length, u = 0; a > u; u++) n = h[u], e.attribute(n[0], n[1]);
                e.openTagClose(c, l.isEmpty), l.isEmpty || (this.writeChildrenHtml.call(l, e, s ? null :i), 
                e.closeTag(c));
            },
            writeChildrenHtml:function() {
                CKEDITOR.htmlParser.fragment.prototype.writeChildrenHtml.apply(this, arguments);
            }
        };
    }(), function() {
        var t = {};
        CKEDITOR.template = function(e) {
            if (t[e]) this.output = t[e]; else {
                var i = e.replace(/'/g, "\\'").replace(/{([^}]+)}/g, function(t, e) {
                    return "',data['" + e + "']==undefined?'{" + e + "}':data['" + e + "'],'";
                });
                this.output = t[e] = Function("data", "buffer", "return buffer?buffer.push('" + i + "'):['" + i + "'].join('');");
            }
        };
    }(), delete CKEDITOR.loadFullCore, CKEDITOR.instances = {}, CKEDITOR.document = new CKEDITOR.dom.document(document), 
    CKEDITOR.add = function(t) {
        CKEDITOR.instances[t.name] = t, t.on("focus", function() {
            CKEDITOR.currentInstance != t && (CKEDITOR.currentInstance = t, CKEDITOR.fire("currentInstance"));
        }), t.on("blur", function() {
            CKEDITOR.currentInstance == t && (CKEDITOR.currentInstance = null, CKEDITOR.fire("currentInstance"));
        }), CKEDITOR.fire("instance", null, t);
    }, CKEDITOR.remove = function(t) {
        delete CKEDITOR.instances[t.name];
    }, function() {
        var t = {};
        CKEDITOR.addTemplate = function(e, i) {
            var n = t[e];
            return n ? n :(n = {
                name:e,
                source:i
            }, CKEDITOR.fire("template", n), t[e] = new CKEDITOR.template(n.source));
        }, CKEDITOR.getTemplate = function(e) {
            return t[e];
        };
    }(), function() {
        var t = [];
        CKEDITOR.addCss = function(e) {
            t.push(e);
        }, CKEDITOR.getCss = function() {
            return t.join("\n");
        };
    }(), CKEDITOR.on("instanceDestroyed", function() {
        CKEDITOR.tools.isEmpty(this.instances) && CKEDITOR.fire("reset");
    }), CKEDITOR.TRISTATE_ON = 1, CKEDITOR.TRISTATE_OFF = 2, CKEDITOR.TRISTATE_DISABLED = 0, 
    function() {
        CKEDITOR.inline = function(t, e) {
            if (!CKEDITOR.env.isCompatible) return null;
            if (t = CKEDITOR.dom.element.get(t), t.getEditor()) throw 'The editor instance "' + t.getEditor().name + '" is already attached to the provided element.';
            var i = new CKEDITOR.editor(e, t, CKEDITOR.ELEMENT_MODE_INLINE);
            return i.setData(t.getHtml(), null, !0), i.on("loaded", function() {
                i.fire("uiReady"), i.editable(t), i.container = t, i.setData(i.getData(1)), i.fire("contentDom"), 
                i.mode = "wysiwyg", i.fire("mode"), i.fireOnce("instanceReady"), CKEDITOR.fire("instanceReady", null, i), 
                i.resetDirty();
            }, null, null, 1e4), i.on("destroy", function() {
                i.element.clearCustomData(), delete i.element;
            }), i;
        }, CKEDITOR.inlineAll = function() {
            var t, e, i;
            for (i in CKEDITOR.dtd.$editable) for (var n = CKEDITOR.document.getElementsByTag(i), o = 0, r = n.count(); r > o; o++) t = n.getItem(o), 
            "true" == t.getAttribute("contenteditable") && (e = {
                element:t,
                config:{}
            }, CKEDITOR.fire("inline", e) !== !1 && CKEDITOR.inline(t, e.config));
        }, CKEDITOR.domReady(function() {
            !CKEDITOR.disableAutoInline && CKEDITOR.inlineAll();
        });
    }(), CKEDITOR.replaceClass = "ckeditor", function() {
        function t(t, o, r, s) {
            if (!CKEDITOR.env.isCompatible) return null;
            if (t = CKEDITOR.dom.element.get(t), t.getEditor()) throw 'The editor instance "' + t.getEditor().name + '" is already attached to the provided element.';
            var a = new CKEDITOR.editor(o, t, s);
            return s == CKEDITOR.ELEMENT_MODE_REPLACE && t.setStyle("visibility", "hidden"), 
            r && a.setData(r, null, !0), a.on("loaded", function() {
                i(a), s == CKEDITOR.ELEMENT_MODE_REPLACE && a.config.autoUpdateElement && n(a), 
                a.setMode(a.config.startupMode, function() {
                    a.fireOnce("instanceReady"), CKEDITOR.fire("instanceReady", null, a), a.resetDirty();
                });
            }), a.on("destroy", e), a;
        }
        function e() {
            var t = this.container, e = this.element;
            t && (t.clearCustomData(), t.remove()), e && (e.clearCustomData(), this.elementMode == CKEDITOR.ELEMENT_MODE_REPLACE && e.show(), 
            delete this.element);
        }
        function i(t) {
            var e = t.name, i = t.element, n = t.elementMode, r = t.fire("uiSpace", {
                space:"top",
                html:""
            }).html, s = t.fireOnce("uiSpace", {
                space:"bottom",
                html:""
            }).html;
            o || (o = CKEDITOR.addTemplate("maincontainer", '<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} ' + CKEDITOR.env.cssClass + '"  dir="{langDir}" lang="{langCode}" role="application" aria-labelledby="cke_{name}_arialbl"><span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span><{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>')), 
            e = CKEDITOR.dom.element.createFromHtml(o.output({
                id:t.id,
                name:e,
                langDir:t.lang.dir,
                langCode:t.langCode,
                voiceLabel:t.lang.editor,
                topHtml:r ? '<span id="' + t.ui.spaceId("top") + '" class="cke_top cke_reset_all" role="presentation" style="height:auto">' + r + "</span>" :"",
                contentId:t.ui.spaceId("contents"),
                bottomHtml:s ? '<span id="' + t.ui.spaceId("bottom") + '" class="cke_bottom cke_reset_all" role="presentation">' + s + "</span>" :"",
                outerEl:CKEDITOR.env.ie ? "span" :"div"
            })), n == CKEDITOR.ELEMENT_MODE_REPLACE ? (i.hide(), e.insertAfter(i)) :i.append(e), 
            t.container = e, r && t.ui.space("top").unselectable(), s && t.ui.space("bottom").unselectable(), 
            i = t.config.width, n = t.config.height, i && e.setStyle("width", CKEDITOR.tools.cssLength(i)), 
            n && t.ui.space("contents").setStyle("height", CKEDITOR.tools.cssLength(n)), e.disableContextMenu(), 
            CKEDITOR.env.webkit && e.on("focus", function() {
                t.focus();
            }), t.fireOnce("uiReady");
        }
        function n(t) {
            var e = t.element;
            if (t.elementMode == CKEDITOR.ELEMENT_MODE_REPLACE && e.is("textarea")) {
                var i = e.$.form && new CKEDITOR.dom.element(e.$.form);
                if (i) {
                    var n = function() {
                        t.updateElement();
                    };
                    i.on("submit", n), i.$.submit.nodeName || i.$.submit.length || (i.$.submit = CKEDITOR.tools.override(i.$.submit, function(e) {
                        return function() {
                            t.updateElement(), e.apply ? e.apply(this, arguments) :e();
                        };
                    })), t.on("destroy", function() {
                        i.removeListener("submit", n);
                    });
                }
            }
        }
        CKEDITOR.replace = function(e, i) {
            return t(e, i, null, CKEDITOR.ELEMENT_MODE_REPLACE);
        }, CKEDITOR.appendTo = function(e, i, n) {
            return t(e, i, n, CKEDITOR.ELEMENT_MODE_APPENDTO);
        }, CKEDITOR.replaceAll = function() {
            for (var t = document.getElementsByTagName("textarea"), e = 0; e < t.length; e++) {
                var i = null, n = t[e];
                if (n.name || n.id) {
                    if ("string" == typeof arguments[0]) {
                        if (!RegExp("(?:^|\\s)" + arguments[0] + "(?:$|\\s)").test(n.className)) continue;
                    } else if ("function" == typeof arguments[0] && (i = {}, arguments[0](n, i) === !1)) continue;
                    this.replace(n, i);
                }
            }
        }, CKEDITOR.editor.prototype.addMode = function(t, e) {
            (this._.modes || (this._.modes = {}))[t] = e;
        }, CKEDITOR.editor.prototype.setMode = function(t, e) {
            var i = this, n = this._.modes;
            if (t != i.mode && n && n[t]) {
                if (i.fire("beforeSetMode", t), i.mode) {
                    var o = i.checkDirty();
                    i._.previousMode = i.mode, i.fire("beforeModeUnload"), i.editable(0), i.ui.space("contents").setHtml(""), 
                    i.mode = "";
                }
                this._.modes[t](function() {
                    i.mode = t, void 0 !== o && (i.mayBeDirty = !0, !o && i.resetDirty()), setTimeout(function() {
                        i.fire("mode"), e && e.call(i);
                    }, 0);
                });
            }
        }, CKEDITOR.editor.prototype.resize = function(t, e, i, n) {
            var o = this.container, r = this.ui.space("contents"), s = CKEDITOR.env.webkit && this.document && this.document.getWindow().$.frameElement, n = n ? o.getChild(1) :o;
            n.setSize("width", t, !0), s && (s.style.width = "1%"), r.setStyle("height", Math.max(e - (i ? 0 :(n.$.offsetHeight || 0) - (r.$.clientHeight || 0)), 0) + "px"), 
            s && (s.style.width = "100%"), this.fire("resize");
        }, CKEDITOR.editor.prototype.getResizable = function(t) {
            return t ? this.ui.space("contents") :this.container;
        };
        var o;
        CKEDITOR.domReady(function() {
            CKEDITOR.replaceClass && CKEDITOR.replaceAll(CKEDITOR.replaceClass);
        });
    }(), CKEDITOR.config.startupMode = "wysiwyg", function() {
        function t(t) {
            var e = t.editor, n = e.editable(), o = t.data.path, r = o.blockLimit, s = t.data.selection.getRanges()[0], a = e.config.enterMode;
            if (CKEDITOR.env.gecko) {
                var l = o.block || o.blockLimit || o.root, c = l && l.getLast(i);
                l && l.isBlockBoundary() && (!c || !(c.type == CKEDITOR.NODE_ELEMENT && c.isBlockBoundary())) && !l.is("pre") && !l.getBogus() && l.appendBogus();
            }
            e.config.autoParagraph !== !1 && a != CKEDITOR.ENTER_BR && s.collapsed && n.equals(r) && !o.block && (n = s.clone(), 
            n.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS), o = new CKEDITOR.dom.walker(n), o.guard = function(t) {
                return !i(t) || t.type == CKEDITOR.NODE_COMMENT || t.isReadOnly();
            }, (!o.checkForward() || n.checkStartOfBlock() && n.checkEndOfBlock()) && (e = s.fixBlock(!0, e.config.enterMode == CKEDITOR.ENTER_DIV ? "div" :"p"), 
            CKEDITOR.env.ie && (e = e.getFirst(i)) && e.type == CKEDITOR.NODE_TEXT && CKEDITOR.tools.trim(e.getText()).match(/^(?:&nbsp;|\xa0)$/) && e.remove(), 
            s.select(), t.cancel()));
        }
        function e(t) {
            var e = t.data.getTarget();
            e.is("input") && (e = e.getAttribute("type"), ("submit" == e || "reset" == e) && t.data.preventDefault());
        }
        function i(t) {
            return l(t) && c(t);
        }
        function n(t, e) {
            return function(i) {
                var n = CKEDITOR.dom.element.get(i.data.$.toElement || i.data.$.fromElement || i.data.$.relatedTarget);
                (!n || !e.equals(n) && !e.contains(n)) && t.call(this, i);
            };
        }
        function o(t) {
            var e, n = t.getRanges()[0], t = t.root, o = n.startPath(), r = {
                table:1,
                ul:1,
                ol:1,
                dl:1
            }, s = CKEDITOR.dom.walker.bogus();
            if (o.contains(r)) {
                var a = n.clone();
                if (a.collapse(1), a.setStartAt(t, CKEDITOR.POSITION_AFTER_START), a = new CKEDITOR.dom.walker(a), 
                o = function(t, n) {
                    return function(t, o) {
                        return o && t.type == CKEDITOR.NODE_ELEMENT && t.is(r) && (e = t), !i(t) || o || n && s(t) ? void 0 :!1;
                    };
                }, a.guard = o(a), a.checkBackward(), e) return a = n.clone(), a.collapse(), a.setEndAt(t, CKEDITOR.POSITION_BEFORE_END), 
                a = new CKEDITOR.dom.walker(a), a.guard = o(a, 1), e = 0, a.checkForward(), e;
            }
            return null;
        }
        function r(t) {
            t.editor.focus(), t.editor.fire("saveSnapshot");
        }
        function s(t, e) {
            var i = t.editor;
            !e && i.getSelection().scrollIntoView(), setTimeout(function() {
                i.fire("saveSnapshot");
            }, 0);
        }
        CKEDITOR.editable = CKEDITOR.tools.createClass({
            base:CKEDITOR.dom.element,
            $:function(t, e) {
                this.base(e.$ || e), this.editor = t, this.hasFocus = !1, this.setup();
            },
            proto:{
                focus:function() {
                    this.$[CKEDITOR.env.ie && this.getDocument().equals(CKEDITOR.document) ? "setActive" :"focus"](), 
                    CKEDITOR.env.safari && !this.isInline() && (CKEDITOR.document.getActive().equals(this.getWindow().getFrame()) || this.getWindow().focus());
                },
                on:function(t, e) {
                    var i = Array.prototype.slice.call(arguments, 0);
                    return CKEDITOR.env.ie && /^focus|blur$/.exec(t) && (t = "focus" == t ? "focusin" :"focusout", 
                    e = n(e, this), i[0] = t, i[1] = e), CKEDITOR.dom.element.prototype.on.apply(this, i);
                },
                attachListener:function(t) {
                    !this._.listeners && (this._.listeners = []);
                    var e = Array.prototype.slice.call(arguments, 1);
                    this._.listeners.push(t.on.apply(t, e));
                },
                clearListeners:function() {
                    var t = this._.listeners;
                    try {
                        for (;t.length; ) t.pop().removeListener();
                    } catch (e) {}
                },
                restoreAttrs:function() {
                    var t, e, i = this._.attrChanges;
                    for (e in i) i.hasOwnProperty(e) && (t = i[e], null !== t ? this.setAttribute(e, t) :this.removeAttribute(e));
                },
                attachClass:function(t) {
                    var e = this.getCustomData("classes");
                    this.hasClass(t) || (!e && (e = []), e.push(t), this.setCustomData("classes", e), 
                    this.addClass(t));
                },
                changeAttr:function(t, e) {
                    var i = this.getAttribute(t);
                    e !== i && (!this._.attrChanges && (this._.attrChanges = {}), t in this._.attrChanges || (this._.attrChanges[t] = i), 
                    this.setAttribute(t, e));
                },
                insertHtml:function(t, e) {
                    r(this), h(this, "text" == e ? "text" :"html", t);
                },
                insertText:function(t) {
                    r(this);
                    var e = this.editor, i = e.getSelection().getStartElement().hasAscendant("pre", !0) ? CKEDITOR.ENTER_BR :e.config.enterMode, e = i == CKEDITOR.ENTER_BR, n = CKEDITOR.tools, t = n.htmlEncode(t.replace(/\r\n/g, "\n")), t = t.replace(/\t/g, "&nbsp;&nbsp; &nbsp;"), i = i == CKEDITOR.ENTER_P ? "p" :"div";
                    if (!e) {
                        var o = /\n{2}/g;
                        if (o.test(t)) var s = "<" + i + ">", a = "</" + i + ">", t = s + t.replace(o, function() {
                            return a + s;
                        }) + a;
                    }
                    t = t.replace(/\n/g, "<br>"), e || (t = t.replace(RegExp("<br>(?=</" + i + ">)"), function(t) {
                        return n.repeat(t, 2);
                    })), t = t.replace(/^ | $/g, "&nbsp;"), t = t.replace(/(>|\s) /g, function(t, e) {
                        return e + "&nbsp;";
                    }).replace(/ (?=<)/g, "&nbsp;"), h(this, "text", t);
                },
                insertElement:function(t) {
                    r(this);
                    for (var e, n, o, a = this.editor, l = a.config.enterMode, c = a.getSelection(), h = c.getRanges(), u = t.getName(), d = CKEDITOR.dtd.$block[u], p = h.length - 1; p >= 0; p--) if (e = h[p], 
                    !e.checkReadOnly()) {
                        e.deleteContents(1), n = !p && t || t.clone(1);
                        var f, g;
                        if (d) for (;(f = e.getCommonAncestor(0, 1)) && (g = CKEDITOR.dtd[f.getName()]) && (!g || !g[u]); ) f.getName() in CKEDITOR.dtd.span ? e.splitElement(f) :e.checkStartOfBlock() && e.checkEndOfBlock() ? (e.setStartBefore(f), 
                        e.collapse(!0), f.remove()) :e.splitBlock(l == CKEDITOR.ENTER_DIV ? "div" :"p", a.editable());
                        e.insertNode(n), o || (o = n);
                    }
                    o && (e.moveToPosition(o, CKEDITOR.POSITION_AFTER_END), d && ((t = o.getNext(i)) && t.type == CKEDITOR.NODE_ELEMENT && t.is(CKEDITOR.dtd.$block) ? t.getDtd()["#"] ? e.moveToElementEditStart(t) :e.moveToElementEditEnd(o) :t || l == CKEDITOR.ENTER_BR || (t = e.fixBlock(!0, l == CKEDITOR.ENTER_DIV ? "div" :"p"), 
                    e.moveToElementEditStart(t)))), c.selectRanges([ e ]), s(this, CKEDITOR.env.opera);
                },
                setData:function(t, e) {
                    !e && this.editor.dataProcessor && (t = this.editor.dataProcessor.toHtml(t)), this.setHtml(t), 
                    this.editor.fire("dataReady");
                },
                getData:function(t) {
                    var e = this.getHtml();
                    return !t && this.editor.dataProcessor && (e = this.editor.dataProcessor.toDataFormat(e)), 
                    e;
                },
                setReadOnly:function(t) {
                    this.setAttribute("contenteditable", !t);
                },
                detach:function() {
                    this.removeClass("cke_editable");
                    var t = this.editor;
                    this._.detach(), delete t.document, delete t.window;
                },
                isInline:function() {
                    return this.getDocument().equals(CKEDITOR.document);
                },
                setup:function() {
                    var t = this.editor;
                    if (this.attachListener(t, "beforeGetData", function() {
                        var e = this.getData();
                        this.is("textarea") || t.config.ignoreEmptyParagraph !== !1 && (e = e.replace(a, function(t, e) {
                            return e;
                        })), t.setData(e, null, 1);
                    }, this), this.attachListener(t, "getSnapshot", function(t) {
                        t.data = this.getData(1);
                    }, this), this.attachListener(t, "afterSetData", function() {
                        this.setData(t.getData(1));
                    }, this), this.attachListener(t, "loadSnapshot", function(t) {
                        this.setData(t.data, 1);
                    }, this), this.attachListener(t, "beforeFocus", function() {
                        var e = t.getSelection();
                        (e = e && e.getNative()) && "Control" == e.type || this.focus();
                    }, this), this.attachListener(t, "insertHtml", function(t) {
                        this.insertHtml(t.data.dataValue, t.data.mode);
                    }, this), this.attachListener(t, "insertElement", function(t) {
                        this.insertElement(t.data);
                    }, this), this.attachListener(t, "insertText", function(t) {
                        this.insertText(t.data);
                    }, this), this.setReadOnly(t.readOnly), this.attachClass("cke_editable"), this.attachClass(t.elementMode == CKEDITOR.ELEMENT_MODE_INLINE ? "cke_editable_inline" :t.elementMode == CKEDITOR.ELEMENT_MODE_REPLACE || t.elementMode == CKEDITOR.ELEMENT_MODE_APPENDTO ? "cke_editable_themed" :""), 
                    this.attachClass("cke_contents_" + t.config.contentsLangDirection), t.keystrokeHandler.blockedKeystrokes[8] = t.readOnly, 
                    t.keystrokeHandler.attach(this), this.on("blur", function(t) {
                        CKEDITOR.env.opera && CKEDITOR.document.getActive().equals(this.isInline() ? this :this.getWindow().getFrame()) ? t.cancel() :this.hasFocus = !1;
                    }, null, null, -1), this.on("focus", function() {
                        this.hasFocus = !0;
                    }, null, null, -1), t.focusManager.add(this), this.equals(CKEDITOR.document.getActive()) && (this.hasFocus = !0, 
                    t.once("contentDom", function() {
                        t.focusManager.focus();
                    })), this.isInline() && this.changeAttr("tabindex", t.tabIndex), !this.is("textarea")) {
                        t.document = this.getDocument(), t.window = this.getWindow();
                        var i = t.document;
                        this.changeAttr("spellcheck", !t.config.disableNativeSpellChecker);
                        var n = t.config.contentsLangDirection;
                        this.getDirection(1) != n && this.changeAttr("dir", n);
                        var r = CKEDITOR.getCss();
                        r && (n = i.getHead(), n.getCustomData("stylesheet") || (r = i.appendStyleText(r), 
                        r = new CKEDITOR.dom.element(r.ownerNode || r.owningElement), n.setCustomData("stylesheet", r), 
                        r.data("cke-temp", 1))), n = i.getCustomData("stylesheet_ref") || 0, i.setCustomData("stylesheet_ref", n + 1), 
                        this.setCustomData("cke_includeReadonly", !t.config.disableReadonlyStyling), this.attachListener(this, "click", function(t) {
                            var t = t.data, e = t.getTarget();
                            e.is("a") && 2 != t.$.button && e.isReadOnly() && t.preventDefault();
                        }), this.attachListener(t, "key", function(e) {
                            if (t.readOnly) return !0;
                            var i, n = e.data.keyCode;
                            if (n in {
                                8:1,
                                46:1
                            }) {
                                var r, s, a, c = t.getSelection(), e = c.getRanges()[0], h = e.startPath(), n = 8 == n;
                                (c = o(c)) ? (t.fire("saveSnapshot"), e.moveToPosition(c, CKEDITOR.POSITION_BEFORE_START), 
                                c.remove(), e.select(), t.fire("saveSnapshot"), i = 1) :e.collapsed && ((r = h.block) && e[n ? "checkStartOfBlock" :"checkEndOfBlock"]() && (a = r[n ? "getPrevious" :"getNext"](l)) && a.is("table") ? (t.fire("saveSnapshot"), 
                                e[n ? "checkEndOfBlock" :"checkStartOfBlock"]() && r.remove(), e["moveToElementEdit" + (n ? "End" :"Start")](a), 
                                e.select(), t.fire("saveSnapshot"), i = 1) :h.blockLimit && h.blockLimit.is("td") && (s = h.blockLimit.getAscendant("table")) && e.checkBoundaryOfElement(s, n ? CKEDITOR.START :CKEDITOR.END) && (a = s[n ? "getPrevious" :"getNext"](l)) ? (t.fire("saveSnapshot"), 
                                e["moveToElementEdit" + (n ? "End" :"Start")](a), e.checkStartOfBlock() && e.checkEndOfBlock() ? a.remove() :e.select(), 
                                t.fire("saveSnapshot"), i = 1) :(s = h.contains([ "td", "th", "caption" ])) && e.checkBoundaryOfElement(s, n ? CKEDITOR.START :CKEDITOR.END) && (a = s[n ? "getPreviousSourceNode" :"getNextSourceNode"](1, CKEDITOR.NODE_ELEMENT)) && !a.isReadOnly() && e.root.contains(a) && (e[n ? "moveToElementEditEnd" :"moveToElementEditStart"](a), 
                                e.select(), i = 1));
                            }
                            return !i;
                        }), CKEDITOR.env.ie && this.attachListener(this, "click", e), !CKEDITOR.env.ie && !CKEDITOR.env.opera && this.attachListener(this, "mousedown", function(e) {
                            var i = e.data.getTarget();
                            i.is("img", "hr", "input", "textarea", "select") && (t.getSelection().selectElement(i), 
                            i.is("input", "textarea", "select") && e.data.preventDefault());
                        }), CKEDITOR.env.gecko && this.attachListener(this, "mouseup", function(e) {
                            if (2 == e.data.$.button && (e = e.data.getTarget(), !e.getOuterHtml().replace(a, ""))) {
                                var i = t.createRange();
                                i.moveToElementEditStart(e), i.select(!0);
                            }
                        }), CKEDITOR.env.webkit && (this.attachListener(this, "click", function(t) {
                            t.data.getTarget().is("input", "select") && t.data.preventDefault();
                        }), this.attachListener(this, "mouseup", function(t) {
                            t.data.getTarget().is("input", "textarea") && t.data.preventDefault();
                        }));
                    }
                }
            },
            _:{
                detach:function() {
                    this.editor.setData(this.editor.getData(), 0, 1), this.clearListeners(), this.restoreAttrs();
                    var t;
                    if (t = this.removeCustomData("classes")) for (;t.length; ) this.removeClass(t.pop());
                    t = this.getDocument();
                    var e = t.getHead();
                    if (e.getCustomData("stylesheet")) {
                        var i = t.getCustomData("stylesheet_ref");
                        --i ? t.setCustomData("stylesheet_ref", i) :(t.removeCustomData("stylesheet_ref"), 
                        e.removeCustomData("stylesheet").remove());
                    }
                    delete this.editor;
                }
            }
        }), CKEDITOR.editor.prototype.editable = function(t) {
            var e = this._.editable;
            return e && t ? 0 :(arguments.length && (e = this._.editable = t ? t instanceof CKEDITOR.editable ? t :new CKEDITOR.editable(this, t) :(e && e.detach(), 
            null)), e);
        };
        var a = /(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi, l = CKEDITOR.dom.walker.whitespaces(!0), c = CKEDITOR.dom.walker.bookmark(!1, !0);
        CKEDITOR.on("instanceLoaded", function(e) {
            var i = e.editor;
            i.on("insertElement", function(t) {
                t = t.data, t.type == CKEDITOR.NODE_ELEMENT && (t.is("input") || t.is("textarea")) && ("false" != t.getAttribute("contentEditable") && t.data("cke-editable", t.hasAttribute("contenteditable") ? "true" :"1"), 
                t.setAttribute("contentEditable", !1));
            }), i.on("selectionChange", function(e) {
                if (!i.readOnly) {
                    var n = i.getSelection();
                    n && !n.isLocked && (n = i.checkDirty(), i.fire("lockSnapshot"), t(e), i.fire("unlockSnapshot"), 
                    !n && i.resetDirty());
                }
            });
        }), CKEDITOR.on("instanceCreated", function(t) {
            var e = t.editor;
            e.on("mode", function() {
                var t = e.editable();
                if (t && t.isInline()) {
                    var i = this.lang.editor + ", " + this.name;
                    if (t.changeAttr("role", "textbox"), t.changeAttr("aria-label", i), t.changeAttr("title", i), 
                    i = this.ui.space(this.elementMode == CKEDITOR.ELEMENT_MODE_INLINE ? "top" :"contents")) {
                        var n = CKEDITOR.tools.getNextId(), o = CKEDITOR.dom.element.createFromHtml('<span id="' + n + '" class="cke_voice_label">' + this.lang.common.editorHelp + "</span>");
                        i.append(o), t.changeAttr("aria-describedby", n);
                    }
                }
            });
        }), CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");
        var h = function() {
            function t(t) {
                return t.type == CKEDITOR.NODE_ELEMENT;
            }
            function e(i, n) {
                var o, r, s, a, c = [], h = n.range.startContainer;
                o = n.range.startPath();
                for (var h = l[h.getName()], u = 0, d = i.getChildren(), p = d.count(), f = -1, g = -1, m = 0, _ = o.contains(l.$list); p > u; ++u) o = d.getItem(u), 
                t(o) ? (s = o.getName(), _ && s in CKEDITOR.dtd.$list ? c = c.concat(e(o, n)) :(a = !!h[s], 
                "br" != s || !o.data("cke-eol") || u && u != p - 1 || (m = (r = u ? c[u - 1].node :d.getItem(u + 1)) && (!t(r) || !r.is("br")), 
                r = r && t(r) && l.$block[r.getName()]), -1 == f && !a && (f = u), a || (g = u), 
                c.push({
                    isElement:1,
                    isLineBreak:m,
                    isBlock:o.isBlockBoundary(),
                    hasBlockSibling:r,
                    node:o,
                    name:s,
                    allowed:a
                }), r = m = 0)) :c.push({
                    isElement:0,
                    node:o,
                    allowed:1
                });
                return f > -1 && (c[f].firstNotAllowed = 1), g > -1 && (c[g].lastNotAllowed = 1), 
                c;
            }
            function n(e, i) {
                var o, r = [], s = e.getChildren(), a = s.count(), c = 0, h = l[i], u = !e.is(l.$inline) || e.is("br");
                for (u && r.push(" "); a > c; c++) o = s.getItem(c), t(o) && !o.is(h) ? r = r.concat(n(o, i)) :r.push(o);
                return u && r.push(" "), r;
            }
            function o(e) {
                return e && t(e) && (e.is(l.$removeEmpty) || e.is("a") && !e.isBlockBoundary());
            }
            function r(e, i, n, o) {
                var s, a, l = e.clone();
                l.setEndAt(i, CKEDITOR.POSITION_BEFORE_END), (s = new CKEDITOR.dom.walker(l).next()) && t(s) && c[s.getName()] && (a = s.getPrevious()) && t(a) && !a.getParent().equals(e.startContainer) && n.contains(a) && o.contains(s) && s.isIdentical(a) && (s.moveChildren(a), 
                s.remove(), r(e, i, n, o));
            }
            function a(e, i) {
                function n(e, i) {
                    return i.isBlock && i.isElement && !i.node.is("br") && t(e) && e.is("br") ? (e.remove(), 
                    1) :void 0;
                }
                var o = i.endContainer.getChild(i.endOffset), r = i.endContainer.getChild(i.endOffset - 1);
                o && n(o, e[e.length - 1]), r && n(r, e[0]) && (i.setEnd(i.endContainer, i.endOffset - 1), 
                i.collapse());
            }
            var l = CKEDITOR.dtd, c = {
                p:1,
                div:1,
                h1:1,
                h2:1,
                h3:1,
                h4:1,
                h5:1,
                h6:1,
                ul:1,
                ol:1,
                li:1,
                pre:1,
                dl:1,
                blockquote:1
            }, h = {
                p:1,
                div:1,
                h1:1,
                h2:1,
                h3:1,
                h4:1,
                h5:1,
                h6:1
            }, u = CKEDITOR.tools.extend({}, l.$inline);
            return delete u.br, function(c, d, p) {
                var f = c.editor;
                c.getDocument();
                var g = f.getSelection().getRanges()[0];
                if (!g.checkReadOnly()) {
                    var m, _, v, y, b, w = new CKEDITOR.dom.elementPath(g.startContainer, g.root).blockLimit || g.root, d = {
                        type:d,
                        editable:c,
                        editor:f,
                        range:g,
                        blockLimit:w,
                        mergeCandidates:[],
                        zombies:[]
                    }, f = d.range, w = d.mergeCandidates;
                    if ("text" == d.type && f.shrink(CKEDITOR.SHRINK_ELEMENT, !0, !1) && (_ = CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>", f.document), 
                    f.insertNode(_), f.setStartAfter(_)), v = new CKEDITOR.dom.elementPath(f.startContainer), 
                    d.endPath = y = new CKEDITOR.dom.elementPath(f.endContainer), !f.collapsed) {
                        m = y.block || y.blockLimit;
                        var C = f.getCommonAncestor();
                        m && !m.equals(C) && !m.contains(C) && f.checkEndOfBlock() && d.zombies.push(m), 
                        f.deleteContents();
                    }
                    for (;(b = t(f.startContainer) && f.startContainer.getChild(f.startOffset - 1)) && t(b) && b.isBlockBoundary() && v.contains(b); ) f.moveToPosition(b, CKEDITOR.POSITION_BEFORE_END);
                    for (r(f, d.blockLimit, v, y), _ && (f.setEndBefore(_), f.collapse(), _.remove()), 
                    _ = f.startPath(), (m = _.contains(o, !1, 1)) && (f.splitElement(m), d.inlineStylesRoot = m, 
                    d.inlineStylesPeak = _.lastElement), _ = f.createBookmark(), (m = _.startNode.getPrevious(i)) && t(m) && o(m) && w.push(m), 
                    (m = _.startNode.getNext(i)) && t(m) && o(m) && w.push(m), m = _.startNode; (m = m.getParent()) && o(m); ) w.push(m);
                    if (f.moveToBookmark(_), p) {
                        if (b = p, p = d.range, "text" == d.type && d.inlineStylesRoot) {
                            for (_ = b, b = d.inlineStylesPeak, f = b.getDocument().createText("{cke-peak}"), 
                            w = d.inlineStylesRoot.getParent(); !b.equals(w); ) f = f.appendTo(b.clone()), b = b.getParent();
                            b = f.getOuterHtml().replace("{cke-peak}", _);
                        }
                        if (_ = d.blockLimit.getName(), /^\s+|\s+$/.test(b) && "span" in CKEDITOR.dtd[_]) {
                            var T = '<span data-cke-marker="1">&nbsp;</span>';
                            b = T + b + T;
                        }
                        if (b = d.editor.dataProcessor.toHtml(b, null, !1), _ = p.document.createElement("body"), 
                        _.setHtml(b), T && (_.getFirst().remove(), _.getLast().remove()), (T = p.startPath().block) && (1 != T.getChildCount() || !T.getBogus())) t:{
                            var D;
                            if (1 == _.getChildCount() && t(D = _.getFirst()) && D.is(h)) {
                                for (T = D.getElementsByTag("*"), p = 0, f = T.count(); f > p; p++) if (b = T.getItem(p), 
                                !b.is(u)) break t;
                                D.moveChildren(D.getParent(1)), D.remove();
                            }
                        }
                        d.dataWrapper = _, D = d.range;
                        var E, T = D.document, p = d.blockLimit;
                        _ = 0;
                        var x;
                        b = [];
                        var S, O, k, I, w = f = 0;
                        v = D.startContainer, m = d.endPath.elements[0];
                        var R;
                        for (y = m.getPosition(v), C = !(!m.getCommonAncestor(v) || y == CKEDITOR.POSITION_IDENTICAL || y & CKEDITOR.POSITION_CONTAINS + CKEDITOR.POSITION_IS_CONTAINED), 
                        v = e(d.dataWrapper, d), a(v, D); _ < v.length; _++) {
                            if (y = v[_], E = y.isLineBreak) {
                                E = D, k = p;
                                var P = void 0, N = void 0;
                                y.hasBlockSibling ? E = 1 :(P = E.startContainer.getAscendant(l.$block, 1), P && P.is({
                                    div:1,
                                    p:1
                                }) ? (N = P.getPosition(k), N == CKEDITOR.POSITION_IDENTICAL || N == CKEDITOR.POSITION_CONTAINS ? E = 0 :(k = E.splitElement(P), 
                                E.moveToPosition(k, CKEDITOR.POSITION_AFTER_START), E = 1)) :E = 0);
                            }
                            if (E) w = _ > 0; else {
                                if (E = D.startPath(), !y.isBlock && (O = d.editor.config.enterMode != CKEDITOR.ENTER_BR && d.editor.config.autoParagraph !== !1 ? d.editor.config.enterMode == CKEDITOR.ENTER_DIV ? "div" :"p" :!1) && !E.block && E.blockLimit && E.blockLimit.equals(D.root) && (O = T.createElement(O), 
                                !CKEDITOR.env.ie && O.appendBogus(), D.insertNode(O), !CKEDITOR.env.ie && (x = O.getBogus()) && x.remove(), 
                                D.moveToPosition(O, CKEDITOR.POSITION_BEFORE_END)), (E = D.startPath().block) && !E.equals(S) && ((x = E.getBogus()) && (x.remove(), 
                                b.push(E)), S = E), y.firstNotAllowed && (f = 1), f && y.isElement) {
                                    for (E = D.startContainer, k = null; E && !l[E.getName()][y.name]; ) {
                                        if (E.equals(p)) {
                                            E = null;
                                            break;
                                        }
                                        k = E, E = E.getParent();
                                    }
                                    if (E) k && (I = D.splitElement(k), d.zombies.push(I), d.zombies.push(k)); else {
                                        k = p.getName(), R = !_, E = _ == v.length - 1, k = n(y.node, k);
                                        for (var P = [], N = k.length, A = 0, M = void 0, L = 0, B = -1; N > A; A++) M = k[A], 
                                        " " == M ? (L || R && !A || (P.push(new CKEDITOR.dom.text(" ")), B = P.length), 
                                        L = 1) :(P.push(M), L = 0);
                                        E && B == P.length && P.pop(), R = P;
                                    }
                                }
                                if (R) {
                                    for (;E = R.pop(); ) D.insertNode(E);
                                    R = 0;
                                } else D.insertNode(y.node);
                                y.lastNotAllowed && _ < v.length - 1 && ((I = C ? m :I) && D.setEndAt(I, CKEDITOR.POSITION_AFTER_START), 
                                f = 0), D.collapse();
                            }
                        }
                        d.dontMoveCaret = w, d.bogusNeededBlocks = b;
                    }
                    x = d.range;
                    var z;
                    for (I = d.bogusNeededBlocks, R = x.createBookmark(); S = d.zombies.pop(); ) S.getParent() && (O = x.clone(), 
                    O.moveToElementEditStart(S), O.removeEmptyBlocksAtEnd());
                    if (I) for (;S = I.pop(); ) S.append(CKEDITOR.env.ie ? x.document.createText(" ") :x.document.createElement("br"));
                    for (;S = d.mergeCandidates.pop(); ) S.mergeSiblings();
                    if (x.moveToBookmark(R), !d.dontMoveCaret) {
                        for (S = t(x.startContainer) && x.startContainer.getChild(x.startOffset - 1); S && t(S) && !S.is(l.$empty); ) {
                            if (S.isBlockBoundary()) x.moveToPosition(S, CKEDITOR.POSITION_BEFORE_END); else {
                                if (o(S) && S.getHtml().match(/(\s|&nbsp;)$/g)) {
                                    z = null;
                                    break;
                                }
                                z = x.clone(), z.moveToPosition(S, CKEDITOR.POSITION_BEFORE_END);
                            }
                            S = S.getLast(i);
                        }
                        z && x.moveToRange(z);
                    }
                    g.select(), s(c);
                }
            };
        }();
    }(), function() {
        function t() {
            var t = this.getSelection(1);
            if (t.getType() != CKEDITOR.SELECTION_NONE) {
                this.fire("selectionCheck", t);
                var e = this.elementPath();
                e.compare(this._.selectionPreviousPath) || (this._.selectionPreviousPath = e, this.fire("selectionChange", {
                    selection:t,
                    path:e
                }));
            }
        }
        function e() {
            a = !0, s || (i.call(this), s = CKEDITOR.tools.setTimeout(i, 200, this));
        }
        function i() {
            s = null, a && (CKEDITOR.tools.setTimeout(t, 0, this), a = !1);
        }
        function n(t) {
            function e(e, i) {
                return e && e.type != CKEDITOR.NODE_TEXT ? t.clone()["moveToElementEdit" + (i ? "End" :"Start")](e) :!1;
            }
            if (!(t.root instanceof CKEDITOR.editable)) return !1;
            var i = t.startContainer, n = t.getPreviousNode(l, null, i), o = t.getNextNode(l, null, i);
            return !e(n) && !e(o, 1) && (n || o || i.type == CKEDITOR.NODE_ELEMENT && i.isBlockBoundary() && i.getBogus()) ? !1 :!0;
        }
        function o(t) {
            return t.getCustomData("cke-fillingChar");
        }
        function r(t, e) {
            var i = t && t.removeCustomData("cke-fillingChar");
            if (i) {
                if (e !== !1) {
                    var n, o = t.getDocument().getSelection().getNative(), r = o && "None" != o.type && o.getRangeAt(0);
                    if (i.getLength() > 1 && r && r.intersectsNode(i.$)) {
                        n = [ o.anchorOffset, o.focusOffset ], r = o.focusNode == i.$ && o.focusOffset > 0, 
                        o.anchorNode == i.$ && o.anchorOffset > 0 && n[0]--, r && n[1]--;
                        var s;
                        r = o, r.isCollapsed || (s = r.getRangeAt(0), s.setStart(r.anchorNode, r.anchorOffset), 
                        s.setEnd(r.focusNode, r.focusOffset), s = s.collapsed), s && n.unshift(n.pop());
                    }
                }
                i.setText(i.getText().replace(/\u200B/g, "")), n && (i = o.getRangeAt(0), i.setStart(i.startContainer, n[0]), 
                i.setEnd(i.startContainer, n[1]), o.removeAllRanges(), o.addRange(i));
            }
        }
        var s, a, l = CKEDITOR.dom.walker.invisible(1);
        CKEDITOR.on("instanceCreated", function(i) {
            function n() {
                var t = o.getSelection();
                t && t.removeAllRanges();
            }
            var o = i.editor;
            o.define("selectionChange", {
                errorProof:1
            }), o.on("contentDom", function() {
                var i = o.document, n = CKEDITOR.document, s = o.editable(), a = i.getBody(), l = i.getDocumentElement(), h = s.isInline();
                if (CKEDITOR.env.ie || CKEDITOR.env.opera || h) {
                    var u;
                    s.attachListener(s, "focus", function() {
                        o.unlockSelection(u), u = 0;
                    }, null, null, -1);
                    var d, p = function() {
                        d = o.getSelection(1), d.lock();
                    };
                    c ? s.attachListener(s, "beforedeactivate", p, null, null, -1) :s.attachListener(o, "selectionCheck", p, null, null, -1), 
                    s.attachListener(s, "blur", function() {
                        o.lockSelection(d), u = 1;
                    }, null, null, -1), s.attachListener(s, "mousedown", function() {
                        u = 0;
                    });
                }
                if (CKEDITOR.env.ie && !h) {
                    var f;
                    if (s.attachListener(s, "mousedown", function(t) {
                        2 == t.data.$.button && "None" == o.document.$.selection.type && (f = o.window.getScrollPosition());
                    }), s.attachListener(s, "mouseup", function(t) {
                        2 == t.data.$.button && f && (o.document.$.documentElement.scrollLeft = f.x, o.document.$.documentElement.scrollTop = f.y), 
                        f = null;
                    }), "BackCompat" != i.$.compatMode && ((CKEDITOR.env.ie7Compat || CKEDITOR.env.ie6Compat) && l.on("mousedown", function(t) {
                        function e(t) {
                            if (t = t.data.$, o) {
                                var e = a.$.createTextRange();
                                try {
                                    e.moveToPoint(t.x, t.y);
                                } catch (i) {}
                                o.setEndPoint(s.compareEndPoints("StartToStart", e) < 0 ? "EndToEnd" :"StartToStart", e), 
                                o.select();
                            }
                        }
                        function i() {
                            l.removeListener("mousemove", e), n.removeListener("mouseup", i), l.removeListener("mouseup", i), 
                            o.select();
                        }
                        if (t = t.data, t.getTarget().is("html") && t.$.y < l.$.clientHeight && t.$.x < l.$.clientWidth) {
                            var o = a.$.createTextRange();
                            try {
                                o.moveToPoint(t.$.x, t.$.y);
                            } catch (r) {}
                            var s = o.duplicate();
                            l.on("mousemove", e), n.on("mouseup", i), l.on("mouseup", i);
                        }
                    }), CKEDITOR.env.version > 7)) {
                        l.on("mousedown", function(t) {
                            t.data.getTarget().is("html") && (n.on("mouseup", g), l.on("mouseup", g));
                        });
                        var g = function() {
                            n.removeListener("mouseup", g), l.removeListener("mouseup", g);
                            var t = CKEDITOR.document.$.selection, e = t.createRange();
                            "None" != t.type && e.parentElement().ownerDocument == i.$ && e.select();
                        };
                    }
                }
                if (s.attachListener(s, "selectionchange", t, o), s.attachListener(s, "keyup", e, o), 
                s.attachListener(s, "focus", function() {
                    o.forceNextSelectionCheck(), o.selectionChange(1);
                }), s.isInline() ? CKEDITOR.env.webkit || CKEDITOR.env.gecko :CKEDITOR.env.opera) {
                    var m;
                    s.attachListener(s, "mousedown", function() {
                        m = 1;
                    }), s.attachListener(i.getDocumentElement(), "mouseup", function() {
                        m && e.call(o), m = 0;
                    });
                } else s.attachListener(s, "mouseup", e, o);
                CKEDITOR.env.webkit && i.on("keydown", function(t) {
                    switch (t.data.getKey()) {
                      case 13:
                      case 33:
                      case 34:
                      case 35:
                      case 36:
                      case 37:
                      case 39:
                      case 8:
                      case 45:
                      case 46:
                        r(o.editable());
                    }
                }, null, null, -1);
            }), o.on("contentDomUnload", o.forceNextSelectionCheck, o), o.on("dataReady", function() {
                o.selectionChange(1);
            }), CKEDITOR.env.ie9Compat && o.on("beforeDestroy", n, null, null, 9), CKEDITOR.env.webkit && o.on("setData", n), 
            o.on("contentDomUnload", function() {
                o.unlockSelection();
            });
        }), CKEDITOR.on("instanceReady", function(t) {
            var e = t.editor, i = e.editable();
            if (CKEDITOR.env.webkit) {
                e.on("selectionChange", function() {
                    var t = o(i);
                    t && (t.getCustomData("ready") ? r(i) :t.setCustomData("ready", 1));
                }, null, null, -1), e.on("beforeSetMode", function() {
                    r(i);
                }, null, null, -1);
                var n, s, t = function() {
                    var t = e.document, r = o(i);
                    r && (t = t.$.defaultView.getSelection(), "Caret" == t.type && t.anchorNode == r.$ && (s = 1), 
                    n = r.getText(), r.setText(n.replace(/\u200B/g, "")));
                }, a = function() {
                    var t = e.document, r = o(i);
                    r && (r.setText(n), s && (t.$.defaultView.getSelection().setPosition(r.$, r.getLength()), 
                    s = 0));
                };
                e.on("beforeUndoImage", t), e.on("afterUndoImage", a), e.on("beforeGetData", t, null, null, 0), 
                e.on("getData", a);
            }
        }), CKEDITOR.editor.prototype.selectionChange = function(i) {
            (i ? t :e).call(this);
        }, CKEDITOR.editor.prototype.getSelection = function(t) {
            return this._.savedSelection && !t ? this._.savedSelection :(t = this.editable()) ? new CKEDITOR.dom.selection(t) :null;
        }, CKEDITOR.editor.prototype.lockSelection = function(t) {
            return t = t || this.getSelection(1), t.getType() != CKEDITOR.SELECTION_NONE ? (!t.isLocked && t.lock(), 
            this._.savedSelection = t, !0) :!1;
        }, CKEDITOR.editor.prototype.unlockSelection = function(t) {
            var e = this._.savedSelection;
            return e ? (e.unlock(t), delete this._.savedSelection, !0) :!1;
        }, CKEDITOR.editor.prototype.forceNextSelectionCheck = function() {
            delete this._.selectionPreviousPath;
        }, CKEDITOR.dom.document.prototype.getSelection = function() {
            return new CKEDITOR.dom.selection(this);
        }, CKEDITOR.dom.range.prototype.select = function() {
            var t = this.root instanceof CKEDITOR.editable ? this.root.editor.getSelection() :new CKEDITOR.dom.selection(this.root);
            return t.selectRanges([ this ]), t;
        }, CKEDITOR.SELECTION_NONE = 1, CKEDITOR.SELECTION_TEXT = 2, CKEDITOR.SELECTION_ELEMENT = 3;
        var c = "function" != typeof window.getSelection;
        CKEDITOR.dom.selection = function(t) {
            var e = t instanceof CKEDITOR.dom.element;
            if (this.document = t instanceof CKEDITOR.dom.document ? t :t.getDocument(), this.root = e ? t :this.document.getBody(), 
            this.isLocked = 0, this._ = {
                cache:{}
            }, CKEDITOR.env.webkit && (t = this.document.getWindow().$.getSelection(), "None" == t.type && this.document.getActive().equals(this.root) || "Caret" == t.type && t.anchorNode.nodeType == CKEDITOR.NODE_DOCUMENT)) {
                var i = new CKEDITOR.dom.range(this.root);
                i.moveToPosition(this.root, CKEDITOR.POSITION_AFTER_START), e = this.document.$.createRange(), 
                e.setStart(i.startContainer.$, i.startOffset), e.collapse(1), t.addRange(e);
            }
            var n, t = this.getNative();
            if (t) if (t.getRangeAt) n = (i = t.rangeCount && t.getRangeAt(0)) && new CKEDITOR.dom.node(i.commonAncestorContainer); else {
                try {
                    i = t.createRange();
                } catch (o) {}
                n = i && CKEDITOR.dom.element.get(i.item && i.item(0) || i.parentElement());
            }
            return n && (this.root.equals(n) || this.root.contains(n)) || (this._.cache.type = CKEDITOR.SELECTION_NONE, 
            this._.cache.startElement = null, this._.cache.selectedElement = null, this._.cache.selectedText = "", 
            this._.cache.ranges = new CKEDITOR.dom.rangeList()), this;
        };
        var h = {
            img:1,
            hr:1,
            li:1,
            table:1,
            tr:1,
            td:1,
            th:1,
            embed:1,
            object:1,
            ol:1,
            ul:1,
            a:1,
            input:1,
            form:1,
            select:1,
            textarea:1,
            button:1,
            fieldset:1,
            thead:1,
            tfoot:1
        };
        CKEDITOR.dom.selection.prototype = {
            getNative:function() {
                return void 0 !== this._.cache.nativeSel ? this._.cache.nativeSel :this._.cache.nativeSel = c ? this.document.$.selection :this.document.getWindow().$.getSelection();
            },
            getType:c ? function() {
                var t = this._.cache;
                if (t.type) return t.type;
                var e = CKEDITOR.SELECTION_NONE;
                try {
                    var i = this.getNative(), n = i.type;
                    "Text" == n && (e = CKEDITOR.SELECTION_TEXT), "Control" == n && (e = CKEDITOR.SELECTION_ELEMENT), 
                    i.createRange().parentElement() && (e = CKEDITOR.SELECTION_TEXT);
                } catch (o) {}
                return t.type = e;
            } :function() {
                var t = this._.cache;
                if (t.type) return t.type;
                var e = CKEDITOR.SELECTION_TEXT, i = this.getNative();
                if (i && i.rangeCount) {
                    if (1 == i.rangeCount) {
                        var i = i.getRangeAt(0), n = i.startContainer;
                        n == i.endContainer && 1 == n.nodeType && i.endOffset - i.startOffset == 1 && h[n.childNodes[i.startOffset].nodeName.toLowerCase()] && (e = CKEDITOR.SELECTION_ELEMENT);
                    }
                } else e = CKEDITOR.SELECTION_NONE;
                return t.type = e;
            },
            getRanges:function() {
                var t = c ? function() {
                    function t(t) {
                        return new CKEDITOR.dom.node(t).getIndex();
                    }
                    var e = function(e, i) {
                        e = e.duplicate(), e.collapse(i);
                        var n = e.parentElement(), o = n.ownerDocument;
                        if (!n.hasChildNodes()) return {
                            container:n,
                            offset:0
                        };
                        for (var r, s, a, l, c = n.children, h = e.duplicate(), u = 0, d = c.length - 1, p = -1; d >= u; ) if (p = Math.floor((u + d) / 2), 
                        r = c[p], h.moveToElementText(r), a = h.compareEndPoints("StartToStart", e), a > 0) d = p - 1; else {
                            if (!(0 > a)) return CKEDITOR.env.ie9Compat && "BR" == r.tagName ? (c = o.defaultView.getSelection(), 
                            {
                                container:c[i ? "anchorNode" :"focusNode"],
                                offset:c[i ? "anchorOffset" :"focusOffset"]
                            }) :{
                                container:n,
                                offset:t(r)
                            };
                            u = p + 1;
                        }
                        if (-1 == p || p == c.length - 1 && 0 > a) {
                            if (h.moveToElementText(n), h.setEndPoint("StartToStart", e), o = h.text.replace(/(\r\n|\r)/g, "\n").length, 
                            c = n.childNodes, !o) return r = c[c.length - 1], r.nodeType != CKEDITOR.NODE_TEXT ? {
                                container:n,
                                offset:c.length
                            } :{
                                container:r,
                                offset:r.nodeValue.length
                            };
                            for (n = c.length; o > 0 && n > 0; ) s = c[--n], s.nodeType == CKEDITOR.NODE_TEXT && (l = s, 
                            o -= s.nodeValue.length);
                            return {
                                container:l,
                                offset:-o
                            };
                        }
                        if (h.collapse(a > 0 ? !0 :!1), h.setEndPoint(a > 0 ? "StartToStart" :"EndToStart", e), 
                        o = h.text.replace(/(\r\n|\r)/g, "\n").length, !o) return {
                            container:n,
                            offset:t(r) + (a > 0 ? 0 :1)
                        };
                        for (;o > 0; ) try {
                            s = r[a > 0 ? "previousSibling" :"nextSibling"], s.nodeType == CKEDITOR.NODE_TEXT && (o -= s.nodeValue.length, 
                            l = s), r = s;
                        } catch (f) {
                            return {
                                container:n,
                                offset:t(r)
                            };
                        }
                        return {
                            container:l,
                            offset:a > 0 ? -o :l.nodeValue.length + o
                        };
                    };
                    return function() {
                        var t = this.getNative(), i = t && t.createRange(), n = this.getType();
                        if (!t) return [];
                        if (n == CKEDITOR.SELECTION_TEXT) return t = new CKEDITOR.dom.range(this.root), 
                        n = e(i, !0), t.setStart(new CKEDITOR.dom.node(n.container), n.offset), n = e(i), 
                        t.setEnd(new CKEDITOR.dom.node(n.container), n.offset), t.endContainer.getPosition(t.startContainer) & CKEDITOR.POSITION_PRECEDING && t.endOffset <= t.startContainer.getIndex() && t.collapse(), 
                        [ t ];
                        if (n == CKEDITOR.SELECTION_ELEMENT) {
                            for (var n = [], o = 0; o < i.length; o++) {
                                for (var r = i.item(o), s = r.parentNode, a = 0, t = new CKEDITOR.dom.range(this.root); a < s.childNodes.length && s.childNodes[a] != r; a++) ;
                                t.setStart(new CKEDITOR.dom.node(s), a), t.setEnd(new CKEDITOR.dom.node(s), a + 1), 
                                n.push(t);
                            }
                            return n;
                        }
                        return [];
                    };
                }() :function() {
                    var t, e = [], i = this.getNative();
                    if (!i) return e;
                    for (var n = 0; n < i.rangeCount; n++) {
                        var o = i.getRangeAt(n);
                        t = new CKEDITOR.dom.range(this.root), t.setStart(new CKEDITOR.dom.node(o.startContainer), o.startOffset), 
                        t.setEnd(new CKEDITOR.dom.node(o.endContainer), o.endOffset), e.push(t);
                    }
                    return e;
                };
                return function(e) {
                    var i = this._.cache;
                    if (i.ranges && !e) return i.ranges;
                    if (i.ranges || (i.ranges = new CKEDITOR.dom.rangeList(t.call(this))), e) for (var n = i.ranges, o = 0; o < n.length; o++) {
                        var r = n[o];
                        if (r.getCommonAncestor().isReadOnly() && n.splice(o, 1), !r.collapsed) {
                            if (r.startContainer.isReadOnly()) for (var s, e = r.startContainer; e && !((s = e.type == CKEDITOR.NODE_ELEMENT) && e.is("body") || !e.isReadOnly()); ) s && "false" == e.getAttribute("contentEditable") && r.setStartAfter(e), 
                            e = e.getParent();
                            e = r.startContainer, s = r.endContainer;
                            var a = r.startOffset, l = r.endOffset, c = r.clone();
                            e && e.type == CKEDITOR.NODE_TEXT && (a >= e.getLength() ? c.setStartAfter(e) :c.setStartBefore(e)), 
                            s && s.type == CKEDITOR.NODE_TEXT && (l ? c.setEndAfter(s) :c.setEndBefore(s)), 
                            e = new CKEDITOR.dom.walker(c), e.evaluator = function(t) {
                                if (t.type == CKEDITOR.NODE_ELEMENT && t.isReadOnly()) {
                                    var e = r.clone();
                                    return r.setEndBefore(t), r.collapsed && n.splice(o--, 1), t.getPosition(c.endContainer) & CKEDITOR.POSITION_CONTAINS || (e.setStartAfter(t), 
                                    e.collapsed || n.splice(o + 1, 0, e)), !0;
                                }
                                return !1;
                            }, e.next();
                        }
                    }
                    return i.ranges;
                };
            }(),
            getStartElement:function() {
                var t = this._.cache;
                if (void 0 !== t.startElement) return t.startElement;
                var e;
                switch (this.getType()) {
                  case CKEDITOR.SELECTION_ELEMENT:
                    return this.getSelectedElement();

                  case CKEDITOR.SELECTION_TEXT:
                    var i = this.getRanges()[0];
                    if (i) {
                        if (i.collapsed) e = i.startContainer, e.type != CKEDITOR.NODE_ELEMENT && (e = e.getParent()); else {
                            for (i.optimize(); e = i.startContainer, i.startOffset == (e.getChildCount ? e.getChildCount() :e.getLength()) && !e.isBlockBoundary(); ) i.setStartAfter(e);
                            if (e = i.startContainer, e.type != CKEDITOR.NODE_ELEMENT) return e.getParent();
                            if (e = e.getChild(i.startOffset), e && e.type == CKEDITOR.NODE_ELEMENT) for (i = e.getFirst(); i && i.type == CKEDITOR.NODE_ELEMENT; ) e = i, 
                            i = i.getFirst(); else e = i.startContainer;
                        }
                        e = e.$;
                    }
                }
                return t.startElement = e ? new CKEDITOR.dom.element(e) :null;
            },
            getSelectedElement:function() {
                var t = this._.cache;
                if (void 0 !== t.selectedElement) return t.selectedElement;
                var e = this, i = CKEDITOR.tools.tryThese(function() {
                    return e.getNative().createRange().item(0);
                }, function() {
                    for (var t, i, n = e.getRanges()[0], o = 2; !(!o || (t = n.getEnclosedNode()) && t.type == CKEDITOR.NODE_ELEMENT && h[t.getName()] && (i = t)); o--) n.shrink(CKEDITOR.SHRINK_ELEMENT);
                    return i.$;
                });
                return t.selectedElement = i ? new CKEDITOR.dom.element(i) :null;
            },
            getSelectedText:function() {
                var t = this._.cache;
                if (void 0 !== t.selectedText) return t.selectedText;
                var e = this.getNative(), e = c ? "Control" == e.type ? "" :e.createRange().text :e.toString();
                return t.selectedText = e;
            },
            lock:function() {
                this.getRanges(), this.getStartElement(), this.getSelectedElement(), this.getSelectedText(), 
                this._.cache.nativeSel = null, this.isLocked = 1;
            },
            unlock:function(t) {
                if (this.isLocked) {
                    if (t) var e = this.getSelectedElement(), i = !e && this.getRanges();
                    this.isLocked = 0, this.reset(), t && (t = e || i[0].getCommonAncestor()) && t.getAscendant("body", 1) && (e ? this.selectElement(e) :this.selectRanges(i));
                }
            },
            reset:function() {
                this._.cache = {};
            },
            selectElement:function(t) {
                var e = new CKEDITOR.dom.range(this.root);
                e.setStartBefore(t), e.setEndAfter(t), this.selectRanges([ e ]);
            },
            selectRanges:function(t) {
                if (t.length) if (this.isLocked) {
                    var e = CKEDITOR.document.getActive();
                    this.unlock(), this.selectRanges(t), this.lock(), !e.equals(this.root) && e.focus();
                } else {
                    if (c) {
                        var i = CKEDITOR.dom.walker.whitespaces(!0), o = /\ufeff|\u00a0/, s = {
                            table:1,
                            tbody:1,
                            tr:1
                        };
                        t.length > 1 && (e = t[t.length - 1], t[0].setEnd(e.endContainer, e.endOffset));
                        var a, l, u, e = t[0], t = e.collapsed, d = e.getEnclosedNode();
                        if (d && d.type == CKEDITOR.NODE_ELEMENT && d.getName() in h && (!d.is("a") || !d.getText())) try {
                            return u = d.$.createControlRange(), u.addElement(d.$), u.select(), void 0;
                        } catch (p) {}
                        (e.startContainer.type == CKEDITOR.NODE_ELEMENT && e.startContainer.getName() in s || e.endContainer.type == CKEDITOR.NODE_ELEMENT && e.endContainer.getName() in s) && e.shrink(CKEDITOR.NODE_ELEMENT, !0), 
                        u = e.createBookmark();
                        var f, s = u.startNode;
                        t || (f = u.endNode), u = e.document.$.body.createTextRange(), u.moveToElementText(s.$), 
                        u.moveStart("character", 1), f ? (o = e.document.$.body.createTextRange(), o.moveToElementText(f.$), 
                        u.setEndPoint("EndToEnd", o), u.moveEnd("character", -1)) :(a = s.getNext(i), l = s.hasAscendant("pre"), 
                        a = !(a && a.getText && a.getText().match(o)) && (l || !s.hasPrevious() || s.getPrevious().is && s.getPrevious().is("br")), 
                        l = e.document.createElement("span"), l.setHtml("&#65279;"), l.insertBefore(s), 
                        a && e.document.createText("").insertBefore(s)), e.setStartBefore(s), s.remove(), 
                        t ? (a ? (u.moveStart("character", -1), u.select(), e.document.$.selection.clear()) :u.select(), 
                        e.moveToPosition(l, CKEDITOR.POSITION_BEFORE_START), l.remove()) :(e.setEndBefore(f), 
                        f.remove(), u.select());
                    } else {
                        if (f = this.getNative(), !f) return;
                        for (CKEDITOR.env.opera && (e = this.document.$.createRange(), e.selectNodeContents(this.root.$), 
                        f.addRange(e)), this.removeAllRanges(), o = 0; o < t.length; o++) if (o < t.length - 1 && (e = t[o], 
                        u = t[o + 1], l = e.clone(), l.setStart(e.endContainer, e.endOffset), l.setEnd(u.startContainer, u.startOffset), 
                        !l.collapsed && (l.shrink(CKEDITOR.NODE_ELEMENT, !0), a = l.getCommonAncestor(), 
                        l = l.getEnclosedNode(), a.isReadOnly() || l && l.isReadOnly()))) u.setStart(e.startContainer, e.startOffset), 
                        t.splice(o--, 1); else {
                            e = t[o], u = this.document.$.createRange(), a = e.startContainer, CKEDITOR.env.opera && e.collapsed && a.type == CKEDITOR.NODE_ELEMENT && (l = a.getChild(e.startOffset - 1), 
                            i = a.getChild(e.startOffset), (!l && !i && a.is(CKEDITOR.dtd.$removeEmpty) || l && l.type == CKEDITOR.NODE_ELEMENT || i && i.type == CKEDITOR.NODE_ELEMENT) && (e.insertNode(this.document.createText("")), 
                            e.collapse(1))), e.collapsed && CKEDITOR.env.webkit && n(e) && (a = this.root, r(a, !1), 
                            l = a.getDocument().createText("​"), a.setCustomData("cke-fillingChar", l), e.insertNode(l), 
                            (a = l.getNext()) && !l.getPrevious() && a.type == CKEDITOR.NODE_ELEMENT && "br" == a.getName() ? (r(this.root), 
                            e.moveToPosition(a, CKEDITOR.POSITION_BEFORE_START)) :e.moveToPosition(l, CKEDITOR.POSITION_AFTER_END)), 
                            u.setStart(e.startContainer.$, e.startOffset);
                            try {
                                u.setEnd(e.endContainer.$, e.endOffset);
                            } catch (g) {
                                if (!(g.toString().indexOf("NS_ERROR_ILLEGAL_VALUE") >= 0)) throw g;
                                e.collapse(1), u.setEnd(e.endContainer.$, e.endOffset);
                            }
                            f.addRange(u);
                        }
                    }
                    this.reset(), this.root.fire("selectionchange");
                }
            },
            createBookmarks:function(t) {
                return this.getRanges().createBookmarks(t);
            },
            createBookmarks2:function(t) {
                return this.getRanges().createBookmarks2(t);
            },
            selectBookmarks:function(t) {
                for (var e = [], i = 0; i < t.length; i++) {
                    var n = new CKEDITOR.dom.range(this.root);
                    n.moveToBookmark(t[i]), e.push(n);
                }
                return this.selectRanges(e), this;
            },
            getCommonAncestor:function() {
                var t = this.getRanges();
                return t[0].startContainer.getCommonAncestor(t[t.length - 1].endContainer);
            },
            scrollIntoView:function() {
                this.type != CKEDITOR.SELECTION_NONE && this.getRanges()[0].scrollIntoView();
            },
            removeAllRanges:function() {
                var t = this.getNative();
                try {
                    t && t[c ? "empty" :"removeAllRanges"]();
                } catch (e) {}
                this.reset();
            }
        };
    }(), CKEDITOR.editor.prototype.attachStyleStateChange = function(t, e) {
        var i = this._.styleStateChangeCallbacks;
        i || (i = this._.styleStateChangeCallbacks = [], this.on("selectionChange", function(t) {
            for (var e = 0; e < i.length; e++) {
                var n = i[e], o = n.style.checkActive(t.data.path) ? CKEDITOR.TRISTATE_ON :CKEDITOR.TRISTATE_OFF;
                n.fn.call(this, o);
            }
        })), i.push({
            style:t,
            fn:e
        });
    }, CKEDITOR.STYLE_BLOCK = 1, CKEDITOR.STYLE_INLINE = 2, CKEDITOR.STYLE_OBJECT = 3, 
    function() {
        function t(t, e) {
            for (var i, n; (t = t.getParent()) && !t.equals(e); ) if (t.getAttribute("data-nostyle")) i = t; else if (!n) {
                var o = t.getAttribute("contentEditable");
                "false" == o ? i = t :"true" == o && (n = 1);
            }
            return i;
        }
        function e(e) {
            var i = e.document;
            if (e.collapsed) i = g(this, i), e.insertNode(i), e.moveToPosition(i, CKEDITOR.POSITION_BEFORE_END); else {
                var n, o = this.element, r = this._.definition, s = r.ignoreReadonly, a = s || r.includeReadonly;
                void 0 == a && (a = e.root.getCustomData("cke_includeReadonly"));
                var l = CKEDITOR.dtd[o] || (n = !0, CKEDITOR.dtd.span);
                e.enlarge(CKEDITOR.ENLARGE_INLINE, 1), e.trim();
                var c, h = e.createBookmark(), u = h.startNode, p = h.endNode, f = u;
                if (!s) {
                    var m = e.getCommonAncestor(), s = t(u, m), m = t(p, m);
                    s && (f = s.getNextSourceNode(!0)), m && (p = m);
                }
                for (f.getPosition(p) == CKEDITOR.POSITION_FOLLOWING && (f = 0); f; ) {
                    if (s = !1, f.equals(p)) f = null, s = !0; else {
                        var _ = f.type, v = _ == CKEDITOR.NODE_ELEMENT ? f.getName() :null, m = v && "false" == f.getAttribute("contentEditable"), y = v && f.getAttribute("data-nostyle");
                        if (v && f.data("cke-bookmark")) {
                            f = f.getNextSourceNode(!0);
                            continue;
                        }
                        if (v && (!l[v] || y || m && !a || (f.getPosition(p) | CKEDITOR.POSITION_PRECEDING | CKEDITOR.POSITION_IDENTICAL | CKEDITOR.POSITION_IS_CONTAINED) != CKEDITOR.POSITION_PRECEDING + CKEDITOR.POSITION_IDENTICAL + CKEDITOR.POSITION_IS_CONTAINED || r.childRule && !r.childRule(f))) s = !0; else {
                            var b = f.getParent();
                            if (!b || !(b.getDtd() || CKEDITOR.dtd.span)[o] && !n || r.parentRule && !r.parentRule(b)) s = !0; else if (c || v && CKEDITOR.dtd.$removeEmpty[v] && (f.getPosition(p) | CKEDITOR.POSITION_PRECEDING | CKEDITOR.POSITION_IDENTICAL | CKEDITOR.POSITION_IS_CONTAINED) != CKEDITOR.POSITION_PRECEDING + CKEDITOR.POSITION_IDENTICAL + CKEDITOR.POSITION_IS_CONTAINED || (c = e.clone(), 
                            c.setStartBefore(f)), _ == CKEDITOR.NODE_TEXT || m || _ == CKEDITOR.NODE_ELEMENT && !f.getChildCount()) {
                                for (var w, _ = f; (s = !_.getNext(E)) && (w = _.getParent(), l[w.getName()]) && (w.getPosition(u) | CKEDITOR.POSITION_FOLLOWING | CKEDITOR.POSITION_IDENTICAL | CKEDITOR.POSITION_IS_CONTAINED) == CKEDITOR.POSITION_FOLLOWING + CKEDITOR.POSITION_IDENTICAL + CKEDITOR.POSITION_IS_CONTAINED && (!r.childRule || r.childRule(w)); ) _ = w;
                                c.setEndAfter(_);
                            }
                        }
                        f = f.getNextSourceNode(y || m && !a);
                    }
                    if (s && c && !c.collapsed) {
                        for (var C, T, D, s = g(this, i), m = s.hasAttributes(), y = c.getCommonAncestor(), _ = {}, v = {}, b = {}, x = {}; s && y; ) {
                            if (y.getName() == o) {
                                for (C in r.attributes) !x[C] && (D = y.getAttribute(T)) && (s.getAttribute(C) == D ? v[C] = 1 :x[C] = 1);
                                for (T in r.styles) !b[T] && (D = y.getStyle(T)) && (s.getStyle(T) == D ? _[T] = 1 :b[T] = 1);
                            }
                            y = y.getParent();
                        }
                        for (C in v) s.removeAttribute(C);
                        for (T in _) s.removeStyle(T);
                        m && !s.hasAttributes() && (s = null), s ? (c.extractContents().appendTo(s), d.call(this, s), 
                        c.insertNode(s), s.mergeSiblings(), CKEDITOR.env.ie || s.$.normalize()) :(s = new CKEDITOR.dom.element("span"), 
                        c.extractContents().appendTo(s), c.insertNode(s), d.call(this, s), s.remove(!0)), 
                        c = null;
                    }
                }
                e.moveToBookmark(h), e.shrink(CKEDITOR.SHRINK_TEXT);
            }
        }
        function i(t) {
            t.enlarge(CKEDITOR.ENLARGE_INLINE, 1);
            var e = t.createBookmark(), i = e.startNode;
            if (t.collapsed) {
                for (var n, o, r = new CKEDITOR.dom.elementPath(i.getParent(), t.root), s = 0; s < r.elements.length && (o = r.elements[s]) && (o != r.block && o != r.blockLimit); s++) if (this.checkElementRemovable(o)) {
                    var a;
                    t.collapsed && (t.checkBoundaryOfElement(o, CKEDITOR.END) || (a = t.checkBoundaryOfElement(o, CKEDITOR.START))) ? (n = o, 
                    n.match = a ? "start" :"end") :(o.mergeSiblings(), o.getName() == this.element ? u.call(this, o) :p(o, v(this)[o.getName()]));
                }
                if (n) {
                    for (o = i, s = 0; a = r.elements[s], !a.equals(n); s++) a.match || (a = a.clone(), 
                    a.append(o), o = a);
                    o["start" == n.match ? "insertBefore" :"insertAfter"](n);
                }
            } else {
                var l = e.endNode, c = this, r = function() {
                    for (var t = new CKEDITOR.dom.elementPath(i.getParent()), e = new CKEDITOR.dom.elementPath(l.getParent()), n = null, o = null, r = 0; r < t.elements.length; r++) {
                        var s = t.elements[r];
                        if (s == t.block || s == t.blockLimit) break;
                        c.checkElementRemovable(s) && (n = s);
                    }
                    for (r = 0; r < e.elements.length && (s = e.elements[r], s != e.block && s != e.blockLimit); r++) c.checkElementRemovable(s) && (o = s);
                    o && l.breakParent(o), n && i.breakParent(n);
                };
                for (r(), n = i; !n.equals(l); ) s = n.getNextSourceNode(), n.type == CKEDITOR.NODE_ELEMENT && this.checkElementRemovable(n) && (n.getName() == this.element ? u.call(this, n) :p(n, v(this)[n.getName()]), 
                s.type == CKEDITOR.NODE_ELEMENT && s.contains(i) && (r(), s = i.getNext())), n = s;
            }
            t.moveToBookmark(e);
        }
        function n(t) {
            var e = t.getEnclosedNode() || t.getCommonAncestor(!1, !0);
            (t = new CKEDITOR.dom.elementPath(e, t.root).contains(this.element, 1)) && !t.isReadOnly() && m(t, this);
        }
        function o(t) {
            var e = t.getCommonAncestor(!0, !0);
            if (t = new CKEDITOR.dom.elementPath(e, t.root).contains(this.element, 1)) {
                var e = this._.definition, i = e.attributes;
                if (i) for (var n in i) t.removeAttribute(n, i[n]);
                if (e.styles) for (var o in e.styles) e.styles.hasOwnProperty(o) && t.removeStyle(o);
            }
        }
        function r(t) {
            var e = t.createBookmark(!0), i = t.createIterator();
            i.enforceRealBlocks = !0, this._.enterMode && (i.enlargeBr = this._.enterMode != CKEDITOR.ENTER_BR);
            for (var n, o = t.document; n = i.getNextParagraph(); ) if (!n.isReadOnly()) {
                var r = g(this, o, n);
                a(n, r);
            }
            t.moveToBookmark(e);
        }
        function s(t) {
            var e = t.createBookmark(1), i = t.createIterator();
            i.enforceRealBlocks = !0, i.enlargeBr = this._.enterMode != CKEDITOR.ENTER_BR;
            for (var n; n = i.getNextParagraph(); ) if (this.checkElementRemovable(n)) if (n.is("pre")) {
                var o = this._.enterMode == CKEDITOR.ENTER_BR ? null :t.document.createElement(this._.enterMode == CKEDITOR.ENTER_P ? "p" :"div");
                o && n.copyAttributes(o), a(n, o);
            } else u.call(this, n);
            t.moveToBookmark(e);
        }
        function a(t, e) {
            var i = !e;
            i && (e = t.getDocument().createElement("div"), t.copyAttributes(e));
            var n = e && e.is("pre"), o = t.is("pre"), r = !n && o;
            if (n && !o) {
                if (o = e, (r = t.getBogus()) && r.remove(), r = t.getHtml(), r = c(r, /(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g, ""), 
                r = r.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi, "$1"), r = r.replace(/([ \t\n\r]+|&nbsp;)/g, " "), 
                r = r.replace(/<br\b[^>]*>/gi, "\n"), CKEDITOR.env.ie) {
                    var s = t.getDocument().createElement("div");
                    s.append(o), o.$.outerHTML = "<pre>" + r + "</pre>", o.copyAttributes(s.getFirst()), 
                    o = s.getFirst().remove();
                } else o.setHtml(r);
                e = o;
            } else r ? e = h(i ? [ t.getHtml() ] :l(t), e) :t.moveChildren(e);
            if (e.replace(t), n) {
                var a, i = e;
                (a = i.getPrevious(x)) && a.is && a.is("pre") && (n = c(a.getHtml(), /\n$/, "") + "\n\n" + c(i.getHtml(), /^\n/, ""), 
                CKEDITOR.env.ie ? i.$.outerHTML = "<pre>" + n + "</pre>" :i.setHtml(n), a.remove());
            } else i && f(e);
        }
        function l(t) {
            t.getName();
            var e = [];
            return c(t.getOuterHtml(), /(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi, function(t, e, i) {
                return e + "</pre>" + i + "<pre>";
            }).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi, function(t, i) {
                e.push(i);
            }), e;
        }
        function c(t, e, i) {
            var n = "", o = "", t = t.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi, function(t, e, i) {
                return e && (n = e), i && (o = i), "";
            });
            return n + t.replace(e, i) + o;
        }
        function h(t, e) {
            var i;
            t.length > 1 && (i = new CKEDITOR.dom.documentFragment(e.getDocument()));
            for (var n = 0; n < t.length; n++) {
                var o = t[n], o = o.replace(/(\r\n|\r)/g, "\n"), o = c(o, /^[ \t]*\n/, ""), o = c(o, /\n$/, ""), o = c(o, /^[ \t]+|[ \t]+$/g, function(t, e) {
                    return 1 == t.length ? "&nbsp;" :e ? " " + CKEDITOR.tools.repeat("&nbsp;", t.length - 1) :CKEDITOR.tools.repeat("&nbsp;", t.length - 1) + " ";
                }), o = o.replace(/\n/g, "<br>"), o = o.replace(/[ \t]{2,}/g, function(t) {
                    return CKEDITOR.tools.repeat("&nbsp;", t.length - 1) + " ";
                });
                if (i) {
                    var r = e.clone();
                    r.setHtml(o), i.append(r);
                } else e.setHtml(o);
            }
            return i || e;
        }
        function u(t) {
            var e, i = this._.definition, n = i.attributes, i = i.styles, o = v(this)[t.getName()], r = CKEDITOR.tools.isEmpty(n) && CKEDITOR.tools.isEmpty(i);
            for (e in n) ("class" != e && !this._.definition.fullMatch || t.getAttribute(e) == y(e, n[e])) && (r = t.hasAttribute(e), 
            t.removeAttribute(e));
            for (var s in i) this._.definition.fullMatch && t.getStyle(s) != y(s, i[s], !0) || (r = r || !!t.getStyle(s), 
            t.removeStyle(s));
            p(t, o, w[t.getName()]), r && (this._.definition.alwaysRemoveElement ? f(t, 1) :!CKEDITOR.dtd.$block[t.getName()] || this._.enterMode == CKEDITOR.ENTER_BR && !t.hasAttributes() ? f(t) :t.renameNode(this._.enterMode == CKEDITOR.ENTER_P ? "p" :"div"));
        }
        function d(t) {
            for (var e = v(this), i = t.getElementsByTag(this.element), n = i.count(); --n >= 0; ) u.call(this, i.getItem(n));
            for (var o in e) if (o != this.element) for (i = t.getElementsByTag(o), n = i.count() - 1; n >= 0; n--) {
                var r = i.getItem(n);
                p(r, e[o]);
            }
        }
        function p(t, e, i) {
            if (e = e && e.attributes) for (var n = 0; n < e.length; n++) {
                var o, r = e[n][0];
                if (o = t.getAttribute(r)) {
                    var s = e[n][1];
                    (null === s || s.test && s.test(o) || "string" == typeof s && o == s) && t.removeAttribute(r);
                }
            }
            i || f(t);
        }
        function f(t, e) {
            if (!t.hasAttributes() || e) if (CKEDITOR.dtd.$block[t.getName()]) {
                var i = t.getPrevious(x), n = t.getNext(x);
                i && (i.type == CKEDITOR.NODE_TEXT || !i.isBlockBoundary({
                    br:1
                })) && t.append("br", 1), n && (n.type == CKEDITOR.NODE_TEXT || !n.isBlockBoundary({
                    br:1
                })) && t.append("br"), t.remove(!0);
            } else i = t.getFirst(), n = t.getLast(), t.remove(!0), i && (i.type == CKEDITOR.NODE_ELEMENT && i.mergeSiblings(), 
            n && !i.equals(n) && n.type == CKEDITOR.NODE_ELEMENT && n.mergeSiblings());
        }
        function g(t, e, i) {
            var n;
            return n = t.element, "*" == n && (n = "span"), n = new CKEDITOR.dom.element(n, e), 
            i && i.copyAttributes(n), n = m(n, t), e.getCustomData("doc_processing_style") && n.hasAttribute("id") ? n.removeAttribute("id") :e.setCustomData("doc_processing_style", 1), 
            n;
        }
        function m(t, e) {
            var i = e._.definition, n = i.attributes, i = CKEDITOR.style.getStyleText(i);
            if (n) for (var o in n) t.setAttribute(o, n[o]);
            return i && t.setAttribute("style", i), t;
        }
        function _(t, e) {
            for (var i in t) t[i] = t[i].replace(D, function(t, i) {
                return e[i];
            });
        }
        function v(t) {
            if (t._.overrides) return t._.overrides;
            var e = t._.overrides = {}, i = t._.definition.overrides;
            if (i) {
                CKEDITOR.tools.isArray(i) || (i = [ i ]);
                for (var n = 0; n < i.length; n++) {
                    var o, r, s = i[n];
                    if ("string" == typeof s ? o = s.toLowerCase() :(o = s.element ? s.element.toLowerCase() :t.element, 
                    r = s.attributes), s = e[o] || (e[o] = {}), r) {
                        var a, s = s.attributes = s.attributes || [];
                        for (a in r) s.push([ a.toLowerCase(), r[a] ]);
                    }
                }
            }
            return e;
        }
        function y(t, e, i) {
            var n = new CKEDITOR.dom.element("span");
            return n[i ? "setStyle" :"setAttribute"](t, e), n[i ? "getStyle" :"getAttribute"](t);
        }
        function b(t, e) {
            for (var i, n = t.document, o = t.getRanges(), r = e ? this.removeFromRange :this.applyToRange, s = o.createIterator(); i = s.getNextRange(); ) r.call(this, i);
            t.selectRanges(o), n.removeCustomData("doc_processing_style");
        }
        var w = {
            address:1,
            div:1,
            h1:1,
            h2:1,
            h3:1,
            h4:1,
            h5:1,
            h6:1,
            p:1,
            pre:1,
            section:1,
            header:1,
            footer:1,
            nav:1,
            article:1,
            aside:1,
            figure:1,
            dialog:1,
            hgroup:1,
            time:1,
            meter:1,
            menu:1,
            command:1,
            keygen:1,
            output:1,
            progress:1,
            details:1,
            datagrid:1,
            datalist:1
        }, C = {
            a:1,
            embed:1,
            hr:1,
            img:1,
            li:1,
            object:1,
            ol:1,
            table:1,
            td:1,
            tr:1,
            th:1,
            ul:1,
            dl:1,
            dt:1,
            dd:1,
            form:1,
            audio:1,
            video:1
        }, T = /\s*(?:;\s*|$)/, D = /#\((.+?)\)/g, E = CKEDITOR.dom.walker.bookmark(0, 1), x = CKEDITOR.dom.walker.whitespaces(1);
        CKEDITOR.style = function(t, e) {
            var i = t.attributes;
            i && i.style && (t.styles = CKEDITOR.tools.extend({}, t.styles, CKEDITOR.tools.parseCssText(i.style)), 
            delete i.style), e && (t = CKEDITOR.tools.clone(t), _(t.attributes, e), _(t.styles, e)), 
            i = this.element = t.element ? "string" == typeof t.element ? t.element.toLowerCase() :t.element :"*", 
            this.type = t.type || (w[i] ? CKEDITOR.STYLE_BLOCK :C[i] ? CKEDITOR.STYLE_OBJECT :CKEDITOR.STYLE_INLINE), 
            "object" == typeof this.element && (this.type = CKEDITOR.STYLE_OBJECT), this._ = {
                definition:t
            };
        }, CKEDITOR.editor.prototype.applyStyle = function(t) {
            b.call(t, this.getSelection());
        }, CKEDITOR.editor.prototype.removeStyle = function(t) {
            b.call(t, this.getSelection(), 1);
        }, CKEDITOR.style.prototype = {
            apply:function(t) {
                b.call(this, t.getSelection());
            },
            remove:function(t) {
                b.call(this, t.getSelection(), 1);
            },
            applyToRange:function(t) {
                return (this.applyToRange = this.type == CKEDITOR.STYLE_INLINE ? e :this.type == CKEDITOR.STYLE_BLOCK ? r :this.type == CKEDITOR.STYLE_OBJECT ? n :null).call(this, t);
            },
            removeFromRange:function(t) {
                return (this.removeFromRange = this.type == CKEDITOR.STYLE_INLINE ? i :this.type == CKEDITOR.STYLE_BLOCK ? s :this.type == CKEDITOR.STYLE_OBJECT ? o :null).call(this, t);
            },
            applyToObject:function(t) {
                m(t, this);
            },
            checkActive:function(t) {
                switch (this.type) {
                  case CKEDITOR.STYLE_BLOCK:
                    return this.checkElementRemovable(t.block || t.blockLimit, !0);

                  case CKEDITOR.STYLE_OBJECT:
                  case CKEDITOR.STYLE_INLINE:
                    for (var e, i = t.elements, n = 0; n < i.length; n++) if (e = i[n], this.type != CKEDITOR.STYLE_INLINE || e != t.block && e != t.blockLimit) {
                        if (this.type == CKEDITOR.STYLE_OBJECT) {
                            var o = e.getName();
                            if (!("string" == typeof this.element ? o == this.element :o in this.element)) continue;
                        }
                        if (this.checkElementRemovable(e, !0)) return !0;
                    }
                }
                return !1;
            },
            checkApplicable:function(t) {
                switch (this.type) {
                  case CKEDITOR.STYLE_OBJECT:
                    return t.contains(this.element);
                }
                return !0;
            },
            checkElementMatch:function(t, e) {
                var i = this._.definition;
                if (!t || !i.ignoreReadonly && t.isReadOnly()) return !1;
                var n = t.getName();
                if ("string" == typeof this.element ? n == this.element :n in this.element) {
                    if (!e && !t.hasAttributes()) return !0;
                    if (n = i._AC) i = n; else {
                        var n = {}, o = 0, r = i.attributes;
                        if (r) for (var s in r) o++, n[s] = r[s];
                        (s = CKEDITOR.style.getStyleText(i)) && (n.style || o++, n.style = s), n._length = o, 
                        i = i._AC = n;
                    }
                    if (!i._length) return !0;
                    for (var a in i) if ("_length" != a) {
                        if (o = t.getAttribute(a) || "", "style" == a) t:{
                            n = i[a], "string" == typeof n && (n = CKEDITOR.tools.parseCssText(n)), "string" == typeof o && (o = CKEDITOR.tools.parseCssText(o, !0)), 
                            s = void 0;
                            for (s in n) if (!(s in o) || o[s] != n[s] && "inherit" != n[s] && "inherit" != o[s]) {
                                n = !1;
                                break t;
                            }
                            n = !0;
                        } else n = i[a] == o;
                        if (n) {
                            if (!e) return !0;
                        } else if (e) return !1;
                    }
                    if (e) return !0;
                }
                return !1;
            },
            checkElementRemovable:function(t, e) {
                if (this.checkElementMatch(t, e)) return !0;
                var i = v(this)[t.getName()];
                if (i) {
                    var n;
                    if (!(i = i.attributes)) return !0;
                    for (var o = 0; o < i.length; o++) if (n = i[o][0], n = t.getAttribute(n)) {
                        var r = i[o][1];
                        if (null === r || "string" == typeof r && n == r || r.test(n)) return !0;
                    }
                }
                return !1;
            },
            buildPreview:function(t) {
                var e = this._.definition, i = [], n = e.element;
                "bdo" == n && (n = "span");
                var i = [ "<", n ], o = e.attributes;
                if (o) for (var r in o) i.push(" ", r, '="', o[r], '"');
                return (o = CKEDITOR.style.getStyleText(e)) && i.push(' style="', o, '"'), i.push(">", t || e.name, "</", n, ">"), 
                i.join("");
            }
        }, CKEDITOR.style.getStyleText = function(t) {
            var e = t._ST;
            if (e) return e;
            var e = t.styles, i = t.attributes && t.attributes.style || "", n = "";
            i.length && (i = i.replace(T, ";"));
            for (var o in e) {
                var r = e[o], s = (o + ":" + r).replace(T, ";");
                "inherit" == r ? n += s :i += s;
            }
            return i.length && (i = CKEDITOR.tools.normalizeCssText(i, !0)), t._ST = i + n;
        };
    }(), CKEDITOR.styleCommand = function(t) {
        this.style = t;
    }, CKEDITOR.styleCommand.prototype.exec = function(t) {
        t.focus(), this.state == CKEDITOR.TRISTATE_OFF ? t.applyStyle(this.style) :this.state == CKEDITOR.TRISTATE_ON && t.removeStyle(this.style);
    }, CKEDITOR.stylesSet = new CKEDITOR.resourceManager("", "stylesSet"), CKEDITOR.addStylesSet = CKEDITOR.tools.bind(CKEDITOR.stylesSet.add, CKEDITOR.stylesSet), 
    CKEDITOR.loadStylesSet = function(t, e, i) {
        CKEDITOR.stylesSet.addExternal(t, e, ""), CKEDITOR.stylesSet.load(t, i);
    }, CKEDITOR.editor.prototype.getStylesSet = function(t) {
        if (this._.stylesDefinitions) t(this._.stylesDefinitions); else {
            var e = this, i = e.config.stylesCombo_stylesSet || e.config.stylesSet || "default";
            if (i instanceof Array) e._.stylesDefinitions = i, t(i); else {
                var i = i.split(":"), n = i[0];
                CKEDITOR.stylesSet.addExternal(n, i[1] ? i.slice(1).join(":") :CKEDITOR.getUrl("styles.js"), ""), 
                CKEDITOR.stylesSet.load(n, function(i) {
                    e._.stylesDefinitions = i[n], t(e._.stylesDefinitions);
                });
            }
        }
    }, CKEDITOR.dom.comment = function(t, e) {
        "string" == typeof t && (t = (e ? e.$ :document).createComment(t)), CKEDITOR.dom.domObject.call(this, t);
    }, CKEDITOR.dom.comment.prototype = new CKEDITOR.dom.node(), CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype, {
        type:CKEDITOR.NODE_COMMENT,
        getOuterHtml:function() {
            return "<!--" + this.$.nodeValue + "-->";
        }
    }), function() {
        var t, e = {};
        for (t in CKEDITOR.dtd.$blockLimit) t in CKEDITOR.dtd.$list || (e[t] = 1);
        var i = {};
        for (t in CKEDITOR.dtd.$block) t in CKEDITOR.dtd.$blockLimit || t in CKEDITOR.dtd.$empty || (i[t] = 1);
        CKEDITOR.dom.elementPath = function(t, n) {
            var o = null, r = null, s = [], n = n || t.getDocument().getBody(), a = t;
            do if (a.type == CKEDITOR.NODE_ELEMENT) {
                if (s.push(a), !this.lastElement && (this.lastElement = a, a.is(CKEDITOR.dtd.$object))) continue;
                var l = a.getName();
                if (!r && (!o && i[l] && (o = a), e[l])) {
                    var c;
                    if (c = !o) {
                        if (l = "div" == l) {
                            t:{
                                l = a.getChildren(), c = 0;
                                for (var h = l.count(); h > c; c++) {
                                    var u = l.getItem(c);
                                    if (u.type == CKEDITOR.NODE_ELEMENT && CKEDITOR.dtd.$block[u.getName()]) {
                                        l = !0;
                                        break t;
                                    }
                                }
                                l = !1;
                            }
                            l = !l && !a.equals(n);
                        }
                        c = l;
                    }
                    c ? o = a :r = a;
                }
                if (a.equals(n)) break;
            } while (a = a.getParent());
            this.block = o, this.blockLimit = r, this.root = n, this.elements = s;
        };
    }(), CKEDITOR.dom.elementPath.prototype = {
        compare:function(t) {
            var e = this.elements, t = t && t.elements;
            if (!t || e.length != t.length) return !1;
            for (var i = 0; i < e.length; i++) if (!e[i].equals(t[i])) return !1;
            return !0;
        },
        contains:function(t, e, i) {
            var n;
            "string" == typeof t && (n = function(e) {
                return e.getName() == t;
            }), t instanceof CKEDITOR.dom.element ? n = function(e) {
                return e.equals(t);
            } :CKEDITOR.tools.isArray(t) ? n = function(e) {
                return CKEDITOR.tools.indexOf(t, e.getName()) > -1;
            } :"function" == typeof t ? n = t :"object" == typeof t && (n = function(e) {
                return e.getName() in t;
            });
            var o = this.elements, r = o.length;
            for (e && r--, i && (o = Array.prototype.slice.call(o, 0), o.reverse()), e = 0; r > e; e++) if (n(o[e])) return o[e];
            return null;
        },
        isContextFor:function(t) {
            var e;
            return t in CKEDITOR.dtd.$block ? (e = this.contains(CKEDITOR.dtd.$intermediate) || this.root.equals(this.block) && this.block || this.blockLimit, 
            !!e.getDtd()[t]) :!0;
        },
        direction:function() {
            return (this.block || this.blockLimit || this.root).getDirection(1);
        }
    }, CKEDITOR.dom.text = function(t, e) {
        "string" == typeof t && (t = (e ? e.$ :document).createTextNode(t)), this.$ = t;
    }, CKEDITOR.dom.text.prototype = new CKEDITOR.dom.node(), CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype, {
        type:CKEDITOR.NODE_TEXT,
        getLength:function() {
            return this.$.nodeValue.length;
        },
        getText:function() {
            return this.$.nodeValue;
        },
        setText:function(t) {
            this.$.nodeValue = t;
        },
        split:function(t) {
            var e = this.$.parentNode, i = e.childNodes.length, n = this.getLength(), o = this.getDocument(), r = new CKEDITOR.dom.text(this.$.splitText(t), o);
            return e.childNodes.length == i && (t >= n ? (r = o.createText(""), r.insertAfter(this)) :(t = o.createText(""), 
            t.insertAfter(r), t.remove())), r;
        },
        substring:function(t, e) {
            return "number" != typeof e ? this.$.nodeValue.substr(t) :this.$.nodeValue.substring(t, e);
        }
    }), function() {
        function t(t, e, i) {
            var n = t.serializable, o = e[i ? "endContainer" :"startContainer"], r = i ? "endOffset" :"startOffset", s = n ? e.document.getById(t.startNode) :t.startNode, t = n ? e.document.getById(t.endNode) :t.endNode;
            return o.equals(s.getPrevious()) ? (e.startOffset = e.startOffset - o.getLength() - t.getPrevious().getLength(), 
            o = t.getNext()) :o.equals(t.getPrevious()) && (e.startOffset = e.startOffset - o.getLength(), 
            o = t.getNext()), o.equals(s.getParent()) && e[r]++, o.equals(t.getParent()) && e[r]++, 
            e[i ? "endContainer" :"startContainer"] = o, e;
        }
        CKEDITOR.dom.rangeList = function(t) {
            return t instanceof CKEDITOR.dom.rangeList ? t :(t ? t instanceof CKEDITOR.dom.range && (t = [ t ]) :t = [], 
            CKEDITOR.tools.extend(t, e));
        };
        var e = {
            createIterator:function() {
                var t, e = this, i = CKEDITOR.dom.walker.bookmark(), n = [];
                return {
                    getNextRange:function(o) {
                        t = void 0 == t ? 0 :t + 1;
                        var r = e[t];
                        if (r && e.length > 1) {
                            if (!t) for (var s = e.length - 1; s >= 0; s--) n.unshift(e[s].createBookmark(!0));
                            if (o) for (var a = 0; e[t + a + 1]; ) {
                                for (var l = r.document, o = 0, s = l.getById(n[a].endNode), l = l.getById(n[a + 1].startNode); ;) {
                                    if (s = s.getNextSourceNode(!1), l.equals(s)) o = 1; else if (i(s) || s.type == CKEDITOR.NODE_ELEMENT && s.isBlockBoundary()) continue;
                                    break;
                                }
                                if (!o) break;
                                a++;
                            }
                            for (r.moveToBookmark(n.shift()); a--; ) s = e[++t], s.moveToBookmark(n.shift()), 
                            r.setEnd(s.endContainer, s.endOffset);
                        }
                        return r;
                    }
                };
            },
            createBookmarks:function(e) {
                for (var i, n = [], o = 0; o < this.length; o++) {
                    n.push(i = this[o].createBookmark(e, !0));
                    for (var r = o + 1; r < this.length; r++) this[r] = t(i, this[r]), this[r] = t(i, this[r], !0);
                }
                return n;
            },
            createBookmarks2:function(t) {
                for (var e = [], i = 0; i < this.length; i++) e.push(this[i].createBookmark2(t));
                return e;
            },
            moveToBookmarks:function(t) {
                for (var e = 0; e < this.length; e++) this[e].moveToBookmark(t[e]);
            }
        };
    }(), function() {
        function t() {
            return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1] || "skins/" + CKEDITOR.skinName.split(",")[0] + "/");
        }
        function e(e) {
            var i = CKEDITOR.skin["ua_" + e], n = CKEDITOR.env;
            if (i) for (var o, i = i.split(",").sort(function(t, e) {
                return t > e ? -1 :1;
            }), r = 0; r < i.length; r++) if (o = i[r], n.ie && (o.replace(/^ie/, "") == n.version || n.quirks && "iequirks" == o) && (o = "ie"), 
            n[o]) {
                e += "_" + i[r];
                break;
            }
            return CKEDITOR.getUrl(t() + e + ".css");
        }
        function i(t, i) {
            r[t] || (CKEDITOR.document.appendStyleSheet(e(t)), r[t] = 1), i && i();
        }
        function n(t) {
            var e = t.getById(s);
            return e || (e = t.getHead().append("style"), e.setAttribute("id", s), e.setAttribute("type", "text/css")), 
            e;
        }
        function o(t, e, i) {
            var n, o, r;
            if (CKEDITOR.env.webkit) for (e = e.split("}").slice(0, -1), o = 0; o < e.length; o++) e[o] = e[o].split("{");
            for (var s = 0; s < t.length; s++) if (CKEDITOR.env.webkit) for (o = 0; o < e.length; o++) {
                for (r = e[o][1], n = 0; n < i.length; n++) r = r.replace(i[n][0], i[n][1]);
                t[s].$.sheet.addRule(e[o][0], r);
            } else {
                for (r = e, n = 0; n < i.length; n++) r = r.replace(i[n][0], i[n][1]);
                CKEDITOR.env.ie ? t[s].$.styleSheet.cssText = t[s].$.styleSheet.cssText + r :t[s].$.innerHTML = t[s].$.innerHTML + r;
            }
        }
        var r = {};
        CKEDITOR.skin = {
            path:t,
            loadPart:function(e, n) {
                CKEDITOR.skin.name != CKEDITOR.skinName.split(",")[0] ? CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(t() + "skin.js"), function() {
                    i(e, n);
                }) :i(e, n);
            },
            getPath:function(t) {
                return CKEDITOR.getUrl(e(t));
            },
            icons:{},
            addIcon:function(t, e, i) {
                t = t.toLowerCase(), this.icons[t] || (this.icons[t] = {
                    path:e,
                    offset:i || 0
                });
            },
            getIconStyle:function(t, e, i, n) {
                var o;
                return t && (t = t.toLowerCase(), e && (o = this.icons[t + "-rtl"]), o || (o = this.icons[t])), 
                t = i || o && o.path || "", n = n || o && o.offset, t && "background-image:url(" + CKEDITOR.getUrl(t) + ");background-position:0 " + n + "px;";
            }
        }, CKEDITOR.tools.extend(CKEDITOR.editor.prototype, {
            getUiColor:function() {
                return this.uiColor;
            },
            setUiColor:function(t) {
                var e = n(CKEDITOR.document);
                return (this.setUiColor = function(t) {
                    var i = CKEDITOR.skin.chameleon, n = [ [ l, t ] ];
                    this.uiColor = t, o([ e ], i(this, "editor"), n), o(a, i(this, "panel"), n);
                }).call(this, t);
            }
        });
        var s = "cke_ui_color", a = [], l = /\$color/g;
        CKEDITOR.on("instanceLoaded", function(t) {
            if (!CKEDITOR.env.ie || !CKEDITOR.env.quirks) {
                var e = t.editor, t = function(t) {
                    if (t = (t.data[0] || t.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument(), 
                    !t.getById("cke_ui_color")) {
                        t = n(t), a.push(t);
                        var i = e.getUiColor();
                        i && o([ t ], CKEDITOR.skin.chameleon(e, "panel"), [ [ l, i ] ]);
                    }
                };
                e.on("panelShow", t), e.on("menuShow", t), e.config.uiColor && e.setUiColor(e.config.uiColor);
            }
        });
    }(), function() {
        if (CKEDITOR.env.webkit) CKEDITOR.env.hc = !1; else {
            var t = CKEDITOR.dom.element.createFromHtml('<div style="width:0px;height:0px;position:absolute;left:-10000px;border: 1px solid;border-color: red blue;"></div>', CKEDITOR.document);
            t.appendTo(CKEDITOR.document.getHead());
            try {
                CKEDITOR.env.hc = t.getComputedStyle("border-top-color") == t.getComputedStyle("border-right-color");
            } catch (e) {
                CKEDITOR.env.hc = !1;
            }
            t.remove();
        }
        if (CKEDITOR.env.hc && (CKEDITOR.env.cssClass = CKEDITOR.env.cssClass + " cke_hc"), 
        CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"), CKEDITOR.status = "loaded", 
        CKEDITOR.fireOnce("loaded"), t = CKEDITOR._.pending) {
            delete CKEDITOR._.pending;
            for (var i = 0; i < t.length; i++) CKEDITOR.editor.prototype.constructor.apply(t[i][0], t[i][1]), 
            CKEDITOR.add(t[i][0]);
        }
    }(), /*
 Copyright (c) 2003-2013, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.html or http://ckeditor.com/license
*/
    CKEDITOR.skin.name = "moono", CKEDITOR.skin.ua_editor = "ie,iequirks,ie7,ie8,gecko", 
    CKEDITOR.skin.ua_dialog = "ie,iequirks,ie7,ie8,opera", CKEDITOR.skin.chameleon = function() {
        var t = function() {
            return function(t, e) {
                for (var i = t.match(/[^#]./g), n = 0; 3 > n; n++) {
                    var o, r = i, s = n;
                    o = parseInt(i[n], 16), o = ("0" + (0 > e ? 0 | o * (1 + e) :0 | o + (255 - o) * e).toString(16)).slice(-2), 
                    r[s] = o;
                }
                return "#" + i.join("");
            };
        }(), e = function() {
            var t = new CKEDITOR.template("background:#{to};background-image:-webkit-gradient(linear,lefttop,leftbottom,from({from}),to({to}));background-image:-moz-linear-gradient(top,{from},{to});background-image:-webkit-linear-gradient(top,{from},{to});background-image:-o-linear-gradient(top,{from},{to});background-image:-ms-linear-gradient(top,{from},{to});background-image:linear-gradient(top,{from},{to});filter:progid:DXImageTransform.Microsoft.gradient(gradientType=0,startColorstr='{from}',endColorstr='{to}');");
            return function(e, i) {
                return t.output({
                    from:e,
                    to:i
                });
            };
        }(), i = {
            editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ {defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_bottom [{defaultGradient}border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [{defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [{defaultGradient}outline-color:{defaultBorder};border-top-color:{defaultBorder};] {id} .cke_dialog_tab [{lightGradient}border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [{mediumGradient}] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} .cke_toolgroup [{lightGradient}border-color:{defaultBorder};] {id} a.cke_button_off:hover, {id} a.cke_button_off:focus, {id} a.cke_button_off:active [{mediumGradient}] {id} .cke_button_on [{ckeButtonOn}] {id} .cke_toolbar_separator [background-color: {ckeToolbarSeparator};] {id} .cke_combo_button [border-color:{defaultBorder};{lightGradient}] {id} a.cke_combo_button:hover, {id} a.cke_combo_button:focus, {id} .cke_combo_on a.cke_combo_button [border-color:{defaultBorder};{mediumGradient}] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover, {id} a.cke_path_item:focus, {id} a.cke_path_item:active [background-color:{elementsPathBg};] {id}.cke_panel [border-color:{defaultBorder};] "),
            panel:new CKEDITOR.template(".cke_panel_grouptitle [{lightGradient}border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:focus.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:focus.cke_colorauto, a:focus.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")
        };
        return function(n, o) {
            var r = n.uiColor, r = {
                id:"." + n.id,
                defaultBorder:t(r, -.1),
                defaultGradient:e(t(r, .9), r),
                lightGradient:e(t(r, 1), t(r, .7)),
                mediumGradient:e(t(r, .8), t(r, .5)),
                ckeButtonOn:e(t(r, .6), t(r, .7)),
                ckeResizer:t(r, -.4),
                ckeToolbarSeparator:t(r, .5),
                ckeColorauto:t(r, .8),
                dialogBody:t(r, .7),
                dialogTabSelected:e("#FFFFFF", "#FFFFFF"),
                dialogTabSelectedBorder:"#FFF",
                elementsPathColor:t(r, -.6),
                elementsPathBg:r,
                menubuttonIcon:t(r, .5),
                menubuttonIconHover:t(r, .3)
            };
            return i[o].output(r).replace(/\[/g, "{").replace(/\]/g, "}");
        };
    }(), CKEDITOR.plugins.add("basicstyles", {
        init:function(t) {
            var e = 0, i = function(i, n, o, r) {
                r && (r = new CKEDITOR.style(r), t.attachStyleStateChange(r, function(e) {
                    !t.readOnly && t.getCommand(o).setState(e);
                }), t.addCommand(o, new CKEDITOR.styleCommand(r)), t.ui.addButton && t.ui.addButton(i, {
                    label:n,
                    command:o,
                    toolbar:"basicstyles," + (e += 10)
                }));
            }, n = t.config, o = t.lang.basicstyles;
            i("Bold", o.bold, "bold", n.coreStyles_bold), i("Italic", o.italic, "italic", n.coreStyles_italic), 
            i("Underline", o.underline, "underline", n.coreStyles_underline), i("Strike", o.strike, "strike", n.coreStyles_strike), 
            i("Subscript", o.subscript, "subscript", n.coreStyles_subscript), i("Superscript", o.superscript, "superscript", n.coreStyles_superscript), 
            t.setKeystroke([ [ CKEDITOR.CTRL + 66, "bold" ], [ CKEDITOR.CTRL + 73, "italic" ], [ CKEDITOR.CTRL + 85, "underline" ] ]);
        }
    }), CKEDITOR.config.coreStyles_bold = {
        element:"strong",
        overrides:"b"
    }, CKEDITOR.config.coreStyles_italic = {
        element:"em",
        overrides:"i"
    }, CKEDITOR.config.coreStyles_underline = {
        element:"u"
    }, CKEDITOR.config.coreStyles_strike = {
        element:"strike"
    }, CKEDITOR.config.coreStyles_subscript = {
        element:"sub"
    }, CKEDITOR.config.coreStyles_superscript = {
        element:"sup"
    }, CKEDITOR.plugins.add("dialogui", {
        onLoad:function() {
            var t = function(t) {
                this._ || (this._ = {}), this._["default"] = this._.initValue = t["default"] || "", 
                this._.required = t.required || !1;
                for (var e = [ this._ ], i = 1; i < arguments.length; i++) e.push(arguments[i]);
                return e.push(!0), CKEDITOR.tools.extend.apply(CKEDITOR.tools, e), this._;
            }, e = {
                build:function(t, e, i) {
                    return new CKEDITOR.ui.dialog.textInput(t, e, i);
                }
            }, i = {
                build:function(t, e, i) {
                    return new CKEDITOR.ui.dialog[e.type](t, e, i);
                }
            }, n = {
                isChanged:function() {
                    return this.getValue() != this.getInitValue();
                },
                reset:function(t) {
                    this.setValue(this.getInitValue(), t);
                },
                setInitValue:function() {
                    this._.initValue = this.getValue();
                },
                resetInitValue:function() {
                    this._.initValue = this._["default"];
                },
                getInitValue:function() {
                    return this._.initValue;
                }
            }, o = CKEDITOR.tools.extend({}, CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors, {
                onChange:function(t, e) {
                    this._.domOnChangeRegistered || (t.on("load", function() {
                        this.getInputElement().on("change", function() {
                            t.parts.dialog.isVisible() && this.fire("change", {
                                value:this.getValue()
                            });
                        }, this);
                    }, this), this._.domOnChangeRegistered = !0), this.on("change", e);
                }
            }, !0), r = /^on([A-Z]\w+)/, s = function(t) {
                for (var e in t) (r.test(e) || "title" == e || "type" == e) && delete t[e];
                return t;
            };
            CKEDITOR.tools.extend(CKEDITOR.ui.dialog, {
                labeledElement:function(e, i, n, o) {
                    if (!(4 > arguments.length)) {
                        var r = t.call(this, i);
                        r.labelId = CKEDITOR.tools.getNextId() + "_label", this._.children = [], CKEDITOR.ui.dialog.uiElement.call(this, e, i, n, "div", null, {
                            role:"presentation"
                        }, function() {
                            var t = [], n = i.required ? " cke_required" :"";
                            return "horizontal" != i.labelLayout ? t.push('<label class="cke_dialog_ui_labeled_label' + n + '" ', ' id="' + r.labelId + '"', r.inputId ? ' for="' + r.inputId + '"' :"", (i.labelStyle ? ' style="' + i.labelStyle + '"' :"") + ">", i.label, "</label>", '<div class="cke_dialog_ui_labeled_content"' + (i.controlStyle ? ' style="' + i.controlStyle + '"' :"") + ' role="presentation">', o.call(this, e, i), "</div>") :(n = {
                                type:"hbox",
                                widths:i.widths,
                                padding:0,
                                children:[ {
                                    type:"html",
                                    html:'<label class="cke_dialog_ui_labeled_label' + n + '" id="' + r.labelId + '" for="' + r.inputId + '"' + (i.labelStyle ? ' style="' + i.labelStyle + '"' :"") + ">" + CKEDITOR.tools.htmlEncode(i.label) + "</span>"
                                }, {
                                    type:"html",
                                    html:'<span class="cke_dialog_ui_labeled_content"' + (i.controlStyle ? ' style="' + i.controlStyle + '"' :"") + ">" + o.call(this, e, i) + "</span>"
                                } ]
                            }, CKEDITOR.dialog._.uiElementBuilders.hbox.build(e, n, t)), t.join("");
                        });
                    }
                },
                textInput:function(e, i, n) {
                    if (!(3 > arguments.length)) {
                        t.call(this, i);
                        var o = this._.inputId = CKEDITOR.tools.getNextId() + "_textInput", r = {
                            "class":"cke_dialog_ui_input_" + i.type,
                            id:o,
                            type:i.type
                        };
                        i.validate && (this.validate = i.validate), i.maxLength && (r.maxlength = i.maxLength), 
                        i.size && (r.size = i.size), i.inputStyle && (r.style = i.inputStyle);
                        var s = this, a = !1;
                        e.on("load", function() {
                            s.getInputElement().on("keydown", function(t) {
                                13 == t.data.getKeystroke() && (a = !0);
                            }), s.getInputElement().on("keyup", function(t) {
                                13 == t.data.getKeystroke() && a && (e.getButton("ok") && setTimeout(function() {
                                    e.getButton("ok").click();
                                }, 0), a = !1);
                            }, null, null, 1e3);
                        }), CKEDITOR.ui.dialog.labeledElement.call(this, e, i, n, function() {
                            var t = [ '<div class="cke_dialog_ui_input_', i.type, '" role="presentation"' ];
                            i.width && t.push('style="width:' + i.width + '" '), t.push("><input "), r["aria-labelledby"] = this._.labelId, 
                            this._.required && (r["aria-required"] = this._.required);
                            for (var e in r) t.push(e + '="' + r[e] + '" ');
                            return t.push(" /></div>"), t.join("");
                        });
                    }
                },
                textarea:function(e, i, n) {
                    if (!(3 > arguments.length)) {
                        t.call(this, i);
                        var o = this, r = this._.inputId = CKEDITOR.tools.getNextId() + "_textarea", s = {};
                        i.validate && (this.validate = i.validate), s.rows = i.rows || 5, s.cols = i.cols || 20, 
                        "undefined" != typeof i.inputStyle && (s.style = i.inputStyle), CKEDITOR.ui.dialog.labeledElement.call(this, e, i, n, function() {
                            s["aria-labelledby"] = this._.labelId, this._.required && (s["aria-required"] = this._.required);
                            var t, e = [ '<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea class="cke_dialog_ui_input_textarea" id="', r, '" ' ];
                            for (t in s) e.push(t + '="' + CKEDITOR.tools.htmlEncode(s[t]) + '" ');
                            return e.push(">", CKEDITOR.tools.htmlEncode(o._["default"]), "</textarea></div>"), 
                            e.join("");
                        });
                    }
                },
                checkbox:function(e, i, n) {
                    if (!(3 > arguments.length)) {
                        var o = t.call(this, i, {
                            "default":!!i["default"]
                        });
                        i.validate && (this.validate = i.validate), CKEDITOR.ui.dialog.uiElement.call(this, e, i, n, "span", null, null, function() {
                            var t = CKEDITOR.tools.extend({}, i, {
                                id:i.id ? i.id + "_checkbox" :CKEDITOR.tools.getNextId() + "_checkbox"
                            }, !0), n = [], r = CKEDITOR.tools.getNextId() + "_label", a = {
                                "class":"cke_dialog_ui_checkbox_input",
                                type:"checkbox",
                                "aria-labelledby":r
                            };
                            return s(t), i["default"] && (a.checked = "checked"), "undefined" != typeof t.inputStyle && (t.style = t.inputStyle), 
                            o.checkbox = new CKEDITOR.ui.dialog.uiElement(e, t, n, "input", null, a), n.push(' <label id="', r, '" for="', a.id, '"' + (i.labelStyle ? ' style="' + i.labelStyle + '"' :"") + ">", CKEDITOR.tools.htmlEncode(i.label), "</label>"), 
                            n.join("");
                        });
                    }
                },
                radio:function(e, i, n) {
                    if (!(3 > arguments.length)) {
                        t.call(this, i), this._["default"] || (this._["default"] = this._.initValue = i.items[0][1]), 
                        i.validate && (this.validate = i.valdiate);
                        var o = [], r = this;
                        CKEDITOR.ui.dialog.labeledElement.call(this, e, i, n, function() {
                            for (var t = [], n = [], a = i.id ? i.id + "_radio" :CKEDITOR.tools.getNextId() + "_radio", l = 0; l < i.items.length; l++) {
                                var c = i.items[l], h = void 0 !== c[2] ? c[2] :c[0], u = void 0 !== c[1] ? c[1] :c[0], d = CKEDITOR.tools.getNextId() + "_radio_input", p = d + "_label", d = CKEDITOR.tools.extend({}, i, {
                                    id:d,
                                    title:null,
                                    type:null
                                }, !0), h = CKEDITOR.tools.extend({}, d, {
                                    title:h
                                }, !0), f = {
                                    type:"radio",
                                    "class":"cke_dialog_ui_radio_input",
                                    name:a,
                                    value:u,
                                    "aria-labelledby":p
                                }, g = [];
                                r._["default"] == u && (f.checked = "checked"), s(d), s(h), "undefined" != typeof d.inputStyle && (d.style = d.inputStyle), 
                                o.push(new CKEDITOR.ui.dialog.uiElement(e, d, g, "input", null, f)), g.push(" "), 
                                new CKEDITOR.ui.dialog.uiElement(e, h, g, "label", null, {
                                    id:p,
                                    "for":f.id
                                }, c[0]), t.push(g.join(""));
                            }
                            return new CKEDITOR.ui.dialog.hbox(e, o, t, n), n.join("");
                        }), this._.children = o;
                    }
                },
                button:function(e, i, n) {
                    if (arguments.length) {
                        "function" == typeof i && (i = i(e.getParentEditor())), t.call(this, i, {
                            disabled:i.disabled || !1
                        }), CKEDITOR.event.implementOn(this);
                        var o = this;
                        e.on("load", function() {
                            var t = this.getElement();
                            !function() {
                                t.on("click", o.click, o), t.on("keydown", function(t) {
                                    t.data.getKeystroke() in {
                                        32:1
                                    } && (o.click(), t.data.preventDefault());
                                });
                            }(), t.unselectable();
                        }, this);
                        var r = CKEDITOR.tools.extend({}, i);
                        delete r.style;
                        var s = CKEDITOR.tools.getNextId() + "_label";
                        CKEDITOR.ui.dialog.uiElement.call(this, e, r, n, "a", null, {
                            style:i.style,
                            href:"javascript:void(0)",
                            title:i.label,
                            hidefocus:"true",
                            "class":i["class"],
                            role:"button",
                            "aria-labelledby":s
                        }, '<span id="' + s + '" class="cke_dialog_ui_button">' + CKEDITOR.tools.htmlEncode(i.label) + "</span>");
                    }
                },
                select:function(e, i, n) {
                    if (!(3 > arguments.length)) {
                        var o = t.call(this, i);
                        i.validate && (this.validate = i.validate), o.inputId = CKEDITOR.tools.getNextId() + "_select", 
                        CKEDITOR.ui.dialog.labeledElement.call(this, e, i, n, function() {
                            var t = CKEDITOR.tools.extend({}, i, {
                                id:i.id ? i.id + "_select" :CKEDITOR.tools.getNextId() + "_select"
                            }, !0), n = [], r = [], a = {
                                id:o.inputId,
                                "class":"cke_dialog_ui_input_select",
                                "aria-labelledby":this._.labelId
                            };
                            n.push('<div class="cke_dialog_ui_input_', i.type, '" role="presentation"'), i.width && n.push('style="width:' + i.width + '" '), 
                            n.push(">"), void 0 != i.size && (a.size = i.size), void 0 != i.multiple && (a.multiple = i.multiple), 
                            s(t);
                            for (var l, c = 0; c < i.items.length && (l = i.items[c]); c++) r.push('<option value="', CKEDITOR.tools.htmlEncode(void 0 !== l[1] ? l[1] :l[0]).replace(/"/g, "&quot;"), '" /> ', CKEDITOR.tools.htmlEncode(l[0]));
                            return "undefined" != typeof t.inputStyle && (t.style = t.inputStyle), o.select = new CKEDITOR.ui.dialog.uiElement(e, t, n, "select", null, a, r.join("")), 
                            n.push("</div>"), n.join("");
                        });
                    }
                },
                file:function(e, i, n) {
                    if (!(3 > arguments.length)) {
                        void 0 === i["default"] && (i["default"] = "");
                        var o = CKEDITOR.tools.extend(t.call(this, i), {
                            definition:i,
                            buttons:[]
                        });
                        i.validate && (this.validate = i.validate), e.on("load", function() {
                            CKEDITOR.document.getById(o.frameId).getParent().addClass("cke_dialog_ui_input_file");
                        }), CKEDITOR.ui.dialog.labeledElement.call(this, e, i, n, function() {
                            o.frameId = CKEDITOR.tools.getNextId() + "_fileInput";
                            var t = CKEDITOR.env.isCustomDomain(), e = [ '<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="', o.frameId, '" title="', i.label, '" src="javascript:void(' ];
                            return e.push(t ? "(function(){document.open();document.domain='" + document.domain + "';document.close();})()" :"0"), 
                            e.push(')"></iframe>'), e.join("");
                        });
                    }
                },
                fileButton:function(e, i, n) {
                    if (!(3 > arguments.length)) {
                        t.call(this, i);
                        var o = this;
                        i.validate && (this.validate = i.validate);
                        var r = CKEDITOR.tools.extend({}, i), s = r.onClick;
                        r.className = (r.className ? r.className + " " :"") + "cke_dialog_ui_button", r.onClick = function(t) {
                            var n = i["for"];
                            s && s.call(this, t) === !1 || (e.getContentElement(n[0], n[1]).submit(), this.disable());
                        }, e.on("load", function() {
                            e.getContentElement(i["for"][0], i["for"][1])._.buttons.push(o);
                        }), CKEDITOR.ui.dialog.button.call(this, e, r, n);
                    }
                },
                html:function() {
                    var t = /^\s*<[\w:]+\s+([^>]*)?>/, e = /^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/, i = /\/$/;
                    return function(n, o, r) {
                        if (!(3 > arguments.length)) {
                            var s = [], a = o.html;
                            "<" != a.charAt(0) && (a = "<span>" + a + "</span>");
                            var l = o.focus;
                            l && (this.focus = function() {
                                this.selectParentTab(), "function" == typeof l && l.call(this), this.fire("focus");
                            }, o.isFocusable && (this.isFocusable = this.isFocusable), this.keyboardFocusable = !0), 
                            CKEDITOR.ui.dialog.uiElement.call(this, n, o, s, "span", null, null, ""), s = s.join("").match(t), 
                            a = a.match(e) || [ "", "", "" ], i.test(a[1]) && (a[1] = a[1].slice(0, -1), a[2] = "/" + a[2]), 
                            r.push([ a[1], " ", s[1] || "", a[2] ].join(""));
                        }
                    };
                }(),
                fieldset:function(t, e, i, n, o) {
                    var r = o.label;
                    this._ = {
                        children:e
                    }, CKEDITOR.ui.dialog.uiElement.call(this, t, o, n, "fieldset", null, null, function() {
                        var t = [];
                        r && t.push("<legend" + (o.labelStyle ? ' style="' + o.labelStyle + '"' :"") + ">" + r + "</legend>");
                        for (var e = 0; e < i.length; e++) t.push(i[e]);
                        return t.join("");
                    });
                }
            }, !0), CKEDITOR.ui.dialog.html.prototype = new CKEDITOR.ui.dialog.uiElement(), 
            CKEDITOR.ui.dialog.labeledElement.prototype = CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement(), {
                setLabel:function(t) {
                    var e = CKEDITOR.document.getById(this._.labelId);
                    return 1 > e.getChildCount() ? new CKEDITOR.dom.text(t, CKEDITOR.document).appendTo(e) :e.getChild(0).$.nodeValue = t, 
                    this;
                },
                getLabel:function() {
                    var t = CKEDITOR.document.getById(this._.labelId);
                    return !t || 1 > t.getChildCount() ? "" :t.getChild(0).getText();
                },
                eventProcessors:o
            }, !0), CKEDITOR.ui.dialog.button.prototype = CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement(), {
                click:function() {
                    return this._.disabled ? !1 :this.fire("click", {
                        dialog:this._.dialog
                    });
                },
                enable:function() {
                    this._.disabled = !1;
                    var t = this.getElement();
                    t && t.removeClass("cke_disabled");
                },
                disable:function() {
                    this._.disabled = !0, this.getElement().addClass("cke_disabled");
                },
                isVisible:function() {
                    return this.getElement().getFirst().isVisible();
                },
                isEnabled:function() {
                    return !this._.disabled;
                },
                eventProcessors:CKEDITOR.tools.extend({}, CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors, {
                    onClick:function(t, e) {
                        this.on("click", function() {
                            e.apply(this, arguments);
                        });
                    }
                }, !0),
                accessKeyUp:function() {
                    this.click();
                },
                accessKeyDown:function() {
                    this.focus();
                },
                keyboardFocusable:!0
            }, !0), CKEDITOR.ui.dialog.textInput.prototype = CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement(), {
                getInputElement:function() {
                    return CKEDITOR.document.getById(this._.inputId);
                },
                focus:function() {
                    var t = this.selectParentTab();
                    setTimeout(function() {
                        var e = t.getInputElement();
                        e && e.$.focus();
                    }, 0);
                },
                select:function() {
                    var t = this.selectParentTab();
                    setTimeout(function() {
                        var e = t.getInputElement();
                        e && (e.$.focus(), e.$.select());
                    }, 0);
                },
                accessKeyUp:function() {
                    this.select();
                },
                setValue:function(t) {
                    return !t && (t = ""), CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this, arguments);
                },
                keyboardFocusable:!0
            }, n, !0), CKEDITOR.ui.dialog.textarea.prototype = new CKEDITOR.ui.dialog.textInput(), 
            CKEDITOR.ui.dialog.select.prototype = CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement(), {
                getInputElement:function() {
                    return this._.select.getElement();
                },
                add:function(t, e, i) {
                    var n = new CKEDITOR.dom.element("option", this.getDialog().getParentEditor().document), o = this.getInputElement().$;
                    return n.$.text = t, n.$.value = void 0 === e || null === e ? t :e, void 0 === i || null === i ? CKEDITOR.env.ie ? o.add(n.$) :o.add(n.$, null) :o.add(n.$, i), 
                    this;
                },
                remove:function(t) {
                    return this.getInputElement().$.remove(t), this;
                },
                clear:function() {
                    for (var t = this.getInputElement().$; 0 < t.length; ) t.remove(0);
                    return this;
                },
                keyboardFocusable:!0
            }, n, !0), CKEDITOR.ui.dialog.checkbox.prototype = CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement(), {
                getInputElement:function() {
                    return this._.checkbox.getElement();
                },
                setValue:function(t, e) {
                    this.getInputElement().$.checked = t, !e && this.fire("change", {
                        value:t
                    });
                },
                getValue:function() {
                    return this.getInputElement().$.checked;
                },
                accessKeyUp:function() {
                    this.setValue(!this.getValue());
                },
                eventProcessors:{
                    onChange:function(t, e) {
                        return !CKEDITOR.env.ie || 8 < CKEDITOR.env.version ? o.onChange.apply(this, arguments) :(t.on("load", function() {
                            var t = this._.checkbox.getElement();
                            t.on("propertychange", function(e) {
                                e = e.data.$, "checked" == e.propertyName && this.fire("change", {
                                    value:t.$.checked
                                });
                            }, this);
                        }, this), this.on("change", e), null);
                    }
                },
                keyboardFocusable:!0
            }, n, !0), CKEDITOR.ui.dialog.radio.prototype = CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement(), {
                setValue:function(t, e) {
                    for (var i, n = this._.children, o = 0; o < n.length && (i = n[o]); o++) i.getElement().$.checked = i.getValue() == t;
                    !e && this.fire("change", {
                        value:t
                    });
                },
                getValue:function() {
                    for (var t = this._.children, e = 0; e < t.length; e++) if (t[e].getElement().$.checked) return t[e].getValue();
                    return null;
                },
                accessKeyUp:function() {
                    var t, e = this._.children;
                    for (t = 0; t < e.length; t++) if (e[t].getElement().$.checked) return e[t].getElement().focus(), 
                    void 0;
                    e[0].getElement().focus();
                },
                eventProcessors:{
                    onChange:function(t, e) {
                        return CKEDITOR.env.ie ? (t.on("load", function() {
                            for (var t = this._.children, e = this, i = 0; i < t.length; i++) t[i].getElement().on("propertychange", function(t) {
                                t = t.data.$, "checked" == t.propertyName && this.$.checked && e.fire("change", {
                                    value:this.getAttribute("value")
                                });
                            });
                        }, this), this.on("change", e), null) :o.onChange.apply(this, arguments);
                    }
                },
                keyboardFocusable:!0
            }, n, !0), CKEDITOR.ui.dialog.file.prototype = CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement(), n, {
                getInputElement:function() {
                    var t = CKEDITOR.document.getById(this._.frameId).getFrameDocument();
                    return 0 < t.$.forms.length ? new CKEDITOR.dom.element(t.$.forms[0].elements[0]) :this.getElement();
                },
                submit:function() {
                    return this.getInputElement().getParent().$.submit(), this;
                },
                getAction:function() {
                    return this.getInputElement().getParent().$.action;
                },
                registerEvents:function(t) {
                    var e, i, n = /^on([A-Z]\w+)/, o = function(t, e, i, n) {
                        t.on("formLoaded", function() {
                            t.getInputElement().on(i, n, t);
                        });
                    };
                    for (i in t) (e = i.match(n)) && (this.eventProcessors[i] ? this.eventProcessors[i].call(this, this._.dialog, t[i]) :o(this, this._.dialog, e[1].toLowerCase(), t[i]));
                    return this;
                },
                reset:function() {
                    function t() {
                        i.$.open(), CKEDITOR.env.isCustomDomain() && (i.$.domain = document.domain);
                        var t = "";
                        n.size && (t = n.size - (CKEDITOR.env.ie ? 7 :0));
                        var c = e.frameId + "_input";
                        for (i.$.write([ '<html dir="' + a + '" lang="' + l + '"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">', '<form enctype="multipart/form-data" method="POST" dir="' + a + '" lang="' + l + '" action="', CKEDITOR.tools.htmlEncode(n.action), '"><label id="', e.labelId, '" for="', c, '" style="display:none">', CKEDITOR.tools.htmlEncode(n.label), '</label><input id="', c, '" aria-labelledby="', e.labelId, '" type="file" name="', CKEDITOR.tools.htmlEncode(n.id || "cke_upload"), '" size="', CKEDITOR.tools.htmlEncode(t > 0 ? t :""), '" /></form></body></html>', "<script>window.parent.CKEDITOR.tools.callFunction(" + r + ");", "window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction(" + s + ")}</script>" ].join("")), 
                        i.$.close(), t = 0; t < o.length; t++) o[t].enable();
                    }
                    var e = this._, i = CKEDITOR.document.getById(e.frameId).getFrameDocument(), n = e.definition, o = e.buttons, r = this.formLoadedNumber, s = this.formUnloadNumber, a = e.dialog._.editor.lang.dir, l = e.dialog._.editor.langCode;
                    r || (r = this.formLoadedNumber = CKEDITOR.tools.addFunction(function() {
                        this.fire("formLoaded");
                    }, this), s = this.formUnloadNumber = CKEDITOR.tools.addFunction(function() {
                        this.getInputElement().clearCustomData();
                    }, this), this.getDialog()._.editor.on("destroy", function() {
                        CKEDITOR.tools.removeFunction(r), CKEDITOR.tools.removeFunction(s);
                    })), CKEDITOR.env.gecko ? setTimeout(t, 500) :t();
                },
                getValue:function() {
                    return this.getInputElement().$.value || "";
                },
                setInitValue:function() {
                    this._.initValue = "";
                },
                eventProcessors:{
                    onChange:function(t, e) {
                        this._.domOnChangeRegistered || (this.on("formLoaded", function() {
                            this.getInputElement().on("change", function() {
                                this.fire("change", {
                                    value:this.getValue()
                                });
                            }, this);
                        }, this), this._.domOnChangeRegistered = !0), this.on("change", e);
                    }
                },
                keyboardFocusable:!0
            }, !0), CKEDITOR.ui.dialog.fileButton.prototype = new CKEDITOR.ui.dialog.button(), 
            CKEDITOR.ui.dialog.fieldset.prototype = CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype), 
            CKEDITOR.dialog.addUIElement("text", e), CKEDITOR.dialog.addUIElement("password", e), 
            CKEDITOR.dialog.addUIElement("textarea", i), CKEDITOR.dialog.addUIElement("checkbox", i), 
            CKEDITOR.dialog.addUIElement("radio", i), CKEDITOR.dialog.addUIElement("button", i), 
            CKEDITOR.dialog.addUIElement("select", i), CKEDITOR.dialog.addUIElement("file", i), 
            CKEDITOR.dialog.addUIElement("fileButton", i), CKEDITOR.dialog.addUIElement("html", i), 
            CKEDITOR.dialog.addUIElement("fieldset", {
                build:function(t, e, i) {
                    for (var n, o = e.children, r = [], s = [], a = 0; a < o.length && (n = o[a]); a++) {
                        var l = [];
                        r.push(l), s.push(CKEDITOR.dialog._.uiElementBuilders[n.type].build(t, n, l));
                    }
                    return new CKEDITOR.ui.dialog[e.type](t, s, r, i, e);
                }
            });
        }
    }), CKEDITOR.DIALOG_RESIZE_NONE = 0, CKEDITOR.DIALOG_RESIZE_WIDTH = 1, CKEDITOR.DIALOG_RESIZE_HEIGHT = 2, 
    CKEDITOR.DIALOG_RESIZE_BOTH = 3, function() {
        function t() {
            for (var t = this._.tabIdList.length, e = CKEDITOR.tools.indexOf(this._.tabIdList, this._.currentTabId) + t, i = e - 1; i > e - t; i--) if (this._.tabs[this._.tabIdList[i % t]][0].$.offsetHeight) return this._.tabIdList[i % t];
            return null;
        }
        function e() {
            for (var t = this._.tabIdList.length, e = CKEDITOR.tools.indexOf(this._.tabIdList, this._.currentTabId), i = e + 1; e + t > i; i++) if (this._.tabs[this._.tabIdList[i % t]][0].$.offsetHeight) return this._.tabIdList[i % t];
            return null;
        }
        function i(t, e) {
            for (var i = t.$.getElementsByTagName("input"), n = 0, o = i.length; o > n; n++) {
                var r = new CKEDITOR.dom.element(i[n]);
                "text" == r.getAttribute("type").toLowerCase() && (e ? (r.setAttribute("value", r.getCustomData("fake_value") || ""), 
                r.removeCustomData("fake_value")) :(r.setCustomData("fake_value", r.getAttribute("value")), 
                r.setAttribute("value", "")));
            }
        }
        function n(t, e) {
            var i = this.getInputElement();
            i && (t ? i.removeAttribute("aria-invalid") :i.setAttribute("aria-invalid", !0)), 
            t || (this.select ? this.select() :this.focus()), e && alert(e), this.fire("validated", {
                valid:t,
                msg:e
            });
        }
        function o() {
            var t = this.getInputElement();
            t && t.removeAttribute("aria-invalid");
        }
        function r(t) {
            var t = CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog", g).output({
                id:CKEDITOR.tools.getNextNumber(),
                editorId:t.id,
                langDir:t.lang.dir,
                langCode:t.langCode,
                editorDialogClass:"cke_editor_" + t.name.replace(/\./g, "\\.") + "_dialog",
                closeTitle:t.lang.common.close
            })), e = t.getChild([ 0, 0, 0, 0, 0 ]), i = e.getChild(0), n = e.getChild(1);
            if (CKEDITOR.env.ie && !CKEDITOR.env.ie6Compat) {
                var o = CKEDITOR.env.isCustomDomain(), o = "javascript:void(function(){" + encodeURIComponent("document.open();" + (o ? 'document.domain="' + document.domain + '";' :"") + "document.close();") + "}())";
                CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="' + o + '" tabIndex="-1"></iframe>').appendTo(e.getParent());
            }
            return i.unselectable(), n.unselectable(), {
                element:t,
                parts:{
                    dialog:t.getChild(0),
                    title:i,
                    close:n,
                    tabs:e.getChild(2),
                    contents:e.getChild([ 3, 0, 0, 0 ]),
                    footer:e.getChild([ 3, 0, 1, 0 ])
                }
            };
        }
        function s(t, e, i) {
            this.element = e, this.focusIndex = i, this.tabIndex = 0, this.isFocusable = function() {
                return !e.getAttribute("disabled") && e.isVisible();
            }, this.focus = function() {
                t._.currentFocusIndex = this.focusIndex, this.element.focus();
            }, e.on("keydown", function(t) {
                t.data.getKeystroke() in {
                    32:1,
                    13:1
                } && this.fire("click");
            }), e.on("focus", function() {
                this.fire("mouseover");
            }), e.on("blur", function() {
                this.fire("mouseout");
            });
        }
        function a(t) {
            function e() {
                t.layout();
            }
            var i = CKEDITOR.document.getWindow();
            i.on("resize", e), t.on("hide", function() {
                i.removeListener("resize", e);
            });
        }
        function l(t, e) {
            this._ = {
                dialog:t
            }, CKEDITOR.tools.extend(this, e);
        }
        function c(t) {
            function e(e) {
                var i = t.getSize(), l = CKEDITOR.document.getWindow().getViewPaneSize(), c = e.data.$.screenX, h = e.data.$.screenY, u = c - n.x, d = h - n.y;
                n = {
                    x:c,
                    y:h
                }, o.x += u, o.y += d, t.move(o.x + a[3] < s ? -a[3] :o.x - a[1] > l.width - i.width - s ? l.width - i.width + ("rtl" == r.lang.dir ? 0 :a[1]) :o.x, o.y + a[0] < s ? -a[0] :o.y - a[2] > l.height - i.height - s ? l.height - i.height + a[2] :o.y, 1), 
                e.data.preventDefault();
            }
            function i() {
                if (CKEDITOR.document.removeListener("mousemove", e), CKEDITOR.document.removeListener("mouseup", i), 
                CKEDITOR.env.ie6Compat) {
                    var t = C.getChild(0).getFrameDocument();
                    t.removeListener("mousemove", e), t.removeListener("mouseup", i);
                }
            }
            var n = null, o = null;
            t.getElement().getFirst();
            var r = t.getParentEditor(), s = r.config.dialog_magnetDistance, a = CKEDITOR.skin.margins || [ 0, 0, 0, 0 ];
            "undefined" == typeof s && (s = 20), t.parts.title.on("mousedown", function(r) {
                if (n = {
                    x:r.data.$.screenX,
                    y:r.data.$.screenY
                }, CKEDITOR.document.on("mousemove", e), CKEDITOR.document.on("mouseup", i), o = t.getPosition(), 
                CKEDITOR.env.ie6Compat) {
                    var s = C.getChild(0).getFrameDocument();
                    s.on("mousemove", e), s.on("mouseup", i);
                }
                r.data.preventDefault();
            }, t);
        }
        function h(t) {
            function e(e) {
                var i = "rtl" == d.lang.dir, u = h.width, p = h.height, f = u + (e.data.$.screenX - n) * (i ? -1 :1) * (t._.moved ? 1 :2), g = p + (e.data.$.screenY - o) * (t._.moved ? 1 :2), m = t._.element.getFirst(), m = i && m.getComputedStyle("right"), _ = t.getPosition();
                _.y + g > c.height && (g = c.height - _.y), (i ? m :_.x) + f > c.width && (f = c.width - (i ? m :_.x)), 
                (s == CKEDITOR.DIALOG_RESIZE_WIDTH || s == CKEDITOR.DIALOG_RESIZE_BOTH) && (u = Math.max(r.minWidth || 0, f - a)), 
                (s == CKEDITOR.DIALOG_RESIZE_HEIGHT || s == CKEDITOR.DIALOG_RESIZE_BOTH) && (p = Math.max(r.minHeight || 0, g - l)), 
                t.resize(u, p), t._.moved || t.layout(), e.data.preventDefault();
            }
            function i() {
                if (CKEDITOR.document.removeListener("mouseup", i), CKEDITOR.document.removeListener("mousemove", e), 
                u && (u.remove(), u = null), CKEDITOR.env.ie6Compat) {
                    var t = C.getChild(0).getFrameDocument();
                    t.removeListener("mouseup", i), t.removeListener("mousemove", e);
                }
            }
            var n, o, r = t.definition, s = r.resizable;
            if (s != CKEDITOR.DIALOG_RESIZE_NONE) {
                var a, l, c, h, u, d = t.getParentEditor(), p = CKEDITOR.tools.addFunction(function(r) {
                    h = t.getSize();
                    var s = t.parts.contents;
                    s.$.getElementsByTagName("iframe").length && (u = CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'), 
                    s.append(u)), l = h.height - t.parts.contents.getSize("height", !(CKEDITOR.env.gecko || CKEDITOR.env.opera || CKEDITOR.env.ie && CKEDITOR.env.quirks)), 
                    a = h.width - t.parts.contents.getSize("width", 1), n = r.screenX, o = r.screenY, 
                    c = CKEDITOR.document.getWindow().getViewPaneSize(), CKEDITOR.document.on("mousemove", e), 
                    CKEDITOR.document.on("mouseup", i), CKEDITOR.env.ie6Compat && (s = C.getChild(0).getFrameDocument(), 
                    s.on("mousemove", e), s.on("mouseup", i)), r.preventDefault && r.preventDefault();
                });
                t.on("load", function() {
                    var e = "";
                    s == CKEDITOR.DIALOG_RESIZE_WIDTH ? e = " cke_resizer_horizontal" :s == CKEDITOR.DIALOG_RESIZE_HEIGHT && (e = " cke_resizer_vertical"), 
                    e = CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer' + e + " cke_resizer_" + d.lang.dir + '" title="' + CKEDITOR.tools.htmlEncode(d.lang.common.resize) + '" onmousedown="CKEDITOR.tools.callFunction(' + p + ', event )">' + ("ltr" == d.lang.dir ? "◢" :"◣") + "</div>"), 
                    t.parts.footer.append(e, 1);
                }), d.on("destroy", function() {
                    CKEDITOR.tools.removeFunction(p);
                });
            }
        }
        function u(t) {
            t.data.preventDefault(1);
        }
        function d(t) {
            var e = CKEDITOR.document.getWindow(), i = t.config, n = i.dialog_backgroundCoverColor || "white", o = i.dialog_backgroundCoverOpacity, r = i.baseFloatZIndex, i = CKEDITOR.tools.genKey(n, o, r), s = T[i];
            if (s) s.show(); else {
                if (r = [ '<div tabIndex="-1" style="position: ', CKEDITOR.env.ie6Compat ? "absolute" :"fixed", "; z-index: ", r, "; top: 0px; left: 0px; ", CKEDITOR.env.ie6Compat ? "" :"background-color: " + n, '" class="cke_dialog_background_cover">' ], 
                CKEDITOR.env.ie6Compat) {
                    var a = CKEDITOR.env.isCustomDomain(), n = "<html><body style=\\'background-color:" + n + ";\\'></body></html>";
                    r.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'), 
                    r.push("void((function(){document.open();" + (a ? "document.domain='" + document.domain + "';" :"") + "document.write( '" + n + "' );document.close();})())"), 
                    r.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>');
                }
                r.push("</div>"), s = CKEDITOR.dom.element.createFromHtml(r.join("")), s.setOpacity(void 0 != o ? o :.5), 
                s.on("keydown", u), s.on("keypress", u), s.on("keyup", u), s.appendTo(CKEDITOR.document.getBody()), 
                T[i] = s;
            }
            t.focusManager.add(s), C = s;
            var t = function() {
                var t = e.getViewPaneSize();
                s.setStyles({
                    width:t.width + "px",
                    height:t.height + "px"
                });
            }, l = function() {
                var t = e.getScrollPosition(), i = CKEDITOR.dialog._.currentTop;
                if (s.setStyles({
                    left:t.x + "px",
                    top:t.y + "px"
                }), i) do t = i.getPosition(), i.move(t.x, t.y); while (i = i._.parentDialog);
            };
            if (w = t, e.on("resize", t), t(), (!CKEDITOR.env.mac || !CKEDITOR.env.webkit) && s.focus(), 
            CKEDITOR.env.ie6Compat) {
                var c = function() {
                    l(), arguments.callee.prevScrollHandler.apply(this, arguments);
                };
                e.$.setTimeout(function() {
                    c.prevScrollHandler = window.onscroll || function() {}, window.onscroll = c;
                }, 0), l();
            }
        }
        function p(t) {
            C && (t.focusManager.remove(C), t = CKEDITOR.document.getWindow(), C.hide(), t.removeListener("resize", w), 
            CKEDITOR.env.ie6Compat && t.$.setTimeout(function() {
                window.onscroll = window.onscroll && window.onscroll.prevScrollHandler || null;
            }, 0), w = null);
        }
        var f = CKEDITOR.tools.cssLength, g = '<div class="cke cke_reset_all {editorId} {editorDialogClass}" dir="{langDir}" lang="{langCode}" role="application"><table class="cke_dialog ' + CKEDITOR.env.cssClass + ' cke_{langDir}" aria-labelledby="cke_dialog_title_{id}" style="position:absolute" role="dialog"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';
        CKEDITOR.dialog = function(i, s) {
            function a() {
                var t = T._.focusList;
                t.sort(function(t, e) {
                    return t.tabIndex != e.tabIndex ? e.tabIndex - t.tabIndex :t.focusIndex - e.focusIndex;
                });
                for (var e = t.length, i = 0; e > i; i++) t[i].focusIndex = i;
            }
            function l(t) {
                var e = T._.focusList, t = t || 0;
                if (!(1 > e.length)) {
                    var i = T._.currentFocusIndex;
                    try {
                        e[i].getInputElement().$.blur();
                    } catch (n) {}
                    for (var o = i = (i + t + e.length) % e.length; t && !e[o].isFocusable() && (o = (o + t + e.length) % e.length, 
                    !(o == i)); ) ;
                    e[o].focus(), "text" == e[o].type && e[o].select();
                }
            }
            function u(n) {
                if (T == CKEDITOR.dialog._.currentTop) {
                    var o = n.data.getKeystroke(), r = "rtl" == i.lang.dir;
                    if (p = f = 0, 9 == o || o == CKEDITOR.SHIFT + 9) o = o == CKEDITOR.SHIFT + 9, T._.tabBarMode ? (o = o ? t.call(T) :e.call(T), 
                    T.selectPage(o), T._.tabs[o][0].focus()) :l(o ? -1 :1), p = 1; else if (o == CKEDITOR.ALT + 121 && !T._.tabBarMode && 1 < T.getPageCount()) T._.tabBarMode = !0, 
                    T._.tabs[T._.currentTabId][0].focus(), p = 1; else if (37 != o && 39 != o || !T._.tabBarMode) if (13 != o && 32 != o || !T._.tabBarMode) if (13 == o) o = n.data.getTarget(), 
                    o.is("a", "button", "select", "textarea") || o.is("input") && "button" == o.$.type || ((o = this.getButton("ok")) && CKEDITOR.tools.setTimeout(o.click, 0, o), 
                    p = 1), f = 1; else {
                        if (27 != o) return;
                        (o = this.getButton("cancel")) ? CKEDITOR.tools.setTimeout(o.click, 0, o) :!1 !== this.fire("cancel", {
                            hide:!0
                        }).hide && this.hide(), f = 1;
                    } else this.selectPage(this._.currentTabId), this._.tabBarMode = !1, this._.currentFocusIndex = -1, 
                    l(1), p = 1; else o = o == (r ? 39 :37) ? t.call(T) :e.call(T), T.selectPage(o), 
                    T._.tabs[o][0].focus(), p = 1;
                    d(n);
                }
            }
            function d(t) {
                p ? t.data.preventDefault(1) :f && t.data.stopPropagation();
            }
            var p, f, g = CKEDITOR.dialog._.dialogDefinitions[s], _ = CKEDITOR.tools.clone(m), v = i.config.dialog_buttonsOrder || "OS", y = i.lang.dir, w = {};
            if (("OS" == v && CKEDITOR.env.mac || "rtl" == v && "ltr" == y || "ltr" == v && "rtl" == y) && _.buttons.reverse(), 
            g = CKEDITOR.tools.extend(g(i), _), g = CKEDITOR.tools.clone(g), g = new b(this, g), 
            _ = r(i), this._ = {
                editor:i,
                element:_.element,
                name:s,
                contentSize:{
                    width:0,
                    height:0
                },
                size:{
                    width:0,
                    height:0
                },
                contents:{},
                buttons:{},
                accessKeyMap:{},
                tabs:{},
                tabIdList:[],
                currentTabId:null,
                currentTabIndex:null,
                pageCount:0,
                lastTab:null,
                tabBarMode:!1,
                focusList:[],
                currentFocusIndex:0,
                hasFocus:!1
            }, this.parts = _.parts, CKEDITOR.tools.setTimeout(function() {
                i.fire("ariaWidget", this.parts.contents);
            }, 0, this), _ = {
                position:CKEDITOR.env.ie6Compat ? "absolute" :"fixed",
                top:0,
                visibility:"hidden"
            }, _["rtl" == y ? "right" :"left"] = 0, this.parts.dialog.setStyles(_), CKEDITOR.event.call(this), 
            this.definition = g = CKEDITOR.fire("dialogDefinition", {
                name:s,
                definition:g
            }, i).definition, !("removeDialogTabs" in i._) && i.config.removeDialogTabs) {
                for (_ = i.config.removeDialogTabs.split(";"), y = 0; y < _.length; y++) if (v = _[y].split(":"), 
                2 == v.length) {
                    var C = v[0];
                    w[C] || (w[C] = []), w[C].push(v[1]);
                }
                i._.removeDialogTabs = w;
            }
            if (i._.removeDialogTabs && (w = i._.removeDialogTabs[s])) for (y = 0; y < w.length; y++) g.removeContents(w[y]);
            g.onLoad && this.on("load", g.onLoad), g.onShow && this.on("show", g.onShow), g.onHide && this.on("hide", g.onHide), 
            g.onOk && this.on("ok", function(t) {
                i.fire("saveSnapshot"), setTimeout(function() {
                    i.fire("saveSnapshot");
                }, 0), !1 === g.onOk.call(this, t) && (t.data.hide = !1);
            }), g.onCancel && this.on("cancel", function(t) {
                !1 === g.onCancel.call(this, t) && (t.data.hide = !1);
            });
            var T = this, D = function(t) {
                var e, i = T._.contents, n = !1;
                for (e in i) for (var o in i[e]) if (n = t.call(this, i[e][o])) return;
            };
            this.on("ok", function(t) {
                D(function(e) {
                    if (e.validate) {
                        var i = e.validate(this), o = "string" == typeof i || !1 === i;
                        return o && (t.data.hide = !1, t.stop()), n.call(e, !o, "string" == typeof i ? i :void 0), 
                        o;
                    }
                });
            }, this, null, 0), this.on("cancel", function(t) {
                D(function(e) {
                    return e.isChanged() ? (confirm(i.lang.common.confirmCancel) || (t.data.hide = !1), 
                    !0) :void 0;
                });
            }, this, null, 0), this.parts.close.on("click", function(t) {
                !1 !== this.fire("cancel", {
                    hide:!0
                }).hide && this.hide(), t.data.preventDefault();
            }, this), this.changeFocus = l;
            var E = this._.element;
            for (i.focusManager.add(E, 1), this.on("show", function() {
                E.on("keydown", u, this), (CKEDITOR.env.opera || CKEDITOR.env.gecko) && E.on("keypress", d, this);
            }), this.on("hide", function() {
                E.removeListener("keydown", u), (CKEDITOR.env.opera || CKEDITOR.env.gecko) && E.removeListener("keypress", d), 
                D(function(t) {
                    o.apply(t);
                });
            }), this.on("iframeAdded", function(t) {
                new CKEDITOR.dom.document(t.data.iframe.$.contentWindow.document).on("keydown", u, this, null, 0);
            }), this.on("show", function() {
                if (a(), i.config.dialog_startupFocusTab && 1 < T._.pageCount) T._.tabBarMode = !0, 
                T._.tabs[T._.currentTabId][0].focus(); else if (!this._.hasFocus) if (this._.currentFocusIndex = -1, 
                g.onFocus) {
                    var t = g.onFocus.call(this);
                    t && t.focus();
                } else l(1);
            }, this, null, 4294967295), CKEDITOR.env.ie6Compat && this.on("load", function() {
                var t = this.getElement(), e = t.getFirst();
                e.remove(), e.appendTo(t);
            }, this), c(this), h(this), new CKEDITOR.dom.text(g.title, CKEDITOR.document).appendTo(this.parts.title), 
            y = 0; y < g.contents.length; y++) (w = g.contents[y]) && this.addPage(w);
            for (this.parts.tabs.on("click", function(t) {
                var e = t.data.getTarget();
                e.hasClass("cke_dialog_tab") && (e = e.$.id, this.selectPage(e.substring(4, e.lastIndexOf("_"))), 
                this._.tabBarMode && (this._.tabBarMode = !1, this._.currentFocusIndex = -1, l(1)), 
                t.data.preventDefault());
            }, this), y = [], w = CKEDITOR.dialog._.uiElementBuilders.hbox.build(this, {
                type:"hbox",
                className:"cke_dialog_footer_buttons",
                widths:[],
                children:g.buttons
            }, y).getChild(), this.parts.footer.setHtml(y.join("")), y = 0; y < w.length; y++) this._.buttons[w[y].id] = w[y];
        }, CKEDITOR.dialog.prototype = {
            destroy:function() {
                this.hide(), this._.element.remove();
            },
            resize:function() {
                return function(t, e) {
                    this._.contentSize && this._.contentSize.width == t && this._.contentSize.height == e || (CKEDITOR.dialog.fire("resize", {
                        dialog:this,
                        width:t,
                        height:e
                    }, this._.editor), this.fire("resize", {
                        width:t,
                        height:e
                    }, this._.editor), this.parts.contents.setStyles({
                        width:t + "px",
                        height:e + "px"
                    }), "rtl" == this._.editor.lang.dir && this._.position && (this._.position.x = CKEDITOR.document.getWindow().getViewPaneSize().width - this._.contentSize.width - parseInt(this._.element.getFirst().getStyle("right"), 10)), 
                    this._.contentSize = {
                        width:t,
                        height:e
                    });
                };
            }(),
            getSize:function() {
                var t = this._.element.getFirst();
                return {
                    width:t.$.offsetWidth || 0,
                    height:t.$.offsetHeight || 0
                };
            },
            move:function(t, e, i) {
                var n = this._.element.getFirst(), o = "rtl" == this._.editor.lang.dir, r = "fixed" == n.getComputedStyle("position");
                CKEDITOR.env.ie && n.setStyle("zoom", "100%"), r && this._.position && this._.position.x == t && this._.position.y == e || (this._.position = {
                    x:t,
                    y:e
                }, r || (r = CKEDITOR.document.getWindow().getScrollPosition(), t += r.x, e += r.y), 
                o && (r = this.getSize(), t = CKEDITOR.document.getWindow().getViewPaneSize().width - r.width - t), 
                e = {
                    top:(e > 0 ? e :0) + "px"
                }, e[o ? "right" :"left"] = (t > 0 ? t :0) + "px", n.setStyles(e), i && (this._.moved = 1));
            },
            getPosition:function() {
                return CKEDITOR.tools.extend({}, this._.position);
            },
            show:function() {
                var t = this._.element, e = this.definition;
                if (t.getParent() && t.getParent().equals(CKEDITOR.document.getBody()) ? t.setStyle("display", "block") :t.appendTo(CKEDITOR.document.getBody()), 
                CKEDITOR.env.gecko && 10900 > CKEDITOR.env.version) {
                    var i = this.parts.dialog;
                    i.setStyle("position", "absolute"), setTimeout(function() {
                        i.setStyle("position", "fixed");
                    }, 0);
                }
                this.resize(this._.contentSize && this._.contentSize.width || e.width || e.minWidth, this._.contentSize && this._.contentSize.height || e.height || e.minHeight), 
                this.reset(), this.selectPage(this.definition.contents[0].id), null === CKEDITOR.dialog._.currentZIndex && (CKEDITOR.dialog._.currentZIndex = this._.editor.config.baseFloatZIndex), 
                this._.element.getFirst().setStyle("z-index", CKEDITOR.dialog._.currentZIndex += 10), 
                null === CKEDITOR.dialog._.currentTop ? (CKEDITOR.dialog._.currentTop = this, this._.parentDialog = null, 
                d(this._.editor)) :(this._.parentDialog = CKEDITOR.dialog._.currentTop, this._.parentDialog.getElement().getFirst().$.style.zIndex -= Math.floor(this._.editor.config.baseFloatZIndex / 2), 
                CKEDITOR.dialog._.currentTop = this), t.on("keydown", E), t.on(CKEDITOR.env.opera ? "keypress" :"keyup", x), 
                this._.hasFocus = !1, CKEDITOR.tools.setTimeout(function() {
                    this.layout(), a(this), this.parts.dialog.setStyle("visibility", ""), this.fireOnce("load", {}), 
                    CKEDITOR.ui.fire("ready", this), this.fire("show", {}), this._.editor.fire("dialogShow", this), 
                    this._.parentDialog || this._.editor.focusManager.lock(), this.foreach(function(t) {
                        t.setInitValue && t.setInitValue();
                    });
                }, 100, this);
            },
            layout:function() {
                var t = this.parts.dialog, e = this.getSize(), i = CKEDITOR.document.getWindow().getViewPaneSize(), n = (i.width - e.width) / 2, o = (i.height - e.height) / 2;
                CKEDITOR.env.ie6Compat || (e.height + (o > 0 ? o :0) > i.height || e.width + (n > 0 ? n :0) > i.width ? t.setStyle("position", "absolute") :t.setStyle("position", "fixed")), 
                this.move(this._.moved ? this._.position.x :n, this._.moved ? this._.position.y :o);
            },
            foreach:function(t) {
                for (var e in this._.contents) for (var i in this._.contents[e]) t.call(this, this._.contents[e][i]);
                return this;
            },
            reset:function() {
                var t = function(t) {
                    t.reset && t.reset(1);
                };
                return function() {
                    return this.foreach(t), this;
                };
            }(),
            setupContent:function() {
                var t = arguments;
                this.foreach(function(e) {
                    e.setup && e.setup.apply(e, t);
                });
            },
            commitContent:function() {
                var t = arguments;
                this.foreach(function(e) {
                    CKEDITOR.env.ie && this._.currentFocusIndex == e.focusIndex && e.getInputElement().$.blur(), 
                    e.commit && e.commit.apply(e, t);
                });
            },
            hide:function() {
                if (this.parts.dialog.isVisible()) {
                    this.fire("hide", {}), this._.editor.fire("dialogHide", this), this.selectPage(this._.tabIdList[0]);
                    var t = this._.element;
                    for (t.setStyle("display", "none"), this.parts.dialog.setStyle("visibility", "hidden"), 
                    O(this); CKEDITOR.dialog._.currentTop != this; ) CKEDITOR.dialog._.currentTop.hide();
                    if (this._.parentDialog) {
                        var e = this._.parentDialog.getElement().getFirst();
                        e.setStyle("z-index", parseInt(e.$.style.zIndex, 10) + Math.floor(this._.editor.config.baseFloatZIndex / 2));
                    } else p(this._.editor);
                    if (CKEDITOR.dialog._.currentTop = this._.parentDialog) CKEDITOR.dialog._.currentZIndex -= 10; else {
                        CKEDITOR.dialog._.currentZIndex = null, t.removeListener("keydown", E), t.removeListener(CKEDITOR.env.opera ? "keypress" :"keyup", x);
                        var i = this._.editor;
                        i.focus(), setTimeout(function() {
                            i.focusManager.unlock();
                        }, 0);
                    }
                    delete this._.parentDialog, this.foreach(function(t) {
                        t.resetInitValue && t.resetInitValue();
                    });
                }
            },
            addPage:function(t) {
                var e = [], i = t.label ? ' title="' + CKEDITOR.tools.htmlEncode(t.label) + '"' :"", n = CKEDITOR.dialog._.uiElementBuilders.vbox.build(this, {
                    type:"vbox",
                    className:"cke_dialog_page_contents",
                    children:t.elements,
                    expand:!!t.expand,
                    padding:t.padding,
                    style:t.style || "width: 100%;"
                }, e), e = CKEDITOR.dom.element.createFromHtml(e.join(""));
                e.setAttribute("role", "tabpanel");
                var o = CKEDITOR.env, r = "cke_" + t.id + "_" + CKEDITOR.tools.getNextNumber(), i = CKEDITOR.dom.element.createFromHtml([ '<a class="cke_dialog_tab"', 0 < this._.pageCount ? " cke_last" :"cke_first", i, t.hidden ? ' style="display:none"' :"", ' id="', r, '"', o.gecko && 10900 <= o.version && !o.hc ? "" :' href="javascript:void(0)"', ' tabIndex="-1" hidefocus="true" role="tab">', t.label, "</a>" ].join(""));
                for (e.setAttribute("aria-labelledby", r), this._.tabs[t.id] = [ i, e ], this._.tabIdList.push(t.id), 
                !t.hidden && this._.pageCount++, this._.lastTab = i, this.updateStyle(), r = this._.contents[t.id] = {}, 
                o = n.getChild(); n = o.shift(); ) r[n.id] = n, "function" == typeof n.getChild && o.push.apply(o, n.getChild());
                e.setAttribute("name", t.id), e.appendTo(this.parts.contents), i.unselectable(), 
                this.parts.tabs.append(i), t.accessKey && (S(this, this, "CTRL+" + t.accessKey, I, k), 
                this._.accessKeyMap["CTRL+" + t.accessKey] = t.id);
            },
            selectPage:function(t) {
                if (this._.currentTabId != t && !0 !== this.fire("selectPage", {
                    page:t,
                    currentPage:this._.currentTabId
                })) {
                    for (var e in this._.tabs) {
                        var n = this._.tabs[e][0], o = this._.tabs[e][1];
                        e != t && (n.removeClass("cke_dialog_tab_selected"), o.hide()), o.setAttribute("aria-hidden", e != t);
                    }
                    var r = this._.tabs[t];
                    r[0].addClass("cke_dialog_tab_selected"), CKEDITOR.env.ie6Compat || CKEDITOR.env.ie7Compat ? (i(r[1]), 
                    r[1].show(), setTimeout(function() {
                        i(r[1], 1);
                    }, 0)) :r[1].show(), this._.currentTabId = t, this._.currentTabIndex = CKEDITOR.tools.indexOf(this._.tabIdList, t);
                }
            },
            updateStyle:function() {
                this.parts.dialog[(1 === this._.pageCount ? "add" :"remove") + "Class"]("cke_single_page");
            },
            hidePage:function(e) {
                var i = this._.tabs[e] && this._.tabs[e][0];
                i && 1 != this._.pageCount && i.isVisible() && (e == this._.currentTabId && this.selectPage(t.call(this)), 
                i.hide(), this._.pageCount--, this.updateStyle());
            },
            showPage:function(t) {
                (t = this._.tabs[t] && this._.tabs[t][0]) && (t.show(), this._.pageCount++, this.updateStyle());
            },
            getElement:function() {
                return this._.element;
            },
            getName:function() {
                return this._.name;
            },
            getContentElement:function(t, e) {
                var i = this._.contents[t];
                return i && i[e];
            },
            getValueOf:function(t, e) {
                return this.getContentElement(t, e).getValue();
            },
            setValueOf:function(t, e, i) {
                return this.getContentElement(t, e).setValue(i);
            },
            getButton:function(t) {
                return this._.buttons[t];
            },
            click:function(t) {
                return this._.buttons[t].click();
            },
            disableButton:function(t) {
                return this._.buttons[t].disable();
            },
            enableButton:function(t) {
                return this._.buttons[t].enable();
            },
            getPageCount:function() {
                return this._.pageCount;
            },
            getParentEditor:function() {
                return this._.editor;
            },
            getSelectedElement:function() {
                return this.getParentEditor().getSelection().getSelectedElement();
            },
            addFocusable:function(t, e) {
                if ("undefined" == typeof e) e = this._.focusList.length, this._.focusList.push(new s(this, t, e)); else {
                    this._.focusList.splice(e, 0, new s(this, t, e));
                    for (var i = e + 1; i < this._.focusList.length; i++) this._.focusList[i].focusIndex++;
                }
            }
        }, CKEDITOR.tools.extend(CKEDITOR.dialog, {
            add:function(t, e) {
                this._.dialogDefinitions[t] && "function" != typeof e || (this._.dialogDefinitions[t] = e);
            },
            exists:function(t) {
                return !!this._.dialogDefinitions[t];
            },
            getCurrent:function() {
                return CKEDITOR.dialog._.currentTop;
            },
            okButton:function() {
                var t = function(t, e) {
                    return e = e || {}, CKEDITOR.tools.extend({
                        id:"ok",
                        type:"button",
                        label:t.lang.common.ok,
                        "class":"cke_dialog_ui_button_ok",
                        onClick:function(t) {
                            t = t.data.dialog, !1 !== t.fire("ok", {
                                hide:!0
                            }).hide && t.hide();
                        }
                    }, e, !0);
                };
                return t.type = "button", t.override = function(e) {
                    return CKEDITOR.tools.extend(function(i) {
                        return t(i, e);
                    }, {
                        type:"button"
                    }, !0);
                }, t;
            }(),
            cancelButton:function() {
                var t = function(t, e) {
                    return e = e || {}, CKEDITOR.tools.extend({
                        id:"cancel",
                        type:"button",
                        label:t.lang.common.cancel,
                        "class":"cke_dialog_ui_button_cancel",
                        onClick:function(t) {
                            t = t.data.dialog, !1 !== t.fire("cancel", {
                                hide:!0
                            }).hide && t.hide();
                        }
                    }, e, !0);
                };
                return t.type = "button", t.override = function(e) {
                    return CKEDITOR.tools.extend(function(i) {
                        return t(i, e);
                    }, {
                        type:"button"
                    }, !0);
                }, t;
            }(),
            addUIElement:function(t, e) {
                this._.uiElementBuilders[t] = e;
            }
        }), CKEDITOR.dialog._ = {
            uiElementBuilders:{},
            dialogDefinitions:{},
            currentTop:null,
            currentZIndex:null
        }, CKEDITOR.event.implementOn(CKEDITOR.dialog), CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);
        var m = {
            resizable:CKEDITOR.DIALOG_RESIZE_BOTH,
            minWidth:600,
            minHeight:400,
            buttons:[ CKEDITOR.dialog.okButton, CKEDITOR.dialog.cancelButton ]
        }, _ = function(t, e, i) {
            for (var n, o = 0; n = t[o]; o++) if (n.id == e || i && n[i] && (n = _(n[i], e, i))) return n;
            return null;
        }, v = function(t, e, i, n, o) {
            if (i) {
                for (var r, s = 0; r = t[s]; s++) {
                    if (r.id == i) return t.splice(s, 0, e), e;
                    if (n && r[n] && (r = v(r[n], e, i, n, !0))) return r;
                }
                if (o) return null;
            }
            return t.push(e), e;
        }, y = function(t, e, i) {
            for (var n, o = 0; n = t[o]; o++) {
                if (n.id == e) return t.splice(o, 1);
                if (i && n[i] && (n = y(n[i], e, i))) return n;
            }
            return null;
        }, b = function(t, e) {
            this.dialog = t;
            for (var i, n = e.contents, o = 0; i = n[o]; o++) n[o] = i && new l(t, i);
            CKEDITOR.tools.extend(this, e);
        };
        b.prototype = {
            getContents:function(t) {
                return _(this.contents, t);
            },
            getButton:function(t) {
                return _(this.buttons, t);
            },
            addContents:function(t, e) {
                return v(this.contents, t, e);
            },
            addButton:function(t, e) {
                return v(this.buttons, t, e);
            },
            removeContents:function(t) {
                y(this.contents, t);
            },
            removeButton:function(t) {
                y(this.buttons, t);
            }
        }, l.prototype = {
            get:function(t) {
                return _(this.elements, t, "children");
            },
            add:function(t, e) {
                return v(this.elements, t, e, "children");
            },
            remove:function(t) {
                y(this.elements, t, "children");
            }
        };
        var w, C, T = {}, D = {}, E = function(t) {
            var e = t.data.$.ctrlKey || t.data.$.metaKey, i = t.data.$.altKey, n = t.data.$.shiftKey, o = String.fromCharCode(t.data.$.keyCode);
            (e = D[(e ? "CTRL+" :"") + (i ? "ALT+" :"") + (n ? "SHIFT+" :"") + o]) && e.length && (e = e[e.length - 1], 
            e.keydown && e.keydown.call(e.uiElement, e.dialog, e.key), t.data.preventDefault());
        }, x = function(t) {
            var e = t.data.$.ctrlKey || t.data.$.metaKey, i = t.data.$.altKey, n = t.data.$.shiftKey, o = String.fromCharCode(t.data.$.keyCode);
            (e = D[(e ? "CTRL+" :"") + (i ? "ALT+" :"") + (n ? "SHIFT+" :"") + o]) && e.length && (e = e[e.length - 1], 
            e.keyup && (e.keyup.call(e.uiElement, e.dialog, e.key), t.data.preventDefault()));
        }, S = function(t, e, i, n, o) {
            (D[i] || (D[i] = [])).push({
                uiElement:t,
                dialog:e,
                key:i,
                keyup:o || t.accessKeyUp,
                keydown:n || t.accessKeyDown
            });
        }, O = function(t) {
            for (var e in D) {
                for (var i = D[e], n = i.length - 1; n >= 0; n--) (i[n].dialog == t || i[n].uiElement == t) && i.splice(n, 1);
                0 === i.length && delete D[e];
            }
        }, k = function(t, e) {
            t._.accessKeyMap[e] && t.selectPage(t._.accessKeyMap[e]);
        }, I = function() {};
        !function() {
            CKEDITOR.ui.dialog = {
                uiElement:function(t, e, i, n, o, r, s) {
                    if (!(4 > arguments.length)) {
                        var a = (n.call ? n(e) :n) || "div", l = [ "<", a, " " ], c = (o && o.call ? o(e) :o) || {}, h = (r && r.call ? r(e) :r) || {}, u = (s && s.call ? s.call(this, t, e) :s) || "", d = this.domId = h.id || CKEDITOR.tools.getNextId() + "_uiElement";
                        this.id = e.id, h.id = d;
                        var p = {};
                        e.type && (p["cke_dialog_ui_" + e.type] = 1), e.className && (p[e.className] = 1), 
                        e.disabled && (p.cke_disabled = 1);
                        for (var f = h["class"] && h["class"].split ? h["class"].split(" ") :[], d = 0; d < f.length; d++) f[d] && (p[f[d]] = 1);
                        f = [];
                        for (d in p) f.push(d);
                        h["class"] = f.join(" "), e.title && (h.title = e.title), p = (e.style || "").split(";"), 
                        e.align && (f = e.align, c["margin-left"] = "left" == f ? 0 :"auto", c["margin-right"] = "right" == f ? 0 :"auto");
                        for (d in c) p.push(d + ":" + c[d]);
                        for (e.hidden && p.push("display:none"), d = p.length - 1; d >= 0; d--) "" === p[d] && p.splice(d, 1);
                        0 < p.length && (h.style = (h.style ? h.style + "; " :"") + p.join("; "));
                        for (d in h) l.push(d + '="' + CKEDITOR.tools.htmlEncode(h[d]) + '" ');
                        l.push(">", u, "</", a, ">"), i.push(l.join("")), (this._ || (this._ = {})).dialog = t, 
                        "boolean" == typeof e.isChanged && (this.isChanged = function() {
                            return e.isChanged;
                        }), "function" == typeof e.isChanged && (this.isChanged = e.isChanged), "function" == typeof e.setValue && (this.setValue = CKEDITOR.tools.override(this.setValue, function(t) {
                            return function(i) {
                                t.call(this, e.setValue.call(this, i));
                            };
                        })), "function" == typeof e.getValue && (this.getValue = CKEDITOR.tools.override(this.getValue, function(t) {
                            return function() {
                                return e.getValue.call(this, t.call(this));
                            };
                        })), CKEDITOR.event.implementOn(this), this.registerEvents(e), this.accessKeyUp && this.accessKeyDown && e.accessKey && S(this, t, "CTRL+" + e.accessKey);
                        var g = this;
                        t.on("load", function() {
                            var e = g.getInputElement();
                            if (e) {
                                var i = g.type in {
                                    checkbox:1,
                                    ratio:1
                                } && CKEDITOR.env.ie && CKEDITOR.env.version < 8 ? "cke_dialog_ui_focused" :"";
                                e.on("focus", function() {
                                    t._.tabBarMode = !1, t._.hasFocus = !0, g.fire("focus"), i && this.addClass(i);
                                }), e.on("blur", function() {
                                    g.fire("blur"), i && this.removeClass(i);
                                });
                            }
                        }), this.keyboardFocusable && (this.tabIndex = e.tabIndex || 0, this.focusIndex = t._.focusList.push(this) - 1, 
                        this.on("focus", function() {
                            t._.currentFocusIndex = g.focusIndex;
                        })), CKEDITOR.tools.extend(this, e);
                    }
                },
                hbox:function(t, e, i, n, o) {
                    if (!(4 > arguments.length)) {
                        this._ || (this._ = {});
                        var r, s = this._.children = e, a = o && o.widths || null, l = o && o.height || null, c = {
                            role:"presentation"
                        };
                        o && o.align && (c.align = o.align), CKEDITOR.ui.dialog.uiElement.call(this, t, o || {
                            type:"hbox"
                        }, n, "table", {}, c, function() {
                            var t = [ '<tbody><tr class="cke_dialog_ui_hbox">' ];
                            for (r = 0; r < i.length; r++) {
                                var e = "cke_dialog_ui_hbox_child", n = [];
                                0 === r && (e = "cke_dialog_ui_hbox_first"), r == i.length - 1 && (e = "cke_dialog_ui_hbox_last"), 
                                t.push('<td class="', e, '" role="presentation" '), a ? a[r] && n.push("width:" + f(a[r])) :n.push("width:" + Math.floor(100 / i.length) + "%"), 
                                l && n.push("height:" + f(l)), o && void 0 != o.padding && n.push("padding:" + f(o.padding)), 
                                CKEDITOR.env.ie && CKEDITOR.env.quirks && s[r].align && n.push("text-align:" + s[r].align), 
                                0 < n.length && t.push('style="' + n.join("; ") + '" '), t.push(">", i[r], "</td>");
                            }
                            return t.push("</tr></tbody>"), t.join("");
                        });
                    }
                },
                vbox:function(t, e, i, n, o) {
                    if (!(3 > arguments.length)) {
                        this._ || (this._ = {});
                        var r = this._.children = e, s = o && o.width || null, a = o && o.heights || null;
                        CKEDITOR.ui.dialog.uiElement.call(this, t, o || {
                            type:"vbox"
                        }, n, "div", null, {
                            role:"presentation"
                        }, function() {
                            var e = [ '<table role="presentation" cellspacing="0" border="0" ' ];
                            e.push('style="'), o && o.expand && e.push("height:100%;"), e.push("width:" + f(s || "100%"), ";"), 
                            e.push('"'), e.push('align="', CKEDITOR.tools.htmlEncode(o && o.align || ("ltr" == t.getParentEditor().lang.dir ? "left" :"right")), '" '), 
                            e.push("><tbody>");
                            for (var n = 0; n < i.length; n++) {
                                var l = [];
                                e.push('<tr><td role="presentation" '), s && l.push("width:" + f(s || "100%")), 
                                a ? l.push("height:" + f(a[n])) :o && o.expand && l.push("height:" + Math.floor(100 / i.length) + "%"), 
                                o && void 0 != o.padding && l.push("padding:" + f(o.padding)), CKEDITOR.env.ie && CKEDITOR.env.quirks && r[n].align && l.push("text-align:" + r[n].align), 
                                0 < l.length && e.push('style="', l.join("; "), '" '), e.push(' class="cke_dialog_ui_vbox_child">', i[n], "</td></tr>");
                            }
                            return e.push("</tbody></table>"), e.join("");
                        });
                    }
                }
            };
        }(), CKEDITOR.ui.dialog.uiElement.prototype = {
            getElement:function() {
                return CKEDITOR.document.getById(this.domId);
            },
            getInputElement:function() {
                return this.getElement();
            },
            getDialog:function() {
                return this._.dialog;
            },
            setValue:function(t, e) {
                return this.getInputElement().setValue(t), !e && this.fire("change", {
                    value:t
                }), this;
            },
            getValue:function() {
                return this.getInputElement().getValue();
            },
            isChanged:function() {
                return !1;
            },
            selectParentTab:function() {
                for (var t = this.getInputElement(); (t = t.getParent()) && -1 == t.$.className.search("cke_dialog_page_contents"); ) ;
                return t ? (t = t.getAttribute("name"), this._.dialog._.currentTabId != t && this._.dialog.selectPage(t), 
                this) :this;
            },
            focus:function() {
                return this.selectParentTab().getInputElement().focus(), this;
            },
            registerEvents:function(t) {
                var e, i, n = /^on([A-Z]\w+)/, o = function(t, e, i, n) {
                    e.on("load", function() {
                        t.getInputElement().on(i, n, t);
                    });
                };
                for (i in t) (e = i.match(n)) && (this.eventProcessors[i] ? this.eventProcessors[i].call(this, this._.dialog, t[i]) :o(this, this._.dialog, e[1].toLowerCase(), t[i]));
                return this;
            },
            eventProcessors:{
                onLoad:function(t, e) {
                    t.on("load", e, this);
                },
                onShow:function(t, e) {
                    t.on("show", e, this);
                },
                onHide:function(t, e) {
                    t.on("hide", e, this);
                }
            },
            accessKeyDown:function() {
                this.focus();
            },
            accessKeyUp:function() {},
            disable:function() {
                var t = this.getElement();
                this.getInputElement().setAttribute("disabled", "true"), t.addClass("cke_disabled");
            },
            enable:function() {
                var t = this.getElement();
                this.getInputElement().removeAttribute("disabled"), t.removeClass("cke_disabled");
            },
            isEnabled:function() {
                return !this.getElement().hasClass("cke_disabled");
            },
            isVisible:function() {
                return this.getInputElement().isVisible();
            },
            isFocusable:function() {
                return this.isEnabled() && this.isVisible() ? !0 :!1;
            }
        }, CKEDITOR.ui.dialog.hbox.prototype = CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement(), {
            getChild:function(t) {
                return 1 > arguments.length ? this._.children.concat() :(t.splice || (t = [ t ]), 
                2 > t.length ? this._.children[t[0]] :this._.children[t[0]] && this._.children[t[0]].getChild ? this._.children[t[0]].getChild(t.slice(1, t.length)) :null);
            }
        }, !0), CKEDITOR.ui.dialog.vbox.prototype = new CKEDITOR.ui.dialog.hbox(), function() {
            var t = {
                build:function(t, e, i) {
                    for (var n, o = e.children, r = [], s = [], a = 0; a < o.length && (n = o[a]); a++) {
                        var l = [];
                        r.push(l), s.push(CKEDITOR.dialog._.uiElementBuilders[n.type].build(t, n, l));
                    }
                    return new CKEDITOR.ui.dialog[e.type](t, s, r, i, e);
                }
            };
            CKEDITOR.dialog.addUIElement("hbox", t), CKEDITOR.dialog.addUIElement("vbox", t);
        }(), CKEDITOR.dialogCommand = function(t, e) {
            this.dialogName = t, CKEDITOR.tools.extend(this, e, !0);
        }, CKEDITOR.dialogCommand.prototype = {
            exec:function(t) {
                CKEDITOR.env.opera ? CKEDITOR.tools.setTimeout(function() {
                    t.openDialog(this.dialogName);
                }, 0, this) :t.openDialog(this.dialogName);
            },
            canUndo:!1,
            editorFocus:CKEDITOR.env.ie || CKEDITOR.env.webkit
        }, function() {
            var t = /^([a]|[^a])+$/, e = /^\d*$/, i = /^\d*(?:\.\d+)?$/, n = /^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/, o = /^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i, r = /^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;
            CKEDITOR.VALIDATE_OR = 1, CKEDITOR.VALIDATE_AND = 2, CKEDITOR.dialog.validate = {
                functions:function() {
                    var t = arguments;
                    return function() {
                        var e, i = this && this.getValue ? this.getValue() :t[0], n = void 0, o = CKEDITOR.VALIDATE_AND, r = [];
                        for (e = 0; e < t.length && "function" == typeof t[e]; e++) r.push(t[e]);
                        e < t.length && "string" == typeof t[e] && (n = t[e], e++), e < t.length && "number" == typeof t[e] && (o = t[e]);
                        var s = o == CKEDITOR.VALIDATE_AND ? !0 :!1;
                        for (e = 0; e < r.length; e++) s = o == CKEDITOR.VALIDATE_AND ? s && r[e](i) :s || r[e](i);
                        return s ? !0 :n;
                    };
                },
                regex:function(t, e) {
                    return function(i) {
                        return i = this && this.getValue ? this.getValue() :i, t.test(i) ? !0 :e;
                    };
                },
                notEmpty:function(e) {
                    return this.regex(t, e);
                },
                integer:function(t) {
                    return this.regex(e, t);
                },
                number:function(t) {
                    return this.regex(i, t);
                },
                cssLength:function(t) {
                    return this.functions(function(t) {
                        return o.test(CKEDITOR.tools.trim(t));
                    }, t);
                },
                htmlLength:function(t) {
                    return this.functions(function(t) {
                        return n.test(CKEDITOR.tools.trim(t));
                    }, t);
                },
                inlineStyle:function(t) {
                    return this.functions(function(t) {
                        return r.test(CKEDITOR.tools.trim(t));
                    }, t);
                },
                equals:function(t, e) {
                    return this.functions(function(e) {
                        return e == t;
                    }, e);
                },
                notEqual:function(t, e) {
                    return this.functions(function(e) {
                        return e != t;
                    }, e);
                }
            }, CKEDITOR.on("instanceDestroyed", function(t) {
                if (CKEDITOR.tools.isEmpty(CKEDITOR.instances)) {
                    for (var e; e = CKEDITOR.dialog._.currentTop; ) e.hide();
                    for (var i in T) T[i].remove();
                    T = {};
                }
                var n, t = t.editor._.storedDialogs;
                for (n in t) t[n].destroy();
            });
        }(), CKEDITOR.tools.extend(CKEDITOR.editor.prototype, {
            openDialog:function(t, e) {
                var i = null, n = CKEDITOR.dialog._.dialogDefinitions[t];
                if (null === CKEDITOR.dialog._.currentTop && d(this), "function" == typeof n) i = this._.storedDialogs || (this._.storedDialogs = {}), 
                i = i[t] || (i[t] = new CKEDITOR.dialog(this, t)), e && e.call(i, i), i.show(); else {
                    if ("failed" == n) throw p(this), Error('[CKEDITOR.dialog.openDialog] Dialog "' + t + '" failed when loading definition.');
                    "string" == typeof n && CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(n), function() {
                        "function" != typeof CKEDITOR.dialog._.dialogDefinitions[t] && (CKEDITOR.dialog._.dialogDefinitions[t] = "failed"), 
                        this.openDialog(t, e);
                    }, this, 0, 1);
                }
                return CKEDITOR.skin.loadPart("dialog"), i;
            }
        });
    }(), CKEDITOR.plugins.add("dialog", {
        requires:"dialogui",
        init:function(t) {
            t.on("contentDom", function() {
                var e = t.editable();
                e.attachListener(e, "dblclick", function(e) {
                    return t.readOnly ? !1 :(e = {
                        element:e.data.getTarget()
                    }, t.fire("doubleclick", e), e.dialog && t.openDialog(e.dialog), 1);
                });
            });
        }
    }), function() {
        function t(t) {
            function e() {
                var e = t.editable();
                e.on(v, function(t) {
                    (!CKEDITOR.env.ie || !g) && d(t);
                }), CKEDITOR.env.ie && e.on("paste", function(e) {
                    m || (o(), e.data.preventDefault(), d(e), s("paste") || t.openDialog("paste"));
                }), CKEDITOR.env.ie && (e.on("contextmenu", r, null, null, 0), e.on("beforepaste", function(t) {
                    t.data && !t.data.$.ctrlKey && r();
                }, null, null, 0)), e.on("beforecut", function() {
                    !g && l(t);
                }), e.on("mouseup", function() {
                    setTimeout(function() {
                        p();
                    }, 0);
                }), e.on("keyup", p);
            }
            function i(e) {
                return {
                    type:e,
                    canUndo:"cut" == e,
                    startDisabled:!0,
                    exec:function() {
                        "cut" == this.type && l();
                        var e, i = this.type;
                        if (CKEDITOR.env.ie) e = s(i); else try {
                            e = t.document.$.execCommand(i, !1, null);
                        } catch (n) {
                            e = !1;
                        }
                        return e || alert(t.lang.clipboard[this.type + "Error"]), e;
                    }
                };
            }
            function n() {
                return {
                    canUndo:!1,
                    async:!0,
                    exec:function(t, e) {
                        var i = function(e, i) {
                            e && a(e.type, e.dataValue, !!i), t.fire("afterCommandExec", {
                                name:"paste",
                                command:n,
                                returnValue:!!e
                            });
                        }, n = this;
                        "string" == typeof e ? i({
                            type:"auto",
                            dataValue:e
                        }, 1) :t.getClipboardData(i);
                    }
                };
            }
            function o() {
                m = 1, setTimeout(function() {
                    m = 0;
                }, 100);
            }
            function r() {
                g = 1, setTimeout(function() {
                    g = 0;
                }, 10);
            }
            function s(e) {
                var i = t.document, n = i.getBody(), o = !1, r = function() {
                    o = !0;
                };
                return n.on(e, r), (7 < CKEDITOR.env.version ? i.$ :i.$.selection.createRange()).execCommand(e), 
                n.removeListener(e, r), o;
            }
            function a(e, i, n) {
                return e = {
                    type:e
                }, n && !t.fire("beforePaste", e) || !i ? !1 :(e.dataValue = i, t.fire("paste", e));
            }
            function l() {
                if (CKEDITOR.env.ie && !CKEDITOR.env.quirks) {
                    var e, i, n, o = t.getSelection();
                    o.getType() == CKEDITOR.SELECTION_ELEMENT && (e = o.getSelectedElement()) && (i = o.getRanges()[0], 
                    n = t.document.createText(""), n.insertBefore(e), i.setStartBefore(n), i.setEndAfter(e), 
                    o.selectRanges([ i ]), setTimeout(function() {
                        e.getParent() && (n.remove(), o.selectElement(e));
                    }, 0));
                }
            }
            function c(e, i) {
                var n = t.document, o = t.editable(), r = function(t) {
                    t.cancel();
                }, s = CKEDITOR.env.gecko && 10902 >= CKEDITOR.env.version;
                if (!n.getById("cke_pastebin")) {
                    var a = t.getSelection(), l = a.createBookmarks(), c = new CKEDITOR.dom.element(!o.is("body") || CKEDITOR.env.ie || CKEDITOR.env.opera ? "div" :"body", n);
                    c.setAttribute("id", "cke_pastebin"), CKEDITOR.env.opera && c.appendBogus();
                    var h = 0, n = n.getWindow();
                    s ? (c.insertAfter(l[0].startNode), c.setStyle("display", "inline")) :(CKEDITOR.env.webkit ? (o.append(c), 
                    c.addClass("cke_editable"), h = (o.is("body") ? o :CKEDITOR.dom.element.get(c.$.offsetParent)).getDocumentPosition().y) :o.getAscendant(CKEDITOR.env.ie || CKEDITOR.env.opera ? "body" :"html", 1).append(c), 
                    c.setStyles({
                        position:"absolute",
                        top:n.getScrollPosition().y - h + 10 + "px",
                        width:"1px",
                        height:Math.max(1, n.getViewPaneSize().height - 20) + "px",
                        overflow:"hidden",
                        margin:0,
                        padding:0
                    })), (s = c.getParent().isReadOnly()) ? (c.setOpacity(0), c.setAttribute("contenteditable", !0)) :c.setStyle("ltr" == t.config.contentsLangDirection ? "left" :"right", "-1000px"), 
                    t.on("selectionChange", r, null, null, 0), s && c.focus(), s = new CKEDITOR.dom.range(c), 
                    s.selectNodeContents(c);
                    var u = s.select();
                    if (CKEDITOR.env.ie) var d = o.once("blur", function() {
                        t.lockSelection(u);
                    });
                    var p = CKEDITOR.document.getWindow().getScrollPosition().y;
                    setTimeout(function() {
                        (CKEDITOR.env.webkit || CKEDITOR.env.opera) && (CKEDITOR.document[CKEDITOR.env.webkit ? "getBody" :"getDocumentElement"]().$.scrollTop = p), 
                        d && d.removeListener(), CKEDITOR.env.ie && o.focus(), a.selectBookmarks(l), c.remove();
                        var e;
                        CKEDITOR.env.webkit && (e = c.getFirst()) && e.is && e.hasClass("Apple-style-span") && (c = e), 
                        t.removeListener("selectionChange", r), i(c.getHtml());
                    }, 0);
                }
            }
            function h() {
                if (CKEDITOR.env.ie) {
                    t.focus(), o();
                    var e = t.focusManager;
                    if (e.lock(), t.editable().fire(v) && !s("paste")) return e.unlock(), !1;
                    e.unlock();
                } else try {
                    if (t.editable().fire(v) && !t.document.$.execCommand("Paste", !1, null)) throw 0;
                } catch (i) {
                    return !1;
                }
                return !0;
            }
            function u(e) {
                if ("wysiwyg" == t.mode) switch (e.data.keyCode) {
                  case CKEDITOR.CTRL + 86:
                  case CKEDITOR.SHIFT + 45:
                    e = t.editable(), o(), !CKEDITOR.env.ie && e.fire("beforepaste"), (CKEDITOR.env.opera || CKEDITOR.env.gecko && 10900 > CKEDITOR.env.version) && e.fire("paste");
                    break;

                  case CKEDITOR.CTRL + 88:
                  case CKEDITOR.SHIFT + 46:
                    t.fire("saveSnapshot"), setTimeout(function() {
                        t.fire("saveSnapshot");
                    }, 0);
                }
            }
            function d(e) {
                var i = {
                    type:"auto"
                }, n = t.fire("beforePaste", i);
                c(e, function(t) {
                    t = t.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi, ""), n && a(i.type, t, 0, 1);
                });
            }
            function p() {
                if ("wysiwyg" == t.mode) {
                    var e = f("Paste");
                    t.getCommand("cut").setState(f("Cut")), t.getCommand("copy").setState(f("Copy")), 
                    t.getCommand("paste").setState(e), t.fire("pasteState", e);
                }
            }
            function f(e) {
                var i;
                if (_ && e in {
                    Paste:1,
                    Cut:1
                }) return CKEDITOR.TRISTATE_DISABLED;
                if ("Paste" == e) {
                    CKEDITOR.env.ie && (g = 1);
                    try {
                        i = t.document.$.queryCommandEnabled(e) || CKEDITOR.env.webkit;
                    } catch (n) {}
                    g = 0;
                } else e = t.getSelection(), i = e.getRanges(), i = e.type != CKEDITOR.SELECTION_NONE && !(1 == i.length && i[0].collapsed);
                return i ? CKEDITOR.TRISTATE_OFF :CKEDITOR.TRISTATE_DISABLED;
            }
            var g = 0, m = 0, _ = 0, v = CKEDITOR.env.ie ? "beforepaste" :"paste";
            !function() {
                t.on("key", u), t.on("contentDom", e), t.on("selectionChange", function(t) {
                    _ = t.data.selection.getRanges()[0].checkReadOnly(), p();
                }), t.contextMenu && t.contextMenu.addListener(function(t, e) {
                    return _ = e.getRanges()[0].checkReadOnly(), {
                        cut:f("Cut"),
                        copy:f("Copy"),
                        paste:f("Paste")
                    };
                });
            }(), function() {
                function e(e, i, n, o, r) {
                    var s = t.lang.clipboard[i];
                    t.addCommand(i, n), t.ui.addButton && t.ui.addButton(e, {
                        label:s,
                        command:i,
                        toolbar:"clipboard," + o
                    }), t.addMenuItems && t.addMenuItem(i, {
                        label:s,
                        command:i,
                        group:"clipboard",
                        order:r
                    });
                }
                e("Cut", "cut", i("cut"), 10, 1), e("Copy", "copy", i("copy"), 20, 4), e("Paste", "paste", n(), 30, 8);
            }(), t.getClipboardData = function(e, i) {
                function n(t) {
                    t.removeListener(), t.cancel(), i(t.data);
                }
                function o(t) {
                    t.removeListener(), t.cancel(), l = !0, i({
                        type:a,
                        dataValue:t.data
                    });
                }
                function r() {
                    this.customTitle = e && e.title;
                }
                var s = !1, a = "auto", l = !1;
                i || (i = e, e = null), t.on("paste", n, null, null, 0), t.on("beforePaste", function(t) {
                    t.removeListener(), s = !0, a = t.data.type;
                }, null, null, 1e3), !1 === h() && (t.removeListener("paste", n), s && t.fire("pasteDialog", r) ? (t.on("pasteDialogCommit", o), 
                t.on("dialogHide", function(t) {
                    t.removeListener(), t.data.removeListener("pasteDialogCommit", o), setTimeout(function() {
                        l || i(null);
                    }, 10);
                })) :i(null));
            };
        }
        function e(t) {
            if (CKEDITOR.env.webkit) {
                if (!t.match(/^[^<]*$/g) && !t.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi)) return "html";
            } else if (CKEDITOR.env.ie) {
                if (!t.match(/^([^<]|<br( ?\/)?>)*$/gi) && !t.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi)) return "html";
            } else {
                if (!CKEDITOR.env.gecko && !CKEDITOR.env.opera) return "html";
                if (!t.match(/^([^<]|<br( ?\/)?>)*$/gi)) return "html";
            }
            return "htmlifiedtext";
        }
        function i(t, e) {
            function i(t) {
                return CKEDITOR.tools.repeat("</p><p>", ~~(t / 2)) + (1 == t % 2 ? "<br>" :"");
            }
            return e = e.replace(/\s+/g, " ").replace(/> +</g, "><").replace(/<br ?\/>/gi, "<br>"), 
            e = e.replace(/<\/?[A-Z]+>/g, function(t) {
                return t.toLowerCase();
            }), e.match(/^[^<]$/) ? e :(CKEDITOR.env.webkit && -1 < e.indexOf("<div>") && (e = e.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g, "<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g, "<div></div>"), 
            e.match(/<div>(<br>|)<\/div>/) && (e = "<p>" + e.replace(/(<div>(<br>|)<\/div>)+/g, function(t) {
                return i(t.split("</div><div>").length + 1);
            }) + "</p>"), e = e.replace(/<\/div><div>/g, "<br>"), e = e.replace(/<\/?div>/g, "")), 
            (CKEDITOR.env.gecko || CKEDITOR.env.opera) && t.enterMode != CKEDITOR.ENTER_BR && (CKEDITOR.env.gecko && (e = e.replace(/^<br><br>$/, "<br>")), 
            -1 < e.indexOf("<br><br>") && (e = "<p>" + e.replace(/(<br>){2,}/g, function(t) {
                return i(t.length / 4);
            }) + "</p>")), r(t, e));
        }
        function n() {
            var t = new CKEDITOR.htmlParser.filter(), e = {
                blockquote:1,
                dl:1,
                fieldset:1,
                h1:1,
                h2:1,
                h3:1,
                h4:1,
                h5:1,
                h6:1,
                ol:1,
                p:1,
                table:1,
                ul:1
            }, i = CKEDITOR.tools.extend({
                br:0
            }, CKEDITOR.dtd.$inline), n = {
                p:1,
                br:1,
                "cke:br":1
            }, o = CKEDITOR.dtd, r = CKEDITOR.tools.extend({
                area:1,
                basefont:1,
                embed:1,
                iframe:1,
                map:1,
                object:1,
                param:1
            }, CKEDITOR.dtd.$nonBodyContent, CKEDITOR.dtd.$cdata), s = function(t) {
                delete t.name, t.add(new CKEDITOR.htmlParser.text(" "));
            }, a = function(t) {
                for (var e, i = t; (i = i.next) && i.name && i.name.match(/^h\d$/); ) for (e = new CKEDITOR.htmlParser.element("cke:br"), 
                e.isEmpty = !0, t.add(e); e = i.children.shift(); ) t.add(e);
            };
            return t.addRules({
                elements:{
                    h1:a,
                    h2:a,
                    h3:a,
                    h4:a,
                    h5:a,
                    h6:a,
                    img:function(t) {
                        var t = CKEDITOR.tools.trim(t.attributes.alt || ""), e = " ";
                        return t && !t.match(/(^http|\.(jpe?g|gif|png))/i) && (e = " [" + t + "] "), new CKEDITOR.htmlParser.text(e);
                    },
                    td:s,
                    th:s,
                    $:function(t) {
                        var s, a = t.name;
                        if (r[a]) return !1;
                        if (delete t.attributes, "br" == a) return t;
                        if (e[a]) t.name = "p"; else if (i[a]) delete t.name; else if (o[a]) {
                            if (s = new CKEDITOR.htmlParser.element("cke:br"), s.isEmpty = !0, CKEDITOR.dtd.$empty[a]) return s;
                            t.add(s, 0), s = s.clone(), s.isEmpty = !0, t.add(s), delete t.name;
                        }
                        return n[t.name] || delete t.name, t;
                    }
                }
            }), t;
        }
        function o(t, e, i) {
            var e = new CKEDITOR.htmlParser.fragment.fromHtml(e), n = new CKEDITOR.htmlParser.basicWriter();
            e.writeHtml(n, i);
            var e = n.getHtml(), e = e.replace(/\s*(<\/?[a-z:]+ ?\/?>)\s*/g, "$1").replace(/(<cke:br \/>){2,}/g, "<cke:br />").replace(/(<cke:br \/>)(<\/?p>|<br \/>)/g, "$2").replace(/(<\/?p>|<br \/>)(<cke:br \/>)/g, "$1").replace(/<(cke:)?br( \/)?>/g, "<br>").replace(/<p><\/p>/g, ""), o = 0, e = e.replace(/<\/?p>/g, function(t) {
                if ("<p>" == t) {
                    if (1 < ++o) return "</p><p>";
                } else if (0 < --o) return "</p><p>";
                return t;
            }).replace(/<p><\/p>/g, "");
            return r(t, e);
        }
        function r(t, e) {
            return t.enterMode == CKEDITOR.ENTER_BR ? e = e.replace(/(<\/p><p>)+/g, function(t) {
                return CKEDITOR.tools.repeat("<br>", 2 * (t.length / 7));
            }).replace(/<\/?p>/g, "") :t.enterMode == CKEDITOR.ENTER_DIV && (e = e.replace(/<(\/)?p>/g, "<$1div>")), 
            e;
        }
        CKEDITOR.plugins.add("clipboard", {
            requires:"dialog",
            init:function(r) {
                var s;
                t(r), CKEDITOR.dialog.add("paste", CKEDITOR.getUrl(this.path + "dialogs/paste.js")), 
                r.on("paste", function(t) {
                    var e = t.data.dataValue, i = CKEDITOR.dtd.$block;
                    if (-1 < e.indexOf("Apple-") && (e = e.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi, " "), 
                    "html" != t.data.type && (e = e.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi, function(t, e) {
                        return e.replace(/\t/g, "&nbsp;&nbsp; &nbsp;");
                    })), -1 < e.indexOf('<br class="Apple-interchange-newline">') && (t.data.startsWithEOL = 1, 
                    t.data.preSniffing = "html", e = e.replace(/<br class="Apple-interchange-newline">/, "")), 
                    e = e.replace(/(<[^>]+) class="Apple-[^"]*"/gi, "$1")), e.match(/^<[^<]+cke_(editable|contents)/i)) {
                        var n, o, r = new CKEDITOR.dom.element("div");
                        for (r.setHtml(e); 1 == r.getChildCount() && (n = r.getFirst()) && n.type == CKEDITOR.NODE_ELEMENT && (n.hasClass("cke_editable") || n.hasClass("cke_contents")); ) r = o = n;
                        o && (e = o.getHtml().replace(/<br>$/i, ""));
                    }
                    CKEDITOR.env.ie ? e = e.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g, function(e, n) {
                        return n.toLowerCase() in i ? (t.data.preSniffing = "html", "<" + n) :e;
                    }) :CKEDITOR.env.webkit ? e = e.replace(/<\/(\w+)><div><br><\/div>$/, function(e, n) {
                        return n in i ? (t.data.endsWithEOL = 1, "</" + n + ">") :e;
                    }) :CKEDITOR.env.gecko && (e = e.replace(/(\s)<br>$/, "$1")), t.data.dataValue = e;
                }, null, null, 3), r.on("paste", function(t) {
                    var a, t = t.data, l = t.type, c = t.dataValue, h = r.config.clipboard_defaultContentType || "html";
                    a = "html" == l || "html" == t.preSniffing ? "html" :e(c), "htmlifiedtext" == a ? c = i(r.config, c) :"text" == l && "html" == a && (c = o(r.config, c, s || (s = n(r)))), 
                    t.startsWithEOL && (c = '<br data-cke-eol="1">' + c), t.endsWithEOL && (c += '<br data-cke-eol="1">'), 
                    "auto" == l && (l = "html" == a || "html" == h ? "html" :"text"), t.type = l, t.dataValue = c, 
                    delete t.preSniffing, delete t.startsWithEOL, delete t.endsWithEOL;
                }, null, null, 6), r.on("paste", function(t) {
                    t = t.data, r.insertHtml(t.dataValue, t.type), setTimeout(function() {
                        r.fire("afterPaste");
                    }, 0);
                }, null, null, 1e3), r.on("pasteDialog", function(t) {
                    setTimeout(function() {
                        r.openDialog("paste", t.data);
                    }, 0);
                });
            }
        });
    }(), function() {
        var t = '<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"' + (CKEDITOR.env.gecko && 10900 <= CKEDITOR.env.version && !CKEDITOR.env.hc ? "" :'" href="javascript:void(\'{titleJs}\')"') + ' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="{hasArrow}"';
        (CKEDITOR.env.opera || CKEDITOR.env.gecko && CKEDITOR.env.mac) && (t += ' onkeypress="return false;"'), 
        CKEDITOR.env.gecko && (t += ' onblur="this.style.cssText = this.style.cssText;"');
        var t = t + (' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);"  onmousedown="return CKEDITOR.tools.callFunction({mousedownFn},event);" ' + (CKEDITOR.env.ie ? 'onclick="return false;" onmouseup' :"onclick") + '="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}"'), t = t + '>&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label">{label}</span>{arrowHtml}</a>', e = CKEDITOR.addTemplate("buttonArrow", '<span class="cke_button_arrow">' + (CKEDITOR.env.hc ? "&#9660;" :"") + "</span>"), i = CKEDITOR.addTemplate("button", t);
        CKEDITOR.plugins.add("button", {
            beforeInit:function(t) {
                t.ui.addHandler(CKEDITOR.UI_BUTTON, CKEDITOR.ui.button.handler);
            }
        }), CKEDITOR.UI_BUTTON = "button", CKEDITOR.ui.button = function(t) {
            CKEDITOR.tools.extend(this, t, {
                title:t.label,
                click:t.click || function(e) {
                    e.execCommand(t.command);
                }
            }), this._ = {};
        }, CKEDITOR.ui.button.handler = {
            create:function(t) {
                return new CKEDITOR.ui.button(t);
            }
        }, CKEDITOR.ui.button.prototype = {
            render:function(t, n) {
                var o, r = CKEDITOR.env, s = this._.id = CKEDITOR.tools.getNextId(), a = "", l = this.command;
                this._.editor = t;
                var c = {
                    id:s,
                    button:this,
                    editor:t,
                    focus:function() {
                        CKEDITOR.document.getById(s).focus();
                    },
                    execute:function() {
                        this.button.click(t);
                    },
                    attach:function(t) {
                        this.button.attach(t);
                    }
                }, h = CKEDITOR.tools.addFunction(function(t) {
                    return c.onkey ? (t = new CKEDITOR.dom.event(t), !1 !== c.onkey(c, t.getKeystroke())) :void 0;
                }), u = CKEDITOR.tools.addFunction(function(t) {
                    var e;
                    return c.onfocus && (e = !1 !== c.onfocus(c, new CKEDITOR.dom.event(t))), CKEDITOR.env.gecko && 10900 > CKEDITOR.env.version && t.preventBubble(), 
                    e;
                }), d = 0, p = CKEDITOR.tools.addFunction(function() {
                    if (CKEDITOR.env.opera) {
                        var e = t.editable();
                        e.isInline() && e.hasFocus && (t.lockSelection(), d = 1);
                    }
                });
                if (c.clickFn = o = CKEDITOR.tools.addFunction(function() {
                    d && (t.unlockSelection(1), d = 0), c.execute();
                }), this.modes) {
                    var f = {}, g = function() {
                        var e = t.mode;
                        e && (e = this.modes[e] ? void 0 != f[e] ? f[e] :CKEDITOR.TRISTATE_OFF :CKEDITOR.TRISTATE_DISABLED, 
                        this.setState(t.readOnly && !this.readOnly ? CKEDITOR.TRISTATE_DISABLED :e));
                    };
                    t.on("beforeModeUnload", function() {
                        t.mode && this._.state != CKEDITOR.TRISTATE_DISABLED && (f[t.mode] = this._.state);
                    }, this), t.on("mode", g, this), !this.readOnly && t.on("readOnly", g, this);
                } else l && (l = t.getCommand(l)) && (l.on("state", function() {
                    this.setState(l.state);
                }, this), a += l.state == CKEDITOR.TRISTATE_ON ? "on" :l.state == CKEDITOR.TRISTATE_DISABLED ? "disabled" :"off");
                this.directional && t.on("contentDirChanged", function(e) {
                    var i = CKEDITOR.document.getById(this._.id), n = i.getFirst(), e = e.data;
                    e != t.lang.dir ? i.addClass("cke_" + e) :i.removeClass("cke_ltr").removeClass("cke_rtl"), 
                    n.setAttribute("style", CKEDITOR.skin.getIconStyle(m, "rtl" == e, this.icon, this.iconOffset));
                }, this), l || (a += "off");
                var m = g = this.name || this.command;
                return this.icon && !/\./.test(this.icon) && (m = this.icon, this.icon = null), 
                r = {
                    id:s,
                    name:g,
                    iconName:m,
                    label:this.label,
                    cls:this.className || "",
                    state:a,
                    title:this.title,
                    titleJs:r.gecko && 10900 <= r.version && !r.hc ? "" :(this.title || "").replace("'", ""),
                    hasArrow:this.hasArrow ? "true" :"false",
                    keydownFn:h,
                    mousedownFn:p,
                    focusFn:u,
                    clickFn:o,
                    style:CKEDITOR.skin.getIconStyle(m, "rtl" == t.lang.dir, this.icon, this.iconOffset),
                    arrowHtml:this.hasArrow ? e.output() :""
                }, i.output(r, n), this.onRender && this.onRender(), c;
            },
            setState:function(t) {
                if (this._.state == t) return !1;
                this._.state = t;
                var e = CKEDITOR.document.getById(this._.id);
                return e ? (e.setState(t, "cke_button"), t == CKEDITOR.TRISTATE_DISABLED ? e.setAttribute("aria-disabled", !0) :e.removeAttribute("aria-disabled"), 
                t == CKEDITOR.TRISTATE_ON ? e.setAttribute("aria-pressed", !0) :e.removeAttribute("aria-pressed"), 
                !0) :!1;
            }
        }, CKEDITOR.ui.prototype.addButton = function(t, e) {
            this.add(t, CKEDITOR.UI_BUTTON, e);
        };
    }(), function() {
        function t(t) {
            function i() {
                for (var i = n(), r = CKEDITOR.tools.clone(t.config.toolbarGroups) || e(t), s = 0; s < r.length; s++) {
                    var a = r[s];
                    if ("/" != a) {
                        "string" == typeof a && (a = r[s] = {
                            name:a
                        });
                        var l, c = a.groups;
                        if (c) for (var h = 0; h < c.length; h++) l = c[h], (l = i[l]) && o(a, l);
                        (l = i[a.name]) && o(a, l);
                    }
                }
                return r;
            }
            function n() {
                var e, i, n, o = {};
                for (e in t.ui.items) i = t.ui.items[e], n = i.toolbar || "others", n = n.split(","), 
                i = n[0], n = parseInt(n[1] || -1, 10), o[i] || (o[i] = []), o[i].push({
                    name:e,
                    order:n
                });
                for (i in o) o[i] = o[i].sort(function(t, e) {
                    return t.order == e.order ? 0 :0 > e.order ? -1 :0 > t.order ? 1 :t.order < e.order ? -1 :1;
                });
                return o;
            }
            function o(t, e) {
                if (e.length) {
                    t.items ? t.items.push("-") :t.items = [];
                    for (var i; i = e.shift(); ) t.items.push(i.name);
                }
            }
            var r = t.config.toolbar;
            return "string" == typeof r && (r = t.config["toolbar_" + r]), t.toolbar = r || i();
        }
        function e(t) {
            return t._.toolbarGroups || (t._.toolbarGroups = [ {
                name:"document",
                groups:[ "mode", "document", "doctools" ]
            }, {
                name:"clipboard",
                groups:[ "clipboard", "undo" ]
            }, {
                name:"editing",
                groups:[ "find", "selection", "spellchecker" ]
            }, {
                name:"forms"
            }, "/", {
                name:"basicstyles",
                groups:[ "basicstyles", "cleanup" ]
            }, {
                name:"paragraph",
                groups:[ "list", "indent", "blocks", "align" ]
            }, {
                name:"links"
            }, {
                name:"insert"
            }, "/", {
                name:"styles"
            }, {
                name:"colors"
            }, {
                name:"tools"
            }, {
                name:"others"
            }, {
                name:"about"
            } ]);
        }
        var i = function() {
            this.toolbars = [], this.focusCommandExecuted = !1;
        };
        i.prototype.focus = function() {
            for (var t, e = 0; t = this.toolbars[e++]; ) for (var i, n = 0; i = t.items[n++]; ) if (i.focus) return i.focus(), 
            void 0;
        };
        var n = {
            modes:{
                wysiwyg:1,
                source:1
            },
            readOnly:1,
            exec:function(t) {
                t.toolbox && (t.toolbox.focusCommandExecuted = !0, CKEDITOR.env.ie || CKEDITOR.env.air ? setTimeout(function() {
                    t.toolbox.focus();
                }, 100) :t.toolbox.focus());
            }
        };
        CKEDITOR.plugins.add("toolbar", {
            requires:"button",
            init:function(e) {
                var o, r = function(t, i) {
                    var n, s = "rtl" == e.lang.dir, a = e.config.toolbarGroupCycling, a = void 0 === a || a;
                    switch (i) {
                      case 9:
                      case CKEDITOR.SHIFT + 9:
                        for (;!n || !n.items.length; ) if (n = 9 == i ? (n ? n.next :t.toolbar.next) || e.toolbox.toolbars[0] :(n ? n.previous :t.toolbar.previous) || e.toolbox.toolbars[e.toolbox.toolbars.length - 1], 
                        n.items.length) for (t = n.items[o ? n.items.length - 1 :0]; t && !t.focus; ) (t = o ? t.previous :t.next) || (n = 0);
                        return t && t.focus(), !1;

                      case s ? 37 :39:
                      case 40:
                        n = t;
                        do n = n.next, !n && a && (n = t.toolbar.items[0]); while (n && !n.focus);
                        return n ? n.focus() :r(t, 9), !1;

                      case s ? 39 :37:
                      case 38:
                        n = t;
                        do n = n.previous, !n && a && (n = t.toolbar.items[t.toolbar.items.length - 1]); while (n && !n.focus);
                        return n ? n.focus() :(o = 1, r(t, CKEDITOR.SHIFT + 9), o = 0), !1;

                      case 27:
                        return e.focus(), !1;

                      case 13:
                      case 32:
                        return t.execute(), !1;
                    }
                    return !0;
                };
                e.on("uiSpace", function(n) {
                    if (n.data.space == e.config.toolbarLocation) {
                        e.toolbox = new i();
                        var o, s, a = CKEDITOR.tools.getNextId(), l = e.config.removeButtons, l = l && l.split(","), c = [ '<span id="', a, '" class="cke_voice_label">', e.lang.toolbar.toolbars, "</span>", '<span id="' + e.ui.spaceId("toolbox") + '" class="cke_toolbox" role="group" aria-labelledby="', a, '" onmousedown="return false;">' ], a = !1 !== e.config.toolbarStartupExpanded;
                        e.config.toolbarCanCollapse && e.elementMode != CKEDITOR.ELEMENT_MODE_INLINE && c.push('<span class="cke_toolbox_main"' + (a ? ">" :' style="display:none">'));
                        for (var h = e.toolbox.toolbars, u = t(e), d = 0; d < u.length; d++) {
                            var p, f, g, m = 0, _ = u[d];
                            if (_) if (o && (c.push("</span>"), s = o = 0), "/" === _) c.push('<span class="cke_toolbar_break"></span>'); else {
                                g = _.items || _;
                                for (var v = 0; v < g.length; v++) {
                                    var y;
                                    y = g[v];
                                    var b;
                                    if (!(l && 0 <= CKEDITOR.tools.indexOf(l, y)) && (y = e.ui.create(y))) if (y.type == CKEDITOR.UI_SEPARATOR) s = o && y; else {
                                        if (b = !1 !== y.canGroup, !m) {
                                            p = CKEDITOR.tools.getNextId(), m = {
                                                id:p,
                                                items:[]
                                            }, f = _.name && (e.lang.toolbar.toolbarGroups[_.name] || _.name), c.push('<span id="', p, '" class="cke_toolbar"', f ? ' aria-labelledby="' + p + '_label"' :"", ' role="toolbar">'), 
                                            f && c.push('<span id="', p, '_label" class="cke_voice_label">', f, "</span>"), 
                                            c.push('<span class="cke_toolbar_start"></span>');
                                            var w = h.push(m) - 1;
                                            w > 0 && (m.previous = h[w - 1], m.previous.next = m);
                                        }
                                        b ? o || (c.push('<span class="cke_toolgroup" role="presentation">'), o = 1) :o && (c.push("</span>"), 
                                        o = 0), p = function(t) {
                                            t = t.render(e, c), w = m.items.push(t) - 1, w > 0 && (t.previous = m.items[w - 1], 
                                            t.previous.next = t), t.toolbar = m, t.onkey = r, t.onfocus = function() {
                                                e.toolbox.focusCommandExecuted || e.focus();
                                            };
                                        }, s && (p(s), s = 0), p(y);
                                    }
                                }
                                o && (c.push("</span>"), s = o = 0), m && c.push('<span class="cke_toolbar_end"></span></span>');
                            }
                        }
                        if (e.config.toolbarCanCollapse && c.push("</span>"), e.config.toolbarCanCollapse && e.elementMode != CKEDITOR.ELEMENT_MODE_INLINE) {
                            var C = CKEDITOR.tools.addFunction(function() {
                                e.execCommand("toolbarCollapse");
                            });
                            e.on("destroy", function() {
                                CKEDITOR.tools.removeFunction(C);
                            }), e.addCommand("toolbarCollapse", {
                                readOnly:1,
                                exec:function(t) {
                                    var e = t.ui.space("toolbar_collapser"), i = e.getPrevious(), n = t.ui.space("contents"), o = i.getParent(), r = parseInt(n.$.style.height, 10), s = o.$.offsetHeight, a = e.hasClass("cke_toolbox_collapser_min");
                                    a ? (i.show(), e.removeClass("cke_toolbox_collapser_min"), e.setAttribute("title", t.lang.toolbar.toolbarCollapse)) :(i.hide(), 
                                    e.addClass("cke_toolbox_collapser_min"), e.setAttribute("title", t.lang.toolbar.toolbarExpand)), 
                                    e.getFirst().setText(a ? "▲" :"◀"), n.setStyle("height", r - (o.$.offsetHeight - s) + "px"), 
                                    t.fire("resize");
                                },
                                modes:{
                                    wysiwyg:1,
                                    source:1
                                }
                            }), e.setKeystroke(CKEDITOR.ALT + (CKEDITOR.env.ie || CKEDITOR.env.webkit ? 189 :109), "toolbarCollapse"), 
                            c.push('<a title="' + (a ? e.lang.toolbar.toolbarCollapse :e.lang.toolbar.toolbarExpand) + '" id="' + e.ui.spaceId("toolbar_collapser") + '" tabIndex="-1" class="cke_toolbox_collapser'), 
                            a || c.push(" cke_toolbox_collapser_min"), c.push('" onclick="CKEDITOR.tools.callFunction(' + C + ')">', '<span class="cke_arrow">&#9650;</span>', "</a>");
                        }
                        c.push("</span>"), n.data.html += c.join("");
                    }
                }), e.on("destroy", function() {
                    if (this.toolbox) {
                        var t, e, i, n, o = 0;
                        for (t = this.toolbox.toolbars; o < t.length; o++) for (i = t[o].items, e = 0; e < i.length; e++) n = i[e], 
                        n.clickFn && CKEDITOR.tools.removeFunction(n.clickFn), n.keyDownFn && CKEDITOR.tools.removeFunction(n.keyDownFn);
                    }
                }), e.on("uiReady", function() {
                    var t = e.ui.space("toolbox");
                    t && e.focusManager.add(t, 1);
                }), e.addCommand("toolbarFocus", n), e.setKeystroke(CKEDITOR.ALT + 121, "toolbarFocus"), 
                e.ui.add("-", CKEDITOR.UI_SEPARATOR, {}), e.ui.addHandler(CKEDITOR.UI_SEPARATOR, {
                    create:function() {
                        return {
                            render:function(t, e) {
                                return e.push('<span class="cke_toolbar_separator" role="separator"></span>'), {};
                            }
                        };
                    }
                });
            }
        }), CKEDITOR.ui.prototype.addToolbarGroup = function(t, i, n) {
            var o = e(this.editor), r = 0 === i, s = {
                name:t
            };
            if (n) {
                if (n = CKEDITOR.tools.search(o, function(t) {
                    return t.name == n;
                })) return !n.groups && (n.groups = []), i && (i = CKEDITOR.tools.indexOf(n.groups, i), 
                i >= 0) ? (n.groups.splice(i + 1, 0, t), void 0) :(r ? n.groups.splice(0, 0, t) :n.groups.push(t), 
                void 0);
                i = null;
            }
            i && (i = CKEDITOR.tools.indexOf(o, function(t) {
                return t.name == i;
            })), r ? o.splice(0, 0, t) :"number" == typeof i ? o.splice(i + 1, 0, s) :o.push(t);
        };
    }(), CKEDITOR.UI_SEPARATOR = "separator", CKEDITOR.config.toolbarLocation = "top", 
    function() {
        function t(t, e, i) {
            function n(i) {
                !(l = h[i ? "getFirst" :"getLast"]()) || l.is && l.isBlockBoundary() || !(c = e.root[i ? "getPrevious" :"getNext"](CKEDITOR.dom.walker.invisible(!0))) || c.is && c.isBlockBoundary({
                    br:1
                }) || t.document.createElement("br")[i ? "insertBefore" :"insertAfter"](l);
            }
            for (var o = CKEDITOR.plugins.list.listToArray(e.root, i), r = [], s = 0; s < e.contents.length; s++) {
                var a = e.contents[s];
                (a = a.getAscendant("li", !0)) && !a.getCustomData("list_item_processed") && (r.push(a), 
                CKEDITOR.dom.element.setMarker(i, a, "list_item_processed", !0));
            }
            for (a = null, s = 0; s < r.length; s++) a = r[s].getCustomData("listarray_index"), 
            o[a].indent = -1;
            for (s = a + 1; s < o.length; s++) if (o[s].indent > o[s - 1].indent + 1) {
                for (r = o[s - 1].indent + 1 - o[s].indent, a = o[s].indent; o[s] && o[s].indent >= a; ) o[s].indent += r, 
                s++;
                s--;
            }
            var l, c, h = CKEDITOR.plugins.list.arrayToList(o, i, null, t.config.enterMode, e.root.getAttribute("dir")).listNode;
            n(!0), n(), h.replace(e.root);
        }
        function e(t, e) {
            this.name = t, this.context = this.type = e;
        }
        function i(t, e, i, n) {
            for (var o, r; o = t[n ? "getLast" :"getFirst"](p); ) (r = o.getDirection(1)) !== e.getDirection(1) && o.setAttribute("dir", r), 
            o.remove(), i ? o[n ? "insertBefore" :"insertAfter"](i) :e.append(o, n);
        }
        function n(t) {
            var e;
            (e = function(e) {
                var n = t[e ? "getPrevious" :"getNext"](h);
                n && n.type == CKEDITOR.NODE_ELEMENT && n.is(t.getName()) && (i(t, n, null, !e), 
                t.remove(), t = n);
            })(), e(1);
        }
        function o(t) {
            return t.type == CKEDITOR.NODE_ELEMENT && (t.getName() in CKEDITOR.dtd.$block || t.getName() in CKEDITOR.dtd.$listItem) && CKEDITOR.dtd[t.getName()]["#"];
        }
        function r(t, e, o) {
            t.fire("saveSnapshot"), o.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);
            var r = o.extractContents();
            e.trim(!1, !0);
            var a = e.createBookmark(), l = new CKEDITOR.dom.elementPath(e.startContainer), c = l.block, l = l.lastElement.getAscendant("li", 1) || c, d = new CKEDITOR.dom.elementPath(o.startContainer), p = d.contains(CKEDITOR.dtd.$listItem), d = d.contains(CKEDITOR.dtd.$list);
            for (c ? (c = c.getBogus()) && c.remove() :d && (c = d.getPrevious(h)) && u(c) && c.remove(), 
            (c = r.getLast()) && c.type == CKEDITOR.NODE_ELEMENT && c.is("br") && c.remove(), 
            (c = e.startContainer.getChild(e.startOffset)) ? r.insertBefore(c) :e.startContainer.append(r), 
            p && (r = s(p)) && (l.contains(p) ? (i(r, p.getParent(), p), r.remove()) :l.append(r)); o.checkStartOfBlock() && o.checkEndOfBlock(); ) d = o.startPath(), 
            r = d.block, r.is("li") && (l = r.getParent(), r.equals(l.getLast(h)) && r.equals(l.getFirst(h)) && (r = l)), 
            o.moveToPosition(r, CKEDITOR.POSITION_BEFORE_START), r.remove();
            o = o.clone(), r = t.editable(), o.setEndAt(r, CKEDITOR.POSITION_BEFORE_END), o = new CKEDITOR.dom.walker(o), 
            o.evaluator = function(t) {
                return h(t) && !u(t);
            }, (o = o.next()) && o.type == CKEDITOR.NODE_ELEMENT && o.getName() in CKEDITOR.dtd.$list && n(o), 
            e.moveToBookmark(a), e.select(), t.fire("saveSnapshot");
        }
        function s(t) {
            return (t = t.getLast(h)) && t.type == CKEDITOR.NODE_ELEMENT && t.getName() in a ? t :null;
        }
        var a = {
            ol:1,
            ul:1
        }, l = CKEDITOR.dom.walker.whitespaces(), c = CKEDITOR.dom.walker.bookmark(), h = function(t) {
            return !(l(t) || c(t));
        }, u = CKEDITOR.dom.walker.bogus();
        CKEDITOR.plugins.list = {
            listToArray:function(t, e, i, n, o) {
                if (!a[t.getName()]) return [];
                n || (n = 0), i || (i = []);
                for (var r = 0, s = t.getChildCount(); s > r; r++) {
                    var l = t.getChild(r);
                    if (l.type == CKEDITOR.NODE_ELEMENT && l.getName() in CKEDITOR.dtd.$list && CKEDITOR.plugins.list.listToArray(l, e, i, n + 1), 
                    "li" == l.$.nodeName.toLowerCase()) {
                        var c = {
                            parent:t,
                            indent:n,
                            element:l,
                            contents:[]
                        };
                        o ? c.grandparent = o :(c.grandparent = t.getParent(), c.grandparent && "li" == c.grandparent.$.nodeName.toLowerCase() && (c.grandparent = c.grandparent.getParent())), 
                        e && CKEDITOR.dom.element.setMarker(e, l, "listarray_index", i.length), i.push(c);
                        for (var h, u = 0, d = l.getChildCount(); d > u; u++) h = l.getChild(u), h.type == CKEDITOR.NODE_ELEMENT && a[h.getName()] ? CKEDITOR.plugins.list.listToArray(h, e, i, n + 1, c.grandparent) :c.contents.push(h);
                    }
                }
                return i;
            },
            arrayToList:function(t, e, i, n, o) {
                if (i || (i = 0), !t || t.length < i + 1) return null;
                for (var r, s, l, c = t[i].parent.getDocument(), u = new CKEDITOR.dom.documentFragment(c), d = null, p = i, f = Math.max(t[i].indent, 0), g = null, m = n == CKEDITOR.ENTER_P ? "p" :"div"; ;) {
                    var _ = t[p];
                    if (r = _.grandparent, s = _.element.getDirection(1), _.indent == f) {
                        for (d && t[p].parent.getName() == d.getName() || (d = t[p].parent.clone(!1, 1), 
                        o && d.setAttribute("dir", o), u.append(d)), g = d.append(_.element.clone(0, 1)), 
                        s != d.getDirection(1) && g.setAttribute("dir", s), r = 0; r < _.contents.length; r++) g.append(_.contents[r].clone(1, 1));
                        p++;
                    } else if (_.indent == Math.max(f, 0) + 1) l = t[p - 1].element.getDirection(1), 
                    p = CKEDITOR.plugins.list.arrayToList(t, null, p, n, l != s ? s :null), !g.getChildCount() && CKEDITOR.env.ie && !(7 < c.$.documentMode) && g.append(c.createText(" ")), 
                    g.append(p.listNode), p = p.nextIndex; else {
                        if (-1 != _.indent || i || !r) return null;
                        a[r.getName()] ? (g = _.element.clone(!1, !0), s != r.getDirection(1) && g.setAttribute("dir", s)) :g = new CKEDITOR.dom.documentFragment(c);
                        var v, d = r.getDirection(1) != s, y = _.element, b = y.getAttribute("class"), w = y.getAttribute("style"), C = g.type == CKEDITOR.NODE_DOCUMENT_FRAGMENT && (n != CKEDITOR.ENTER_BR || d || w || b), T = _.contents.length;
                        for (r = 0; T > r; r++) {
                            if (v = _.contents[r], v.type == CKEDITOR.NODE_ELEMENT && v.isBlockBoundary()) {
                                d && !v.getDirection() && v.setAttribute("dir", s);
                                var D = v, E = y.getAttribute("style");
                                E && D.setAttribute("style", E.replace(/([^;])$/, "$1;") + (D.getAttribute("style") || "")), 
                                b && v.addClass(b);
                            } else C && (l || (l = c.createElement(m), d && l.setAttribute("dir", s)), w && l.setAttribute("style", w), 
                            b && l.setAttribute("class", b), l.append(v.clone(1, 1)));
                            g.append(l || v.clone(1, 1));
                        }
                        g.type == CKEDITOR.NODE_DOCUMENT_FRAGMENT && p != t.length - 1 && ((s = g.getLast()) && s.type == CKEDITOR.NODE_ELEMENT && "_moz" == s.getAttribute("type") && s.remove(), 
                        (!g.getLast(h) || !(s.type == CKEDITOR.NODE_ELEMENT && s.getName() in CKEDITOR.dtd.$block)) && g.append(c.createElement("br"))), 
                        s = g.$.nodeName.toLowerCase(), !CKEDITOR.env.ie && ("div" == s || "p" == s) && g.appendBogus(), 
                        u.append(g), d = null, p++;
                    }
                    if (l = null, t.length <= p || Math.max(t[p].indent, 0) < f) break;
                }
                if (e) for (t = u.getFirst(); t; ) {
                    if (t.type == CKEDITOR.NODE_ELEMENT && (CKEDITOR.dom.element.clearMarkers(e, t), 
                    t.getName() in CKEDITOR.dtd.$listItem && (i = t, c = o = n = void 0, n = i.getDirection()))) {
                        for (o = i.getParent(); o && !(c = o.getDirection()); ) o = o.getParent();
                        n == c && i.removeAttribute("dir");
                    }
                    t = t.getNextSourceNode();
                }
                return {
                    listNode:u,
                    nextIndex:p
                };
            }
        };
        var d = /^h[1-6]$/, p = CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);
        e.prototype = {
            exec:function(e) {
                this.refresh(e, e.elementPath());
                var i = e.config, o = e.getSelection(), r = o && o.getRanges(!0);
                if (this.state == CKEDITOR.TRISTATE_OFF) {
                    var s = e.editable();
                    if (s.getFirst(h)) {
                        var l = 1 == r.length && r[0];
                        (i = l && l.getEnclosedNode()) && i.is && this.type == i.getName() && this.setState(CKEDITOR.TRISTATE_ON);
                    } else i.enterMode == CKEDITOR.ENTER_BR ? s.appendBogus() :r[0].fixBlock(1, i.enterMode == CKEDITOR.ENTER_P ? "p" :"div"), 
                    o.selectRanges(r);
                }
                for (var i = o.createBookmarks(!0), s = [], c = {}, r = r.createIterator(), u = 0; (l = r.getNextRange()) && ++u; ) {
                    var p = l.getBoundaryNodes(), f = p.startNode, g = p.endNode;
                    for (f.type == CKEDITOR.NODE_ELEMENT && "td" == f.getName() && l.setStartAt(p.startNode, CKEDITOR.POSITION_AFTER_START), 
                    g.type == CKEDITOR.NODE_ELEMENT && "td" == g.getName() && l.setEndAt(p.endNode, CKEDITOR.POSITION_BEFORE_END), 
                    l = l.createIterator(), l.forceBrBreak = this.state == CKEDITOR.TRISTATE_OFF; p = l.getNextParagraph(); ) if (!p.getCustomData("list_block")) {
                        CKEDITOR.dom.element.setMarker(c, p, "list_block", 1);
                        for (var m, _ = e.elementPath(p), f = _.elements, g = 0, _ = _.blockLimit, v = f.length - 1; v >= 0 && (m = f[v]); v--) if (a[m.getName()] && _.contains(m)) {
                            _.removeCustomData("list_group_object_" + u), (f = m.getCustomData("list_group_object")) ? f.contents.push(p) :(f = {
                                root:m,
                                contents:[ p ]
                            }, s.push(f), CKEDITOR.dom.element.setMarker(c, m, "list_group_object", f)), g = 1;
                            break;
                        }
                        g || (g = _, g.getCustomData("list_group_object_" + u) ? g.getCustomData("list_group_object_" + u).contents.push(p) :(f = {
                            root:g,
                            contents:[ p ]
                        }, CKEDITOR.dom.element.setMarker(c, g, "list_group_object_" + u, f), s.push(f)));
                    }
                }
                for (m = []; 0 < s.length; ) if (f = s.shift(), this.state == CKEDITOR.TRISTATE_OFF) if (a[f.root.getName()]) {
                    for (p = e, r = f, f = c, u = m, g = CKEDITOR.plugins.list.listToArray(r.root, f), 
                    _ = [], l = 0; l < r.contents.length; l++) v = r.contents[l], (v = v.getAscendant("li", !0)) && !v.getCustomData("list_item_processed") && (_.push(v), 
                    CKEDITOR.dom.element.setMarker(f, v, "list_item_processed", !0));
                    for (var v = r.root.getDocument(), y = void 0, b = void 0, l = 0; l < _.length; l++) {
                        var w = _[l].getCustomData("listarray_index"), y = g[w].parent;
                        y.is(this.type) || (b = v.createElement(this.type), y.copyAttributes(b, {
                            start:1,
                            type:1
                        }), b.removeStyle("list-style-type"), g[w].parent = b);
                    }
                    for (p = CKEDITOR.plugins.list.arrayToList(g, f, null, p.config.enterMode), f = void 0, 
                    g = p.listNode.getChildCount(), l = 0; g > l && (f = p.listNode.getChild(l)); l++) f.getName() == this.type && u.push(f);
                    p.listNode.replace(r.root);
                } else {
                    for (g = e, p = f, l = m, _ = p.contents, r = p.root.getDocument(), u = [], 1 == _.length && _[0].equals(p.root) && (f = r.createElement("div"), 
                    _[0].moveChildren && _[0].moveChildren(f), _[0].append(f), _[0] = f), p = p.contents[0].getParent(), 
                    v = 0; v < _.length; v++) p = p.getCommonAncestor(_[v].getParent());
                    for (y = g.config.useComputedState, g = f = void 0, y = void 0 === y || y, v = 0; v < _.length; v++) for (b = _[v]; w = b.getParent(); ) {
                        if (w.equals(p)) {
                            u.push(b), !g && b.getDirection() && (g = 1), b = b.getDirection(y), null !== f && (f = f && f != b ? null :b);
                            break;
                        }
                        b = w;
                    }
                    if (!(1 > u.length)) {
                        for (_ = u[u.length - 1].getNext(), v = r.createElement(this.type), l.push(v), y = l = void 0; u.length; ) l = u.shift(), 
                        y = r.createElement("li"), l.is("pre") || d.test(l.getName()) ? l.appendTo(y) :(l.copyAttributes(y), 
                        f && l.getDirection() && (y.removeStyle("direction"), y.removeAttribute("dir")), 
                        l.moveChildren(y), l.remove()), y.appendTo(v);
                        f && g && v.setAttribute("dir", f), _ ? v.insertBefore(_) :v.appendTo(p);
                    }
                } else this.state == CKEDITOR.TRISTATE_ON && a[f.root.getName()] && t.call(this, e, f, c);
                for (v = 0; v < m.length; v++) n(m[v]);
                CKEDITOR.dom.element.clearAllMarkers(c), o.selectBookmarks(i), e.focus();
            },
            refresh:function(t, e) {
                var i = e.contains(a, 1), n = e.blockLimit || e.root;
                i && n.contains(i) ? this.setState(i.is(this.type) ? CKEDITOR.TRISTATE_ON :CKEDITOR.TRISTATE_OFF) :this.setState(CKEDITOR.TRISTATE_OFF);
            }
        }, CKEDITOR.plugins.add("list", {
            init:function(t) {
                t.blockless || (t.addCommand("numberedlist", new e("numberedlist", "ol")), t.addCommand("bulletedlist", new e("bulletedlist", "ul")), 
                t.ui.addButton && (t.ui.addButton("NumberedList", {
                    label:t.lang.list.numberedlist,
                    command:"numberedlist",
                    directional:!0,
                    toolbar:"list,10"
                }), t.ui.addButton("BulletedList", {
                    label:t.lang.list.bulletedlist,
                    command:"bulletedlist",
                    directional:!0,
                    toolbar:"list,20"
                })), t.on("key", function(e) {
                    var i = e.data.keyCode;
                    if ("wysiwyg" == t.mode && i in {
                        8:1,
                        46:1
                    }) {
                        var n = t.getSelection().getRanges()[0], l = n.startPath();
                        if (n.collapsed) {
                            var l = new CKEDITOR.dom.elementPath(n.startContainer), c = 8 == i, d = t.editable(), p = new CKEDITOR.dom.walker(n.clone());
                            if (p.evaluator = function(t) {
                                return h(t) && !u(t);
                            }, p.guard = function(t, e) {
                                return !(e && t.type == CKEDITOR.NODE_ELEMENT && t.is("table"));
                            }, i = n.clone(), c) {
                                var f, g;
                                (f = l.contains(a)) && n.checkBoundaryOfElement(f, CKEDITOR.START) && (f = f.getParent()) && f.is("li") && (f = s(f)) ? (g = f, 
                                f = f.getPrevious(h), i.moveToPosition(f && u(f) ? f :g, CKEDITOR.POSITION_BEFORE_START)) :(p.range.setStartAt(d, CKEDITOR.POSITION_AFTER_START), 
                                p.range.setEnd(n.startContainer, n.startOffset), (f = p.previous()) && f.type == CKEDITOR.NODE_ELEMENT && (f.getName() in a || f.is("li")) && (f.is("li") || (p.range.selectNodeContents(f), 
                                p.reset(), p.evaluator = o, f = p.previous()), g = f, i.moveToElementEditEnd(g))), 
                                g ? (r(t, i, n), e.cancel()) :(i = l.contains(a)) && n.checkBoundaryOfElement(i, CKEDITOR.START) && (g = i.getFirst(h), 
                                n.checkBoundaryOfElement(g, CKEDITOR.START) && (f = i.getPrevious(h), s(g) ? f && (n.moveToElementEditEnd(f), 
                                n.select()) :t.execCommand("outdent"), e.cancel()));
                            } else (g = l.contains("li")) ? (p.range.setEndAt(d, CKEDITOR.POSITION_BEFORE_END), 
                            d = (l = g.getLast(h)) && o(l) ? l :g, g = 0, (f = p.next()) && f.type == CKEDITOR.NODE_ELEMENT && f.getName() in a && f.equals(l) ? (g = 1, 
                            f = p.next()) :n.checkBoundaryOfElement(d, CKEDITOR.END) && (g = 1), g && f && (n = n.clone(), 
                            n.moveToElementEditStart(f), r(t, i, n), e.cancel())) :(p.range.setEndAt(d, CKEDITOR.POSITION_BEFORE_END), 
                            (f = p.next()) && f.type == CKEDITOR.NODE_ELEMENT && f.is(a) && (f = f.getFirst(h), 
                            l.block && n.checkStartOfBlock() && n.checkEndOfBlock() ? (l.block.remove(), n.moveToElementEditStart(f), 
                            n.select()) :s(f) ? (n.moveToElementEditStart(f), n.select()) :(n = n.clone(), n.moveToElementEditStart(f), 
                            r(t, i, n)), e.cancel()));
                            setTimeout(function() {
                                t.selectionChange(1);
                            });
                        }
                    }
                }));
            }
        });
    }(), function() {
        function t(t, e) {
            if (this.name = e, this.useIndentClasses = t.config.indentClasses && 0 < t.config.indentClasses.length) {
                this.classNameRegex = RegExp("(?:^|\\s+)(" + t.config.indentClasses.join("|") + ")(?=$|\\s)"), 
                this.indentClassMap = {};
                for (var i = 0; i < t.config.indentClasses.length; i++) this.indentClassMap[t.config.indentClasses[i]] = i + 1;
            }
            this.startDisabled = "outdent" == e;
        }
        function e(t, e) {
            return "ltr" == (e || t.getComputedStyle("direction")) ? "margin-left" :"margin-right";
        }
        function i(t) {
            return t.type == CKEDITOR.NODE_ELEMENT && t.is("li");
        }
        var n = {
            ol:1,
            ul:1
        }, o = CKEDITOR.dom.walker.whitespaces(!0), r = CKEDITOR.dom.walker.bookmark(!1, !0);
        t.prototype = {
            context:"p",
            refresh:function(t, i) {
                var o = i && i.contains(n), r = i.block || i.blockLimit;
                o ? this.setState(CKEDITOR.TRISTATE_OFF) :this.useIndentClasses || "indent" != this.name ? r ? this.useIndentClasses ? (o = r.$.className.match(this.classNameRegex), 
                r = 0, o && (o = o[1], r = this.indentClassMap[o]), "outdent" == this.name && !r || "indent" == this.name && r == t.config.indentClasses.length ? this.setState(CKEDITOR.TRISTATE_DISABLED) :this.setState(CKEDITOR.TRISTATE_OFF)) :(o = parseInt(r.getStyle(e(r)), 10), 
                isNaN(o) && (o = 0), 0 >= o ? this.setState(CKEDITOR.TRISTATE_DISABLED) :this.setState(CKEDITOR.TRISTATE_OFF)) :this.setState(CKEDITOR.TRISTATE_DISABLED) :this.setState(CKEDITOR.TRISTATE_OFF);
            },
            exec:function(t) {
                function s(e) {
                    for (var i = c.startContainer, s = c.endContainer; i && !i.getParent().equals(e); ) i = i.getParent();
                    for (;s && !s.getParent().equals(e); ) s = s.getParent();
                    if (i && s) {
                        for (var a = i, i = [], l = !1; !l; ) a.equals(s) && (l = !0), i.push(a), a = a.getNext();
                        if (!(1 > i.length)) {
                            for (a = e.getParents(!0), s = 0; s < a.length; s++) if (a[s].getName && n[a[s].getName()]) {
                                e = a[s];
                                break;
                            }
                            for (var a = "indent" == h.name ? 1 :-1, s = i[0], i = i[i.length - 1], l = CKEDITOR.plugins.list.listToArray(e, u), d = l[i.getCustomData("listarray_index")].indent, s = s.getCustomData("listarray_index"); s <= i.getCustomData("listarray_index"); s++) if (l[s].indent += a, 
                            a > 0) {
                                var p = l[s].parent;
                                l[s].parent = new CKEDITOR.dom.element(p.getName(), p.getDocument());
                            }
                            for (s = i.getCustomData("listarray_index") + 1; s < l.length && l[s].indent > d; s++) l[s].indent += a;
                            if (i = CKEDITOR.plugins.list.arrayToList(l, u, null, t.config.enterMode, e.getDirection()), 
                            "outdent" == h.name) {
                                var f;
                                if ((f = e.getParent()) && f.is("li")) for (var g, a = i.listNode.getChildren(), m = [], s = a.count() - 1; s >= 0; s--) (g = a.getItem(s)) && g.is && g.is("li") && m.push(g);
                            }
                            if (i && i.listNode.replace(e), m && m.length) for (s = 0; s < m.length; s++) {
                                for (g = e = m[s]; (g = g.getNext()) && g.is && g.getName() in n; ) CKEDITOR.env.ie && !e.getFirst(function(t) {
                                    return o(t) && r(t);
                                }) && e.append(c.document.createText(" ")), e.append(g);
                                e.insertAfter(f);
                            }
                        }
                    }
                }
                function a() {
                    var e = c.createIterator(), i = t.config.enterMode;
                    e.enforceRealBlocks = !0, e.enlargeBr = i != CKEDITOR.ENTER_BR;
                    for (var n; n = e.getNextParagraph(i == CKEDITOR.ENTER_P ? "p" :"div"); ) l(n);
                }
                function l(i, n) {
                    if (i.getCustomData("indent_processed")) return !1;
                    if (h.useIndentClasses) {
                        var o = i.$.className.match(h.classNameRegex), r = 0;
                        if (o && (o = o[1], r = h.indentClassMap[o]), "outdent" == h.name ? r-- :r++, 0 > r) return !1;
                        r = Math.min(r, t.config.indentClasses.length), r = Math.max(r, 0), i.$.className = CKEDITOR.tools.ltrim(i.$.className.replace(h.classNameRegex, "")), 
                        r > 0 && i.addClass(t.config.indentClasses[r - 1]);
                    } else {
                        o = e(i, n), r = parseInt(i.getStyle(o), 10), isNaN(r) && (r = 0);
                        var s = t.config.indentOffset || 40, r = r + ("indent" == h.name ? 1 :-1) * s;
                        if (0 > r) return !1;
                        r = Math.max(r, 0), r = Math.ceil(r / s) * s, i.setStyle(o, r ? r + (t.config.indentUnit || "px") :""), 
                        "" === i.getAttribute("style") && i.removeAttribute("style");
                    }
                    return CKEDITOR.dom.element.setMarker(u, i, "indent_processed", 1), !0;
                }
                for (var c, h = this, u = {}, d = t.getSelection(), p = d.createBookmarks(1), f = (d && d.getRanges(1)).createIterator(); c = f.getNextRange(); ) {
                    for (var g = c.getCommonAncestor(); g && (g.type != CKEDITOR.NODE_ELEMENT || !n[g.getName()]); ) g = g.getParent();
                    if (!g) {
                        var m = c.getEnclosedNode();
                        m && m.type == CKEDITOR.NODE_ELEMENT && m.getName() in n && (c.setStartAt(m, CKEDITOR.POSITION_AFTER_START), 
                        c.setEndAt(m, CKEDITOR.POSITION_BEFORE_END), g = m);
                    }
                    if (g && c.startContainer.type == CKEDITOR.NODE_ELEMENT && c.startContainer.getName() in n && (m = new CKEDITOR.dom.walker(c), 
                    m.evaluator = i, c.startContainer = m.next()), g && c.endContainer.type == CKEDITOR.NODE_ELEMENT && c.endContainer.getName() in n && (m = new CKEDITOR.dom.walker(c), 
                    m.evaluator = i, c.endContainer = m.previous()), g) {
                        var m = g.getFirst(i), _ = !!m.getNext(i), v = c.startContainer;
                        (!m.equals(v) && !m.contains(v) || !("indent" == h.name || h.useIndentClasses || parseInt(g.getStyle(e(g)), 10)) || !l(g, !_ && m.getDirection())) && s(g);
                    } else a();
                }
                CKEDITOR.dom.element.clearAllMarkers(u), t.forceNextSelectionCheck(), d.selectBookmarks(p);
            }
        }, CKEDITOR.plugins.add("indent", {
            requires:"list",
            onLoad:function() {
                (CKEDITOR.env.ie6Compat || CKEDITOR.env.ie7Compat) && CKEDITOR.addCss(".cke_editable ul,.cke_editable ol{	margin-left: 0px;	padding-left: 40px;}");
            },
            init:function(e) {
                e.blockless || (e.addCommand("indent", new t(e, "indent")), e.addCommand("outdent", new t(e, "outdent")), 
                e.ui.addButton && (e.ui.addButton("Indent", {
                    label:e.lang.indent.indent,
                    command:"indent",
                    directional:!0,
                    toolbar:"indent,20"
                }), e.ui.addButton("Outdent", {
                    label:e.lang.indent.outdent,
                    command:"outdent",
                    directional:!0,
                    toolbar:"indent,10"
                })), e.on("dirChanged", function(t) {
                    var i = e.createRange();
                    i.setStartBefore(t.data.node), i.setEndAfter(t.data.node);
                    for (var n, o = new CKEDITOR.dom.walker(i); n = o.next(); ) if (n.type == CKEDITOR.NODE_ELEMENT) if (!n.equals(t.data.node) && n.getDirection()) i.setStartAfter(n), 
                    o = new CKEDITOR.dom.walker(i); else {
                        var r = e.config.indentClasses;
                        if (r) for (var s = "ltr" == t.data.dir ? [ "_rtl", "" ] :[ "", "_rtl" ], a = 0; a < r.length; a++) n.hasClass(r[a] + s[0]) && (n.removeClass(r[a] + s[0]), 
                        n.addClass(r[a] + s[1]));
                        r = n.getStyle("margin-right"), s = n.getStyle("margin-left"), r ? n.setStyle("margin-left", r) :n.removeStyle("margin-left"), 
                        s ? n.setStyle("margin-right", s) :n.removeStyle("margin-right");
                    }
                }));
            }
        });
    }(), function() {
        function t(t, e, i) {
            return i = t.config.forceEnterMode || i, "wysiwyg" != t.mode ? !1 :(e || (e = t.config.enterMode), 
            t.elementPath().isContextFor("p") || (e = CKEDITOR.ENTER_BR, i = 1), t.fire("saveSnapshot"), 
            e == CKEDITOR.ENTER_BR ? r(t, e, null, i) :s(t, e, null, i), t.fire("saveSnapshot"), 
            !0);
        }
        function e(t) {
            for (var t = t.getSelection().getRanges(!0), e = t.length - 1; e > 0; e--) t[e].deleteContents();
            return t[0];
        }
        CKEDITOR.plugins.add("enterkey", {
            requires:"indent",
            init:function(e) {
                e.addCommand("enter", {
                    modes:{
                        wysiwyg:1
                    },
                    editorFocus:!1,
                    exec:function(e) {
                        t(e);
                    }
                }), e.addCommand("shiftEnter", {
                    modes:{
                        wysiwyg:1
                    },
                    editorFocus:!1,
                    exec:function(e) {
                        "wysiwyg" == e.mode && t(e, e.config.shiftEnterMode, 1);
                    }
                }), e.setKeystroke([ [ 13, "enter" ], [ CKEDITOR.SHIFT + 13, "shiftEnter" ] ]);
            }
        });
        var i = CKEDITOR.dom.walker.whitespaces(), n = CKEDITOR.dom.walker.bookmark();
        CKEDITOR.plugins.enterkey = {
            enterBlock:function(t, o, s, l) {
                if (s = s || e(t)) {
                    var c = s.document, h = s.checkStartOfBlock(), u = s.checkEndOfBlock(), d = t.elementPath(s.startContainer).block;
                    if (h && u) {
                        if (d && (d.is("li") || d.getParent().is("li"))) return t.execCommand("outdent"), 
                        void 0;
                        if (d && d.getParent().is("blockquote")) return d.breakParent(d.getParent()), d.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1)) || d.getPrevious().remove(), 
                        d.getNext().getFirst(CKEDITOR.dom.walker.invisible(1)) || d.getNext().remove(), 
                        s.moveToElementEditStart(d), s.select(), void 0;
                    } else if (d && d.is("pre") && !u) return r(t, o, s, l), void 0;
                    var d = o == CKEDITOR.ENTER_DIV ? "div" :"p", p = s.splitBlock(d);
                    if (p) {
                        var f, o = p.previousBlock, t = p.nextBlock, h = p.wasStartOfBlock, u = p.wasEndOfBlock;
                        if (t ? (f = t.getParent(), f.is("li") && (t.breakParent(f), t.move(t.getNext(), 1))) :o && (f = o.getParent()) && f.is("li") && (o.breakParent(f), 
                        f = o.getNext(), s.moveToElementEditStart(f), o.move(o.getPrevious())), h || u) {
                            var g;
                            if (o ? (o.is("li") || !a.test(o.getName()) && !o.is("pre")) && (m = o.clone()) :t && (m = t.clone()), 
                            m ? l && !m.is("li") && m.renameNode(d) :f && f.is("li") ? m = f :(m = c.createElement(d), 
                            o && (g = o.getDirection()) && m.setAttribute("dir", g)), c = p.elementPath) for (l = 0, 
                            f = c.elements.length; f > l && (g = c.elements[l], !g.equals(c.block) && !g.equals(c.blockLimit)); l++) CKEDITOR.dtd.$removeEmpty[g.getName()] && (g = g.clone(), 
                            m.moveChildren(g), m.append(g));
                            CKEDITOR.env.ie || m.appendBogus(), m.getParent() || s.insertNode(m), m.is("li") && m.removeAttribute("value"), 
                            !CKEDITOR.env.ie || !h || u && o.getChildCount() || (s.moveToElementEditStart(u ? o :m), 
                            s.select()), s.moveToElementEditStart(h && !u ? t :m);
                        } else {
                            if (t.is("li")) {
                                var m = s.clone();
                                m.selectNodeContents(t), m = new CKEDITOR.dom.walker(m), m.evaluator = function(t) {
                                    return !(n(t) || i(t) || t.type == CKEDITOR.NODE_ELEMENT && t.getName() in CKEDITOR.dtd.$inline && !(t.getName() in CKEDITOR.dtd.$empty));
                                }, (f = m.next()) && f.type == CKEDITOR.NODE_ELEMENT && f.is("ul", "ol") && (CKEDITOR.env.ie ? c.createText(" ") :c.createElement("br")).insertBefore(f);
                            }
                            t && s.moveToElementEditStart(t);
                        }
                        s.select(), s.scrollIntoView();
                    }
                }
            },
            enterBr:function(t, i, n, o) {
                if (n = n || e(t)) {
                    var r = n.document, l = n.checkEndOfBlock(), c = new CKEDITOR.dom.elementPath(t.getSelection().getStartElement()), h = c.block, c = h && c.block.getName();
                    o || "li" != c ? (!o && l && a.test(c) ? (l = h.getDirection()) ? (r = r.createElement("div"), 
                    r.setAttribute("dir", l), r.insertAfter(h), n.setStart(r, 0)) :(r.createElement("br").insertAfter(h), 
                    CKEDITOR.env.gecko && r.createText("").insertAfter(h), n.setStartAt(h.getNext(), CKEDITOR.env.ie ? CKEDITOR.POSITION_BEFORE_START :CKEDITOR.POSITION_AFTER_START)) :(h = "pre" == c && CKEDITOR.env.ie && 8 > CKEDITOR.env.version ? r.createText("\r") :r.createElement("br"), 
                    n.deleteContents(), n.insertNode(h), CKEDITOR.env.ie ? n.setStartAt(h, CKEDITOR.POSITION_AFTER_END) :(r.createText("").insertAfter(h), 
                    l && h.getParent().appendBogus(), h.getNext().$.nodeValue = "", n.setStartAt(h.getNext(), CKEDITOR.POSITION_AFTER_START))), 
                    n.collapse(!0), n.select(), n.scrollIntoView()) :s(t, i, n, o);
                }
            }
        };
        var o = CKEDITOR.plugins.enterkey, r = o.enterBr, s = o.enterBlock, a = /^h[1-6]$/;
    }(), function() {
        function t(t, e) {
            var i = {}, n = [], o = {
                nbsp:" ",
                shy:"­",
                gt:">",
                lt:"<",
                amp:"&",
                apos:"'",
                quot:'"'
            }, t = t.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g, function(t, r) {
                var s = e ? "&" + r + ";" :o[r];
                return i[s] = e ? o[r] :"&" + r + ";", n.push(s), "";
            });
            if (!e && t) {
                var r, t = t.split(","), s = document.createElement("div");
                for (s.innerHTML = "&" + t.join(";&") + ";", r = s.innerHTML, s = null, s = 0; s < r.length; s++) {
                    var a = r.charAt(s);
                    i[a] = "&" + t[s] + ";", n.push(a);
                }
            }
            return i.regex = n.join(e ? "|" :""), i;
        }
        CKEDITOR.plugins.add("entities", {
            afterInit:function(e) {
                var i = e.config;
                if (e = (e = e.dataProcessor) && e.htmlFilter) {
                    var n = [];
                    !1 !== i.basicEntities && n.push("nbsp,gt,lt,amp"), i.entities && (n.length && n.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"), 
                    i.entities_latin && n.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"), 
                    i.entities_greek && n.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"), 
                    i.entities_additional && n.push(i.entities_additional));
                    var o = t(n.join(",")), r = o.regex ? "[" + o.regex + "]" :"a^";
                    delete o.regex, i.entities && i.entities_processNumerical && (r = "[^ -~]|" + r);
                    var r = RegExp(r, "g"), s = function(t) {
                        return "force" != i.entities_processNumerical && o[t] ? o[t] :"&#" + t.charCodeAt(0) + ";";
                    }, a = t("nbsp,gt,lt,amp,shy", !0), l = RegExp(a.regex, "g"), c = function(t) {
                        return a[t];
                    };
                    e.addRules({
                        text:function(t) {
                            return t.replace(l, c).replace(r, s);
                        }
                    });
                }
            }
        });
    }(), CKEDITOR.config.basicEntities = !0, CKEDITOR.config.entities = !0, CKEDITOR.config.entities_latin = !0, 
    CKEDITOR.config.entities_greek = !0, CKEDITOR.config.entities_additional = "#39", 
    function() {
        function t(t) {
            var e = "left" == t ? "pageXOffset" :"pageYOffset";
            return e in n.$ ? n.$[e] :CKEDITOR.document.$.documentElement["left" == t ? "scrollLeft" :"scrollTop"];
        }
        function e(e) {
            var r, s = e.config, a = s.floatSpaceDockedOffsetX || 0, l = s.floatSpaceDockedOffsetY || 0, c = s.floatSpacePinnedOffsetX || 0, h = s.floatSpacePinnedOffsetY || 0, u = function(i) {
                function s(t, e, i) {
                    f.setStyle(e, o(i)), f.setStyle("position", t);
                }
                function d(t) {
                    var e = p.getDocumentPosition();
                    switch (t) {
                      case "top":
                        s("absolute", "top", e.y - _ - l);
                        break;

                      case "pin":
                        s("fixed", "top", h);
                        break;

                      case "bottom":
                        s("absolute", "top", e.y + (m.height || m.bottom - m.top) + l);
                    }
                    r = t;
                }
                "focus" == i.name && f.show(), f.removeStyle("left"), f.removeStyle("right");
                var p = e.editable(), g = f.getClientRect(), m = p.getClientRect(), _ = g.height, v = t("left");
                if (r) {
                    "top" == r && g.top < h ? d("pin") :"pin" == r ? m.top > l + _ ? d("top") :m.bottom - g.bottom < _ && d("bottom") :"bottom" == r && (m.top > l + _ ? d("top") :m.bottom > 2 * _ + h && d("pin"));
                    var y, i = n.getViewPaneSize(), b = i.width / 2, b = 0 < m.left && m.right < i.width && m.width > g.width ? "rtl" == e.config.contentsLangDirection ? "right" :"left" :b - m.left > m.right - b ? "left" :"right";
                    g.width > i.width ? (b = "left", y = 0) :(y = "left" == b ? 0 < m.left ? m.left :0 :m.right < i.width ? i.width - m.right :0, 
                    y + g.width > i.width && (b = "left" == b ? "right" :"left", y = 0)), f.setStyle(b, o(("pin" == r ? c :a) + y + ("pin" == r ? 0 :v)));
                } else r = "pin", d("pin"), u(i);
            }, s = CKEDITOR.document.getBody(), d = {
                id:e.id,
                name:e.name,
                langDir:e.lang.dir,
                langCode:e.langCode
            }, p = e.fire("uiSpace", {
                space:"top",
                html:""
            }).html;
            if (p) {
                var f = s.append(CKEDITOR.dom.element.createFromHtml(i.output(CKEDITOR.tools.extend({
                    topId:e.ui.spaceId("top"),
                    content:p,
                    style:"display:none;z-index:" + (e.config.baseFloatZIndex - 1)
                }, d))));
                f.unselectable(), f.on("mousedown", function(t) {
                    t = t.data, t.getTarget().hasAscendant("a", 1) || t.preventDefault();
                }), e.on("focus", function(t) {
                    u(t), n.on("scroll", u), n.on("resize", u);
                }), e.on("blur", function() {
                    f.hide(), n.removeListener("scroll", u), n.removeListener("resize", u);
                }), e.on("destroy", function() {
                    n.removeListener("scroll", u), n.removeListener("resize", u), f.clearCustomData(), 
                    f.remove();
                }), e.focusManager.hasFocus && f.show(), e.focusManager.add(f, 1);
            }
        }
        var i = CKEDITOR.addTemplate("floatcontainer", '<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} ' + CKEDITOR.env.cssClass + '" dir="{langDir}" title="' + (CKEDITOR.env.gecko ? " " :"") + '" lang="{langCode}" role="application" style="{style}"><div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>');
        CKEDITOR.plugins.add("floatingspace", {
            init:function(t) {
                t.on("contentDom", function() {
                    e(t);
                });
            }
        });
        var n = CKEDITOR.document.getWindow(), o = CKEDITOR.tools.cssLength;
    }(), function() {
        var t = {
            canUndo:!1,
            async:!0,
            exec:function(e) {
                e.getClipboardData({
                    title:e.lang.pastetext.title
                }, function(i) {
                    i && e.fire("paste", {
                        type:"text",
                        dataValue:i.dataValue
                    }), e.fire("afterCommandExec", {
                        name:"pastetext",
                        command:t,
                        returnValue:!!i
                    });
                });
            }
        };
        CKEDITOR.plugins.add("pastetext", {
            requires:"clipboard",
            init:function(e) {
                e.addCommand("pastetext", t), e.ui.addButton && e.ui.addButton("PasteText", {
                    label:e.lang.pastetext.button,
                    command:"pastetext",
                    toolbar:"clipboard,40"
                }), e.config.forcePasteAsPlainText && e.on("beforePaste", function(t) {
                    "html" != t.data.type && (t.data.type = "text");
                }), e.on("pasteState", function(t) {
                    e.getCommand("pastetext").setState(t.data);
                });
            }
        });
    }(), CKEDITOR.plugins.add("removeformat", {
        init:function(t) {
            t.addCommand("removeFormat", CKEDITOR.plugins.removeformat.commands.removeformat), 
            t.ui.addButton && t.ui.addButton("RemoveFormat", {
                label:t.lang.removeformat.toolbar,
                command:"removeFormat",
                toolbar:"cleanup,10"
            });
        }
    }), CKEDITOR.plugins.removeformat = {
        commands:{
            removeformat:{
                exec:function(t) {
                    for (var e, i = t._.removeFormatRegex || (t._.removeFormatRegex = RegExp("^(?:" + t.config.removeFormatTags.replace(/,/g, "|") + ")$", "i")), n = t._.removeAttributes || (t._.removeAttributes = t.config.removeFormatAttributes.split(",")), o = CKEDITOR.plugins.removeformat.filter, r = t.getSelection().getRanges(1), s = r.createIterator(); e = s.getNextRange(); ) {
                        e.collapsed || e.enlarge(CKEDITOR.ENLARGE_ELEMENT);
                        var a = e.createBookmark(), l = a.startNode, c = a.endNode, h = function(e) {
                            for (var n, r = t.elementPath(e), s = r.elements, a = 1; (n = s[a]) && !n.equals(r.block) && !n.equals(r.blockLimit); a++) i.test(n.getName()) && o(t, n) && e.breakParent(n);
                        };
                        if (h(l), c) for (h(c), l = l.getNextSourceNode(!0, CKEDITOR.NODE_ELEMENT); l && !l.equals(c); ) h = l.getNextSourceNode(!1, CKEDITOR.NODE_ELEMENT), 
                        !("img" == l.getName() && l.data("cke-realelement")) && o(t, l) && (i.test(l.getName()) ? l.remove(1) :(l.removeAttributes(n), 
                        t.fire("removeFormatCleanup", l))), l = h;
                        e.moveToBookmark(a);
                    }
                    t.forceNextSelectionCheck(), t.getSelection().selectRanges(r);
                }
            }
        },
        filter:function(t, e) {
            for (var i = t._.removeFormatFilters || [], n = 0; n < i.length; n++) if (!1 === i[n](e)) return !1;
            return !0;
        }
    }, CKEDITOR.editor.prototype.addRemoveFormatFilter = function(t) {
        this._.removeFormatFilters || (this._.removeFormatFilters = []), this._.removeFormatFilters.push(t);
    }, CKEDITOR.config.removeFormatTags = "b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var", 
    CKEDITOR.config.removeFormatAttributes = "class,style,lang,width,height,align,hspace,valign", 
    CKEDITOR.config.plugins = "basicstyles,dialogui,dialog,clipboard,button,toolbar,list,indent,enterkey,entities,floatingspace,pastetext,removeformat", 
    CKEDITOR.config.skin = "moono", function() {
        for (var t = "bold,0,italic,32,strike,64,subscript,96,superscript,128,underline,160,copy-rtl,192,copy,224,cut-rtl,256,cut,288,paste-rtl,320,paste,352,bulletedlist-rtl,384,bulletedlist,416,numberedlist-rtl,448,numberedlist,480,indent-rtl,512,indent,544,outdent-rtl,576,outdent,608,pastetext-rtl,640,pastetext,672,removeformat,704", e = CKEDITOR.getUrl("plugins/icons.png"), t = t.split(","), i = 0; i < t.length; i++) CKEDITOR.skin.icons[t[i]] = {
            path:e,
            offset:-t[++i]
        };
    }(), CKEDITOR.lang.languages = {
        en:1
    });
}(), function() {
    CKEDITOR.plugins.add("easelenterkey", {
        requires:"indent",
        init:function(t) {
            return t.addCommand("newEnter", {
                modes:{
                    wysiwyg:1
                },
                editorFocus:!1,
                exec:function(t) {
                    var e;
                    try {
                        return t.execCommand("enter");
                    } catch (i) {
                        return e = i, !1;
                    }
                }
            }), t.addCommand("newShiftEnter", {
                modes:{
                    wysiwyg:1
                },
                editorFocus:!1,
                exec:function(t) {
                    var e;
                    try {
                        return t.execCommand("shiftEnter");
                    } catch (i) {
                        return e = i, !1;
                    }
                }
            }), t.setKeystroke([ [ 13, "newEnter" ], [ CKEDITOR.SHIFT + 13, "newShiftEnter" ] ]);
        }
    });
}.call(this), function() {
    var t, e, i, n;
    CKEDITOR.plugins.add("easellink", {
        icons:"link,unlink",
        init:function(i) {
            return i.addCommand("setLink", t), i.addCommand("unsetLink", e), i.ui.add("SetLink", CKEDITOR.UI_BUTTON, {
                label:"Set Link",
                toolbar:"easellinks",
                command:"setLink"
            }), i.ui.add("UnsetLink", CKEDITOR.UI_BUTTON, {
                label:"Unset Link",
                toolbar:"easellinks",
                command:"unsetLink"
            });
        }
    }), e = {
        exec:function(t) {
            var e;
            return e = new CKEDITOR.style({
                element:"a",
                type:CKEDITOR.STYLE_INLINE,
                alwaysRemoveElement:1
            }), t.removeStyle(e);
        },
        refresh:function(t, e) {
            var i;
            return i = e.lastElement && e.lastElement.getAscendant("a", !0), i && "a" === i.getName() && i.getAttribute("href") && i.getChildCount() ? this.setState(CKEDITOR.TRISTATE_OFF) :this.setState(CKEDITOR.TRISTATE_DISABLED);
        },
        contextSensitive:1,
        startDisabled:1
    }, t = {
        exec:function(t) {
            var e, o;
            return e = i(t), e && e.hasAttribute("href") || (e = null), o = "", e && e.hasAttribute("href") && (o = e.getAttribute("href")), 
            o = prompt("Please enter a url", o), o && o.trim() ? n(t, e, o) :void 0;
        }
    }, i = function(t) {
        var e, i, n;
        return n = t.getSelection(), i = n.getSelectedElement(), i && i.is("a") || (e = n.getRanges(!0)[0], 
        e ? (e.shrink(CKEDITOR.SHRINK_TEXT), i = t.elementPath(e.getCommonAncestor()).contains("a", 1)) :i = null), 
        i && i.hasAttribute("href") && n.selectElement(i), i;
    }, n = function(t, e, i) {
        var n, o, r, s;
        return o = t.getSelection(), e ? (e.setAttributes({
            href:i
        }), e.removeAttribute("data-cke-saved-href"), o.selectElement(e)) :(n = o.getRanges(1)[0], 
        n.collapsed && (s = new CKEDITOR.dom.text(i, t.document), n.insertNode(s), n.selectNodeContents(s)), 
        r = new CKEDITOR.style({
            element:"a",
            attributes:{
                href:i
            }
        }), r.type = CKEDITOR.STYLE_INLINE, r.applyToRange(n), n.select());
    };
}.call(this), function() {
    CKEDITOR.plugins.add("easelpastefix", {
        init:function(t) {
            var e, i;
            return e = null, i = function() {
                var t, i;
                return t = APP.view.el, i = t.scrollLeft(), i ? e = [ i, t.scrollTop() ] :void 0;
            }, t.on("key", function() {
                return i();
            }), t.element.on("click", function() {
                return i();
            }), t.element.on("contextmenu", function() {
                return i();
            }), t.on("paste", function() {
                return e ? (APP.view.el.scrollLeft(e[0]), APP.view.el.scrollTop(e[1])) :void 0;
            }), t.on("beforePaste", function() {
                var e, i;
                return i = $(t._.editable.$), e = i.css("display"), "inline" === e && (t.__inlineEl = i, 
                t.__hasDisplay = i.attr("style").indexOf("display:") > -1, i.css("display", "block")), 
                !0;
            }), t.on("paste", function() {
                return setTimeout(function() {
                    return t.__inlineEl ? (t.__hasDisplay ? t.__inlineEl.css("display", "inline") :t.__inlineEl.css("display", ""), 
                    t.__inlineEl = null) :void 0;
                }, 0), !0;
            });
        }
    });
}.call(this), function() {
    CKEDITOR.plugins.add("easelselectall", {
        icons:"",
        init:function(t) {
            return t.addCommand("selectAll", {
                canUndo:!1,
                modes:{
                    wysiwyg:1,
                    source:1
                },
                exec:function(t) {
                    var e, i, n;
                    return e = t.editable(), e.is("textarea") ? (n = e.$, CKEDITOR.env.ie ? n.createTextRange().execCommand("SelectAll") :(n.selectionStart = 0, 
                    n.selectionEnd = n.value.length), n.focus()) :(e.is("body") ? t.document.$.execCommand("SelectAll", !1, null) :(i = t.createRange(), 
                    i.selectNodeContents(e), i.select()), t.forceNextSelectionCheck(), t.selectionChange());
                }
            });
        }
    });
}.call(this), function() {
    var t, e, i, n, o, r;
    CKEDITOR.plugins.add("easeltextcolor", {
        icons:"bgcolor,textcolor",
        init:function(e) {
            return e.ui.add("ForegroundTextColor", CKEDITOR.UI_BUTTON, {
                label:"Set Foreground Color",
                toolbar:"textcolors",
                hasArrow:!0,
                click:function(e) {
                    return t(e, "fore", this);
                }
            }), e.ui.add("BackgroundTextColor", CKEDITOR.UI_BUTTON, {
                label:"Set Background Color",
                toolbar:"textcolors",
                hasArrow:!0,
                click:function(e) {
                    return t(e, "back", this);
                }
            });
        }
    }), CKEDITOR.config.colorButton_foreStyle = {
        element:"span",
        styles:{
            color:"#(color)"
        },
        overrides:[ {
            element:"font",
            attributes:{
                color:null
            }
        } ],
        childRule:function() {
            return !1;
        }
    }, CKEDITOR.config.colorButton_backStyle = {
        element:"span",
        styles:{
            "background-color":"#(color)"
        },
        childRule:function() {
            return !1;
        }
    }, t = function(t, e, n) {
        var r, s, a, l, c;
        return n.setState(CKEDITOR.TRISTATE_ON), s = !0, t.on("destroy", function() {
            return s = !1;
        }), r = !1, a = i(t, e), l = function(i, n) {
            return s && i ? (r = !0, o(t, e, n && n.toCssString() || null)) :s && !i && r ? o(t, e, a) :void 0;
        }, c = Draw.G.prompt.getColor(l, Color.normalize(a), {
            acceptGradient:!1,
            referenceEl:$("#" + n._.id),
            my:"top center",
            at:"bottom center",
            container:$(".viewable-viewport"),
            repositionMethod:"none none",
            cancelCallback:function() {
                return n.setState(CKEDITOR.TRISTATE_OFF);
            }
        });
    }, e = function(t) {
        var e;
        return e = t.getSelection(), e && e.getStartElement() ? void 0 :t.execCommand("selectAll");
    }, r = function(t) {
        var i;
        return i = t.getSelection(), i.getStartElement() || (e(t), i = t.getSelection()), 
        i && i.getSelectedText() === $(i.root.$).text() ? !0 :!1;
    }, o = function(t, o, s) {
        var a, l, c, h, u, d, p;
        return h = t.config, t.removeStyle(new CKEDITOR.style(h["colorButton_" + o + "Style"], {
            color:"inherit"
        })), e(t), c = i(t, o), s = n(s), s && s !== c ? "fore" === o && r(t) ? (u = Draw.DocumentFactory.instance().getCurrentDocument().document, 
        d = u.selectionModel.getOneSelected(), d.set("text_color", Color.normalize(s))) :(l = h["colorButton_" + o + "Style"], 
        a = function() {
            return !1;
        }, "back" !== o && (a = function(t) {
            return !(t.is("a") || t.getElementsByTag("a").count());
        }), p = new CKEDITOR.style(l, {
            color:s
        }), t.applyStyle(p)) :void 0;
    }, n = function(t) {
        return t ? 0 === t.indexOf("rgb(") ? Color.rgbStringToHexString(t) :"rgba(0, 0, 0, 0)" === t ? "transparent" :t :null;
    }, i = function(t, e) {
        var i, o, r, s;
        return s = t.getSelection(), i = s && s.getStartElement(), !i && s && (i = new CKEDITOR.dom.element(s.root.$)), 
        r = t.elementPath(i), i = i || r.block || r.blockLimit || t.document.getBody(), 
        o = function() {
            return i && i.getComputedStyle("back" === e && "background-color" || "color") || "transparent";
        }, n(o());
    };
}.call(this), /*
 * Gritter for jQuery
 * http://www.boedesign.com/
 *
 * Copyright (c) 2012 Jordan Boesch
 * Dual licensed under the MIT and GPL licenses.
 *
 * Date: February 24, 2012
 * Version: 1.7.4
 */
function(t) {
    t.gritter = {}, t.gritter.options = {
        position:"",
        class_name:"",
        fade_in_speed:"medium",
        fade_out_speed:1e3,
        time:6e3
    }, t.gritter.add = function(t) {
        try {
            return e.add(t || {});
        } catch (i) {
            var n = "Gritter Error: " + i;
            "undefined" != typeof console && console.error ? console.error(n, t) :alert(n);
        }
    }, t.gritter.remove = function(t, i) {
        e.removeSpecific(t, i || {});
    }, t.gritter.removeAll = function(t) {
        e.stop(t || {});
    };
    var e = {
        position:"",
        fade_in_speed:"",
        fade_out_speed:"",
        time:"",
        _custom_timer:0,
        _item_count:0,
        _is_setup:0,
        _tpl_close:'<div class="gritter-close"></div>',
        _tpl_item:'<div id="gritter-item-[[number]]" class="gritter-item-wrapper [[item_class]]" style="display:none"><div class="gritter-top"></div><div class="gritter-item">[[close]][[image]]<div class="[[class_name]]"><span class="gritter-title">[[username]]</span><p>[[text]]</p></div><div style="clear:both"></div></div><div class="gritter-bottom"></div></div>',
        _tpl_wrap:'<div id="gritter-notice-wrapper"></div>',
        add:function(i) {
            if (!i.title || !i.text) throw 'You need to fill out the first 2 params: "title" and "text"';
            this._is_setup || this._runSetup();
            var n = i.title, o = i.text, r = i.image || "", s = i.sticky || !1, a = i.class_name || t.gritter.options.class_name, l = t.gritter.options.position, c = i.time || "";
            this._verifyWrapper(), this._item_count++;
            var h = this._item_count, u = this._tpl_item;
            t([ "before_open", "after_open", "before_close", "after_close" ]).each(function(n, o) {
                e["_" + o + "_" + h] = t.isFunction(i[o]) ? i[o] :function() {};
            }), this._custom_timer = 0, c && (this._custom_timer = c);
            var d = "" != r ? '<img src="' + r + '" class="gritter-image" />' :"", p = "" != r ? "gritter-with-image" :"gritter-without-image";
            if (u = this._str_replace([ "[[username]]", "[[text]]", "[[close]]", "[[image]]", "[[number]]", "[[class_name]]", "[[item_class]]" ], [ n, o, this._tpl_close, d, this._item_count, p, a ], u), 
            this["_before_open_" + h]() === !1) return !1;
            t("#gritter-notice-wrapper").addClass(l).append(u);
            var f = t("#gritter-item-" + this._item_count);
            return f.fadeIn(this.fade_in_speed, function() {
                e["_after_open_" + h](t(this));
            }), s || this._setFadeTimer(f, h), t(f).bind("mouseenter mouseleave", function(i) {
                "mouseenter" == i.type ? s || e._restoreItemIfFading(t(this), h) :s || e._setFadeTimer(t(this), h), 
                e._hoverState(t(this), i.type);
            }), t(f).find(".gritter-close").click(function() {
                e.removeSpecific(h, {}, null, !0);
            }), h;
        },
        _countRemoveWrapper:function(e, i, n) {
            i.remove(), this["_after_close_" + e](i, n), 0 == t(".gritter-item-wrapper").length && t("#gritter-notice-wrapper").remove();
        },
        _fade:function(t, i, n, o) {
            var n = n || {}, r = "undefined" != typeof n.fade ? n.fade :!0;
            fade_out_speed = n.speed || this.fade_out_speed, manual_close = o, this["_before_close_" + i](t, manual_close), 
            o && t.unbind("mouseenter mouseleave"), r ? t.animate({
                opacity:0
            }, fade_out_speed, function() {
                t.animate({
                    height:0
                }, 300, function() {
                    e._countRemoveWrapper(i, t, manual_close);
                });
            }) :this._countRemoveWrapper(i, t);
        },
        _hoverState:function(t, e) {
            "mouseenter" == e ? (t.addClass("hover"), t.find(".gritter-close").show()) :(t.removeClass("hover"), 
            t.find(".gritter-close").hide());
        },
        removeSpecific:function(e, i, n, o) {
            if (!n) var n = t("#gritter-item-" + e);
            this._fade(n, e, i || {}, o);
        },
        _restoreItemIfFading:function(t, e) {
            clearTimeout(this["_int_id_" + e]), t.stop().css({
                opacity:"",
                height:""
            });
        },
        _runSetup:function() {
            for (opt in t.gritter.options) this[opt] = t.gritter.options[opt];
            this._is_setup = 1;
        },
        _setFadeTimer:function(t, i) {
            var n = this._custom_timer ? this._custom_timer :this.time;
            this["_int_id_" + i] = setTimeout(function() {
                e._fade(t, i);
            }, n);
        },
        stop:function(e) {
            var i = t.isFunction(e.before_close) ? e.before_close :function() {}, n = t.isFunction(e.after_close) ? e.after_close :function() {}, o = t("#gritter-notice-wrapper");
            i(o), o.fadeOut(function() {
                t(this).remove(), n();
            });
        },
        _str_replace:function(t, e, i, n) {
            var o = 0, r = 0, s = "", a = "", l = 0, c = 0, h = [].concat(t), u = [].concat(e), d = i, p = u instanceof Array, f = d instanceof Array;
            for (d = [].concat(d), n && (this.window[n] = 0), o = 0, l = d.length; l > o; o++) if ("" !== d[o]) for (r = 0, 
            c = h.length; c > r; r++) s = d[o] + "", a = p ? void 0 !== u[r] ? u[r] :"" :u[0], 
            d[o] = s.split(h[r]).join(a), n && d[o] !== s && (this.window[n] += (s.length - d[o].length) / h[r].length);
            return f ? d :d[0];
        },
        _verifyWrapper:function() {
            0 == t("#gritter-notice-wrapper").length && t("body").append(this._tpl_wrap);
        }
    };
}(jQuery), /*
 * Jeditable - jQuery in place edit plugin
 *
 * Copyright (c) 2006-2009 Mika Tuupola, Dylan Verheul
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://www.appelsiini.net/projects/jeditable
 *
 * Based on editable by Dylan Verheul <dylan_at_dyve.net>:
 *    http://www.dyve.net/jquery/?editable
 *
 */
function($) {
    $.fn.editable = function(t, e) {
        if ("disable" == t) return $(this).data("disabled.editable", !0), void 0;
        if ("enable" == t) return $(this).data("disabled.editable", !1), void 0;
        if ("destroy" == t) return $(this).unbind($(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable"), 
        void 0;
        var i = $.extend({}, $.fn.editable.defaults, {
            target:t
        }, e), n = $.editable.types[i.type].plugin || function() {}, o = $.editable.types[i.type].submit || function() {}, r = $.editable.types[i.type].buttons || $.editable.types.defaults.buttons, s = $.editable.types[i.type].content || $.editable.types.defaults.content, a = $.editable.types[i.type].element || $.editable.types.defaults.element, l = $.editable.types[i.type].reset || $.editable.types.defaults.reset, c = i.callback || function() {}, h = i.onedit || function() {}, u = i.onsubmit || function() {}, d = i.onreset || function() {}, p = i.onerror || l;
        return i.tooltip && $(this).attr("title", i.tooltip), i.autowidth = "auto" == i.width, 
        i.autoheight = "auto" == i.height, this.each(function() {
            var t = this, e = $(t).width(), f = $(t).height();
            $(this).data("event.editable", i.event), $.trim($(this).html()) || $(this).html(i.placeholder), 
            $(this).bind(i.event, function(d) {
                if (!0 !== $(this).data("disabled.editable") && !t.editing && !1 !== h.apply(this, [ i, t ])) {
                    d.preventDefault(), d.stopPropagation(), i.tooltip && $(t).removeAttr("title"), 
                    0 == $(t).width() ? (i.width = e, i.height = f) :("none" != i.width && (i.width = i.autowidth ? $(t).width() :i.width), 
                    "none" != i.height && (i.height = i.autoheight ? $(t).height() :i.height)), $(this).html().toLowerCase().replace(/(;|")/g, "") == i.placeholder.toLowerCase().replace(/(;|")/g, "") && $(this).html(""), 
                    t.editing = !0, t.revert = $(t).html(), $(t).html("");
                    var g = $("<form />");
                    i.cssclass && ("inherit" == i.cssclass ? g.attr("class", $(t).attr("class")) :g.attr("class", i.cssclass)), 
                    i.style && ("inherit" == i.style ? (g.attr("style", $(t).attr("style")), g.css("display", $(t).css("display"))) :g.attr("style", i.style));
                    var m, _ = a.apply(g, [ i, t ]);
                    if (i.loadurl) {
                        var v = setTimeout(function() {
                            _.disabled = !0, s.apply(g, [ i.loadtext, i, t ]);
                        }, 100), y = {};
                        y[i.id] = t.id, $.isFunction(i.loaddata) ? $.extend(y, i.loaddata.apply(t, [ t.revert, i ])) :$.extend(y, i.loaddata), 
                        $.ajax({
                            type:i.loadtype,
                            url:i.loadurl,
                            data:y,
                            async:!1,
                            success:function(t) {
                                window.clearTimeout(v), m = t, _.disabled = !1;
                            }
                        });
                    } else i.data ? (m = i.data, $.isFunction(i.data) && (m = i.data.apply(t, [ t.revert, i ]))) :m = t.revert;
                    s.apply(g, [ m, i, t ]), _.attr("name", i.name), r.apply(g, [ i, t ]), $(t).append(g), 
                    n.apply(g, [ i, t ]), $(":input:visible:enabled:first", g).focus(), i.select && _.select(), 
                    _.keydown(function(e) {
                        27 == e.keyCode && (e.preventDefault(), l.apply(g, [ i, t ]));
                    });
                    var v;
                    "cancel" == i.onblur ? _.blur(function() {
                        v = setTimeout(function() {
                            l.apply(g, [ i, t ]);
                        }, 500);
                    }) :"submit" == i.onblur ? _.blur(function() {
                        v = setTimeout(function() {
                            g.submit();
                        }, 200);
                    }) :$.isFunction(i.onblur) ? _.blur(function() {
                        i.onblur.apply(t, [ _.val(), i ]);
                    }) :_.blur(function() {}), g.submit(function(e) {
                        if (v && clearTimeout(v), e.preventDefault(), !1 !== u.apply(g, [ i, t ]) && !1 !== o.apply(g, [ i, t ])) if ($.isFunction(i.target)) {
                            var n = i.target.apply(t, [ _.val(), i ]);
                            $(t).html(n), t.editing = !1, c.apply(t, [ t.innerHTML, i ]), $.trim($(t).html()) || $(t).html(i.placeholder);
                        } else {
                            var r = {};
                            r[i.name] = _.val(), r[i.id] = t.id, $.isFunction(i.submitdata) ? $.extend(r, i.submitdata.apply(t, [ t.revert, i ])) :$.extend(r, i.submitdata), 
                            "PUT" == i.method && (r._method = "put"), $(t).html(i.indicator);
                            var s = {
                                type:"POST",
                                data:r,
                                dataType:"html",
                                url:i.target,
                                success:function(e) {
                                    "html" == s.dataType && $(t).html(e), t.editing = !1, c.apply(t, [ e, i ]), $.trim($(t).html()) || $(t).html(i.placeholder);
                                },
                                error:function(e) {
                                    p.apply(g, [ i, t, e ]);
                                }
                            };
                            $.extend(s, i.ajaxoptions), $.ajax(s);
                        }
                        return $(t).attr("title", i.tooltip), !1;
                    });
                }
            }), this.reset = function(e) {
                this.editing && !1 !== d.apply(e, [ i, t ]) && ($(t).html(t.revert), t.editing = !1, 
                $.trim($(t).html()) || $(t).html(i.placeholder), i.tooltip && $(t).attr("title", i.tooltip));
            };
        });
    }, $.editable = {
        types:{
            defaults:{
                element:function() {
                    var t = $('<input type="hidden"></input>');
                    return $(this).append(t), t;
                },
                content:function(t) {
                    $(":input:first", this).val(t);
                },
                reset:function(t, e) {
                    e.reset(this);
                },
                buttons:function(t, e) {
                    var i = this;
                    if (t.submit) {
                        if (t.submit.match(/>$/)) var n = $(t.submit).click(function() {
                            "submit" != n.attr("type") && i.submit();
                        }); else {
                            var n = $('<button type="submit" />');
                            n.html(t.submit);
                        }
                        $(this).append(n);
                    }
                    if (t.cancel) {
                        if (t.cancel.match(/>$/)) var o = $(t.cancel); else {
                            var o = $('<button type="cancel" />');
                            o.html(t.cancel);
                        }
                        $(this).append(o), $(o).click(function() {
                            if ($.isFunction($.editable.types[t.type].reset)) var n = $.editable.types[t.type].reset; else var n = $.editable.types.defaults.reset;
                            return n.apply(i, [ t, e ]), !1;
                        });
                    }
                }
            },
            text:{
                element:function(t) {
                    var e = $("<input />");
                    return "none" != t.width && e.width(t.width), "none" != t.height && e.height(t.height), 
                    e.attr("autocomplete", "off"), $(this).append(e), e;
                }
            },
            textarea:{
                element:function(t) {
                    var e = $("<textarea />");
                    return t.rows ? e.attr("rows", t.rows) :"none" != t.height && e.height(t.height), 
                    t.cols ? e.attr("cols", t.cols) :"none" != t.width && e.width(t.width), $(this).append(e), 
                    e;
                }
            },
            select:{
                element:function() {
                    var t = $("<select />");
                    return $(this).append(t), t;
                },
                content:function(data, settings, original) {
                    if (String == data.constructor) eval("var json = " + data); else var json = data;
                    for (var key in json) if (json.hasOwnProperty(key) && "selected" != key) {
                        var option = $("<option />").val(key).append(json[key]);
                        $("select", this).append(option);
                    }
                    $("select", this).children().each(function() {
                        ($(this).val() == json.selected || $(this).text() == $.trim(original.revert)) && $(this).attr("selected", "selected");
                    });
                }
            }
        },
        addInputType:function(t, e) {
            $.editable.types[t] = e;
        }
    }, $.fn.editable.defaults = {
        name:"value",
        id:"id",
        type:"text",
        width:"auto",
        height:"auto",
        event:"click.editable",
        onblur:"cancel",
        loadtype:"GET",
        loadtext:"Loading...",
        placeholder:"Click to edit",
        loaddata:{},
        submitdata:{},
        ajaxoptions:{}
    };
}(jQuery), /* ========================================================
 * bootstrap-tab.js v2.3.1
 * http://twitter.github.com/bootstrap/javascript.html#tabs
 * ========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================== */
!function(t) {
    "use strict";
    var e = function(e) {
        this.element = t(e);
    };
    e.prototype = {
        constructor:e,
        show:function() {
            var e, i, n, o = this.element, r = o.closest("ul:not(.dropdown-menu)"), s = o.attr("data-target");
            s || (s = o.attr("href"), s = s && s.replace(/.*(?=#[^\s]*$)/, "")), o.parent("li").hasClass("active") || (e = r.find(".active:last a")[0], 
            n = t.Event("show", {
                relatedTarget:e
            }), o.trigger(n), n.isDefaultPrevented() || (i = t(s), this.activate(o.parent("li"), r), 
            this.activate(i, i.parent(), function() {
                o.trigger({
                    type:"shown",
                    relatedTarget:e
                });
            })));
        },
        activate:function(e, i, n) {
            function o() {
                r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"), 
                e.addClass("active"), s ? (e[0].offsetWidth, e.addClass("in")) :e.removeClass("fade"), 
                e.parent(".dropdown-menu") && e.closest("li.dropdown").addClass("active"), n && n();
            }
            var r = i.find("> .active"), s = n && t.support.transition && r.hasClass("fade");
            s ? r.one(t.support.transition.end, o) :o(), r.removeClass("in");
        }
    };
    var i = t.fn.tab;
    t.fn.tab = function(i) {
        return this.each(function() {
            var n = t(this), o = n.data("tab");
            o || n.data("tab", o = new e(this)), "string" == typeof i && o[i]();
        });
    }, t.fn.tab.Constructor = e, t.fn.tab.noConflict = function() {
        return t.fn.tab = i, this;
    }, t(document).on("click.tab.data-api", '[data-toggle="tab"], [data-toggle="pill"]', function(e) {
        e.preventDefault(), t(this).tab("show");
    });
}(window.jQuery), /*!
* ZeroClipboard
* The ZeroClipboard library provides an easy way to copy text to the clipboard using an invisible Adobe Flash movie and a JavaScript interface.
* Copyright (c) 2014 Jon Rohan, James M. Greene
* Licensed MIT
* http://zeroclipboard.org/
* v1.3.2
*/
function() {
    "use strict";
    function t(t) {
        return t.replace(/,/g, ".").replace(/[^0-9\.]/g, "");
    }
    function e(e) {
        return parseFloat(t(e)) >= 10;
    }
    var i, n = {
        bridge:null,
        version:"0.0.0",
        disabled:null,
        outdated:null,
        ready:null
    }, o = {}, r = 0, s = {}, a = 0, l = {}, c = null, h = null, u = function() {
        var t, e, i, n, o = "ZeroClipboard.swf";
        if (document.currentScript && (n = document.currentScript.src)) ; else {
            var r = document.getElementsByTagName("script");
            if ("readyState" in r[0]) for (t = r.length; t-- && ("interactive" !== r[t].readyState || !(n = r[t].src)); ) ; else if ("loading" === document.readyState) n = r[r.length - 1].src; else {
                for (t = r.length; t--; ) {
                    if (i = r[t].src, !i) {
                        e = null;
                        break;
                    }
                    if (i = i.split("#")[0].split("?")[0], i = i.slice(0, i.lastIndexOf("/") + 1), null == e) e = i; else if (e !== i) {
                        e = null;
                        break;
                    }
                }
                null !== e && (n = e);
            }
        }
        return n && (n = n.split("#")[0].split("?")[0], o = n.slice(0, n.lastIndexOf("/") + 1) + o), 
        o;
    }(), d = function() {
        var t = /\-([a-z])/g, e = function(t, e) {
            return e.toUpperCase();
        };
        return function(i) {
            return i.replace(t, e);
        };
    }(), p = function(t, e) {
        var i, n, o;
        return window.getComputedStyle ? i = window.getComputedStyle(t, null).getPropertyValue(e) :(n = d(e), 
        i = t.currentStyle ? t.currentStyle[n] :t.style[n]), "cursor" !== e || i && "auto" !== i || (o = t.tagName.toLowerCase(), 
        "a" !== o) ? i :"pointer";
    }, f = function(t) {
        t || (t = window.event);
        var e;
        this !== window ? e = this :t.target ? e = t.target :t.srcElement && (e = t.srcElement), 
        A.activate(e);
    }, g = function(t, e, i) {
        t && 1 === t.nodeType && (t.addEventListener ? t.addEventListener(e, i, !1) :t.attachEvent && t.attachEvent("on" + e, i));
    }, m = function(t, e, i) {
        t && 1 === t.nodeType && (t.removeEventListener ? t.removeEventListener(e, i, !1) :t.detachEvent && t.detachEvent("on" + e, i));
    }, _ = function(t, e) {
        if (!t || 1 !== t.nodeType) return t;
        if (t.classList) return t.classList.contains(e) || t.classList.add(e), t;
        if (e && "string" == typeof e) {
            var i = (e || "").split(/\s+/);
            if (1 === t.nodeType) if (t.className) {
                for (var n = " " + t.className + " ", o = t.className, r = 0, s = i.length; s > r; r++) n.indexOf(" " + i[r] + " ") < 0 && (o += " " + i[r]);
                t.className = o.replace(/^\s+|\s+$/g, "");
            } else t.className = e;
        }
        return t;
    }, v = function(t, e) {
        if (!t || 1 !== t.nodeType) return t;
        if (t.classList) return t.classList.contains(e) && t.classList.remove(e), t;
        if (e && "string" == typeof e || void 0 === e) {
            var i = (e || "").split(/\s+/);
            if (1 === t.nodeType && t.className) if (e) {
                for (var n = (" " + t.className + " ").replace(/[\n\t]/g, " "), o = 0, r = i.length; r > o; o++) n = n.replace(" " + i[o] + " ", " ");
                t.className = n.replace(/^\s+|\s+$/g, "");
            } else t.className = "";
        }
        return t;
    }, y = function() {
        var t, e, i, n = 1;
        return "function" == typeof document.body.getBoundingClientRect && (t = document.body.getBoundingClientRect(), 
        e = t.right - t.left, i = document.body.offsetWidth, n = Math.round(e / i * 100) / 100), 
        n;
    }, b = function(t, e) {
        var i = {
            left:0,
            top:0,
            width:0,
            height:0,
            zIndex:x(e) - 1
        };
        if (t.getBoundingClientRect) {
            var n, o, r, s = t.getBoundingClientRect();
            "pageXOffset" in window && "pageYOffset" in window ? (n = window.pageXOffset, o = window.pageYOffset) :(r = y(), 
            n = Math.round(document.documentElement.scrollLeft / r), o = Math.round(document.documentElement.scrollTop / r));
            var a = document.documentElement.clientLeft || 0, l = document.documentElement.clientTop || 0;
            i.left = s.left + n - a, i.top = s.top + o - l, i.width = "width" in s ? s.width :s.right - s.left, 
            i.height = "height" in s ? s.height :s.bottom - s.top;
        }
        return i;
    }, w = function(t, e) {
        var i = null == e || e && e.cacheBust === !0 && e.useNoCache === !0;
        return i ? (-1 === t.indexOf("?") ? "?" :"&") + "noCache=" + new Date().getTime() :"";
    }, C = function(t) {
        var e, i, n, o = [], r = [], s = [];
        if (t.trustedOrigins && ("string" == typeof t.trustedOrigins ? r.push(t.trustedOrigins) :"object" == typeof t.trustedOrigins && "length" in t.trustedOrigins && (r = r.concat(t.trustedOrigins))), 
        t.trustedDomains && ("string" == typeof t.trustedDomains ? r.push(t.trustedDomains) :"object" == typeof t.trustedDomains && "length" in t.trustedDomains && (r = r.concat(t.trustedDomains))), 
        r.length) for (e = 0, i = r.length; i > e; e++) if (r.hasOwnProperty(e) && r[e] && "string" == typeof r[e]) {
            if (n = k(r[e]), !n) continue;
            if ("*" === n) {
                s = [ n ];
                break;
            }
            s.push.apply(s, [ n, "//" + n, window.location.protocol + "//" + n ]);
        }
        return s.length && o.push("trustedOrigins=" + encodeURIComponent(s.join(","))), 
        "string" == typeof t.jsModuleId && t.jsModuleId && o.push("jsModuleId=" + encodeURIComponent(t.jsModuleId)), 
        o.join("&");
    }, T = function(t, e, i) {
        if ("function" == typeof e.indexOf) return e.indexOf(t, i);
        var n, o = e.length;
        for ("undefined" == typeof i ? i = 0 :0 > i && (i = o + i), n = i; o > n; n++) if (e.hasOwnProperty(n) && e[n] === t) return n;
        return -1;
    }, D = function(t) {
        if ("string" == typeof t) throw new TypeError("ZeroClipboard doesn't accept query strings.");
        return t.length ? t :[ t ];
    }, E = function(t, e, i, n) {
        n ? window.setTimeout(function() {
            t.apply(e, i);
        }, 0) :t.apply(e, i);
    }, x = function(t) {
        var e, i;
        return t && ("number" == typeof t && t > 0 ? e = t :"string" == typeof t && (i = parseInt(t, 10)) && !isNaN(i) && i > 0 && (e = i)), 
        e || ("number" == typeof B.zIndex && B.zIndex > 0 ? e = B.zIndex :"string" == typeof B.zIndex && (i = parseInt(B.zIndex, 10)) && !isNaN(i) && i > 0 && (e = i)), 
        e || 0;
    }, S = function(t, e) {
        if (t && e !== !1 && "undefined" != typeof console && console && (console.warn || console.log)) {
            var i = "`" + t + "` is deprecated. See docs for more info:\n    https://github.com/zeroclipboard/zeroclipboard/blob/master/docs/instructions.md#deprecations";
            console.warn ? console.warn(i) :console.log(i);
        }
    }, O = function() {
        var t, e, i, n, o, r, s = arguments[0] || {};
        for (t = 1, e = arguments.length; e > t; t++) if (null != (i = arguments[t])) for (n in i) if (i.hasOwnProperty(n)) {
            if (o = s[n], r = i[n], s === r) continue;
            void 0 !== r && (s[n] = r);
        }
        return s;
    }, k = function(t) {
        if (null == t || "" === t) return null;
        if (t = t.replace(/^\s+|\s+$/g, ""), "" === t) return null;
        var e = t.indexOf("//");
        t = -1 === e ? t :t.slice(e + 2);
        var i = t.indexOf("/");
        return t = -1 === i ? t :-1 === e || 0 === i ? null :t.slice(0, i), t && ".swf" === t.slice(-4).toLowerCase() ? null :t || null;
    }, I = function() {
        var t = function(t, e) {
            var i, n, o;
            if (null != t && "*" !== e[0] && ("string" == typeof t && (t = [ t ]), "object" == typeof t && "length" in t)) for (i = 0, 
            n = t.length; n > i; i++) if (t.hasOwnProperty(i) && (o = k(t[i]))) {
                if ("*" === o) {
                    e.length = 0, e.push("*");
                    break;
                }
                -1 === T(o, e) && e.push(o);
            }
        }, e = {
            always:"always",
            samedomain:"sameDomain",
            never:"never"
        };
        return function(i, n) {
            var o, r = n.allowScriptAccess;
            if ("string" == typeof r && (o = r.toLowerCase()) && /^always|samedomain|never$/.test(o)) return e[o];
            var s = k(n.moviePath);
            null === s && (s = i);
            var a = [];
            t(n.trustedOrigins, a), t(n.trustedDomains, a);
            var l = a.length;
            if (l > 0) {
                if (1 === l && "*" === a[0]) return "always";
                if (-1 !== T(i, a)) return 1 === l && i === s ? "sameDomain" :"always";
            }
            return "never";
        };
    }(), R = function(t) {
        if (null == t) return [];
        if (Object.keys) return Object.keys(t);
        var e = [];
        for (var i in t) t.hasOwnProperty(i) && e.push(i);
        return e;
    }, P = function(t) {
        if (t) for (var e in t) t.hasOwnProperty(e) && delete t[e];
        return t;
    }, N = function() {
        var t = !1;
        if ("boolean" == typeof n.disabled) t = n.disabled === !1; else {
            if ("function" == typeof ActiveXObject) try {
                new ActiveXObject("ShockwaveFlash.ShockwaveFlash") && (t = !0);
            } catch (e) {}
            !t && navigator.mimeTypes["application/x-shockwave-flash"] && (t = !0);
        }
        return t;
    }, A = function(t, e) {
        return this instanceof A ? (this.id = "" + r++, s[this.id] = {
            instance:this,
            elements:[],
            handlers:{}
        }, t && this.clip(t), "undefined" != typeof e && (S("new ZeroClipboard(elements, options)", B.debug), 
        A.config(e)), this.options = A.config(), "boolean" != typeof n.disabled && (n.disabled = !N()), 
        n.disabled === !1 && n.outdated !== !0 && null === n.bridge && (n.outdated = !1, 
        n.ready = !1, z()), void 0) :new A(t, e);
    };
    A.prototype.setText = function(t) {
        return t && "" !== t && (o["text/plain"] = t, n.ready === !0 && n.bridge && n.bridge.setText(t)), 
        this;
    }, A.prototype.setSize = function(t, e) {
        return n.ready === !0 && n.bridge && n.bridge.setSize(t, e), this;
    };
    var M = function(t) {
        n.ready === !0 && n.bridge && n.bridge.setHandCursor(t);
    };
    A.prototype.destroy = function() {
        this.unclip(), this.off(), delete s[this.id];
    };
    var L = function() {
        var t, e, i, n = [], o = R(s);
        for (t = 0, e = o.length; e > t; t++) i = s[o[t]].instance, i && i instanceof A && n.push(i);
        return n;
    };
    A.version = "1.3.2";
    var B = {
        swfPath:u,
        trustedDomains:window.location.host ? [ window.location.host ] :[],
        cacheBust:!0,
        forceHandCursor:!1,
        zIndex:999999999,
        debug:!0,
        title:null,
        autoActivate:!0
    };
    A.config = function(t) {
        "object" == typeof t && null !== t && O(B, t);
        {
            if ("string" != typeof t || !t) {
                var e = {};
                for (var i in B) B.hasOwnProperty(i) && (e[i] = "object" == typeof B[i] && null !== B[i] ? "length" in B[i] ? B[i].slice(0) :O({}, B[i]) :B[i]);
                return e;
            }
            if (B.hasOwnProperty(t)) return B[t];
        }
    }, A.destroy = function() {
        A.deactivate();
        for (var t in s) if (s.hasOwnProperty(t) && s[t]) {
            var e = s[t].instance;
            e && "function" == typeof e.destroy && e.destroy();
        }
        var i = K(n.bridge);
        i && i.parentNode && (i.parentNode.removeChild(i), n.ready = null, n.bridge = null);
    }, A.activate = function(t) {
        i && (v(i, B.hoverClass), v(i, B.activeClass)), i = t, _(t, B.hoverClass), F();
        var e = B.title || t.getAttribute("title");
        if (e) {
            var o = K(n.bridge);
            o && o.setAttribute("title", e);
        }
        var r = B.forceHandCursor === !0 || "pointer" === p(t, "cursor");
        M(r);
    }, A.deactivate = function() {
        var t = K(n.bridge);
        t && (t.style.left = "0px", t.style.top = "-9999px", t.removeAttribute("title")), 
        i && (v(i, B.hoverClass), v(i, B.activeClass), i = null);
    };
    var z = function() {
        var t, e, i = document.getElementById("global-zeroclipboard-html-bridge");
        if (!i) {
            var o = A.config();
            o.jsModuleId = "string" == typeof c && c || "string" == typeof h && h || null;
            var r = I(window.location.host, B), s = C(o), a = B.moviePath + w(B.moviePath, B), l = '      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">         <param name="movie" value="' + a + '"/>         <param name="allowScriptAccess" value="' + r + '"/>         <param name="scale" value="exactfit"/>         <param name="loop" value="false"/>         <param name="menu" value="false"/>         <param name="quality" value="best" />         <param name="bgcolor" value="#ffffff"/>         <param name="wmode" value="transparent"/>         <param name="flashvars" value="' + s + '"/>         <embed src="' + a + '"           loop="false" menu="false"           quality="best" bgcolor="#ffffff"           width="100%" height="100%"           name="global-zeroclipboard-flash-bridge"           allowScriptAccess="' + r + '"           allowFullScreen="false"           type="application/x-shockwave-flash"           wmode="transparent"           pluginspage="http://www.macromedia.com/go/getflashplayer"           flashvars="' + s + '"           scale="exactfit">         </embed>       </object>';
            i = document.createElement("div"), i.id = "global-zeroclipboard-html-bridge", i.setAttribute("class", "global-zeroclipboard-container"), 
            i.style.position = "absolute", i.style.left = "0px", i.style.top = "-9999px", i.style.width = "15px", 
            i.style.height = "15px", i.style.zIndex = "" + x(B.zIndex), document.body.appendChild(i), 
            i.innerHTML = l;
        }
        t = document["global-zeroclipboard-flash-bridge"], t && (e = t.length) && (t = t[e - 1]), 
        n.bridge = t || i.children[0].lastElementChild;
    }, K = function(t) {
        for (var e = /^OBJECT|EMBED$/, i = t && t.parentNode; i && e.test(i.nodeName) && i.parentNode; ) i = i.parentNode;
        return i || null;
    }, F = function() {
        if (i) {
            var t = b(i, B.zIndex), e = K(n.bridge);
            e && (e.style.top = t.top + "px", e.style.left = t.left + "px", e.style.width = t.width + "px", 
            e.style.height = t.height + "px", e.style.zIndex = t.zIndex + 1), n.ready === !0 && n.bridge && n.bridge.setSize(t.width, t.height);
        }
        return this;
    };
    A.prototype.on = function(t, e) {
        var i, o, r, a = {}, l = s[this.id] && s[this.id].handlers;
        if ("string" == typeof t && t) r = t.toLowerCase().split(/\s+/); else if ("object" == typeof t && t && "undefined" == typeof e) for (i in t) t.hasOwnProperty(i) && "string" == typeof i && i && "function" == typeof t[i] && this.on(i, t[i]);
        if (r && r.length) {
            for (i = 0, o = r.length; o > i; i++) t = r[i].replace(/^on/, ""), a[t] = !0, l[t] || (l[t] = []), 
            l[t].push(e);
            a.noflash && n.disabled && $.call(this, "noflash", {}), a.wrongflash && n.outdated && $.call(this, "wrongflash", {
                flashVersion:n.version
            }), a.load && n.ready && $.call(this, "load", {
                flashVersion:n.version
            });
        }
        return this;
    }, A.prototype.off = function(t, e) {
        var i, n, o, r, a, l = s[this.id] && s[this.id].handlers;
        if (0 === arguments.length) r = R(l); else if ("string" == typeof t && t) r = t.split(/\s+/); else if ("object" == typeof t && t && "undefined" == typeof e) for (i in t) t.hasOwnProperty(i) && "string" == typeof i && i && "function" == typeof t[i] && this.off(i, t[i]);
        if (r && r.length) for (i = 0, n = r.length; n > i; i++) if (t = r[i].toLowerCase().replace(/^on/, ""), 
        a = l[t], a && a.length) if (e) for (o = T(e, a); -1 !== o; ) a.splice(o, 1), o = T(e, a, o); else l[t].length = 0;
        return this;
    }, A.prototype.handlers = function(t) {
        var e, i = null, n = s[this.id] && s[this.id].handlers;
        if (n) {
            if ("string" == typeof t && t) return n[t] ? n[t].slice(0) :null;
            i = {};
            for (e in n) n.hasOwnProperty(e) && n[e] && (i[e] = n[e].slice(0));
        }
        return i;
    };
    var j = function(t, e, i, n) {
        var o = s[this.id] && s[this.id].handlers[t];
        if (o && o.length) {
            var r, a, l, c = e || this;
            for (r = 0, a = o.length; a > r; r++) l = o[r], e = c, "string" == typeof l && "function" == typeof window[l] && (l = window[l]), 
            "object" == typeof l && l && "function" == typeof l.handleEvent && (e = l, l = l.handleEvent), 
            "function" == typeof l && E(l, e, i, n);
        }
        return this;
    };
    A.prototype.clip = function(t) {
        t = D(t);
        for (var e = 0; e < t.length; e++) if (t.hasOwnProperty(e) && t[e] && 1 === t[e].nodeType) {
            t[e].zcClippingId ? -1 === T(this.id, l[t[e].zcClippingId]) && l[t[e].zcClippingId].push(this.id) :(t[e].zcClippingId = "zcClippingId_" + a++, 
            l[t[e].zcClippingId] = [ this.id ], B.autoActivate === !0 && g(t[e], "mouseover", f));
            var i = s[this.id].elements;
            -1 === T(t[e], i) && i.push(t[e]);
        }
        return this;
    }, A.prototype.unclip = function(t) {
        var e = s[this.id];
        if (e) {
            var i, n = e.elements;
            t = "undefined" == typeof t ? n.slice(0) :D(t);
            for (var o = t.length; o--; ) if (t.hasOwnProperty(o) && t[o] && 1 === t[o].nodeType) {
                for (i = 0; -1 !== (i = T(t[o], n, i)); ) n.splice(i, 1);
                var r = l[t[o].zcClippingId];
                if (r) {
                    for (i = 0; -1 !== (i = T(this.id, r, i)); ) r.splice(i, 1);
                    0 === r.length && (B.autoActivate === !0 && m(t[o], "mouseover", f), delete t[o].zcClippingId);
                }
            }
        }
        return this;
    }, A.prototype.elements = function() {
        var t = s[this.id];
        return t && t.elements ? t.elements.slice(0) :[];
    };
    var H = function(t) {
        var e, i, n, o, r, a = [];
        if (t && 1 === t.nodeType && (e = t.zcClippingId) && l.hasOwnProperty(e) && (i = l[e], 
        i && i.length)) for (n = 0, o = i.length; o > n; n++) r = s[i[n]].instance, r && r instanceof A && a.push(r);
        return a;
    };
    B.hoverClass = "zeroclipboard-is-hover", B.activeClass = "zeroclipboard-is-active", 
    B.trustedOrigins = null, B.allowScriptAccess = null, B.useNoCache = !0, B.moviePath = "ZeroClipboard.swf", 
    A.detectFlashSupport = function() {
        return S("ZeroClipboard.detectFlashSupport", B.debug), N();
    }, A.dispatch = function(t, e) {
        if ("string" == typeof t && t) {
            var n = t.toLowerCase().replace(/^on/, "");
            if (n) for (var o = i ? H(i) :L(), r = 0, s = o.length; s > r; r++) $.call(o[r], n, e);
        }
    }, A.prototype.setHandCursor = function(t) {
        return S("ZeroClipboard.prototype.setHandCursor", B.debug), t = "boolean" == typeof t ? t :!!t, 
        M(t), B.forceHandCursor = t, this;
    }, A.prototype.reposition = function() {
        return S("ZeroClipboard.prototype.reposition", B.debug), F();
    }, A.prototype.receiveEvent = function(t, e) {
        if (S("ZeroClipboard.prototype.receiveEvent", B.debug), "string" == typeof t && t) {
            var i = t.toLowerCase().replace(/^on/, "");
            i && $.call(this, i, e);
        }
    }, A.prototype.setCurrent = function(t) {
        return S("ZeroClipboard.prototype.setCurrent", B.debug), A.activate(t), this;
    }, A.prototype.resetBridge = function() {
        return S("ZeroClipboard.prototype.resetBridge", B.debug), A.deactivate(), this;
    }, A.prototype.setTitle = function(t) {
        if (S("ZeroClipboard.prototype.setTitle", B.debug), t = t || B.title || i && i.getAttribute("title")) {
            var e = K(n.bridge);
            e && e.setAttribute("title", t);
        }
        return this;
    }, A.setDefaults = function(t) {
        S("ZeroClipboard.setDefaults", B.debug), A.config(t);
    }, A.prototype.addEventListener = function(t, e) {
        return S("ZeroClipboard.prototype.addEventListener", B.debug), this.on(t, e);
    }, A.prototype.removeEventListener = function(t, e) {
        return S("ZeroClipboard.prototype.removeEventListener", B.debug), this.off(t, e);
    }, A.prototype.ready = function() {
        return S("ZeroClipboard.prototype.ready", B.debug), n.ready === !0;
    };
    var $ = function(r, s) {
        r = r.toLowerCase().replace(/^on/, "");
        var a = s && s.flashVersion && t(s.flashVersion) || null, l = i, c = !0;
        switch (r) {
          case "load":
            if (a) {
                if (!e(a)) return $.call(this, "onWrongFlash", {
                    flashVersion:a
                }), void 0;
                n.outdated = !1, n.ready = !0, n.version = a;
            }
            break;

          case "wrongflash":
            a && !e(a) && (n.outdated = !0, n.ready = !1, n.version = a);
            break;

          case "mouseover":
            _(l, B.hoverClass);
            break;

          case "mouseout":
            B.autoActivate === !0 && A.deactivate();
            break;

          case "mousedown":
            _(l, B.activeClass);
            break;

          case "mouseup":
            v(l, B.activeClass);
            break;

          case "datarequested":
            var h = l.getAttribute("data-clipboard-target"), u = h ? document.getElementById(h) :null;
            if (u) {
                var d = u.value || u.textContent || u.innerText;
                d && this.setText(d);
            } else {
                var p = l.getAttribute("data-clipboard-text");
                p && this.setText(p);
            }
            c = !1;
            break;

          case "complete":
            P(o);
        }
        var f = l, g = [ this, s ];
        return j.call(this, r, f, g, c);
    };
    "function" == typeof define && define.amd ? define([ "require", "exports", "module" ], function(t, e, i) {
        return c = i && i.id || null, A;
    }) :"object" == typeof module && module && "object" == typeof module.exports && module.exports ? (h = module.id || null, 
    module.exports = A) :window.ZeroClipboard = A;
}(), /**
 * @license selection.js Copyright (c) 2011-12 Tim Cameron Ryan. MIT licensed.
 * https://github.com/timcameronryan/selection.js
 */
/*

Cross-Browser Selection Utilities
=================================

This utility provides a window.Selection object with common API for

 - all modern browsers (using window.getSelection())
 - IE5--8 (using TextRanges)

window.Selection is a static object with the following methods:

- *hasSelection(window)* -- Returns true if anything is currently
  selected.
- *getOrigin(window)* -- Returns an array [anchorNode, anchorOffset]
  of the current selection's starting anchor (in IE, returns left anchor)
- *getFocus(window)* -- Returns an array [focusNode, focusOffset]
  of the current selection's focus anchor (in IE, returns right anchor)
- *getStart(window)* -- Returns an array [node, offset] for the leftmost
  anchor.
- *getEnd(window)* -- Returns an array [node, offset] for the rightmost
  anchor.
- *setSelection(window, originNode, originOffset, focusNode, focusOffset)* --
  Sets the selection to include the new origin anchor and focus anchor
  (in IE, origin will be leftmost anchor, focus rightmost)

Released under the MIT license. Copyright (c) 2010--2012 Tim Cameron Ryan.

*/
function() {
    var t = this, e = {
        isPreceding:function(t, e) {
            return 2 & e.compareDocumentPosition(t);
        },
        contains:function(t, e) {
            return null != t.compareDocumentPosition ? 16 & t.compareDocumentPosition(e) :t.contains(e);
        },
        isCursorPreceding:function(t, i, n, o) {
            return t === n ? o >= i :e.isText(t) && e.isText(n) ? e.isPreceding(t, n) :e.isText(t) && !e.isText(n) ? !e.isCursorPreceding(n, o, t, i) :e.contains(t, n) ? t.childNodes.length <= i ? !1 :t.childNodes[i] === n ? o >= 0 :e.isPreceding(t.childNodes[i], n) :e.isPreceding(t, n);
        },
        isText:function(t) {
            return null != t ? 3 == t.nodeType :!1;
        },
        getChildIndex:function(t) {
            for (var e = 0; t = t.previousSibling; ) e++;
            return e;
        }
    }, i = t.Selection = function() {
        function t(t) {
            this.win = t;
        }
        return t.prototype.hasSelection = function() {
            return t.hasSelection(this.win);
        }, t.prototype.getOrigin = function() {
            return t.getOrigin(this.win);
        }, t.prototype.getFocus = function() {
            return t.getFocus(this.win);
        }, t.prototype.getStart = function() {
            return t.getStart(this.win);
        }, t.prototype.getEnd = function() {
            return t.getEnd(this.win);
        }, t.prototype.setSelection = function(e, i, n, o) {
            return t.setSelection(this.win, e, i, n, o);
        }, t.prototype.clearSelection = function() {
            return t.clearSelection(this.win);
        }, t;
    }();
    if (t.getSelection) i.supported = !0, i.hasSelection = function(t) {
        var e;
        return (e = t.getSelection()) && null != e.focusNode && null != e.anchorNode;
    }, i.getOrigin = function(t) {
        var e;
        return (e = t.getSelection()) && null != e.anchorNode ? [ e.anchorNode, e.anchorOffset ] :null;
    }, i.getFocus = function(t) {
        var e;
        return (e = t.getSelection()) && null != e.focusNode ? [ e.focusNode, e.focusOffset ] :null;
    }, i.getStart = function(t) {
        var n, o, r, s, a, l;
        return i.hasSelection(t) ? (a = i.getOrigin(t), n = a[0], r = a[1], l = i.getFocus(t), 
        o = l[0], s = l[1], e.isCursorPreceding(n, r, o, s) ? [ n, r ] :[ o, s ]) :null;
    }, i.getEnd = function(t) {
        var n, o, r, s, a, l;
        return i.hasSelection(t) ? (a = i.getOrigin(t), n = a[0], r = a[1], l = i.getFocus(t), 
        o = l[0], s = l[1], e.isCursorPreceding(n, r, o, s) ? [ o, s ] :[ n, r ]) :null;
    }, i.setSelection = function(t, e, i, n, o) {
        var s = t.getSelection();
        if (s) if (null == n && (n = e), null == o && (o = i), s.collapse && s.extend) s.collapse(e, i), 
        s.extend(n, o); else {
            r = t.document.createRange(), r.setStart(e, i), r.setEnd(n, o);
            try {
                s.removeAllRanges();
            } catch (a) {}
            s.addRange(r);
        }
    }, i.clearSelection = function(t) {
        try {
            var e = t.getSelection();
            if (!e) return;
            e.removeAllRanges();
        } catch (i) {}
    }; else if (t.document.selection) {
        var n = function(t, i, n) {
            var o, r, s, a, l;
            for (r = t.createElement("a"), o = i.duplicate(), o.collapse(n), l = o.parentElement(); ;) if (l.insertBefore(r, r.previousSibling), 
            o.moveToElementText(r), !(o.compareEndPoints(n ? "StartToStart" :"StartToEnd", i) > 0 && null != r.previousSibling)) break;
            return -1 === o.compareEndPoints(n ? "StartToStart" :"StartToEnd", i) && r.nextSibling ? (o.setEndPoint(n ? "EndToStart" :"EndToEnd", i), 
            s = r.nextSibling, a = o.text.length) :(s = r.parentNode, a = e.getChildIndex(r)), 
            r.parentNode.removeChild(r), [ s, a ];
        }, o = function(t, i, n, o, r) {
            var s, a, l, c, h;
            return h = 0, s = e.isText(o) ? o :o.childNodes[r], a = e.isText(o) ? o.parentNode :o, 
            e.isText(o) && (h = r), c = t.createElement("a"), a.insertBefore(c, s || null), 
            l = t.body.createTextRange(), l.moveToElementText(c), c.parentNode.removeChild(c), 
            i.setEndPoint(n ? "StartToStart" :"EndToEnd", l), i[n ? "moveStart" :"moveEnd"]("character", h);
        };
        i.supported = !0, i.hasSelection = function(t) {
            var e;
            return t.focus(), t.document.selection ? (e = t.document.selection.createRange(), 
            e && e.parentElement().document === t.document) :!1;
        }, i.getStart = function(t) {
            var e;
            return t.focus(), i.hasSelection(t) ? (e = t.document.selection.createRange(), n(t.document, e, !0)) :null;
        }, i.getEnd = function(t) {
            var e;
            return t.focus(), i.hasSelection(t) ? (e = t.document.selection.createRange(), n(t.document, e, !1)) :null;
        }, i.getOrigin = function(t) {
            return i.getStart(t);
        }, i.getFocus = function(t) {
            return i.getEnd(t);
        }, i.setSelection = function(t, e, i, n, r) {
            null == n && (n = e), null == r && (r = i);
            var s = t.document.body.createTextRange();
            return o(t.document, s, !1, n, r), o(t.document, s, !0, e, i), s.select();
        }, i.clearSelection = function(t) {
            return t.document.selection.empty();
        };
    } else i.supported = !1;
}.call(this), window.CodeMirror = function() {
    "use strict";
    function t(o, r) {
        if (!(this instanceof t)) return new t(o, r);
        this.options = r = r || {};
        for (var a in to) !r.hasOwnProperty(a) && to.hasOwnProperty(a) && (r[a] = to[a]);
        u(r);
        var c = this.display = e(o);
        c.wrapper.CodeMirror = this, l(this), r.autofocus && !Gn && Q(this), this.view = i(new ki([ new Oi([ _i("", null, $(c)) ]) ])), 
        this.nextOpId = 0, n(this), s(this), r.lineWrapping && (this.display.wrapper.className += " CodeMirror-wrap"), 
        this.setValue(r.value || ""), Rn && setTimeout(rn(Z, this, !0), 20), this.view.history = Li(), 
        ee(this);
        var h;
        try {
            h = document.activeElement == c.input;
        } catch (d) {}
        h || r.autofocus && !Gn ? setTimeout(rn(_e, this), 20) :ve(this), W(this, function() {
            for (var t in Qn) Qn.propertyIsEnumerable(t) && Qn[t](this, r[t], eo);
            for (var e = 0; e < ro.length; ++e) ro[e](this);
        })();
    }
    function e(t) {
        var e = {}, i = e.input = ln("textarea", null, null, "position: absolute; padding: 0; width: 1px; height: 1em; outline: none;");
        i.setAttribute("wrap", "off"), i.setAttribute("autocorrect", "off"), i.setAttribute("autocapitalize", "off"), 
        e.inputDiv = ln("div", [ i ], null, "overflow: hidden; position: relative; width: 3px; height: 0px;"), 
        e.scrollbarH = ln("div", [ ln("div", null, null, "height: 1px") ], "CodeMirror-hscrollbar"), 
        e.scrollbarV = ln("div", [ ln("div", null, null, "width: 1px") ], "CodeMirror-vscrollbar"), 
        e.scrollbarFiller = ln("div", null, "CodeMirror-scrollbar-filler"), e.lineDiv = ln("div"), 
        e.selectionDiv = ln("div", null, null, "position: relative; z-index: 1"), e.cursor = ln("pre", " ", "CodeMirror-cursor"), 
        e.otherCursor = ln("pre", " ", "CodeMirror-cursor CodeMirror-secondarycursor"), 
        e.measure = ln("div", null, "CodeMirror-measure"), e.lineSpace = ln("div", [ e.measure, e.selectionDiv, e.lineDiv, e.cursor, e.otherCursor ], null, "position: relative; outline: none"), 
        e.mover = ln("div", [ ln("div", [ e.lineSpace ], "CodeMirror-lines") ], null, "position: relative"), 
        e.sizer = ln("div", [ e.mover ], "CodeMirror-sizer"), e.heightForcer = ln("div", " ", null, "position: absolute; height: " + ho + "px"), 
        e.gutters = ln("div", null, "CodeMirror-gutters"), e.lineGutter = null;
        var n = ln("div", [ e.sizer, e.heightForcer, e.gutters ], null, "position: relative; min-height: 100%");
        return e.scroller = ln("div", [ n ], "CodeMirror-scroll"), e.scroller.setAttribute("tabIndex", "-1"), 
        e.wrapper = ln("div", [ e.inputDiv, e.scrollbarH, e.scrollbarV, e.scrollbarFiller, e.scroller ], "CodeMirror"), 
        Pn && (e.gutters.style.zIndex = -1, e.scroller.style.paddingRight = 0), t.appendChild ? t.appendChild(e.wrapper) :t(e.wrapper), 
        $n && (i.style.width = "0px"), An || (e.scroller.draggable = !0), Kn ? (e.inputDiv.style.height = "1px", 
        e.inputDiv.style.position = "absolute") :Pn && (e.scrollbarH.style.minWidth = e.scrollbarV.style.minWidth = "18px"), 
        e.viewOffset = e.showingFrom = e.showingTo = e.lastSizeC = 0, e.lineNumWidth = e.lineNumInnerWidth = e.lineNumChars = null, 
        e.prevInput = "", e.alignWidgets = !1, e.pollingFast = !1, e.poll = new Xi(), e.draggingText = !1, 
        e.cachedCharWidth = e.cachedTextHeight = null, e.measureLineCache = [], e.measureLineCachePos = 0, 
        e.inaccurateSelection = !1, e.pasteIncoming = !1, e;
    }
    function i(t) {
        var e = {
            line:0,
            ch:0
        };
        return {
            doc:t,
            frontier:0,
            highlight:new Xi(),
            sel:{
                from:e,
                to:e,
                head:e,
                anchor:e,
                shift:!1,
                extend:!1
            },
            scrollTop:0,
            scrollLeft:0,
            overwrite:!1,
            focused:!1,
            maxLine:Ii(t, 0),
            maxLineLength:0,
            maxLineChanged:!1,
            suppressEdits:!1,
            goalColumn:null,
            cantEdit:!1,
            keyMaps:[]
        };
    }
    function n(e) {
        var i = e.view.doc;
        e.view.mode = t.getMode(e.options, e.options.mode), i.iter(0, i.size, function(t) {
            t.stateAfter = null;
        }), e.view.frontier = 0, O(e, 100);
    }
    function o(t) {
        var e = t.view.doc, i = $(t.display);
        if (t.options.lineWrapping) {
            t.display.wrapper.className += " CodeMirror-wrap";
            var n = t.display.scroller.clientWidth / G(t.display) - 3;
            e.iter(0, e.size, function(t) {
                if (0 != t.height) {
                    var e = Math.ceil(t.text.length / n) || 1;
                    1 != e && Ri(t, e * i);
                }
            }), t.display.sizer.style.minWidth = "";
        } else t.display.wrapper.className = t.display.wrapper.className.replace(" CodeMirror-wrap", ""), 
        h(t.view), e.iter(0, e.size, function(t) {
            0 != t.height && Ri(t, i);
        });
        q(t, 0, e.size), B(t), setTimeout(function() {
            d(t.display, t.view.doc.height);
        }, 100);
    }
    function r(t) {
        var e = ao[t.options.keyMap].style;
        t.display.wrapper.className = t.display.wrapper.className.replace(/\s*cm-keymap-\S+/g, "") + (e ? " cm-keymap-" + e :"");
    }
    function s(t) {
        t.display.wrapper.className = t.display.wrapper.className.replace(/\s*cm-s-\S+/g, "") + t.options.theme.replace(/(^|\s)\s*/g, " cm-s-"), 
        B(t);
    }
    function a(t) {
        l(t), v(t, !0);
    }
    function l(t) {
        var e = t.display.gutters, i = t.options.gutters;
        cn(e);
        for (var n = 0; n < i.length; ++n) {
            var o = i[n], r = e.appendChild(ln("div", null, "CodeMirror-gutter " + o));
            "CodeMirror-linenumbers" == o && (t.display.lineGutter = r, r.style.width = (t.display.lineNumWidth || 1) + "px");
        }
        e.style.display = n ? "" :"none";
    }
    function c(t, e) {
        if (0 == e.height) return 0;
        for (var i, n = e.text.length, o = e; i = ai(o); ) {
            var r = i.find();
            o = Ii(t, r.from.line), n += r.from.ch - r.to.ch;
        }
        for (o = e; i = li(o); ) {
            var r = i.find();
            n -= o.text.length - r.from.ch, o = Ii(t, r.to.line), n += o.text.length - r.to.ch;
        }
        return n;
    }
    function h(t) {
        t.maxLine = Ii(t.doc, 0), t.maxLineLength = c(t.doc, t.maxLine), t.maxLineChanged = !0, 
        t.doc.iter(1, t.doc.size, function(e) {
            var i = c(t.doc, e);
            i > t.maxLineLength && (t.maxLineLength = i, t.maxLine = e);
        });
    }
    function u(t) {
        for (var e = !1, i = 0; i < t.gutters.length; ++i) "CodeMirror-linenumbers" == t.gutters[i] && (t.lineNumbers ? e = !0 :t.gutters.splice(i--, 1));
        !e && t.lineNumbers && t.gutters.push("CodeMirror-linenumbers");
    }
    function d(t, e) {
        var i = e + 2 * P(t);
        t.sizer.style.minHeight = t.heightForcer.style.top = i + "px";
        var n = Math.max(i, t.scroller.scrollHeight), o = t.scroller.scrollWidth > t.scroller.clientWidth, r = n > t.scroller.clientHeight;
        r ? (t.scrollbarV.style.display = "block", t.scrollbarV.style.bottom = o ? dn(t.measure) + "px" :"0", 
        t.scrollbarV.firstChild.style.height = n - t.scroller.clientHeight + t.scrollbarV.clientHeight + "px") :t.scrollbarV.style.display = "", 
        o ? (t.scrollbarH.style.display = "block", t.scrollbarH.style.right = r ? dn(t.measure) + "px" :"0", 
        t.scrollbarH.firstChild.style.width = t.scroller.scrollWidth - t.scroller.clientWidth + t.scrollbarH.clientWidth + "px") :t.scrollbarH.style.display = "", 
        o && r ? (t.scrollbarFiller.style.display = "block", t.scrollbarFiller.style.height = t.scrollbarFiller.style.width = dn(t.measure) + "px") :t.scrollbarFiller.style.display = "", 
        Fn && 0 === dn(t.measure) && (t.scrollbarV.style.minWidth = t.scrollbarH.style.minHeight = jn ? "18px" :"12px");
    }
    function p(t, e, i) {
        var n = t.scroller.scrollTop, o = t.wrapper.clientHeight;
        "number" == typeof i ? n = i :i && (n = i.top, o = i.bottom - i.top), n = Math.floor(n - P(t));
        var r = Math.ceil(n + o);
        return {
            from:Ni(e, n),
            to:Ni(e, r)
        };
    }
    function f(t) {
        var e = t.display;
        if (e.alignWidgets || e.gutters.firstChild) {
            for (var i = _(e) - e.scroller.scrollLeft + t.view.scrollLeft, n = e.gutters.offsetWidth, o = i + "px", r = e.lineDiv.firstChild; r; r = r.nextSibling) if (r.alignable) for (var s = 0, a = r.alignable; s < a.length; ++s) a[s].style.left = o;
            e.gutters.style.left = i + n + "px";
        }
    }
    function g(t) {
        if (!t.options.lineNumbers) return !1;
        var e = t.view.doc, i = m(t.options, e.size - 1), n = t.display;
        if (i.length != n.lineNumChars) {
            var o = n.measure.appendChild(ln("div", [ ln("div", i) ], "CodeMirror-linenumber CodeMirror-gutter-elt")), r = o.firstChild.offsetWidth, s = o.offsetWidth - r;
            return n.lineGutter.style.width = "", n.lineNumInnerWidth = Math.max(r, n.lineGutter.offsetWidth - s), 
            n.lineNumWidth = n.lineNumInnerWidth + s, n.lineNumChars = n.lineNumInnerWidth ? i.length :-1, 
            n.lineGutter.style.width = n.lineNumWidth + "px", !0;
        }
        return !1;
    }
    function m(t, e) {
        return String(t.lineNumberFormatter(e + t.firstLineNumber));
    }
    function _(t) {
        return t.scroller.getBoundingClientRect().left - t.sizer.getBoundingClientRect().left;
    }
    function v(t, e, i) {
        var n = t.display.showingFrom, o = t.display.showingTo, r = y(t, e, i);
        return r && (Yi(t, t, "update", t), (t.display.showingFrom != n || t.display.showingTo != o) && Yi(t, t, "viewportChange", t, t.display.showingFrom, t.display.showingTo)), 
        D(t), d(t.display, t.view.doc.height), r;
    }
    function y(t, e, i) {
        var n = t.display, o = t.view.doc;
        if (!n.wrapper.clientWidth) return n.showingFrom = n.showingTo = n.viewOffset = 0, 
        void 0;
        var r = p(n, o, i);
        if (!(e !== !0 && 0 == e.length && r.from > n.showingFrom && r.to < n.showingTo)) {
            if (e && g(t) && (e = !0), n.sizer.style.marginLeft = n.scrollbarH.style.left = n.gutters.offsetWidth + "px", 
            e !== !0 && Wn) for (var s = 0; s < e.length; ++s) for (var a, l = e[s]; a = ai(Ii(o, l.from)); ) {
                var c = a.find().from.line;
                l.diff && (l.diff -= l.from - c), l.from = c;
            }
            var h = e === !0 ? 0 :1/0;
            if (t.options.lineNumbers && e && e !== !0) for (var s = 0; s < e.length; ++s) if (e[s].diff) {
                h = e[s].from;
                break;
            }
            var c = Math.max(r.from - t.options.viewportMargin, 0), u = Math.min(o.size, r.to + t.options.viewportMargin);
            if (n.showingFrom < c && c - n.showingFrom < 20 && (c = n.showingFrom), n.showingTo > u && n.showingTo - u < 20 && (u = Math.min(o.size, n.showingTo)), 
            Wn) for (c = Pi(ci(o, Ii(o, c))); u < o.size && hi(Ii(o, u)); ) ++u;
            for (var d = e === !0 ? [] :b([ {
                from:n.showingFrom,
                to:n.showingTo
            } ], e), f = 0, s = 0; s < d.length; ++s) {
                var m = d[s];
                m.from < c && (m.from = c), m.to > u && (m.to = u), m.from >= m.to ? d.splice(s--, 1) :f += m.to - m.from;
            }
            if (f != u - c || c != n.showingFrom || u != n.showingTo) {
                d.sort(function(t, e) {
                    return t.from - e.from;
                }), .7 * (u - c) > f && (n.lineDiv.style.display = "none"), C(t, c, u, d, h), n.lineDiv.style.display = "";
                var _ = c != n.showingFrom || u != n.showingTo || n.lastSizeC != n.wrapper.clientHeight;
                _ && (n.lastSizeC = n.wrapper.clientHeight), n.showingFrom = c, n.showingTo = u, 
                O(t, 100);
                for (var v, y = n.lineDiv.offsetTop, w = n.lineDiv.firstChild; w; w = w.nextSibling) if (w.lineObj) {
                    if (Pn) {
                        var T = w.offsetTop + w.offsetHeight;
                        v = T - y, y = T;
                    } else {
                        var D = w.getBoundingClientRect();
                        v = D.bottom - D.top;
                    }
                    var E = w.lineObj.height - v;
                    2 > v && (v = $(n)), (E > .001 || -.001 > E) && Ri(w.lineObj, v);
                }
                return n.viewOffset = Ai(t, Ii(o, c)), n.mover.style.top = n.viewOffset + "px", 
                !0;
            }
        }
    }
    function b(t, e) {
        for (var i = 0, n = e.length || 0; n > i; ++i) {
            for (var o = e[i], r = [], s = o.diff || 0, a = 0, l = t.length; l > a; ++a) {
                var c = t[a];
                o.to <= c.from && o.diff ? r.push({
                    from:c.from + s,
                    to:c.to + s
                }) :o.to <= c.from || o.from >= c.to ? r.push(c) :(o.from > c.from && r.push({
                    from:c.from,
                    to:o.from
                }), o.to < c.to && r.push({
                    from:o.to + s,
                    to:c.to + s
                }));
            }
            t = r;
        }
        return t;
    }
    function w(t) {
        for (var e = t.display, i = {}, n = {}, o = e.gutters.firstChild, r = 0; o; o = o.nextSibling, 
        ++r) i[t.options.gutters[r]] = o.offsetLeft, n[t.options.gutters[r]] = o.offsetWidth;
        return {
            fixedPos:_(e),
            gutterTotalWidth:e.gutters.offsetWidth,
            gutterLeft:i,
            gutterWidth:n,
            wrapperWidth:e.wrapper.clientWidth
        };
    }
    function C(t, e, i, n, o) {
        function r(e) {
            var i = e.nextSibling;
            return An && Un && t.display.currentWheelTarget == e ? (e.style.display = "none", 
            e.lineObj = null) :c.removeChild(e), i;
        }
        var s = w(t), a = t.display, l = t.options.lineNumbers;
        n.length || Rn || An && t.display.currentWheelTarget || cn(a.lineDiv);
        var c = a.lineDiv, h = c.firstChild, u = n.shift(), d = e;
        for (t.view.doc.iter(e, i, function(e) {
            if (u && u.to == d && (u = n.shift()), hi(e)) 0 != e.height && Ri(e, 0); else if (u && u.from <= d && u.to > d) {
                for (;h.lineObj != e; ) h = r(h);
                l && d >= o && h.lineNumber && un(h.lineNumber, m(t.options, d)), h = h.nextSibling;
            } else {
                var i = T(t, e, d, s);
                c.insertBefore(i, h), i.lineObj = e;
            }
            ++d;
        }); h; ) h = r(h);
    }
    function T(t, e, i, n) {
        var o = Ti(t, e), r = e.gutterMarkers, s = t.display;
        if (!(t.options.lineNumbers || r || e.bgClass || e.wrapClass || e.widgets && e.widgets.length)) return o;
        var a = ln("div", null, e.wrapClass, "position: relative");
        if (t.options.lineNumbers || r) {
            var l = a.appendChild(ln("div", null, null, "position: absolute; left: " + n.fixedPos + "px"));
            if (a.alignable = [ l ], !t.options.lineNumbers || r && r["CodeMirror-linenumbers"] || (a.lineNumber = l.appendChild(ln("div", m(t.options, i), "CodeMirror-linenumber CodeMirror-gutter-elt", "left: " + n.gutterLeft["CodeMirror-linenumbers"] + "px; width: " + s.lineNumInnerWidth + "px"))), 
            r) for (var c = 0; c < t.options.gutters.length; ++c) {
                var h = t.options.gutters[c], u = r.hasOwnProperty(h) && r[h];
                u && l.appendChild(ln("div", [ u ], "CodeMirror-gutter-elt", "left: " + n.gutterLeft[h] + "px; width: " + n.gutterWidth[h] + "px"));
            }
        }
        if (e.bgClass && a.appendChild(ln("div", " ", e.bgClass + " CodeMirror-linebackground")), 
        a.appendChild(o), e.widgets) for (var d = 0, p = e.widgets; d < p.length; ++d) {
            var f = p[d], g = ln("div", [ f.node ], "CodeMirror-linewidget");
            if (g.widget = f, f.noHScroll) {
                (a.alignable || (a.alignable = [])).push(g);
                var _ = n.wrapperWidth;
                g.style.left = n.fixedPos + "px", f.coverGutter || (_ -= n.gutterTotalWidth, g.style.paddingLeft = n.gutterTotalWidth + "px"), 
                g.style.width = _ + "px";
            }
            f.coverGutter && (g.style.zIndex = 5, g.style.position = "relative", f.noHScroll || (g.style.marginLeft = -n.gutterTotalWidth + "px")), 
            f.above ? a.insertBefore(g, t.options.lineNumbers && 0 != e.height ? l :o) :a.appendChild(g);
        }
        return Pn && (a.style.zIndex = 2), a;
    }
    function D(t) {
        var e = t.display, i = Ee(t.view.sel.from, t.view.sel.to);
        i || t.options.showCursorWhenSelecting ? E(t) :e.cursor.style.display = e.otherCursor.style.display = "none", 
        i ? e.selectionDiv.style.display = "none" :x(t);
        var n = F(t, t.view.sel.head, "div"), o = e.wrapper.getBoundingClientRect(), r = e.lineDiv.getBoundingClientRect();
        e.inputDiv.style.top = Math.max(0, Math.min(e.wrapper.clientHeight - 10, n.top + r.top - o.top)) + "px", 
        e.inputDiv.style.left = Math.max(0, Math.min(e.wrapper.clientWidth - 10, n.left + r.left - o.left)) + "px";
    }
    function E(t) {
        var e = t.display, i = F(t, t.view.sel.head, "div");
        e.cursor.style.left = i.left + "px", e.cursor.style.top = i.top + "px", e.cursor.style.height = Math.max(0, i.bottom - i.top) * t.options.cursorHeight + "px", 
        e.cursor.style.display = "", i.other ? (e.otherCursor.style.display = "", e.otherCursor.style.left = i.other.left + "px", 
        e.otherCursor.style.top = i.other.top + "px", e.otherCursor.style.height = .85 * (i.other.bottom - i.other.top) + "px") :e.otherCursor.style.display = "none";
    }
    function x(t) {
        function e(t, e, i, n) {
            0 > e && (e = 0), s.appendChild(ln("div", null, "CodeMirror-selected", "position: absolute; left: " + t + "px; top: " + e + "px; width: " + (null == i ? a - t :i) + "px; height: " + (n - e) + "px"));
        }
        function i(i, n, r, s) {
            function c(e) {
                return K(t, {
                    line:i,
                    ch:e
                }, "div", h);
            }
            var h = Ii(o, i), u = h.text.length, d = s ? 1/0 :-1/0;
            return fn(Mi(h), n || 0, null == r ? u :r, function(t, i, o) {
                var h = c("rtl" == o ? i - 1 :t), p = c("rtl" == o ? t :i - 1), f = h.left, g = p.right;
                p.top - h.top > 3 && (e(f, h.top, null, h.bottom), f = l, h.bottom < p.top && e(f, h.bottom, null, p.top)), 
                null == r && i == u && (g = a), null == n && 0 == t && (f = l), d = s ? Math.min(p.top, d) :Math.max(p.bottom, d), 
                l + 1 > f && (f = l), e(f, p.top, g - f, p.bottom);
            }), d;
        }
        var n = t.display, o = t.view.doc, r = t.view.sel, s = document.createDocumentFragment(), a = n.lineSpace.offsetWidth, l = N(t.display);
        if (r.from.line == r.to.line) i(r.from.line, r.from.ch, r.to.ch); else {
            for (var c, h, u = Ii(o, r.from.line), d = u, p = [ r.from.line, r.from.ch ]; c = li(d); ) {
                var f = c.find();
                if (p.push(f.from.ch, f.to.line, f.to.ch), f.to.line == r.to.line) {
                    p.push(r.to.ch), h = !0;
                    break;
                }
                d = Ii(o, f.to.line);
            }
            if (h) for (var g = 0; g < p.length; g += 3) i(p[g], p[g + 1], p[g + 2]); else {
                var m, _, v = Ii(o, r.to.line);
                m = r.from.ch ? i(r.from.line, r.from.ch, null, !1) :Ai(t, u) - n.viewOffset, _ = r.to.ch ? i(r.to.line, ai(v) ? null :0, r.to.ch, !0) :Ai(t, v) - n.viewOffset, 
                _ > m && e(l, m, null, _);
            }
        }
        hn(n.selectionDiv, s), n.selectionDiv.style.display = "";
    }
    function S(t) {
        var e = t.display;
        clearInterval(e.blinker);
        var i = !0;
        e.cursor.style.visibility = e.otherCursor.style.visibility = "", e.blinker = setInterval(function() {
            e.cursor.offsetHeight && (e.cursor.style.visibility = e.otherCursor.style.visibility = (i = !i) ? "" :"hidden");
        }, t.options.cursorBlinkRate);
    }
    function O(t, e) {
        t.view.frontier < t.display.showingTo && t.view.highlight.set(e, rn(k, t));
    }
    function k(t) {
        var e = t.view, i = e.doc;
        if (!(e.frontier >= t.display.showingTo)) {
            var n, o = +new Date() + t.options.workTime, r = Ue(e.mode, R(t, e.frontier)), s = [];
            i.iter(e.frontier, Math.min(i.size, t.display.showingTo + 500), function(i) {
                return e.frontier >= t.display.showingFrom ? (bi(t, i, r) && e.frontier >= t.display.showingFrom && (n && n.end == e.frontier ? n.end++ :s.push(n = {
                    start:e.frontier,
                    end:e.frontier + 1
                })), i.stateAfter = Ue(e.mode, r)) :(wi(t, i, r), i.stateAfter = e.frontier % 5 == 0 ? Ue(e.mode, r) :null), 
                ++e.frontier, +new Date() > o ? (O(t, t.options.workDelay), !0) :void 0;
            }), s.length && W(t, function() {
                for (var t = 0; t < s.length; ++t) q(this, s[t].start, s[t].end);
            })();
        }
    }
    function I(t, e) {
        for (var i, n, o = t.view.doc, r = e, s = e - 100; r > s; --r) {
            if (0 == r) return 0;
            var a = Ii(o, r - 1);
            if (a.stateAfter) return r;
            var l = Zi(a.text, null, t.options.tabSize);
            (null == n || i > l) && (n = r - 1, i = l);
        }
        return n;
    }
    function R(t, e) {
        var i = t.view, n = I(t, e), o = n && Ii(i.doc, n - 1).stateAfter;
        return o = o ? Ue(i.mode, o) :Ve(i.mode), i.doc.iter(n, e, function(r) {
            wi(t, r, o);
            var s = n == e - 1 || n % 5 == 0 || n >= i.showingFrom && n < i.showingTo;
            r.stateAfter = s ? Ue(i.mode, o) :null, ++n;
        }), o;
    }
    function P(t) {
        return t.lineSpace.offsetTop;
    }
    function N(t) {
        var e = hn(t.measure, ln("pre")).appendChild(ln("span", "x"));
        return e.offsetLeft;
    }
    function A(t, e, i, n) {
        for (var n = n || M(t, e), o = -1, r = i; ;r += o) {
            var s = n[r];
            if (s) break;
            0 > o && 0 == r && (o = 1);
        }
        return {
            left:i > r ? s.right :s.left,
            right:r > i ? s.left :s.right,
            top:s.top,
            bottom:s.bottom
        };
    }
    function M(t, e) {
        for (var i = t.display, n = t.display.measureLineCache, o = 0; o < n.length; ++o) {
            var r = n[o];
            if (r.text == e.text && r.markedSpans == e.markedSpans && i.scroller.clientWidth == r.width) return r.measure;
        }
        var s = L(t, e), r = {
            text:e.text,
            width:i.scroller.clientWidth,
            markedSpans:e.markedSpans,
            measure:s
        };
        return 16 == n.length ? n[++i.measureLineCachePos % 16] = r :n.push(r), s;
    }
    function L(t, e) {
        var i = t.display, n = on(e.text.length), o = Ti(t, e, n);
        if (Rn && !Pn && !t.options.lineWrapping && o.childNodes.length > 100) {
            for (var r = document.createDocumentFragment(), s = 10, a = o.childNodes.length, l = 0, c = Math.ceil(a / s); c > l; ++l) {
                for (var h = ln("div", null, null, "display: inline-block"), u = 0; s > u && a; ++u) h.appendChild(o.firstChild), 
                --a;
                r.appendChild(h);
            }
            o.appendChild(r);
        }
        hn(i.measure, o);
        for (var d, p = i.lineDiv.getBoundingClientRect(), f = [], g = on(e.text.length), m = o.offsetHeight, l = 0; l < n.length; ++l) if (d = n[l]) {
            for (var _ = d.getBoundingClientRect(), v = Math.max(0, _.top - p.top), y = Math.min(_.bottom - p.top, m), u = 0; u < f.length; u += 2) {
                var b = f[u], w = f[u + 1];
                if (!(b > y || v > w) && (v >= b && w >= y || b >= v && y >= w || Math.min(y, w) - Math.max(v, b) >= y - v >> 1)) {
                    f[u] = Math.min(v, b), f[u + 1] = Math.max(y, w);
                    break;
                }
            }
            u == f.length && f.push(v, y), g[l] = {
                left:_.left - p.left,
                right:_.right - p.left,
                top:u
            };
        }
        for (var d, l = 0; l < g.length; ++l) if (d = g[l]) {
            var C = d.top;
            d.top = f[C], d.bottom = f[C + 1];
        }
        return g;
    }
    function B(t) {
        t.display.measureLineCache.length = t.display.measureLineCachePos = 0, t.display.cachedCharWidth = t.display.cachedTextHeight = null, 
        t.view.maxLineChanged = !0;
    }
    function z(t, e, i, n) {
        if (e.widgets) for (var o = 0; o < e.widgets.length; ++o) if (e.widgets[o].above) {
            var r = e.widgets[o].node.offsetHeight;
            i.top += r, i.bottom += r;
        }
        if ("line" == n) return i;
        n || (n = "local");
        var s = Ai(t, e);
        if ("local" != n && (s -= t.display.viewOffset), "page" == n) {
            var a = t.display.lineSpace.getBoundingClientRect();
            s += a.top + (window.pageYOffset || (document.documentElement || document.body).scrollTop);
            var l = a.left + (window.pageXOffset || (document.documentElement || document.body).scrollLeft);
            i.left += l, i.right += l;
        }
        return i.top += s, i.bottom += s, i;
    }
    function K(t, e, i, n) {
        return n || (n = Ii(t.view.doc, e.line)), z(t, n, A(t, n, e.ch), i);
    }
    function F(t, e, i, n, o) {
        function r(e, r) {
            var s = A(t, n, e, o);
            return r ? s.left = s.right :s.right = s.left, z(t, n, s, i);
        }
        n = n || Ii(t.view.doc, e.line), o || (o = M(t, n));
        var s = Mi(n), a = e.ch;
        if (!s) return r(a);
        for (var l, c, h = s[0].level, u = 0; u < s.length; ++u) {
            var d, p, f = s[u], g = f.level % 2;
            if (f.from < a && f.to > a) return r(a, g);
            var m = g ? f.to :f.from, _ = g ? f.from :f.to;
            if (m == a) p = u && f.level < (d = s[u - 1]).level ? r(d.level % 2 ? d.from :d.to - 1, !0) :r(g && f.from != f.to ? a - 1 :a), 
            g == h ? l = p :c = p; else if (_ == a) {
                var d = u < s.length - 1 && s[u + 1];
                if (!g && d && d.from == d.to) continue;
                p = d && f.level < d.level ? r(d.level % 2 ? d.to - 1 :d.from) :r(g ? a :a - 1, !0), 
                g == h ? l = p :c = p;
            }
        }
        return h && !a && (c = r(s[0].to - 1)), l ? (c && (l.other = c), l) :c;
    }
    function j(t, e, i) {
        var n = t.view.doc;
        if (i += t.display.viewOffset, 0 > i) return {
            line:0,
            ch:0,
            outside:!0
        };
        var o = Ni(n, i);
        if (o >= n.size) return {
            line:n.size - 1,
            ch:Ii(n, n.size - 1).text.length
        };
        for (0 > e && (e = 0); ;) {
            var r = Ii(n, o), s = H(t, r, o, e, i), a = li(r);
            if (!a || s.ch != vn(r)) return s;
            o = a.find().to.line;
        }
    }
    function H(t, e, i, n, o) {
        function r(n) {
            var o = F(t, {
                line:i,
                ch:n
            }, "line", e, c);
            return a = !0, s > o.bottom ? Math.max(0, o.left - l) :s < o.top ? o.left + l :(a = !1, 
            o.left);
        }
        var s = o - Ai(t, e), a = !1, l = t.display.wrapper.clientWidth, c = M(t, e), h = Mi(e), u = e.text.length, d = _n(e), p = vn(e), f = N(t.display), g = r(p);
        if (n > g) return {
            line:i,
            ch:p,
            outside:a
        };
        for (;;) {
            if (h ? p == d || p == wn(e, d, 1) :1 >= p - d) {
                for (var m = g - n > n - f, _ = m ? d :p; go.test(e.text.charAt(_)); ) ++_;
                return {
                    line:i,
                    ch:_,
                    after:m,
                    outside:a
                };
            }
            var v = Math.ceil(u / 2), y = d + v;
            if (h) {
                y = d;
                for (var b = 0; v > b; ++b) y = wn(e, y, 1);
            }
            var w = r(y);
            w > n ? (p = y, g = w, a && (g += 1e3), u -= v) :(d = y, f = w, u = v);
        }
    }
    function $(t) {
        if (null != t.cachedTextHeight) return t.cachedTextHeight;
        if (null == Tn) {
            Tn = ln("pre");
            for (var e = 0; 49 > e; ++e) Tn.appendChild(document.createTextNode("x")), Tn.appendChild(ln("br"));
            Tn.appendChild(document.createTextNode("x"));
        }
        hn(t.measure, Tn);
        var i = Tn.offsetHeight / 50;
        return i > 3 && (t.cachedTextHeight = i), cn(t.measure), i || 1;
    }
    function G(t) {
        if (null != t.cachedCharWidth) return t.cachedCharWidth;
        var e = ln("span", "x"), i = ln("pre", [ e ]);
        hn(t.measure, i);
        var n = e.offsetWidth;
        return n > 2 && (t.cachedCharWidth = n), n || 10;
    }
    function U(t) {
        t.curOp ? ++t.curOp.depth :t.curOp = {
            depth:1,
            changes:[],
            delayedCallbacks:[],
            updateInput:null,
            userSelChange:null,
            textChanged:null,
            selectionChanged:!1,
            updateMaxLine:!1,
            id:++t.nextOpId
        };
    }
    function V(t) {
        var e = t.curOp;
        if (!--e.depth) {
            t.curOp = null;
            var i = t.view, n = t.display;
            if (e.updateMaxLine && h(i), i.maxLineChanged && !t.options.lineWrapping) {
                var o = A(t, i.maxLine, i.maxLine.text.length).right;
                n.sizer.style.minWidth = o + 3 + ho + "px", i.maxLineChanged = !1;
            }
            var r, s;
            if (e.selectionChanged) {
                var a = F(t, i.sel.head);
                r = ze(t, a.left, a.top, a.left, a.bottom);
            }
            (e.changes.length || r && null != r.scrollTop) && (s = v(t, e.changes, r && r.scrollTop)), 
            !s && e.selectionChanged && D(t), r && Me(t), e.selectionChanged && S(t), i.focused && e.updateInput && Z(t, e.userSelChange), 
            e.textChanged && qi(t, "change", t, e.textChanged), e.selectionChanged && qi(t, "cursorActivity", t);
            for (var l = 0; l < e.delayedCallbacks.length; ++l) e.delayedCallbacks[l](t);
        }
    }
    function W(t, e) {
        return function() {
            var i = t || this;
            U(i);
            try {
                var n = e.apply(i, arguments);
            } finally {
                V(i);
            }
            return n;
        };
    }
    function q(t, e, i, n) {
        t.curOp.changes.push({
            from:e,
            to:i,
            diff:n
        });
    }
    function Y(t) {
        t.view.pollingFast || t.display.poll.set(t.options.pollInterval, function() {
            X(t), t.view.focused && Y(t);
        });
    }
    function J(t) {
        function e() {
            var n = X(t);
            n || i ? (t.display.pollingFast = !1, Y(t)) :(i = !0, t.display.poll.set(60, e));
        }
        var i = !1;
        t.display.pollingFast = !0, t.display.poll.set(20, e);
    }
    function X(t) {
        var e = t.display.input, i = t.display.prevInput, n = t.view, o = n.sel;
        if (!n.focused || wo(e) || te(t)) return !1;
        var r = e.value;
        if (r == i && Ee(o.from, o.to)) return !1;
        U(t), n.sel.shift = !1;
        for (var s = 0, a = Math.min(i.length, r.length); a > s && i[s] == r[s]; ) ++s;
        var l = o.from, c = o.to;
        s < i.length ? l = {
            line:l.line,
            ch:l.ch - (i.length - s)
        } :n.overwrite && Ee(l, c) && !t.display.pasteIncoming && (c = {
            line:c.line,
            ch:Math.min(Ii(t.view.doc, c.line).text.length, c.ch + (r.length - s))
        });
        var h = t.curOp.updateInput;
        return be(t, l, c, bo(r.slice(s)), "end", t.display.pasteIncoming ? "paste" :"input", {
            from:l,
            to:c
        }), t.curOp.updateInput = h, r.length > 1e3 ? e.value = t.display.prevInput = "" :t.display.prevInput = r, 
        V(t), t.display.pasteIncoming = !1, !0;
    }
    function Z(t, e) {
        var i, n, o = t.view;
        Ee(o.sel.from, o.sel.to) ? e && (t.display.prevInput = t.display.input.value = "") :(t.display.prevInput = "", 
        i = Co && (o.sel.to.line - o.sel.from.line > 100 || (n = t.getSelection()).length > 1e3), 
        t.display.input.value = i ? "-" :n || t.getSelection(), o.focused && en(t.display.input)), 
        t.display.inaccurateSelection = i;
    }
    function Q(t) {
        "nocursor" == t.options.readOnly || !Rn && document.activeElement == t.display.input || t.display.input.focus();
    }
    function te(t) {
        return t.options.readOnly || t.view.cantEdit;
    }
    function ee(t) {
        function e() {
            t.view.focused && setTimeout(rn(Q, t), 0);
        }
        function i(e) {
            t.options.onDragEvent && t.options.onDragEvent(t, Ki(e)) || Hi(e);
        }
        function n() {
            o.inaccurateSelection && (o.prevInput = "", o.inaccurateSelection = !1, o.input.value = t.getSelection(), 
            en(o.input));
        }
        var o = t.display;
        Vi(o.scroller, "mousedown", W(t, oe)), Vi(o.scroller, "dblclick", W(t, Fi)), Vi(o.lineSpace, "selectstart", function(t) {
            ie(o, t) || Fi(t);
        }), In || Vi(o.scroller, "contextmenu", function(e) {
            ye(t, e);
        }), Vi(o.scroller, "scroll", function() {
            le(t, o.scroller.scrollTop), ce(t, o.scroller.scrollLeft, !0), qi(t, "scroll", t);
        }), Vi(o.scrollbarV, "scroll", function() {
            le(t, o.scrollbarV.scrollTop);
        }), Vi(o.scrollbarH, "scroll", function() {
            ce(t, o.scrollbarH.scrollLeft);
        }), Vi(o.scroller, "mousewheel", function(e) {
            he(t, e);
        }), Vi(o.scroller, "DOMMouseScroll", function(e) {
            he(t, e);
        }), Vi(o.scrollbarH, "mousedown", e), Vi(o.scrollbarV, "mousedown", e), Vi(o.wrapper, "scroll", function() {
            o.wrapper.scrollTop = o.wrapper.scrollLeft = 0;
        }), Vi(window, "resize", function r() {
            o.cachedCharWidth = o.cachedTextHeight = null, B(t), o.wrapper.parentNode ? v(t, !0) :Wi(window, "resize", r);
        }), Vi(o.input, "keyup", W(t, function(e) {
            t.options.onKeyEvent && t.options.onKeyEvent(t, Ki(e)) || 16 == Ui(e, "keyCode") && (t.view.sel.shift = !1);
        })), Vi(o.input, "input", rn(J, t)), Vi(o.input, "keydown", W(t, ge)), Vi(o.input, "keypress", W(t, me)), 
        Vi(o.input, "focus", rn(_e, t)), Vi(o.input, "blur", rn(ve, t)), t.options.dragDrop && (Vi(o.scroller, "dragstart", function(e) {
            ae(t, e);
        }), Vi(o.scroller, "dragenter", i), Vi(o.scroller, "dragover", i), Vi(o.scroller, "drop", W(t, re))), 
        Vi(o.scroller, "paste", function() {
            Q(t), J(t);
        }), Vi(o.input, "paste", function() {
            o.pasteIncoming = !0, J(t);
        }), Vi(o.input, "cut", n), Vi(o.input, "copy", n), Kn && Vi(o.sizer, "mouseup", function() {
            document.activeElement == o.input && o.input.blur(), Q(t);
        });
    }
    function ie(t, e) {
        for (var i = $i(e); i != t.wrapper; i = i.parentNode) if (/\bCodeMirror-(?:line)?widget\b/.test(i.className) || i.parentNode == t.sizer && i != t.mover) return !0;
    }
    function ne(t, e, i) {
        var n = t.display;
        if (!i) {
            var o = $i(e);
            if (o == n.scrollbarH || o == n.scrollbarH.firstChild || o == n.scrollbarV || o == n.scrollbarV.firstChild || o == n.scrollbarFiller) return null;
        }
        var r, s, a = n.lineSpace.getBoundingClientRect();
        try {
            r = e.clientX, s = e.clientY;
        } catch (e) {
            return null;
        }
        return j(t, r - a.left, s - a.top);
    }
    function oe(t) {
        function e(t) {
            if ("single" == u) return Re(o, ke(l, c), t), void 0;
            if (m = ke(l, m), _ = ke(l, _), "double" == u) {
                var e = He(Ii(l, t.line).text, t);
                xe(t, m) ? Re(o, e.from, _) :Re(o, m, e.to);
            } else "triple" == u && (xe(t, m) ? Re(o, _, ke(l, {
                line:t.line,
                ch:0
            })) :Re(o, m, ke(l, {
                line:t.line + 1,
                ch:0
            })));
        }
        function i(t) {
            var n = ++y, a = ne(o, t, !0);
            if (a) if (Ee(a, f)) {
                var c = t.clientY < v.top ? -20 :t.clientY > v.bottom ? 20 :0;
                c && setTimeout(W(o, function() {
                    y == n && (r.scroller.scrollTop += c, i(t));
                }), 50);
            } else {
                s.focused || _e(o), f = a, e(a);
                var h = p(r, l);
                (a.line >= h.to || a.line < h.from) && setTimeout(W(o, function() {
                    y == n && i(t);
                }), 150);
            }
        }
        function n(t) {
            y = 1/0;
            var i = ne(o, t);
            i && e(i), Fi(t), Q(o), Wi(document, "mousemove", b), Wi(document, "mouseup", w);
        }
        var o = this, r = o.display, s = o.view, a = s.sel, l = s.doc;
        if (a.shift = Ui(t, "shiftKey"), ie(r, t)) return An || (r.scroller.draggable = !1, 
        setTimeout(function() {
            r.scroller.draggable = !0;
        }, 100)), void 0;
        if (!se(o, t)) {
            var c = ne(o, t);
            switch (Gi(t)) {
              case 3:
                return In && ye.call(o, o, t), void 0;

              case 2:
                return c && Re(o, c), setTimeout(rn(Q, o), 20), Fi(t), void 0;
            }
            if (!c) return $i(t) == r.scroller && Fi(t), void 0;
            s.focused || _e(o);
            var h = +new Date(), u = "single";
            if (En && En.time > h - 400 && Ee(En.pos, c)) u = "triple", Fi(t), setTimeout(rn(Q, o), 20), 
            $e(o, c.line); else if (Dn && Dn.time > h - 400 && Ee(Dn.pos, c)) {
                u = "double", En = {
                    time:h,
                    pos:c
                }, Fi(t);
                var d = He(Ii(l, c.line).text, c);
                Re(o, d.from, d.to);
            } else Dn = {
                time:h,
                pos:c
            };
            var f = c;
            if (o.options.dragDrop && mo && !te(o) && !Ee(a.from, a.to) && !xe(c, a.from) && !xe(a.to, c) && "single" == u) {
                var g = W(o, function(e) {
                    An && (r.scroller.draggable = !1), s.draggingText = !1, Wi(document, "mouseup", g), 
                    Wi(r.scroller, "drop", g), Math.abs(t.clientX - e.clientX) + Math.abs(t.clientY - e.clientY) < 10 && (Fi(e), 
                    Re(o, c), Q(o));
                });
                return An && (r.scroller.draggable = !0), s.draggingText = g, r.scroller.dragDrop && r.scroller.dragDrop(), 
                Vi(document, "mouseup", g), Vi(r.scroller, "drop", g), void 0;
            }
            Fi(t), "single" == u && Re(o, ke(l, c));
            var m = a.from, _ = a.to, v = r.wrapper.getBoundingClientRect(), y = 0, b = W(o, function(t) {
                Rn || Gi(t) ? i(t) :n(t);
            }), w = W(o, n);
            Vi(document, "mousemove", b), Vi(document, "mouseup", w);
        }
    }
    function re(t) {
        var e = this;
        if (!e.options.onDragEvent || !e.options.onDragEvent(e, Ki(t))) {
            Fi(t);
            var i = ne(e, t, !0), n = t.dataTransfer.files;
            if (i && !te(e)) if (n && n.length && window.FileReader && window.File) for (var o = n.length, r = Array(o), s = 0, a = function(t, n) {
                var a = new FileReader();
                a.onload = function() {
                    r[n] = a.result, ++s == o && (i = ke(e.view.doc, i), W(e, function() {
                        var t = De(e, r.join(""), i, i, "paste");
                        Pe(e, i, t);
                    })());
                }, a.readAsText(t);
            }, l = 0; o > l; ++l) a(n[l], l); else {
                if (e.view.draggingText && !xe(i, e.view.sel.from) && !xe(e.view.sel.to, i)) return e.view.draggingText(t), 
                Rn && setTimeout(rn(Q, e), 50), void 0;
                try {
                    var r = t.dataTransfer.getData("Text");
                    if (r) {
                        var c = e.view.sel.from, h = e.view.sel.to;
                        Pe(e, i, i), e.view.draggingText && De(e, "", c, h, "paste"), e.replaceSelection(r, null, "paste"), 
                        Q(e), _e(e);
                    }
                } catch (t) {}
            }
        }
    }
    function se(t, e) {
        var i = t.display;
        try {
            var n = e.clientX, o = e.clientY;
        } catch (e) {
            return !1;
        }
        if (n >= Math.floor(i.gutters.getBoundingClientRect().right)) return !1;
        if (Fi(e), !Ji(t, "gutterClick")) return !0;
        var r = i.lineDiv.getBoundingClientRect();
        if (o > r.bottom) return !0;
        o -= r.top - i.viewOffset;
        for (var s = 0; s < t.options.gutters.length; ++s) {
            var a = i.gutters.childNodes[s];
            if (a && a.getBoundingClientRect().right >= n) {
                var l = Ni(t.view.doc, o), c = t.options.gutters[s];
                Yi(t, t, "gutterClick", t, l, c, e);
                break;
            }
        }
        return !0;
    }
    function ae(t, e) {
        var i = t.getSelection();
        e.dataTransfer.setData("Text", i), e.dataTransfer.setDragImage && !zn && e.dataTransfer.setDragImage(ln("img"), 0, 0);
    }
    function le(t, e) {
        Math.abs(t.view.scrollTop - e) < 2 || (t.view.scrollTop = e, In || v(t, [], e), 
        t.display.scroller.scrollTop != e && (t.display.scroller.scrollTop = e), t.display.scrollbarV.scrollTop != e && (t.display.scrollbarV.scrollTop = e), 
        In && v(t, []));
    }
    function ce(t, e, i) {
        (i ? e == t.view.scrollLeft :Math.abs(t.view.scrollLeft - e) < 2) || (t.view.scrollLeft = e, 
        f(t), t.display.scroller.scrollLeft != e && (t.display.scroller.scrollLeft = e), 
        t.display.scrollbarH.scrollLeft != e && (t.display.scrollbarH.scrollLeft = e));
    }
    function he(t, e) {
        var i = e.wheelDeltaX, n = e.wheelDeltaY;
        if (null == i && e.detail && e.axis == e.HORIZONTAL_AXIS && (i = e.detail), null == n && e.detail && e.axis == e.VERTICAL_AXIS ? n = e.detail :null == n && (n = e.wheelDelta), 
        n && Un && An) for (var o = e.target; o != r; o = o.parentNode) if (o.lineObj) {
            t.display.currentWheelTarget = o;
            break;
        }
        var r = t.display.scroller;
        if (i && !In && !Bn && null != Yn) return n && le(t, Math.max(0, Math.min(r.scrollTop + n * Yn, r.scrollHeight - r.clientHeight))), 
        ce(t, Math.max(0, Math.min(r.scrollLeft + i * Yn, r.scrollWidth - r.clientWidth))), 
        Fi(e), On = null, void 0;
        if (n && null != Yn) {
            var s = n * Yn, a = t.view.scrollTop, l = a + t.display.wrapper.clientHeight;
            0 > s ? a = Math.max(0, a + s - 50) :l = Math.min(t.view.doc.height, l + s + 50), 
            v(t, [], {
                top:a,
                bottom:l
            });
        }
        20 > qn && (null == On ? (On = r.scrollLeft, kn = r.scrollTop, xn = i, Sn = n, setTimeout(function() {
            if (null != On) {
                var t = r.scrollLeft - On, e = r.scrollTop - kn, i = e && Sn && e / Sn || t && xn && t / xn;
                On = kn = null, i && (Yn = (Yn * qn + i) / (qn + 1), ++qn);
            }
        }, 200)) :(xn += i, Sn += n));
    }
    function ue(t, e, i) {
        if ("string" == typeof e && (e = so[e], !e)) return !1;
        t.display.pollingFast && X(t) && (t.display.pollingFast = !1);
        var n = t.view, o = n.sel.shift;
        try {
            te(t) && (n.suppressEdits = !0), i && (n.sel.shift = !1), e(t);
        } catch (r) {
            if (r != uo) throw r;
            return !1;
        } finally {
            n.sel.shift = o, n.suppressEdits = !1;
        }
        return !0;
    }
    function de(t) {
        var e = t.view.keyMaps.slice(0);
        return e.push(t.options.keyMap), t.options.extraKeys && e.unshift(t.options.extraKeys), 
        e;
    }
    function pe(t, e) {
        function i() {
            l = !0;
        }
        var n = We(t.options.keyMap), o = n.auto;
        clearTimeout(Jn), o && !Ye(e) && (Jn = setTimeout(function() {
            We(t.options.keyMap) == n && (t.options.keyMap = o.call ? o.call(null, t) :o);
        }, 50));
        var r = To[Ui(e, "keyCode")], s = !1, a = Un && (Bn || Mn);
        if (null == r || e.altGraphKey) return !1;
        Ui(e, "altKey") && (r = "Alt-" + r), Ui(e, a ? "metaKey" :"ctrlKey") && (r = "Ctrl-" + r), 
        Ui(e, a ? "ctrlKey" :"metaKey") && (r = "Cmd-" + r);
        var l = !1, c = de(t);
        return s = Ui(e, "shiftKey") ? qe("Shift-" + r, c, function(e) {
            return ue(t, e, !0);
        }, i) || qe(r, c, function(e) {
            return "string" == typeof e && /^go[A-Z]/.test(e) ? ue(t, e) :void 0;
        }, i) :qe(r, c, function(e) {
            return ue(t, e);
        }, i), l && (s = !1), s && (Fi(e), S(t), Nn && (e.oldKeyCode = e.keyCode, e.keyCode = 0)), 
        s;
    }
    function fe(t, e, i) {
        var n = qe("'" + i + "'", de(t), function(e) {
            return ue(t, e, !0);
        });
        return n && (Fi(e), S(t)), n;
    }
    function ge(t) {
        var e = this;
        if (e.view.focused || _e(e), Rn && 27 == t.keyCode && (t.returnValue = !1), !e.options.onKeyEvent || !e.options.onKeyEvent(e, Ki(t))) {
            var i = Ui(t, "keyCode");
            e.view.sel.shift = 16 == i || Ui(t, "shiftKey");
            var n = pe(e, t);
            Bn && (Zn = n ? i :null, n || 88 != i || Co || !Ui(t, Un ? "metaKey" :"ctrlKey") || e.replaceSelection(""));
        }
    }
    function me(t) {
        var e = this;
        if (!e.options.onKeyEvent || !e.options.onKeyEvent(e, Ki(t))) {
            var i = Ui(t, "keyCode"), n = Ui(t, "charCode");
            if (Bn && i == Zn) return Zn = null, Fi(t), void 0;
            if (!(Bn && (!t.which || t.which < 10) || Kn) || !pe(e, t)) {
                var o = String.fromCharCode(null == n ? i :n);
                this.options.electricChars && this.view.mode.electricChars && this.options.smartIndent && !te(this) && this.view.mode.electricChars.indexOf(o) > -1 && setTimeout(W(e, function() {
                    Ke(e, e.view.sel.to.line, "smart");
                }), 75), fe(e, t, o) || J(e);
            }
        }
    }
    function _e(t) {
        "nocursor" != t.options.readOnly && (t.view.focused || (qi(t, "focus", t), t.view.focused = !0, 
        -1 == t.display.scroller.className.search(/\bCodeMirror-focused\b/) && (t.display.scroller.className += " CodeMirror-focused"), 
        Z(t, !0)), Y(t), S(t));
    }
    function ve(t) {
        t.view.focused && (qi(t, "blur", t), t.view.focused = !1, t.display.scroller.className = t.display.scroller.className.replace(" CodeMirror-focused", "")), 
        clearInterval(t.display.blinker), setTimeout(function() {
            t.view.focused || (t.view.sel.shift = !1);
        }, 150);
    }
    function ye(t, e) {
        function i() {
            if (n.inputDiv.style.position = "relative", n.input.style.cssText = a, Nn && (n.scrollbarV.scrollTop = n.scroller.scrollTop = s), 
            Y(t), null != n.input.selectionStart) {
                clearTimeout(Xn);
                var e = n.input.value = " " + (Ee(o.from, o.to) ? "" :n.input.value), i = 0;
                n.prevInput = " ", n.input.selectionStart = 1, n.input.selectionEnd = e.length, 
                Xn = setTimeout(function r() {
                    " " == n.prevInput && 0 == n.input.selectionStart ? W(t, so.selectAll)(t) :i++ < 10 ? Xn = setTimeout(r, 500) :Z(t);
                }, 200);
            }
        }
        var n = t.display, o = t.view.sel, r = ne(t, e), s = n.scroller.scrollTop;
        if (r && !Bn) {
            (Ee(o.from, o.to) || xe(r, o.from) || !xe(r, o.to)) && W(t, Pe)(t, r, r);
            var a = n.input.style.cssText;
            n.inputDiv.style.position = "absolute", n.input.style.cssText = "position: fixed; width: 30px; height: 30px; top: " + (e.clientY - 5) + "px; left: " + (e.clientX - 5) + "px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);", 
            Q(t), Z(t, !0), Ee(o.from, o.to) && (n.input.value = n.prevInput = " "), In ? (Hi(e), 
            Vi(window, "mouseup", function l() {
                Wi(window, "mouseup", l), setTimeout(i, 20);
            })) :setTimeout(i, 50);
        }
    }
    function be(t, e, i, n, o, r) {
        var s = Vn && ri(t.view.doc, e, i);
        if (!s) return we(t, e, i, n, o, r);
        for (var a = s.length - 1; a >= 1; --a) we(t, s[a].from, s[a].to, [ "" ], r);
        return s.length ? we(t, s[0].from, s[0].to, n, o, r) :void 0;
    }
    function we(t, e, i, n, o, r) {
        if (!t.view.suppressEdits) {
            var s = t.view, a = s.doc, l = [];
            a.iter(e.line, i.line + 1, function(t) {
                l.push(fi(t.text, t.markedSpans));
            });
            var c = s.sel.from, h = s.sel.to, u = oi(pi(l[0]), pi(tn(l)), e.ch, i.ch, n), d = Te(t, e, i, u, o, r);
            return s.history && Bi(t, e.line, n.length, l, r, c, h, s.sel.from, s.sel.to), d;
        }
    }
    function Ce(t, e) {
        var i = t.view.doc, n = t.view.history, o = ("undo" == e ? n.done :n.undone).pop();
        if (o) {
            for (var r = {
                events:[],
                fromBefore:o.fromAfter,
                toBefore:o.toAfter,
                fromAfter:o.fromBefore,
                toAfter:o.toBefore
            }, s = o.events.length - 1; s >= 0; s -= 1) {
                n.dirtyCounter += "undo" == e ? -1 :1;
                var a = o.events[s], l = [], c = a.start + a.added;
                i.iter(a.start, c, function(t) {
                    l.push(fi(t.text, t.markedSpans));
                }), r.events.push({
                    start:a.start,
                    added:a.old.length,
                    old:l
                });
                var h = s ? null :{
                    from:o.fromBefore,
                    to:o.toBefore
                };
                Te(t, {
                    line:a.start,
                    ch:0
                }, {
                    line:c - 1,
                    ch:Ii(i, c - 1).text.length
                }, a.old, h, e);
            }
            ("undo" == e ? n.undone :n.done).push(r);
        }
    }
    function Te(t, e, i, n, o, r) {
        var s = t.view, a = s.doc, l = t.display;
        if (!s.suppressEdits) {
            var h = i.line - e.line, u = Ii(a, e.line), d = Ii(a, i.line), p = !1, f = e.line;
            t.options.lineWrapping || (f = Pi(ci(a, u)), a.iter(f, i.line + 1, function(t) {
                return c(a, t) == s.maxLineLength ? (p = !0, !0) :void 0;
            }));
            var g = tn(n), m = $(l);
            if (0 == e.ch && 0 == i.ch && "" == di(g)) {
                for (var _ = [], v = 0, y = n.length - 1; y > v; ++v) _.push(_i(di(n[v]), pi(n[v]), m));
                vi(t, d, d.text, pi(g)), h && a.remove(e.line, h, t), _.length && a.insert(e.line, _);
            } else if (u == d) if (1 == n.length) vi(t, u, u.text.slice(0, e.ch) + di(n[0]) + u.text.slice(i.ch), pi(n[0])); else {
                for (var _ = [], v = 1, y = n.length - 1; y > v; ++v) _.push(_i(di(n[v]), pi(n[v]), m));
                _.push(_i(di(g) + u.text.slice(i.ch), pi(g), m)), vi(t, u, u.text.slice(0, e.ch) + di(n[0]), pi(n[0])), 
                a.insert(e.line + 1, _);
            } else if (1 == n.length) vi(t, u, u.text.slice(0, e.ch) + di(n[0]) + d.text.slice(i.ch), pi(n[0])), 
            a.remove(e.line + 1, h, t); else {
                var _ = [];
                vi(t, u, u.text.slice(0, e.ch) + di(n[0]), pi(n[0])), vi(t, d, di(g) + d.text.slice(i.ch), pi(g));
                for (var v = 1, y = n.length - 1; y > v; ++v) _.push(_i(di(n[v]), pi(n[v]), m));
                h > 1 && a.remove(e.line + 1, h - 1, t), a.insert(e.line + 1, _);
            }
            if (t.options.lineWrapping) {
                var b = Math.max(5, l.scroller.clientWidth / G(l) - 3);
                a.iter(e.line, e.line + n.length, function(t) {
                    if (0 != t.height) {
                        var e = (Math.ceil(t.text.length / b) || 1) * m;
                        e != t.height && Ri(t, e);
                    }
                });
            } else a.iter(f, e.line + n.length, function(t) {
                var e = c(a, t);
                e > s.maxLineLength && (s.maxLine = t, s.maxLineLength = e, s.maxLineChanged = !0, 
                p = !1);
            }), p && (t.curOp.updateMaxLine = !0);
            s.frontier = Math.min(s.frontier, e.line), O(t, 400);
            var w = n.length - h - 1;
            if (q(t, e.line, i.line + 1, w), Ji(t, "change")) {
                for (var v = 0; v < n.length; ++v) "string" != typeof n[v] && (n[v] = n[v].text);
                var C = {
                    from:e,
                    to:i,
                    text:n,
                    origin:r
                };
                if (t.curOp.textChanged) {
                    for (var T = t.curOp.textChanged; T.next; T = T.next) ;
                    T.next = C;
                } else t.curOp.textChanged = C;
            }
            var D, E, x = {
                line:e.line + n.length - 1,
                ch:di(g).length + (1 == n.length ? e.ch :0)
            };
            if (o && "string" != typeof o) o.from ? (D = o.from, E = o.to) :D = E = o; else if ("end" == o) D = E = x; else if ("start" == o) D = E = e; else if ("around" == o) D = e, 
            E = x; else {
                var S = function(t) {
                    if (xe(t, e)) return t;
                    if (!xe(i, t)) return x;
                    var n = t.line + w, o = t.ch;
                    return t.line == i.line && (o += di(g).length - (i.ch - (i.line == e.line ? e.ch :0))), 
                    {
                        line:n,
                        ch:o
                    };
                };
                D = S(s.sel.from), E = S(s.sel.to);
            }
            return Pe(t, D, E, null, !0), x;
        }
    }
    function De(t, e, i, n, o) {
        if (n || (n = i), xe(n, i)) {
            var r = n;
            n = i, i = r;
        }
        return be(t, i, n, bo(e), null, o);
    }
    function Ee(t, e) {
        return t.line == e.line && t.ch == e.ch;
    }
    function xe(t, e) {
        return t.line < e.line || t.line == e.line && t.ch < e.ch;
    }
    function Se(t) {
        return {
            line:t.line,
            ch:t.ch
        };
    }
    function Oe(t, e) {
        return Math.max(0, Math.min(e, t.size - 1));
    }
    function ke(t, e) {
        if (e.line < 0) return {
            line:0,
            ch:0
        };
        if (e.line >= t.size) return {
            line:t.size - 1,
            ch:Ii(t, t.size - 1).text.length
        };
        var i = e.ch, n = Ii(t, e.line).text.length;
        return null == i || i > n ? {
            line:e.line,
            ch:n
        } :0 > i ? {
            line:e.line,
            ch:0
        } :e;
    }
    function Ie(t, e) {
        return e >= 0 && e < t.size;
    }
    function Re(t, e, i, n) {
        var o = t.view.sel;
        if (o.shift || o.extend) {
            var r = o.anchor;
            if (i) {
                var s = xe(e, r);
                s != xe(i, r) ? (r = e, e = i) :s != xe(e, i) && (e = i);
            }
            Pe(t, r, e, n);
        } else Pe(t, e, i || e, n);
        t.curOp.userSelChange = !0;
    }
    function Pe(t, e, i, n, o) {
        t.view.goalColumn = null;
        var r = t.view.sel;
        if ((o || !Ee(e, r.anchor)) && (e = Ae(t, e, n, "push" != o)), (o || !Ee(i, r.head)) && (i = Ae(t, i, n, "push" != o)), 
        !Ee(r.anchor, e) || !Ee(r.head, i)) {
            r.anchor = e, r.head = i;
            var s = xe(i, e);
            r.from = s ? i :e, r.to = s ? e :i, t.curOp.updateInput = !0, t.curOp.selectionChanged = !0;
        }
    }
    function Ne(t) {
        Pe(t, t.view.sel.from, t.view.sel.to, null, "push");
    }
    function Ae(t, e, i, n) {
        var o = t.view.doc, r = !1, s = e, a = i || 1;
        t.view.cantEdit = !1;
        t:for (;;) {
            var l, c = Ii(o, s.line);
            if (c.markedSpans) {
                for (var h = 0; h < c.markedSpans.length; ++h) {
                    var u = c.markedSpans[h], d = u.marker;
                    if ((null == u.from || (d.inclusiveLeft ? u.from <= s.ch :u.from < s.ch)) && (null == u.to || (d.inclusiveRight ? u.to >= s.ch :u.to > s.ch))) {
                        if (n && d.clearOnEnter) {
                            (l || (l = [])).push(d);
                            continue;
                        }
                        if (!d.atomic) continue;
                        var p = d.find()[0 > a ? "from" :"to"];
                        if (Ee(p, s) && (p.ch += a, p.ch < 0 ? p = p.line ? ke(o, {
                            line:p.line - 1
                        }) :null :p.ch > c.text.length && (p = p.line < o.size - 1 ? {
                            line:p.line + 1,
                            ch:0
                        } :null), !p)) {
                            if (r) return n ? (t.view.cantEdit = !0, {
                                line:0,
                                ch:0
                            }) :Ae(t, e, i, !0);
                            r = !0, p = e, a = -a;
                        }
                        s = p;
                        continue t;
                    }
                }
                if (l) for (var h = 0; h < l.length; ++h) l[h].clear();
            }
            return s;
        }
    }
    function Me(t) {
        var e = t.view, i = Le(t, e.sel.head);
        if (e.focused) {
            var n = t.display, o = n.sizer.getBoundingClientRect(), r = null;
            if (i.top + o.top < 0 ? r = !0 :i.bottom + o.top > (window.innerHeight || document.documentElement.clientHeight) && (r = !1), 
            null != r && !Hn) {
                var s = "none" == n.cursor.style.display;
                s && (n.cursor.style.display = "", n.cursor.style.left = i.left + "px", n.cursor.style.top = i.top - n.viewOffset + "px"), 
                n.cursor.scrollIntoView(r), s && (n.cursor.style.display = "none");
            }
        }
    }
    function Le(t, e) {
        for (;;) {
            var i = !1, n = F(t, e), o = ze(t, n.left, n.top, n.left, n.bottom), r = t.view.scrollTop, s = t.view.scrollLeft;
            if (null != o.scrollTop && (le(t, o.scrollTop), Math.abs(t.view.scrollTop - r) > 1 && (i = !0)), 
            null != o.scrollLeft && (ce(t, o.scrollLeft), Math.abs(t.view.scrollLeft - s) > 1 && (i = !0)), 
            !i) return n;
        }
    }
    function Be(t, e, i, n, o) {
        var r = ze(t, e, i, n, o);
        null != r.scrollTop && le(t, r.scrollTop), null != r.scrollLeft && ce(t, r.scrollLeft);
    }
    function ze(t, e, i, n, o) {
        var r = t.display, s = P(r);
        i += s, o += s;
        var a = r.scroller.clientHeight - ho, l = r.scroller.scrollTop, c = {}, h = t.view.doc.height + 2 * s, u = s + 10 > i, d = o + s > h - 10;
        l > i ? c.scrollTop = u ? 0 :Math.max(0, i) :o > l + a && (c.scrollTop = (d ? h :o) - a);
        var p = r.scroller.clientWidth - ho, f = r.scroller.scrollLeft;
        e += r.gutters.offsetWidth, n += r.gutters.offsetWidth;
        var g = r.gutters.offsetWidth, m = g + 10 > e;
        return f + g > e || m ? (m && (e = 0), c.scrollLeft = Math.max(0, e - 10 - g)) :n > p + f - 3 && (c.scrollLeft = n + 10 - p), 
        c;
    }
    function Ke(t, e, i, n) {
        var o = t.view.doc;
        if (i || (i = "add"), "smart" == i) if (t.view.mode.indent) var r = R(t, e); else i = "prev";
        var s, a = t.options.tabSize, l = Ii(o, e), c = Zi(l.text, null, a), h = l.text.match(/^\s*/)[0];
        if ("smart" == i && (s = t.view.mode.indent(r, l.text.slice(h.length), l.text), 
        s == uo)) {
            if (!n) return;
            i = "prev";
        }
        "prev" == i ? s = e ? Zi(Ii(o, e - 1).text, null, a) :0 :"add" == i ? s = c + t.options.indentUnit :"subtract" == i && (s = c - t.options.indentUnit), 
        s = Math.max(0, s);
        var u = "", d = 0;
        if (t.options.indentWithTabs) for (var p = Math.floor(s / a); p; --p) d += a, u += "	";
        s > d && (u += Qi(s - d)), u != h && De(t, u, {
            line:e,
            ch:0
        }, {
            line:e,
            ch:h.length
        }, "input"), l.stateAfter = null;
    }
    function Fe(t, e, i) {
        var n = e, o = e, r = t.view.doc;
        return "number" == typeof e ? o = Ii(r, Oe(r, e)) :n = Pi(e), null == n ? null :i(o, n) ? (q(t, n, n + 1), 
        o) :null;
    }
    function je(t, e, i, n) {
        function o() {
            var t = l + e;
            return 0 > t || t == s.size ? !1 :(l = t, h = Ii(s, t));
        }
        function r(t) {
            var i = (n ? wn :Cn)(h, c, e, !0);
            if (null == i) {
                if (t || !o()) return !1;
                c = n ? (0 > e ? vn :_n)(h) :0 > e ? h.text.length :0;
            } else c = i;
            return !0;
        }
        var s = t.view.doc, a = t.view.sel.head, l = a.line, c = a.ch, h = Ii(s, l);
        if ("char" == i) r(); else if ("column" == i) r(!0); else if ("word" == i) for (var u = !1; !(0 > e) || r(); ) {
            if (sn(h.text.charAt(c))) u = !0; else if (u) {
                0 > e && (e = 1, r());
                break;
            }
            if (e > 0 && !r()) break;
        }
        return Ae(t, {
            line:l,
            ch:c
        }, e, !0);
    }
    function He(t, e) {
        var i = e.ch, n = e.ch;
        if (t) {
            e.after === !1 || n == t.length ? --i :++n;
            for (var o = t.charAt(i), r = sn(o) ? sn :/\s/.test(o) ? function(t) {
                return /\s/.test(t);
            } :function(t) {
                return !/\s/.test(t) && !sn(t);
            }; i > 0 && r(t.charAt(i - 1)); ) --i;
            for (;n < t.length && r(t.charAt(n)); ) ++n;
        }
        return {
            from:{
                line:e.line,
                ch:i
            },
            to:{
                line:e.line,
                ch:n
            }
        };
    }
    function $e(t, e) {
        Re(t, {
            line:e,
            ch:0
        }, ke(t.view.doc, {
            line:e + 1,
            ch:0
        }));
    }
    function Ge(e, i, n, o) {
        t.defaults[e] = i, n && (Qn[e] = o ? function(t, e, i) {
            i != eo && n(t, e, i);
        } :n);
    }
    function Ue(t, e) {
        if (e === !0) return e;
        if (t.copyState) return t.copyState(e);
        var i = {};
        for (var n in e) {
            var o = e[n];
            o instanceof Array && (o = o.concat([])), i[n] = o;
        }
        return i;
    }
    function Ve(t, e, i) {
        return t.startState ? t.startState(e, i) :!0;
    }
    function We(t) {
        return "string" == typeof t ? ao[t] :t;
    }
    function qe(t, e, i, n) {
        function o(e) {
            e = We(e);
            var r = e[t];
            if (r === !1) return n && n(), !0;
            if (null != r && i(r)) return !0;
            if (e.nofallthrough) return n && n(), !0;
            var s = e.fallthrough;
            if (null == s) return !1;
            if ("[object Array]" != Object.prototype.toString.call(s)) return o(s);
            for (var a = 0, l = s.length; l > a; ++a) if (o(s[a])) return !0;
            return !1;
        }
        for (var r = 0; r < e.length; ++r) if (o(e[r])) return !0;
    }
    function Ye(t) {
        var e = To[Ui(t, "keyCode")];
        return "Ctrl" == e || "Alt" == e || "Shift" == e || "Mod" == e;
    }
    function Je(t, e) {
        this.pos = this.start = 0, this.string = t, this.tabSize = e || 8;
    }
    function Xe(t, e) {
        this.lines = [], this.type = e, this.cm = t;
    }
    function Ze(t, e, i, n, o) {
        var r = t.view.doc, s = new Xe(t, o);
        if ("range" == o && !xe(e, i)) return s;
        if (n) for (var a in n) n.hasOwnProperty(a) && (s[a] = n[a]);
        s.replacedWith && (s.collapsed = !0, s.replacedWith = ln("span", [ s.replacedWith ], "CodeMirror-widget")), 
        s.collapsed && (Wn = !0);
        var l, c, h = e.line, u = 0;
        if (r.iter(h, i.line + 1, function(t) {
            var n = {
                from:null,
                to:null,
                marker:s
            };
            u += t.text.length, h == e.line && (n.from = e.ch, u -= e.ch), h == i.line && (n.to = i.ch, 
            u -= t.text.length - i.ch), s.collapsed && (h == i.line && (c = si(t, i.ch)), h == e.line ? l = si(t, e.ch) :Ri(t, 0)), 
            ei(t, n), s.collapsed && h == e.line && hi(t) && Ri(t, 0), ++h;
        }), s.readOnly && (Vn = !0, (t.view.history.done.length || t.view.history.undone.length) && t.clearHistory()), 
        s.collapsed) {
            if (l != c) throw new Error("Inserting collapsed marker overlapping an existing one");
            s.size = u, s.atomic = !0;
        }
        return (s.className || s.startStyle || s.endStyle || s.collapsed) && q(t, e.line, i.line + 1), 
        s.atomic && Ne(t), s;
    }
    function Qe(t, e) {
        if (t) for (var i = 0; i < t.length; ++i) {
            var n = t[i];
            if (n.marker == e) return n;
        }
    }
    function ti(t, e) {
        for (var i, n = 0; n < t.length; ++n) t[n] != e && (i || (i = [])).push(t[n]);
        return i;
    }
    function ei(t, e) {
        t.markedSpans = t.markedSpans ? t.markedSpans.concat([ e ]) :[ e ], e.marker.lines.push(t);
    }
    function ii(t, e) {
        if (t) for (var i, n = 0; n < t.length; ++n) {
            var o = t[n], r = o.marker, s = null == o.from || (r.inclusiveLeft ? o.from <= e :o.from < e);
            if (s || "bookmark" == r.type && o.from == e) {
                var a = null == o.to || (r.inclusiveRight ? o.to >= e :o.to > e);
                (i || (i = [])).push({
                    from:o.from,
                    to:a ? null :o.to,
                    marker:r
                });
            }
        }
        return i;
    }
    function ni(t, e, i) {
        if (t) for (var n, o = 0; o < t.length; ++o) {
            var r = t[o], s = r.marker, a = null == r.to || (s.inclusiveRight ? r.to >= i :r.to > i);
            if (a || "bookmark" == s.type && r.from == i && r.from != e) {
                var l = null == r.from || (s.inclusiveLeft ? r.from <= i :r.from < i);
                (n || (n = [])).push({
                    from:l ? null :r.from - i,
                    to:null == r.to ? null :r.to - i,
                    marker:s
                });
            }
        }
        return n;
    }
    function oi(t, e, i, n, o) {
        if (!t && !e) return o;
        var r = ii(t, i), s = ni(e, i, n), a = 1 == o.length, l = tn(o).length + (a ? i :0);
        if (r) for (var c = 0; c < r.length; ++c) {
            var h = r[c];
            if (null == h.to) {
                var u = Qe(s, h.marker);
                u ? a && (h.to = null == u.to ? null :u.to + l) :h.to = i;
            }
        }
        if (s) for (var c = 0; c < s.length; ++c) {
            var h = s[c];
            if (null != h.to && (h.to += l), null == h.from) {
                var u = Qe(r, h.marker);
                u || (h.from = l, a && (r || (r = [])).push(h));
            } else h.from += l, a && (r || (r = [])).push(h);
        }
        var d = [ fi(o[0], r) ];
        if (!a) {
            var p, f = o.length - 2;
            if (f > 0 && r) for (var c = 0; c < r.length; ++c) null == r[c].to && (p || (p = [])).push({
                from:null,
                to:null,
                marker:r[c].marker
            });
            for (var c = 0; f > c; ++c) d.push(fi(o[c + 1], p));
            d.push(fi(tn(o), s));
        }
        return d;
    }
    function ri(t, e, i) {
        var n = null;
        if (t.iter(e.line, i.line + 1, function(t) {
            if (t.markedSpans) for (var e = 0; e < t.markedSpans.length; ++e) {
                var i = t.markedSpans[e].marker;
                !i.readOnly || n && -1 != nn(n, i) || (n || (n = [])).push(i);
            }
        }), !n) return null;
        for (var o = [ {
            from:e,
            to:i
        } ], r = 0; r < n.length; ++r) for (var s = n[r].find(), a = 0; a < o.length; ++a) {
            var l = o[a];
            if (xe(s.from, l.to) && !xe(s.to, l.from)) {
                var c = [ a, 1 ];
                xe(l.from, s.from) && c.push({
                    from:l.from,
                    to:s.from
                }), xe(s.to, l.to) && c.push({
                    from:s.to,
                    to:l.to
                }), o.splice.apply(o, c), a += c.length - 1;
            }
        }
        return o;
    }
    function si(t, e) {
        var i, n = Wn && t.markedSpans;
        if (n) for (var o, r = 0; r < n.length; ++r) o = n[r], o.marker.collapsed && (null == o.from || o.from < e) && (null == o.to || o.to > e) && (!i || i.width < o.marker.width) && (i = o.marker);
        return i;
    }
    function ai(t) {
        return si(t, -1);
    }
    function li(t) {
        return si(t, t.text.length + 1);
    }
    function ci(t, e) {
        for (var i; i = ai(e); ) e = Ii(t, i.find().from.line);
        return e;
    }
    function hi(t) {
        var e = Wn && t.markedSpans;
        if (e) for (var i, n = 0; n < e.length; ++n) if (i = e[n], i.marker.collapsed) {
            if (null == i.from) return !0;
            if (0 == i.from && i.marker.inclusiveLeft && ui(t, i)) return !0;
        }
    }
    function ui(t, e) {
        if (null == e.to || e.marker.inclusiveRight && e.to == t.text.length) return !0;
        for (var i, n = 0; n < t.markedSpans.length; ++n) if (i = t.markedSpans[n], i.marker.collapsed && i.from == e.to && (i.marker.inclusiveLeft || e.marker.inclusiveRight) && ui(t, i)) return !0;
    }
    function di(t) {
        return "string" == typeof t ? t :t.text;
    }
    function pi(t) {
        if ("string" == typeof t) return null;
        for (var e = t.markedSpans, i = null, n = 0; n < e.length; ++n) e[n].marker.explicitlyCleared ? i || (i = e.slice(0, n)) :i && i.push(e[n]);
        return i ? i.length ? i :null :e;
    }
    function fi(t, e) {
        return e ? {
            text:t,
            markedSpans:e
        } :t;
    }
    function gi(t) {
        var e = t.markedSpans;
        if (e) {
            for (var i = 0; i < e.length; ++i) {
                var n = e[i].marker.lines, o = nn(n, t);
                n.splice(o, 1);
            }
            t.markedSpans = null;
        }
    }
    function mi(t, e) {
        if (e) {
            for (var i = 0; i < e.length; ++i) e[i].marker.lines.push(t);
            t.markedSpans = e;
        }
    }
    function _i(t, e, i) {
        var n = {
            text:t,
            height:i
        };
        return mi(n, e), hi(n) && (n.height = 0), n;
    }
    function vi(t, e, i, n) {
        e.text = i, e.stateAfter = e.styles = null, null != e.order && (e.order = null), 
        gi(e), mi(e, n), hi(e) ? e.height = 0 :e.height || (e.height = $(t.display)), Yi(t, e, "change");
    }
    function yi(t) {
        t.parent = null, gi(t);
    }
    function bi(t, e, i) {
        var n = t.view.mode, o = t.options.flattenSpans, r = !e.styles, s = 0, a = "", l = null, c = new Je(e.text, t.options.tabSize), h = e.styles || (e.styles = []);
        for ("" == e.text && n.blankLine && n.blankLine(i); !c.eol(); ) {
            var u = n.token(c, i), d = c.current();
            if (c.start = c.pos, o && l == u ? a += d :(a && (r = r || s >= h.length || a != h[s] || l != h[s + 1], 
            h[s++] = a, h[s++] = l), a = d, l = u), c.pos > 5e3) break;
        }
        return a && (r = r || s >= h.length || a != h[s] || l != h[s + 1], h[s++] = a, h[s++] = l), 
        c.pos > 5e3 && (h[s++] = e.text.slice(c.pos), h[s++] = null), s != h.length && (h.length = s, 
        r = !0), r;
    }
    function wi(t, e, i) {
        var n = t.view.mode, o = new Je(e.text, t.options.tabSize);
        for ("" == e.text && n.blankLine && n.blankLine(i); !o.eol() && o.pos <= 5e3; ) n.token(o, i), 
        o.start = o.pos;
    }
    function Ci(t) {
        return t ? lo[t] || (lo[t] = "cm-" + t.replace(/ +/g, " cm-")) :null;
    }
    function Ti(t, e, i) {
        for (var n, o, r, s = e, a = !0; n = ai(s); ) a = !1, s = Ii(t.view.doc, n.find().from.line), 
        o || (o = s);
        var l = {
            pre:ln("pre"),
            col:0,
            pos:0,
            display:!i,
            measure:null,
            addedOne:!1,
            cm:t
        };
        s.textClass && (l.pre.className = s.textClass);
        do {
            s.styles || bi(t, s, s.stateAfter = R(t, Pi(s))), l.measure = s == e && i, l.pos = 0, 
            l.addToken = l.measure ? Ei :Di, i && r && s != e && !l.addedOne && (i[0] = l.pre.appendChild(pn(t.display.measure)), 
            l.addedOne = !0);
            var c = Si(s, l);
            r = s == o, c && (s = Ii(t.view.doc, c.to.line), a = !1);
        } while (c);
        return i && !l.addedOne && (i[0] = l.pre.appendChild(a ? ln("span", " ") :pn(t.display.measure))), 
        l.pre.firstChild || hi(e) || l.pre.appendChild(document.createTextNode(" ")), l.pre;
    }
    function Di(t, e, i, n, o) {
        if (e) {
            if (co.test(e)) for (var r = document.createDocumentFragment(), s = 0; ;) {
                co.lastIndex = s;
                var a = co.exec(e), l = a ? a.index - s :e.length - s;
                if (l && (r.appendChild(document.createTextNode(e.slice(s, s + l))), t.col += l), 
                !a) break;
                if (s += l + 1, "	" == a[0]) {
                    var c = t.cm.options.tabSize, h = c - t.col % c;
                    r.appendChild(ln("span", Qi(h), "cm-tab")), t.col += h;
                } else {
                    var u = ln("span", "•", "cm-invalidchar");
                    u.title = "\\u" + a[0].charCodeAt(0).toString(16), r.appendChild(u), t.col += 1;
                }
            } else {
                t.col += e.length;
                var r = document.createTextNode(e);
            }
            if (i || n || o || t.measure) {
                var d = i || "";
                return n && (d += n), o && (d += o), t.pre.appendChild(ln("span", [ r ], d));
            }
            t.pre.appendChild(r);
        }
    }
    function Ei(t, e, i, n, o) {
        for (var r = 0; r < e.length; ++r) r && r < e.length - 1 && t.cm.options.lineWrapping && _o.test(e.slice(r - 1, r + 1)) && t.pre.appendChild(ln("wbr")), 
        t.measure[t.pos++] = Di(t, e.charAt(r), i, 0 == r && n, r == e.length - 1 && o);
        e.length && (t.addedOne = !0);
    }
    function xi(t, e, i) {
        i && (t.display || (i = i.cloneNode(!0)), t.pre.appendChild(i), t.measure && e && (t.measure[t.pos] = i, 
        t.addedOne = !0)), t.pos += e;
    }
    function Si(t, e) {
        var i = t.styles, n = t.markedSpans;
        if (n) for (var o, r, s, a, l, c = t.text, h = c.length, u = 0, d = 0, p = "", f = 0; ;) {
            if (f == u) {
                r = s = a = "", l = null, f = 1/0;
                for (var g = null, m = 0; m < n.length; ++m) {
                    var _ = n[m], v = _.marker;
                    _.from <= u && (null == _.to || _.to > u) ? (null != _.to && f > _.to && (f = _.to, 
                    s = ""), v.className && (r += " " + v.className), v.startStyle && _.from == u && (a += " " + v.startStyle), 
                    v.endStyle && _.to == f && (s += " " + v.endStyle), v.collapsed && (!l || l.marker.width < v.width) && (l = _)) :_.from > u && f > _.from && (f = _.from), 
                    "bookmark" == v.type && _.from == u && v.replacedWith && (g = v.replacedWith);
                }
                if (l && (l.from || 0) == u && (xi(e, (null == l.to ? h :l.to) - u, null != l.from && l.marker.replacedWith), 
                null == l.to)) return l.marker.find();
                g && !l && xi(e, 0, g);
            }
            if (u >= h) break;
            for (var y = Math.min(h, f); ;) {
                if (p) {
                    var b = u + p.length;
                    if (!l) {
                        var w = b > y ? p.slice(0, y - u) :p;
                        e.addToken(e, w, o + r, a, u + w.length == f ? s :"");
                    }
                    if (b >= y) {
                        p = p.slice(y - u), u = y;
                        break;
                    }
                    u = b, a = "";
                }
                p = i[d++], o = Ci(i[d++]);
            }
        } else for (var d = 0; d < i.length; d += 2) e.addToken(e, i[d], Ci(i[d + 1]));
    }
    function Oi(t) {
        this.lines = t, this.parent = null;
        for (var e = 0, i = t.length, n = 0; i > e; ++e) t[e].parent = this, n += t[e].height;
        this.height = n;
    }
    function ki(t) {
        this.children = t;
        for (var e = 0, i = 0, n = 0, o = t.length; o > n; ++n) {
            var r = t[n];
            e += r.chunkSize(), i += r.height, r.parent = this;
        }
        this.size = e, this.height = i, this.parent = null;
    }
    function Ii(t, e) {
        for (;!t.lines; ) for (var i = 0; ;++i) {
            var n = t.children[i], o = n.chunkSize();
            if (o > e) {
                t = n;
                break;
            }
            e -= o;
        }
        return t.lines[e];
    }
    function Ri(t, e) {
        for (var i = e - t.height, n = t; n; n = n.parent) n.height += i;
    }
    function Pi(t) {
        if (null == t.parent) return null;
        for (var e = t.parent, i = nn(e.lines, t), n = e.parent; n; e = n, n = n.parent) for (var o = 0; n.children[o] != e; ++o) i += n.children[o].chunkSize();
        return i;
    }
    function Ni(t, e) {
        var i = 0;
        t:do {
            for (var n = 0, o = t.children.length; o > n; ++n) {
                var r = t.children[n], s = r.height;
                if (s > e) {
                    t = r;
                    continue t;
                }
                e -= s, i += r.chunkSize();
            }
            return i;
        } while (!t.lines);
        for (var n = 0, o = t.lines.length; o > n; ++n) {
            var a = t.lines[n], l = a.height;
            if (l > e) break;
            e -= l;
        }
        return i + n;
    }
    function Ai(t, e) {
        e = ci(t.view.doc, e);
        for (var i = 0, n = e.parent, o = 0; o < n.lines.length; ++o) {
            var r = n.lines[o];
            if (r == e) break;
            i += r.height;
        }
        for (var s = n.parent; s; n = s, s = n.parent) for (var o = 0; o < s.children.length; ++o) {
            var a = s.children[o];
            if (a == n) break;
            i += a.height;
        }
        return i;
    }
    function Mi(t) {
        var e = t.order;
        return null == e && (e = t.order = Do(t.text)), e;
    }
    function Li() {
        return {
            done:[],
            undone:[],
            lastTime:0,
            lastOp:null,
            lastOrigin:null,
            dirtyCounter:0
        };
    }
    function Bi(t, e, i, n, o, r, s, a, l) {
        var c = t.view.history;
        c.undone.length = 0;
        var h = +new Date(), u = tn(c.done);
        if (u && (c.lastOp == t.curOp.id || c.lastOrigin == o && ("input" == o || "delete" == o) && c.lastTime > h - 600)) {
            var d = tn(u.events);
            if (d.start > e + n.length || d.start + d.added < e) u.events.push({
                start:e,
                added:i,
                old:n
            }); else {
                for (var p = Math.max(0, d.start - e), f = Math.max(0, e + n.length - (d.start + d.added)), g = p; g > 0; --g) d.old.unshift(n[g - 1]);
                for (var g = f; g > 0; --g) d.old.push(n[n.length - g]);
                p && (d.start = e), d.added += i - (n.length - p - f);
            }
            u.fromAfter = a, u.toAfter = l;
        } else {
            for (u = {
                events:[ {
                    start:e,
                    added:i,
                    old:n
                } ],
                fromBefore:r,
                toBefore:s,
                fromAfter:a,
                toAfter:l
            }, c.done.push(u); c.done.length > t.options.undoDepth; ) c.done.shift();
            c.dirtyCounter < 0 ? c.dirtyCounter = 0/0 :c.dirtyCounter++;
        }
        c.lastTime = h, c.lastOp = t.curOp.id, c.lastOrigin = o;
    }
    function zi() {
        Hi(this);
    }
    function Ki(t) {
        return t.stop || (t.stop = zi), t;
    }
    function Fi(t) {
        t.preventDefault ? t.preventDefault() :t.returnValue = !1;
    }
    function ji(t) {
        t.stopPropagation ? t.stopPropagation() :t.cancelBubble = !0;
    }
    function Hi(t) {
        Fi(t), ji(t);
    }
    function $i(t) {
        return t.target || t.srcElement;
    }
    function Gi(t) {
        var e = t.which;
        return null == e && (1 & t.button ? e = 1 :2 & t.button ? e = 3 :4 & t.button && (e = 2)), 
        Un && t.ctrlKey && 1 == e && (e = 3), e;
    }
    function Ui(t, e) {
        var i = t.override && t.override.hasOwnProperty(e);
        return i ? t.override[e] :t[e];
    }
    function Vi(t, e, i) {
        if (t.addEventListener) t.addEventListener(e, i, !1); else if (t.attachEvent) t.attachEvent("on" + e, i); else {
            var n = t._handlers || (t._handlers = {}), o = n[e] || (n[e] = []);
            o.push(i);
        }
    }
    function Wi(t, e, i) {
        if (t.removeEventListener) t.removeEventListener(e, i, !1); else if (t.detachEvent) t.detachEvent("on" + e, i); else {
            var n = t._handlers && t._handlers[e];
            if (!n) return;
            for (var o = 0; o < n.length; ++o) if (n[o] == i) {
                n.splice(o, 1);
                break;
            }
        }
    }
    function qi(t, e) {
        var i = t._handlers && t._handlers[e];
        if (i) for (var n = Array.prototype.slice.call(arguments, 2), o = 0; o < i.length; ++o) i[o].apply(null, n);
    }
    function Yi(t, e, i) {
        function n(t) {
            return function() {
                t.apply(null, r);
            };
        }
        var o = e._handlers && e._handlers[i];
        if (o) for (var r = Array.prototype.slice.call(arguments, 3), s = t.curOp && t.curOp.delayedCallbacks, a = 0; a < o.length; ++a) s ? s.push(n(o[a])) :o[a].apply(null, r);
    }
    function Ji(t, e) {
        var i = t._handlers && t._handlers[e];
        return i && i.length > 0;
    }
    function Xi() {
        this.id = null;
    }
    function Zi(t, e, i) {
        null == e && (e = t.search(/[^\s\u00a0]/), -1 == e && (e = t.length));
        for (var n = 0, o = 0; e > n; ++n) "	" == t.charAt(n) ? o += i - o % i :++o;
        return o;
    }
    function Qi(t) {
        for (;po.length <= t; ) po.push(tn(po) + " ");
        return po[t];
    }
    function tn(t) {
        return t[t.length - 1];
    }
    function en(t) {
        $n ? (t.selectionStart = 0, t.selectionEnd = t.value.length) :t.select();
    }
    function nn(t, e) {
        if (t.indexOf) return t.indexOf(e);
        for (var i = 0, n = t.length; n > i; ++i) if (t[i] == e) return i;
        return -1;
    }
    function on(t) {
        for (var e = [], i = 0; t > i; ++i) e.push(void 0);
        return e;
    }
    function rn(t) {
        var e = Array.prototype.slice.call(arguments, 1);
        return function() {
            return t.apply(null, e);
        };
    }
    function sn(t) {
        return /\w/.test(t) || t > "" && (t.toUpperCase() != t.toLowerCase() || fo.test(t));
    }
    function an(t) {
        var e = 0;
        for (var i in t) t.hasOwnProperty(i) && t[i] && ++e;
        return !e;
    }
    function ln(t, e, i, n) {
        var o = document.createElement(t);
        if (i && (o.className = i), n && (o.style.cssText = n), "string" == typeof e) un(o, e); else if (e) for (var r = 0; r < e.length; ++r) o.appendChild(e[r]);
        return o;
    }
    function cn(t) {
        return t.innerHTML = "", t;
    }
    function hn(t, e) {
        return cn(t).appendChild(e);
    }
    function un(t, e) {
        Nn ? (t.innerHTML = "", t.appendChild(document.createTextNode(e))) :t.textContent = e;
    }
    function dn(t) {
        if (null != vo) return vo;
        var e = ln("div", null, null, "width: 50px; height: 50px; overflow-x: scroll");
        return hn(t, e), e.offsetWidth && (vo = e.offsetHeight - e.clientHeight), vo || 0;
    }
    function pn(t) {
        if (null == yo) {
            var e = ln("span", "​");
            hn(t, ln("span", [ e, document.createTextNode("x") ])), 0 != t.firstChild.offsetHeight && (yo = e.offsetWidth <= 1 && e.offsetHeight > 2 && !Pn);
        }
        return yo ? ln("span", "​") :ln("span", " ", null, "display: inline-block; width: 1px; margin-right: -1px");
    }
    function fn(t, e, i, n) {
        if (!t) return n(e, i, "ltr");
        for (var o = 0; o < t.length; ++o) {
            var r = t[o];
            r.from < i && r.to > e && n(Math.max(r.from, e), Math.min(r.to, i), 1 == r.level ? "rtl" :"ltr");
        }
    }
    function gn(t) {
        return t.level % 2 ? t.to :t.from;
    }
    function mn(t) {
        return t.level % 2 ? t.from :t.to;
    }
    function _n(t) {
        var e = Mi(t);
        return e ? gn(e[0]) :0;
    }
    function vn(t) {
        var e = Mi(t);
        return e ? mn(tn(e)) :t.text.length;
    }
    function yn(t, e) {
        var i = Ii(t.view.doc, e), n = ci(t.view.doc, i);
        n != i && (e = Pi(n));
        var o = Mi(n), r = o ? o[0].level % 2 ? vn(n) :_n(n) :0;
        return {
            line:e,
            ch:r
        };
    }
    function bn(t, e) {
        for (var i, n; i = li(n = Ii(t.view.doc, e)); ) e = i.find().to.line;
        var o = Mi(n), r = o ? o[0].level % 2 ? _n(n) :vn(n) :n.text.length;
        return {
            line:e,
            ch:r
        };
    }
    function wn(t, e, i, n) {
        var o = Mi(t);
        if (!o) return Cn(t, e, i, n);
        for (var r = n ? function(e, i) {
            do e += i; while (e > 0 && go.test(t.text.charAt(e)));
            return e;
        } :function(t, e) {
            return t + e;
        }, s = o[0].level, a = 0; a < o.length; ++a) {
            var l = o[a], c = l.level % 2 == s;
            if (l.from < e && l.to > e || c && (l.from == e || l.to == e)) break;
        }
        for (var h = r(e, l.level % 2 ? -i :i); null != h; ) if (l.level % 2 == s) {
            if (!(h < l.from || h > l.to)) break;
            l = o[a += i], h = l && (i > 0 == l.level % 2 ? r(l.to, -1) :r(l.from, 1));
        } else if (h == gn(l)) l = o[--a], h = l && mn(l); else {
            if (h != mn(l)) break;
            l = o[++a], h = l && gn(l);
        }
        return 0 > h || h > t.text.length ? null :h;
    }
    function Cn(t, e, i, n) {
        var o = e + i;
        if (n) for (;o > 0 && go.test(t.text.charAt(o)); ) o += i;
        return 0 > o || o > t.text.length ? null :o;
    }
    var Tn, Dn, En, xn, Sn, On, kn, In = /gecko\/\d/i.test(navigator.userAgent), Rn = /MSIE \d/.test(navigator.userAgent), Pn = /MSIE [1-7]\b/.test(navigator.userAgent), Nn = /MSIE [1-8]\b/.test(navigator.userAgent), An = /WebKit\//.test(navigator.userAgent), Mn = An && /Qt\/\d+\.\d+/.test(navigator.userAgent), Ln = /Chrome\//.test(navigator.userAgent), Bn = /Opera\//.test(navigator.userAgent), zn = /Apple Computer/.test(navigator.vendor), Kn = /KHTML\//.test(navigator.userAgent), Fn = /Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent), jn = /Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent), Hn = /PhantomJS/.test(navigator.userAgent), $n = /AppleWebKit/.test(navigator.userAgent) && /Mobile\/\w+/.test(navigator.userAgent), Gn = $n || /Android|webOS|BlackBerry|Opera Mini|IEMobile/i.test(navigator.userAgent), Un = $n || /Mac/.test(navigator.platform), Vn = !1, Wn = !1, qn = 0, Yn = null;
    Rn ? Yn = -.53 :In ? Yn = 15 :Ln ? Yn = -.7 :zn && (Yn = -1 / 3);
    var Jn, Xn, Zn = null;
    t.prototype = {
        getValue:function(t) {
            var e = [], i = this.view.doc;
            return i.iter(0, i.size, function(t) {
                e.push(t.text);
            }), e.join(t || "\n");
        },
        setValue:W(null, function(t) {
            var e = this.view.doc, i = {
                line:0,
                ch:0
            }, n = Ii(e, e.size - 1).text.length;
            we(this, i, {
                line:e.size - 1,
                ch:n
            }, bo(t), i, i, "setValue");
        }),
        getSelection:function(t) {
            return this.getRange(this.view.sel.from, this.view.sel.to, t);
        },
        replaceSelection:W(null, function(t, e, i) {
            var n = this.view.sel;
            be(this, n.from, n.to, bo(t), e || "around", i);
        }),
        focus:function() {
            window.focus(), Q(this), _e(this), J(this);
        },
        setOption:function(t, e) {
            var i = this.options, n = i[t];
            (i[t] != e || "mode" == t) && (i[t] = e, Qn.hasOwnProperty(t) && W(this, Qn[t])(this, e, n));
        },
        getOption:function(t) {
            return this.options[t];
        },
        getMode:function() {
            return this.view.mode;
        },
        addKeyMap:function(t) {
            this.view.keyMaps.push(t);
        },
        removeKeyMap:function(t) {
            for (var e = this.view.keyMaps, i = 0; i < e.length; ++i) if (("string" == typeof t ? e[i].name :e[i]) == t) return e.splice(i, 1), 
            !0;
        },
        undo:W(null, function() {
            Ce(this, "undo");
        }),
        redo:W(null, function() {
            Ce(this, "redo");
        }),
        indentLine:W(null, function(t, e, i) {
            "string" != typeof e && (e = null == e ? this.options.smartIndent ? "smart" :"prev" :e ? "add" :"subtract"), 
            Ie(this.view.doc, t) && Ke(this, t, e, i);
        }),
        indentSelection:W(null, function(t) {
            var e = this.view.sel;
            if (Ee(e.from, e.to)) return Ke(this, e.from.line, t);
            for (var i = e.to.line - (e.to.ch ? 0 :1), n = e.from.line; i >= n; ++n) Ke(this, n, t);
        }),
        historySize:function() {
            var t = this.view.history;
            return {
                undo:t.done.length,
                redo:t.undone.length
            };
        },
        clearHistory:function() {
            this.view.history = Li();
        },
        markClean:function() {
            this.view.history.dirtyCounter = 0, this.view.history.lastOp = this.view.history.lastOrigin = null;
        },
        isClean:function() {
            return 0 == this.view.history.dirtyCounter;
        },
        getHistory:function() {
            function t(t) {
                for (var e, i = 0, n = []; i < t.length; ++i) {
                    var o = t[i];
                    n.push({
                        events:e = [],
                        fromBefore:o.fromBefore,
                        toBefore:o.toBefore,
                        fromAfter:o.fromAfter,
                        toAfter:o.toAfter
                    });
                    for (var r = 0, s = o.events; r < s.length; ++r) {
                        var a = [], l = s[r];
                        e.push({
                            start:l.start,
                            added:l.added,
                            old:a
                        });
                        for (var c = 0; c < l.old.length; ++c) a.push(di(l.old[c]));
                    }
                }
                return n;
            }
            var e = this.view.history;
            return {
                done:t(e.done),
                undone:t(e.undone)
            };
        },
        setHistory:function(t) {
            var e = this.view.history = Li();
            e.done = t.done, e.undone = t.undone;
        },
        getTokenAt:function(t) {
            var e = this.view.doc;
            t = ke(e, t);
            for (var i = R(this, t.line), n = this.view.mode, o = Ii(e, t.line), r = new Je(o.text, this.options.tabSize); r.pos < t.ch && !r.eol(); ) {
                r.start = r.pos;
                var s = n.token(r, i);
            }
            return {
                start:r.start,
                end:r.pos,
                string:r.current(),
                className:s || null,
                type:s || null,
                state:i
            };
        },
        getStateAfter:function(t) {
            var e = this.view.doc;
            return t = Oe(e, null == t ? e.size - 1 :t), R(this, t + 1);
        },
        cursorCoords:function(t, e) {
            var i, n = this.view.sel;
            return i = null == t ? n.head :"object" == typeof t ? ke(this.view.doc, t) :t ? n.from :n.to, 
            F(this, i, e || "page");
        },
        charCoords:function(t, e) {
            return K(this, ke(this.view.doc, t), e || "page");
        },
        coordsChar:function(t) {
            var e = this.display.lineSpace.getBoundingClientRect();
            return j(this, t.left - e.left, t.top - e.top);
        },
        defaultTextHeight:function() {
            return $(this.display);
        },
        markText:W(null, function(t, e, i) {
            return Ze(this, ke(this.view.doc, t), ke(this.view.doc, e), i, "range");
        }),
        setBookmark:W(null, function(t, e) {
            return t = ke(this.view.doc, t), Ze(this, t, t, e ? {
                replacedWith:e
            } :{}, "bookmark");
        }),
        findMarksAt:function(t) {
            var e = this.view.doc;
            t = ke(e, t);
            var i = [], n = Ii(e, t.line).markedSpans;
            if (n) for (var o = 0; o < n.length; ++o) {
                var r = n[o];
                (null == r.from || r.from <= t.ch) && (null == r.to || r.to >= t.ch) && i.push(r.marker);
            }
            return i;
        },
        setGutterMarker:W(null, function(t, e, i) {
            return Fe(this, t, function(t) {
                var n = t.gutterMarkers || (t.gutterMarkers = {});
                return n[e] = i, !i && an(n) && (t.gutterMarkers = null), !0;
            });
        }),
        clearGutter:W(null, function(t) {
            var e = 0, i = this, n = i.view.doc;
            n.iter(0, n.size, function(n) {
                n.gutterMarkers && n.gutterMarkers[t] && (n.gutterMarkers[t] = null, q(i, e, e + 1), 
                an(n.gutterMarkers) && (n.gutterMarkers = null)), ++e;
            });
        }),
        addLineClass:W(null, function(t, e, i) {
            return Fe(this, t, function(t) {
                var n = "text" == e ? "textClass" :"background" == e ? "bgClass" :"wrapClass";
                if (t[n]) {
                    if (new RegExp("\\b" + i + "\\b").test(t[n])) return !1;
                    t[n] += " " + i;
                } else t[n] = i;
                return !0;
            });
        }),
        removeLineClass:W(null, function(t, e, i) {
            return Fe(this, t, function(t) {
                var n = "text" == e ? "textClass" :"background" == e ? "bgClass" :"wrapClass", o = t[n];
                if (!o) return !1;
                if (null == i) t[n] = null; else {
                    var r = o.replace(new RegExp("^" + i + "\\b\\s*|\\s*\\b" + i + "\\b"), "");
                    if (r == o) return !1;
                    t[n] = r || null;
                }
                return !0;
            });
        }),
        addLineWidget:W(null, function(t, e, i) {
            var n = i || {};
            return n.node = e, n.noHScroll && (this.display.alignWidgets = !0), Fe(this, t, function(t) {
                return (t.widgets || (t.widgets = [])).push(n), n.line = t, !0;
            }), n;
        }),
        removeLineWidget:W(null, function(t) {
            var e = t.line.widgets, i = Pi(t.line);
            if (null != i) {
                for (var n = 0; n < e.length; ++n) e[n] == t && e.splice(n--, 1);
                q(this, i, i + 1);
            }
        }),
        lineInfo:function(t) {
            if ("number" == typeof t) {
                if (!Ie(this.view.doc, t)) return null;
                var e = t;
                if (t = Ii(this.view.doc, t), !t) return null;
            } else {
                var e = Pi(t);
                if (null == e) return null;
            }
            return {
                line:e,
                handle:t,
                text:t.text,
                gutterMarkers:t.gutterMarkers,
                textClass:t.textClass,
                bgClass:t.bgClass,
                wrapClass:t.wrapClass,
                widgets:t.widgets
            };
        },
        getViewport:function() {
            return {
                from:this.display.showingFrom,
                to:this.display.showingTo
            };
        },
        addWidget:function(t, e, i, n, o) {
            var r = this.display;
            t = F(this, ke(this.view.doc, t));
            var s = t.top, a = t.left;
            if (e.style.position = "absolute", r.sizer.appendChild(e), "over" == n) s = t.top; else if ("near" == n) {
                var l = Math.max(r.wrapper.clientHeight, this.view.doc.height), c = Math.max(r.sizer.clientWidth, r.lineSpace.clientWidth);
                t.bottom + e.offsetHeight > l && t.top > e.offsetHeight && (s = t.top - e.offsetHeight), 
                a + e.offsetWidth > c && (a = c - e.offsetWidth);
            }
            e.style.top = s + P(r) + "px", e.style.left = e.style.right = "", "right" == o ? (a = r.sizer.clientWidth - e.offsetWidth, 
            e.style.right = "0px") :("left" == o ? a = 0 :"middle" == o && (a = (r.sizer.clientWidth - e.offsetWidth) / 2), 
            e.style.left = a + "px"), i && Be(this, a, s, a + e.offsetWidth, s + e.offsetHeight);
        },
        lineCount:function() {
            return this.view.doc.size;
        },
        clipPos:function(t) {
            return ke(this.view.doc, t);
        },
        getCursor:function(t) {
            var e, i = this.view.sel;
            return e = null == t || "head" == t ? i.head :"anchor" == t ? i.anchor :"end" == t || t === !1 ? i.to :i.from, 
            Se(e);
        },
        somethingSelected:function() {
            return !Ee(this.view.sel.from, this.view.sel.to);
        },
        setCursor:W(null, function(t, e, i) {
            var n = ke(this.view.doc, "number" == typeof t ? {
                line:t,
                ch:e || 0
            } :t);
            i ? Re(this, n) :Pe(this, n, n);
        }),
        setSelection:W(null, function(t, e) {
            var i = this.view.doc;
            Pe(this, ke(i, t), ke(i, e || t));
        }),
        extendSelection:W(null, function(t, e) {
            var i = this.view.doc;
            Re(this, ke(i, t), e && ke(i, e));
        }),
        setExtending:function(t) {
            this.view.sel.extend = t;
        },
        getLine:function(t) {
            var e = this.getLineHandle(t);
            return e && e.text;
        },
        getLineHandle:function(t) {
            var e = this.view.doc;
            return Ie(e, t) ? Ii(e, t) :void 0;
        },
        getLineNumber:function(t) {
            return Pi(t);
        },
        setLine:W(null, function(t, e) {
            Ie(this.view.doc, t) && De(this, e, {
                line:t,
                ch:0
            }, {
                line:t,
                ch:Ii(this.view.doc, t).text.length
            });
        }),
        removeLine:W(null, function(t) {
            Ie(this.view.doc, t) && De(this, "", {
                line:t,
                ch:0
            }, ke(this.view.doc, {
                line:t + 1,
                ch:0
            }));
        }),
        replaceRange:W(null, function(t, e, i) {
            var n = this.view.doc;
            return e = ke(n, e), i = i ? ke(n, i) :e, De(this, t, e, i);
        }),
        getRange:function(t, e, i) {
            var n = this.view.doc;
            t = ke(n, t), e = ke(n, e);
            var o = t.line, r = e.line;
            if (o == r) return Ii(n, o).text.slice(t.ch, e.ch);
            var s = [ Ii(n, o).text.slice(t.ch) ];
            return n.iter(o + 1, r, function(t) {
                s.push(t.text);
            }), s.push(Ii(n, r).text.slice(0, e.ch)), s.join(i || "\n");
        },
        triggerOnKeyDown:W(null, ge),
        execCommand:function(t) {
            return so[t](this);
        },
        moveH:W(null, function(t, e) {
            var i = this.view.sel, n = 0 > t ? i.from :i.to;
            (i.shift || i.extend || Ee(i.from, i.to)) && (n = je(this, t, e, !0)), Re(this, n, n, t);
        }),
        deleteH:W(null, function(t, e) {
            var i = this.view.sel;
            Ee(i.from, i.to) ? De(this, "", i.from, je(this, t, e, !1), "delete") :De(this, "", i.from, i.to, "delete"), 
            this.curOp.userSelChange = !0;
        }),
        moveV:W(null, function(t, e) {
            var i, n = this.view, o = n.doc, r = this.display, s = n.sel.head, a = F(this, s, "div"), l = a.left;
            if (null != n.goalColumn && (l = n.goalColumn), "page" == e) {
                var c = Math.min(r.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);
                i = a.top + t * c;
            } else "line" == e && (i = t > 0 ? a.bottom + 3 :a.top - 3);
            do {
                var h = j(this, l, i);
                i += 5 * t;
            } while (h.outside && (0 > t ? i > 0 :i < o.height));
            "page" == e && (r.scrollbarV.scrollTop += K(this, h, "div").top - a.top), Re(this, h, h, t), 
            n.goalColumn = l;
        }),
        toggleOverwrite:function() {
            (this.view.overwrite = !this.view.overwrite) ? this.display.cursor.className += " CodeMirror-overwrite" :this.display.cursor.className = this.display.cursor.className.replace(" CodeMirror-overwrite", "");
        },
        posFromIndex:function(t) {
            var e, i = 0, n = this.view.doc;
            return n.iter(0, n.size, function(n) {
                var o = n.text.length + 1;
                return o > t ? (e = t, !0) :(t -= o, ++i, void 0);
            }), ke(n, {
                line:i,
                ch:e
            });
        },
        indexFromPos:function(t) {
            if (t.line < 0 || t.ch < 0) return 0;
            var e = t.ch;
            return this.view.doc.iter(0, t.line, function(t) {
                e += t.text.length + 1;
            }), e;
        },
        scrollTo:function(t, e) {
            null != t && (this.display.scrollbarH.scrollLeft = this.display.scroller.scrollLeft = t), 
            null != e && (this.display.scrollbarV.scrollTop = this.display.scroller.scrollTop = e), 
            v(this, []);
        },
        getScrollInfo:function() {
            var t = this.display.scroller, e = ho;
            return {
                left:t.scrollLeft,
                top:t.scrollTop,
                height:t.scrollHeight - e,
                width:t.scrollWidth - e,
                clientHeight:t.clientHeight - e,
                clientWidth:t.clientWidth - e
            };
        },
        scrollIntoView:function(t) {
            "number" == typeof t && (t = {
                line:t,
                ch:0
            }), t = t ? ke(this.view.doc, t) :this.view.sel.head, Le(this, t);
        },
        setSize:function(t, e) {
            function i(t) {
                return "number" == typeof t || /^\d+$/.test(String(t)) ? t + "px" :t;
            }
            null != t && (this.display.wrapper.style.width = i(t)), null != e && (this.display.wrapper.style.height = i(e)), 
            this.refresh();
        },
        on:function(t, e) {
            Vi(this, t, e);
        },
        off:function(t, e) {
            Wi(this, t, e);
        },
        operation:function(t) {
            return W(this, t)();
        },
        refresh:function() {
            B(this), this.display.scroller.scrollHeight > this.view.scrollTop && (this.display.scrollbarV.scrollTop = this.display.scroller.scrollTop = this.view.scrollTop), 
            v(this, !0);
        },
        getInputField:function() {
            return this.display.input;
        },
        getWrapperElement:function() {
            return this.display.wrapper;
        },
        getScrollerElement:function() {
            return this.display.scroller;
        },
        getGutterElement:function() {
            return this.display.gutters;
        }
    };
    var Qn = t.optionHandlers = {}, to = t.defaults = {}, eo = t.Init = {
        toString:function() {
            return "CodeMirror.Init";
        }
    };
    Ge("value", "", function(t, e) {
        t.setValue(e);
    }, !0), Ge("mode", null, n, !0), Ge("indentUnit", 2, n, !0), Ge("indentWithTabs", !1), 
    Ge("smartIndent", !0), Ge("tabSize", 4, function(t) {
        n(t), B(t), v(t, !0);
    }, !0), Ge("electricChars", !0), Ge("theme", "default", function(t) {
        s(t), a(t);
    }, !0), Ge("keyMap", "default", r), Ge("extraKeys", null), Ge("onKeyEvent", null), 
    Ge("onDragEvent", null), Ge("lineWrapping", !1, o, !0), Ge("gutters", [], function(t) {
        u(t.options), a(t);
    }, !0), Ge("lineNumbers", !1, function(t) {
        u(t.options), a(t);
    }, !0), Ge("firstLineNumber", 1, a, !0), Ge("lineNumberFormatter", function(t) {
        return t;
    }, a, !0), Ge("showCursorWhenSelecting", !1, D, !0), Ge("readOnly", !1, function(t, e) {
        "nocursor" == e ? (ve(t), t.display.input.blur()) :e || Z(t, !0);
    }), Ge("dragDrop", !0), Ge("cursorBlinkRate", 530), Ge("cursorHeight", 1), Ge("workTime", 100), 
    Ge("workDelay", 100), Ge("flattenSpans", !0), Ge("pollInterval", 100), Ge("undoDepth", 40), 
    Ge("viewportMargin", 10, function(t) {
        t.refresh();
    }, !0), Ge("tabindex", null, function(t, e) {
        t.display.input.tabIndex = e || "";
    }), Ge("autofocus", null);
    var io = t.modes = {}, no = t.mimeModes = {};
    t.defineMode = function(e, i) {
        if (t.defaults.mode || "null" == e || (t.defaults.mode = e), arguments.length > 2) {
            i.dependencies = [];
            for (var n = 2; n < arguments.length; ++n) i.dependencies.push(arguments[n]);
        }
        io[e] = i;
    }, t.defineMIME = function(t, e) {
        no[t] = e;
    }, t.resolveMode = function(e) {
        if ("string" == typeof e && no.hasOwnProperty(e)) e = no[e]; else if ("string" == typeof e && /^[\w\-]+\/[\w\-]+\+xml$/.test(e)) return t.resolveMode("application/xml");
        return "string" == typeof e ? {
            name:e
        } :e || {
            name:"null"
        };
    }, t.getMode = function(e, i) {
        var i = t.resolveMode(i), n = io[i.name];
        if (!n) return t.getMode(e, "text/plain");
        var o = n(e, i);
        if (oo.hasOwnProperty(i.name)) {
            var r = oo[i.name];
            for (var s in r) r.hasOwnProperty(s) && (o.hasOwnProperty(s) && (o["_" + s] = o[s]), 
            o[s] = r[s]);
        }
        return o.name = i.name, o;
    }, t.defineMode("null", function() {
        return {
            token:function(t) {
                t.skipToEnd();
            }
        };
    }), t.defineMIME("text/plain", "null");
    var oo = t.modeExtensions = {};
    t.extendMode = function(t, e) {
        var i = oo.hasOwnProperty(t) ? oo[t] :oo[t] = {};
        for (var n in e) e.hasOwnProperty(n) && (i[n] = e[n]);
    }, t.defineExtension = function(e, i) {
        t.prototype[e] = i;
    }, t.defineOption = Ge;
    var ro = [];
    t.defineInitHook = function(t) {
        ro.push(t);
    }, t.copyState = Ue, t.startState = Ve, t.innerMode = function(t, e) {
        for (;t.innerMode; ) {
            var i = t.innerMode(e);
            e = i.state, t = i.mode;
        }
        return i || {
            mode:t,
            state:e
        };
    };
    var so = t.commands = {
        selectAll:function(t) {
            t.setSelection({
                line:0,
                ch:0
            }, {
                line:t.lineCount() - 1
            });
        },
        killLine:function(t) {
            var e = t.getCursor(!0), i = t.getCursor(!1), n = !Ee(e, i);
            n || t.getLine(e.line).length != e.ch ? t.replaceRange("", e, n ? i :{
                line:e.line
            }, "delete") :t.replaceRange("", e, {
                line:e.line + 1,
                ch:0
            }, "delete");
        },
        deleteLine:function(t) {
            var e = t.getCursor().line;
            t.replaceRange("", {
                line:e,
                ch:0
            }, {
                line:e
            }, "delete");
        },
        undo:function(t) {
            t.undo();
        },
        redo:function(t) {
            t.redo();
        },
        goDocStart:function(t) {
            t.extendSelection({
                line:0,
                ch:0
            });
        },
        goDocEnd:function(t) {
            t.extendSelection({
                line:t.lineCount() - 1
            });
        },
        goLineStart:function(t) {
            t.extendSelection(yn(t, t.getCursor().line));
        },
        goLineStartSmart:function(t) {
            var e = t.getCursor(), i = yn(t, e.line), n = t.getLineHandle(i.line), o = Mi(n);
            if (o && 0 != o[0].level) t.extendSelection(i); else {
                var r = Math.max(0, n.text.search(/\S/)), s = e.line == i.line && e.ch <= r && e.ch;
                t.extendSelection({
                    line:i.line,
                    ch:s ? 0 :r
                });
            }
        },
        goLineEnd:function(t) {
            t.extendSelection(bn(t, t.getCursor().line));
        },
        goLineUp:function(t) {
            t.moveV(-1, "line");
        },
        goLineDown:function(t) {
            t.moveV(1, "line");
        },
        goPageUp:function(t) {
            t.moveV(-1, "page");
        },
        goPageDown:function(t) {
            t.moveV(1, "page");
        },
        goCharLeft:function(t) {
            t.moveH(-1, "char");
        },
        goCharRight:function(t) {
            t.moveH(1, "char");
        },
        goColumnLeft:function(t) {
            t.moveH(-1, "column");
        },
        goColumnRight:function(t) {
            t.moveH(1, "column");
        },
        goWordLeft:function(t) {
            t.moveH(-1, "word");
        },
        goWordRight:function(t) {
            t.moveH(1, "word");
        },
        delCharBefore:function(t) {
            t.deleteH(-1, "char");
        },
        delCharAfter:function(t) {
            t.deleteH(1, "char");
        },
        delWordBefore:function(t) {
            t.deleteH(-1, "word");
        },
        delWordAfter:function(t) {
            t.deleteH(1, "word");
        },
        indentAuto:function(t) {
            t.indentSelection("smart");
        },
        indentMore:function(t) {
            t.indentSelection("add");
        },
        indentLess:function(t) {
            t.indentSelection("subtract");
        },
        insertTab:function(t) {
            t.replaceSelection("	", "end", "input");
        },
        defaultTab:function(t) {
            t.somethingSelected() ? t.indentSelection("add") :t.replaceSelection("	", "end", "input");
        },
        transposeChars:function(t) {
            var e = t.getCursor(), i = t.getLine(e.line);
            e.ch > 0 && e.ch < i.length - 1 && t.replaceRange(i.charAt(e.ch) + i.charAt(e.ch - 1), {
                line:e.line,
                ch:e.ch - 1
            }, {
                line:e.line,
                ch:e.ch + 1
            });
        },
        newlineAndIndent:function(t) {
            W(t, function() {
                t.replaceSelection("\n", "end", "input"), t.indentLine(t.getCursor().line, null, !0);
            })();
        },
        toggleOverwrite:function(t) {
            t.toggleOverwrite();
        }
    }, ao = t.keyMap = {};
    ao.basic = {
        Left:"goCharLeft",
        Right:"goCharRight",
        Up:"goLineUp",
        Down:"goLineDown",
        End:"goLineEnd",
        Home:"goLineStartSmart",
        PageUp:"goPageUp",
        PageDown:"goPageDown",
        Delete:"delCharAfter",
        Backspace:"delCharBefore",
        Tab:"defaultTab",
        "Shift-Tab":"indentAuto",
        Enter:"newlineAndIndent",
        Insert:"toggleOverwrite"
    }, ao.pcDefault = {
        "Ctrl-A":"selectAll",
        "Ctrl-D":"deleteLine",
        "Ctrl-Z":"undo",
        "Shift-Ctrl-Z":"redo",
        "Ctrl-Y":"redo",
        "Ctrl-Home":"goDocStart",
        "Alt-Up":"goDocStart",
        "Ctrl-End":"goDocEnd",
        "Ctrl-Down":"goDocEnd",
        "Ctrl-Left":"goWordLeft",
        "Ctrl-Right":"goWordRight",
        "Alt-Left":"goLineStart",
        "Alt-Right":"goLineEnd",
        "Ctrl-Backspace":"delWordBefore",
        "Ctrl-Delete":"delWordAfter",
        "Ctrl-S":"save",
        "Ctrl-F":"find",
        "Ctrl-G":"findNext",
        "Shift-Ctrl-G":"findPrev",
        "Shift-Ctrl-F":"replace",
        "Shift-Ctrl-R":"replaceAll",
        "Ctrl-[":"indentLess",
        "Ctrl-]":"indentMore",
        fallthrough:"basic"
    }, ao.macDefault = {
        "Cmd-A":"selectAll",
        "Cmd-D":"deleteLine",
        "Cmd-Z":"undo",
        "Shift-Cmd-Z":"redo",
        "Cmd-Y":"redo",
        "Cmd-Up":"goDocStart",
        "Cmd-End":"goDocEnd",
        "Cmd-Down":"goDocEnd",
        "Alt-Left":"goWordLeft",
        "Alt-Right":"goWordRight",
        "Cmd-Left":"goLineStart",
        "Cmd-Right":"goLineEnd",
        "Alt-Backspace":"delWordBefore",
        "Ctrl-Alt-Backspace":"delWordAfter",
        "Alt-Delete":"delWordAfter",
        "Cmd-S":"save",
        "Cmd-F":"find",
        "Cmd-G":"findNext",
        "Shift-Cmd-G":"findPrev",
        "Cmd-Alt-F":"replace",
        "Shift-Cmd-Alt-F":"replaceAll",
        "Cmd-[":"indentLess",
        "Cmd-]":"indentMore",
        fallthrough:[ "basic", "emacsy" ]
    }, ao["default"] = Un ? ao.macDefault :ao.pcDefault, ao.emacsy = {
        "Ctrl-F":"goCharRight",
        "Ctrl-B":"goCharLeft",
        "Ctrl-P":"goLineUp",
        "Ctrl-N":"goLineDown",
        "Alt-F":"goWordRight",
        "Alt-B":"goWordLeft",
        "Ctrl-A":"goLineStart",
        "Ctrl-E":"goLineEnd",
        "Ctrl-V":"goPageDown",
        "Shift-Ctrl-V":"goPageUp",
        "Ctrl-D":"delCharAfter",
        "Ctrl-H":"delCharBefore",
        "Alt-D":"delWordAfter",
        "Alt-Backspace":"delWordBefore",
        "Ctrl-K":"killLine",
        "Ctrl-T":"transposeChars"
    }, t.isModifierKey = Ye, t.fromTextArea = function(e, i) {
        function n() {
            e.value = l.getValue();
        }
        if (i || (i = {}), i.value = e.value, !i.tabindex && e.tabindex && (i.tabindex = e.tabindex), 
        null == i.autofocus) {
            var o = document.body;
            try {
                o = document.activeElement;
            } catch (r) {}
            i.autofocus = o == e || null != e.getAttribute("autofocus") && o == document.body;
        }
        if (e.form) {
            Vi(e.form, "submit", n);
            var s = e.form, a = s.submit;
            try {
                s.submit = function c() {
                    n(), s.submit = a, s.submit(), s.submit = c;
                };
            } catch (r) {}
        }
        e.style.display = "none";
        var l = t(function(t) {
            e.parentNode.insertBefore(t, e.nextSibling);
        }, i);
        return l.save = n, l.getTextArea = function() {
            return e;
        }, l.toTextArea = function() {
            n(), e.parentNode.removeChild(l.getWrapperElement()), e.style.display = "", e.form && (Wi(e.form, "submit", n), 
            "function" == typeof e.form.submit && (e.form.submit = a));
        }, l;
    }, Je.prototype = {
        eol:function() {
            return this.pos >= this.string.length;
        },
        sol:function() {
            return 0 == this.pos;
        },
        peek:function() {
            return this.string.charAt(this.pos) || void 0;
        },
        next:function() {
            return this.pos < this.string.length ? this.string.charAt(this.pos++) :void 0;
        },
        eat:function(t) {
            var e = this.string.charAt(this.pos);
            if ("string" == typeof t) var i = e == t; else var i = e && (t.test ? t.test(e) :t(e));
            return i ? (++this.pos, e) :void 0;
        },
        eatWhile:function(t) {
            for (var e = this.pos; this.eat(t); ) ;
            return this.pos > e;
        },
        eatSpace:function() {
            for (var t = this.pos; /[\s\u00a0]/.test(this.string.charAt(this.pos)); ) ++this.pos;
            return this.pos > t;
        },
        skipToEnd:function() {
            this.pos = this.string.length;
        },
        skipTo:function(t) {
            var e = this.string.indexOf(t, this.pos);
            return e > -1 ? (this.pos = e, !0) :void 0;
        },
        backUp:function(t) {
            this.pos -= t;
        },
        column:function() {
            return Zi(this.string, this.start, this.tabSize);
        },
        indentation:function() {
            return Zi(this.string, null, this.tabSize);
        },
        match:function(t, e, i) {
            if ("string" != typeof t) {
                var n = this.string.slice(this.pos).match(t);
                return n && n.index > 0 ? null :(n && e !== !1 && (this.pos += n[0].length), n);
            }
            var o = function(t) {
                return i ? t.toLowerCase() :t;
            };
            return o(this.string).indexOf(o(t), this.pos) == this.pos ? (e !== !1 && (this.pos += t.length), 
            !0) :void 0;
        },
        current:function() {
            return this.string.slice(this.start, this.pos);
        }
    }, t.StringStream = Je, Xe.prototype.clear = function() {
        if (!this.explicitlyCleared) {
            U(this.cm);
            for (var t = null, e = null, i = 0; i < this.lines.length; ++i) {
                var n = this.lines[i], o = Qe(n.markedSpans, this);
                null != o.to && (e = Pi(n)), n.markedSpans = ti(n.markedSpans, o), null != o.from ? t = Pi(n) :this.collapsed && !hi(n) && Ri(n, $(this.cm.display));
            }
            null != t && q(this.cm, t, e + 1), this.lines.length = 0, this.explicitlyCleared = !0, 
            this.collapsed && this.cm.view.cantEdit && (this.cm.view.cantEdit = !1, Ne(this.cm)), 
            V(this.cm), Yi(this.cm, this, "clear");
        }
    }, Xe.prototype.find = function() {
        for (var t, e, i = 0; i < this.lines.length; ++i) {
            var n = this.lines[i], o = Qe(n.markedSpans, this);
            if (null != o.from || null != o.to) {
                var r = Pi(n);
                null != o.from && (t = {
                    line:r,
                    ch:o.from
                }), null != o.to && (e = {
                    line:r,
                    ch:o.to
                });
            }
        }
        return "bookmark" == this.type ? t :t && {
            from:t,
            to:e
        };
    }, window.lineIsHidden = hi;
    var lo = {}, co = /[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g;
    Oi.prototype = {
        chunkSize:function() {
            return this.lines.length;
        },
        remove:function(t, e, i) {
            for (var n = t, o = t + e; o > n; ++n) {
                var r = this.lines[n];
                this.height -= r.height, yi(r), Yi(i, r, "delete");
            }
            this.lines.splice(t, e);
        },
        collapse:function(t) {
            t.splice.apply(t, [ t.length, 0 ].concat(this.lines));
        },
        insertHeight:function(t, e, i) {
            this.height += i, this.lines = this.lines.slice(0, t).concat(e).concat(this.lines.slice(t));
            for (var n = 0, o = e.length; o > n; ++n) e[n].parent = this;
        },
        iterN:function(t, e, i) {
            for (var n = t + e; n > t; ++t) if (i(this.lines[t])) return !0;
        }
    }, ki.prototype = {
        chunkSize:function() {
            return this.size;
        },
        remove:function(t, e, i) {
            this.size -= e;
            for (var n = 0; n < this.children.length; ++n) {
                var o = this.children[n], r = o.chunkSize();
                if (r > t) {
                    var s = Math.min(e, r - t), a = o.height;
                    if (o.remove(t, s, i), this.height -= a - o.height, r == s && (this.children.splice(n--, 1), 
                    o.parent = null), 0 == (e -= s)) break;
                    t = 0;
                } else t -= r;
            }
            if (this.size - e < 25) {
                var l = [];
                this.collapse(l), this.children = [ new Oi(l) ], this.children[0].parent = this;
            }
        },
        collapse:function(t) {
            for (var e = 0, i = this.children.length; i > e; ++e) this.children[e].collapse(t);
        },
        insert:function(t, e) {
            for (var i = 0, n = 0, o = e.length; o > n; ++n) i += e[n].height;
            this.insertHeight(t, e, i);
        },
        insertHeight:function(t, e, i) {
            this.size += e.length, this.height += i;
            for (var n = 0, o = this.children.length; o > n; ++n) {
                var r = this.children[n], s = r.chunkSize();
                if (s >= t) {
                    if (r.insertHeight(t, e, i), r.lines && r.lines.length > 50) {
                        for (;r.lines.length > 50; ) {
                            var a = r.lines.splice(r.lines.length - 25, 25), l = new Oi(a);
                            r.height -= l.height, this.children.splice(n + 1, 0, l), l.parent = this;
                        }
                        this.maybeSpill();
                    }
                    break;
                }
                t -= s;
            }
        },
        maybeSpill:function() {
            if (!(this.children.length <= 10)) {
                var t = this;
                do {
                    var e = t.children.splice(t.children.length - 5, 5), i = new ki(e);
                    if (t.parent) {
                        t.size -= i.size, t.height -= i.height;
                        var n = nn(t.parent.children, t);
                        t.parent.children.splice(n + 1, 0, i);
                    } else {
                        var o = new ki(t.children);
                        o.parent = t, t.children = [ o, i ], t = o;
                    }
                    i.parent = t.parent;
                } while (t.children.length > 10);
                t.parent.maybeSpill();
            }
        },
        iter:function(t, e, i) {
            this.iterN(t, e - t, i);
        },
        iterN:function(t, e, i) {
            for (var n = 0, o = this.children.length; o > n; ++n) {
                var r = this.children[n], s = r.chunkSize();
                if (s > t) {
                    var a = Math.min(e, s - t);
                    if (r.iterN(t, a, i)) return !0;
                    if (0 == (e -= a)) break;
                    t = 0;
                } else t -= s;
            }
        }
    }, t.e_stop = Hi, t.e_preventDefault = Fi, t.e_stopPropagation = ji, t.on = Vi, 
    t.off = Wi, t.signal = qi;
    var ho = 30, uo = t.Pass = {
        toString:function() {
            return "CodeMirror.Pass";
        }
    };
    Xi.prototype = {
        set:function(t, e) {
            clearTimeout(this.id), this.id = setTimeout(e, t);
        }
    }, t.countColumn = Zi;
    var po = [ "" ], fo = /[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/, go = /[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F]/, mo = function() {
        if (Nn) return !1;
        var t = ln("div");
        return "draggable" in t || "dragDrop" in t;
    }(), _o = /^$/;
    In ? _o = /$'/ :zn ? _o = /\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/ :Ln && (_o = /\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);
    var vo, yo, bo = 3 != "\n\nb".split(/\n/).length ? function(t) {
        for (var e = 0, i = [], n = t.length; n >= e; ) {
            var o = t.indexOf("\n", e);
            -1 == o && (o = t.length);
            var r = t.slice(e, "\r" == t.charAt(o - 1) ? o - 1 :o), s = r.indexOf("\r");
            -1 != s ? (i.push(r.slice(0, s)), e += s + 1) :(i.push(r), e = o + 1);
        }
        return i;
    } :function(t) {
        return t.split(/\r\n?|\n/);
    };
    t.splitLines = bo;
    var wo = window.getSelection ? function(t) {
        try {
            return t.selectionStart != t.selectionEnd;
        } catch (e) {
            return !1;
        }
    } :function(t) {
        try {
            var e = t.ownerDocument.selection.createRange();
        } catch (i) {}
        return e && e.parentElement() == t ? 0 != e.compareEndPoints("StartToEnd", e) :!1;
    }, Co = function() {
        var t = ln("div");
        return "oncopy" in t ? !0 :(t.setAttribute("oncopy", "return;"), "function" == typeof t.oncopy);
    }(), To = {
        3:"Enter",
        8:"Backspace",
        9:"Tab",
        13:"Enter",
        16:"Shift",
        17:"Ctrl",
        18:"Alt",
        19:"Pause",
        20:"CapsLock",
        27:"Esc",
        32:"Space",
        33:"PageUp",
        34:"PageDown",
        35:"End",
        36:"Home",
        37:"Left",
        38:"Up",
        39:"Right",
        40:"Down",
        44:"PrintScrn",
        45:"Insert",
        46:"Delete",
        59:";",
        91:"Mod",
        92:"Mod",
        93:"Mod",
        109:"-",
        107:"=",
        127:"Delete",
        186:";",
        187:"=",
        188:",",
        189:"-",
        190:".",
        191:"/",
        192:"`",
        219:"[",
        220:"\\",
        221:"]",
        222:"'",
        63276:"PageUp",
        63277:"PageDown",
        63275:"End",
        63273:"Home",
        63234:"Left",
        63232:"Up",
        63235:"Right",
        63233:"Down",
        63302:"Insert",
        63272:"Delete"
    };
    t.keyNames = To, function() {
        for (var t = 0; 10 > t; t++) To[t + 48] = String(t);
        for (var t = 65; 90 >= t; t++) To[t] = String.fromCharCode(t);
        for (var t = 1; 12 >= t; t++) To[t + 111] = To[t + 63235] = "F" + t;
    }();
    var Do = function() {
        function t(t) {
            return 255 >= t ? e.charAt(t) :t >= 1424 && 1524 >= t ? "R" :t >= 1536 && 1791 >= t ? i.charAt(t - 1536) :t >= 1792 && 2220 >= t ? "r" :"L";
        }
        var e = "bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL", i = "rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr", n = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/, o = /[stwN]/, r = /[LRr]/, s = /[Lb1n]/, a = /[1n]/;
        return function(e) {
            if (!n.test(e)) return !1;
            for (var i, l = e.length, c = [], h = null, u = 0; l > u; ++u) c.push(i = t(e.charCodeAt(u))), 
            null == h && ("L" == i ? h = "L" :("R" == i || "r" == i) && (h = "R"));
            null == h && (h = "L");
            for (var u = 0, d = h; l > u; ++u) {
                var i = c[u];
                "m" == i ? c[u] = d :d = i;
            }
            for (var u = 0, p = h; l > u; ++u) {
                var i = c[u];
                "1" == i && "r" == p ? c[u] = "n" :r.test(i) && (p = i, "r" == i && (c[u] = "R"));
            }
            for (var u = 1, d = c[0]; l - 1 > u; ++u) {
                var i = c[u];
                "+" == i && "1" == d && "1" == c[u + 1] ? c[u] = "1" :"," != i || d != c[u + 1] || "1" != d && "n" != d || (c[u] = d), 
                d = i;
            }
            for (var u = 0; l > u; ++u) {
                var i = c[u];
                if ("," == i) c[u] = "N"; else if ("%" == i) {
                    for (var f = u + 1; l > f && "%" == c[f]; ++f) ;
                    for (var g = u && "!" == c[u - 1] || l - 1 > f && "1" == c[f] ? "1" :"N", m = u; f > m; ++m) c[m] = g;
                    u = f - 1;
                }
            }
            for (var u = 0, p = h; l > u; ++u) {
                var i = c[u];
                "L" == p && "1" == i ? c[u] = "L" :r.test(i) && (p = i);
            }
            for (var u = 0; l > u; ++u) if (o.test(c[u])) {
                for (var f = u + 1; l > f && o.test(c[f]); ++f) ;
                for (var _ = "L" == (u ? c[u - 1] :h), v = "L" == (l - 1 > f ? c[f] :h), g = _ || v ? "L" :"R", m = u; f > m; ++m) c[m] = g;
                u = f - 1;
            }
            for (var y, b = [], u = 0; l > u; ) if (s.test(c[u])) {
                var w = u;
                for (++u; l > u && s.test(c[u]); ++u) ;
                b.push({
                    from:w,
                    to:u,
                    level:0
                });
            } else {
                var C = u, T = b.length;
                for (++u; l > u && "L" != c[u]; ++u) ;
                for (var m = C; u > m; ) if (a.test(c[m])) {
                    m > C && b.splice(T, 0, {
                        from:C,
                        to:m,
                        level:1
                    });
                    var D = m;
                    for (++m; u > m && a.test(c[m]); ++m) ;
                    b.splice(T, 0, {
                        from:D,
                        to:m,
                        level:2
                    }), C = m;
                } else ++m;
                u > C && b.splice(T, 0, {
                    from:C,
                    to:u,
                    level:1
                });
            }
            return 1 == b[0].level && (y = e.match(/^\s+/)) && (b[0].from = y[0].length, b.unshift({
                from:0,
                to:y[0].length,
                level:0
            })), 1 == tn(b).level && (y = e.match(/\s+$/)) && (tn(b).to -= y[0].length, b.push({
                from:l - y[0].length,
                to:l,
                level:0
            })), b[0].level != tn(b).level && b.push({
                from:l,
                to:l,
                level:b[0].level
            }), b;
        };
    }();
    return t.version = "3.0", t;
}(), CodeMirror.defineMode("css", function(t) {
    function e(t) {
        for (var e = {}, i = 0; i < t.length; ++i) e[t[i]] = !0;
        return e;
    }
    function i(t, e) {
        return l = e, t;
    }
    function n(t, e) {
        var n = t.next();
        if ("@" == n) return t.eatWhile(/[\w\\\-]/), i("def", t.current());
        if ("/" == n && t.eat("*")) return e.tokenize = o, o(t, e);
        if ("<" == n && t.eat("!")) return e.tokenize = r, r(t, e);
        if ("=" == n) i(null, "compare"); else {
            if (("~" == n || "|" == n) && t.eat("=")) return i(null, "compare");
            if ('"' == n || "'" == n) return e.tokenize = s(n), e.tokenize(t, e);
            if ("#" == n) return t.eatWhile(/[\w\\\-]/), i("atom", "hash");
            if ("!" == n) return t.match(/^\s*\w*/), i("keyword", "important");
            if (/\d/.test(n)) return t.eatWhile(/[\w.%]/), i("number", "unit");
            if ("-" !== n) return /[,+>*\/]/.test(n) ? i(null, "select-op") :"." == n && t.match(/^-?[_a-z][_a-z0-9-]*/i) ? i("qualifier", "qualifier") :":" == n ? i("operator", n) :/[;{}\[\]\(\)]/.test(n) ? i(null, n) :"u" == n && t.match("rl(") ? (t.backUp(1), 
            e.tokenize = a, i("property", "variable")) :(t.eatWhile(/[\w\\\-]/), i("property", "variable"));
            if (/\d/.test(t.peek())) return t.eatWhile(/[\w.%]/), i("number", "unit");
            if (t.match(/^[^-]+-/)) return i("meta", "meta");
        }
    }
    function o(t, e) {
        for (var o, r = !1; null != (o = t.next()); ) {
            if (r && "/" == o) {
                e.tokenize = n;
                break;
            }
            r = "*" == o;
        }
        return i("comment", "comment");
    }
    function r(t, e) {
        for (var o, r = 0; null != (o = t.next()); ) {
            if (r >= 2 && ">" == o) {
                e.tokenize = n;
                break;
            }
            r = "-" == o ? r + 1 :0;
        }
        return i("comment", "comment");
    }
    function s(t, e) {
        return function(o, r) {
            for (var s, a = !1; null != (s = o.next()) && (s != t || a); ) a = !a && "\\" == s;
            return a || (e && o.backUp(1), r.tokenize = n), i("string", "string");
        };
    }
    function a(t, e) {
        return t.next(), e.tokenize = t.match(/\s*[\"\']/, !1) ? n :s(")", !0), i(null, "(");
    }
    var l, c = t.indentUnit, h = e([ "all", "aural", "braille", "handheld", "print", "projection", "screen", "tty", "tv", "embossed" ]), u = e([ "width", "min-width", "max-width", "height", "min-height", "max-height", "device-width", "min-device-width", "max-device-width", "device-height", "min-device-height", "max-device-height", "aspect-ratio", "min-aspect-ratio", "max-aspect-ratio", "device-aspect-ratio", "min-device-aspect-ratio", "max-device-aspect-ratio", "color", "min-color", "max-color", "color-index", "min-color-index", "max-color-index", "monochrome", "min-monochrome", "max-monochrome", "resolution", "min-resolution", "max-resolution", "scan", "grid" ]), d = e([ "align-content", "align-items", "align-self", "alignment-adjust", "alignment-baseline", "anchor-point", "animation", "animation-delay", "animation-direction", "animation-duration", "animation-iteration-count", "animation-name", "animation-play-state", "animation-timing-function", "appearance", "azimuth", "backface-visibility", "background", "background-attachment", "background-clip", "background-color", "background-image", "background-origin", "background-position", "background-repeat", "background-size", "baseline-shift", "binding", "bleed", "bookmark-label", "bookmark-level", "bookmark-state", "bookmark-target", "border", "border-bottom", "border-bottom-color", "border-bottom-left-radius", "border-bottom-right-radius", "border-bottom-style", "border-bottom-width", "border-collapse", "border-color", "border-image", "border-image-outset", "border-image-repeat", "border-image-slice", "border-image-source", "border-image-width", "border-left", "border-left-color", "border-left-style", "border-left-width", "border-radius", "border-right", "border-right-color", "border-right-style", "border-right-width", "border-spacing", "border-style", "border-top", "border-top-color", "border-top-left-radius", "border-top-right-radius", "border-top-style", "border-top-width", "border-width", "bottom", "box-decoration-break", "box-shadow", "box-sizing", "break-after", "break-before", "break-inside", "caption-side", "clear", "clip", "color", "color-profile", "column-count", "column-fill", "column-gap", "column-rule", "column-rule-color", "column-rule-style", "column-rule-width", "column-span", "column-width", "columns", "content", "counter-increment", "counter-reset", "crop", "cue", "cue-after", "cue-before", "cursor", "direction", "display", "dominant-baseline", "drop-initial-after-adjust", "drop-initial-after-align", "drop-initial-before-adjust", "drop-initial-before-align", "drop-initial-size", "drop-initial-value", "elevation", "empty-cells", "fit", "fit-position", "flex", "flex-basis", "flex-direction", "flex-flow", "flex-grow", "flex-shrink", "flex-wrap", "float", "float-offset", "font", "font-feature-settings", "font-family", "font-kerning", "font-language-override", "font-size", "font-size-adjust", "font-stretch", "font-style", "font-synthesis", "font-variant", "font-variant-alternates", "font-variant-caps", "font-variant-east-asian", "font-variant-ligatures", "font-variant-numeric", "font-variant-position", "font-weight", "grid-cell", "grid-column", "grid-column-align", "grid-column-sizing", "grid-column-span", "grid-columns", "grid-flow", "grid-row", "grid-row-align", "grid-row-sizing", "grid-row-span", "grid-rows", "grid-template", "hanging-punctuation", "height", "hyphens", "icon", "image-orientation", "image-rendering", "image-resolution", "inline-box-align", "justify-content", "left", "letter-spacing", "line-break", "line-height", "line-stacking", "line-stacking-ruby", "line-stacking-shift", "line-stacking-strategy", "list-style", "list-style-image", "list-style-position", "list-style-type", "margin", "margin-bottom", "margin-left", "margin-right", "margin-top", "marker-offset", "marks", "marquee-direction", "marquee-loop", "marquee-play-count", "marquee-speed", "marquee-style", "max-height", "max-width", "min-height", "min-width", "move-to", "nav-down", "nav-index", "nav-left", "nav-right", "nav-up", "opacity", "order", "orphans", "outline", "outline-color", "outline-offset", "outline-style", "outline-width", "overflow", "overflow-style", "overflow-wrap", "overflow-x", "overflow-y", "padding", "padding-bottom", "padding-left", "padding-right", "padding-top", "page", "page-break-after", "page-break-before", "page-break-inside", "page-policy", "pause", "pause-after", "pause-before", "perspective", "perspective-origin", "pitch", "pitch-range", "play-during", "position", "presentation-level", "punctuation-trim", "quotes", "rendering-intent", "resize", "rest", "rest-after", "rest-before", "richness", "right", "rotation", "rotation-point", "ruby-align", "ruby-overhang", "ruby-position", "ruby-span", "size", "speak", "speak-as", "speak-header", "speak-numeral", "speak-punctuation", "speech-rate", "stress", "string-set", "tab-size", "table-layout", "target", "target-name", "target-new", "target-position", "text-align", "text-align-last", "text-decoration", "text-decoration-color", "text-decoration-line", "text-decoration-skip", "text-decoration-style", "text-emphasis", "text-emphasis-color", "text-emphasis-position", "text-emphasis-style", "text-height", "text-indent", "text-justify", "text-outline", "text-shadow", "text-space-collapse", "text-transform", "text-underline-position", "text-wrap", "top", "transform", "transform-origin", "transform-style", "transition", "transition-delay", "transition-duration", "transition-property", "transition-timing-function", "unicode-bidi", "vertical-align", "visibility", "voice-balance", "voice-duration", "voice-family", "voice-pitch", "voice-range", "voice-rate", "voice-stress", "voice-volume", "volume", "white-space", "widows", "width", "word-break", "word-spacing", "word-wrap", "z-index" ]), p = e([ "black", "silver", "gray", "white", "maroon", "red", "purple", "fuchsia", "green", "lime", "olive", "yellow", "navy", "blue", "teal", "aqua" ]), f = e([ "above", "absolute", "activeborder", "activecaption", "afar", "after-white-space", "ahead", "alias", "all", "all-scroll", "alternate", "always", "amharic", "amharic-abegede", "antialiased", "appworkspace", "arabic-indic", "armenian", "asterisks", "auto", "avoid", "background", "backwards", "baseline", "below", "bidi-override", "binary", "bengali", "blink", "block", "block-axis", "bold", "bolder", "border", "border-box", "both", "bottom", "break-all", "break-word", "button", "button-bevel", "buttonface", "buttonhighlight", "buttonshadow", "buttontext", "cambodian", "capitalize", "caps-lock-indicator", "caption", "captiontext", "caret", "cell", "center", "checkbox", "circle", "cjk-earthly-branch", "cjk-heavenly-stem", "cjk-ideographic", "clear", "clip", "close-quote", "col-resize", "collapse", "compact", "condensed", "contain", "content", "content-box", "context-menu", "continuous", "copy", "cover", "crop", "cross", "crosshair", "currentcolor", "cursive", "dashed", "decimal", "decimal-leading-zero", "default", "default-button", "destination-atop", "destination-in", "destination-out", "destination-over", "devanagari", "disc", "discard", "document", "dot-dash", "dot-dot-dash", "dotted", "double", "down", "e-resize", "ease", "ease-in", "ease-in-out", "ease-out", "element", "ellipsis", "embed", "end", "ethiopic", "ethiopic-abegede", "ethiopic-abegede-am-et", "ethiopic-abegede-gez", "ethiopic-abegede-ti-er", "ethiopic-abegede-ti-et", "ethiopic-halehame-aa-er", "ethiopic-halehame-aa-et", "ethiopic-halehame-am-et", "ethiopic-halehame-gez", "ethiopic-halehame-om-et", "ethiopic-halehame-sid-et", "ethiopic-halehame-so-et", "ethiopic-halehame-ti-er", "ethiopic-halehame-ti-et", "ethiopic-halehame-tig", "ew-resize", "expanded", "extra-condensed", "extra-expanded", "fantasy", "fast", "fill", "fixed", "flat", "footnotes", "forwards", "from", "geometricPrecision", "georgian", "graytext", "groove", "gujarati", "gurmukhi", "hand", "hangul", "hangul-consonant", "hebrew", "help", "hidden", "hide", "higher", "highlight", "highlighttext", "hiragana", "hiragana-iroha", "horizontal", "hsl", "hsla", "icon", "ignore", "inactiveborder", "inactivecaption", "inactivecaptiontext", "infinite", "infobackground", "infotext", "inherit", "initial", "inline", "inline-axis", "inline-block", "inline-table", "inset", "inside", "intrinsic", "invert", "italic", "justify", "kannada", "katakana", "katakana-iroha", "khmer", "landscape", "lao", "large", "larger", "left", "level", "lighter", "line-through", "linear", "lines", "list-item", "listbox", "listitem", "local", "logical", "loud", "lower", "lower-alpha", "lower-armenian", "lower-greek", "lower-hexadecimal", "lower-latin", "lower-norwegian", "lower-roman", "lowercase", "ltr", "malayalam", "match", "media-controls-background", "media-current-time-display", "media-fullscreen-button", "media-mute-button", "media-play-button", "media-return-to-realtime-button", "media-rewind-button", "media-seek-back-button", "media-seek-forward-button", "media-slider", "media-sliderthumb", "media-time-remaining-display", "media-volume-slider", "media-volume-slider-container", "media-volume-sliderthumb", "medium", "menu", "menulist", "menulist-button", "menulist-text", "menulist-textfield", "menutext", "message-box", "middle", "min-intrinsic", "mix", "mongolian", "monospace", "move", "multiple", "myanmar", "n-resize", "narrower", "navy", "ne-resize", "nesw-resize", "no-close-quote", "no-drop", "no-open-quote", "no-repeat", "none", "normal", "not-allowed", "nowrap", "ns-resize", "nw-resize", "nwse-resize", "oblique", "octal", "open-quote", "optimizeLegibility", "optimizeSpeed", "oriya", "oromo", "outset", "outside", "overlay", "overline", "padding", "padding-box", "painted", "paused", "persian", "plus-darker", "plus-lighter", "pointer", "portrait", "pre", "pre-line", "pre-wrap", "preserve-3d", "progress", "push-button", "radio", "read-only", "read-write", "read-write-plaintext-only", "relative", "repeat", "repeat-x", "repeat-y", "reset", "reverse", "rgb", "rgba", "ridge", "right", "round", "row-resize", "rtl", "run-in", "running", "s-resize", "sans-serif", "scroll", "scrollbar", "se-resize", "searchfield", "searchfield-cancel-button", "searchfield-decoration", "searchfield-results-button", "searchfield-results-decoration", "semi-condensed", "semi-expanded", "separate", "serif", "show", "sidama", "single", "skip-white-space", "slide", "slider-horizontal", "slider-vertical", "sliderthumb-horizontal", "sliderthumb-vertical", "slow", "small", "small-caps", "small-caption", "smaller", "solid", "somali", "source-atop", "source-in", "source-out", "source-over", "space", "square", "square-button", "start", "static", "status-bar", "stretch", "stroke", "sub", "subpixel-antialiased", "super", "sw-resize", "table", "table-caption", "table-cell", "table-column", "table-column-group", "table-footer-group", "table-header-group", "table-row", "table-row-group", "telugu", "text", "text-bottom", "text-top", "textarea", "textfield", "thai", "thick", "thin", "threeddarkshadow", "threedface", "threedhighlight", "threedlightshadow", "threedshadow", "tibetan", "tigre", "tigrinya-er", "tigrinya-er-abegede", "tigrinya-et", "tigrinya-et-abegede", "to", "top", "transparent", "ultra-condensed", "ultra-expanded", "underline", "up", "upper-alpha", "upper-armenian", "upper-greek", "upper-hexadecimal", "upper-latin", "upper-norwegian", "upper-roman", "uppercase", "urdu", "url", "vertical", "vertical-text", "visible", "visibleFill", "visiblePainted", "visibleStroke", "visual", "w-resize", "wait", "wave", "white", "wider", "window", "windowframe", "windowtext", "x-large", "x-small", "xor", "xx-large", "xx-small", "yellow" ]);
    return {
        startState:function(t) {
            return {
                tokenize:n,
                baseIndent:t || 0,
                stack:[]
            };
        },
        token:function(t, e) {
            if (e.tokenize == n && t.eatSpace()) return null;
            var i = e.tokenize(t, e), o = e.stack[e.stack.length - 1];
            return "property" == i ? "propertyValue" == o ? i = f[t.current()] ? "string-2" :p[t.current()] ? "keyword" :"variable-2" :"rule" == o ? d[t.current()] || (i += " error") :o && "@media{" != o ? "@media" == o ? i = h[t.current()] ? "attribute" :/^(only|not)$/i.test(t.current()) ? "keyword" :"and" == t.current().toLowerCase() ? "error" :u[t.current()] ? "error" :"attribute error" :"@mediaType" == o ? i = h[t.current()] ? "attribute" :"and" == t.current().toLowerCase() ? "operator" :/^(only|not)$/i.test(t.current()) ? "error" :u[t.current()] ? "error" :"error" :"@mediaType(" == o ? d[t.current()] || (h[t.current()] ? i = "error" :"and" == t.current().toLowerCase() ? i = "operator" :/^(only|not)$/i.test(t.current()) ? i = "error" :i += " error") :i = "error" :i = "tag" :"atom" == i ? o && "@media{" != o ? "propertyValue" == o ? /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t.current()) || (i += " error") :i = "error" :i = "builtin" :"@media" == o && "{" == l && (i = "error"), 
            "{" == l ? "@media" == o || "@mediaType" == o ? (e.stack.pop(), e.stack[e.stack.length - 1] = "@media{") :e.stack.push("rule") :"}" == l ? (e.stack.pop(), 
            "propertyValue" == o && e.stack.pop()) :"@media" == l ? e.stack.push("@media") :"@media" == o && /\b(keyword|attribute)\b/.test(i) ? e.stack.push("@mediaType") :"@mediaType" == o && "," == t.current() ? e.stack.pop() :"@mediaType" == o && "(" == l ? e.stack.push("@mediaType(") :"@mediaType(" == o && ")" == l ? e.stack.pop() :"rule" == o && ":" == l ? e.stack.push("propertyValue") :"propertyValue" == o && ";" == l && e.stack.pop(), 
            i;
        },
        indent:function(t, e) {
            var i = t.stack.length;
            return /^\}/.test(e) && (i -= "propertyValue" == t.stack[t.stack.length - 1] ? 2 :1), 
            t.baseIndent + i * c;
        },
        electricChars:"}"
    };
}), CodeMirror.defineMIME("text/css", "css"), CodeMirror.defineMode("javascript", function(t, e) {
    function i(t, e, i) {
        return e.tokenize = i, i(t, e);
    }
    function n(t, e) {
        for (var i, n = !1; null != (i = t.next()); ) {
            if (i == e && !n) return !1;
            n = !n && "\\" == i;
        }
        return n;
    }
    function o(t, e, i) {
        return z = t, K = i, e;
    }
    function r(t, e) {
        var r = t.next();
        if ('"' == r || "'" == r) return i(t, e, s(r));
        if (/[\[\]{}\(\),;\:\.]/.test(r)) return o(r);
        if ("0" == r && t.eat(/x/i)) return t.eatWhile(/[\da-f]/i), o("number", "number");
        if (/\d/.test(r) || "-" == r && t.eat(/\d/)) return t.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/), 
        o("number", "number");
        if ("/" == r) return t.eat("*") ? i(t, e, a) :t.eat("/") ? (t.skipToEnd(), o("comment", "comment")) :"operator" == e.lastType || "keyword c" == e.lastType || /^[\[{}\(,;:]$/.test(e.lastType) ? (n(t, "/"), 
        t.eatWhile(/[gimy]/), o("regexp", "string-2")) :(t.eatWhile(G), o("operator", null, t.current()));
        if ("#" == r) return t.skipToEnd(), o("error", "error");
        if (G.test(r)) return t.eatWhile(G), o("operator", null, t.current());
        t.eatWhile(/[\w\$_]/);
        var l = t.current(), c = $.propertyIsEnumerable(l) && $[l];
        return c && "." != e.lastType ? o(c.type, c.style, l) :o("variable", "variable", l);
    }
    function s(t) {
        return function(e, i) {
            return n(e, t) || (i.tokenize = r), o("string", "string");
        };
    }
    function a(t, e) {
        for (var i, n = !1; i = t.next(); ) {
            if ("/" == i && n) {
                e.tokenize = r;
                break;
            }
            n = "*" == i;
        }
        return o("comment", "comment");
    }
    function l(t, e, i, n, o, r) {
        this.indented = t, this.column = e, this.type = i, this.prev = o, this.info = r, 
        null != n && (this.align = n);
    }
    function c(t, e) {
        for (var i = t.localVars; i; i = i.next) if (i.name == e) return !0;
    }
    function h(t, e, i, n, o) {
        var r = t.cc;
        for (V.state = t, V.stream = o, V.marked = null, V.cc = r, t.lexical.hasOwnProperty("align") || (t.lexical.align = !0); ;) {
            var s = r.length ? r.pop() :j ? b :y;
            if (s(i, n)) {
                for (;r.length && r[r.length - 1].lex; ) r.pop()();
                return V.marked ? V.marked :"variable" == i && c(t, n) ? "variable-2" :e;
            }
        }
    }
    function u() {
        for (var t = arguments.length - 1; t >= 0; t--) V.cc.push(arguments[t]);
    }
    function d() {
        return u.apply(null, arguments), !0;
    }
    function p(t) {
        function e(e) {
            for (var i = e; i; i = i.next) if (i.name == t) return !0;
            return !1;
        }
        var i = V.state;
        if (i.context) {
            if (V.marked = "def", e(i.localVars)) return;
            i.localVars = {
                name:t,
                next:i.localVars
            };
        } else {
            if (e(i.globalVars)) return;
            i.globalVars = {
                name:t,
                next:i.globalVars
            };
        }
    }
    function f() {
        V.state.context = {
            prev:V.state.context,
            vars:V.state.localVars
        }, V.state.localVars = W;
    }
    function g() {
        V.state.localVars = V.state.context.vars, V.state.context = V.state.context.prev;
    }
    function m(t, e) {
        var i = function() {
            var i = V.state;
            i.lexical = new l(i.indented, V.stream.column(), t, null, i.lexical, e);
        };
        return i.lex = !0, i;
    }
    function _() {
        var t = V.state;
        t.lexical.prev && (")" == t.lexical.type && (t.indented = t.lexical.indented), t.lexical = t.lexical.prev);
    }
    function v(t) {
        return function(e) {
            return e == t ? d() :";" == t ? u() :d(arguments.callee);
        };
    }
    function y(t) {
        return "var" == t ? d(m("vardef"), I, v(";"), _) :"keyword a" == t ? d(m("form"), b, y, _) :"keyword b" == t ? d(m("form"), y, _) :"{" == t ? d(m("}"), S, _) :";" == t ? d() :"function" == t ? d(L) :"for" == t ? d(m("form"), v("("), m(")"), P, v(")"), _, y, _) :"variable" == t ? d(m("stat"), T) :"switch" == t ? d(m("form"), b, m("}", "switch"), v("{"), S, _, _) :"case" == t ? d(b, v(":")) :"default" == t ? d(v(":")) :"catch" == t ? d(m("form"), f, v("("), B, v(")"), y, _, g) :u(m("stat"), b, v(";"), _);
    }
    function b(t) {
        return U.hasOwnProperty(t) ? d(C) :"function" == t ? d(L) :"keyword c" == t ? d(w) :"(" == t ? d(m(")"), w, v(")"), _, C) :"operator" == t ? d(b) :"[" == t ? d(m("]"), x(b, "]"), _, C) :"{" == t ? d(m("}"), x(E, "}"), _, C) :d();
    }
    function w(t) {
        return t.match(/[;\}\)\],]/) ? u() :u(b);
    }
    function C(t, e) {
        if ("operator" == t && /\+\+|--/.test(e)) return d(C);
        if ("operator" == t && "?" == e) return d(b, v(":"), b);
        if (";" != t) return "(" == t ? d(m(")"), x(b, ")"), _, C) :"." == t ? d(D, C) :"[" == t ? d(m("]"), b, v("]"), _, C) :void 0;
    }
    function T(t) {
        return ":" == t ? d(_, y) :u(C, v(";"), _);
    }
    function D(t) {
        return "variable" == t ? (V.marked = "property", d()) :void 0;
    }
    function E(t) {
        return "variable" == t && (V.marked = "property"), U.hasOwnProperty(t) ? d(v(":"), b) :void 0;
    }
    function x(t, e) {
        function i(n) {
            return "," == n ? d(t, i) :n == e ? d() :d(v(e));
        }
        return function(n) {
            return n == e ? d() :u(t, i);
        };
    }
    function S(t) {
        return "}" == t ? d() :u(y, S);
    }
    function O(t) {
        return ":" == t ? d(k) :u();
    }
    function k(t) {
        return "variable" == t ? (V.marked = "variable-3", d()) :u();
    }
    function I(t, e) {
        return "variable" == t ? (p(e), H ? d(O, R) :d(R)) :u();
    }
    function R(t, e) {
        return "=" == e ? d(b, R) :"," == t ? d(I) :void 0;
    }
    function P(t) {
        return "var" == t ? d(I, v(";"), A) :";" == t ? d(A) :"variable" == t ? d(N) :d(A);
    }
    function N(t, e) {
        return "in" == e ? d(b) :d(C, A);
    }
    function A(t, e) {
        return ";" == t ? d(M) :"in" == e ? d(b) :d(b, v(";"), M);
    }
    function M(t) {
        ")" != t && d(b);
    }
    function L(t, e) {
        return "variable" == t ? (p(e), d(L)) :"(" == t ? d(m(")"), f, x(B, ")"), _, y, g) :void 0;
    }
    function B(t, e) {
        return "variable" == t ? (p(e), H ? d(O) :d()) :void 0;
    }
    var z, K, F = t.indentUnit, j = e.json, H = e.typescript, $ = function() {
        function t(t) {
            return {
                type:t,
                style:"keyword"
            };
        }
        var e = t("keyword a"), i = t("keyword b"), n = t("keyword c"), o = t("operator"), r = {
            type:"atom",
            style:"atom"
        }, s = {
            "if":e,
            "while":e,
            "with":e,
            "else":i,
            "do":i,
            "try":i,
            "finally":i,
            "return":n,
            "break":n,
            "continue":n,
            "new":n,
            "delete":n,
            "throw":n,
            "var":t("var"),
            "const":t("var"),
            let:t("var"),
            "function":t("function"),
            "catch":t("catch"),
            "for":t("for"),
            "switch":t("switch"),
            "case":t("case"),
            "default":t("default"),
            "in":o,
            "typeof":o,
            "instanceof":o,
            "true":r,
            "false":r,
            "null":r,
            undefined:r,
            NaN:r,
            Infinity:r
        };
        if (H) {
            var a = {
                type:"variable",
                style:"variable-3"
            }, l = {
                "interface":t("interface"),
                "class":t("class"),
                "extends":t("extends"),
                constructor:t("constructor"),
                "public":t("public"),
                "private":t("private"),
                "protected":t("protected"),
                "static":t("static"),
                "super":t("super"),
                string:a,
                number:a,
                bool:a,
                any:a
            };
            for (var c in l) s[c] = l[c];
        }
        return s;
    }(), G = /[+\-*&%=<>!?|]/, U = {
        atom:!0,
        number:!0,
        variable:!0,
        string:!0,
        regexp:!0
    }, V = {
        state:null,
        column:null,
        marked:null,
        cc:null
    }, W = {
        name:"this",
        next:{
            name:"arguments"
        }
    };
    return _.lex = !0, {
        startState:function(t) {
            return {
                tokenize:r,
                lastType:null,
                cc:[],
                lexical:new l((t || 0) - F, 0, "block", !1),
                localVars:e.localVars,
                globalVars:e.globalVars,
                context:e.localVars && {
                    vars:e.localVars
                },
                indented:0
            };
        },
        token:function(t, e) {
            if (t.sol() && (e.lexical.hasOwnProperty("align") || (e.lexical.align = !1), e.indented = t.indentation()), 
            t.eatSpace()) return null;
            var i = e.tokenize(t, e);
            return "comment" == z ? i :(e.lastType = z, h(e, i, z, K, t));
        },
        indent:function(t, e) {
            if (t.tokenize == a) return CodeMirror.Pass;
            if (t.tokenize != r) return 0;
            var i = e && e.charAt(0), n = t.lexical;
            "stat" == n.type && "}" == i && (n = n.prev);
            var o = n.type, s = i == o;
            return "vardef" == o ? n.indented + ("operator" == t.lastType || "," == t.lastType ? 4 :0) :"form" == o && "{" == i ? n.indented :"form" == o ? n.indented + F :"stat" == o ? n.indented + ("operator" == t.lastType || "," == t.lastType ? F :0) :"switch" != n.info || s ? n.align ? n.column + (s ? 0 :1) :n.indented + (s ? 0 :F) :n.indented + (/^(?:case|default)\b/.test(e) ? F :2 * F);
        },
        electricChars:":{}",
        jsonMode:j
    };
}), CodeMirror.defineMIME("text/javascript", "javascript"), CodeMirror.defineMIME("text/ecmascript", "javascript"), 
CodeMirror.defineMIME("application/javascript", "javascript"), CodeMirror.defineMIME("application/ecmascript", "javascript"), 
CodeMirror.defineMIME("application/json", {
    name:"javascript",
    json:!0
}), CodeMirror.defineMIME("text/typescript", {
    name:"javascript",
    typescript:!0
}), CodeMirror.defineMIME("application/typescript", {
    name:"javascript",
    typescript:!0
}), CodeMirror.defineMode("xml", function(t, e) {
    function i(t, e) {
        function i(i) {
            return e.tokenize = i, i(t, e);
        }
        var o = t.next();
        if ("<" == o) {
            if (t.eat("!")) return t.eat("[") ? t.match("CDATA[") ? i(r("atom", "]]>")) :null :t.match("--") ? i(r("comment", "-->")) :t.match("DOCTYPE", !0, !0) ? (t.eatWhile(/[\w\._\-]/), 
            i(s(1))) :null;
            if (t.eat("?")) return t.eatWhile(/[\w\._\-]/), e.tokenize = r("meta", "?>"), "meta";
            var a = t.eat("/");
            y = "";
            for (var l; l = t.eat(/[^\s\u00a0=<>\"\'\/?]/); ) y += l;
            return y ? (b = a ? "closeTag" :"openTag", e.tokenize = n, "tag") :"error";
        }
        if ("&" == o) {
            var c;
            return c = t.eat("#") ? t.eat("x") ? t.eatWhile(/[a-fA-F\d]/) && t.eat(";") :t.eatWhile(/[\d]/) && t.eat(";") :t.eatWhile(/[\w\.\-:]/) && t.eat(";"), 
            c ? "atom" :"error";
        }
        return t.eatWhile(/[^&<]/), null;
    }
    function n(t, e) {
        var n = t.next();
        return ">" == n || "/" == n && t.eat(">") ? (e.tokenize = i, b = ">" == n ? "endTag" :"selfcloseTag", 
        "tag") :"=" == n ? (b = "equals", null) :/[\'\"]/.test(n) ? (e.tokenize = o(n), 
        e.tokenize(t, e)) :(t.eatWhile(/[^\s\u00a0=<>\"\']/), "word");
    }
    function o(t) {
        return function(e, i) {
            for (;!e.eol(); ) if (e.next() == t) {
                i.tokenize = n;
                break;
            }
            return "string";
        };
    }
    function r(t, e) {
        return function(n, o) {
            for (;!n.eol(); ) {
                if (n.match(e)) {
                    o.tokenize = i;
                    break;
                }
                n.next();
            }
            return t;
        };
    }
    function s(t) {
        return function(e, n) {
            for (var o; null != (o = e.next()); ) {
                if ("<" == o) return n.tokenize = s(t + 1), n.tokenize(e, n);
                if (">" == o) {
                    if (1 == t) {
                        n.tokenize = i;
                        break;
                    }
                    return n.tokenize = s(t - 1), n.tokenize(e, n);
                }
            }
            return "meta";
        };
    }
    function a() {
        for (var t = arguments.length - 1; t >= 0; t--) w.cc.push(arguments[t]);
    }
    function l() {
        return a.apply(null, arguments), !0;
    }
    function c(t, e) {
        var i = D.doNotIndent.hasOwnProperty(t) || w.context && w.context.noIndent;
        w.context = {
            prev:w.context,
            tagName:t,
            indent:w.indented,
            startOfLine:e,
            noIndent:i
        };
    }
    function h() {
        w.context && (w.context = w.context.prev);
    }
    function u(t) {
        if ("openTag" == t) return w.tagName = y, l(g, d(w.startOfLine));
        if ("closeTag" == t) {
            var e = !1;
            return w.context ? w.context.tagName != y && (D.implicitlyClosed.hasOwnProperty(w.context.tagName.toLowerCase()) && h(), 
            e = !w.context || w.context.tagName != y) :e = !0, e && (C = "error"), l(p(e));
        }
        return l();
    }
    function d(t) {
        return function(e) {
            var i = w.tagName;
            return w.tagName = null, "selfcloseTag" == e || "endTag" == e && D.autoSelfClosers.hasOwnProperty(i.toLowerCase()) ? (f(i.toLowerCase()), 
            l()) :"endTag" == e ? (f(i.toLowerCase()), c(i, t), l()) :l();
        };
    }
    function p(t) {
        return function(e) {
            return t && (C = "error"), "endTag" == e ? (h(), l()) :(C = "error", l(arguments.callee));
        };
    }
    function f(t) {
        for (var e; ;) {
            if (!w.context) return;
            if (e = w.context.tagName.toLowerCase(), !D.contextGrabbers.hasOwnProperty(e) || !D.contextGrabbers[e].hasOwnProperty(t)) return;
            h();
        }
    }
    function g(t) {
        return "word" == t ? (C = "attribute", l(m, g)) :"endTag" == t || "selfcloseTag" == t ? a() :(C = "error", 
        l(g));
    }
    function m(t) {
        return "equals" == t ? l(_, g) :(D.allowMissing ? "word" == t && (C = "attribute") :C = "error", 
        "endTag" == t || "selfcloseTag" == t ? a() :l());
    }
    function _(t) {
        return "string" == t ? l(v) :"word" == t && D.allowUnquoted ? (C = "string", l()) :(C = "error", 
        "endTag" == t || "selfCloseTag" == t ? a() :l());
    }
    function v(t) {
        return "string" == t ? l(v) :a();
    }
    var y, b, w, C, T = t.indentUnit, D = e.htmlMode ? {
        autoSelfClosers:{
            area:!0,
            base:!0,
            br:!0,
            col:!0,
            command:!0,
            embed:!0,
            frame:!0,
            hr:!0,
            img:!0,
            input:!0,
            keygen:!0,
            link:!0,
            meta:!0,
            param:!0,
            source:!0,
            track:!0,
            wbr:!0
        },
        implicitlyClosed:{
            dd:!0,
            li:!0,
            optgroup:!0,
            option:!0,
            p:!0,
            rp:!0,
            rt:!0,
            tbody:!0,
            td:!0,
            tfoot:!0,
            th:!0,
            tr:!0
        },
        contextGrabbers:{
            dd:{
                dd:!0,
                dt:!0
            },
            dt:{
                dd:!0,
                dt:!0
            },
            li:{
                li:!0
            },
            option:{
                option:!0,
                optgroup:!0
            },
            optgroup:{
                optgroup:!0
            },
            p:{
                address:!0,
                article:!0,
                aside:!0,
                blockquote:!0,
                dir:!0,
                div:!0,
                dl:!0,
                fieldset:!0,
                footer:!0,
                form:!0,
                h1:!0,
                h2:!0,
                h3:!0,
                h4:!0,
                h5:!0,
                h6:!0,
                header:!0,
                hgroup:!0,
                hr:!0,
                menu:!0,
                nav:!0,
                ol:!0,
                p:!0,
                pre:!0,
                section:!0,
                table:!0,
                ul:!0
            },
            rp:{
                rp:!0,
                rt:!0
            },
            rt:{
                rp:!0,
                rt:!0
            },
            tbody:{
                tbody:!0,
                tfoot:!0
            },
            td:{
                td:!0,
                th:!0
            },
            tfoot:{
                tbody:!0
            },
            th:{
                td:!0,
                th:!0
            },
            thead:{
                tbody:!0,
                tfoot:!0
            },
            tr:{
                tr:!0
            }
        },
        doNotIndent:{
            pre:!0
        },
        allowUnquoted:!0,
        allowMissing:!0
    } :{
        autoSelfClosers:{},
        implicitlyClosed:{},
        contextGrabbers:{},
        doNotIndent:{},
        allowUnquoted:!1,
        allowMissing:!1
    }, E = e.alignCDATA;
    return {
        startState:function() {
            return {
                tokenize:i,
                cc:[],
                indented:0,
                startOfLine:!0,
                tagName:null,
                context:null
            };
        },
        token:function(t, e) {
            if (t.sol() && (e.startOfLine = !0, e.indented = t.indentation()), t.eatSpace()) return null;
            C = b = y = null;
            var i = e.tokenize(t, e);
            if (e.type = b, (i || b) && "comment" != i) for (w = e; ;) {
                var n = e.cc.pop() || u;
                if (n(b || i)) break;
            }
            return e.startOfLine = !1, C || i;
        },
        indent:function(t, e, o) {
            var r = t.context;
            if (t.tokenize != n && t.tokenize != i || r && r.noIndent) return o ? o.match(/^(\s*)/)[0].length :0;
            if (E && /<!\[CDATA\[/.test(e)) return 0;
            for (r && /^<\//.test(e) && (r = r.prev); r && !r.startOfLine; ) r = r.prev;
            return r ? r.indent + T :0;
        },
        electricChars:"/",
        configuration:e.htmlMode ? "html" :"xml"
    };
}), CodeMirror.defineMIME("text/xml", "xml"), CodeMirror.defineMIME("application/xml", "xml"), 
CodeMirror.mimeModes.hasOwnProperty("text/html") || CodeMirror.defineMIME("text/html", {
    name:"xml",
    htmlMode:!0
}), CodeMirror.defineMode("htmlmixed", function(t) {
    function e(t, e) {
        var i = r.token(t, e.htmlState);
        return /(?:^|\s)tag(?:\s|$)/.test(i) && ">" == t.current() && e.htmlState.context && (/^script$/i.test(e.htmlState.context.tagName) ? (e.token = n, 
        e.localState = s.startState(r.indent(e.htmlState, ""))) :/^style$/i.test(e.htmlState.context.tagName) && (e.token = o, 
        e.localState = a.startState(r.indent(e.htmlState, "")))), i;
    }
    function i(t, e, i) {
        var n, o = t.current(), r = o.search(e);
        return r > -1 ? t.backUp(o.length - r) :(n = o.match(/<\/?$/)) && (t.backUp(o.length), 
        t.match(e, !1) || t.match(o[0])), i;
    }
    function n(t, n) {
        return t.match(/^<\/\s*script\s*>/i, !1) ? (n.token = e, n.localState = null, e(t, n)) :i(t, /<\/\s*script\s*>/, s.token(t, n.localState));
    }
    function o(t, n) {
        return t.match(/^<\/\s*style\s*>/i, !1) ? (n.token = e, n.localState = null, e(t, n)) :i(t, /<\/\s*style\s*>/, a.token(t, n.localState));
    }
    var r = CodeMirror.getMode(t, {
        name:"xml",
        htmlMode:!0
    }), s = CodeMirror.getMode(t, "javascript"), a = CodeMirror.getMode(t, "css");
    return {
        startState:function() {
            var t = r.startState();
            return {
                token:e,
                localState:null,
                mode:"html",
                htmlState:t
            };
        },
        copyState:function(t) {
            if (t.localState) var e = CodeMirror.copyState(t.token == o ? a :s, t.localState);
            return {
                token:t.token,
                localState:e,
                mode:t.mode,
                htmlState:CodeMirror.copyState(r, t.htmlState)
            };
        },
        token:function(t, e) {
            return e.token(t, e);
        },
        indent:function(t, i) {
            return t.token == e || /^\s*<\//.test(i) ? r.indent(t.htmlState, i) :t.token == n ? s.indent(t.localState, i) :a.indent(t.localState, i);
        },
        electricChars:"/{}:",
        innerMode:function(t) {
            var i = t.token == e ? r :t.token == n ? s :a;
            return {
                state:t.localState || t.htmlState,
                mode:i
            };
        }
    };
}, "xml", "javascript", "css"), CodeMirror.defineMIME("text/html", "htmlmixed"), 
"undefined" != typeof exports && (exports.css_beautify = css_beautify), "undefined" != typeof exports && (exports.html_beautify = style_html);

/* Copyright Google Inc.
 * Licensed under the Apache Licence Version 2.0
 * Autogenerated at Wed Sep 05 12:14:37 PDT 2012
 * \@overrides window
 * \@provides cssSchema, CSS_PROP_BIT_QUANTITY, CSS_PROP_BIT_HASH_VALUE, CSS_PROP_BIT_NEGATIVE_QUANTITY, CSS_PROP_BIT_QSTRING_CONTENT, CSS_PROP_BIT_QSTRING_URL, CSS_PROP_BIT_HISTORY_INSENSITIVE, CSS_PROP_BIT_Z_INDEX, CSS_PROP_BIT_ALLOWED_IN_LINK */
var CSS_PROP_BIT_QUANTITY = 1, CSS_PROP_BIT_HASH_VALUE = 2, CSS_PROP_BIT_NEGATIVE_QUANTITY = 4, CSS_PROP_BIT_QSTRING_CONTENT = 8, CSS_PROP_BIT_QSTRING_URL = 16, CSS_PROP_BIT_HISTORY_INSENSITIVE = 32, CSS_PROP_BIT_Z_INDEX = 64, CSS_PROP_BIT_ALLOWED_IN_LINK = 128, cssSchema = function() {
    var t = [ "rgb(?:\\(\\s*(?:\\d+|0|\\d+(?:\\.\\d+)?%)\\s*,\\s*(?:\\d+|0|\\d+(?:\\.\\d+)?%)\\s*,\\s*(?:\\d+|0|\\d+(?:\\.\\d+)?%)|a\\(\\s*(?:\\d+|0|\\d+(?:\\.\\d+)?%)\\s*,\\s*(?:\\d+|0|\\d+(?:\\.\\d+)?%)\\s*,\\s*(?:\\d+|0|\\d+(?:\\.\\d+)?%)\\s*,\\s*(?:\\d+|0(?:\\.\\d+)?|\\.\\d+|1(?:\\.0+)?|0|\\d+(?:\\.\\d+)?%)) *\\)" ], e = [ /^ *$/i, RegExp("^ *\\s*" + t[0] + " *$", "i"), RegExp("^ *(?:\\s*" + t[0] + "|(?:\\s*" + t[0] + ")?)+ *$", "i") ], i = [ [ "aliceblue", "antiquewhite", "aqua", "aquamarine", "azure", "beige", "bisque", "black", "blanchedalmond", "blue", "blueviolet", "brown", "burlywood", "cadetblue", "chartreuse", "chocolate", "coral", "cornflowerblue", "cornsilk", "crimson", "cyan", "darkblue", "darkcyan", "darkgoldenrod", "darkgray", "darkgreen", "darkkhaki", "darkmagenta", "darkolivegreen", "darkorange", "darkorchid", "darkred", "darksalmon", "darkseagreen", "darkslateblue", "darkslategray", "darkturquoise", "darkviolet", "deeppink", "deepskyblue", "dimgray", "dodgerblue", "firebrick", "floralwhite", "forestgreen", "fuchsia", "gainsboro", "ghostwhite", "gold", "goldenrod", "gray", "green", "greenyellow", "honeydew", "hotpink", "indianred", "indigo", "ivory", "khaki", "lavender", "lavenderblush", "lawngreen", "lemonchiffon", "lightblue", "lightcoral", "lightcyan", "lightgoldenrodyellow", "lightgreen", "lightgrey", "lightpink", "lightsalmon", "lightseagreen", "lightskyblue", "lightslategray", "lightsteelblue", "lightyellow", "lime", "limegreen", "linen", "magenta", "maroon", "mediumaquamarine", "mediumblue", "mediumorchid", "mediumpurple", "mediumseagreen", "mediumslateblue", "mediumspringgreen", "mediumturquoise", "mediumvioletred", "midnightblue", "mintcream", "mistyrose", "moccasin", "navajowhite", "navy", "oldlace", "olive", "olivedrab", "orange", "orangered", "orchid", "palegoldenrod", "palegreen", "paleturquoise", "palevioletred", "papayawhip", "peachpuff", "peru", "pink", "plum", "powderblue", "purple", "red", "rosybrown", "royalblue", "saddlebrown", "salmon", "sandybrown", "seagreen", "seashell", "sienna", "silver", "skyblue", "slateblue", "slategray", "snow", "springgreen", "steelblue", "tan", "teal", "thistle", "tomato", "turquoise", "violet", "wheat", "white", "whitesmoke", "yellow", "yellowgreen" ], [ "all-scroll", "col-resize", "crosshair", "default", "e-resize", "hand", "help", "move", "n-resize", "ne-resize", "no-drop", "not-allowed", "nw-resize", "pointer", "progress", "row-resize", "s-resize", "se-resize", "sw-resize", "text", "vertical-text", "w-resize", "wait" ], [ "-moz-inline-box", "-moz-inline-stack", "block", "inline", "inline-block", "inline-table", "list-item", "run-in", "table", "table-caption", "table-cell", "table-column", "table-column-group", "table-footer-group", "table-header-group", "table-row", "table-row-group" ], [ "armenian", "circle", "decimal", "decimal-leading-zero", "disc", "georgian", "lower-alpha", "lower-greek", "lower-latin", "lower-roman", "square", "upper-alpha", "upper-latin", "upper-roman" ], [ "100", "200", "300", "400", "500", "600", "700", "800", "900", "bold", "bolder", "lighter" ], [ "condensed", "expanded", "extra-condensed", "extra-expanded", "narrower", "semi-condensed", "semi-expanded", "ultra-condensed", "ultra-expanded", "wider" ], [ "behind", "center-left", "center-right", "far-left", "far-right", "left-side", "leftwards", "right-side", "rightwards" ], [ "large", "larger", "small", "smaller", "x-large", "x-small", "xx-large", "xx-small" ], [ "-moz-pre-wrap", "-o-pre-wrap", "-pre-wrap", "nowrap", "pre", "pre-line", "pre-wrap" ], [ "dashed", "dotted", "double", "groove", "outset", "ridge", "solid" ], [ "baseline", "middle", "sub", "super", "text-bottom", "text-top" ], [ "caption", "icon", "menu", "message-box", "small-caption", "status-bar" ], [ "fast", "faster", "slow", "slower", "x-fast", "x-slow" ], [ "above", "below", "higher", "level", "lower" ], [ "border-box", "contain", "content-box", "cover", "padding-box" ], [ "cursive", "fantasy", "monospace", "sans-serif", "serif" ], [ "loud", "silent", "soft", "x-loud", "x-soft" ], [ "no-repeat", "repeat-x", "repeat-y", "round", "space" ], [ "blink", "line-through", "overline", "underline" ], [ "high", "low", "x-high", "x-low" ], [ "absolute", "relative", "static" ], [ "capitalize", "lowercase", "uppercase" ], [ "child", "female", "male" ], [ "bidi-override", "embed" ], [ "bottom", "top" ], [ "clip", "ellipsis" ], [ "continuous", "digits" ], [ "hide", "show" ], [ "inside", "outside" ], [ "italic", "oblique" ], [ "left", "right" ], [ "ltr", "rtl" ], [ "no-content", "no-display" ], [ "suppress", "unrestricted" ], [ "thick", "thin" ], [ "," ], [ "/" ], [ "always" ], [ "auto" ], [ "avoid" ], [ "both" ], [ "break-word" ], [ "center" ], [ "code" ], [ "collapse" ], [ "fixed" ], [ "hidden" ], [ "inherit" ], [ "inset" ], [ "invert" ], [ "justify" ], [ "local" ], [ "medium" ], [ "mix" ], [ "none" ], [ "normal" ], [ "once" ], [ "repeat" ], [ "scroll" ], [ "separate" ], [ "small-caps" ], [ "spell-out" ], [ "transparent" ], [ "visible" ] ];
    return {
        "-moz-border-radius":{
            cssExtra:e[0],
            cssPropBits:5,
            cssLitGroup:[ i[36] ]
        },
        "-moz-border-radius-bottomleft":{
            cssExtra:e[0],
            cssPropBits:5
        },
        "-moz-border-radius-bottomright":{
            cssExtra:e[0],
            cssPropBits:5
        },
        "-moz-border-radius-topleft":{
            cssExtra:e[0],
            cssPropBits:5
        },
        "-moz-border-radius-topright":{
            cssExtra:e[0],
            cssPropBits:5
        },
        "-moz-box-shadow":{
            cssExtra:e[2],
            cssAlternates:[ "boxShadow" ],
            cssPropBits:7,
            cssLitGroup:[ i[0], i[35], i[48], i[54] ]
        },
        "-moz-opacity":{
            cssPropBits:1,
            cssLitGroup:[ i[47] ]
        },
        "-moz-outline":{
            cssExtra:e[1],
            cssPropBits:7,
            cssLitGroup:[ i[0], i[9], i[34], i[46], i[47], i[48], i[49], i[52], i[54] ]
        },
        "-moz-outline-color":{
            cssExtra:e[1],
            cssPropBits:2,
            cssLitGroup:[ i[0], i[47], i[49] ]
        },
        "-moz-outline-style":{
            cssPropBits:0,
            cssLitGroup:[ i[9], i[46], i[47], i[48], i[54] ]
        },
        "-moz-outline-width":{
            cssPropBits:5,
            cssLitGroup:[ i[34], i[47], i[52] ]
        },
        "-o-text-overflow":{
            cssPropBits:0,
            cssLitGroup:[ i[25] ]
        },
        "-webkit-border-bottom-left-radius":{
            cssExtra:e[0],
            cssPropBits:5
        },
        "-webkit-border-bottom-right-radius":{
            cssExtra:e[0],
            cssPropBits:5
        },
        "-webkit-border-radius":{
            cssExtra:e[0],
            cssPropBits:5,
            cssLitGroup:[ i[36] ]
        },
        "-webkit-border-radius-bottom-left":{
            cssExtra:e[0],
            cssPropBits:5
        },
        "-webkit-border-radius-bottom-right":{
            cssExtra:e[0],
            cssPropBits:5
        },
        "-webkit-border-radius-top-left":{
            cssExtra:e[0],
            cssPropBits:5
        },
        "-webkit-border-radius-top-right":{
            cssExtra:e[0],
            cssPropBits:5
        },
        "-webkit-border-top-left-radius":{
            cssExtra:e[0],
            cssPropBits:5
        },
        "-webkit-border-top-right-radius":{
            cssExtra:e[0],
            cssPropBits:5
        },
        "-webkit-box-shadow":{
            cssExtra:e[2],
            cssAlternates:[ "boxShadow" ],
            cssPropBits:7,
            cssLitGroup:[ i[0], i[35], i[48], i[54] ]
        },
        azimuth:{
            cssPropBits:5,
            cssLitGroup:[ i[6], i[30], i[42], i[47] ]
        },
        background:{
            cssExtra:/^ *(?:(?:\s*(?:-webkit-gradient\(\s*(?:linear|radial)\s*,\s*(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?|top|left|right|bottom)\s+(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?|top|left|right|bottom)(?:\s*,\s*(?:0|[+\-]?\d+(?:\.\d+)?))?\s*,\s*(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?|top|left|right|bottom)\s+(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?|top|left|right|bottom)(?:\s*,\s*(?:0|[+\-]?\d+(?:\.\d+)?))?(?:\s*,\s*(?:color-stop\(\s*(?:0(?:\.\d+)?|\.\d+|1(?:\.0+)?)\s*,|from\(|to\()\s*(?:#(?:[\da-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|rgb\(\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*\))\s*\))*|-moz-linear-gradient\((?:(?:\s*center)?\s+(?:top|bottom|left|right|0|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])|[+\-]?\d+(?:\.\d+)?%)\s*,)?\s*(?:#(?:[\da-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|rgb\(\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*\))(?:\s+(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])))?(?:\s*,\s*(?:#(?:[\da-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|rgb\(\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*\))(?:\s+(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])))?)+|-webkit-linear-gradient\((?:\s*(?:0|[+\-]?\d+(?:\.\d+)?(?:g?rad|deg)|(?:top|bottom|0|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])|[+\-]?\d+(?:\.\d+)?%)(?:\s+(?:left|right|0|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])|[+\-]?\d+(?:\.\d+)?%))?)\s*,)?\s*(?:#(?:[\da-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|rgb\(\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*\))(?:\s+(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])))?(?:\s*,\s*(?:#(?:[\da-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|rgb\(\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*\))(?:\s+(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])))?)+|linear-gradient\((?:\s*(?:0|[+\-]?\d+(?:\.\d+)?(?:g?rad|deg)|to\s+(?:0|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])|[+\-]?\d+(?:\.\d+)?%)\s*(?:0|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])|[+\-]?\d+(?:\.\d+)?%))\s*,)?\s*(?:#(?:[\da-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|rgb\(\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*\))(?:\s+(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])))?(?:\s*,\s*(?:#(?:[\da-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|rgb\(\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*\))(?:\s+(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])))?)+) *\)){0,2})*(?:\s*(?:rgb(?:\(\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)|a\(\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0(?:\.\d+)?|\.\d+|1(?:\.0+)?|0|\d+(?:\.\d+)?%))|-webkit-gradient\(\s*(?:linear|radial)\s*,\s*(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?|top|left|right|bottom)\s+(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?|top|left|right|bottom)(?:\s*,\s*(?:0|[+\-]?\d+(?:\.\d+)?))?\s*,\s*(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?|top|left|right|bottom)\s+(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?|top|left|right|bottom)(?:\s*,\s*(?:0|[+\-]?\d+(?:\.\d+)?))?(?:\s*,\s*(?:color-stop\(\s*(?:0(?:\.\d+)?|\.\d+|1(?:\.0+)?)\s*,|from\(|to\()\s*(?:#(?:[\da-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|rgb\(\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*\))\s*\))*|-moz-linear-gradient\((?:(?:\s*center)?\s+(?:top|bottom|left|right|0|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])|[+\-]?\d+(?:\.\d+)?%)\s*,)?\s*(?:#(?:[\da-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|rgb\(\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*\))(?:\s+(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])))?(?:\s*,\s*(?:#(?:[\da-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|rgb\(\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*\))(?:\s+(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])))?)+|-webkit-linear-gradient\((?:\s*(?:0|[+\-]?\d+(?:\.\d+)?(?:g?rad|deg)|(?:top|bottom|0|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])|[+\-]?\d+(?:\.\d+)?%)(?:\s+(?:left|right|0|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])|[+\-]?\d+(?:\.\d+)?%))?)\s*,)?\s*(?:#(?:[\da-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|rgb\(\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*\))(?:\s+(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])))?(?:\s*,\s*(?:#(?:[\da-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|rgb\(\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*\))(?:\s+(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])))?)+|linear-gradient\((?:\s*(?:0|[+\-]?\d+(?:\.\d+)?(?:g?rad|deg)|to\s+(?:0|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])|[+\-]?\d+(?:\.\d+)?%)\s*(?:0|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])|[+\-]?\d+(?:\.\d+)?%))\s*,)?\s*(?:#(?:[\da-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|rgb\(\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*\))(?:\s+(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])))?(?:\s*,\s*(?:#(?:[\da-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|rgb\(\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*\))(?:\s+(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])))?)+) *\)){0,3} *$/i,
            cssPropBits:23,
            cssLitGroup:[ i[0], i[14], i[17], i[24], i[30], i[35], i[36], i[38], i[42], i[45], i[47], i[51], i[54], i[57], i[58], i[62] ]
        },
        "background-attachment":{
            cssExtra:e[0],
            cssPropBits:0,
            cssLitGroup:[ i[35], i[45], i[51], i[58] ]
        },
        "background-color":{
            cssExtra:e[1],
            cssPropBits:130,
            cssLitGroup:[ i[0], i[47], i[62] ]
        },
        "background-image":{
            cssExtra:/^ *(?:\s*(?:-webkit-gradient\(\s*(?:linear|radial)\s*,\s*(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?|top|left|right|bottom)\s+(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?|top|left|right|bottom)(?:\s*,\s*(?:0|[+\-]?\d+(?:\.\d+)?))?\s*,\s*(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?|top|left|right|bottom)\s+(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?|top|left|right|bottom)(?:\s*,\s*(?:0|[+\-]?\d+(?:\.\d+)?))?(?:\s*,\s*(?:color-stop\(\s*(?:0(?:\.\d+)?|\.\d+|1(?:\.0+)?)\s*,|from\(|to\()\s*(?:#(?:[\da-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|rgb\(\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*\))\s*\))*|-moz-linear-gradient\((?:(?:\s*center)?\s+(?:top|bottom|left|right|0|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])|[+\-]?\d+(?:\.\d+)?%)\s*,)?\s*(?:#(?:[\da-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|rgb\(\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*\))(?:\s+(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])))?(?:\s*,\s*(?:#(?:[\da-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|rgb\(\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*\))(?:\s+(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])))?)+|-webkit-linear-gradient\((?:\s*(?:0|[+\-]?\d+(?:\.\d+)?(?:g?rad|deg)|(?:top|bottom|0|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])|[+\-]?\d+(?:\.\d+)?%)(?:\s+(?:left|right|0|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])|[+\-]?\d+(?:\.\d+)?%))?)\s*,)?\s*(?:#(?:[\da-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|rgb\(\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*\))(?:\s+(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])))?(?:\s*,\s*(?:#(?:[\da-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|rgb\(\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*\))(?:\s+(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])))?)+|linear-gradient\((?:\s*(?:0|[+\-]?\d+(?:\.\d+)?(?:g?rad|deg)|to\s+(?:0|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])|[+\-]?\d+(?:\.\d+)?%)\s*(?:0|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])|[+\-]?\d+(?:\.\d+)?%))\s*,)?\s*(?:#(?:[\da-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|rgb\(\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*\))(?:\s+(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])))?(?:\s*,\s*(?:#(?:[\da-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|rgb\(\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*,\s*(?:\d+|0|\d+(?:\.\d+)?%)\s*\))(?:\s+(?:0|[+\-]?\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])))?)+) *\))+ *$/i,
            cssPropBits:16,
            cssLitGroup:[ i[35], i[54] ]
        },
        "background-position":{
            cssExtra:e[0],
            cssPropBits:5,
            cssLitGroup:[ i[24], i[30], i[35], i[42] ]
        },
        "background-repeat":{
            cssExtra:e[0],
            cssPropBits:0,
            cssLitGroup:[ i[17], i[35], i[57] ]
        },
        border:{
            cssExtra:e[1],
            cssPropBits:7,
            cssLitGroup:[ i[0], i[9], i[34], i[46], i[47], i[48], i[52], i[54], i[62] ]
        },
        "border-bottom":{
            cssExtra:e[1],
            cssPropBits:7,
            cssLitGroup:[ i[0], i[9], i[34], i[46], i[47], i[48], i[52], i[54], i[62] ]
        },
        "border-bottom-color":{
            cssExtra:e[1],
            cssPropBits:2,
            cssLitGroup:[ i[0], i[47], i[62] ]
        },
        "border-bottom-left-radius":{
            cssExtra:e[0],
            cssPropBits:5
        },
        "border-bottom-right-radius":{
            cssExtra:e[0],
            cssPropBits:5
        },
        "border-bottom-style":{
            cssPropBits:0,
            cssLitGroup:[ i[9], i[46], i[47], i[48], i[54] ]
        },
        "border-bottom-width":{
            cssPropBits:5,
            cssLitGroup:[ i[34], i[47], i[52] ]
        },
        "border-collapse":{
            cssPropBits:0,
            cssLitGroup:[ i[44], i[47], i[59] ]
        },
        "border-color":{
            cssExtra:RegExp("^ *(?:\\s*" + t[0] + "){1,4} *$", "i"),
            cssPropBits:2,
            cssLitGroup:[ i[0], i[47], i[62] ]
        },
        "border-left":{
            cssExtra:e[1],
            cssPropBits:7,
            cssLitGroup:[ i[0], i[9], i[34], i[46], i[47], i[48], i[52], i[54], i[62] ]
        },
        "border-left-color":{
            cssExtra:e[1],
            cssPropBits:2,
            cssLitGroup:[ i[0], i[47], i[62] ]
        },
        "border-left-style":{
            cssPropBits:0,
            cssLitGroup:[ i[9], i[46], i[47], i[48], i[54] ]
        },
        "border-left-width":{
            cssPropBits:5,
            cssLitGroup:[ i[34], i[47], i[52] ]
        },
        "border-radius":{
            cssExtra:e[0],
            cssPropBits:5,
            cssLitGroup:[ i[36] ]
        },
        "border-right":{
            cssExtra:e[1],
            cssPropBits:7,
            cssLitGroup:[ i[0], i[9], i[34], i[46], i[47], i[48], i[52], i[54], i[62] ]
        },
        "border-right-color":{
            cssExtra:e[1],
            cssPropBits:2,
            cssLitGroup:[ i[0], i[47], i[62] ]
        },
        "border-right-style":{
            cssPropBits:0,
            cssLitGroup:[ i[9], i[46], i[47], i[48], i[54] ]
        },
        "border-right-width":{
            cssPropBits:5,
            cssLitGroup:[ i[34], i[47], i[52] ]
        },
        "border-spacing":{
            cssExtra:e[0],
            cssPropBits:5,
            cssLitGroup:[ i[47] ]
        },
        "border-style":{
            cssPropBits:0,
            cssLitGroup:[ i[9], i[46], i[47], i[48], i[54] ]
        },
        "border-top":{
            cssExtra:e[1],
            cssPropBits:7,
            cssLitGroup:[ i[0], i[9], i[34], i[46], i[47], i[48], i[52], i[54], i[62] ]
        },
        "border-top-color":{
            cssExtra:e[1],
            cssPropBits:2,
            cssLitGroup:[ i[0], i[47], i[62] ]
        },
        "border-top-left-radius":{
            cssExtra:e[0],
            cssPropBits:5
        },
        "border-top-right-radius":{
            cssExtra:e[0],
            cssPropBits:5
        },
        "border-top-style":{
            cssPropBits:0,
            cssLitGroup:[ i[9], i[46], i[47], i[48], i[54] ]
        },
        "border-top-width":{
            cssPropBits:5,
            cssLitGroup:[ i[34], i[47], i[52] ]
        },
        "border-width":{
            cssPropBits:5,
            cssLitGroup:[ i[34], i[47], i[52] ]
        },
        bottom:{
            cssPropBits:5,
            cssLitGroup:[ i[38], i[47] ]
        },
        "box-shadow":{
            cssExtra:e[2],
            cssPropBits:7,
            cssLitGroup:[ i[0], i[35], i[48], i[54] ]
        },
        "caption-side":{
            cssPropBits:0,
            cssLitGroup:[ i[24], i[47] ]
        },
        clear:{
            cssPropBits:0,
            cssLitGroup:[ i[30], i[40], i[47], i[54] ]
        },
        clip:{
            cssExtra:/^ *\s*rect\(\s*(?:0|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])|auto)\s*,\s*(?:0|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])|auto)\s*,\s*(?:0|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])|auto)\s*,\s*(?:0|[+\-]?\d+(?:\.\d+)?(?:[cem]m|ex|in|p[ctx])|auto) *\) *$/i,
            cssPropBits:0,
            cssLitGroup:[ i[38], i[47] ]
        },
        color:{
            cssExtra:e[1],
            cssPropBits:130,
            cssLitGroup:[ i[0], i[47] ]
        },
        content:{
            cssPropBits:0
        },
        "counter-increment":{
            cssExtra:e[0],
            cssPropBits:5,
            cssLitGroup:[ i[47], i[54] ]
        },
        "counter-reset":{
            cssExtra:e[0],
            cssPropBits:5,
            cssLitGroup:[ i[47], i[54] ]
        },
        cue:{
            cssPropBits:16,
            cssLitGroup:[ i[47], i[54] ]
        },
        "cue-after":{
            cssPropBits:16,
            cssLitGroup:[ i[47], i[54] ]
        },
        "cue-before":{
            cssPropBits:16,
            cssLitGroup:[ i[47], i[54] ]
        },
        cursor:{
            cssExtra:e[0],
            cssPropBits:144,
            cssLitGroup:[ i[1], i[35], i[38], i[47] ]
        },
        direction:{
            cssPropBits:0,
            cssLitGroup:[ i[31], i[47] ]
        },
        display:{
            cssPropBits:32,
            cssLitGroup:[ i[2], i[47], i[54] ]
        },
        elevation:{
            cssPropBits:5,
            cssLitGroup:[ i[13], i[47] ]
        },
        "empty-cells":{
            cssPropBits:0,
            cssLitGroup:[ i[27], i[47] ]
        },
        filter:{
            cssExtra:/^ *(?:\s*alpha\(\s*opacity\s*=\s*(?:0|\d+(?:\.\d+)?%|[+\-]?\d+(?:\.\d+)?) *\))+ *$/i,
            cssPropBits:32
        },
        "float":{
            cssAlternates:[ "cssFloat", "styleFloat" ],
            cssPropBits:32,
            cssLitGroup:[ i[30], i[47], i[54] ]
        },
        font:{
            cssExtra:e[0],
            cssPropBits:9,
            cssLitGroup:[ i[4], i[7], i[11], i[15], i[29], i[35], i[36], i[47], i[52], i[55], i[60] ]
        },
        "font-family":{
            cssExtra:e[0],
            cssPropBits:8,
            cssLitGroup:[ i[15], i[35], i[47] ]
        },
        "font-size":{
            cssPropBits:1,
            cssLitGroup:[ i[7], i[47], i[52] ]
        },
        "font-stretch":{
            cssPropBits:0,
            cssLitGroup:[ i[5], i[55] ]
        },
        "font-style":{
            cssPropBits:0,
            cssLitGroup:[ i[29], i[47], i[55] ]
        },
        "font-variant":{
            cssPropBits:0,
            cssLitGroup:[ i[47], i[55], i[60] ]
        },
        "font-weight":{
            cssPropBits:0,
            cssLitGroup:[ i[4], i[47], i[55] ]
        },
        height:{
            cssPropBits:37,
            cssLitGroup:[ i[38], i[47] ]
        },
        left:{
            cssPropBits:37,
            cssLitGroup:[ i[38], i[47] ]
        },
        "letter-spacing":{
            cssPropBits:5,
            cssLitGroup:[ i[47], i[55] ]
        },
        "line-height":{
            cssPropBits:1,
            cssLitGroup:[ i[47], i[55] ]
        },
        "list-style":{
            cssPropBits:16,
            cssLitGroup:[ i[3], i[28], i[47], i[54] ]
        },
        "list-style-image":{
            cssPropBits:16,
            cssLitGroup:[ i[47], i[54] ]
        },
        "list-style-position":{
            cssPropBits:0,
            cssLitGroup:[ i[28], i[47] ]
        },
        "list-style-type":{
            cssPropBits:0,
            cssLitGroup:[ i[3], i[47], i[54] ]
        },
        margin:{
            cssPropBits:5,
            cssLitGroup:[ i[38], i[47] ]
        },
        "margin-bottom":{
            cssPropBits:5,
            cssLitGroup:[ i[38], i[47] ]
        },
        "margin-left":{
            cssPropBits:5,
            cssLitGroup:[ i[38], i[47] ]
        },
        "margin-right":{
            cssPropBits:5,
            cssLitGroup:[ i[38], i[47] ]
        },
        "margin-top":{
            cssPropBits:5,
            cssLitGroup:[ i[38], i[47] ]
        },
        "max-height":{
            cssPropBits:1,
            cssLitGroup:[ i[38], i[47], i[54] ]
        },
        "max-width":{
            cssPropBits:1,
            cssLitGroup:[ i[38], i[47], i[54] ]
        },
        "min-height":{
            cssPropBits:1,
            cssLitGroup:[ i[38], i[47] ]
        },
        "min-width":{
            cssPropBits:1,
            cssLitGroup:[ i[38], i[47] ]
        },
        opacity:{
            cssPropBits:33,
            cssLitGroup:[ i[47] ]
        },
        outline:{
            cssExtra:e[1],
            cssPropBits:7,
            cssLitGroup:[ i[0], i[9], i[34], i[46], i[47], i[48], i[49], i[52], i[54] ]
        },
        "outline-color":{
            cssExtra:e[1],
            cssPropBits:2,
            cssLitGroup:[ i[0], i[47], i[49] ]
        },
        "outline-style":{
            cssPropBits:0,
            cssLitGroup:[ i[9], i[46], i[47], i[48], i[54] ]
        },
        "outline-width":{
            cssPropBits:5,
            cssLitGroup:[ i[34], i[47], i[52] ]
        },
        overflow:{
            cssPropBits:32,
            cssLitGroup:[ i[38], i[46], i[47], i[58], i[63] ]
        },
        "overflow-x":{
            cssPropBits:0,
            cssLitGroup:[ i[32], i[38], i[46], i[58], i[63] ]
        },
        "overflow-y":{
            cssPropBits:0,
            cssLitGroup:[ i[32], i[38], i[46], i[58], i[63] ]
        },
        padding:{
            cssPropBits:1,
            cssLitGroup:[ i[47] ]
        },
        "padding-bottom":{
            cssPropBits:33,
            cssLitGroup:[ i[47] ]
        },
        "padding-left":{
            cssPropBits:33,
            cssLitGroup:[ i[47] ]
        },
        "padding-right":{
            cssPropBits:33,
            cssLitGroup:[ i[47] ]
        },
        "padding-top":{
            cssPropBits:33,
            cssLitGroup:[ i[47] ]
        },
        "page-break-after":{
            cssPropBits:0,
            cssLitGroup:[ i[30], i[37], i[38], i[39], i[47] ]
        },
        "page-break-before":{
            cssPropBits:0,
            cssLitGroup:[ i[30], i[37], i[38], i[39], i[47] ]
        },
        "page-break-inside":{
            cssPropBits:0,
            cssLitGroup:[ i[38], i[39], i[47] ]
        },
        pause:{
            cssPropBits:5,
            cssLitGroup:[ i[47] ]
        },
        "pause-after":{
            cssPropBits:5,
            cssLitGroup:[ i[47] ]
        },
        "pause-before":{
            cssPropBits:5,
            cssLitGroup:[ i[47] ]
        },
        pitch:{
            cssPropBits:5,
            cssLitGroup:[ i[19], i[47], i[52] ]
        },
        "pitch-range":{
            cssPropBits:5,
            cssLitGroup:[ i[47] ]
        },
        "play-during":{
            cssExtra:e[0],
            cssPropBits:16,
            cssLitGroup:[ i[38], i[47], i[53], i[54], i[57] ]
        },
        position:{
            cssPropBits:32,
            cssLitGroup:[ i[20], i[47] ]
        },
        quotes:{
            cssExtra:e[0],
            cssPropBits:0,
            cssLitGroup:[ i[47], i[54] ]
        },
        richness:{
            cssPropBits:5,
            cssLitGroup:[ i[47] ]
        },
        right:{
            cssPropBits:37,
            cssLitGroup:[ i[38], i[47] ]
        },
        speak:{
            cssPropBits:0,
            cssLitGroup:[ i[47], i[54], i[55], i[61] ]
        },
        "speak-header":{
            cssPropBits:0,
            cssLitGroup:[ i[37], i[47], i[56] ]
        },
        "speak-numeral":{
            cssPropBits:0,
            cssLitGroup:[ i[26], i[47] ]
        },
        "speak-punctuation":{
            cssPropBits:0,
            cssLitGroup:[ i[43], i[47], i[54] ]
        },
        "speech-rate":{
            cssPropBits:5,
            cssLitGroup:[ i[12], i[47], i[52] ]
        },
        stress:{
            cssPropBits:5,
            cssLitGroup:[ i[47] ]
        },
        "table-layout":{
            cssPropBits:0,
            cssLitGroup:[ i[38], i[45], i[47] ]
        },
        "text-align":{
            cssPropBits:0,
            cssLitGroup:[ i[30], i[42], i[47], i[50] ]
        },
        "text-decoration":{
            cssPropBits:0,
            cssLitGroup:[ i[18], i[47], i[54] ]
        },
        "text-indent":{
            cssPropBits:5,
            cssLitGroup:[ i[47] ]
        },
        "text-overflow":{
            cssPropBits:0,
            cssLitGroup:[ i[25] ]
        },
        "text-shadow":{
            cssExtra:e[2],
            cssPropBits:7,
            cssLitGroup:[ i[0], i[35], i[48], i[54] ]
        },
        "text-transform":{
            cssPropBits:0,
            cssLitGroup:[ i[21], i[47], i[54] ]
        },
        "text-wrap":{
            cssPropBits:0,
            cssLitGroup:[ i[33], i[54], i[55] ]
        },
        top:{
            cssPropBits:37,
            cssLitGroup:[ i[38], i[47] ]
        },
        "unicode-bidi":{
            cssPropBits:0,
            cssLitGroup:[ i[23], i[47], i[55] ]
        },
        "vertical-align":{
            cssPropBits:5,
            cssLitGroup:[ i[10], i[24], i[47] ]
        },
        visibility:{
            cssPropBits:32,
            cssLitGroup:[ i[44], i[46], i[47], i[63] ]
        },
        "voice-family":{
            cssExtra:e[0],
            cssPropBits:8,
            cssLitGroup:[ i[22], i[35], i[47] ]
        },
        volume:{
            cssPropBits:1,
            cssLitGroup:[ i[16], i[47], i[52] ]
        },
        "white-space":{
            cssPropBits:0,
            cssLitGroup:[ i[8], i[47], i[55] ]
        },
        width:{
            cssPropBits:33,
            cssLitGroup:[ i[38], i[47] ]
        },
        "word-spacing":{
            cssPropBits:5,
            cssLitGroup:[ i[47], i[55] ]
        },
        "word-wrap":{
            cssPropBits:0,
            cssLitGroup:[ i[41], i[55] ]
        },
        "z-index":{
            cssPropBits:69,
            cssLitGroup:[ i[38], i[47] ]
        },
        zoom:{
            cssPropBits:1,
            cssLitGroup:[ i[55] ]
        }
    };
}();

"undefined" != typeof window && (window.cssSchema = cssSchema);

// Copyright (C) 2011 Google Inc.
var lexCss, decodeCss;

!function() {
    function t(t) {
        var e = parseInt(t.substring(1), 16);
        return e > 65535 ? (e -= 65536, String.fromCharCode(55296 + (e >> 10), 56320 + (1023 & e))) :e == e ? String.fromCharCode(e) :t[1] < " " ? "" :t[1];
    }
    function e(t, e) {
        return '"' + t.replace(/[\u0000-\u001f\\\"<>]/g, e) + '"';
    }
    function i(t) {
        return o[t] || (o[t] = "\\" + t.charCodeAt(0).toString(16) + " ");
    }
    function n(t) {
        return r[t] || (r[t] = ("" > t ? "%0" :"%") + t.charCodeAt(0).toString(16));
    }
    var o = {
        "\\":"\\\\"
    }, r = {
        "\\":"%5c"
    }, s = "[\\t\\n\\f ]", a = s + "*", l = "[\\n\\f]", c = "[\\ud800-\\udbff][\\udc00-\\udfff]", h = "[\\u0080-\\ud7ff\\ue000-\\ufffd]|" + c, u = "[0-9a-fA-F]{1,6}" + s + "?", d = "(?:" + u + "|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|" + c + ")", p = "\\\\" + d, f = "(?:[\\t\\x21\\x23-\\x26\\x28-\\x5b\\x5d-\\x7e]|" + h + "|" + p + ")", g = "[^'\"\\n\\f\\\\]|\\\\[\\s\\S]", m = "\"(?:'|" + g + ')*"|\'(?:"|' + g + ")*'", _ = "[-+]?(?:[0-9]+(?:[.][0-9]+)?|[.][0-9]+)", v = "(?:[a-zA-Z_]|" + h + "|" + p + ")", y = "(?:[a-zA-Z0-9_-]|" + h + "|" + p + ")", b = "-?" + v + y + "*", w = "(?:@?-?" + v + "|#)" + y + "*", C = _ + "(?:%|" + b + ")?", T = "url[(]" + a + "(?:" + m + "|" + f + "*)" + a + "[)]", D = "U[+][0-9A-F?]{1,6}(?:-[0-9A-F]{1,6})?", E = "<!--", x = "-->", S = s + "+", O = "/(?:[*][^*]*[*]+(?:[^/][^*]*[*]+)*/|/[^\\n\\f]*)", k = "(?!url[(])" + b + "[(]", I = "[~|^$*]=", R = "[^\"'\\\\/]|/(?![/*])", P = "\\uFEFF", N = new RegExp([ P, D, T, k, w, m, C, E, x, S, O, I, R ].join("|"), "gi");
    decodeCss = function(e) {
        return e.replace(new RegExp("\\\\(?:" + d + "|" + l + ")", "g"), t);
    }, lexCss = function(t) {
        t = "" + t;
        for (var o = t.replace(/\r\n?/g, "\n").match(N) || [], r = 0, s = " ", l = 0, c = o.length; c > l; ++l) {
            var h = decodeCss(o[l]), u = h.length, d = h.charCodeAt(0);
            h = d == '"'.charCodeAt(0) || d == "'".charCodeAt(0) ? e(h.substring(1, u - 1), i) :d == "/".charCodeAt(0) && u > 1 || "\\" == h || h == x || h == E || "﻿" == h || d <= " ".charCodeAt(0) ? " " :/url\(/i.test(h) ? "url(" + e(h.replace(new RegExp("^url\\(" + a + "[\"']?|[\"']?" + a + "\\)$", "gi"), ""), n) + ")" :h, 
            (s != h || " " != h) && (o[r++] = s = h);
        }
        return o.length = r, o;
    };
}(), "undefined" != typeof window && (window.lexCss = lexCss, window.decodeCss = decodeCss);

// Copyright (C) 2010 Google Inc.
var URI = function() {
    function t(t) {
        var e = ("" + t).match(p);
        return e ? new l(c(e[1]), c(e[2]), c(e[3]), c(e[4]), c(e[5]), c(e[6]), c(e[7])) :null;
    }
    function e(t, e, r, s, a, c, h) {
        var u = new l(n(t, f), n(e, f), i(r), s > 0 ? s.toString() :null, n(a, g), null, i(h));
        return c && ("string" == typeof c ? u.setRawQuery(c.replace(/[^?&=0-9A-Za-z_\-~.%]/g, o)) :u.setAllParameters(c)), 
        u;
    }
    function i(t) {
        return "string" == typeof t ? encodeURIComponent(t) :null;
    }
    function n(t, e) {
        return "string" == typeof t ? encodeURI(t).replace(e, o) :null;
    }
    function o(t) {
        var e = t.charCodeAt(0);
        return "%" + "0123456789ABCDEF".charAt(e >> 4 & 15) + "0123456789ABCDEF".charAt(15 & e);
    }
    function r(t) {
        return t.replace(/(^|\/)\.(?:\/|$)/g, "$1").replace(/\/{2,}/g, "/");
    }
    function s(t) {
        if (null === t) return null;
        for (var e, i = r(t), n = u; (e = i.replace(n, "$1")) != i; i = e) ;
        return i;
    }
    function a(t, e) {
        var i = t.clone(), n = e.hasScheme();
        n ? i.setRawScheme(e.getRawScheme()) :n = e.hasCredentials(), n ? i.setRawCredentials(e.getRawCredentials()) :n = e.hasDomain(), 
        n ? i.setRawDomain(e.getRawDomain()) :n = e.hasPort();
        var o = e.getRawPath(), r = s(o);
        if (n) i.setPort(e.getPort()), r = r && r.replace(d, ""); else if (n = !!o) {
            if (47 !== r.charCodeAt(0)) {
                var a = s(i.getRawPath() || "").replace(d, ""), l = a.lastIndexOf("/") + 1;
                r = s((l ? a.substring(0, l) :"") + s(o)).replace(d, "");
            }
        } else r = r && r.replace(d, ""), r !== o && i.setRawPath(r);
        return n ? i.setRawPath(r) :n = e.hasQuery(), n ? i.setRawQuery(e.getRawQuery()) :n = e.hasFragment(), 
        n && i.setRawFragment(e.getRawFragment()), i;
    }
    function l(t, e, i, n, o, r, s) {
        this.scheme_ = t, this.credentials_ = e, this.domain_ = i, this.port_ = n, this.path_ = o, 
        this.query_ = r, this.fragment_ = s, this.paramCache_ = null;
    }
    function c(t) {
        return "string" == typeof t && t.length > 0 ? t :null;
    }
    var h = new RegExp("(/|^)(?:[^./][^/]*|\\.{2,}(?:[^./][^/]*)|\\.{3,}[^/]*)/\\.\\.(?:/|$)"), u = new RegExp(h), d = /^(?:\.\.\/)*(?:\.\.$)?/;
    l.prototype.toString = function() {
        var t = [];
        return null !== this.scheme_ && t.push(this.scheme_, ":"), null !== this.domain_ && (t.push("//"), 
        null !== this.credentials_ && t.push(this.credentials_, "@"), t.push(this.domain_), 
        null !== this.port_ && t.push(":", this.port_.toString())), null !== this.path_ && t.push(this.path_), 
        null !== this.query_ && t.push("?", this.query_), null !== this.fragment_ && t.push("#", this.fragment_), 
        t.join("");
    }, l.prototype.clone = function() {
        return new l(this.scheme_, this.credentials_, this.domain_, this.port_, this.path_, this.query_, this.fragment_);
    }, l.prototype.getScheme = function() {
        return this.scheme_ && decodeURIComponent(this.scheme_);
    }, l.prototype.getRawScheme = function() {
        return this.scheme_;
    }, l.prototype.setScheme = function(t) {
        return this.scheme_ = n(t, f), this;
    }, l.prototype.setRawScheme = function(t) {
        return this.scheme_ = t ? t :null, this;
    }, l.prototype.hasScheme = function() {
        return null !== this.scheme_;
    }, l.prototype.getCredentials = function() {
        return this.credentials_ && decodeURIComponent(this.credentials_);
    }, l.prototype.getRawCredentials = function() {
        return this.credentials_;
    }, l.prototype.setCredentials = function(t) {
        return this.credentials_ = n(t, f), this;
    }, l.prototype.setRawCredentials = function(t) {
        return this.credentials_ = t ? t :null, this;
    }, l.prototype.hasCredentials = function() {
        return null !== this.credentials_;
    }, l.prototype.getDomain = function() {
        return this.domain_ && decodeURIComponent(this.domain_);
    }, l.prototype.getRawDomain = function() {
        return this.domain_;
    }, l.prototype.setDomain = function(t) {
        return this.setRawDomain(t && encodeURIComponent(t));
    }, l.prototype.setRawDomain = function(t) {
        return this.domain_ = t ? t :null, this.setRawPath(this.path_);
    }, l.prototype.hasDomain = function() {
        return null !== this.domain_;
    }, l.prototype.getPort = function() {
        return this.port_ && decodeURIComponent(this.port_);
    }, l.prototype.setPort = function(t) {
        if (t) {
            if (t = Number(t), t !== (65535 & t)) throw new Error("Bad port number " + t);
            this.port_ = "" + t;
        } else this.port_ = null;
        return this;
    }, l.prototype.hasPort = function() {
        return null !== this.port_;
    }, l.prototype.getPath = function() {
        return this.path_ && decodeURIComponent(this.path_);
    }, l.prototype.getRawPath = function() {
        return this.path_;
    }, l.prototype.setPath = function(t) {
        return this.setRawPath(n(t, g));
    }, l.prototype.setRawPath = function(t) {
        return t ? (t = String(t), this.path_ = !this.domain_ || /^\//.test(t) ? t :"/" + t) :this.path_ = null, 
        this;
    }, l.prototype.hasPath = function() {
        return null !== this.path_;
    }, l.prototype.getQuery = function() {
        return this.query_ && decodeURIComponent(this.query_).replace(/\+/g, " ");
    }, l.prototype.getRawQuery = function() {
        return this.query_;
    }, l.prototype.setQuery = function(t) {
        return this.paramCache_ = null, this.query_ = i(t), this;
    }, l.prototype.setRawQuery = function(t) {
        return this.paramCache_ = null, this.query_ = t ? t :null, this;
    }, l.prototype.hasQuery = function() {
        return null !== this.query_;
    }, l.prototype.setAllParameters = function(t) {
        if ("object" == typeof t && !(t instanceof Array) && (t instanceof Object || "[object Array]" !== Object.prototype.toString.call(t))) {
            var e = [], i = -1;
            for (var n in t) {
                var o = t[n];
                "string" == typeof o && (e[++i] = n, e[++i] = o);
            }
            t = e;
        }
        this.paramCache_ = null;
        for (var r = [], s = "", a = 0; a < t.length; ) {
            var n = t[a++], o = t[a++];
            r.push(s, encodeURIComponent(n.toString())), s = "&", o && r.push("=", encodeURIComponent(o.toString()));
        }
        return this.query_ = r.join(""), this;
    }, l.prototype.checkParameterCache_ = function() {
        if (!this.paramCache_) {
            var t = this.query_;
            if (t) {
                for (var e = t.split(/[&\?]/), i = [], n = -1, o = 0; o < e.length; ++o) {
                    var r = e[o].match(/^([^=]*)(?:=(.*))?$/);
                    i[++n] = decodeURIComponent(r[1]).replace(/\+/g, " "), i[++n] = decodeURIComponent(r[2] || "").replace(/\+/g, " ");
                }
                this.paramCache_ = i;
            } else this.paramCache_ = [];
        }
    }, l.prototype.setParameterValues = function(t, e) {
        "string" == typeof e && (e = [ e ]), this.checkParameterCache_();
        for (var i = 0, n = this.paramCache_, o = [], r = 0; r < n.length; r += 2) t === n[r] ? i < e.length && o.push(t, e[i++]) :o.push(n[r], n[r + 1]);
        for (;i < e.length; ) o.push(t, e[i++]);
        return this.setAllParameters(o), this;
    }, l.prototype.removeParameter = function(t) {
        return this.setParameterValues(t, []);
    }, l.prototype.getAllParameters = function() {
        return this.checkParameterCache_(), this.paramCache_.slice(0, this.paramCache_.length);
    }, l.prototype.getParameterValues = function(t) {
        this.checkParameterCache_();
        for (var e = [], i = 0; i < this.paramCache_.length; i += 2) t === this.paramCache_[i] && e.push(this.paramCache_[i + 1]);
        return e;
    }, l.prototype.getParameterMap = function() {
        this.checkParameterCache_();
        for (var t = {}, e = 0; e < this.paramCache_.length; e += 2) {
            var i = this.paramCache_[e++], n = this.paramCache_[e++];
            i in t ? t[i].push(n) :t[i] = [ n ];
        }
        return t;
    }, l.prototype.getParameterValue = function(t) {
        this.checkParameterCache_();
        for (var e = 0; e < this.paramCache_.length; e += 2) if (t === this.paramCache_[e]) return this.paramCache_[e + 1];
        return null;
    }, l.prototype.getFragment = function() {
        return this.fragment_ && decodeURIComponent(this.fragment_);
    }, l.prototype.getRawFragment = function() {
        return this.fragment_;
    }, l.prototype.setFragment = function(t) {
        return this.fragment_ = t ? encodeURIComponent(t) :null, this;
    }, l.prototype.setRawFragment = function(t) {
        return this.fragment_ = t ? t :null, this;
    }, l.prototype.hasFragment = function() {
        return null !== this.fragment_;
    };
    var p = new RegExp("^(?:([^:/?#]+):)?(?://(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"), f = /[#\/\?@]/g, g = /[\#\?]/g;
    return l.parse = t, l.create = e, l.resolve = a, l.collapse_dots = s, l.utils = {
        mimeTypeOf:function(e) {
            var i = t(e);
            return /\.html$/.test(i.getPath()) ? "text/html" :"application/javascript";
        },
        resolve:function(e, i) {
            return e ? a(t(e), t(i)).toString() :"" + i;
        }
    }, l;
}();

"undefined" != typeof window && (window.URI = URI);

// Copyright (C) 2011 Google Inc.
var sanitizeCssProperty = function() {
    function t(t) {
        return "string" == typeof t ? 'url("' + t.replace(a, e) + '")' :s;
    }
    function e(t) {
        return l[t];
    }
    function i(t, e) {
        return t ? URI.utils.resolve(t, e) :e;
    }
    function n(t, e, i) {
        if (!i) return null;
        var n = ("" + t).match(c);
        return !n || n[1] && !h.test(n[1]) ? null :i(t, e);
    }
    function o(t) {
        for (var e = {}, i = t.length; --i >= 0; ) for (var n = t[i], o = n.length; --o >= 0; ) e[n[o]] = u;
        return e;
    }
    function r(t, e) {
        for (var i = 1, n = e + 1, o = t.length; o > n && i; ) {
            var r = t[n++];
            i += -1 != r.indexOf("(") ? 1 :")" === r ? -1 :0;
        }
        return n;
    }
    var s = 'url("about:blank")', a = /[\n\f\r\"\'()*<>]/g, l = {
        "\n":"%0a",
        "\f":"%0c",
        "\r":"%0d",
        '"':"%22",
        "'":"%27",
        "(":"%28",
        ")":"%29",
        "*":"%2a",
        "<":"%3c",
        ">":"%3e"
    }, c = new RegExp("^(?:([^:/?# ]+):)?"), h = /^(?:https?|mailto)$/i, u = {};
    return function(e, a, l, c, h) {
        for (var d = a.cssPropBits, p = d & (CSS_PROP_BIT_QSTRING_CONTENT | CSS_PROP_BIT_QSTRING_URL), f = 0/0, g = 0, m = 0; g < l.length; ++g) {
            var _, v, y, b, w, C, T, D = l[g].toLowerCase(), E = D.charCodeAt(0);
            D = E === " ".charCodeAt(0) ? "" :E === '"'.charCodeAt(0) ? p === CSS_PROP_BIT_QSTRING_URL && c ? t(n(i(h, decodeCss(l[g].substring(1, D.length - 1))), e, c)) :p === CSS_PROP_BIT_QSTRING_CONTENT ? D :"" :E === "#".charCodeAt(0) && /^#(?:[0-9a-f]{3}){1,2}$/.test(D) ? d & CSS_PROP_BIT_HASH_VALUE ? D :"" :"0".charCodeAt(0) <= E && E <= "9".charCodeAt(0) ? d & CSS_PROP_BIT_QUANTITY ? d & CSS_PROP_BIT_Z_INDEX ? D.match(/^\d{1,7}$/) ? D :"" :D :"" :(_ = D.charCodeAt(1), 
            v = D.charCodeAt(2), y = "0".charCodeAt(0) <= _ && _ <= "9".charCodeAt(0), b = "0".charCodeAt(0) <= v && v <= "9".charCodeAt(0), 
            E === "+".charCodeAt(0) && (y || _ === ".".charCodeAt(0) && b) ? d & CSS_PROP_BIT_QUANTITY ? d & CSS_PROP_BIT_Z_INDEX ? D.match(/^\+\d{1,7}$/) ? D :"" :(y ? "" :"0") + D.substring(1) :"" :E === "-".charCodeAt(0) && (y || _ === ".".charCodeAt(0) && b) ? d & CSS_PROP_BIT_NEGATIVE_QUANTITY ? d & CSS_PROP_BIT_Z_INDEX ? D.match(/^\-\d{1,7}$/) ? D :"" :(y ? "-" :"-0") + D.substring(1) :d & CSS_PROP_BIT_QUANTITY ? "0" :"" :E === ".".charCodeAt(0) && y ? d & CSS_PROP_BIT_QUANTITY ? "0" + D :"" :"url(" === D.substring(0, 4) ? c && p & CSS_PROP_BIT_QSTRING_URL ? t(n(i(h, l[g].substring(5, D.length - 2)), e, c)) :"" :("(" === D.charAt(D.length - 1) && (w = r(l, g), 
            l.splice(g, w - g, D = l.slice(g, w).join(" "))), C = a.cssLitGroup, T = C ? a.cssLitMap || (a.cssLitMap = o(C)) :u, 
            T[D] === u || a.cssExtra && a.cssExtra.test(D) ? D :/^\w+$/.test(D) && p === CSS_PROP_BIT_QSTRING_CONTENT ? f + 1 === m ? (l[f] = l[f].substring(0, l[f].length - 1) + " " + D + '"', 
            D = "") :(f = m, '"' + D + '"') :"")), D && (l[m++] = D);
        }
        1 === m && l[0] === s && (m = 0), l.length = m;
    };
}(), sanitizeStylesheet = function() {
    function t(t) {
        for (var e = !1, i = 0, n = t.length; n - 1 > i; ++i) {
            var o = t[i];
            ":" === t[i + 1] && (e = !(cssSchema[o].cssPropBits & CSS_PROP_BIT_ALLOWED_IN_LINK)), 
            e && (t[i] = ""), ";" === o && (e = !1);
        }
        return t.join("");
    }
    var e = {}, i = {
        braille:e,
        embossed:e,
        handheld:e,
        print:e,
        projection:e,
        screen:e,
        speech:e,
        tty:e,
        tv:e
    };
    return function(n, o, r, s) {
        function a() {
            h = 0 !== c.length && null !== c[c.length - 1];
        }
        var l = void 0, c = [], h = !1;
        return parseCssStylesheet(o, {
            startStylesheet:function() {
                l = [];
            },
            endStylesheet:function() {},
            startAtrule:function(t, n) {
                h ? t = null :"@media" === t ? (n = n.filter(function(t) {
                    return i[t] == e;
                }), n.length ? l.push(t, n.join(","), "{") :t = null) :("@import" === t && window.console && window.console.log("@import " + n.join(" ") + " elided"), 
                t = null), h = !t, c.push(t);
            },
            endAtrule:function() {
                c.pop();
                h || l.push(";"), a();
            },
            startBlock:function() {
                h || l.push("{");
            },
            endBlock:function() {
                h || (l.push("}"), h = !0);
            },
            startRuleset:function(t) {
                var e = void 0, i = !1;
                if (!h) {
                    var n = sanitizeCssSelectors(t, r), o = n[0];
                    if (e = n[1], o.length || e.length) {
                        var s = o.join(", ");
                        s || (s = "head > html", i = !0), l.push(s, "{");
                    } else h = !0;
                }
                c.push(h ? null :{
                    historySensitiveSelectors:e,
                    endOfSelectors:l.length - 1,
                    removeHistoryInsensitiveSelectors:i
                });
            },
            endRuleset:function() {
                var e = c.pop(), i = l.length;
                if (!h && (l.push("}"), e)) {
                    var n = e.historySensitiveSelectors;
                    if (n.length) {
                        var o = l.slice(e.endOfSelectors);
                        l.push(n.join(", "), t(o));
                    }
                }
                e && e.removeHistoryInsensitiveSelectors && l.splice(e.endOfSelectors - 1, i + 1), 
                a();
            },
            declaration:function(t, e) {
                if (!h) {
                    var i = cssSchema[t];
                    i && (sanitizeCssProperty(t, i, e, s, n), e.length && l.push(t, ":", e.join(" "), ";"));
                }
            }
        }), l.join("");
    };
}();

// Copyright (C) 2010 Google Inc.
if ("undefined" != typeof window && (window.sanitizeCssProperty = sanitizeCssProperty, 
window.sanitizeCssSelectors = sanitizeCssSelectors, window.sanitizeStylesheet = sanitizeStylesheet), 
"i" !== "I".toLowerCase()) throw "I/i problem";

var parseCssStylesheet, parseCssDeclarations;

!function() {
    function t(t, i, o, r) {
        if (o > i) {
            var s = t[i];
            return "@" === s.charAt(0) ? e(t, i, o, r, !0) :n(t, i, o, r);
        }
        return i;
    }
    function e(t, e, n, o, r) {
        for (var s = e++; n > e && "{" !== t[e] && ";" !== t[e]; ) ++e;
        if (n > e && (r || ";" === t[e])) {
            var a = s + 1, l = e;
            n > a && " " === t[a] && ++a, l > a && " " === t[l - 1] && --l, o.startAtrule && o.startAtrule(t[s].toLowerCase(), t.slice(a, l)), 
            e = "{" === t[e] ? i(t, e, n, o) :e + 1, o.endAtrule && o.endAtrule();
        }
        return e;
    }
    function i(t, o, r, s) {
        for (++o, s.startBlock && s.startBlock(); r > o; ) {
            var a = t[o].charAt(0);
            if ("}" == a) {
                ++o;
                break;
            }
            " " === a || ";" === a ? o += 1 :o = "@" === a ? e(t, o, r, s, !1) :"{" === a ? i(t, o, r, s) :n(t, o, r, s);
        }
        return s.endBlock && s.endBlock(), o;
    }
    function n(t, e, i, n) {
        var s = e, a = o(t, e, i, !0);
        if (0 > a) return a = ~a, e === a ? a + 1 :a;
        e = a, a > s && " " === t[a - 1] && --a;
        var l = t[e];
        if (++e, "{" !== l) return e;
        for (n.startRuleset && n.startRuleset(t.slice(s, a)); i > e; ) {
            if (l = t[e], "}" === l) {
                ++e;
                break;
            }
            " " === l ? e += 1 :e = r(t, e, i, n);
        }
        return n.endRuleset && n.endRuleset(), i > e ? e + 1 :e;
    }
    function o(t, e, i, n) {
        for (var o, r = [], s = -1; i > e; ++e) if (o = t[e].charAt(0), "[" === o || "(" === o) r[++s] = o; else if ("]" === o && "[" === r[s] || ")" === o && "(" === r[s]) --s; else if ("{" === o || "}" === o || ";" === o || "@" === o || ":" === o && !n) break;
        return s >= 0 && (e = ~(e + 1)), e;
    }
    function r(t, e, i, n) {
        var r = t[e++];
        if (!s.test(r)) return e + 1;
        var a;
        if (i > e && " " === t[e] && ++e, e == i || ":" !== t[e]) {
            for (;i > e && ";" !== (a = t[e]) && "}" !== a; ) ++e;
            return e;
        }
        ++e, i > e && " " === t[e] && ++e;
        var l = e, c = o(t, e, i, !1);
        if (0 > c) c = ~c; else {
            for (var h = [], u = 0, d = l; c > d; ++d) a = t[d], " " !== a && (h[u++] = a);
            if (i > c) {
                do {
                    if (a = t[c], ";" === a || "}" === a) break;
                    u = 0;
                } while (++c < i);
                ";" === a && ++c;
            }
            u && n.declaration && n.declaration(r.toLowerCase(), h);
        }
        return c;
    }
    parseCssStylesheet = function(e, i) {
        var n = lexCss(e);
        i.startStylesheet && i.startStylesheet();
        for (var o = 0, r = n.length; r > o; ) o = " " === n[o] ? o + 1 :t(n, o, r, i);
        i.endStylesheet && i.endStylesheet();
    };
    var s = /^-?[a-z]/i;
    parseCssDeclarations = function(t, e) {
        for (var i = lexCss(t), n = 0, o = i.length; o > n; ) n = " " !== i[n] ? r(i, n, o, e) :n + 1;
    };
}(), "undefined" != typeof window && (window.parseCssStylesheet = parseCssStylesheet, 
window.parseCssDeclarations = parseCssDeclarations);

// Copyright Google Inc.
var html4 = {};

// Copyright (C) 2006 Google Inc.
if (html4.atype = {
    NONE:0,
    URI:1,
    URI_FRAGMENT:11,
    SCRIPT:2,
    STYLE:3,
    ID:4,
    IDREF:5,
    IDREFS:6,
    GLOBAL_NAME:7,
    LOCAL_NAME:8,
    CLASSES:9,
    FRAME_TARGET:10
}, html4.ATTRIBS = {
    "*::class":9,
    "*::dir":0,
    "*::id":4,
    "*::lang":0,
    "*::onclick":2,
    "*::ondblclick":2,
    "*::onkeydown":2,
    "*::onkeypress":2,
    "*::onkeyup":2,
    "*::onload":2,
    "*::onmousedown":2,
    "*::onmousemove":2,
    "*::onmouseout":2,
    "*::onmouseover":2,
    "*::onmouseup":2,
    "*::onscroll":2,
    "*::style":3,
    "*::title":0,
    "a::accesskey":0,
    "a::coords":0,
    "a::href":1,
    "a::hreflang":0,
    "a::name":7,
    "a::onblur":2,
    "a::onfocus":2,
    "a::rel":0,
    "a::rev":0,
    "a::shape":0,
    "a::tabindex":0,
    "a::target":10,
    "a::type":0,
    "area::accesskey":0,
    "area::alt":0,
    "area::coords":0,
    "area::href":1,
    "area::nohref":0,
    "area::onblur":2,
    "area::onfocus":2,
    "area::shape":0,
    "area::tabindex":0,
    "area::target":10,
    "bdo::dir":0,
    "blockquote::cite":1,
    "br::clear":0,
    "button::accesskey":0,
    "button::disabled":0,
    "button::name":8,
    "button::onblur":2,
    "button::onfocus":2,
    "button::tabindex":0,
    "button::type":0,
    "button::value":0,
    "canvas::height":0,
    "canvas::width":0,
    "caption::align":0,
    "col::align":0,
    "col::char":0,
    "col::charoff":0,
    "col::span":0,
    "col::valign":0,
    "col::width":0,
    "colgroup::align":0,
    "colgroup::char":0,
    "colgroup::charoff":0,
    "colgroup::span":0,
    "colgroup::valign":0,
    "colgroup::width":0,
    "del::cite":1,
    "del::datetime":0,
    "dir::compact":0,
    "div::align":0,
    "dl::compact":0,
    "font::color":0,
    "font::face":0,
    "font::size":0,
    "form::accept":0,
    "form::action":1,
    "form::autocomplete":0,
    "form::enctype":0,
    "form::method":0,
    "form::name":7,
    "form::onreset":2,
    "form::onsubmit":2,
    "form::target":10,
    "h1::align":0,
    "h2::align":0,
    "h3::align":0,
    "h4::align":0,
    "h5::align":0,
    "h6::align":0,
    "hr::align":0,
    "hr::noshade":0,
    "hr::size":0,
    "hr::width":0,
    "iframe::align":0,
    "iframe::frameborder":0,
    "iframe::height":0,
    "iframe::marginheight":0,
    "iframe::marginwidth":0,
    "iframe::width":0,
    "img::align":0,
    "img::alt":0,
    "img::border":0,
    "img::height":0,
    "img::hspace":0,
    "img::ismap":0,
    "img::name":7,
    "img::src":1,
    "img::usemap":11,
    "img::vspace":0,
    "img::width":0,
    "input::accept":0,
    "input::accesskey":0,
    "input::align":0,
    "input::alt":0,
    "input::autocomplete":0,
    "input::checked":0,
    "input::disabled":0,
    "input::ismap":0,
    "input::maxlength":0,
    "input::name":8,
    "input::onblur":2,
    "input::onchange":2,
    "input::onfocus":2,
    "input::onselect":2,
    "input::readonly":0,
    "input::size":0,
    "input::src":1,
    "input::tabindex":0,
    "input::type":0,
    "input::usemap":11,
    "input::value":0,
    "ins::cite":1,
    "ins::datetime":0,
    "label::accesskey":0,
    "label::for":5,
    "label::onblur":2,
    "label::onfocus":2,
    "legend::accesskey":0,
    "legend::align":0,
    "li::type":0,
    "li::value":0,
    "map::name":7,
    "menu::compact":0,
    "ol::compact":0,
    "ol::start":0,
    "ol::type":0,
    "optgroup::disabled":0,
    "optgroup::label":0,
    "option::disabled":0,
    "option::label":0,
    "option::selected":0,
    "option::value":0,
    "p::align":0,
    "pre::width":0,
    "q::cite":1,
    "select::disabled":0,
    "select::multiple":0,
    "select::name":8,
    "select::onblur":2,
    "select::onchange":2,
    "select::onfocus":2,
    "select::size":0,
    "select::tabindex":0,
    "table::align":0,
    "table::bgcolor":0,
    "table::border":0,
    "table::cellpadding":0,
    "table::cellspacing":0,
    "table::frame":0,
    "table::rules":0,
    "table::summary":0,
    "table::width":0,
    "tbody::align":0,
    "tbody::char":0,
    "tbody::charoff":0,
    "tbody::valign":0,
    "td::abbr":0,
    "td::align":0,
    "td::axis":0,
    "td::bgcolor":0,
    "td::char":0,
    "td::charoff":0,
    "td::colspan":0,
    "td::headers":6,
    "td::height":0,
    "td::nowrap":0,
    "td::rowspan":0,
    "td::scope":0,
    "td::valign":0,
    "td::width":0,
    "textarea::accesskey":0,
    "textarea::cols":0,
    "textarea::disabled":0,
    "textarea::name":8,
    "textarea::onblur":2,
    "textarea::onchange":2,
    "textarea::onfocus":2,
    "textarea::onselect":2,
    "textarea::readonly":0,
    "textarea::rows":0,
    "textarea::tabindex":0,
    "tfoot::align":0,
    "tfoot::char":0,
    "tfoot::charoff":0,
    "tfoot::valign":0,
    "th::abbr":0,
    "th::align":0,
    "th::axis":0,
    "th::bgcolor":0,
    "th::char":0,
    "th::charoff":0,
    "th::colspan":0,
    "th::headers":6,
    "th::height":0,
    "th::nowrap":0,
    "th::rowspan":0,
    "th::scope":0,
    "th::valign":0,
    "th::width":0,
    "thead::align":0,
    "thead::char":0,
    "thead::charoff":0,
    "thead::valign":0,
    "tr::align":0,
    "tr::bgcolor":0,
    "tr::char":0,
    "tr::charoff":0,
    "tr::valign":0,
    "ul::compact":0,
    "ul::type":0
}, html4.eflags = {
    OPTIONAL_ENDTAG:1,
    EMPTY:2,
    CDATA:4,
    RCDATA:8,
    UNSAFE:16,
    FOLDABLE:32,
    SCRIPT:64,
    STYLE:128
}, html4.ELEMENTS = {
    a:0,
    abbr:0,
    acronym:0,
    address:0,
    applet:16,
    area:2,
    article:0,
    aside:0,
    audio:0,
    b:0,
    base:18,
    basefont:18,
    bdi:0,
    bdo:0,
    big:0,
    blockquote:0,
    body:49,
    br:2,
    button:0,
    canvas:0,
    caption:0,
    center:0,
    cite:0,
    code:0,
    col:2,
    colgroup:1,
    data:0,
    datalist:0,
    dd:1,
    del:0,
    details:0,
    dfn:0,
    dir:0,
    div:0,
    dl:0,
    dt:1,
    em:0,
    fieldset:0,
    figcaption:0,
    figure:0,
    font:0,
    footer:0,
    form:0,
    frame:18,
    frameset:16,
    h1:0,
    h2:0,
    h3:0,
    h4:0,
    h5:0,
    h6:0,
    head:49,
    header:0,
    hgroup:0,
    hr:2,
    html:49,
    i:0,
    iframe:4,
    img:2,
    input:2,
    ins:0,
    isindex:18,
    kbd:0,
    label:0,
    legend:0,
    li:1,
    link:18,
    map:0,
    mark:0,
    menu:0,
    meta:18,
    meter:0,
    nav:0,
    nobr:0,
    noembed:4,
    noframes:20,
    noscript:20,
    object:16,
    ol:0,
    optgroup:0,
    option:1,
    output:0,
    p:1,
    param:18,
    pre:0,
    progress:0,
    q:0,
    s:0,
    samp:0,
    script:84,
    section:0,
    select:0,
    small:0,
    span:0,
    strike:0,
    strong:0,
    style:148,
    sub:0,
    summary:0,
    sup:0,
    table:0,
    tbody:1,
    td:1,
    textarea:8,
    tfoot:1,
    th:1,
    thead:1,
    time:0,
    title:24,
    tr:1,
    tt:0,
    u:0,
    ul:0,
    "var":0,
    video:0
}, html4.ueffects = {
    NOT_LOADED:0,
    SAME_DOCUMENT:1,
    NEW_DOCUMENT:2
}, html4.URIEFFECTS = {
    "a::href":2,
    "area::href":2,
    "blockquote::cite":0,
    "body::background":1,
    "del::cite":0,
    "form::action":2,
    "img::src":1,
    "input::src":1,
    "ins::cite":0,
    "q::cite":0
}, html4.ltypes = {
    UNSANDBOXED:2,
    SANDBOXED:1,
    DATA:0
}, html4.LOADERTYPES = {
    "a::href":2,
    "area::href":2,
    "blockquote::cite":2,
    "body::background":1,
    "del::cite":2,
    "form::action":2,
    "img::src":1,
    "input::src":1,
    "ins::cite":2,
    "q::cite":2
}, html4.ATTRIBS = html4.ATTRIBS, html4.ELEMENTS = html4.ELEMENTS, html4.URIEFFECTS = html4.URIEFFECTS, 
html4.LOADERTYPES = html4.LOADERTYPES, html4.atype = html4.atype, html4.eflags = html4.eflags, 
html4.ltypes = html4.ltypes, html4.ueffects = html4.ueffects, "undefined" != typeof window && (window.html4 = html4), 
"i" !== "I".toLowerCase()) throw "I/i problem";

var html = function(t) {
    function e(t) {
        if (t = t.toLowerCase(), I.hasOwnProperty(t)) return I[t];
        var e = t.match(R);
        return e ? String.fromCharCode(parseInt(e[1], 10)) :(e = t.match(P)) ? String.fromCharCode(parseInt(e[1], 16)) :"";
    }
    function i(t, i) {
        return e(i);
    }
    function n(t) {
        return t.replace(N, "");
    }
    function o(t) {
        return t.replace(A, i);
    }
    function r(t) {
        return ("" + t).replace(L, "&amp;").replace(z, "&lt;").replace(K, "&gt;").replace(F, "&#34;");
    }
    function s(t) {
        return t.replace(B, "&amp;$1").replace(z, "&lt;").replace(K, "&gt;");
    }
    function a(t) {
        var e = {
            cdata:t.cdata || t.cdata,
            comment:t.comment || t.comment,
            endDoc:t.endDoc || t.endDoc,
            endTag:t.endTag || t.endTag,
            pcdata:t.pcdata || t.pcdata,
            rcdata:t.rcdata || t.rcdata,
            startDoc:t.startDoc || t.startDoc,
            startTag:t.startTag || t.startTag
        };
        return function(t, i) {
            return l(t, e, i);
        };
    }
    function l(t, e, i) {
        var n = u(t), o = {
            noMoreGT:!1,
            noMoreEndComments:!1
        };
        h(e, n, 0, o, i);
    }
    function c(t, e, i, n, o) {
        return function() {
            h(t, e, i, n, o);
        };
    }
    function h(e, i, n, o, r) {
        try {
            e.startDoc && 0 == n && e.startDoc(r);
            for (var s, a, l, h = n, u = i.length; u > h; ) {
                var g = i[h++], m = i[h];
                switch (g) {
                  case "&":
                    M.test(m) ? (e.pcdata && e.pcdata("&" + m, r, G, c(e, i, h, o, r)), h++) :e.pcdata && e.pcdata("&amp;", r, G, c(e, i, h, o, r));
                    break;

                  case "</":
                    (s = /^([\w:]+)[^\'\"]*/.exec(m)) ? s[0].length === m.length && ">" === i[h + 1] ? (h += 2, 
                    l = s[1].toLowerCase(), e.endTag && e.endTag(l, r, G, c(e, i, h, o, r))) :h = d(i, h, e, r, G, o) :e.pcdata && e.pcdata("&lt;/", r, G, c(e, i, h, o, r));
                    break;

                  case "<":
                    if (s = /^([\w:]+)\s*\/?/.exec(m)) if (s[0].length === m.length && ">" === i[h + 1]) {
                        h += 2, l = s[1].toLowerCase(), e.startTag && e.startTag(l, [], r, G, c(e, i, h, o, r));
                        var _ = t.ELEMENTS[l];
                        if (_ & $) {
                            var v = {
                                name:l,
                                next:h,
                                eflags:_
                            };
                            h = f(i, v, e, r, G, o);
                        }
                    } else h = p(i, h, e, r, G, o); else e.pcdata && e.pcdata("&lt;", r, G, c(e, i, h, o, r));
                    break;

                  case "<!--":
                    if (!o.noMoreEndComments) {
                        for (a = h + 1; u > a && (">" !== i[a] || !/--$/.test(i[a - 1])); a++) ;
                        if (u > a) {
                            if (e.comment) {
                                var y = i.slice(h, a).join("");
                                e.comment(y.substr(0, y.length - 2), r, G, c(e, i, a + 1, o, r));
                            }
                            h = a + 1;
                        } else o.noMoreEndComments = !0;
                    }
                    o.noMoreEndComments && e.pcdata && e.pcdata("&lt;!--", r, G, c(e, i, h, o, r));
                    break;

                  case "<!":
                    if (/^\w/.test(m)) {
                        if (!o.noMoreGT) {
                            for (a = h + 1; u > a && ">" !== i[a]; a++) ;
                            u > a ? h = a + 1 :o.noMoreGT = !0;
                        }
                        o.noMoreGT && e.pcdata && e.pcdata("&lt;!", r, G, c(e, i, h, o, r));
                    } else e.pcdata && e.pcdata("&lt;!", r, G, c(e, i, h, o, r));
                    break;

                  case "<?":
                    if (!o.noMoreGT) {
                        for (a = h + 1; u > a && ">" !== i[a]; a++) ;
                        u > a ? h = a + 1 :o.noMoreGT = !0;
                    }
                    o.noMoreGT && e.pcdata && e.pcdata("&lt;?", r, G, c(e, i, h, o, r));
                    break;

                  case ">":
                    e.pcdata && e.pcdata("&gt;", r, G, c(e, i, h, o, r));
                    break;

                  case "":
                    break;

                  default:
                    e.pcdata && e.pcdata(g, r, G, c(e, i, h, o, r));
                }
            }
            e.endDoc && e.endDoc(r);
        } catch (b) {
            if (b !== G) throw b;
        }
    }
    function u(t) {
        var e = /(<\/|<\!--|<[!?]|[&<>])/g;
        if (t += "", H) return t.split(e);
        for (var i, n = [], o = 0; null !== (i = e.exec(t)); ) n.push(t.substring(o, i.index)), 
        n.push(i[0]), o = i.index + i[0].length;
        return n.push(t.substring(o)), n;
    }
    function d(t, e, i, n, o, r) {
        var s = g(t, e);
        return s ? (i.endTag && i.endTag(s.name, n, o, c(i, t, e, r, n)), s.next) :t.length;
    }
    function p(t, e, i, n, o, r) {
        var s = g(t, e);
        return s ? (i.startTag && i.startTag(s.name, s.attrs, n, o, c(i, t, s.next, r, n)), 
        s.eflags & $ ? f(t, s, i, n, o, r) :s.next) :t.length;
    }
    function f(e, i, n, o, r, a) {
        var l = e.length;
        U.hasOwnProperty(i.name) || (U[i.name] = new RegExp("^" + i.name + "(?:[\\s\\/]|$)", "i"));
        for (var h = U[i.name], u = i.next, d = i.next + 1; l > d && ("</" !== e[d - 1] || !h.test(e[d])); d++) ;
        l > d && (d -= 1);
        var p = e.slice(u, d).join("");
        if (i.eflags & t.eflags.CDATA) n.cdata && n.cdata(p, o, r, c(n, e, d, a, o)); else {
            if (!(i.eflags & t.eflags.RCDATA)) throw new Error("bug");
            n.rcdata && n.rcdata(s(p), o, r, c(n, e, d, a, o));
        }
        return d;
    }
    function g(e, i) {
        var n = /^([\w:]+)/.exec(e[i]), o = {};
        o.name = n[1].toLowerCase(), o.eflags = t.ELEMENTS[o.name];
        for (var r = e[i].substr(n[0].length), s = i + 1, a = e.length; a > s && ">" !== e[s]; s++) r += e[s];
        if (s >= a) return void 0;
        for (var l = []; "" !== r; ) if (n = j.exec(r)) {
            if (n[4] && !n[5] || n[6] && !n[7]) {
                for (var c = n[4] || n[6], h = !1, u = [ r, e[s++] ]; a > s; s++) {
                    if (h) {
                        if (">" === e[s]) break;
                    } else 0 <= e[s].indexOf(c) && (h = !0);
                    u.push(e[s]);
                }
                if (s >= a) break;
                r = u.join("");
                continue;
            }
            var d = n[1].toLowerCase(), p = n[2] ? m(n[3]) :d;
            l.push(d, p), r = r.substr(n[0].length);
        } else r = r.replace(/^[\s\S][^a-z\s]*/, "");
        return o.attrs = l, o.next = s + 1, o;
    }
    function m(t) {
        var e = t.charCodeAt(0);
        return (34 === e || 39 === e) && (t = t.substr(1, t.length - 2)), o(n(t));
    }
    function _(e) {
        var i, n, o = function(t, e) {
            n || e.push(t);
        };
        return a({
            startDoc:function() {
                i = [], n = !1;
            },
            startTag:function(o, s, a) {
                if (!n && t.ELEMENTS.hasOwnProperty(o)) {
                    var l = t.ELEMENTS[o];
                    if (!(l & t.eflags.FOLDABLE)) {
                        if (s = e(o, s), !s) return n = !(l & t.eflags.EMPTY), void 0;
                        l & t.eflags.EMPTY || i.push(o), a.push("<", o);
                        for (var c = 0, h = s.length; h > c; c += 2) {
                            var u = s[c], d = s[c + 1];
                            null !== d && void 0 !== d && a.push(" ", u, '="', r(d), '"');
                        }
                        a.push(">");
                    }
                }
            },
            endTag:function(e, o) {
                if (n) return n = !1, void 0;
                if (t.ELEMENTS.hasOwnProperty(e)) {
                    var r = t.ELEMENTS[e];
                    if (!(r & (t.eflags.EMPTY | t.eflags.FOLDABLE))) {
                        var s;
                        if (r & t.eflags.OPTIONAL_ENDTAG) for (s = i.length; --s >= 0; ) {
                            var a = i[s];
                            if (a === e) break;
                            if (!(t.ELEMENTS[a] & t.eflags.OPTIONAL_ENDTAG)) return;
                        } else for (s = i.length; --s >= 0 && i[s] !== e; ) ;
                        if (0 > s) return;
                        for (var l = i.length; --l > s; ) {
                            var a = i[l];
                            t.ELEMENTS[a] & t.eflags.OPTIONAL_ENDTAG || o.push("</", a, ">");
                        }
                        i.length = s, o.push("</", e, ">");
                    }
                }
            },
            pcdata:o,
            rcdata:o,
            cdata:o,
            endDoc:function(t) {
                for (;i.length; i.length--) t.push("</", i[i.length - 1], ">");
            }
        });
    }
    function v(t, e, i, n, o) {
        if (!o) return null;
        var r = ("" + t).match(V);
        return !r || r[1] && !W.test(r[1]) ? null :o(t, e, i, n);
    }
    function y(t, e, i, n, o) {
        if (i || t(e + " removed", {
            change:"removed",
            tagName:e
        }), n !== o) {
            var r = "changed";
            n && !o ? r = "removed" :!n && o && (r = "added"), t(e + "." + i + " " + r, {
                change:r,
                tagName:e,
                attribName:i,
                oldValue:n,
                newValue:o
            });
        }
    }
    function b(t, e, i) {
        var n;
        return n = e + "::" + i, t.hasOwnProperty(n) ? t[n] :(n = "*::" + i, t.hasOwnProperty(n) ? t[n] :void 0);
    }
    function w(e, i) {
        return b(t.LOADERTYPES, e, i);
    }
    function C(e, i) {
        return b(t.URIEFFECTS, e, i);
    }
    function T(e, i, n, o, r) {
        for (var s = 0; s < i.length; s += 2) {
            var a, l = i[s], c = i[s + 1], h = c, u = null;
            if (a = e + "::" + l, (t.ATTRIBS.hasOwnProperty(a) || (a = "*::" + l, t.ATTRIBS.hasOwnProperty(a))) && (u = t.ATTRIBS[a]), 
            null !== u) switch (u) {
              case t.atype.NONE:
                break;

              case t.atype.SCRIPT:
                c = null, r && y(r, e, l, h, c);
                break;

              case t.atype.STYLE:
                if ("undefined" == typeof S) {
                    c = null, r && y(r, e, l, h, c);
                    break;
                }
                var d = [];
                S(c, {
                    declaration:function(e, i) {
                        var o = e.toLowerCase(), r = k[o];
                        r && (O(o, r, i, n ? function(e) {
                            return v(e, t.ueffects.SAME_DOCUMENT, t.ltypes.SANDBOXED, {
                                TYPE:"CSS",
                                CSS_PROP:o
                            }, n);
                        } :null), d.push(e + ": " + i.join(" ")));
                    }
                }), c = d.length > 0 ? d.join(" ; ") :null, r && y(r, e, l, h, c);
                break;

              case t.atype.ID:
              case t.atype.IDREF:
              case t.atype.IDREFS:
              case t.atype.GLOBAL_NAME:
              case t.atype.LOCAL_NAME:
              case t.atype.CLASSES:
                c = o ? o(c) :c, r && y(r, e, l, h, c);
                break;

              case t.atype.URI:
                c = v(c, C(e, l), w(e, l), {
                    TYPE:"MARKUP",
                    XML_ATTR:l,
                    XML_TAG:e
                }, n), r && y(r, e, l, h, c);
                break;

              case t.atype.URI_FRAGMENT:
                c && "#" === c.charAt(0) ? (c = c.substring(1), c = o ? o(c) :c, null !== c && void 0 !== c && (c = "#" + c)) :c = null, 
                r && y(r, e, l, h, c);
                break;

              default:
                c = null, r && y(r, e, l, h, c);
            } else c = null, r && y(r, e, l, h, c);
            i[s + 1] = c;
        }
        return i;
    }
    function D(e, i, n) {
        return function(o, r) {
            return t.ELEMENTS[o] & t.eflags.UNSAFE ? (n && y(n, o, void 0, void 0, void 0), 
            void 0) :T(o, r, e, i, n);
        };
    }
    function E(t, e) {
        var i = [];
        return _(e)(t, i), i.join("");
    }
    function x(t, e, i, n) {
        var o = D(e, i, n);
        return E(t, o);
    }
    var S, O, k;
    "undefined" != typeof window && (S = window.parseCssDeclarations, O = window.sanitizeCssProperty, 
    k = window.cssSchema);
    var I = {
        lt:"<",
        gt:">",
        amp:"&",
        nbsp:" ",
        quot:'"',
        apos:"'"
    }, R = /^#(\d+)$/, P = /^#x([0-9A-Fa-f]+)$/, N = /\0/g, A = /&(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/g, M = /^(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/, L = /&/g, B = /&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi, z = /[<]/g, K = />/g, F = /\"/g, j = new RegExp("^\\s*([-.:\\w]+)(?:\\s*(=)\\s*((\")[^\"]*(\"|$)|(')[^']*('|$)|(?=[a-z][-\\w]*\\s*=)|[^\"'\\s]*))?", "i"), H = 3 === "a,b".split(/(,)/).length, $ = t.eflags.CDATA | t.eflags.RCDATA, G = {}, U = {}, V = new RegExp("^(?:([^:/?# ]+):)?"), W = /^(?:https?|mailto)$/i, q = {};
    return q.escapeAttrib = q.escapeAttrib = r, q.makeHtmlSanitizer = q.makeHtmlSanitizer = _, 
    q.makeSaxParser = q.makeSaxParser = a, q.makeTagPolicy = q.makeTagPolicy = D, q.normalizeRCData = q.normalizeRCData = s, 
    q.sanitize = q.sanitize = x, q.sanitizeAttribs = q.sanitizeAttribs = T, q.sanitizeWithPolicy = q.sanitizeWithPolicy = E, 
    q.unescapeEntities = q.unescapeEntities = o, q;
}(html4), html_sanitize = html.sanitize;

"undefined" != typeof window && (window.html = html, window.html_sanitize = html_sanitize);